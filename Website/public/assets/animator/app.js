var t,e=(t=import.meta.url,function(e={}){var i,n,s=e;s.ready=new Promise(((t,e)=>{i=t,n=e}));var r=Object.assign({},s),o="";"undefined"!=typeof document&&document.currentScript&&(o=document.currentScript.src),t&&(o=t),o=o.startsWith("blob:")?"":o.substr(0,o.replace(/[?#].*/,"").lastIndexOf("/")+1);var a=console.log.bind(console),l=console.error.bind(console);Object.assign(s,r),r=null,"object"!=typeof WebAssembly&&_("no native wasm support detected");var c,u,h,d,f,p,g,m,y,v=!1;function b(){var t=c.buffer;u=new Int8Array(t),d=new Int16Array(t),s.HEAPU8=h=new Uint8Array(t),s.HEAPU16=f=new Uint16Array(t),s.HEAP32=p=new Int32Array(t),s.HEAPU32=g=new Uint32Array(t),s.HEAPF32=m=new Float32Array(t),y=new Float64Array(t)}var x=[],w=[],M=[],S=0,k=null;function _(t){throw l(t="Aborted("+t+")"),v=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),n(t),t}var I,C=t=>t.startsWith("data:application/octet-stream;base64,");function L(){throw"both async and sync fetching of the wasm failed"}function N(t,e,i){return function(t){return"function"==typeof fetch?fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw`failed to load wasm binary file at '${t}'`;return e.arrayBuffer()})).catch((()=>L())):Promise.resolve().then((()=>L()))}(t).then((t=>WebAssembly.instantiate(t,e))).then(i,(t=>{l(`failed to asynchronously prepare wasm: ${t}`),_(t)}))}s.locateFile?C(I="skia.wasm")||(I=o+I):I=new URL("skia.wasm",import.meta.url).href;var j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,T=(t,e,i)=>{var n=e+i;for(i=e;t[i]&&!(i>=n);)++i;if(16<i-e&&t.buffer&&j)return j.decode(t.subarray(e,i));for(n="";e<i;){var s=t[e++];if(128&s){var r=63&t[e++];if(192==(224&s))n+=String.fromCharCode((31&s)<<6|r);else{var o=63&t[e++];65536>(s=224==(240&s)?(15&s)<<12|r<<6|o:(7&s)<<18|r<<12|o<<6|63&t[e++])?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else n+=String.fromCharCode(s)}return n},z={},A=t=>{for(;t.length;){var e=t.pop();t.pop()(e)}};function P(t){return this.fromWireType(g[t>>2])}var D,E,O,R={},W={},B={},U=(t,e,i)=>{function n(e){if((e=i(e)).length!==t.length)throw new D("Mismatched type converter count");for(var n=0;n<t.length;++n)F(t[n],e[n])}t.forEach((function(t){B[t]=e}));var s=Array(e.length),r=[],o=0;e.forEach(((t,e)=>{W.hasOwnProperty(t)?s[e]=W[t]:(r.push(t),R.hasOwnProperty(t)||(R[t]=[]),R[t].push((()=>{s[e]=W[t],++o===r.length&&n(s)})))})),0===r.length&&n(s)},$=t=>{for(var e="";h[t];)e+=E[h[t++]];return e};function F(t,e,i={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(t,e,i={}){var n=e.name;if(!t)throw new O(`type "${n}" must have a positive integer typeid pointer`);if(W.hasOwnProperty(t)){if(i.Ie)return;throw new O(`Cannot register type '${n}' twice`)}W[t]=e,delete B[t],R.hasOwnProperty(t)&&(e=R[t],delete R[t],e.forEach((t=>t())))}(t,e,i)}var V,G=t=>{throw new O(t.$$.ptrType.registeredClass.name+" instance already deleted")},H=!1,Z=()=>{},Y=(t,e,i)=>e===i?t:void 0===i.baseClass||null===(t=Y(t,e,i.baseClass))?null:i.downcast(t),Q={},J=[],q=()=>{for(;J.length;){var t=J.pop();t.$$.Vd=!1,t.delete()}},K={},X=(t,e)=>{if(!e.ptrType||!e.ptr)throw new D("makeClassHandle requires ptr and ptrType");if(!!e.smartPtrType!=!!e.smartPtr)throw new D("Both smartPtrType and smartPtr must be specified");return e.count={value:1},tt(Object.create(t,{$$:{value:e,writable:!0}}))},tt=t=>"undefined"==typeof FinalizationRegistry?(tt=t=>t,t):(H=new FinalizationRegistry((t=>{--(t=t.$$).count.value,0===t.count.value&&(t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr))})),tt=t=>{var e=t.$$;return e.smartPtr&&H.register(t,{$$:e},t),t},Z=t=>{H.unregister(t)},tt(t));function et(){}var it=(t,e)=>Object.defineProperty(e,"name",{value:t}),nt=(t,e,i)=>{if(void 0===t[e].Id){var n=t[e];t[e]=function(...n){if(!t[e].Id.hasOwnProperty(n.length))throw new O(`Function '${i}' called with an invalid number of arguments (${n.length}) - expects one of (${t[e].Id})!`);return t[e].Id[n.length].apply(this,n)},t[e].Id=[],t[e].Id[n.Td]=n}},st=(t,e)=>{if(s.hasOwnProperty(t))throw new O(`Cannot register public name '${t}' twice`);s[t]=e};function rt(t,e,i,n,s,r,o,a){this.name=t,this.constructor=e,this.instancePrototype=i,this.rawDestructor=n,this.baseClass=s,this.getActualType=r,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}var ot=(t,e,i)=>{for(;e!==i;){if(!e.upcast)throw new O(`Expected null or instance of ${i.name}, got an instance of ${e.name}`);t=e.upcast(t),e=e.baseClass}return t};function at(t,e){if(null===e){if(this.isReference)throw new O(`null is not a valid ${this.name}`);return 0}if(!e.$$)throw new O(`Cannot pass "${Tt(e)}" as a ${this.name}`);if(!e.$$.ptr)throw new O(`Cannot pass deleted object as a pointer of type ${this.name}`);return ot(e.$$.ptr,e.$$.ptrType.registeredClass,this.registeredClass)}function lt(t,e){if(null===e){if(this.isReference)throw new O(`null is not a valid ${this.name}`);if(this.isSmartPointer){var i=this.rawConstructor();return null!==t&&t.push(this.rawDestructor,i),i}return 0}if(!e||!e.$$)throw new O(`Cannot pass "${Tt(e)}" as a ${this.name}`);if(!e.$$.ptr)throw new O(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.isConst&&e.$$.ptrType.isConst)throw new O(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);if(i=ot(e.$$.ptr,e.$$.ptrType.registeredClass,this.registeredClass),this.isSmartPointer){if(void 0===e.$$.smartPtr)throw new O("Passing raw pointer to smart pointer is illegal");switch(this.sharingPolicy){case 0:if(e.$$.smartPtrType!==this)throw new O(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);i=e.$$.smartPtr;break;case 1:i=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)i=e.$$.smartPtr;else{var n=e.clone();i=this.rawShare(i,Ct((()=>n.delete()))),null!==t&&t.push(this.rawDestructor,i)}break;default:throw new O("Unsupporting sharing policy")}}return i}function ct(t,e){if(null===e){if(this.isReference)throw new O(`null is not a valid ${this.name}`);return 0}if(!e.$$)throw new O(`Cannot pass "${Tt(e)}" as a ${this.name}`);if(!e.$$.ptr)throw new O(`Cannot pass deleted object as a pointer of type ${this.name}`);if(e.$$.ptrType.isConst)throw new O(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);return ot(e.$$.ptr,e.$$.ptrType.registeredClass,this.registeredClass)}function ut(t,e,i,n,s,r,o,a,l,c,u){this.name=t,this.registeredClass=e,this.isReference=i,this.isConst=n,this.isSmartPointer=s,this.pointeeType=r,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,s||void 0!==e.baseClass?this.toWireType=lt:(this.toWireType=n?at:ct,this.destructorFunction=null)}var ht,dt,ft=[],pt=t=>{var e=ft[t];return e||(t>=ft.length&&(ft.length=t+1),ft[t]=e=ht.get(t)),e},gt=(t,e)=>{var i=(t=$(t)).includes("j")?((t,e)=>(...i)=>((t,e,i=[])=>t.includes("j")?(0,s["dynCall_"+t])(e,...i):pt(e)(...i))(t,e,i))(t,e):pt(e);if("function"!=typeof i)throw new O(`unknown function pointer with signature ${t}: ${e}`);return i},mt=t=>{t=Me(t);var e=$(t);return xe(t),e},yt=(t,e)=>{var i=[],n={};throw e.forEach((function t(e){n[e]||W[e]||(B[e]?B[e].forEach(t):(i.push(e),n[e]=!0))})),new dt(`${t}: `+i.map(mt).join([", "]))};function vt(t,e,i,n,s){var r=e.length;if(2>r)throw new O("argTypes array size mismatch! Must at least get return value and 'this' types!");var o=null!==e[1]&&null!==i,a=function(t){for(var e=1;e<t.length;++e)if(null!==t[e]&&void 0===t[e].destructorFunction)return!0;return!1}(e),l="void"!==e[0].name,c=r-2,u=Array(c),h=[],d=[];return it(t,(function(...i){if(i.length!==c)throw new O(`function ${t} called with ${i.length} arguments, expected ${c}`);if(d.length=0,h.length=o?2:1,h[0]=s,o){var r=e[1].toWireType(d,this);h[1]=r}for(var f=0;f<c;++f)u[f]=e[f+2].toWireType(d,i[f]),h.push(u[f]);if(i=n(...h),a)A(d);else for(f=o?1:2;f<e.length;f++){var p=1===f?r:u[f-2];null!==e[f].destructorFunction&&e[f].destructorFunction(p)}return l?e[0].fromWireType(i):void 0}))}var bt,xt=(t,e)=>{for(var i=[],n=0;n<t;n++)i.push(g[e+4*n>>2]);return i},wt=t=>{const e=(t=t.trim()).indexOf("(");return-1!==e?t.substr(0,e):t},Mt=(t,e,i)=>{if(!(t instanceof Object))throw new O(`${i} with invalid "this": ${t}`);if(!(t instanceof e.registeredClass.constructor))throw new O(`${i} incompatible with "this" of type ${t.constructor.name}`);if(!t.$$.ptr)throw new O(`cannot call emscripten binding method ${i} on deleted object`);return ot(t.$$.ptr,t.$$.ptrType.registeredClass,e.registeredClass)},St=[],kt=[],_t=t=>{9<t&&0==--kt[t+1]&&(kt[t]=void 0,St.push(t))},It=t=>{if(!t)throw new O("Cannot use deleted val. handle = "+t);return kt[t]},Ct=t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:const e=St.pop()||kt.length;return kt[e]=t,kt[e+1]=1,e}},Lt={name:"emscripten::val",fromWireType:t=>{var e=It(t);return _t(t),e},toWireType:(t,e)=>Ct(e),argPackAdvance:8,readValueFromPointer:P,destructorFunction:null},Nt=(t,e,i)=>{switch(e){case 1:return i?function(t){return this.fromWireType(u[t])}:function(t){return this.fromWireType(h[t])};case 2:return i?function(t){return this.fromWireType(d[t>>1])}:function(t){return this.fromWireType(f[t>>1])};case 4:return i?function(t){return this.fromWireType(p[t>>2])}:function(t){return this.fromWireType(g[t>>2])};default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},jt=(t,e)=>{var i=W[t];if(void 0===i)throw t=`${e} has unknown type ${mt(t)}`,new O(t);return i},Tt=t=>{if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t},zt=(t,e)=>{switch(e){case 4:return function(t){return this.fromWireType(m[t>>2])};case 8:return function(t){return this.fromWireType(y[t>>3])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},At=(t,e,i)=>{switch(e){case 1:return i?t=>u[t]:t=>h[t];case 2:return i?t=>d[t>>1]:t=>f[t>>1];case 4:return i?t=>p[t>>2]:t=>g[t>>2];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},Pt=(t,e,i,n)=>{if(!(0<n))return 0;var s=i;n=i+n-1;for(var r=0;r<t.length;++r){var o=t.charCodeAt(r);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++r)),127>=o){if(i>=n)break;e[i++]=o}else{if(2047>=o){if(i+1>=n)break;e[i++]=192|o>>6}else{if(65535>=o){if(i+2>=n)break;e[i++]=224|o>>12}else{if(i+3>=n)break;e[i++]=240|o>>18,e[i++]=128|o>>12&63}e[i++]=128|o>>6&63}e[i++]=128|63&o}}return e[i]=0,i-s},Dt=(t,e,i)=>Pt(t,h,e,i),Et=t=>{for(var e=0,i=0;i<t.length;++i){var n=t.charCodeAt(i);127>=n?e++:2047>=n?e+=2:55296<=n&&57343>=n?(e+=4,++i):e+=3}return e},Ot="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,Rt=(t,e)=>{for(var i=t>>1,n=i+e/2;!(i>=n)&&f[i];)++i;if(32<(i<<=1)-t&&Ot)return Ot.decode(h.subarray(t,i));for(i="",n=0;!(n>=e/2);++n){var s=d[t+2*n>>1];if(0==s)break;i+=String.fromCharCode(s)}return i},Wt=(t,e,i)=>{if(i??=2147483647,2>i)return 0;var n=e;i=(i-=2)<2*t.length?i/2:t.length;for(var s=0;s<i;++s)d[e>>1]=t.charCodeAt(s),e+=2;return d[e>>1]=0,e-n},Bt=t=>2*t.length,Ut=(t,e)=>{for(var i=0,n="";!(i>=e/4);){var s=p[t+4*i>>2];if(0==s)break;++i,65536<=s?(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s)):n+=String.fromCharCode(s)}return n},$t=(t,e,i)=>{if(i??=2147483647,4>i)return 0;var n=e;i=n+i-4;for(var s=0;s<t.length;++s){var r=t.charCodeAt(s);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&t.charCodeAt(++s)),p[e>>2]=r,(e+=4)+4>i)break}return p[e>>2]=0,e-n},Ft=t=>{for(var e=0,i=0;i<t.length;++i){var n=t.charCodeAt(i);55296<=n&&57343>=n&&++i,e+=4}return e},Vt=(t,e,i)=>{var n=[];return t=t.toWireType(n,i),n.length&&(g[e>>2]=Ct(n)),t},Gt=[],Ht={},Zt=t=>{var e=Ht[t];return void 0===e?$(t):e},Yt=()=>{function t(t){t.$$$embind_global$$$=t;var e="object"==typeof $$$embind_global$$$&&t.$$$embind_global$$$==t;return e||delete t.$$$embind_global$$$,e}if("object"==typeof globalThis)return globalThis;if("object"==typeof $$$embind_global$$$)return $$$embind_global$$$;if("object"==typeof global&&t(global)?$$$embind_global$$$=global:"object"==typeof self&&t(self)&&($$$embind_global$$$=self),"object"==typeof $$$embind_global$$$)return $$$embind_global$$$;throw Error("unable to get global object.")},Qt=Reflect.construct,Jt=t=>{var e="EXT_color_buffer_float EXT_conservative_depth EXT_disjoint_timer_query_webgl2 EXT_texture_norm16 NV_shader_noperspective_interpolation WEBGL_clip_cull_distance EXT_color_buffer_half_float EXT_depth_clamp EXT_float_blend EXT_texture_compression_bptc EXT_texture_compression_rgtc EXT_texture_filter_anisotropic KHR_parallel_shader_compile OES_texture_float_linear WEBGL_blend_func_extended WEBGL_compressed_texture_astc WEBGL_compressed_texture_etc WEBGL_compressed_texture_etc1 WEBGL_compressed_texture_s3tc WEBGL_compressed_texture_s3tc_srgb WEBGL_debug_renderer_info WEBGL_debug_shaders WEBGL_lose_context WEBGL_multi_draw".split(" ");return(t.getSupportedExtensions()||[]).filter((t=>e.includes(t)))},qt={counter:1,ce:[],Jd:[],de:[],$d:[],Xd:[],Kd:[],je:[],Ld:[],$e:{},af:[],Od:[],df:[],Pd:[],te:{},ue:{},xe:4,Hd:t=>{qt.le||(qt.le=t)},Yd:t=>{for(var e=qt.counter++,i=t.length;i<e;i++)t[i]=null;return e},Wd:(t,e,i,n)=>{for(var s=0;s<t;s++){var r=me[i](),o=r&&qt.Yd(n);r?(r.name=o,n[o]=r):qt.Hd(1282),p[e+4*s>>2]=o}},Ee:(t,e,i,n)=>{var s="";for(t=0;t<e;++t){var r=(r=g[i+4*t>>2])?T(h,r,n?g[n+4*t>>2]:void 0):"";s+=r}return s},createContext:(t,e)=>(t=t.getContext("webgl2",e))?qt.Me(t,e):0,Me:(t,e)=>{var i=qt.Yd(qt.Ld),n={handle:i,attributes:e,version:e.Ye,Sd:t};return t.canvas&&(t.canvas.ye=n),qt.Ld[i]=n,(void 0===e.Be||e.Be)&&qt.Je(n),i},makeContextCurrent:t=>(qt.Nd=qt.Ld[t],s.Ve=me=qt.Nd?.Sd,!(t&&!me)),getContext:t=>qt.Ld[t],deleteContext:t=>{qt.Nd===qt.Ld[t]&&(qt.Nd=null),"object"==typeof JSEvents&&JSEvents.bf(qt.Ld[t].Sd.canvas),qt.Ld[t]&&qt.Ld[t].Sd.canvas&&(qt.Ld[t].Sd.canvas.ye=void 0),qt.Ld[t]=null},Je:t=>{if(t||=qt.Nd,!t.Ke){t.Ke=!0;var e=t.Sd;e.pe=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),e.se=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=t.version&&(e.qe=e.getExtension("EXT_disjoint_timer_query_webgl2")),(2>t.version||!e.qe)&&(e.qe=e.getExtension("EXT_disjoint_timer_query")),e.Ze=e.getExtension("WEBGL_multi_draw"),Jt(e).forEach((t=>{t.includes("lose_context")||t.includes("debug")||e.getExtension(t)}))}}},Kt={},Xt=()=>{if(!bt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(t in Kt)void 0===Kt[t]?delete e[t]:e[t]=Kt[t];var i=[];for(t in e)i.push(`${t}=${e[t]}`);bt=i}return bt},te=[null,[],[]],ee=t=>{me.bindVertexArray(qt.je[t])},ie=(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2];me.deleteVertexArray(qt.je[n]),qt.je[n]=null}},ne=[],se=(t,e)=>{qt.Wd(t,e,"createVertexArray",qt.je)};function re(){var t=Jt(me);return t.concat(t.map((t=>"GL_"+t)))}var oe=(t,e,i)=>{if(e){var n=void 0;switch(t){case 36346:n=1;break;case 36344:return void(0!=i&&1!=i&&qt.Hd(1280));case 34814:case 36345:n=0;break;case 34466:var s=me.getParameter(34467);n=s?s.length:0;break;case 33309:if(2>qt.Nd.version)return void qt.Hd(1282);n=re().length;break;case 33307:case 33308:if(2>qt.Nd.version)return void qt.Hd(1280);n=33307==t?3:0}if(void 0===n)switch(s=me.getParameter(t),typeof s){case"number":n=s;break;case"boolean":n=s?1:0;break;case"string":return void qt.Hd(1280);case"object":if(null===s)switch(t){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:n=0;break;default:return void qt.Hd(1280)}else{if(s instanceof Float32Array||s instanceof Uint32Array||s instanceof Int32Array||s instanceof Array){for(t=0;t<s.length;++t)switch(i){case 0:p[e+4*t>>2]=s[t];break;case 2:m[e+4*t>>2]=s[t];break;case 4:u[e+t]=s[t]?1:0}return}try{n=0|s.name}catch(e){return qt.Hd(1280),void l(`GL_INVALID_ENUM in glGet${i}v: Unknown object returned from WebGL getParameter(${t})! (error: ${e})`)}}break;default:return qt.Hd(1280),void l(`GL_INVALID_ENUM in glGet${i}v: Native code calling glGet${i}v(${t}) and it returns ${s} of type ${typeof s}!`)}switch(i){case 1:i=n,g[e>>2]=i,g[e+4>>2]=(i-g[e>>2])/4294967296;break;case 0:p[e>>2]=n;break;case 2:m[e>>2]=n;break;case 4:u[e]=n?1:0}}else qt.Hd(1281)},ae=t=>{var e=Et(t)+1,i=we(e);return i&&Pt(t,h,i,e),i},le=t=>"]"==t.slice(-1)&&t.lastIndexOf("["),ce=t=>0==(t-=5120)?u:1==t?h:2==t?d:4==t?p:6==t?m:5==t||28922==t||28520==t||30779==t||30782==t?g:f,ue=t=>{var e=me.Ae;if(e){var i=e.ae[t];return"number"==typeof i&&(e.ae[t]=i=me.getUniformLocation(e,e.ve[t]+(0<i?`[${i}]`:""))),i}qt.Hd(1282)},he=t=>0==t%4&&(0!=t%100||0==t%400),de=[31,29,31,30,31,30,31,31,30,31,30,31],fe=[31,28,31,30,31,30,31,31,30,31,30,31];D=s.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}};for(var pe=Array(256),ge=0;256>ge;++ge)pe[ge]=String.fromCharCode(ge);E=pe,O=s.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Object.assign(et.prototype,{isAliasOf:function(t){if(!(this instanceof et&&t instanceof et))return!1;var e=this.$$.ptrType.registeredClass,i=this.$$.ptr;t.$$=t.$$;var n=t.$$.ptrType.registeredClass;for(t=t.$$.ptr;e.baseClass;)i=e.upcast(i),e=e.baseClass;for(;n.baseClass;)t=n.upcast(t),n=n.baseClass;return e===n&&i===t},clone:function(){if(this.$$.ptr||G(this),this.$$.Zd)return this.$$.count.value+=1,this;var t=tt,e=Object,i=e.create,n=Object.getPrototypeOf(this),s=this.$$;return(t=t(i.call(e,n,{$$:{value:{count:s.count,Vd:s.Vd,Zd:s.Zd,ptr:s.ptr,ptrType:s.ptrType,smartPtr:s.smartPtr,smartPtrType:s.smartPtrType}}}))).$$.count.value+=1,t.$$.Vd=!1,t},delete(){if(this.$$.ptr||G(this),this.$$.Vd&&!this.$$.Zd)throw new O("Object already scheduled for deletion");Z(this);var t=this.$$;--t.count.value,0===t.count.value&&(t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)),this.$$.Zd||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted:function(){return!this.$$.ptr},deleteLater:function(){if(this.$$.ptr||G(this),this.$$.Vd&&!this.$$.Zd)throw new O("Object already scheduled for deletion");return J.push(this),1===J.length&&V&&V(q),this.$$.Vd=!0,this}}),s.getInheritedInstanceCount=()=>Object.keys(K).length,s.getLiveInheritedInstances=()=>{var t,e=[];for(t in K)K.hasOwnProperty(t)&&e.push(K[t]);return e},s.flushPendingDeletes=q,s.setDelayFunction=t=>{V=t,J.length&&V&&V(q)},Object.assign(ut.prototype,{De(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},oe(t){this.rawDestructor?.(t)},argPackAdvance:8,readValueFromPointer:P,fromWireType:function(t){function e(){return this.isSmartPointer?X(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:i,smartPtrType:this,smartPtr:t}):X(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var i=this.De(t);if(!i)return this.oe(t),null;var n=((t,e)=>{if(void 0===e)throw new O("ptr should not be undefined");for(;t.baseClass;)e=t.upcast(e),t=t.baseClass;return K[e]})(this.registeredClass,i);if(void 0!==n)return 0===n.$$.count.value?(n.$$.ptr=i,n.$$.smartPtr=t,n.clone()):(n=n.clone(),this.oe(t),n);if(n=this.registeredClass.getActualType(i),!(n=Q[n]))return e.call(this);n=this.isConst?n.ze:n.pointerType;var s=Y(i,this.registeredClass,n.registeredClass);return null===s?e.call(this):this.isSmartPointer?X(n.registeredClass.instancePrototype,{ptrType:n,ptr:s,smartPtrType:this,smartPtr:t}):X(n.registeredClass.instancePrototype,{ptrType:n,ptr:s})}}),dt=s.UnboundTypeError=((t,e)=>{var i=it(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},i})(Error,"UnboundTypeError"),kt.push(0,1,void 0,1,null,1,!0,1,!1,1),s.count_emval_handles=()=>kt.length/2-5-St.length;for(var me,ye=0;32>ye;++ye)ne.push(Array(ye));var ve={ac:function(){return 0},X:function(){},Zb:()=>{},F:t=>{var e=z[t];delete z[t];var i=e.rawConstructor,n=e.rawDestructor,s=e.re,r=s.map((t=>t.He)).concat(s.map((t=>t.Pe)));U([t],r,(t=>{var r={};return s.forEach(((e,i)=>{var n=t[i],o=e.Fe,a=e.Ge,l=t[i+s.length],c=e.Oe,u=e.Qe;r[e.Ce]={read:t=>n.fromWireType(o(a,t)),write:(t,e)=>{var i=[];c(u,t,l.toWireType(i,e)),A(i)}}})),[{name:e.name,fromWireType:t=>{var e,i={};for(e in r)i[e]=r[e].read(t);return n(t),i},toWireType:(t,e)=>{for(var s in r)if(!(s in e))throw new TypeError(`Missing field: "${s}"`);var o=i();for(s in r)r[s].write(o,e[s]);return null!==t&&t.push(n,o),o},argPackAdvance:8,readValueFromPointer:P,destructorFunction:n}]}))},Lb:()=>{},gc:(t,e,i,n)=>{F(t,{name:e=$(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?i:n},argPackAdvance:8,readValueFromPointer:function(t){return this.fromWireType(h[t])},destructorFunction:null})},s:(t,e,i,n,r,o,a,l,c,u,h,d,f)=>{h=$(h),o=gt(r,o),l&&=gt(a,l),u&&=gt(c,u),f=gt(d,f);var p=(t=>{if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?`_${t}`:t})(h);st(p,(function(){yt(`Cannot construct ${h} due to unbound types`,[n])})),U([t,e,i],n?[n]:[],(e=>{if(e=e[0],n)var i=e.registeredClass,r=i.instancePrototype;else r=et.prototype;e=it(h,(function(...t){if(Object.getPrototypeOf(this)!==a)throw new O("Use 'new' to construct "+h);if(void 0===d.constructor_body)throw new O(h+" has no accessible constructor");var e=d.constructor_body[t.length];if(void 0===e)throw new O(`Tried to invoke ctor of ${h} with invalid number of parameters (${t.length}) - expected (${Object.keys(d.constructor_body).toString()}) parameters instead!`);return e.apply(this,t)}));var a=Object.create(r,{constructor:{value:e}});e.prototype=a;var c,d=new rt(h,e,a,f,i,o,l,u);return d.baseClass&&((c=d.baseClass).be??(c.be=[]),d.baseClass.be.push(d)),i=new ut(h,d,!0,!1,!1),c=new ut(h+"*",d,!1,!1,!1),r=new ut(h+" const*",d,!1,!0,!1),Q[t]={pointerType:c,ze:r},((t,e)=>{if(!s.hasOwnProperty(t))throw new D("Replacing nonexistent public symbol");s[t]=e,s[t].Td=void 0})(p,e),[i,c,r]}))},f:(t,e,i,n,s,r,o)=>{var a=xt(i,n);e=$(e),e=wt(e),r=gt(s,r),U([],[t],(t=>{function n(){yt(`Cannot call ${s} due to unbound types`,a)}var s=`${(t=t[0]).name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]);var l=t.registeredClass.constructor;return void 0===l[e]?(n.Td=i-1,l[e]=n):(nt(l,e,s),l[e].Id[i-1]=n),U([],a,(n=>{if(n=[n[0],null].concat(n.slice(1)),n=vt(s,n,null,r,o),void 0===l[e].Id?(n.Td=i-1,l[e]=n):l[e].Id[i-1]=n,t.registeredClass.be)for(const i of t.registeredClass.be)i.constructor.hasOwnProperty(e)||(i.constructor[e]=n);return[]})),[]}))},C:(t,e,i,n,s,r)=>{var o=xt(e,i);s=gt(n,s),U([],[t],(t=>{var i=`constructor ${(t=t[0]).name}`;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new O(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${t.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return t.registeredClass.constructor_body[e-1]=()=>{yt(`Cannot construct ${t.name} due to unbound types`,o)},U([],o,(n=>(n.splice(1,0,null),t.registeredClass.constructor_body[e-1]=vt(i,n,null,s,r),[]))),[]}))},c:(t,e,i,n,s,r,o,a)=>{var l=xt(i,n);e=$(e),e=wt(e),r=gt(s,r),U([],[t],(t=>{function n(){yt(`Cannot call ${s} due to unbound types`,l)}var s=`${(t=t[0]).name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),a&&t.registeredClass.pureVirtualFunctions.push(e);var c=t.registeredClass.instancePrototype,u=c[e];return void 0===u||void 0===u.Id&&u.className!==t.name&&u.Td===i-2?(n.Td=i-2,n.className=t.name,c[e]=n):(nt(c,e,s),c[e].Id[i-2]=n),U([],l,(n=>(n=vt(s,n,t,r,o),void 0===c[e].Id?(n.Td=i-2,c[e]=n):c[e].Id[i-2]=n,[]))),[]}))},h:(t,e,i,n,s,r,o,a,l,c)=>{e=$(e),s=gt(n,s),U([],[t],(t=>{var n=`${(t=t[0]).name}.${e}`,u={get(){yt(`Cannot access ${n} due to unbound types`,[i,o])},enumerable:!0,configurable:!0};return u.set=l?()=>yt(`Cannot access ${n} due to unbound types`,[i,o]):()=>{throw new O(n+" is a read-only property")},Object.defineProperty(t.registeredClass.instancePrototype,e,u),U([],l?[i,o]:[i],(i=>{var o=i[0],u={get(){var e=Mt(this,t,n+" getter");return o.fromWireType(s(r,e))},enumerable:!0};if(l){l=gt(a,l);var h=i[1];u.set=function(e){var i=Mt(this,t,n+" setter"),s=[];l(c,i,h.toWireType(s,e)),A(s)}}return Object.defineProperty(t.registeredClass.instancePrototype,e,u),[]})),[]}))},fc:t=>F(t,Lt),v:(t,e,i,n)=>{function s(){}e=$(e),s.values={},F(t,{name:e,constructor:s,fromWireType:function(t){return this.constructor.values[t]},toWireType:(t,e)=>e.value,argPackAdvance:8,readValueFromPointer:Nt(e,i,n),destructorFunction:null}),st(e,s)},g:(t,e,i)=>{var n=jt(t,"enum");e=$(e),t=n.constructor,n=Object.create(n.constructor.prototype,{value:{value:i},constructor:{value:it(`${n.name}_${e}`,(function(){}))}}),t.values[i]=n,t[e]=n},Y:(t,e,i)=>{F(t,{name:e=$(e),fromWireType:t=>t,toWireType:(t,e)=>e,argPackAdvance:8,readValueFromPointer:zt(e,i),destructorFunction:null})},J:(t,e,i,n,s)=>{if(e=$(e),-1===s&&(s=4294967295),s=t=>t,0===n){var r=32-8*i;s=t=>t<<r>>>r}var o=e.includes("unsigned")?function(t,e){return e>>>0}:function(t,e){return e};F(t,{name:e,fromWireType:s,toWireType:o,argPackAdvance:8,readValueFromPointer:At(e,i,0!==n),destructorFunction:null})},x:(t,e,i)=>{function n(t){return new s(u.buffer,g[t+4>>2],g[t>>2])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];F(t,{name:i=$(i),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{Ie:!0})},y:(t,e,i,n,s,r,o,a,l,c,u,h)=>{i=$(i),r=gt(s,r),a=gt(o,a),c=gt(l,c),h=gt(u,h),U([t],[e],(t=>(t=t[0],[new ut(i,t.registeredClass,!1,!1,!0,t,n,r,a,c,h)])))},Z:(t,e)=>{var i="std::string"===(e=$(e));F(t,{name:e,fromWireType:function(t){var e=g[t>>2],n=t+4;if(i)for(var s=n,r=0;r<=e;++r){var o=n+r;if(r==e||0==h[o]){if(s=s?T(h,s,o-s):"",void 0===a)var a=s;else a+=String.fromCharCode(0),a+=s;s=o+1}}else{for(a=Array(e),r=0;r<e;++r)a[r]=String.fromCharCode(h[n+r]);a=a.join("")}return xe(t),a},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n="string"==typeof e;if(!(n||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array))throw new O("Cannot pass non-string to std::string");var s=i&&n?Et(e):e.length,r=we(4+s+1),o=r+4;if(g[r>>2]=s,i&&n)Pt(e,h,o,s+1);else if(n)for(n=0;n<s;++n){var a=e.charCodeAt(n);if(255<a)throw xe(o),new O("String has UTF-16 code units that do not fit in 8 bits");h[o+n]=a}else for(n=0;n<s;++n)h[o+n]=e[n];return null!==t&&t.push(xe,r),r},argPackAdvance:8,readValueFromPointer:P,destructorFunction(t){xe(t)}})},S:(t,e,i)=>{if(i=$(i),2===e)var n=Rt,s=Wt,r=Bt,o=t=>f[t>>1];else 4===e&&(n=Ut,s=$t,r=Ft,o=t=>g[t>>2]);F(t,{name:i,fromWireType:t=>{for(var i,s=g[t>>2],r=t+4,a=0;a<=s;++a){var l=t+4+a*e;a!=s&&0!=o(l)||(r=n(r,l-r),void 0===i?i=r:(i+=String.fromCharCode(0),i+=r),r=l+e)}return xe(t),i},toWireType:(t,n)=>{if("string"!=typeof n)throw new O(`Cannot pass non-string to C++ string type ${i}`);var o=r(n),a=we(4+o+e);return g[a>>2]=o/e,s(n,a+4,o+e),null!==t&&t.push(xe,a),a},argPackAdvance:8,readValueFromPointer:P,destructorFunction(t){xe(t)}})},G:(t,e,i,n,s,r)=>{z[t]={name:$(e),rawConstructor:gt(i,n),rawDestructor:gt(s,r),re:[]}},o:(t,e,i,n,s,r,o,a,l,c)=>{z[t].re.push({Ce:$(e),He:i,Fe:gt(n,s),Ge:r,Pe:o,Oe:gt(a,l),Qe:c})},hc:(t,e)=>{F(t,{Xe:!0,name:e=$(e),argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},cc:()=>1,Sb:()=>{throw 1/0},p:(t,e,i)=>(t=It(t),e=jt(e,"emval::as"),Vt(e,i,t)),E:(t,e,i,n)=>(t=Gt[t])(null,e=It(e),i,n),u:(t,e,i,n,s)=>(t=Gt[t])(e=It(e),e[i=Zt(i)],n,s),b:_t,I:t=>0===t?Ct(Yt()):(t=Zt(t),Ct(Yt()[t])),r:(t,e,i)=>{var n=((t,e)=>{for(var i=Array(t),n=0;n<t;++n)i[n]=jt(g[e+4*n>>2],"parameter "+n);return i})(t,e),s=n.shift();t--;var r=Array(t);return e=`methodCaller<(${n.map((t=>t.name)).join(", ")}) => ${s.name}>`,(t=>{var e=Gt.length;return Gt.push(t),e})(it(e,((e,o,a,l)=>{for(var c=0,u=0;u<t;++u)r[u]=n[u].readValueFromPointer(l+c),c+=n[u].argPackAdvance;return e=1===i?Qt(o,r):o.apply(e,r),Vt(s,a,e)})))},j:(t,e)=>(t=It(t),e=It(e),Ct(t[e])),A:t=>{9<t&&(kt[t+1]+=1)},N:(t,e)=>(t=It(t))instanceof It(e),B:t=>"number"==typeof(t=It(t)),M:t=>"string"==typeof(t=It(t)),D:()=>Ct([]),e:t=>Ct(Zt(t)),K:()=>Ct({}),ic:t=>!(t=It(t)),k:t=>{var e=It(t);A(e),_t(t)},l:(t,e,i)=>{t=It(t),e=It(e),i=It(i),t[e]=i},i:(t,e)=>(t=(t=jt(t,"_emval_take_value")).readValueFromPointer(e),Ct(t)),O:t=>(t=It(t),Ct(typeof t)),Jb:function(t,e,i){t=new Date(1e3*(e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN)),p[i>>2]=t.getUTCSeconds(),p[i+4>>2]=t.getUTCMinutes(),p[i+8>>2]=t.getUTCHours(),p[i+12>>2]=t.getUTCDate(),p[i+16>>2]=t.getUTCMonth(),p[i+20>>2]=t.getUTCFullYear()-1900,p[i+24>>2]=t.getUTCDay(),p[i+28>>2]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Hb:function(){return-52},Ib:function(){},Vb:(t,e,i,n)=>{function s(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var r=(new Date).getFullYear(),o=new Date(r,0,1),a=new Date(r,6,1);r=o.getTimezoneOffset();var l=a.getTimezoneOffset();g[t>>2]=60*Math.max(r,l),p[e>>2]=Number(r!=l),t=s(o),e=s(a),l<r?(Pt(t,h,i,7),Pt(e,h,n,7)):(Pt(t,h,n,7),Pt(e,h,i,7))},a:()=>{_("")},dc:()=>Date.now(),bc:()=>performance.now(),Ub:t=>{var e=h.length;if(2147483648<(t>>>=0))return!1;for(var i=1;4>=i;i*=2){var n=e*(1+.2/i);n=Math.min(n,t+100663296);var s=Math;n=Math.max(t,n);t:{s=(s.min.call(s,2147483648,n+(65536-n%65536)%65536)-c.buffer.byteLength+65535)/65536;try{c.grow(s),b();var r=1;break t}catch(t){}r=void 0}if(r)return!0}return!1},ad:t=>qt.makeContextCurrent(t)?0:-5,Xb:(t,e)=>{var i=0;return Xt().forEach(((n,s)=>{var r=e+i;for(s=g[t+4*s>>2]=r,r=0;r<n.length;++r)u[s++]=n.charCodeAt(r);u[s]=0,i+=n.length+1})),0},Yb:(t,e)=>{var i=Xt();g[t>>2]=i.length;var n=0;return i.forEach((t=>n+=t.length+1)),g[e>>2]=n,0},R:()=>52,$b:()=>52,Kb:function(){return 70},_b:(t,e,i,n)=>{for(var s=0,r=0;r<i;r++){var o=g[e>>2],c=g[e+4>>2];e+=8;for(var u=0;u<c;u++){var d=h[o+u],f=te[t];0===d||10===d?((1===t?a:l)(T(f,0)),f.length=0):f.push(d)}s+=c}return g[n>>2]=s,0},cb:t=>me.activeTexture(t),Ta:(t,e)=>{me.attachShader(qt.Jd[t],qt.Kd[e])},Ia:(t,e,i)=>{me.bindAttribLocation(qt.Jd[t],e,i?T(h,i):"")},xa:(t,e)=>{35051==t?me.ke=e:35052==t&&(me.Ud=e),me.bindBuffer(t,qt.ce[e])},ba:(t,e)=>{me.bindFramebuffer(t,qt.de[e])},Mc:(t,e)=>{me.bindRenderbuffer(t,qt.$d[e])},sc:(t,e)=>{me.bindSampler(t,qt.Od[e])},ma:(t,e)=>{me.bindTexture(t,qt.Xd[e])},ga:ee,da:ee,$c:(t,e,i,n)=>me.blendColor(t,e,i,n),Qc:t=>me.blendEquation(t),Gc:(t,e)=>me.blendFunc(t,e),zc:(t,e,i,n,s,r,o,a,l,c)=>me.blitFramebuffer(t,e,i,n,s,r,o,a,l,c),vc:(t,e,i,n)=>{i&&e?me.bufferData(t,h,n,i,e):me.bufferData(t,e,n)},kc:(t,e,i,n)=>{i&&me.bufferSubData(t,e,h,n,i)},Lc:t=>me.checkFramebufferStatus(t),aa:t=>me.clear(t),$:(t,e,i,n)=>me.clearColor(t,e,i,n),_:t=>me.clearStencil(t),Ob:(t,e,i,n)=>me.clientWaitSync(qt.Pd[t],e,(i>>>0)+4294967296*n),ec:(t,e,i,n)=>{me.colorMask(!!t,!!e,!!i,!!n)},Wb:t=>{me.compileShader(qt.Kd[t])},Rb:(t,e,i,n,s,r,o,a)=>{me.Ud||!o?me.compressedTexImage2D(t,e,i,n,s,r,o,a):me.compressedTexImage2D(t,e,i,n,s,r,h,a,o)},Nb:(t,e,i,n,s,r,o,a,l)=>{me.Ud||!a?me.compressedTexSubImage2D(t,e,i,n,s,r,o,a,l):me.compressedTexSubImage2D(t,e,i,n,s,r,o,h,l,a)},xc:(t,e,i,n,s)=>me.copyBufferSubData(t,e,i,n,s),Fb:(t,e,i,n,s,r,o,a)=>me.copyTexSubImage2D(t,e,i,n,s,r,o,a),Eb:()=>{var t=qt.Yd(qt.Jd),e=me.createProgram();return e.name=t,e.ge=e.ee=e.fe=0,e.ne=1,qt.Jd[t]=e,t},Db:t=>{var e=qt.Yd(qt.Kd);return qt.Kd[e]=me.createShader(t),e},Cb:t=>me.cullFace(t),Bb:(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2],s=qt.ce[n];s&&(me.deleteBuffer(s),s.name=0,qt.ce[n]=null,n==me.ke&&(me.ke=0),n==me.Ud&&(me.Ud=0))}},Kc:(t,e)=>{for(var i=0;i<t;++i){var n=p[e+4*i>>2],s=qt.de[n];s&&(me.deleteFramebuffer(s),s.name=0,qt.de[n]=null)}},Ab:t=>{if(t){var e=qt.Jd[t];e?(me.deleteProgram(e),e.name=0,qt.Jd[t]=null):qt.Hd(1281)}},Jc:(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2],s=qt.$d[n];s&&(me.deleteRenderbuffer(s),s.name=0,qt.$d[n]=null)}},rc:(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2],s=qt.Od[n];s&&(me.deleteSampler(s),s.name=0,qt.Od[n]=null)}},zb:t=>{if(t){var e=qt.Kd[t];e?(me.deleteShader(e),qt.Kd[t]=null):qt.Hd(1281)}},wc:t=>{if(t){var e=qt.Pd[t];e?(me.deleteSync(e),e.name=0,qt.Pd[t]=null):qt.Hd(1281)}},yb:(t,e)=>{for(var i=0;i<t;i++){var n=p[e+4*i>>2],s=qt.Xd[n];s&&(me.deleteTexture(s),s.name=0,qt.Xd[n]=null)}},fa:ie,ca:ie,wb:t=>{me.depthMask(!!t)},vb:t=>me.disable(t),ub:t=>{me.disableVertexAttribArray(t)},tb:(t,e,i)=>{me.drawArrays(t,e,i)},Zc:(t,e,i,n)=>{me.drawArraysInstanced(t,e,i,n)},Xc:(t,e,i,n,s)=>{me.pe.drawArraysInstancedBaseInstanceWEBGL(t,e,i,n,s)},Vc:(t,e)=>{for(var i=ne[t],n=0;n<t;n++)i[n]=p[e+4*n>>2];me.drawBuffers(i)},sb:(t,e,i,n)=>{me.drawElements(t,e,i,n)},Yc:(t,e,i,n,s)=>{me.drawElementsInstanced(t,e,i,n,s)},Wc:(t,e,i,n,s,r,o)=>{me.pe.drawElementsInstancedBaseVertexBaseInstanceWEBGL(t,e,i,n,s,r,o)},Rc:(t,e,i,n,s,r)=>{me.drawElements(t,n,s,r)},rb:t=>me.enable(t),qb:t=>{me.enableVertexAttribArray(t)},uc:(t,e)=>(t=me.fenceSync(t,e))?(e=qt.Yd(qt.Pd),t.name=e,qt.Pd[e]=t,e):0,pb:()=>me.finish(),ob:()=>me.flush(),Ic:(t,e,i,n)=>{me.framebufferRenderbuffer(t,e,i,qt.$d[n])},Hc:(t,e,i,n,s)=>{me.framebufferTexture2D(t,e,i,qt.Xd[n],s)},nb:t=>me.frontFace(t),mb:(t,e)=>{qt.Wd(t,e,"createBuffer",qt.ce)},Fc:(t,e)=>{qt.Wd(t,e,"createFramebuffer",qt.de)},Ec:(t,e)=>{qt.Wd(t,e,"createRenderbuffer",qt.$d)},qc:(t,e)=>{qt.Wd(t,e,"createSampler",qt.Od)},lb:(t,e)=>{qt.Wd(t,e,"createTexture",qt.Xd)},ea:se,_c:se,Dc:t=>me.generateMipmap(t),kb:(t,e,i)=>{i?p[i>>2]=me.getBufferParameter(t,e):qt.Hd(1281)},jb:()=>{var t=me.getError()||qt.le;return qt.le=0,t},ib:(t,e)=>oe(t,e,2),Cc:(t,e,i,n)=>{((t=me.getFramebufferAttachmentParameter(t,e,i))instanceof WebGLRenderbuffer||t instanceof WebGLTexture)&&(t=0|t.name),p[n>>2]=t},P:(t,e)=>oe(t,e,0),hb:(t,e,i,n)=>{null===(t=me.getProgramInfoLog(qt.Jd[t]))&&(t="(unknown error)"),e=0<e&&n?Pt(t,h,n,e):0,i&&(p[i>>2]=e)},gb:(t,e,i)=>{if(i)if(t>=qt.counter)qt.Hd(1281);else if(t=qt.Jd[t],35716==e)null===(t=me.getProgramInfoLog(t))&&(t="(unknown error)"),p[i>>2]=t.length+1;else if(35719==e){if(!t.ge)for(e=0;e<me.getProgramParameter(t,35718);++e)t.ge=Math.max(t.ge,me.getActiveUniform(t,e).name.length+1);p[i>>2]=t.ge}else if(35722==e){if(!t.ee)for(e=0;e<me.getProgramParameter(t,35721);++e)t.ee=Math.max(t.ee,me.getActiveAttrib(t,e).name.length+1);p[i>>2]=t.ee}else if(35381==e){if(!t.fe)for(e=0;e<me.getProgramParameter(t,35382);++e)t.fe=Math.max(t.fe,me.getActiveUniformBlockName(t,e).length+1);p[i>>2]=t.fe}else p[i>>2]=me.getProgramParameter(t,e);else qt.Hd(1281)},Bc:(t,e,i)=>{i?p[i>>2]=me.getRenderbufferParameter(t,e):qt.Hd(1281)},fb:(t,e,i,n)=>{null===(t=me.getShaderInfoLog(qt.Kd[t]))&&(t="(unknown error)"),e=0<e&&n?Pt(t,h,n,e):0,i&&(p[i>>2]=e)},jc:(t,e,i,n)=>{t=me.getShaderPrecisionFormat(t,e),p[i>>2]=t.rangeMin,p[i+4>>2]=t.rangeMax,p[n>>2]=t.precision},eb:(t,e,i)=>{i?35716==e?(null===(t=me.getShaderInfoLog(qt.Kd[t]))&&(t="(unknown error)"),p[i>>2]=t?t.length+1:0):35720==e?(t=me.getShaderSource(qt.Kd[t]),p[i>>2]=t?t.length+1:0):p[i>>2]=me.getShaderParameter(qt.Kd[t],e):qt.Hd(1281)},Q:t=>{var e=qt.te[t];if(!e){switch(t){case 7939:e=ae(re().join(" "));break;case 7936:case 7937:case 37445:case 37446:(e=me.getParameter(t))||qt.Hd(1280),e=e?ae(e):0;break;case 7938:e=ae(`OpenGL ES 3.0 (${me.getParameter(7938)})`);break;case 35724:var i=(e=me.getParameter(35724)).match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==i&&(3==i[1].length&&(i[1]+="0"),e=`OpenGL ES GLSL ES ${i[1]} (${e})`),e=ae(e);break;default:qt.Hd(1280)}qt.te[t]=e}return e},xb:(t,e)=>{if(2>qt.Nd.version)return qt.Hd(1282),0;var i=qt.ue[t];return i?0>e||e>=i.length?(qt.Hd(1281),0):i[e]:7939===t?(i=re().map(ae),i=qt.ue[t]=i,0>e||e>=i.length?(qt.Hd(1281),0):i[e]):(qt.Hd(1280),0)},db:(t,e)=>{if(e=e?T(h,e):"",t=qt.Jd[t]){var i,n=t,s=n.ae,r=n.we;if(!s)for(n.ae=s={},n.ve={},i=0;i<me.getProgramParameter(n,35718);++i){var o=me.getActiveUniform(n,i),a=o.name;o=o.size;var l=le(a);l=0<l?a.slice(0,l):a;var c=n.ne;for(n.ne+=o,r[l]=[o,c],a=0;a<o;++a)s[c]=a,n.ve[c++]=l}if(n=t.ae,s=0,r=e,0<(i=le(e))&&(s=parseInt(e.slice(i+1))>>>0,r=e.slice(0,i)),(r=t.we[r])&&s<r[0]&&(n[s+=r[1]]=n[s]||me.getUniformLocation(t,e)))return s}else qt.Hd(1281);return-1},mc:(t,e,i)=>{for(var n=ne[e],s=0;s<e;s++)n[s]=p[i+4*s>>2];me.invalidateFramebuffer(t,n)},lc:(t,e,i,n,s,r,o)=>{for(var a=ne[e],l=0;l<e;l++)a[l]=p[i+4*l>>2];me.invalidateSubFramebuffer(t,a,n,s,r,o)},tc:t=>me.isSync(qt.Pd[t]),bb:t=>(t=qt.Xd[t])?me.isTexture(t):0,ab:t=>me.lineWidth(t),$a:t=>{t=qt.Jd[t],me.linkProgram(t),t.ae=0,t.we={}},Tc:(t,e,i,n,s,r)=>{me.se.multiDrawArraysInstancedBaseInstanceWEBGL(t,p,e>>2,p,i>>2,p,n>>2,g,s>>2,r)},Sc:(t,e,i,n,s,r,o,a)=>{me.se.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL(t,p,e>>2,i,p,n>>2,p,s>>2,p,r>>2,g,o>>2,a)},_a:(t,e)=>{3317==t&&(qt.xe=e),me.pixelStorei(t,e)},Uc:t=>me.readBuffer(t),Za:(t,e,i,n,s,r,o)=>{if(me.ke)me.readPixels(t,e,i,n,s,r,o);else{var a=ce(r);o>>>=31-Math.clz32(a.BYTES_PER_ELEMENT),me.readPixels(t,e,i,n,s,r,a,o)}},Ac:(t,e,i,n)=>me.renderbufferStorage(t,e,i,n),yc:(t,e,i,n,s)=>me.renderbufferStorageMultisample(t,e,i,n,s),pc:(t,e,i)=>{me.samplerParameterf(qt.Od[t],e,i)},oc:(t,e,i)=>{me.samplerParameteri(qt.Od[t],e,i)},nc:(t,e,i)=>{me.samplerParameteri(qt.Od[t],e,p[i>>2])},Ya:(t,e,i,n)=>me.scissor(t,e,i,n),Xa:(t,e,i,n)=>{e=qt.Ee(t,e,i,n),me.shaderSource(qt.Kd[t],e)},Wa:(t,e,i)=>me.stencilFunc(t,e,i),Va:(t,e,i,n)=>me.stencilFuncSeparate(t,e,i,n),Ua:t=>me.stencilMask(t),Sa:(t,e)=>me.stencilMaskSeparate(t,e),Ra:(t,e,i)=>me.stencilOp(t,e,i),Qa:(t,e,i,n)=>me.stencilOpSeparate(t,e,i,n),Pa:(t,e,i,n,s,r,o,a,l)=>{if(me.Ud)me.texImage2D(t,e,i,n,s,r,o,a,l);else if(l){var c=ce(a);me.texImage2D(t,e,i,n,s,r,o,a,c,l>>>31-Math.clz32(c.BYTES_PER_ELEMENT))}else me.texImage2D(t,e,i,n,s,r,o,a,null)},Oa:(t,e,i)=>me.texParameterf(t,e,i),Na:(t,e,i)=>{me.texParameterf(t,e,m[i>>2])},Ma:(t,e,i)=>me.texParameteri(t,e,i),La:(t,e,i)=>{me.texParameteri(t,e,p[i>>2])},Pc:(t,e,i,n,s)=>me.texStorage2D(t,e,i,n,s),Ka:(t,e,i,n,s,r,o,a,l)=>{if(me.Ud)me.texSubImage2D(t,e,i,n,s,r,o,a,l);else if(l){var c=ce(a);return void me.texSubImage2D(t,e,i,n,s,r,o,a,c,l>>>31-Math.clz32(c.BYTES_PER_ELEMENT))}if(l){c=ce(a);var u=qt.xe;u=r*(s*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[o-6402]||1)*c.BYTES_PER_ELEMENT+u-1&-u),l=c.subarray(l>>>31-Math.clz32(c.BYTES_PER_ELEMENT),l+u>>>31-Math.clz32(c.BYTES_PER_ELEMENT))}else l=null;me.texSubImage2D(t,e,i,n,s,r,o,a,l)},Ja:(t,e)=>{me.uniform1f(ue(t),e)},Ha:(t,e,i)=>{e&&me.uniform1fv(ue(t),m,i>>2,e)},Ga:(t,e)=>{me.uniform1i(ue(t),e)},Fa:(t,e,i)=>{e&&me.uniform1iv(ue(t),p,i>>2,e)},Ea:(t,e,i)=>{me.uniform2f(ue(t),e,i)},Da:(t,e,i)=>{e&&me.uniform2fv(ue(t),m,i>>2,2*e)},Ca:(t,e,i)=>{me.uniform2i(ue(t),e,i)},Ba:(t,e,i)=>{e&&me.uniform2iv(ue(t),p,i>>2,2*e)},Aa:(t,e,i,n)=>{me.uniform3f(ue(t),e,i,n)},za:(t,e,i)=>{e&&me.uniform3fv(ue(t),m,i>>2,3*e)},ya:(t,e,i,n)=>{me.uniform3i(ue(t),e,i,n)},wa:(t,e,i)=>{e&&me.uniform3iv(ue(t),p,i>>2,3*e)},va:(t,e,i,n,s)=>{me.uniform4f(ue(t),e,i,n,s)},ua:(t,e,i)=>{e&&me.uniform4fv(ue(t),m,i>>2,4*e)},ta:(t,e,i,n,s)=>{me.uniform4i(ue(t),e,i,n,s)},sa:(t,e,i)=>{e&&me.uniform4iv(ue(t),p,i>>2,4*e)},ra:(t,e,i,n)=>{e&&me.uniformMatrix2fv(ue(t),!!i,m,n>>2,4*e)},qa:(t,e,i,n)=>{e&&me.uniformMatrix3fv(ue(t),!!i,m,n>>2,9*e)},pa:(t,e,i,n)=>{e&&me.uniformMatrix4fv(ue(t),!!i,m,n>>2,16*e)},oa:t=>{t=qt.Jd[t],me.useProgram(t),me.Ae=t},na:(t,e)=>me.vertexAttrib1f(t,e),la:(t,e)=>{me.vertexAttrib2f(t,m[e>>2],m[e+4>>2])},ka:(t,e)=>{me.vertexAttrib3f(t,m[e>>2],m[e+4>>2],m[e+8>>2])},ja:(t,e)=>{me.vertexAttrib4f(t,m[e>>2],m[e+4>>2],m[e+8>>2],m[e+12>>2])},Oc:(t,e)=>{me.vertexAttribDivisor(t,e)},Nc:(t,e,i,n,s)=>{me.vertexAttribIPointer(t,e,i,n,s)},ia:(t,e,i,n,s,r)=>{me.vertexAttribPointer(t,e,i,!!n,s,r)},ha:(t,e,i,n)=>me.viewport(t,e,i,n),Mb:(t,e,i,n)=>{me.waitSync(qt.Pd[t],e,(i>>>0)+4294967296*n)},t:function(t,e){var i=ke();try{return pt(t)(e)}catch(t){if(_e(i),t!==t+0)throw t;Se(1,0)}},w:function(t,e,i){var n=ke();try{return pt(t)(e,i)}catch(t){if(_e(n),t!==t+0)throw t;Se(1,0)}},z:function(t,e,i,n){var s=ke();try{return pt(t)(e,i,n)}catch(t){if(_e(s),t!==t+0)throw t;Se(1,0)}},L:function(t,e,i,n,s){var r=ke();try{return pt(t)(e,i,n,s)}catch(t){if(_e(r),t!==t+0)throw t;Se(1,0)}},Pb:function(t,e,i,n,s,r){var o=ke();try{return pt(t)(e,i,n,s,r)}catch(t){if(_e(o),t!==t+0)throw t;Se(1,0)}},V:function(t,e,i,n,s,r,o){var a=ke();try{return pt(t)(e,i,n,s,r,o)}catch(t){if(_e(a),t!==t+0)throw t;Se(1,0)}},Gb:function(t,e,i,n,s){var r=ke();try{return Ce(t,e,i,n,s)}catch(t){if(_e(r),t!==t+0)throw t;Se(1,0)}},H:function(t){var e=ke();try{pt(t)()}catch(t){if(_e(e),t!==t+0)throw t;Se(1,0)}},n:function(t,e){var i=ke();try{pt(t)(e)}catch(t){if(_e(i),t!==t+0)throw t;Se(1,0)}},d:function(t,e,i){var n=ke();try{pt(t)(e,i)}catch(t){if(_e(n),t!==t+0)throw t;Se(1,0)}},m:function(t,e,i,n){var s=ke();try{pt(t)(e,i,n)}catch(t){if(_e(s),t!==t+0)throw t;Se(1,0)}},q:function(t,e,i,n,s){var r=ke();try{pt(t)(e,i,n,s)}catch(t){if(_e(r),t!==t+0)throw t;Se(1,0)}},Qb:function(t,e,i,n,s,r){var o=ke();try{pt(t)(e,i,n,s,r)}catch(t){if(_e(o),t!==t+0)throw t;Se(1,0)}},U:function(t,e,i,n,s,r,o){var a=ke();try{pt(t)(e,i,n,s,r,o)}catch(t){if(_e(a),t!==t+0)throw t;Se(1,0)}},T:function(t,e,i,n,s,r,o,a){var l=ke();try{pt(t)(e,i,n,s,r,o,a)}catch(t){if(_e(l),t!==t+0)throw t;Se(1,0)}},W:function(t,e,i,n,s,r,o,a,l){var c=ke();try{pt(t)(e,i,n,s,r,o,a,l)}catch(t){if(_e(c),t!==t+0)throw t;Se(1,0)}},Tb:(t,e,i,n)=>((t,e,i,n)=>{function s(t,e,i){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=i[0]+t;return t}function r(t,e){return s(t,e,"0")}function o(t,e){function i(t){return 0>t?-1:0<t?1:0}var n;return 0===(n=i(t.getFullYear()-e.getFullYear()))&&0===(n=i(t.getMonth()-e.getMonth()))&&(n=i(t.getDate()-e.getDate())),n}function a(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Qd;for(t=new Date(new Date(t.Rd+1900,0,1).getTime());0<e;){var i=t.getMonth(),n=(he(t.getFullYear())?de:fe)[i];if(!(e>n-t.getDate())){t.setDate(t.getDate()+e);break}e-=n-t.getDate()+1,t.setDate(1),11>i?t.setMonth(i+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return i=new Date(t.getFullYear()+1,0,4),e=a(new Date(t.getFullYear(),0,4)),i=a(i),0>=o(e,t)?0>=o(i,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=g[n+40>>2];for(var d in n={Te:p[n>>2],Se:p[n+4>>2],he:p[n+8>>2],me:p[n+12>>2],ie:p[n+16>>2],Rd:p[n+20>>2],Md:p[n+24>>2],Qd:p[n+28>>2],cf:p[n+32>>2],Re:p[n+36>>2],Ue:c&&c?T(h,c):""},i=i?T(h,i):"",c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})i=i.replace(new RegExp(d,"g"),c[d]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),m="January February March April May June July August September October November December".split(" ");for(d in c={"%a":t=>f[t.Md].substring(0,3),"%A":t=>f[t.Md],"%b":t=>m[t.ie].substring(0,3),"%B":t=>m[t.ie],"%C":t=>r((t.Rd+1900)/100|0,2),"%d":t=>r(t.me,2),"%e":t=>s(t.me,2," "),"%g":t=>l(t).toString().substring(2),"%G":l,"%H":t=>r(t.he,2),"%I":t=>(0==(t=t.he)?t=12:12<t&&(t-=12),r(t,2)),"%j":t=>{for(var e=0,i=0;i<=t.ie-1;e+=(he(t.Rd+1900)?de:fe)[i++]);return r(t.me+e,3)},"%m":t=>r(t.ie+1,2),"%M":t=>r(t.Se,2),"%n":()=>"\n","%p":t=>0<=t.he&&12>t.he?"AM":"PM","%S":t=>r(t.Te,2),"%t":()=>"\t","%u":t=>t.Md||7,"%U":t=>r(Math.floor((t.Qd+7-t.Md)/7),2),"%V":t=>{var e=Math.floor((t.Qd+7-(t.Md+6)%7)/7);if(2>=(t.Md+371-t.Qd-2)%7&&e++,e)53==e&&(4==(i=(t.Md+371-t.Qd)%7)||3==i&&he(t.Rd)||(e=1));else{e=52;var i=(t.Md+7-t.Qd-1)%7;(4==i||5==i&&he(t.Rd%400-1))&&e++}return r(e,2)},"%w":t=>t.Md,"%W":t=>r(Math.floor((t.Qd+7-(t.Md+6)%7)/7),2),"%y":t=>(t.Rd+1900).toString().substring(2),"%Y":t=>t.Rd+1900,"%z":t=>{var e=0<=(t=t.Re);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":t=>t.Ue,"%%":()=>"%"},i=i.replace(/%%/g,"\0\0"),c)i.includes(d)&&(i=i.replace(new RegExp(d,"g"),c[d](n)));return d=function(t){var e=Array(Et(t)+1);return Pt(t,e,0,e.length),e}(i=i.replace(/\0\0/g,"%")),d.length>e?0:(u.set(d,t),d.length-1)})(t,e,i,n)},be=(S++,function(t,e){var i=I;return"function"!=typeof WebAssembly.instantiateStreaming||C(i)||"function"!=typeof fetch?N(i,t,e):fetch(i,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,t).then(e,(function(n){return l(`wasm streaming compile failed: ${n}`),l("falling back to ArrayBuffer instantiation"),N(i,t,e)}))))}({a:ve},(function(t){be=t.instance.exports,c=be.bd,b(),ht=be.gd,w.unshift(be.cd),0==--S&&k&&(t=k,k=null,t())})).catch(n),{}),xe=s._free=t=>(xe=s._free=be.dd)(t),we=s._malloc=t=>(we=s._malloc=be.ed)(t),Me=t=>(Me=be.fd)(t),Se=(t,e)=>(Se=be.hd)(t,e),ke=()=>(ke=be.id)(),_e=t=>(_e=be.jd)(t);s.dynCall_iiiji=(t,e,i,n,r,o)=>(s.dynCall_iiiji=be.kd)(t,e,i,n,r,o),s.dynCall_iiij=(t,e,i,n,r)=>(s.dynCall_iiij=be.ld)(t,e,i,n,r),s.dynCall_iiiij=(t,e,i,n,r,o)=>(s.dynCall_iiiij=be.md)(t,e,i,n,r,o),s.dynCall_viij=(t,e,i,n,r)=>(s.dynCall_viij=be.nd)(t,e,i,n,r),s.dynCall_viiij=(t,e,i,n,r,o)=>(s.dynCall_viiij=be.od)(t,e,i,n,r,o);var Ie,Ce=s.dynCall_jiij=(t,e,i,n,r)=>(Ce=s.dynCall_jiij=be.pd)(t,e,i,n,r);function Le(){if(!(0<S)){for(;0<x.length;)x.shift()(s);if(!(0<S||Ie||(Ie=!0,s.calledRun=!0,v))){for(;0<w.length;)w.shift()(s);for(i(s);0<M.length;)M.shift()(s)}}}return s.dynCall_jiiiiji=(t,e,i,n,r,o,a,l)=>(s.dynCall_jiiiiji=be.qd)(t,e,i,n,r,o,a,l),s.dynCall_jiiiiii=(t,e,i,n,r,o,a)=>(s.dynCall_jiiiiii=be.rd)(t,e,i,n,r,o,a),s.dynCall_jiji=(t,e,i,n,r)=>(s.dynCall_jiji=be.sd)(t,e,i,n,r),s.dynCall_viji=(t,e,i,n,r)=>(s.dynCall_viji=be.td)(t,e,i,n,r),s.dynCall_viiiiij=(t,e,i,n,r,o,a,l)=>(s.dynCall_viiiiij=be.ud)(t,e,i,n,r,o,a,l),s.dynCall_ji=(t,e)=>(s.dynCall_ji=be.vd)(t,e),s.dynCall_iijj=(t,e,i,n,r,o)=>(s.dynCall_iijj=be.wd)(t,e,i,n,r,o),s.dynCall_jii=(t,e,i)=>(s.dynCall_jii=be.xd)(t,e,i),s.dynCall_vij=(t,e,i,n)=>(s.dynCall_vij=be.yd)(t,e,i,n),s.dynCall_iiji=(t,e,i,n,r)=>(s.dynCall_iiji=be.zd)(t,e,i,n,r),s.dynCall_iijjiii=(t,e,i,n,r,o,a,l,c)=>(s.dynCall_iijjiii=be.Ad)(t,e,i,n,r,o,a,l,c),s.dynCall_iij=(t,e,i,n)=>(s.dynCall_iij=be.Bd)(t,e,i,n),s.dynCall_vijjjii=(t,e,i,n,r,o,a,l,c,u)=>(s.dynCall_vijjjii=be.Cd)(t,e,i,n,r,o,a,l,c,u),s.dynCall_viijii=(t,e,i,n,r,o,a)=>(s.dynCall_viijii=be.Dd)(t,e,i,n,r,o,a),s.dynCall_iiiiij=(t,e,i,n,r,o,a)=>(s.dynCall_iiiiij=be.Ed)(t,e,i,n,r,o,a),s.dynCall_iiiiijj=(t,e,i,n,r,o,a,l,c)=>(s.dynCall_iiiiijj=be.Fd)(t,e,i,n,r,o,a,l,c),s.dynCall_iiiiiijj=(t,e,i,n,r,o,a,l,c,u)=>(s.dynCall_iiiiiijj=be.Gd)(t,e,i,n,r,o,a,l,c,u),k=function t(){Ie||Le(),Ie||(k=t)},Le(),function(t){function e(e,i,n){return e&&e.length?t.MALLOCSYMBOL in e?e.byteOffset:(n||=t._malloc(e.length*i.BYTES_PER_ELEMENT),i.set(e,n/i.BYTES_PER_ELEMENT),n):0}function i(t,e,i){var n=t[e];t[e]=i(n),n.Id&&(t[e].Id=n.Id,delete n.Id)}function n(t,e,i){var n=t.prototype[e];t.prototype[e]=i(n),n.Id&&(t.prototype[e].Id=n.Id,delete n.Id)}function s(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(!e||!i.length)return e||null;var s=e.delete;return e.delete=function(){s.call(e);for(var n=0;n<i.length;n++)t._free(i[n])},e}function r(e,i){t[e]=Object.freeze(i)}function o(t,e){if(!t||!t.length)return null;if(0!==e&&1!==e){t=t.slice();for(var i=0;i<t.length;i++)t[i]/=e;return 1==t.length%2&&t.push.apply(t,t),t}return 1==t.length%2?t.concat(t):t}function a(e,i){var n=t._malloc(i*e.BYTES_PER_ELEMENT);return(e=new e(t.HEAPU8.buffer,n,i))[t.MALLOCSYMBOL]=!0,e}function l(e,i,n,s){void 0===s&&(s=null);t:{switch(i=i||t.SkTextEncoding.UTF8){case t.SkTextEncoding.UTF8:var r=Et,o=Dt,a=Uint8Array.BYTES_PER_ELEMENT;break;case t.SkTextEncoding.UTF16:r=Bt,o=Wt,a=Uint16Array.BYTES_PER_ELEMENT;break;case t.SkTextEncoding.UTF32:r=Ft,o=$t,a=Uint32Array.BYTES_PER_ELEMENT;break;default:e=null;break t}r=r(e);var l=t._malloc(r+a);o(e,l,r+a),e={Le:r,ptr:l,Ne:e.length}}return null==e?s:(i=n(e.ptr,e.Le,i,e.Ne),t._free(e.ptr),i)}function c(i,n,s){if(void 0===s&&(s=!1),!i||!i.length)return s?n(null,0):null;if(s=i.length,"object"==typeof i[0]){for(var r=[],o=0;o<s;o++)r.push(i[o].x,i[o].y);i=r,s*=2}return n=n(i=e(i,t.HEAPF32),s),t._free(i),n}function u(i,n,s){if(!i||!i.length)return null;"object"==typeof i[0]&&(i=i.map(h));var r=e(i,t.HEAPU32);return i=s(r,n=n&&0<n.length?e(n,t.HEAPF32):0,i.length),t._free(r),t._free(n),i}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:case 2:return"object"==typeof t[0]?(t=t[0],t=Array.isArray(t)?f.apply(null,t):f(t.r,t.g,t.b,t.a)):t=parseInt(t[0])>>>0,t;case 3:case 4:return f.apply(null,t)}return 0}function d(t){return 0>=t?0:255<=t?255:t}function f(t,e,i,n){return void 0===n&&(n=1),null==n&&(n=1),(d(255*n)<<24|d(t)<<16|d(e)<<8|d(i))>>>0}function p(e,i,n,s,r){if(s=s?Object.assign({},v,s):Object.assign({},v),(s=qt.createContext(e,s))?(qt.makeContextCurrent(s),qt.Nd.Sd.getExtension("WEBGL_debug_renderer_info")):s=0,!s||0>s)return null;var o=t.GrContext.MakeGrContext(s);if(o&&o.setResourceCacheLimitBytes(268435456),r){if(r instanceof WebGL2RenderingContext){var a=r.getParameter(r.SAMPLES);r=r.getParameter(r.STENCIL_BITS)}else a=r.samples,r=r.stencil_bits;i=t.SkSurface.MakeOnScreenGLSurface(o,null!=i?i:e.width,null!=n?n:e.height,a,r)}else i=t.SkSurface.MakeOnScreenGLSurface(o,null!=i?i:e.width,null!=n?n:e.height);return i.canvasElement=e,i.glCtx=s,i.grCtx=o,function(t){var e=t.delete;return t.delete=function(){e.call(t),t.canvasElement=null,t.glCtx&&(qt.deleteContext(t.glCtx),t.glCtx=0),t.grCtx&&(t.grCtx.releaseResourcesAndAbandonContext(),t.grCtx.delete(),t.grCtx=null)},t}(i)}function g(e,i,n){var r={width:i=null!=i?i:e.clientWidth,height:n=null!=n?n:e.clientHeight,colorType:t.SkColorType.RGBA_8888,alphaType:t.SkAlphaType.Unpremul},o=i*n*4,a=t._malloc(o),l=t.SkSurface.MakeRasterDirect(r,a,4*i);if(l){l.canvasElement=e,s(l,a),l.getCanvas().clear(f(255,255,255,1));var c=new ImageData(new Uint8ClampedArray(t.HEAPU8.buffer,a,o),i,n),u=l.flush;l.flush=function(){u.call(l),e.getContext("2d").putImageData(c,0,0)}}return l}function m(t){return t&&"object"==typeof t?(y[0]=t.a,y[1]=t.b,y[2]=t.c,y[3]=t.d,y[4]=t.e,y[5]=t.f,y.byteOffset):0}var y,v={alpha:1,depth:1,stencil:8,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1,majorVersion:2,minorVersion:0,enableExtensionsByDefault:!0,explicitSwapControl:!1,renderViaOffscreenBackBuffer:!1};t.MALLOCSYMBOL=Symbol("SkiaWasmMalloc"),t.malloc=a,t.free=function(t){return!(!t||t.We()||(t.delete(),0))},t.GL=qt,qt.getCurrentContext=function(){return qt.Nd.handle},r("SkPathSegmentMask",{Line:1,Quad:2,Conic:4,Cubic:8}),r("SkPathVerb",{Move:0,Line:1,Quad:2,Conic:3,Cubic:4,Close:5}),r("SkCanvasSaveLayerFlagsSet",{None:0,PreserveLCDText:2,InitWithPrevious:4,F16ColorType:16}),r("SkFontStyleWidth",{UltraCondensed:1,ExtraCondensed:2,Condensed:3,SemiCondensed:4,Normal:5,SemiExpanded:6,Expanded:7,ExtraExpanded:8,UltraExpanded:9}),r("SkFontStyleWeight",{Invisible:0,Thin:100,ExtraLight:200,Light:300,Normal:400,Medium:500,SemiBold:600,Bold:700,ExtraBold:800,Black:900,ExtraBlack:1e3}),r("SkFontStyleSlant",{Upright:0,Italic:1,Oblique:2}),r("SkParagraphTextDirection",{LTR:0,RTL:1}),r("SkParagraphTextAlign",{Start:0,End:1,Center:2,Justify:3}),t.SkColor=h,t.SkColorObject=function(t){return{r:t>>16&255,g:t>>8&255,b:255&t,a:(t>>24&255)/255}},t.SkColorR=function(t){return t>>16&255},t.SkColorG=function(t){return t>>8&255},t.SkColorB=function(t){return 255&t},t.SkColorA=function(t){return(t>>24&255)/255},t.ready.then((function(){function r(i){return function(n){if(!n||!n.length)return[];var s=n.length;n=e(n,t.HEAP32);var r=t._malloc(s*Uint16Array.BYTES_PER_ELEMENT);return i.call(this,n,s,r),s=Array.from(new Uint16Array(t.HEAPU8.buffer,r,s)),t._free(n),t._free(r),s}}function d(t){return function(e){var i=this;return c(e,(function(e,n){return t.call(i,e,n)}))}}y=a(Float32Array,6),t.SkSurface.MakeWebGLCanvasSurface=p,t.SkSurface.MakeCanvasSurface=g,n(t.SkCanvas,"clear",(function(t){return function(e){t.call(this,h(e))}})),n(t.SkCanvas,"drawColor",(function(e){return function(i,n){e.call(this,h(i),n||t.SkBlendMode.SrcOver)}})),n(t.SkCanvas,"concat",(function(t){return function(e){t.call(this,m(e))}})),n(t.SkCanvas,"setMatrix",(function(t){return function(e){t.call(this,m(e))}})),n(t.SkCanvas,"drawPicture",(function(t){return function(e,i,n){t.call(this,e,i||null,m(n))}})),n(t.SkCanvas,"drawImage",(function(t){return function(e,i,n,s,r){t.call(this,e,i||0,n||0,s||null,r||null)}})),n(t.SkCanvas,"drawImageRect",(function(t){return function(e,i,n,s,r,o){n||={top:0,left:0,right:e.width,bottom:e.height},t.call(this,e,n,i,s||null,r||null,!!o)}})),n(t.SkCanvas,"drawDrawable",(function(t){return function(e,i,n){void 0===n?t.call(this,e,m(i)):t.call(this,e,i,n)}})),n(t.SkCanvas,"colorAt",(function(t){return function(e,i){return"object"==typeof e&&(i=e.y,e=e.x),t.call(this,e||0,i||0)}})),n(t.SkCanvas,"drawPoints",(function(t){return function(e,i,n){var s=this;c(i,(function(i,r){t.call(s,e,i,r,n)}))}})),n(t.SkCanvas,"drawText",(function(t){return function(e,i,n,s,r,o){var a=this;r||=0,o||=0,"object"==typeof r&&(o=r.y||0,r=r.x||0),l(e,s,(function(e,s,l){t.call(a,e,s,r,o,i,n,l)}))}})),n(t.SkCanvas,"drawGlyphs",(function(i){return function(n,s,r,o,a,l){a||=0,l||=0,"object"==typeof a&&(l=a.y||0,a=a.x||0);var c=e(n,t.HEAPU16);i.call(this,c,n.length,a,l,s,r,!!o),t._free(c)}})),n(t.SkCanvas,"drawTextBlob",(function(t){return function(e,i,n,s){n||=0,s||=0,"object"==typeof n&&(s=n.y||0,n=n.x||0),t.call(this,e,n,s,i)}})),i(t.SkColorFilter,"MakeMatrix",(function(i){return function(n){n=e(n,t.HEAPF32);var s=i.call(t.SkColorFilter,n);return t._free(n),s}})),i(t.SkColorFilter,"MakeHSLAMatrix",(function(i){return function(n){n=e(n,t.HEAPF32);var s=i.call(t.SkColorFilter,n);return t._free(n),s}})),i(t.SkImageFilter,"MakeMatrixConvolution",(function(i){return function(n,s,r,o,a,l,c,u,h){return s=e(s,t.HEAPF32),n=h?i.call(t.SkImageFilter,n,s,r,o,a,l,c,u,h):i.call(t.SkImageFilter,n,s,r,o,a,l,c,u),t._free(s),n}})),i(t.SkImageFilter,"MakeMatrixTransform",(function(e){return function(i,n,s){return s?e.call(t.SkImageFilter,m(i),n||null,s):e.call(t.SkImageFilter,m(i),n||null)}})),n(t.SkPaint,"setColor",(function(t){return function(){switch(arguments.length){case 4:return void t.apply(this,arguments);case 3:return void t.call(this,arguments[0],arguments[1],arguments[2],1);case 1:if("object"==typeof arguments[0]){var e=arguments[0];t.call(this,e.r,e.g,e.b,"a"in e?e.a:1)}else t.call(this,0,0,0,parseFloat(arguments[0]));return}t.call(this,0,0,0,0)}})),n(t.SkPath,"getBounds",(function(t){return function(e){return t.call(this,m(e))}})),n(t.SkPath,"computeTightBounds",(function(t){return function(e){return t.call(this,m(e))}})),n(t.SkPath,"contains",(function(t){return function(e,i,n){return t.call(this,e,i,m(n))}})),n(t.SkPath,"transform",(function(t){return function(e){return t.call(this,m(e))}})),n(t.SkPath,"addPath",(function(t){return function(e,i,n){t.call(this,e,m(i),!!n)}})),n(t.SkPath,"addPathOffset",(function(t){return function(e,i,n,s){t.call(this,e,i,n,!!s)}})),n(t.SkPath,"addPoly",(function(t){return function(e,i,n){var s=this;c(e,(function(e,r){t.call(s,e,r,!!i,n||0)}))}})),n(t.SkPath,"addPolyCR",(function(t){return function(e,i,n){var s=this;c(e,(function(e,r){t.call(s,e,r,!!i,n||1)}))}})),n(t.SkPath,"split",(function(t){return function(e){return void 0===e&&(e=!0),t.call(this,!!e)}})),n(t.SkPath,"cut",(function(t){return function(e,i){return void 0===i&&(i=.01),t.call(this,e,i||.01)}})),n(t.SkPath,"addStar",(function(t){return function(e,i,n,s,r,o,a,l,c,u){t.call(this,e,i,n,s,r,o||0,a||0,l||0,c||0,u||0)}})),n(t.SkPath,"addRoundStar",(function(t){return function(e,i,n,s,r,o,a,l,c,u){t.call(this,e,i,n,s,r,o||0,a||0,l||0,c||0,u||0)}})),n(t.SkPath,"addRegularPolygon",(function(t){return function(e,i,n,s,r,o,a){3>n||0>=s||0>=(r||s)||t.call(this,e,i,n,s,r||s,o||0,a||0)}})),n(t.SkPath,"addRoundRegularPolygon",(function(t){return function(e,i,n,s,r,o,a,l){3>n||0>=s||0>=(r||s)||t.call(this,e,i,n,s,r||s,o||0,null!=a?a:o||0,l||0)}})),n(t.SkPath,"flatten",(function(t){return function(e,i){return t.call(this,e||1,i||null)}})),n(t.SkPath,"getStroked",(function(i){return function(n,s,r,o,a,l,c,u,h,d,f){var p=0,g=0;return l&&Array.isArray(l)&&0<l.length&&(1==l.length%2&&(l=l.concat(l)),g=l.length,p=e(l,t.HEAPF32)),n=i.call(this,n,null!=s?s:t.SkPaintStrokeCap.Butt,null!=r?r:t.SkPaintStrokeJoin.Miter,null!=o?o:4,null!=a?a:0,p,g,c||0,u||null,h||null,d||null,f||1),p&&t._free(p),n}})),t.SkPath.prototype.addPolygon=function(t,e){this.addPoly(t,!0,e||0)},t.SkPath.prototype.addPolyline=function(t,e){this.addPoly(t,!1,e||0)},i(t.SkPath,"MakePieces",(function(e){return function(i,n,s){return void 0===n&&(n=.01),void 0===s&&(s=!0),e.call(t.SkPath,i,n||.01,!!s)}})),i(t.SkPath,"MakeFromString",(function(e){return function(i,n){return i=e.call(t.SkPath,i),n||i.noConics(),i}})),i(t.SkPath,"MakeFit",(function(e){return function(i,n,s){return c(i,(function(i,r){return e.call(t.SkPath,i,r,n||2,!!s)}))}})),i(t.SkPath,"MakeFromCommands",(function(i){return function(n,s){if(!n||!n.length)return new t.SkPath;if(Array.isArray(n)){for(var r=[],o=n.length,a=0;a<o;a++)switch(typeof n[a]){case"number":r.push(n[a]);break;case"object":r.push(n[a].x,n[a].y)}n=r}return r=e(n,t.HEAPF32),n=i.call(t.SkPath,r,n.length,!!s),t._free(r),n}})),i(t.SkPathProfile,"MakeSharp",d),i(t.SkPathProfile,"MakeSmooth",d),i(t.SkPathEffect,"MakeBend",(function(i){return function(n,s,r,a,l,c,u){var h=0,d=0,f=!1;return c=c||0,(l=o(l,u||0))?(0<u&&(f=!0,c/=u),d=l.length,h=e(l,t.HEAPF32)):c=0,n=i.call(this,n,s||null,r||null,a||0,h,d,c,f),h&&t._free(h),n}})),i(t.SkPathEffect,"MakeDash",(function(i){return function(n,s,r){if(!(n=o(n,r||0)))return null;var a=0<r;return s=s||0,a&&(s/=r),r=e(n,t.HEAPF32),n=i.call(t.SkPathEffect,r,n.length,s,a),t._free(r),n}})),i(t.SkPathEffect,"Make2D",(function(e){return function(i,n){return e.call(t.SkPathEffect,i,m(n))}})),i(t.SkPathEffect,"MakeLine2D",(function(e){return function(i,n){return e.call(t.SkPathEffect,i,m(n))}})),i(t.SkShader,"MakeLinearGradient",(function(e){return function(i,n,s,r,o,a){return u(s,r,(function(s,r,l){return e.call(t.SkShader,i,n,s,r,l,o||t.SkTileMode.Clamp,m(a))}))}})),i(t.SkShader,"MakeRadialGradient",(function(e){return function(i,n,s,r,o,a){return u(s,r,(function(s,r,l){return e.call(t.SkShader,i,n,s,r,l,o||t.SkTileMode.Clamp,m(a))}))}})),i(t.SkShader,"MakeTwoPointConicalGradient",(function(e){return function(i,n,s,r,o,a,l,c){return u(o,a,(function(o,a,u){return e.call(t.SkShader,i,n,s,r,o,a,u,l||t.SkTileMode.Clamp,m(c))}))}})),i(t.SkShader,"MakeSweepGradient",(function(e){return function(i,n,s,r,o,a,l){return u(r,o,(function(r,o,c){return e.call(t.SkShader,i,n,s,r,o,c,a||t.SkTileMode.Clamp,m(l))}))}})),i(t.SkVertices,"Make",(function(i){return function(n,s,r,o,a){return c(s,(function(s,l){return c(r,(function(r){var c=null,u=0;a&&0<a.length&&(c=e(a,t.HEAPU16),u=a.length);var d=null;return o&&0<o.length&&("object"==typeof o[0]&&(o=o.map(h)),d=e(o,t.HEAPU32)),r=i.call(t.SkVertices,n,s,l,c||0,u,r||0,d||0),c&&t._free(c),d&&t._free(d),r}),!0)}))}})),n(t.SkRuntimeEffect,"makeShader",(function(i){return function(n,s){var r=e(n,t.HEAPF32);return i.call(this,r,4*n.length,m(s))}})),n(t.SkRuntimeEffect,"makeColorFilter",(function(i){return function(n){var s=e(n,t.HEAPF32);return i.call(this,s,4*n.length)}})),n(t.SkRuntimeEffect,"makeShaderWithChildren",(function(i){return function(n,s,r){for(var o=e(n,t.HEAPF32),a=[],l=0,c=s.length;l<c;l++)a.push(s[l].$$.ptr);return s=e(a,t.HEAPU32),i.call(this,o,4*n.length,s,a.length,m(r))}})),i(t.SkRuntimeEffect,"MakeForColorFilter",(function(e){return function(i){if("string"==typeof(i=e.call(t.SkRuntimeEffect,i)))throw Error("Invalid program: "+i);return i}})),i(t.SkRuntimeEffect,"MakeForShader",(function(e){return function(i){if("string"==typeof(i=e.call(t.SkRuntimeEffect,i)))throw Error("Invalid program: "+i);return i}})),n(t.SkRuntimeShaderBuilder,"makeShader",(function(t){return function(e){return t.call(this,m(e))}})),n(t.SkRuntimeShaderBuilder,"color",(function(t){return function(e,i){return t.call(this,e,h(i))}})),n(t.SkRuntimeShaderBuilder,"point",(function(t){return function(e,i,n){return"object"==typeof i&&(n=i.y,i=i.x),t.call(this,e,i||0,n||0)}})),n(t.SkRuntimeShaderBuilder,"int",(function(i){return function(n,s){if(Array.isArray(s)){if(0===s.length)return;if(1===s.length)return void i.call(this,n,s[0]);var r=e(s,t.HEAP32);this.intArray(n,r,s.length),t._free(r)}i.call(this,n,s)}})),n(t.SkRuntimeShaderBuilder,"float",(function(i){return function(n,s){if(Array.isArray(s)){if(0===s.length)return;if(1===s.length)return void i.call(this,n,s[0]);var r=e(s,t.HEAPF32);this.floatArray(n,r,s.length),t._free(r)}i.call(this,n,s)}})),n(t.SkRuntimeShaderBuilder,"matrix",(function(t){return function(e,i){t.call(this,e,m(i))}})),n(t.SkDrawable,"draw",(function(t){return function(e,i,n){return null==n?t.call(this,e,m(i)):t.call(this,e,i,n)}})),n(t.SkPicture,"makeShader",(function(t){return function(e,i,n,s){return s?t.call(this,e,i||e,m(n),s):(n=m(n))?t.call(this,e,i||e,n):t.call(this,e,i||e)}})),n(t.SkPictureRecorder,"finishRecordingAsPicture",(function(t){return function(e){return e?t.call(this,e):t.call(this)}})),t.SkPictureRecorder.Record=function(e,i){var n=new t.SkPictureRecorder;return e=n.beginRecording(e),i=n.finishRecordingAsPicture(i(e)),n.delete(),i},t.SkPictureRecorder.RecordAsync=function(e,i){var n=new t.SkPictureRecorder,s=n.beginRecording(e);return i(s).then((function(t){return t=n.finishRecordingAsPicture(t),n.delete(),s=n=null,t}))},t.SkData.prototype.getBlob=function(t){void 0===t&&(t="");var e=new Uint8Array(this.getBytes());return new Blob([e.buffer],{type:t})},i(t.SkData,"Make",(function(i){return function(n){n instanceof Uint8Array||n instanceof Uint8ClampedArray||(n=new Uint8Array(n));var s=e(n,t.HEAPU8);return i.call(t.SkData,s,n.length)}})),n(t.SkImage,"makeShader",(function(t){return function(e,i,n,s){return s?t.call(this,e,i||e,m(n),s):t.call(this,e,i||e,m(n))}})),t.SkImage.prototype.encodeToDataURI=function(e,i){switch(e){case t.SkEncodedImageFormat.PNG:var n="png";break;case t.SkEncodedImageFormat.JPEG:n="jpeg";break;case t.SkEncodedImageFormat.WEBP:n="webp";break;default:return null}return e=this.encodeToBase64String(e,i||100)||"","data:image/".concat(n,";base64,").concat(e)},i(t.SkImage,"MakeFromEncoded",(function(i){return function(n){if(n instanceof t.SkData)return i.call(t.SkImage,n);n instanceof Uint8Array||n instanceof Uint8ClampedArray||(n=new Uint8Array(n));var s=e(n,t.HEAPU8);return i.call(t.SkImage,s,n.length)}})),i(t.SkImage,"MakeFromPixels",(function(i){return function(n,s,r){n instanceof Uint8Array||n instanceof Uint8ClampedArray||(n=new Uint8Array(n));var o=e(n,t.HEAPU8);return i.call(t.SkImage,o,n.length,s,r||n.length/s/4)}})),t.SkImage.MakeFromImageData=function(e){return t.SkImage.MakeFromPixels(e.data,e.width,e.height)},n(t.SkFont,"countTextGlyphs",(function(t){return function(e,i){var n=this;return l(e,i,(function(e,i,s){return t.call(n,e,i,s)}),0)}})),n(t.SkFont,"measureTextWidth",(function(t){return function(e,i,n){var s=this;return l(e,i,(function(e,i,r){return n?t.call(s,e,i,r,n):t.call(s,e,i,r)}),0)}})),n(t.SkFont,"measureTextBounds",(function(t){return function(e,i,n){var s=this;return l(e,i,(function(e,i,r){return n?t.call(s,e,i,r,n):t.call(s,e,i,r)}),null)}})),n(t.SkFont,"getTextWidths",(function(e){return function(i,n){var s=this;return l(i,n,(function(i,n,r,o){var a=t._malloc(o*Float32Array.BYTES_PER_ELEMENT),l=null;return e.call(s,i,n,a,o,r)&&(l=Array.from(new Float32Array(t.HEAPU8.buffer,a,o))),t._free(a),l}),null)}})),n(t.SkFont,"getWidths",(function(i){return function(n){var s=n.length;n=e(n,t.HEAPU16);var r=t._malloc(s*Float32Array.BYTES_PER_ELEMENT);return i.call(this,n,s,r),s=Array.from(new Float32Array(t.HEAPU8.buffer,r,s)),t._free(n),t._free(r),s}})),n(t.SkFont,"textToGlyphs",(function(e){return function(i,n){var s=this;return l(i,n,(function(i,n,r,o){var a=t._malloc(o*Uint16Array.BYTES_PER_ELEMENT),l=null;return 0<(i=e.call(s,i,n,a,o,r))&&(l=Array.from(new Uint16Array(t.HEAPU8.buffer,a,i))),t._free(a),l}),null)}})),n(t.SkFont,"textToPath",(function(t){return function(e,i,n){var s=this;return l(e,n,(function(e,n,r){return i?t.call(s,e,n,i.x,i.y,r):t.call(s,e,n,0,0,r)}))}})),n(t.SkFont,"unicharsToGlyphs",r),n(t.SkFont,"getXPositions",(function(i){return function(n,s){var r=n.length;n=e(n,t.HEAPU16);var o=t._malloc(r*Float32Array.BYTES_PER_ELEMENT);return i.call(this,n,r,o,s||0),s=Array.from(new Float32Array(t.HEAPU8.buffer,o,r)),t._free(n),t._free(o),s}})),n(t.SkFont,"getPositions",(function(i){return function(n,s){var r=n.length;return n=e(n,t.HEAPU16),s=i.call(this,n,r,s||{x:0,y:0}),t._free(n),s}})),n(t.SkFont,"getBounds",(function(i){return function(n,s){var r=n.length;return n=e(n,t.HEAPU16),s=i.call(this,n,r,s||null),t._free(n),s}})),n(t.SkFont,"getAbsoluteBounds",(function(i){return function(n,s,r){var o=n.length;return n=e(n,t.HEAPU16),s=i.call(this,n,o,s||{x:0,y:0},r||null),t._free(n),s}})),n(t.SkFont,"measureWidth",(function(i){return function(n,s){var r=e(n,t.HEAPU16);return n=i.call(this,r,n.length*t.HEAPU16.BYTES_PER_ELEMENT,s||null),t._free(r),n}})),n(t.SkFont,"measureBounds",(function(i){return function(n,s){var r=n.length*t.HEAPU16.BYTES_PER_ELEMENT;return n=e(n,t.HEAPU16),s=i.call(this,n,r,s||null),t._free(n),s}})),n(t.SkFontMgr,"scanFontInfo",(function(i){return function(n){if(n instanceof t.SkData)return i.call(this,n);var s=e(n=new Uint8Array(n),t.HEAPU8);return n=i.call(this,s,n.byteLength),t._free(s),n}})),n(t.SkFontMgr,"setFallback",(function(i){return function(n){if(n instanceof t.SkData)return i.call(this,n);var s=e(n=new Uint8Array(n),t.HEAPU8);return i.call(this,s,n.byteLength)||null}})),n(t.SkFontMgr,"addFontData",(function(i){return function(n){if(n instanceof t.SkData)return i.call(this,n);var s=e(n=new Uint8Array(n),t.HEAPU8);return i.call(this,s,n.byteLength)||null}})),n(t.SkFontMgr,"makeTypefaceFromData",(function(i){return function(n,s){if(n instanceof t.SkData)return i.call(this,n,s||0);var r=e(n=new Uint8Array(n),t.HEAPU8);return i.call(this,r,n.byteLength,s||0)||null}})),n(t.SkFontMgr,"makeTypefaceInstance",(function(i){return function(n,s){if(n instanceof t.SkData)return i.call(this,n,s);var r=e(n=new Uint8Array(n),t.HEAPU8);return i.call(this,r,n.byteLength,s)||null}})),n(t.SkFontMgr,"addFontInstance",(function(i){return function(n,s,r){if(n instanceof t.SkData)return i.call(this,n,s,r||"");var o=e(n=new Uint8Array(n),t.HEAPU8);return i.call(this,o,n.byteLength,s,r||"")}})),n(t.SkFontMgr,"addAllFontInstances",(function(i){return function(n){if(n instanceof t.SkData)return i.call(this,n);var s=e(n=new Uint8Array(n),t.HEAPU8);return i.call(this,s,n.byteLength)}})),i(t.SkFontMgr,"MakeFromData",(function(i){return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(!n||!n.length)return null;var r=[];s=[];for(var o=0;o<n.length;o++)r.push(e(n[o],t.HEAPU8)),s.push(n[o].byteLength);return r=e(r,t.HEAPU32),s=e(s,t.HEAPU32),n=i.call(t.SkFontMgr,r,s,n.length),t._free(r),t._free(s),n}})),n(t.SkFont,"unicharsToGlyphs",r),n(t.SkTypeface,"getKerningPairAdjustments",(function(i){return function(n,s){if(!n||!n.length||2>n.length)return null;var r=n.length;n=e(n,t.HEAPU16);var o=t._malloc((r-1)*Int32Array.BYTES_PER_ELEMENT),a=null;if(i.call(this,n,r,o)){if(a=new Int32Array(t.HEAPU8.buffer,n,r-1),s&&(r=this.unitsPerEm))for(s/=r,r=0;r<a.length;r++)a[r]*=s;a=Array.from(a)}return t._free(n),t._free(o),a}})),i(t.SkTextBlob,"MakeFromText",(function(e){return function(i,n,r){return l(i,r,(function(i,r,o){return s(r=e.call(t.SkTextBlob,i,r,n,o),i)}),null)}})),i(t.SkTextBlob,"MakeShaped",(function(e){return function(i,n,r,o){return l(i,null,(function(i,a){return s(a=e.call(t.SkTextBlob,i,a,n,r||0,!!o),i)}),null)}})),i(t.SkTextBlob,"MakeFromGlyphs",(function(i){return function(n,r){var o=e(n,t.HEAPU16);return s(n=i.call(t.SkTextBlob,o,n.length*t.HEAPU16.BYTES_PER_ELEMENT,r),o)}})),i(t.SkTextBlob,"MakeFromPosText",(function(e){return function(i,n,r,o){return c(n,(function(n,a){return l(i,o,(function(i,o,l){return s(o=e.call(t.SkTextBlob,i,o,n,a,r,l),i)}),null)}))}})),i(t.SkTextBlob,"MakeFromPosGlyphs",(function(i){return function(n,r,o){return!n||r.length<n.length?null:c(r,(function(r,a){var l=e(n,t.HEAPU16);return s(r=i.call(t.SkTextBlob,l,n.length*Uint16Array.BYTES_PER_ELEMENT,r,a,o),l)}))}})),i(t.SkTextBlob,"MakeFromPosTextH",(function(i){return function(n,r,o,a,c){return l(n,c,(function(n,l,c){var u=e(r,t.HEAPF32);return l=i.call(t.SkTextBlob,n,l,u,o,a,c),t._free(u),s(l,n)}),null)}})),i(t.SkTextBlob,"MakeFromPosGlyphsH",(function(i){return function(n,r,o,a){if(!n)return null;var l=e(n,t.HEAPU16);return r=e(r,t.HEAPF32),n=i.call(t.SkTextBlob,l,n.length*Uint16Array.BYTES_PER_ELEMENT,r,o,a),t._free(r),s(n,l)}})),t.SkTextBlob.MakeFromTextOnPath=function(e,i,n,s,r){return e&&e.length?(e=n.textToGlyphs(e,r||null),t.SkTextBlob.MakeFromGlyphsOnPath(e,i,n,s||0)):null},i(t.SkTextBlob,"MakeFromGlyphsOnPath",(function(i){return function(n,r,o,a){if(!n||!n.length)return null;var l=e(n,t.HEAPU16);return s(n=i.call(t.SkTextBlob,l,n.length,r,o,a||0),l)}})),i(t.SkTextBlob,"MakeFromKernGlyphs",(function(i){return function(n,r,o,a){if(o||=0,a||=0,"object"==typeof o&&(a=o.y||0,o=o.x||0),!n)return null;var l=e(n,t.HEAPU16);return s(n=i.call(t.SkTextBlob,l,n.length,r,o,a),l)}})),n(t.SkParagraph,"paint",(function(t){return function(e,i,n,s,r,o,a){t.call(this,e,i,n||0,s||0,r||0,o||0,!!a)}}))}))}(s),e.ready});function i(t){return Number.isFinite(t)&&!Number.isNaN(t)}function n(t,e=0,i=1){return t<=e?e:t>=i?i:t}function s(t,e,i,n,s){return null!=i&&t<=i?i:null!=n&&t>=n?n:(s??=1e4,null!=e&&(t*=s,t/=e*s,t=Math.round(t*s)/s,t=Math.trunc(t)*e),Math.round(t*s)/s)}function r(t,e,i){return e===i?1:(t-e)/(i-e)}function o(t){return Number.isInteger(t)?t:Math.round(100*t)/100}function a(t,e,i=1e-5){return Math.abs(t-e)<=i}function l(t,e=0){const n=parseFloat(t);return i(n)?n:e}const c=/-?(?:\d\.?\d*[Ee][+\-]?\d+|(?:\d+\.\d*|\d*\.\d+)|\d+)/gm;function u(t,e=1){const n=[];let s;for(;s=c.exec(t);){const t=parseFloat(s[0]);i(t)&&n.push(t*e)}return n}function h(t){return Number.isInteger(t)?t.toString():t.toFixed(2)}const d=/^(-?\d+)(?:\.0+|(\.\d*[1-9])0+)$/g;function f(t,e=2,i=""){return null==t?"":0==t?"0"+i:Number.isInteger(t)?t+i:t.toFixed(e).replace(d,"$1$2")+i}class p{#t=null;#e=null;#i=null;#n=0;#s=0;#r=0;#o=0;constructor(t){this.options={lineHeight:0,margin:0,paddingStart:0,paddingEnd:0,thickness:6,roundness:1,sizeDelta:0,position:t??2}}get isVertical(){return this.#i??=g(this.options.position)}get shouldDraw(){return this.isVisible}get isVisible(){return this.#s>this.clientSize}get bounds(){return this.#e??=function(t,e,i,s,r,o=1){const a=r.sizeDelta+(g(r.position)?e:t),l=a-(r.paddingStart+r.paddingEnd),c=r.margin*o,u=r.thickness*o,h=Math.max(n(a/s),2*r.thickness/l),d=s===a?0:n(i/(s-a)),f=l*h*o,p=(r.paddingStart-r.sizeDelta+l*(1-h)*d)*o;switch(r.position){case 2:return new DOMRectReadOnly(t*o-u-c,p,u,f);case 4:return new DOMRectReadOnly(c,p,u,f);case 3:return new DOMRectReadOnly(p,e*o-u-c,f,u);case 1:return new DOMRectReadOnly(p,c,f,u)}}(this.#r,this.#o,this.#n,this.#s,this.options)}get path(){if(this.#t)return this.#t;const t=this.bounds,e=new Path2D;return e.roundRect(t.x,t.y,t.width,t.height,this.options.roundness*this.options.thickness),this.#t=e}contains(t,e){const i=this.bounds;return t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom}get offset(){return this.#n}set offset(t){this.#a(t)&&this.invalidate()}get currentBarSize(){return this.scrollableClientSize*n(this.clientSize/this.#s)}#l(t,e){switch(e){case 1:return t*this.options.lineHeight;case 2:return t*Math.max(this.scrollableClientSize,0);default:return t}}inView(t,e){return(t=this.#l(t,e))>=this.#n&&t<=this.#n+this.scrollableClientSize}scrollLineInView(t){const e=this.options.lineHeight,i=e*t;if(i<this.#n)return this.scrollTo(i);const n=i+e,s=this.#n+this.scrollableClientSize;return i>s?this.scrollTo(i):n>s&&this.scrollBy(n-s)}scrollTo(t,e){return!!this.#a(this.#l(t,e))&&(this.invalidate(),!0)}scrollBy(t,e){return!(!t||!this.#a(this.#n+this.#l(t,e))||(this.invalidate(),0))}scrollByWheel(t){const e=this.isVertical;return t.shiftKey?!e&&this.scrollBy(t.deltaY,t.deltaMode):e?this.scrollBy(t.deltaY,t.deltaMode):this.scrollBy(t.deltaX,t.deltaMode)}initScrollByMouse(t){if(this.isVertical){const e=this.bounds.y-t.clientY;return t=>this.#c(t.clientY+e,this.#o)}const e=this.bounds.x-t.clientX;return t=>this.#c(t.clientX+e,this.#r)}#c(t,e){const i=this.options,n=i.paddingStart-i.sizeDelta,s=(t-n)/(e-n-i.paddingEnd);return this.scrollTo(s*this.#s)}get clientSize(){return this.options.sizeDelta+(this.isVertical?this.#o:this.#r)}get scrollableClientSize(){return this.clientSize-this.options.paddingStart-this.options.paddingEnd}get contentSize(){return this.#s}set contentSize(t){this.updateSize(this.#r,this.#o,t)}#a(t){return t=n(t??this.#n,0,Math.max(this.#s-this.clientSize,0)),this.#n!==t&&(this.#n=t,!0)}updateSize(t,e,i){return t=Math.max(t,0),e=Math.max(e,0),i=Math.max(i,0),(this.#r!==t||this.#o!==e||this.#s!==i)&&(this.#r=t,this.#o=e,this.#s=i,this.#a(),this.invalidate(),!0)}updateOptions(t){let e=!1;const i=this.options;for(const[n,s]of Object.entries(t))null!=s&&s!==i[n]&&(i[n]=s,e=!0);return!!e&&(this.#i=null,this.invalidate(),!0)}invalidate(){this.#t=this.#e=null}}function g(t){return 2===t||4===t}function m(t){return t%360+(t<0?360:0)}function y(t){return Math.round(255*t)}function v(t){const e=Math.round(t).toString(16);return 1===e.length?"0"+e:e}function b(t,e,i,n,s){const r=null!=n&&1!==n,o=`${v(t)}${v(e)}${v(i)}${r?v(255*n):""}`;return s||o[0]!==o[1]||o[2]!==o[3]||o[4]!==o[5]||r&&o[6]!==o[7]?`#${o}`:`#${o[0]}${o[2]}${o[4]}${r?o[6]:""}`}function x(){const t=document.activeElement;t instanceof HTMLElement&&t.blur()}const w=new Map,M={capture:!0};function S(t,e,i){let n;n=i?e:t=>{t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),e(t)},w.set(t,n),window.addEventListener(t,n,M)}function k(...t){for(const e of t)if(w.has(e)){const t=w.get(e);w.delete(e),window.removeEventListener(e,t,M)}}let _=!1;function I(t=!0){_=t}function C(t,e,i=!0){_=i,S("pointermove",t),S("pointerup",e),S("pointercancel",e)}function L(){k("pointermove","pointerup","pointercancel"),_=!1}function N(t){return t.toFixed(0).padStart(2,"0")}function j(t,e,i){const n=t%1e3,s=Math.round(e*n/1e3);let r=(t-n)/1e3;const o=r%60;return r=(r-o)/60,i&&!r?`${N(o)}:${N(s)}`:`${N(r)}:${N(o)}:${N(s)}`}function T(t,e){if(!t)return"0s";const i=t%1e3,n=Math.round(e*i/1e3);if(n)return`${N(n)}f`;let s=(t-i)/1e3;const r=s%60;return s=(s-r)/60,s?`${N(s)}:${N(r)}s`:`${N(r)}:00f`}function z(t,e){return Math.round(Math.round(t/e)*e)}function A(t){const e=new Path2D;let i=!0;for(let n=t.firstElementChild;null!=n;n=n.nextElementSibling){const t=P(n);if(!t)continue;const s=n.transform?.baseVal?.consolidate()?.matrix;e.addPath(t,s),i=!1}return i?null:e}function P(t){if(t instanceof SVGPathElement)return new Path2D(t.getAttribute("d"));if(t instanceof SVGRectElement){const e=new Path2D;let i=D(t.rx),n=D(t.ry);return i&&n?(i!==n&&(i=Math.sqrt(i*n)),e.roundRect(D(t.x),D(t.y),D(t.width),D(t.height),i)):e.rect(D(t.x),D(t.y),D(t.width),D(t.height)),e}if(t instanceof SVGCircleElement){const e=new Path2D;return e.ellipse(D(t.cx),D(t.cy),D(t.r),D(t.r),0,0,2*Math.PI),e}if(t instanceof SVGEllipseElement){const e=new Path2D;return e.ellipse(D(t.cx),D(t.cy),D(t.rx),D(t.ry),0,0,2*Math.PI),e}if(t instanceof SVGLineElement){const e=new Path2D;return e.moveTo(D(t.x1),D(t.y1)),e.lineTo(D(t.x2),D(t.y2)),e}if(t instanceof SVGPolygonElement||t instanceof SVGPolylineElement){const e=new Path2D,i=t.points.length;let n=t.points.getItem(0);e.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.points.getItem(s),e.lineTo(n.x,n.y);return t instanceof SVGPolygonElement&&e.closePath(),e}return t instanceof SVGGElement?A(t):null}function D(t){return t.baseVal.value}function E(t,e){return Math.abs(t*e/function(t,e){let i;for(;e;)i=e,e=t%e,t=i;return t||1}(t,e))}function*O(t,e){e&&(yield 1);const i=Math.sqrt(t);for(let e=2;e<=i;e++)t%e==0&&(yield e);e&&(yield t)}const R=new Map,W=new Map,B=new Map,U=new Map,$=new Map,F="#",V="=";let G,H,Z=1e3;function Y(t,e,i,n){K(t,e,i,n,!1)}function Q(t,e){W.set(t,e)}function J(...t){for(const e of t){let t=null,i=null;Array.isArray(e)?(i=e[0],t=e[1]):i=e,Y(i,null,null,t)}}function q(t,e,...i){const n="string"==typeof t?t:function(t){if(R.has(t))return R.get(t)[0];throw new Error(`${t.name} is not a registered serializable`)}(t);e??=W.get("name");for(const t of i)B.has(t)||B.set(t,new Map),B.get(t).set(n,e)}function K(t,e,i,n,s){if("function"==typeof t.prototype.toJSON){if(e)throw new Error(`${t.name} must NOT provide a serialization function because .toJSON() method is defined`)}else if(!e)throw new Error(`${t.name} must provide a serialization function or have .toJSON() method defined`);if(n??=t.name,!s&&W.has(n))throw new Error(`${n} is already registered! Use overwrite() to overwrite a registered serializer.`);R.set(t,[n,e]),i||(i="function"==typeof t.fromJSON?t.fromJSON.bind(t):function(e){return Array.isArray(e)?new t(...e):new t(e)}),W.set(n,i)}function X(t,e){const i=this[t]?.constructor;if(!i||!R.has(i))return e;let[n,s]=R.get(i);return U.has(n)&&(n=U.get(n)),s&&(e=s(e,t)),{[F]:n,[V]:e}}function tt(t,e){return JSON.stringify(t,X,e)}function et(t,e){if(null==e||"object"!=typeof e)return e;if(F in e&&V in e){let t=e[F];if($.has(t)&&(t=$.get(t)),G?.has(t))return G.get(t)(e[V],H);if(W.has(t))return W.get(t)(e[V],H)}return e}function it(t,e,i){G=null!=i&&B.has(i)?B.get(i):null,H=e;try{return JSON.parse(t,et)}finally{G=H=null}}function nt(t){return[...t]}Y(Set,nt,(t=>new Set(t))),Y(Map,nt,(t=>new Map(t)));const st=Object.freeze([]);function rt(t,e,i){const n=t.length-1;if(e<0||e>n||0===n||e===i||0===e&&i<0||e===n&&i>n)return!1;const s=t[e];return t.splice(e,1),t.splice(i,0,s),!0}function ot(t,e){return t-e}function at(t,e){return e-t}const lt={type:"application/json"};async function ct(t,e){const i=t.getReader(),n=[];for(;;){const{value:t,done:s}=await i.read();if(s)return new Blob(n,e);n.push(t)}}async function ut(t){const e=t.getReader();let i=null;for(;;){const{value:t,done:n}=await e.read();if(n)return i??new Uint8Array(0);if(null==i){i=new Uint8Array(t);continue}const s=new Uint8Array(i.length+t.byteLength);s.set(i),s.set(t,i.length),i=s}}function ht(t,e){return new ReadableStream({start(e){e.enqueue(t),e.close()}},e)}let dt;function ft(t,e){return(dt??=new TextDecoder).decode(t,e)}function pt(t,e="deflate"){return t.pipeThrough(new CompressionStream(e))}function gt(t,e="deflate"){return t.pipeThrough(new DecompressionStream(e))}async function mt(...t){return await ut(function(...t){return pt(new Blob(t,lt).stream())}(...t))}async function yt(t){return async function(t){return(await async function(t){return ct(gt(t),lt)}(t)).text()}(ht(t))}const vt={type:"application/json"};async function bt(t){if(!t.startsWith("data:image/"))return null;try{return(await fetch(t)).blob()}catch{return null}}class xt extends EventTarget{#u;#h;#d;#f;constructor(t,e,i=!0){super(),this.generationId=0,this.#h=new Map,this.#d=new Map,this.#f=!1,this.#u=t instanceof HTMLElement?getComputedStyle(t):t,this.varPrefix=e,this.#f=i,this.updateInternalValues()}update(){this.#h.clear(),this.#d.clear(),this.generationId++,this.updateInternalValues(),this.dispatchEvent(new Event("update"))}getColor(t,e){if(this.#h.has(t))return this.#h.get(t);let i;const n=this.#u.getPropertyValue(this.#f?`${this.varPrefix}${t}-color`:this.varPrefix+t);return i=null==n||""===n?e||this.parse("#000"):this.parse(n),this.#h.set(t,i),i}getSize(t,e=0){if(this.#d.has(t))return this.#d.get(t);let n=this.#u.getPropertyValue(this.#f?`${this.varPrefix}${t}-size`:this.varPrefix+t);return""===n?n=e||0:(n=parseFloat(n),n=i(n)?n:e||0),this.#d.set(t,n),n}}const wt=function(){let t=null,e=null;function i(){return e||(e=new ResizeObserver((function(i){for(const n of i)t.has(n.target)?t.get(n.target)(n):e.unobserve(n.target)})),t=new WeakMap,e)}const n={box:"device-pixel-content-box"};return{isObserved:e=>null!=t&&t.has(e),observe(e,s,r){const o=i();t.set(e,s),o.observe(e,r?{box:r}:n)},unobserve(i){e&&(t.delete(i),e.unobserve(i))},disconnect(){e&&(e.disconnect(),t=null)}}}();function Mt(t){const e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("target","_blank"),e.click()}function St(t,e,i,n=1){t.style.width=e/n+"px",t.style.height=i/n+"px",t.width=e,t.height=i}function kt(t,e){if(t===e)return!0;if(null==t)return null==e;if("object"!=typeof t||"object"!=typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;const i=t.length;for(let n=0;n<i;n++)if(!kt(t[n],e[n]))return!1;return!0}if("function"==typeof t.equals)return null!=e&&t.equals(e);const i=Object.keys(t);if(Object.keys(e).length!==i.length)return!1;for(const n of i)if(!(n in e)||!kt(t[n],e[n]))return!1;return!0}function _t(t){return null!=t}function It(t){return t}const Ct=crypto.randomUUID.bind(crypto);function Lt(t){let e=!0;const i=()=>{e=!0,t()};return()=>{e&&(e=!1,queueMicrotask(i))}}const Nt=Array.isArray.bind(Array),jt=async function(){}.constructor;function Tt(t){return t instanceof jt}function zt(t){return t.toString(16).padStart(2,"0")}async function At(...t){return await navigator.clipboard.write(t),!0}async function Pt(){return"denied"!==(await navigator.permissions.query({name:"clipboard-read"})).state}let Dt;ArrayBuffer.isView.bind(ArrayBuffer);const Et=Symbol(),Ot=Symbol(),Rt=Symbol(),Wt=Symbol(),Bt=Symbol(),Ut=Symbol(),$t=Symbol(),Ft=Symbol(),Vt=Symbol(),Gt=Symbol(),Ht=Symbol(),Zt=Symbol(),Yt=Symbol(),Qt=Symbol(),Jt=Symbol(),qt=Symbol(),Kt=Symbol(),Xt=Symbol(),te=Symbol(),ee=Symbol(),ie=Symbol(),ne=Symbol(),se=Symbol(),re=Symbol(),oe=Symbol(),ae=Symbol(),le=Symbol(),ce=Symbol(),ue=Symbol(),he=Symbol(),de=Symbol(),fe=Math.PI/180,pe=180/Math.PI;function ge(t,e){(function(t){return"string"==typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var i=function(t){return"string"==typeof t&&-1!==t.indexOf("%")}(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e))}function me(t){return Math.min(1,Math.max(0,t))}function ye(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function ve(t){return t<=1?"".concat(100*Number(t),"%"):t}function be(t){return 1===t.length?"0"+t:String(t)}function xe(t,e,i){t=ge(t,255),e=ge(e,255),i=ge(i,255);var n=Math.max(t,e,i),s=Math.min(t,e,i),r=0,o=0,a=(n+s)/2;if(n===s)o=0,r=0;else{var l=n-s;switch(o=a>.5?l/(2-n-s):l/(n+s),n){case t:r=(e-i)/l+(e<i?6:0);break;case e:r=(i-t)/l+2;break;case i:r=(t-e)/l+4}r/=6}return{h:r,s:o,l:a}}function we(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*i*(e-t):i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function Me(t,e,i){t=ge(t,255),e=ge(e,255),i=ge(i,255);var n=Math.max(t,e,i),s=Math.min(t,e,i),r=0,o=n,a=n-s,l=0===n?0:a/n;if(n===s)r=0;else{switch(n){case t:r=(e-i)/a+(e<i?6:0);break;case e:r=(i-t)/a+2;break;case i:r=(t-e)/a+4}r/=6}return{h:r,s:l,v:o}}function Se(t,e,i,n){var s=[be(Math.round(t).toString(16)),be(Math.round(e).toString(16)),be(Math.round(i).toString(16))];return n&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function ke(t){return Math.round(255*parseFloat(t)).toString(16)}function _e(t){return Ie(t)/255}function Ie(t){return parseInt(t,16)}var Ce={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Le(t){var e={r:0,g:0,b:0},i=1,n=null,s=null,r=null,o=!1,a=!1;return"string"==typeof t&&(t=function(t){if(0===(t=t.trim().toLowerCase()).length)return!1;var e=!1;if(Ce[t])t=Ce[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var i=ze.rgb.exec(t);return i?{r:i[1],g:i[2],b:i[3]}:(i=ze.rgba.exec(t))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=ze.hsl.exec(t))?{h:i[1],s:i[2],l:i[3]}:(i=ze.hsla.exec(t))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=ze.hsv.exec(t))?{h:i[1],s:i[2],v:i[3]}:(i=ze.hsva.exec(t))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=ze.hex8.exec(t))?{r:Ie(i[1]),g:Ie(i[2]),b:Ie(i[3]),a:_e(i[4]),format:e?"name":"hex8"}:(i=ze.hex6.exec(t))?{r:Ie(i[1]),g:Ie(i[2]),b:Ie(i[3]),format:e?"name":"hex"}:(i=ze.hex4.exec(t))?{r:Ie(i[1]+i[1]),g:Ie(i[2]+i[2]),b:Ie(i[3]+i[3]),a:_e(i[4]+i[4]),format:e?"name":"hex8"}:!!(i=ze.hex3.exec(t))&&{r:Ie(i[1]+i[1]),g:Ie(i[2]+i[2]),b:Ie(i[3]+i[3]),format:e?"name":"hex"}}(t)),"object"==typeof t&&(Ae(t.r)&&Ae(t.g)&&Ae(t.b)?(e=function(t,e,i){return{r:255*ge(t,255),g:255*ge(e,255),b:255*ge(i,255)}}(t.r,t.g,t.b),o=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):Ae(t.h)&&Ae(t.s)&&Ae(t.v)?(n=ve(t.s),s=ve(t.v),e=function(t,e,i){t=6*ge(t,360),e=ge(e,100),i=ge(i,100);var n=Math.floor(t),s=t-n,r=i*(1-e),o=i*(1-s*e),a=i*(1-(1-s)*e),l=n%6;return{r:255*[i,o,r,r,a,i][l],g:255*[a,i,i,o,r,r][l],b:255*[r,r,a,i,i,o][l]}}(t.h,n,s),o=!0,a="hsv"):Ae(t.h)&&Ae(t.s)&&Ae(t.l)&&(n=ve(t.s),r=ve(t.l),e=function(t,e,i){var n,s,r;if(t=ge(t,360),e=ge(e,100),i=ge(i,100),0===e)s=i,r=i,n=i;else{var o=i<.5?i*(1+e):i+e-i*e,a=2*i-o;n=we(a,o,t+1/3),s=we(a,o,t),r=we(a,o,t-1/3)}return{r:255*n,g:255*s,b:255*r}}(t.h,n,r),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(i=t.a)),i=ye(i),{ok:o,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:i}}var Ne="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),je="[\\s|\\(]+(".concat(Ne,")[,|\\s]+(").concat(Ne,")[,|\\s]+(").concat(Ne,")\\s*\\)?"),Te="[\\s|\\(]+(".concat(Ne,")[,|\\s]+(").concat(Ne,")[,|\\s]+(").concat(Ne,")[,|\\s]+(").concat(Ne,")\\s*\\)?"),ze={CSS_UNIT:new RegExp(Ne),rgb:new RegExp("rgb"+je),rgba:new RegExp("rgba"+Te),hsl:new RegExp("hsl"+je),hsla:new RegExp("hsla"+Te),hsv:new RegExp("hsv"+je),hsva:new RegExp("hsva"+Te),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Ae(t){return Boolean(ze.CSS_UNIT.exec(String(t)))}var Pe=function(){function t(e,i){var n;if(void 0===e&&(e=""),void 0===i&&(i={}),e instanceof t)return e;"number"==typeof e&&(e=function(t){return{r:t>>16,g:(65280&t)>>8,b:255&t}}(e)),this.originalInput=e;var s=Le(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(n=i.format)&&void 0!==n?n:s.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},t.prototype.getLuminance=function(){var t=this.toRgb(),e=t.r/255,i=t.g/255,n=t.b/255;return.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(t){return this.a=ye(t),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){return 0===this.toHsl().s},t.prototype.toHsv=function(){var t=Me(this.r,this.g,this.b);return{h:360*t.h,s:t.s,v:t.v,a:this.a}},t.prototype.toHsvString=function(){var t=Me(this.r,this.g,this.b),e=Math.round(360*t.h),i=Math.round(100*t.s),n=Math.round(100*t.v);return 1===this.a?"hsv(".concat(e,", ").concat(i,"%, ").concat(n,"%)"):"hsva(".concat(e,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var t=xe(this.r,this.g,this.b);return{h:360*t.h,s:t.s,l:t.l,a:this.a}},t.prototype.toHslString=function(){var t=xe(this.r,this.g,this.b),e=Math.round(360*t.h),i=Math.round(100*t.s),n=Math.round(100*t.l);return 1===this.a?"hsl(".concat(e,", ").concat(i,"%, ").concat(n,"%)"):"hsla(".concat(e,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(t){return void 0===t&&(t=!1),Se(this.r,this.g,this.b,t)},t.prototype.toHexString=function(t){return void 0===t&&(t=!1),"#"+this.toHex(t)},t.prototype.toHex8=function(t){return void 0===t&&(t=!1),function(t,e,i,n,s){var r=[be(Math.round(t).toString(16)),be(Math.round(e).toString(16)),be(Math.round(i).toString(16)),be(ke(n))];return s&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))&&r[3].startsWith(r[3].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}(this.r,this.g,this.b,this.a,t)},t.prototype.toHex8String=function(t){return void 0===t&&(t=!1),"#"+this.toHex8(t)},t.prototype.toHexShortString=function(t){return void 0===t&&(t=!1),1===this.a?this.toHexString(t):this.toHex8String(t)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),i=Math.round(this.b);return 1===this.a?"rgb(".concat(t,", ").concat(e,", ").concat(i,")"):"rgba(".concat(t,", ").concat(e,", ").concat(i,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var t=function(t){return"".concat(Math.round(100*ge(t,255)),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var t=function(t){return Math.round(100*ge(t,255))};return 1===this.a?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var t="#"+Se(this.r,this.g,this.b,!1),e=0,i=Object.entries(Ce);e<i.length;e++){var n=i[e],s=n[0];if(t===n[1])return s}return!1},t.prototype.toString=function(t){var e=Boolean(t);t=null!=t?t:this.format;var i=!1,n=this.a<1&&this.a>=0;return e||!n||!t.startsWith("hex")&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this.a?this.toName():this.toRgbString()},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){void 0===e&&(e=10);var i=this.toHsl();return i.l+=e/100,i.l=me(i.l),new t(i)},t.prototype.brighten=function(e){void 0===e&&(e=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(-e/100*255))),i.g=Math.max(0,Math.min(255,i.g-Math.round(-e/100*255))),i.b=Math.max(0,Math.min(255,i.b-Math.round(-e/100*255))),new t(i)},t.prototype.darken=function(e){void 0===e&&(e=10);var i=this.toHsl();return i.l-=e/100,i.l=me(i.l),new t(i)},t.prototype.tint=function(t){return void 0===t&&(t=10),this.mix("white",t)},t.prototype.shade=function(t){return void 0===t&&(t=10),this.mix("black",t)},t.prototype.desaturate=function(e){void 0===e&&(e=10);var i=this.toHsl();return i.s-=e/100,i.s=me(i.s),new t(i)},t.prototype.saturate=function(e){void 0===e&&(e=10);var i=this.toHsl();return i.s+=e/100,i.s=me(i.s),new t(i)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var i=this.toHsl(),n=(i.h+e)%360;return i.h=n<0?360+n:n,new t(i)},t.prototype.mix=function(e,i){void 0===i&&(i=50);var n=this.toRgb(),s=new t(e).toRgb(),r=i/100;return new t({r:(s.r-n.r)*r+n.r,g:(s.g-n.g)*r+n.g,b:(s.b-n.b)*r+n.b,a:(s.a-n.a)*r+n.a})},t.prototype.analogous=function(e,i){void 0===e&&(e=6),void 0===i&&(i=30);var n=this.toHsl(),s=360/i,r=[this];for(n.h=(n.h-(s*e>>1)+720)%360;--e;)n.h=(n.h+s)%360,r.push(new t(n));return r},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){void 0===e&&(e=6);for(var i=this.toHsv(),n=i.h,s=i.s,r=i.v,o=[],a=1/e;e--;)o.push(new t({h:n,s,v:r})),r=(r+a)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),i=e.h;return[this,new t({h:(i+72)%360,s:e.s,l:e.l}),new t({h:(i+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var i=this.toRgb(),n=new t(e).toRgb(),s=i.a+n.a*(1-i.a);return new t({r:(i.r*i.a+n.r*n.a*(1-i.a))/s,g:(i.g*i.a+n.g*n.a*(1-i.a))/s,b:(i.b*i.a+n.b*n.a*(1-i.a))/s,a:s})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var i=this.toHsl(),n=i.h,s=[this],r=360/e,o=1;o<e;o++)s.push(new t({h:(n+o*r)%360,s:i.s,l:i.l}));return s},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();let De=class t{#p=null;constructor(t=0,e=0,i=0,n=1){this.r=t,this.g=e,this.b=i,this.a=n??1,this.code=(255*this.a<<24|t<<16|e<<8|i)>>>0}get rgba(){return this.#p||(this.#p=`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`),this.#p}clone(){return this}inverted(){return new t(255-this.r,255-this.g,255-this.b,this.a)}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}interpolate(e,i=.5){return i<=0?this:i>=1?e:new t(Ee(this.r,e.r,i),Ee(this.g,e.g,i),Ee(this.b,e.b,i),function(t,e,i=.5){return null==t&&(t=1),null==e&&(e=1),n(o(t+i*(e-t)),0,1)}(this.a,e.a,i))}toArray(){return[this.r,this.g,this.b,this.a]}toJSON(){return this.code}toIntArray(){return[this.r,this.g,this.b,255*this.a]}toFloatArray(){return[this.r/255,this.g/255,this.b/255,this.a]}toString(){return this.rgba}withOpacity(e){return e=n(e,0,1),this.a===e?this:new t(this.r,this.g,this.b,e)}withAddedOpacity(e){return e=n(e,0,1),0===this.a||1===e?this:new t(this.r,this.g,this.b,this.a*e)}static fromCode(e){return new t(e>>16&255,e>>8&255,255&e,(e>>24&255)/255)}static parse(e,i){if("number"==typeof e)return new t(e>>16&255,e>>8&255,255&e,i??(e>>24&255)/255);if(e instanceof t)return null!=i&&e.a!==i?new t(e.r,e.g,e.b,i):e;const n=Le(e);return n.ok?new t(n.r,n.g,n.b,i??n.a):t.transparent}static fromHSVA(e,i,n,s){const[r,o,a]=function(t,e,i){t=m(t)/60;const n=i*e,s=n*(1-Math.abs(t%2-1)),r=i-n,o=[r,r,r];return t<1?(o[0]+=n,o[1]+=s):t<2?(o[0]+=s,o[1]+=n):t<3?(o[1]+=n,o[2]+=s):t<4?(o[1]+=s,o[2]+=n):t<5?(o[0]+=s,o[2]+=n):t<6&&(o[0]+=n,o[2]+=s),o}(e,i,n);return new t(255*r,255*o,255*a,s??1)}static fromHSLA(e,i,n,s){const[r,o,a]=function(t,e,i){t=m(t)/60;const n=e*(1-Math.abs(2*i-1)),s=n*(1-Math.abs(t%2-1)),r=i-n/2,o=[r,r,r];return t<1?(o[0]+=n,o[1]+=s):t<2?(o[0]+=s,o[1]+=n):t<3?(o[1]+=n,o[2]+=s):t<4?(o[1]+=s,o[2]+=n):t<5?(o[0]+=s,o[2]+=n):t<6&&(o[0]+=n,o[2]+=s),o}(e,i,n);return new t(255*r,255*o,255*a,s??1)}static{this.transparent=new t(0,0,0,0)}static{this.white=new t(255,255,255)}static{this.black=new t(0,0,0)}static{this.red=new t(255,0,0)}static{this.green=new t(0,255,0)}static{this.blue=new t(0,0,255)}static{this.gray=new t(128,128,128)}};function Ee(t,e,i=.5){return n(Math.round(t+i*(e-t)),0,255)}class Oe{constructor(t=11,e=1,i=!1){this.blend=t,this.opacity=n(e,0,1),this.isolate=i}toJSON(){return[this.blend,this.opacity,this.isolate]}clone(){return this}get needsLayer(){return this.isolate||1!==this.opacity||11!==this.blend}get isVisible(){return this.opacity>0}get isInvisible(){return 0===this.opacity}preparePaint(t){if(!this.needsLayer)return!1;switch(t.isAntiAlias=!0,t.alpha=this.opacity,this.blend){case 0:t.blendMode=Skia.SkBlendMode.Color;break;case 1:t.blendMode=Skia.SkBlendMode.ColorBurn;break;case 2:t.blendMode=Skia.SkBlendMode.ColorDodge;break;case 3:t.blendMode=Skia.SkBlendMode.Darken;break;case 4:t.blendMode=Skia.SkBlendMode.Difference;break;case 5:t.blendMode=Skia.SkBlendMode.Exclusion;break;case 6:t.blendMode=Skia.SkBlendMode.HardLight;break;case 7:t.blendMode=Skia.SkBlendMode.Hue;break;case 8:t.blendMode=Skia.SkBlendMode.Lighten;break;case 9:t.blendMode=Skia.SkBlendMode.Luminosity;break;case 10:t.blendMode=Skia.SkBlendMode.Multiply;break;case 11:t.blendMode=Skia.SkBlendMode.SrcOver;break;case 12:t.blendMode=Skia.SkBlendMode.Overlay;break;case 13:t.blendMode=Skia.SkBlendMode.Saturation;break;case 14:t.blendMode=Skia.SkBlendMode.Screen;break;case 15:t.blendMode=Skia.SkBlendMode.SoftLight}return!0}equals(t){return this.blend===t.blend&&this.opacity===t.opacity&&this.isolate===t.isolate}static{this.NormalComposition=new Oe(11,1)}static{this.NormalIsolatedComposition=new Oe(11,1,!0)}}function Re(t){return 1===t?3:3===t?1:t}let We=class{constructor(t,e,i=0){this.x=t,this.y=e,this.angle=i}equals(t){return t.x===this.x&&t.y===this.y&&t.angle===this.angle}clone(){return this}},Be=class t{static{this.ZERO=new t(0,0)}static{this.UNIT=new t(1,1)}constructor(t,e){this.x=t,this.y=e}get direction(){return Math.atan2(this.y,this.x)}get angle(){return this.direction*pe}getDirectionTo(t){return Math.atan2(this.y-t.y,this.x-t.x)}getAngleTo(t){return this.getDirectionTo(t)*pe}getPositiveAngleTo(t){return(this.getDirectionTo(t)*pe+180)%360}getMiddle(e){return new t((this.x+e.x)/2,(this.y+e.y)/2)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}get isZero(){return 0===this.x&&0===this.y}get isUnit(){return a(this.length,1)}isPerpendicularTo(t){return a(this.dot(t),0)}distanceTo(e){return t.distance(this,e)}rounded(){return Number.isInteger(this.x)&&Number.isInteger(this.y)?this:new t(Math.round(this.x),Math.round(this.y))}shifted(e,i){return new t(this.x+e,this.y+i)}add(e){return new t(this.x+e.x,this.y+e.y)}sub(e){return new t(this.x-e.x,this.y-e.y)}mul(e){return new t(this.x*e.x,this.y*e.y)}div(e){return new t(this.x/e.x,this.y/e.y)}scale(e){return new t(e*this.x,e*this.y)}project(e,i){const n=i.x-e.x,s=i.y-e.y,r=(n*(this.x-e.x)+s*(this.y-e.y))/(e.x**2+e.y**2);return new t(e.x+n*r,e.y+s*r)}mirror(e){return new t(2*e.x-this.x,2*e.y-this.y)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}negate(){return this.isZero?this:new t(-this.x,-this.y)}toLength(e){return this.isZero?new t(0,0):this.scale(e/this.length)}toUnit(){return this.toLength(1)}equals(t){return this.x===t.x&&this.y===t.y}clone(){return this}toJSON(){return[this.x,this.y]}static fromObject(e){return new t(e.x,e.y)}static fromAngle(t,e=1,i){return this.fromDirection(t*fe,e,i)}static fromDirection(e,i=1,n){return n?new t(n.x+i*Math.cos(e),n.y+i*Math.sin(e)):new t(i*Math.cos(e),i*Math.sin(e))}static distance(t,e){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}static center(e,i){return new t((e.x+i.x)/2,(e.y+i.y)/2)}static isSamePoint(t,e){return t.x===e.x&&t.y===e.y}};function Ue(t,e,i,n){return Math.sqrt((i-t)**2+(n-e)**2)}function $e(t,e,i){return t+(e-t)*i}function Fe(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function Ve(t,e,i){return{x:$e(t.x,e.x,i),y:$e(t.y,e.y,i)}}function Ge(t,e,i,n=3){const s=i.x-e.x,r=i.y-e.y;if(0===s&&0===r)return null;const o=((t.x-e.x)*s+(t.y-e.y)*r)/(s*s+r*r),l=e.x+o*s,c=e.y+o*r;if(Ue(t.x,t.y,l,c)>n)return null;const u=Ue(e.x,e.y,l,c)/Ue(e.x,e.y,i.x,i.y);return u<0||u>1||!a(l,$e(e.x,i.x,u))||!a(c,$e(e.y,i.y,u))?null:u}function He(t,e,i,n){const s=i.x-t.x,r=i.y-t.y,o=e.x-t.x,a=e.y-i.y,l=n.x-i.x,c=n.y-i.y,u=s*a-r*o;if(0===u)return s<0!=i.x-e.x<0||r<0!=i.y-e.y<0;const h=o*c-a*l;if(0===h)return!1;const d=(s*c-r*l)/h,f=u/h;return d>=0&&d<=1&&f>=0&&f<=1}function Ze(t,e,i=3){let n,s=Number.POSITIVE_INFINITY;const r=i**2;let o,a,l,c;for(let i=1;i<100;i++)if(l=i/100,c=e(l),o=Ye(t,c),o<=s){if(o<=r&&o<=1e-5)return l;s=o,a=l,n=c}let u=Ge(t,e(a-.01),n,i),h=Ge(t,n,e(a+.01),i);return null==u?null==h?null:a+h/100:null==h?a-(1-u)/100:(u=a-(1-u)/100,h=a+h/100,Ye(t,e(u))<Ye(t,e(h))?u:h)}function Ye(t,e){return(e.x-t.x)**2+(e.y-t.y)**2}function Qe(t,e,i){return{x:t.x+(t.x-e.x)/i,y:t.y+(t.y-e.y)/i}}function Je(t,e,i){return{x:i*t.x+(1-i)*e.x,y:i*t.y+(1-i)*e.y}}function qe(t,e){const i=(1-t)**e;return i/(i+t**e)}function Ke(t,e){return Math.abs(1-1/(t**e+(1-t)**e))}function Xe(t,e,i,n){const s=1-n;return s*s*t+2*s*n*e+n*n*i}function ti(t,e,i,n){return 2*(1-n)*(e-t)+2*n*(i-e)}function ei(t,e,i){const n=e-t,s=i-e;if(n===s)return null;const r=n/(n-s);return r<0||r>1?null:r}function*ii(t,e,i){yield t;const n=ei(t.x,e.x,i.x);null!=n&&(yield si(t,e,i,n));const s=ei(t.y,e.y,i.y);null!=s&&n!==s&&(yield si(t,e,i,s)),yield i}function ni(t,e,i,n){return Math.atan2(ti(t.y,e.y,i.y,n),ti(t.x,e.x,i.x,n))}function si(t,e,i,n){return{x:Xe(t.x,e.x,i.x,n),y:Xe(t.y,e.y,i.y,n)}}function ri(t,e,i,n){return{x:Xe(t.x,e.x,i.x,n),y:Xe(t.y,e.y,i.y,n),angle:ni(t,e,i,n)*pe}}function oi(t,e,i,n=1){if(n<=0)return 0;n>1&&(n=1);const s=t.x-2*e.x+i.x,r=t.y-2*e.y+i.y,o=2*e.x-2*t.x,a=2*e.y-2*t.y,l=4*(s*s+r*r),c=4*(s*o+r*a)/(2*l),u=(o*o+a*a)/l,h=n+c,d=u-c*c,f=Math.sqrt(h*h+d),p=Math.sqrt(u);return 0===d?.5*Math.sqrt(l)*(h*f-c*p):.5*Math.sqrt(l)*(h*f-c*p+d*Math.log(Math.abs((h+f)/(c+p))))}function ai(t,e,i,n,s=3){return t.x+s<Math.min(e.x,i.x,n.x)||t.x-s>Math.max(e.x,i.x,n.x)||t.y+s<Math.min(e.y,i.y,n.y)||t.y-s>Math.max(e.y,i.y,n.y)?null:Ze(t,(t=>si(e,i,n,t)),s)}function li(t,e,i,n){const s=Je(t,i,qe(n,2)),r=Ke(n,2);return t=>Qe(t,s,r)}function ci(t,e,i,n,s){const r=1-n;return s?{x:r*e.x+n*i.x,y:r*e.y+n*i.y}:{x:r*t.x+n*e.x,y:r*t.y+n*e.y}}function ui(t,e,i,n,s){s??=oi(t,e,i,1);const r=[];let o;for(let s=1;s<n;s++)o=s/n,r.push(oi(t,e,i,o),o);return r.push(s,1),r}var hi=[.0486909570091397,-.0243502926634244,.0486909570091397,.0243502926634244,.0485754674415034,-.072993121787799,.0485754674415034,.072993121787799,.048344762234803,-.1214628192961206,.048344762234803,.1214628192961206,.0479993885964583,-.1696444204239928,.0479993885964583,.1696444204239928,.0475401657148303,-.2174236437400071,.0475401657148303,.2174236437400071,.04696818281621,-.2646871622087674,.04696818281621,.2646871622087674,.0462847965813144,-.311322871990211,.0462847965813144,.311322871990211,.0454916279274181,-.3572201583376681,.0454916279274181,.3572201583376681,.0445905581637566,-.4022701579639916,.0445905581637566,.4022701579639916,.0435837245293235,-.4463660172534641,.0435837245293235,.4463660172534641,.0424735151236536,-.489403145707053,.0424735151236536,.489403145707053,.0412625632426235,-.5312794640198946,.0412625632426235,.5312794640198946,.0399537411327203,-.571895646202634,.0399537411327203,.571895646202634,.0385501531786156,-.6111553551723933,.0385501531786156,.6111553551723933,.03705512854024,-.6489654712546573,.03705512854024,.6489654712546573,.0354722132568824,-.6852363130542333,.0354722132568824,.6852363130542333,.0338051618371416,-.7198818501716109,.0338051618371416,.7198818501716109,.0320579283548516,-.7528199072605319,.0320579283548516,.7528199072605319,.0302346570724025,-.7839723589433414,.0302346570724025,.7839723589433414,.0283396726142595,-.8132653151227975,.0283396726142595,.8132653151227975,.0263774697150547,-.8406292962525803,.0263774697150547,.8406292962525803,.0243527025687109,-.8659993981540928,.0243527025687109,.8659993981540928,.0222701738083833,-.8893154459951141,.0222701738083833,.8893154459951141,.0201348231535302,-.9105221370785028,.0201348231535302,.9105221370785028,.0179517157756973,-.9295691721319396,.0179517157756973,.9295691721319396,.0157260304760247,-.9464113748584028,.0157260304760247,.9464113748584028,.0134630478967186,-.9610087996520538,.0134630478967186,.9610087996520538,.0111681394601311,-.973326827789911,.0111681394601311,.973326827789911,.0088467598263639,-.983336253884626,.0088467598263639,.983336253884626,.0065044579689784,-.9910133714767443,.0065044579689784,.9910133714767443,.0041470332605625,-.9963401167719553,.0041470332605625,.9963401167719553,.0017832807216964,-.9993050417357722,.0017832807216964,.9993050417357722];function di(t,e,i,n,s){return s**3*(n-t+3*(e-i))+3*s*s*(t+i-2*e)+3*s*(e-t)+t}function fi(t,e,i,n,s){const r=1-s;return 3*(r*r*(e-t)+2*r*s*(i-e)+s*s*(n-i))}function pi(t,e,i,n){const s=function(t,e,i){if(0===t)return 0===e?null:-i/e;if(0===e){const e=-i/t;return e>=0?Math.sqrt(e):null}let n=e**2-4*t*i;return n<0?null:(n=Math.sqrt(n),[(n-e)/(2*t),-(e+n)/(2*t)].sort(ot))}(n-t+3*(e-i),2*(t-2*e+i),e-t);return null===s?null:"number"==typeof s?s<0||s>1?null:s:s[0]<0||s[0]>1?s[1]<0||s[1]>1?null:s[1]:s[1]<0||s[1]>1?s[0]:s}function gi(t,e,i,n,s){const r=pi(e,i,n,s);if(null!=r)if("number"!=typeof r)for(const e of r)t.add(e);else t.add(r)}let mi;function yi(t,e,i,n,s){return Math.atan2(fi(t.y,e.y,i.y,n.y,s),fi(t.x,e.x,i.x,n.x,s))}function vi(t,e,i,n,s){return{x:di(t.x,e.x,i.x,n.x,s),y:di(t.y,e.y,i.y,n.y,s)}}function bi(t,e,i,n,s=1){if(s<=0)return 0;s>1&&(s=1),s/=2;let r,o=0;for(let a=0,l=hi.length;a<l;a+=2)r=s*(hi[a+1]+1),o+=Math.sqrt(fi(t.x,e.x,i.x,n.x,r)**2+fi(t.y,e.y,i.y,n.y,r)**2)*hi[a];return s*o}function xi(t,e,i,n=2/3){return[Ve(t,e,n),Ve(e,i,n)]}class wi{static{this.ZERO=new wi(0,0,0,0)}#g;#m;#y;#v;#b;constructor(t,e,i,n){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n),this.x=t,this.y=e,this.width=i,this.height=n,this.top=e,this.bottom=e+n,this.left=t,this.right=t+i}clone(){return this}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}getPointAtPosition(t,e,i,n){switch(i&&(t=Re(t),e=Re(e)),e){case 1:switch(t){case 1:return this.topLeft;case 3:return this.topRight;case 2:return this.topMiddle;case 0:return n?new Be(n.x,this.top):null}return null;case 3:switch(t){case 1:return this.bottomLeft;case 3:return this.bottomRight;case 2:return this.bottomMiddle;case 0:return n?new Be(n.x,this.bottom):null}return null;case 2:switch(t){case 1:return this.middleLeft;case 3:return this.middleRight;case 2:return this.middle;case 0:return n?new Be(n.x,this.middleY):null}return null;case 0:switch(t){case 1:return new Be(this.left,n.y);case 3:return new Be(this.right,n.y);case 2:return new Be(this.middleX,n.y);case 0:return n?new Be(n.x,n.y):null}return null}return null}get area(){return this.width*this.height}ensureMinSize(t){return this.width>=t.width&&this.height>=t.height?this:new wi(this.x,this.y,Math.max(this.width,t.width),Math.max(this.height,t.height))}intersects(t){return!(this.right<t.left||t.right<this.left||this.bottom<t.top||t.bottom<this.top)}intersection(t){const e=Math.max(this.x,t.x),i=Math.min(this.right,t.right),n=Math.max(this.y,t.y),s=Math.min(this.bottom,t.bottom);return e>=i||n>=s?null:new wi(e,n,i-e,s-n)}intersectsLine(t,e,i=!0){return!(!i||!this.contains(t.x,t.y)&&!this.contains(e.x,e.y))||He(t,e,this.bottomLeft,this.topLeft)||He(t,e,this.topLeft,this.topRight)||He(t,e,this.topRight,this.bottomRight)||He(t,e,this.bottomRight,this.bottomLeft)}intersectsPolyline(t,e,i=!0){const n=t.length-1;if(n<0)return!1;if(this.contains(t[0].x,t[0].y))return!0;if(0===n)return!1;for(let e=1;e<=n;e++)if(this.contains(t[e].x,t[e].y)||this.intersectsLine(t[e-1],t[e],!1))return!0;return!(!e||!this.intersectsLine(t[n],t[0],!1))}containsPoint(t){return this.contains(t.x,t.y)}containsPoints(t){for(const e of t)if(!this.contains(e.x,e.y))return!1;return!0}containsLine(t,e){return this.contains(t.x,t.y)&&this.contains(e.x,e.y)}contains(t,e,i=0){return t+i>=this.left&&t-i<=this.right&&e+i>=this.top&&e-i<=this.bottom}containsRect(t){return t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom}containsQuad(t){const e=t.points;return this.contains(e[0].x,e[0].y)&&this.contains(e[1].x,e[1].y)&&this.contains(e[2].x,e[2].y)&&this.contains(e[3].x,e[3].y)}get middle(){return this.#b||(this.#b=new Be(this.x+this.width/2,this.y+this.height/2)),this.#b}get middleX(){return this.x+this.width/2}get middleY(){return this.y+this.height/2}get topMiddle(){return new Be(this.middleX,this.top)}get bottomMiddle(){return new Be(this.middleX,this.bottom)}get middleLeft(){return new Be(this.left,this.middleY)}get middleRight(){return new Be(this.right,this.middleY)}get topLeft(){return this.#g||(this.#g=new Be(this.left,this.top)),this.#g}get topRight(){return this.#m||(this.#m=new Be(this.right,this.top)),this.#m}get bottomLeft(){return this.#y||(this.#y=new Be(this.left,this.bottom)),this.#y}get bottomRight(){return this.#v||(this.#v=new Be(this.right,this.bottom)),this.#v}get isVisible(){return this.width>0&&this.height>0}get isEmpty(){return 0===this.width&&0===this.height}inset(t,e=t){return this.outset(-t,-e)}get diagonal(){return Be.distance(this.topLeft,this.bottomRight)}outset(t,e=t){return new wi(this.x-t,this.y-e,this.width+2*t,this.height+2*e)}offset(t,e){return 0===t&&0===e?this:new wi(this.x+t,this.y+e,this.width,this.height)}scale(t,e=t){return this.outset(this.width*t/2,this.height*e/2)}shifted(t,e){return new wi(this.x+t,this.y+e,this.width,this.height)}getRelativeRadius(t){const e=this.diagonal/(2*Math.SQRT2);return 0===e?0:t/e}getAbsoluteRadius(t){return t*this.diagonal/(2*Math.SQRT2)}getRelativePoint(t,e){return t=0===this.width?0:(t-this.x)/this.width,e=0===this.height?0:(e-this.y)/this.height,new Be(t,e)}getAbsolutePoint(t,e){return new Be(this.x+this.width*t,this.y+this.height*e)}transform(t,e=!0){return!t||t.isIdentity?this:wi.fromPoints(t.transformPoint(this.topLeft,e),t.transformPoint(this.topRight,e),t.transformPoint(this.bottomRight,e),t.transformPoint(this.bottomLeft,e))}transformInverse(t,e=!0){return!t||t.isIdentity?this:wi.fromPoints(t.transformInversePoint(this.topLeft,e),t.transformInversePoint(this.topRight,e),t.transformInversePoint(this.bottomRight,e),t.transformInversePoint(this.bottomLeft,e))}*horizontal(t){yield this.left,t&&(yield this.middleX),yield this.right}*vertical(t){yield this.top,t&&(yield this.middleY),yield this.bottom}*sidePoints(t){yield this.topLeft,yield this.topMiddle,yield this.topRight,yield this.middleRight,yield this.bottomRight,yield this.bottomMiddle,yield this.bottomLeft,yield this.middleLeft,t&&(yield this.middle)}*cornerPoints(t){!t||t.isIdentity?(yield this.topLeft,yield this.topRight,yield this.bottomRight,yield this.bottomLeft):(yield t.transformPoint(this.topLeft),yield t.transformPoint(this.topRight),yield t.transformPoint(this.bottomRight),yield t.transformPoint(this.bottomLeft))}getSidePointPosition(t,e,i){return Si(this,t,e,i)}toJSON(){return[this.x,this.y,this.width,this.height]}static fromLTRBObject(t){return t?new wi(t.left,t.top,t.right-t.left,t.bottom-t.top):wi.ZERO}static fromWH(t,e){return new wi(0,0,t,e)}static fromLTRB(t,e,i,n){return new wi(t,e,i-t,n-e)}static fromSize(t,e=Be.ZERO){return new wi(e.x,e.y,t.width,t.height)}static fromCircle(t,e){return new wi(t.x-e,t.y-e,e+e,e+e)}static fromEllipse(t,e,i){return new wi(t.x-e,t.y-i,e+e,i+i)}static fromTransformedPoints(t,...e){if(!t||t.isIdentity)return this.fromPoints(...e);if(0===e.length)return wi.ZERO;let i=t.transformPoint(e[0]),n=i.x,s=i.y,r=n,o=s;for(let a=1;a<e.length;a++)i=t.transformPoint(e[a]),i.x<n?n=i.x:i.x>r&&(r=i.x),i.y<s?s=i.y:i.y>o&&(o=i.y);return new wi(n,s,r-n,o-s)}static fromIterablePoints(t,e){let i=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;e?.isIdentity&&(e=null);for(let o of t)e&&(o=e.point(o.x,o.y)),o.x<i&&(i=o.x),o.x>s&&(s=o.x),o.y<n&&(n=o.y),o.y>r&&(r=o.y);return isFinite(i)?new wi(i,n,s-i,r-n):e?wi.ZERO.transform(e):wi.ZERO}static fromPoints(...t){if(!t.length)return wi.ZERO;let e=t[0].x,i=t[0].y,n=e,s=i;for(let r=1;r<t.length;r++){const o=t[r];o.x<e?e=o.x:o.x>n&&(n=o.x),o.y<i?i=o.y:o.y>s&&(s=o.y)}return new wi(e,i,n-e,s-i)}static merge(t){let e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=null;for(r of t)r&&r!==wi.ZERO&&(r.left<e&&(e=r.left),r.top<i&&(i=r.top),r.right>n&&(n=r.right),r.bottom>s&&(s=r.bottom));return r?new wi(e,i,n-e,s-i):wi.ZERO}}const Mi=[{x:1,y:1},{x:2,y:1},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:2,y:3},{x:1,y:3},{x:1,y:2},{x:2,y:2}].map(Object.freeze);function Si(t,e,i,n){let s=0;for(const r of t.sidePoints(n)){if(r.distanceTo(e)<=i)return Mi[s];s++}return null}class ki{static{this.ZERO=new ki([Be.ZERO,Be.ZERO,Be.ZERO,Be.ZERO])}#x=null;#w=null;#M=null;#S=null;#k=null;constructor(t,e){if(t instanceof wi?(this.bounds=t,this.points=[t.topLeft,t.topRight,t.bottomRight,t.bottomLeft]):(this.bounds=wi.fromPoints(...t),this.points=[...t]),e){const t=this.bounds.middle;this.points.sort(((e,i)=>(e.getDirectionTo(t)-i.getDirectionTo(t))*pe))}}toSorted(){return new ki(this.points,!0)}toJSON(){return this.points}get isVisible(){return!a(this.area,0)}get left(){return this.bounds.left}get top(){return this.bounds.top}get right(){return this.bounds.right}get bottom(){return this.bounds.bottom}get width(){return this.bounds.width}get height(){return this.bounds.height}get middle(){return this.bounds.middle}get middleLeft(){return this.#w??=this.points[3].getMiddle(this.points[0])}get middleTop(){return this.#M??=this.points[0].getMiddle(this.points[1])}get middleRight(){return this.#S??=this.points[1].getMiddle(this.points[2])}get middleBottom(){return this.#k??=this.points[2].getMiddle(this.points[3])}get topLeft(){return this.points[0]}get topRight(){return this.points[1]}get bottomRight(){return this.points[2]}get bottomLeft(){return this.points[3]}get area(){return this.#x??=_i(this.points[0],this.points[1],this.points[2])+_i(this.points[2],this.points[3],this.points[0])}contains(t,e){return this.containsPoint(new Be(t,e))}containsPoint(t){if(!this.bounds.contains(t.x,t.y))return!1;let e=0;return e+=_i(t,this.points[0],this.points[1]),e+=_i(t,this.points[1],this.points[2]),e+=_i(t,this.points[2],this.points[3]),e+=_i(t,this.points[3],this.points[0]),a(e,this.area)}intersectsLine(t,e,i=!0){if(i&&(this.containsPoint(t)||this.containsPoint(e)))return!0;const n=this.points;return He(t,e,n[0],n[1])||He(t,e,n[1],n[2])||He(t,e,n[2],n[3])||He(t,e,n[3],n[0])}containsRect(t){return this.containsPoint(t.topLeft)&&this.containsPoint(t.bottomRight)&&this.containsPoint(t.topRight)&&this.containsPoint(t.bottomLeft)}intersectsRect(t){if(t.bottom<=this.top||t.top>=this.bottom||t.right<=this.left||t.left>=this.right)return!1;if(t.top<=this.top&&t.bottom>=this.bottom||t.left<=this.left&&t.right>=this.right)return!0;for(let e=0;e<4;e++)if(t.containsPoint(this.points[e]))return!0;return this.containsPoint(t.topLeft)||this.containsPoint(t.bottomRight)||this.containsPoint(t.topRight)||this.containsPoint(t.bottomLeft)||this.containsPoint(t.middle)}clone(){return this}equals(t){for(let e=0;e<4;e++)if(!this.points[e].equals(t.points[e]))return!1;return!0}transform(t,e){return!t||t.isIdentity?this:new ki([t.transformPoint(this.points[0]),t.transformPoint(this.points[1]),t.transformPoint(this.points[2]),t.transformPoint(this.points[3])],e)}getSidePointPosition(t,e,i){return Si(this,t,e,i)}getPointAtPosition(t,e,i){switch(i&&(t=Re(t),e=Re(e)),t){case 1:switch(e){case 1:return this.points[0];case 2:return this.middleLeft;case 3:return this.points[3]}break;case 2:switch(e){case 1:return this.middleTop;case 2:return this.middle;case 3:return this.middleBottom}break;case 3:switch(e){case 1:return this.points[1];case 2:return this.middleRight;case 3:return this.points[2]}}return null}*middlePoints(t){yield this.middleTop,yield this.middleRight,yield this.middleBottom,yield this.middleLeft,t&&(yield this.middle)}*sidePoints(t){yield this.points[0],yield this.middleTop,yield this.points[1],yield this.middleRight,yield this.points[2],yield this.middleBottom,yield this.points[3],yield this.middleLeft,t&&(yield this.middle)}*cornerPoints(t){if(t&&!t.isIdentity)for(const e of this.points)yield t.transformPoint(e);else yield*this.points}static fromSize(t,e){return this.fromWH(t.width,t.height,e)}static fromWH(t,e,i){return!i||i.isIdentity?new ki(new wi(0,0,t,e)):new ki([i.point(0,0),i.point(t,0),i.point(t,e),i.point(0,e)])}static fromRectangle(t,e){return!e||e.isIdentity?new ki(t):new ki([e.transformPoint(t.topLeft),e.transformPoint(t.topRight),e.transformPoint(t.bottomRight),e.transformPoint(t.bottomLeft)])}static fromLTRBObject(t){return new ki([new Be(t.left,t.top),new Be(t.right,t.top),new Be(t.right,t.bottom),new Be(t.left,t.bottom)])}static fromPoints(t,e){return null==e||e.isIdentity?new ki(t.map((t=>t instanceof Be?t:new Be(t.x,t.y)))):new ki(t.map((t=>e.point(t.x,t.y))))}static fromJSON(t){return new ki(t.map((t=>t instanceof Be?t:new Be(t.x,t.y))))}}function _i(t,e,i){const n=t.distanceTo(e),s=e.distanceTo(i),r=i.distanceTo(t),o=(n+s+r)/2;return Math.sqrt(o*(o-n)*(o-s)*(o-r))}const Ii=1e-13,Ci=new Array(6);function Li(t,e,i){const n=t[0]*e[0]+t[2]*e[1],s=t[1]*e[0]+t[3]*e[1],r=t[0]*e[2]+t[2]*e[3],o=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];i[0]=n,i[1]=s,i[2]=r,i[3]=o,i[4]=a,i[5]=l}function Ni(t,e){const i=t[0]*t[3]-t[1]*t[2];if(0===i)return!1;const n=t[3]/i,s=-t[1]/i,r=-t[2]/i,o=t[0]/i,a=-(t[3]*t[4]-t[2]*t[5])/i,l=(t[1]*t[4]-t[0]*t[5])/i;return e[0]=n,e[1]=s,e[2]=r,e[3]=o,e[4]=a,e[5]=l,!0}function ji(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}function Ti(t){return t[0]=t[3]=1,t[1]=t[2]=t[4]=t[5]=0,t}function zi(t,e){return a(t[0],e[0],Ii)&&a(t[1],e[1],Ii)&&a(t[2],e[2],Ii)&&a(t[3],e[3],Ii)&&a(t[4],e[4],Ii)&&a(t[5],e[5],Ii)}function Ai(t,e){return t?e?zi(t,e):ji(t):!e||ji(e)}function Pi(t,e,i){if(i%=360,!(e%=360)&&!i)return;const n=t[0],s=t[1],r=t[2],o=t[3];e%180!=0&&(e=45===e?1:-45===e?-1:Math.tan(e*fe),t[2]+=n*e,t[3]+=s*e),i%180!=0&&(i=45===i?1:-45===i?-1:Math.tan(i*fe),t[0]+=r*i,t[1]+=o*i)}function Di(t,e){if(!(e%=360))return;let i=0,n=-1;e%180!=0&&(e*=fe,i=Math.sin(e),n=Math.cos(e));const s=t[0],r=t[1];t[0]=s*n+t[2]*i,t[1]=r*n+t[3]*i,t[2]=t[2]*n-s*i,t[3]=t[3]*n-r*i}function Ei(t){if(t%90)return t;const e=t/90;return e%2?Math.sign(t)*(90*(e-1)+89.99):t}function Oi(t,e,i,n=!0){return new Be(t[0]*e+t[2]*i+(n?t[4]:0),t[1]*e+t[3]*i+(n?t[5]:0))}function Ri(t,e,i,n=!0){return Ni(t,Ci)?Oi(Ci,e,i,n):new Be(e,i)}function Wi(t){const e=t[0]*t[3]-t[1]*t[2];return e<0?a(e,-1,Ii)?-1:e:a(e,1,Ii)?1:e}function Bi(t,e=!0){return!(function(t,e){const i=Wi(t);return(!e||-1!==i)&&1!==i}(t,e)||function(t,e){return e?!((a(t[0],t[3],Ii)||a(t[0],-t[3],Ii))&&(a(t[1],t[2],Ii)||a(t[1],-t[2],Ii))):!(a(t[0],t[3],Ii)&&a(t[1],t[2],Ii))}(t,e))}function Ui(t){let[e,i,n,s,r,o]=t;const a=new Be(r,o);let l=Math.atan2(i,e)*pe,c=1;180!==l&&-180!==l||(c=-1,l=0),c*=Math.sqrt(e*e+i*i),0!==c&&1!==c&&(e/=c,i/=c);let u=e*n+i*s;0!==u&&(n-=u*e,s-=u*i);let h=Math.sqrt(n*n+s*s);e*s-i*n<0&&(h=-h);let d=0;return 0!==h&&(d=Math.atan2(-u,h)*pe%180||0),{translate:a,rotate:l,scale:new Be(c,h),skew:d}}class $i{constructor(t=1,e=0,i=0,n=1,s=0,r=0){this.value=[t,e,i,n,s,r]}get a(){return this.value[0]}get b(){return this.value[1]}get c(){return this.value[2]}get d(){return this.value[3]}get e(){return this.value[4]}get f(){return this.value[5]}get tx(){return this.value[4]}get ty(){return this.value[5]}get determinant(){return Wi(this.value)}get isInvertible(){return function(t){return 0!==Wi(t)}(this.value)}get lineScale(){return function(t){return Math.sqrt(Math.abs(Wi(t)))}(this.value)}get isIdentity(){return ji(this.value)}get isShiftedIdentity(){return function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]}(this.value)}isNonDestructive(t=!0){return Bi(this.value,t)}toIdentity(){return Ti(this.value),this}reset(t=1,e=0,i=0,n=1,s=0,r=0){const o=this.value;return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=s,o[5]=r,this}panZoom(t,e=1){return this.scale(e,e).translate(t.x/e,t.y/e)}preTranslate(t=0,e=0){return function(t,e,i){(e||i)&&(Ci[0]=Ci[3]=1,Ci[1]=Ci[2]=0,Ci[4]=e,Ci[5]=i,Li(Ci,t,t))}(this.value,t,e),this}translate(t=0,e=0){return function(t,e,i){(e||i)&&(t[4]+=t[0]*e+t[2]*i,t[5]+=t[1]*e+t[3]*i)}(this.value,t,e),this}scale(t=1,e=1){return function(t,e,i){1===e&&1===i||(t[0]*=e,t[1]*=e,t[2]*=i,t[3]*=i)}(this.value,t,e),this}skew(t=0,e=0){return Pi(this.value,t,e),this}rotate(t){return Di(this.value,t),this}skewAxis(t=0,e=0){return function(t,e,i){if(e%=360){if(!(i%=360))return Pi(t,-e,0);Di(t,-i),Pi(t,Ei(-e),0),Di(t,i)}}(this.value,t,e),this}inverse(){return Ni(this.value,this.value),this}multiply(t){return Li(this.value,t.value,this.value),this}multiplyInverse(t){var e,i,n;return e=this.value,i=t.value,n=this.value,Ni(i,Ci)&&Li(e,Ci,n),this}preMultiply(t){return Li(t.value,this.value,this.value),this}preMultiplyInverse(t){var e,i,n;return e=this.value,i=t.value,n=this.value,Ni(i,Ci)&&Li(Ci,e,n),this}normalize(){return function(t){for(let e=0;e<6;e++)t[e]=Math.round(t[e]/Ii)*Ii}(this.value),this}point(t,e,i=!0){return Oi(this.value,t,e,i)}transformPoint(t,e=!0){return Oi(this.value,t.x,t.y,e)}transformPointArray(t,e=!0){const i=[],n=this.value;for(const s of t)i.push(Oi(n,s.x,s.y,e));return i}*transformPointList(t,e=!0){const i=this.value;for(const n of t)yield Oi(i,n.x,n.y,e)}inversePoint(t,e,i=!0){return Ri(this.value,t,e,i)}transformInversePoint(t,e=!0){return Ri(this.value,t.x,t.y,e)}clone(){const t=this.value;return new $i(t[0],t[1],t[2],t[3],t[4],t[5])}equals(t){return t?zi(this.value,t.value):this.isIdentity}toString(){return`matrix(${this.value.join(" ")})`}toJSON(){return this.value}decompose(){return Ui(this.value)}static Create(t){return t?Array.isArray(t)?new $i(...t):new $i(t.a||0,t.b||0,t.c||0,t.d||0,t.e||0,t.f||0):new $i}static CreatePanZoom(t,e=1){return new $i(e,0,0,e,t.x,t.y)}static CreateDevicePixelRatio(t=1){return new $i(t,0,0,t,0,0)}static Same(t,e){return Ai(t?.value,e?.value)}}class Fi{constructor(t,e){this.width=t,this.height=e}toJSON(){return[this.width,this.height]}equals(t){return this.width===t.width&&this.height===t.height}clone(){return this}get x(){return 0}get y(){return 0}get left(){return 0}get top(){return 0}get right(){return this.width}get bottom(){return this.height}}let Vi=class{constructor(t){this.type=t}preparePaint(t){return t.isAntiAlias=!0,t.style=Skia.SkPaintStyle.Fill,!0}clone(){return this}equals(t){return t.type===this.type}};class Gi extends Vi{static#_;constructor(){super(0)}toJSON(){return null}get isVisible(){return!1}static get INSTANCE(){return null==this.#_&&(this.#_=new Gi),this.#_}}class Hi extends Vi{constructor(t){super(1),this.color=t}toJSON(){return this.color}get isVisible(){return this.color.a>0}preparePaint(t){return super.preparePaint(t),t.color=this.color.code,!0}equals(t){return t.type===this.type&&this.color.equals(t.color)}withColor(t){return this.color.equals(t)?this:new Hi(t)}static fromColor(t){return new Hi(t instanceof De?t:De.parse(t))}static{this.BLACK=new Hi(De.black)}static{this.WHITE=new Hi(De.white)}static{this.TRANSPARENT=new Hi(De.transparent)}}class Zi{constructor(t){this._nativeCache=null,this._stringCache=null,this._isVisible=null,this.list=t||[]}*[Symbol.iterator](){yield*this.list}toJSON(){return this.list}get length(){return this.list.length}get isVisible(){if(null==this._isVisible){this._isVisible=!1;for(const t of this.list)if(t.color.a>0){this._isVisible=!0;break}}return this._isVisible}hasOffset(t){for(const e of this.list)if(e.offset===t)return!0;return!1}getColorAt(t){return this.list[t]?.color}getOffsetAt(t){return this.list[t]?.offset}expand(t){const e=t.list.length-this.list.length;return e<=0?this:new Zi(Zi.expandStopColorArray(this.cloneStopColorArray(),t.list,e))}allWithColor(t){return new Zi(this.list.map((e=>({offset:e.offset,color:t}))))}cloneStopColorArray(){return this.list.map(qi)}computeColor(t){const e=this.list,i=e.length;if(0===i)return De.black;if(1===i)return e[0].color;if(t<=e[0].offset)return e[0].color;const n=i-1;if(t>=e[n].offset)return e[n].color;let s=e[0];for(let i=1;i<n;i++){const n=e[i];if(s.offset<=t&&t<=n.offset)return t===s.offset?s.color:t===n.offset?n.color:s.color.interpolate(n.color,tn(t,s.offset,n.offset));s=n}return s.color.interpolate(e[n].color,tn(t,s.offset,e[n].offset))}toNative(){if(this._nativeCache)return this._nativeCache;const t={colors:[],offsets:[]};for(const e of this.list)t.colors.push(e.color.code),t.offsets.push(e.offset);return this._nativeCache=t}toString(){return null==this._stringCache&&(this._stringCache=Zi.stringifyStopColorList(this.list)),this._stringCache}createReadonly(t){let e;if(null==t)e=new Zi(this.list.map(qi).sort(Xi));else{const i=this.list.slice();i[t]=qi(i[t]),i.sort(Xi),e=new Zi(i)}return e._isVisible=this._isVisible,e}createWritable(){return new Yi(this.list.map(qi))}clone(){return this}equals(t){if(!t||this.list.length!==t.list.length)return!1;const e=this.list.length;for(let i=0;i<e;i++)if(this.list[i].offset!==t.list[i].offset||!this.list[i].color.equals(t.list[i].color))return!1;return!0}static stringifyStopColorList(t,e){return e&&(t=t.slice().sort(Xi)),t.map(Ki).join(", ")}static fromColor(t){return new Zi(Ji(t))}static fromJSON(t){return new Zi(Qi(t))}static expandStopColorArray(t,e,i){const n=e.length-1;for(let s=0;s<i;s++)t.push({offset:1,color:e[n-s].color});return t}}class Yi extends Zi{sort(){this.list.sort(Xi),this.clearCache()}expand(t){const e=t.list.length-this.list.length;return e>0&&(Zi.expandStopColorArray(this.list,t.list,e),this.clearCache()),this}clearCache(){this._nativeCache=this._stringCache=this._isVisible=null}setColorAt(t,e){return!(t>this.list.length||this.list[t].color.equals(e)||(this.list[t].color=e,this.clearCache(),0))}setOffsetAt(t,e,i=!0){if(t<0||t>this.list.length)return null;const n=this.list[t];return n.offset===e?t:(this.clearCache(),n.offset=e,i?(this.list.sort(Xi),this.list.indexOf(n)):t)}removeColorAt(t){return!(t>this.list.length||(this.list.splice(t,1),this.clearCache(),0))}addStopColor(t,e){null==e&&(e=this.computeColor(t));const i={color:e,offset:t};return this.list.push(i),this.list.sort(Xi),this.clearCache(),i}reverseOffsets(){let t=!1;for(const e of this.list).5!==e.offset&&(e.offset=1-e.offset,t=!0);return!!t&&(this.list.reverse(),this._nativeCache=this._stringCache=null,!0)}reverseColors(){let t=!1;const e=this.list,i=e.length-1,n=Math.trunc(e.length/2);for(let s=0;s<n;s++){const n=i-s;if(e[s].color.equals(e[n].color))continue;const r=e[s].color;e[s].color=e[n].color,e[n].color=r,t=!0}return!!t&&(this._nativeCache=this._stringCache=null,!0)}static fromColor(t){return new Yi(Ji(t))}static fromJSON(t){return new Yi(Qi(t))}clone(){return this.createWritable()}}function Qi(t){for(const e of t)e.color instanceof De||(e.color=De.parse(e.color));return t}function Ji(t){return t?[{color:t,offset:0},{color:t.inverted(),offset:1}]:[{color:De.black,offset:0},{color:De.white,offset:1}]}function qi(t){return{color:t.color,offset:t.offset}}function Ki(t){return t.color+" "+h(100*t.offset)+"%"}function Xi(t,e){return t.offset===e.offset?0:t.offset<e.offset?-1:1}function tn(t,e,i){return e===i?1:(t-e)/(i-e)}class en{#I=null;constructor(t=1,e=0){this.scale=t,this.rotate=e}withScale(t){return this.scale===t?this:new en(t,this.rotate)}withRotate(t){return this.rotate===t?this:new en(this.scale,t)}toJSON(){return[this.scale,this.rotate]}equals(t){return this.rotate===t.rotate&&this.scale===t.scale}clone(){return this}get isIdentity(){return this.#I??=1===this.scale&&this.rotate%360==0}computeMatrix(t){return this.isIdentity?null:(new $i).translate(t.x,t.y).rotate(this.rotate).scale(1,this.scale).translate(-t.x,-t.y)}static Same(t,e){return t?e?t.equals(e):t.isIdentity:!e||e.isIdentity}}class nn extends Vi{#C;constructor(t,e,i,n=null){super(t),this.transform=null,this.#C=void 0,this.stopColors=e,this.spread=i,this.transform=n}get isVisible(){return 0!==this.scale&&this.stopColors.isVisible}get matrix(){return void 0===this.#C?this.#C=this.transform?.computeMatrix(this.origin)||null:this.#C}get rotate(){return this.transform?.rotate??0}get scale(){return this.transform?.scale??1}withScale(t){return this.transform?this.withTransform(this.transform.withScale(t)):this.withTransform(new en(t,0))}withRotate(t){return this.transform?this.withTransform(this.transform.withRotate(t)):this.withTransform(new en(1,t))}withStopColorList(t){return t===this.stopColors?this:this.constructWith(t,this.spread,this.transform)}withStopColorListAndTransform(t,e){return t===this.stopColors&&e===this.transform?this:this.constructWith(t,this.spread,e)}withSpreadMethod(t){return this.spread===t?this:this.constructWith(this.stopColors,t,this.transform)}withTransform(t){return t===this.transform||en.Same(this.transform,t)?this:this.constructWith(this.stopColors,this.spread,t)}equals(t){return this.spread===t.spread&&en.Same(this.transform,t.transform)&&this.stopColors.equals(t.stopColors)}preparePaint(t){const e=this.getShader(this.stopColors.toNative(),function(t){switch(t){case 1:return Skia.SkTileMode.Repeat;case 2:return Skia.SkTileMode.Mirror;default:return Skia.SkTileMode.Clamp}}(this.spread),this.matrix);return!!e&&(super.preparePaint(t),t.shader=e,t.isDither=!0,!0)}getMatrixAndTransform(t){const e=this.matrix;e&&(t=t.clone().multiply(e));const i=t.decompose(),n=0===i.scale.x?0:Math.abs(i.scale.y/i.scale.x),s=i.rotate;if(s%360==0&&1===n)return[t,null];const r=new en(n,s);return e||(t=t.clone()),t.multiplyInverse(r.computeMatrix(this.origin)),[t,r]}}class sn extends nn{#L;constructor(t,e,i,n=0,s=null){super(2,i,n,s),this.start=t,this.end=e}get origin(){return this.center}toJSON(){return[this.start,this.end,this.stopColors,this.spread,this.transform]}get center(){return this.#L??=Be.center(this.start,this.end)}get distance(){return Be.distance(this.start,this.end)}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)&&super.equals(t)}withTransformedCoords(t){if(t.isIdentity)return this;const[e,i]=this.getMatrixAndTransform(t);return new sn(e.transformPoint(this.start),e.transformPoint(this.end),this.stopColors,this.spread,i)}toRelative(t){return this.withPosition(t.getRelativePoint(this.start.x,this.start.y),t.getRelativePoint(this.end.x,this.end.y))}toAbsolute(t){return this.withPosition(t.getAbsolutePoint(this.start.x,this.start.y),t.getAbsolutePoint(this.end.x,this.end.y))}moveBy(t){return new sn(this.start.add(t),this.end.add(t),this.stopColors,this.spread,this.transform)}withPosition(t,e){return new sn(t||this.start,e||this.end,this.stopColors,this.spread,this.transform)}withCenter(t){const e=t.sub(this.center);return e.isZero?this:this.withPosition(this.start.add(e),this.end.add(e))}constructWith(t,e,i){return new sn(this.start,this.end,t,e,i)}getShader(t,e,i){return Skia.SkShader.MakeLinearGradient(this.start,this.end,t.colors,t.offsets,e,i)}}class rn extends nn{constructor(t,e,i,n=0,s=null){super(3,i,n,s),this.center=t,this.radius=e}get origin(){return this.center}toJSON(){return[this.center,this.radius,this.stopColors,this.spread,this.transform]}equals(t){return this.type===t.type&&this.radius===t.radius&&this.center.equals(t.center)&&super.equals(t)}withTransformedCoords(t){if(t.isIdentity)return this;const[e,i]=this.getMatrixAndTransform(t),n=e.transformPoint(this.center);return new rn(n,n.distanceTo(e.point(this.center.x+this.radius,this.center.y)),this.stopColors,this.spread,i)}toRelative(t){return this.withCircle(t.getRelativePoint(this.center.x,this.center.y),t.getRelativeRadius(this.radius))}toAbsolute(t){return this.withCircle(t.getAbsolutePoint(this.center.x,this.center.y),t.getAbsoluteRadius(this.radius))}moveBy(t){return new rn(this.center.add(t),this.spread,this.stopColors,this.spread,this.transform)}withCenter(t){return this.withCircle(t,this.radius)}withRadius(t){return this.withCircle(this.center,t)}withCircle(t,e){return new rn(t??this.center,e??this.radius,this.stopColors,this.spread,this.transform)}constructWith(t,e,i){return new rn(this.center,this.radius,t,e,i)}getShader(t,e,i){return Skia.SkShader.MakeRadialGradient(this.center,this.radius,t.colors,t.offsets,e,i)}}class on extends nn{constructor(t,e,i,n,s,r=0,o=null){super(4,s,r,o),this.start=t,this.startRadius=e,this.end=i,this.endRadius=n}get origin(){return this.end}toJSON(){return[this.start,this.startRadius,this.end,this.endRadius,this.stopColors,this.spread,this.transform]}equals(t){return this.type===t.type&&this.startRadius===t.startRadius&&this.endRadius===t.endRadius&&this.start.equals(t.start)&&this.end.equals(t.end)&&super.equals(t)}moveBy(t){return t.isZero?this:new on(this.start.add(t),this.startRadius,this.end.add(t),this.endRadius,this.stopColors,this.spread,this.transform)}withTransformedCoords(t){if(t.isIdentity)return this;const[e,i]=this.getMatrixAndTransform(t),n=e.transformPoint(this.start),s=e.transformPoint(this.end);return new on(n,n.distanceTo(e.point(this.start.x+this.startRadius,this.start.y)),s,s.distanceTo(e.point(this.end.x+this.endRadius,this.end.y)),this.stopColors,this.spread,i)}toRelative(t){return new on(t.getRelativePoint(this.start.x,this.start.y),t.getRelativeRadius(this.startRadius),t.getRelativePoint(this.end.x,this.end.y),t.getRelativeRadius(this.endRadius),this.stopColors,this.spread,this.transform)}toAbsolute(t){return new on(t.getAbsolutePoint(this.start.x,this.start.y),t.getAbsoluteRadius(this.startRadius),t.getAbsolutePoint(this.end.x,this.end.y),t.getAbsoluteRadius(this.endRadius),this.stopColors,this.spread,this.transform)}withRadius(t,e){return this.startRadius===t&&this.endRadius===e?this:new on(this.start,t,this.end,e,this.stopColors,this.spread,this.transform)}withStartCenter(t,e){if(e){const e=t.distanceTo(this.end),i=this.endRadius-this.startRadius;(i>=0&&e-i>=0||i<0&&e+i>=0)&&(t=Be.fromDirection(t.getDirectionTo(this.end),Math.abs(i)-.1,this.end))}return this.withStart(t,this.startRadius)}withStartRadius(t,e){return e?this.withRadius(t,this.endRadius*t/this.startRadius):this.withStart(this.start,t)}withEndCenter(t,e){if(e){const e=t.distanceTo(this.start),i=this.startRadius-this.endRadius;(i>=0&&e-i>=0||i<0&&e+i>=0)&&(t=Be.fromDirection(t.getDirectionTo(this.start),Math.abs(i)-.1,this.start))}return this.withEnd(t,this.endRadius)}withEndRadius(t,e){return e?this.withRadius(this.startRadius*t/this.endRadius,t):this.withEnd(this.end,t)}withStart(t,e){return t??=this.start,e??=this.startRadius,this.start.equals(t)&&this.startRadius===e?this:new on(t,e,this.end,this.endRadius,this.stopColors,this.spread,this.transform)}withEnd(t,e){return t??=this.end,e??=this.endRadius,this.end.equals(t)&&this.endRadius===e?this:new on(this.start,this.startRadius,t,e,this.stopColors,this.spread,this.transform)}getContain(t,e){const i=t.distanceTo(e),n=this.startRadius-this.endRadius;return(n>=0&&i-n>=0||n<0&&i+n>=0)&&(t=Be.fromDirection(t.getDirectionTo(e),Math.abs(n)-.1,e)),t}withPosition(t,e,i){return t??=this.start,e??=this.end,this.start.equals(t)&&this.end.equals(e)?this:new on(t,this.startRadius,e,this.endRadius,this.stopColors,this.spread,this.transform)}constructWith(t,e,i){return new on(this.start,this.startRadius,this.end,this.endRadius,t,e,i)}getShader(t,e,i){return Skia.SkShader.MakeTwoPointConicalGradient(this.start,this.startRadius,this.end,this.endRadius,t.colors,t.offsets,e,i)}}class an extends nn{constructor(t,e=0,i=360,n,s=0,r=null){super(5,n,s,r),this.center=t,this.startAngle=e,this.arcLength=i}get origin(){return this.center}toJSON(){return[this.center,this.startAngle,this.arcLength,this.stopColors,this.spread,this.transform]}equals(t){return this.type===t.type&&this.startAngle===t.startAngle&&this.arcLength===t.arcLength&&this.center.equals(t.center)&&super.equals(t)}withTransformedCoords(t){if(t.isIdentity)return this;const[e,i]=this.getMatrixAndTransform(t),n=e.transformPoint(this.center);return new an(n,this.startAngle,this.arcLength,this.stopColors,this.spread,i)}toRelative(t){return this.withCircle(t.getRelativePoint(this.center.x,this.center.y))}toAbsolute(t){return this.withCircle(t.getAbsolutePoint(this.center.x,this.center.y))}moveBy(t){return new an(this.center.add(t),this.startAngle,this.arcLength,this.stopColors,this.spread,this.transform)}withCircle(t,e,i){return new an(t||this.center,e??this.startAngle,i??this.arcLength,this.stopColors,this.spread,this.transform)}constructWith(t,e,i){return new an(this.center,this.startAngle,this.arcLength,t,e,i)}getShader(t,e,i){return Skia.SkShader.MakeSweepGradient(this.center,this.startAngle,this.startAngle+this.arcLength,t.colors,t.offsets,e,i)}}function ln(t,e,i){if(t.type===e)return t;switch(e){case 0:return Gi.INSTANCE;case 1:return function(t){return t instanceof nn?Hi.fromColor(t.stopColors.getColorAt(0)):Hi.BLACK}(t);case 2:return function(t,e){let i,n;switch(t.type){case 3:{const{center:e,radius:s}=t;i=e.shifted(-s,-s),n=e.shifted(s,s)}break;case 4:{let e,s;t.endRadius>=t.startRadius?(e=t.end,s=t.endRadius):(e=t.start,s=t.startRadius),i=e.shifted(-s,-s),n=e.shifted(s,s)}break;case 5:{const s=t.center,r=e.diagonal/(2*Math.SQRT2);i=s.shifted(-r,-r),n=s.shifted(r,r)}}return new sn(i??e.topLeft,n??e.bottomRight,cn(t),un(t))}(t,i);case 3:return function(t,e){let i,n;switch(t.type){case 2:i=t.center,n=t.distance/(2*Math.SQRT2);break;case 4:t.endRadius>=t.startRadius?(i=t.end,n=t.endRadius):(i=t.start,n=t.startRadius);break;case 5:i=t.center}return new rn(i??e.middle,n??e.diagonal/(2*Math.SQRT2),cn(t),un(t))}(t,i);case 4:return function(t,e){let i,n;switch(t.type){case 2:i=t.center,n=t.distance/(2*Math.SQRT2);break;case 3:i=t.center,n=t.radius;break;case 5:i=t.center}return i??=e.middle,n??=e.diagonal/(2*Math.SQRT2),new on(i.shifted(n/2,n/2),n/4,i,n,cn(t),un(t))}(t,i);case 5:return function(t,e){let i;switch(t.type){case 2:case 3:i=t.center;break;case 4:i=t.endRadius>=t.startRadius?t.end:t.start}return new an(i||e.middle,0,360,cn(t),un(t))}(t,i)}return t}function cn(t){return t instanceof nn?t.stopColors:t instanceof Hi?Zi.fromColor(t.color):Zi.fromColor(De.black)}function un(t){return t instanceof nn?t.spread:0}class hn{#N=Hi.BLACK;#j=1;#T=0;#z=0;#A=4;#P=[];#n=0;#D=0;#E=0;#O=null;#R;#W=void 0;constructor(t=Hi.BLACK,e=1){this.#N=t,this.#j=e}clone(t){const e=new hn;e.#N=this.#N,e.#j=this.#j,e.#T=this.#T,e.#z=this.#z,e.#A=this.#A,e.#P=this.#P,e.#n=this.#n,e.#D=this.#D,e.#E=this.#E,e.#O=this.#O;let i=!0;return this.#R&&(this.#R.isGlobal?e.#R=this.#R:t?i=!1:e.#R=this.#R.clone()),this.#W?i&&(e.#W=this.#W.clone()):e.#W=this.#W,e}getInflatedBounds(t){let e=this.#j;return 0===e||this.#O&&(e*=this.#O.bounds.height*this.#O.scale,0===e)?t:t.outset(2*e)}invalidate(){this.#W?.delete(),this.#W=void 0}dispose(){this.invalidate(),this.#R&&(this.#R.isGlobal||this.#R.dispose(),this.#R=null),this.#O=null,this.#N=null}toJSON(){return{brush:this.#N,width:this.#j,cap:this.#T,join:this.#z,miter:this.#A,dashes:this.#P,offset:this.#n,dashlen:this.#D,align:this.#E,effect:this.#O?.id||null,profile:this.#R?this.#R.isGlobal?this.#R.id:this.#R:null}}static fromJSON(t,e){const i=new hn;return i.#N=t.brush??Hi.BLACK,i.#j=t.width??1,i.#T=t.cap??0,i.#z=t.join??0,i.#A=t.miter??4,i.#P=t.dashes??[],i.#n=t.offset??0,i.#D=t.dashlen||0,i.#E=t.align??0,e&&("string"==typeof t.effect&&(t.effect=e.getPenEffectById(t.effect)),"string"==typeof t.profile&&(t.profile=e.getPenProfileById(t.profile))),i.#O=t.effect||null,i.#R=t.profile||null,i}get isUniform(){return!this.#O&&0===this.#E}get brush(){return this.#N}set brush(t){this.#N=t}get width(){return this.#j}set width(t){this.#j=t}get lineCap(){return this.#T}set lineCap(t){this.#T=t}get lineJoin(){return this.#z}set lineJoin(t){this.#z=t}get miterLimit(){return this.#A}set miterLimit(t){this.#A=t}get dashes(){return this.#P}set dashes(t){kt(this.#P,t)||(this.#P=t,this.pathEffectUsesDashes||this.invalidate())}get offset(){return this.#n}set offset(t){this.#n!==t&&(this.#n=t,this.#P.length>0&&!this.pathEffectUsesDashes&&this.invalidate())}get dashPathLength(){return this.#D}set dashPathLength(t){this.#D!==t&&(this.#D=t,this.#P.length>0&&!this.pathEffectUsesDashes&&this.invalidate())}get align(){return this.#E}set align(t){this.#E=t}get effect(){return this.#O}set effect(t){this.#O!==t&&(this.#O=t,this.invalidate())}get profile(){return this.#R}set profile(t){this.#R!==t&&(this.#R&&!this.#R.isGlobal&&this.#R.dispose(),this.#R=t,this.#O&&this.invalidate())}get isVisible(){return this.#j>0&&this.#N.isVisible}equals(t){return this.#j===t.#j&&this.#z===t.#z&&this.#T===t.#T&&this.#A===t.#A&&this.#n===t.#n&&this.#D===t.#D&&this.#E===t.#E&&this.#O===t.#O&&this.#R===t.#R&&kt(this.#P,t.#P)&&this.#N.equals(t.#N)}get nativeLineCap(){switch(this.#T){case 2:return Skia.SkPaintStrokeCap.Square;case 1:return Skia.SkPaintStrokeCap.Round;default:return Skia.SkPaintStrokeCap.Butt}}get nativeLineJoin(){switch(this.#z){case 2:return Skia.SkPaintStrokeJoin.Bevel;case 1:return Skia.SkPaintStrokeJoin.Round;default:return Skia.SkPaintStrokeJoin.Miter}}get pathEffect(){return void 0===this.#W&&(this.#W=this.computePathEffect()||null),this.#W}computePathEffect(){return this.#O?this.#R?Skia.SkPathEffect.MakeBend(this.#O.bender,this.#R.pathProfileIn,this.#R.pathProfileOut,this.#E,this.#P,this.#n,this.#D):Skia.SkPathEffect.MakeBend(this.#O.bender,null,null,this.#E,this.#P,this.#n,this.#D):1===this.#E?Skia.SkPathEffect.MakeStrokeOutside():-1===this.#E?Skia.SkPathEffect.MakeStrokeInside():this.#P.length>0?Skia.SkPathEffect.MakeDash(this.#P,this.#n,this.#D):null}get pathEffectUsesDashes(){return null!=this.#O||0!==this.#E}preparePaint(t){return!!this.#N.preparePaint(t)&&(this.prepareStrokePaint(t),!0)}prepareStrokePaint(t){t.style=Skia.SkPaintStyle.Stroke,t.strokeWidth=this.#j,t.strokeMiter=this.#A,t.strokeJoin=this.nativeLineJoin,t.strokeCap=this.nativeLineCap,t.pathEffect=this.pathEffect}outlinePath(t){if(null==t||t.isEmpty)return null;const e=new Skia.SkPaint;e.isAntiAlias=!0,this.prepareStrokePaint(e);const i=t.getFilled(e);return e.delete(),i}}class dn{#t;#B;#U;#$;#F;#V;#G=null;constructor(t,e,i=1,n=0,s=1,r=!1,o=!1){this.id=t||Ct(),this.#t=e,this.#B=i,this.#U=n,this.#$=s,this.#F=r,this.#V=o}get bender(){return null==this.#G?this.#G=Skia.SkPathBender.Make(this.#t.path,this.#B,this.#U,this.#$,this.#F,this.#V,10,.1):this.#G}get bounds(){return this.#t.bounds}clone(t){return new dn(t?null:this.id,this.#t.clone(),this.#B,this.#U,this.#$,this.#F,this.#V)}toJSON(){return{id:this.id,path:this.#t,scale:this.#B,elasticFrom:this.#U,elasticTo:this.#$,flipX:this.#F,flipY:this.#V}}static fromJSON(t){return new dn(t.id,t.path,t.scale??1,t.elasticFrom||0,t.elasticTo??1,t.flipX??!1,t.flipY??!1)}dispose(){this.#t?.dispose(),this.#t=null,this.#G?.delete(),this.#G=null}get scale(){return this.#B}set scale(t){this.setScale(t)}get flipX(){return this.#F}set flipX(t){this.setFlip(t,this.#V)}get flipY(){return this.#V}set flipY(t){this.setFlip(this.#F,t)}get elasticFrom(){return this.#U}set elasticFrom(t){this.setElastic(t,this.#$)}get elasticTo(){return this.#$}set elasticTo(t){this.setElastic(this.#U,t)}setElastic(t,e){if((t=n(t,0,1))>(e=n(e,0,1))){const i=t;t=e,e=i}return(this.#U!==t||this.#$!==e)&&(this.#U=t,this.#$=e,this.bender.setElastic(t,e),!0)}setFlip(t,e){return(this.#F!==t||this.flipY!==e)&&(this.flipX=t,this.flipY=e,this.bender.setFlip(t,e),!0)}setScale(t){return!(!t||this.#B===t||(this.#B=t,this.bender.scale=t,0))}}class fn{constructor(t,e=0,i=0,n=null,s=null){this.point=t,this.type=e,this.joint=i,this.handleIn=n||null,this.handleOut=s||null}toJSON(){return[this.point,this.type,this.joint,this.handleIn,this.handleOut]}get x(){return this.point.x}get y(){return this.point.y}equals(t){return this===t||this.point.equals(t.point)&&this.type===t.type&&this.joint===t.joint&&kt(this.handleIn,t.handleIn)&&kt(this.handleOut,t.handleOut)}clone(){return this}}function pn(t){return 1!==t.joint&&(null!=t.handleIn||null!=t.handleOut)}function gn(t){return 1!==t.joint&&null!=t.handleIn&&null!=t.handleOut}function*mn(t,e){1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?yield*function*(t,e,i,n){yield t,mi??=new Set,gi(mi,t.x,e.x,i.x,n.x),gi(mi,t.y,e.y,i.y,n.y);for(const s of mi)yield vi(t,e,i,n,s);mi.clear(),yield n}(t.point,t.handleOut,e.handleIn,e.point):yield*ii(t.point,t.handleOut,e.point):1!==e.joint&&e.handleIn?yield*ii(t.point,e.handleIn,e.point):(yield t.point,yield e.point)}function yn(t,e,i=1){return i<=0?0:1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?bi(t.point,t.handleOut,e.handleIn,e.point,i):oi(t.point,t.handleOut,e.point,i):1!==e.joint&&e.handleIn?oi(t.point,e.handleIn,e.point,i):function(t,e,i=1){return i<=0?0:(i>1&&(i=1),i*Ue(t.x,t.y,e.x,e.y))}(t.point,e.point,i)}function vn(t,e){const i=t.length;if(e<0||!i)return 0;if(e>t[i-2])return 1;let n=0;for(;e>t[n];)n+=2;return e===t[n]?t[n+1]:0===n?0===t[n]?0:t[n+1]*e/t[n]:t[n]===t[n-2]?t[n-1]:t[n-1]+(t[n+1]-t[n-1])*(e-t[n-2])/(t[n]-t[n-2])}function bn(t,e,i){return 1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?vi(t.point,t.handleOut,e.handleIn,e.point,i):si(t.point,t.handleOut,e.point,i):1!==e.joint&&e.handleIn?si(t.point,e.handleIn,e.point,i):Ve(t.point,e.point,i)}function xn(t,e,i,n){return 2===t?i.mirror(e):3===t?kn(e,i,n):n}function wn(t,e,i,n){const s=n?t.point:e.point;let r;r=1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?n?t.handleOut:e.handleIn:t.handleOut:1!==e.joint&&e.handleIn?e.handleIn:n?e.point:t.point;const o=s.getDirectionTo(r);return[Be.fromDirection(o,i,s),o+(n?Math.PI:0)]}function Mn(t,e,i){let n,s=null,r=null,o=null,a=null,l=!1,c=!1;if(1!==t.joint&&t.handleOut)if(1!==e.joint&&e.handleIn){o=Ve(t.point,t.handleOut,i),a=Ve(e.handleIn,e.point,i);const u=Ve(t.handleOut,e.handleIn,i);s=Ve(o,u,i),r=Ve(u,a,i),n=Ve(s,r,i),l=c=!0}else n=si(t.point,t.handleOut,e.point,i),r=ci(t.point,t.handleOut,e.point,i,!0),o=ci(t.point,t.handleOut,e.point,i,!1),l=!0;else 1!==e.joint&&e.handleIn?(n=si(t.point,e.handleIn,e.point,i),s=ci(t.point,e.handleIn,e.point,i,!1),a=ci(t.point,e.handleIn,e.point,i,!0),c=!0):n=Ve(t.point,e.point,i);const u=t.type>=2,h=Cn(u?t.type:0,Be.fromObject(n),s?Be.fromObject(s):null,r?Be.fromObject(r):null);return l?t=Cn(u?0:t.type,t.point,t.handleIn,Be.fromObject(o)):u&&(t=Pn(t,0)),c&&(e=Cn(e.type,e.point,Be.fromObject(a),e.handleOut)),[t,h,e]}function Sn(t,e){return 0===e?t.handleIn:t.handleOut}function kn(t,e,i){return null==i?e.mirror(t):Be.fromAngle(t.getAngleTo(e),t.distanceTo(i),t)}function _n(t,e,i,n){return 1!==e.joint&&e.handleOut?1!==i.joint&&i.handleIn?function(t,e,i,n,s,r=3){return t.x+r<Math.min(e.x,i.x,n.x,s.x)||t.x-r>Math.max(e.x,i.x,n.x,s.x)||t.y+r<Math.min(e.y,i.y,n.y,s.y)||t.y-r>Math.max(e.y,i.y,n.y,s.y)?null:Ze(t,(t=>vi(e,i,n,s,t)),r)}(t,e.point,e.handleOut,i.handleIn,i.point,n):ai(t,e.point,e.handleOut,i.point,n):1!==i.joint&&i.handleIn?ai(t,e.point,i.handleIn,i.point,n):Ge(t,e.point,i.point,n)}function In(t,e){return!(t.type!==e.type||t.joint!==e.joint||null==t.handleIn&&null!=e.handleIn||null==t.handleOut&&null!=e.handleOut)}function Cn(t,e,i=null,n=null){let s=0;if(null!=i&&null!=n){const t=e.distanceTo(i),r=e.distanceTo(n);a(i.distanceTo(n),t+r)&&(s=a(t,r)?2:3)}else null==i&&null==n&&(s=1);return new fn(e,t,s,i,n)}function Ln(t,e){return new fn(e.point(t.point.x,t.point.y),t.type,t.joint,t.handleIn?e.point(t.handleIn.x,t.handleIn.y):null,t.handleOut?e.point(t.handleOut.x,t.handleOut.y):null)}function Nn(t,e){return e.equals(t.point)?t:new fn(e,t.type,t.joint,t.handleIn,t.handleOut)}function jn(t,e,i,n){return new fn(t.point,t.type,n??t.joint,e,i)}function Tn(t,e){if(0===e){if(!t.handleIn)return t;let e=t.joint;return 2!==e&&3!==e||(e=0),new fn(t.point,t.type,e,null,t.handleOut)}if(!t.handleOut)return t;let i=t.joint;return 2!==i&&3!==i||(i=0),new fn(t.point,t.type,i,t.handleIn,null)}function zn(t,e,i){const n=Sn(t,i);if(null==e){if(null==n)return t}else if(null!=n&&e.equals(n))return t;return 0===i?new fn(t.point,t.type,t.joint,e,xn(t.joint,t.point,e,t.handleOut)):new fn(t.point,t.type,t.joint,xn(t.joint,t.point,e,t.handleIn),e)}function An(t,e){if(t.joint===e)return t;if(1===e)return new fn(t.point,t.type,e,t.handleIn,t.handleOut);let i=t.handleIn,n=t.handleOut;switch(null==i&&(i=null==n?t.point:n.mirror(t.point)),e){case 2:n=i.mirror(t.point);break;case 3:n=kn(t.point,i,n);break;case 0:null==n&&(n=i.mirror(t.point))}return new fn(t.point,t.type,e,i,n)}function Pn(t,e){return t.type===e?t:new fn(t.point,e,t.joint,t.handleIn,t.handleOut)}function Dn(t,e){return new fn(t.point,e??t.type,t.joint,t.handleOut,t.handleIn)}function En(t,e,i,n){if(0===e&&0===i)return t;const s=0===n,r=s?t.handleIn:t.handleOut;if(null==r)return t;const o=s?t.handleOut:t.handleIn,a=r.shifted(e,i);let l=o;switch(t.joint){case 2:l=a.mirror(t.point);break;case 3:l=kn(t.point,a,l)}return s?jn(t,a,l):jn(t,l,a)}function On(t,e,i,n){return 0===n?null==t.handleIn?t:En(t,e-t.handleIn.x,i-t.handleIn.y,0):null==t.handleOut?t:En(t,e-t.handleOut.x,i-t.handleOut.y,1)}function Rn(t,e,i){return On(t,e,i,0)}function Wn(t,e,i){return On(t,e,i,1)}function Bn(t,e,i){return 0===e&&0===i?t:new fn(t.point.shifted(e,i),t.type,t.joint,t.handleIn?t.handleIn.shifted(e,i):null,t.handleOut?t.handleOut.shifted(e,i):null)}function Un(t,e,i){return Bn(t,e-t.point.x,i-t.point.y)}function $n(t){return 1===t?Skia.SkPathFillType.EvenOdd:Skia.SkPathFillType.Winding}class Fn{#t=null;#H=null;#e=null;#Z=1;#C=null;#Y=!1;setInternalPath(t){this.#t&&this.#t!==t&&this.#t.delete(),this.#t=t}convertToPath(){return this.#Q(!0)}#Q(t){const e=new Skia.SkPath;return e.fillType=$n(this.#Z),this.preparePath(e,t),this.#Y&&e.reverse(),this.#C&&!this.#C.isIdentity&&e.transform(this.#C),e}get path(){return this.#t??=this.#Q(!1)}get pathLength(){return this.#H??=this.path.length}get bounds(){return this.#e??=wi.fromLTRBObject(this.path.computeTightBounds())}get fillRule(){return this.#Z}set fillRule(t){this.#Z!==t&&(this.#Z=t,this.#J()&&(this.#t.fillType=$n(t)))}get isDistorted(){return this.#C&&!this.#C.isIdentity}get matrix(){return this.#C}set matrix(t){this.setMatrix(t)}setMatrix(t,e){if(e){if(!t||t.isIdentity)return!1;this.#C&&!this.#C.isIdentity&&(t=t.clone().multiply(this.#C))}if(Ai(t?.value,this.#C?.value))return!1;const i=this.#C;if(this.#C=this.setInternalMatrix(t),this.#t){const e=this.#t.copy();this.invalidate(),this.#t=e,i&&!i.isIdentity&&e.transform(i.clone().inverse()),t&&!t.isIdentity&&e.transform(t)}else this.invalidate();return!0}setInternalMatrix(t){return t}get reversed(){return this.#Y}set reversed(t){this.#Y!==t&&(this.#Y=t,this.#J()&&this.#t.reverse())}#J(){if(!this.#t)return!1;const t=this.#t.copy();return this.#t.delete(),this.#t=t,!0}invalidate(){this.#t?.delete(),this.#t=null,this.#H=null,this.#e=null}dispose(){this.#t?.delete(),this.#t=null,this.#H=0,this.#e=null,this.#C=null,this.#Y=!1}equals(t){return this.#Y===t.#Y&&this.#Z===t.#Z&&Ai(this.#C?.value,t.#C?.value)}applyJSON(t){null!=t.rule&&(this.#Z=t.rule),t.matrix&&(this.#C=t.matrix),t.reversed&&(this.#Y=!0)}clone(){const t=this.cloneSelf();return t.#t=this.#t?this.#t.clone():null,t.#H=this.#H,t.#Z=this.#Z,t.#e=this.#e,t.#C=this.#C,t.#Y=this.#Y,t}toJSON(){return{rule:1!==this.#Z?this.#Z:void 0,matrix:this.#C&&!this.#C.isIdentity?this.#C:void 0,reversed:!!this.#Y||void 0}}toString(){return this.path.toString()}contains(t,e){return this.path.contains(t.x,t.y,e)}isPointInBounds(t,e=0){return this.bounds.contains(t.x,t.y,e)}static fromJSON(t){if(Array.isArray(t))return new this(...t);const e=new this;return e.applyJSON(t),e}}function Vn(t,e,i){return null==i?t.map((t=>An(t,e))):0===i.size?[...t]:t.map(((t,n)=>i.has(n)?An(t,e):t))}function Gn(t,e,i){return t[i]&&t[i].type!==e?((t=[...t])[i]=Pn(t[i],e),t):t}function Hn(t,e,i){return!t[i]||e.equals(t[i])||((t=[...t])[i]=e),t}function Zn(t,e,i,n){return 0===e&&0===i?t:null==n?t.map((t=>Bn(t,e,i))):0===n.size?[...t]:t.map(((t,s)=>n.has(s)?Bn(t,e,i):t))}function Yn(t,e,i,n,s){const r=t[i];if(!r)return t;let o;if(s&&2!==r.joint&&gn(r)){const t=e.mirror(r.point);o=0===n?jn(r,e,t):jn(r,t,e)}else o=On(r,e.x,e.y,n);return o.equals(r)||((t=[...t])[i]=o),t}function Qn(t,e,i){const n=t[e];if(!n)return null;let s=!1;if(2===n.type){if(!i)return null;s=!0}if(3===n.type||s){let i=e-1;for(;i>=0;){switch(t[i].type){case 1:return i;case 2:case 3:return e===i+1?null:i+1}i--}return null}if(!t[++e]||1===t[e].type)return null;if(i&&t[e].type<2){const i=t.length;for(;++e<i;)switch(t[e].type){case 1:return e-1;case 2:case 3:return e}return null}return e}function Jn(t,e){for(;e>=0;){if(1===t[e].type)return e;e--}return 0}function qn(t,e=0){const i=t.length;let n=!1;for(;e<i;){switch(t[e].type){case 2:case 3:return e;case 1:if(n)return e-1;n=!0}e++}return e-1}function Kn(t,e,i,n,s){const r=t[e],o=t[i];return null==n?(null==s||o.handleIn.equals(s)||((t=[...t])[i]=Rn(o,s.x,s.y)),t):null==s?(r.handleOut.equals(n)||((t=[...t])[e]=Wn(r,n.x,n.y)),t):(r.handleOut.equals(n)&&o.handleIn.equals(s)||((t=[...t])[e]=Wn(r,n.x,n.y),t[i]=Rn(o,s.x,s.y)),t)}function Xn(t,e,i,n=.5,s=!1){const r=t[e],o=t[i];let a;if(1!==r.joint&&r.handleOut){if(1!==o.joint&&o.handleIn)return t;if(!s)return t;a=xi(r.point,r.handleOut,o.point,n)}else if(1!==o.joint&&o.handleIn){if(!s)return t;a=xi(r.point,o.handleIn,o.point,n)}else a=s?function(t,e,i=2/3){return xi(t,Ve(t,e,.5),e,i)}(r.point,o.point,n):n<.5?[Ve(r.point,o.point,n),null]:[null,Ve(r.point,o.point,n)];return t=[...t],a[0]&&(t[e]=Cn(r.type,r.point,r.handleIn,Be.fromObject(a[0]))),a[1]&&(t[i]=Cn(o.type,o.point,Be.fromObject(a[1]),o.handleOut)),t}function ts(t,e){const i=t[e];return!i||gn(i)||(t=[...t],1===i.joint?t[e]=new fn(i.point,i.type,0,i.point,i.point):t[e]=new fn(i.point,i.type,i.joint,i.handleIn||i.point,i.handleOut||i.point)),t}function es(t,e,i,n){const s=t[e],r=t[i];let o,a=null;return function(t,e){return!(1===t.joint||!t.handleOut||1===e.joint||!e.handleIn)}(s,r)?o=function(t,e,i,n,s){const r=vi(t,e,i,n,s),o=Je(t,n,qe(s,3)),a=Ke(s,3),l=Ve(e,i,s),c=Ve(Ve(t,e,s),l,s),u=Ve(l,Ve(i,n,s),s),h=1-s,d=s*h;return c.x=(c.x-r.x)/d+t.x-t.x/s,c.y=(c.y-r.y)/d+t.y-t.y/s,u.x=(u.x-r.x)/d+n.x-n.x/h,u.y=(u.y-r.y)/d+n.y-n.y/h,t=>{const e=Qe(t,o,a),i=(t.x-e.x)/d,n=(t.y-e.y)/d;return[{x:c.x+i+e.x/s,y:c.y+n+e.y/s},{x:u.x+i+e.x/h,y:u.y+n+e.y/h}]}}(s.point,s.handleOut,r.handleIn,r.point,n):s.handleOut&&1!==s.joint?(a=0,o=li(s.point,s.handleOut,r.point,n)):(a=1,o=li(s.point,r.handleIn,r.point,n)),{func:o,fromIndex:e,toIndex:i,handleType:a}}function is(t,e){return null==e.handleType?e.func(t):0===e.handleType?[e.func(t),null]:[null,e.func(t)]}function ns(t,e,i){const n=Qn(t,e);if(null==n)return t;const s=Mn(t[e],t[n],i);return(t=[...t])[e]=s[0],t[n]=s[2],t.splice(e+1,0,s[1]),t}function ss(t,e,i){if(!t[e])return t;if(1===t[e].type){t=[...t];const n=new fn(i,1,2),s=t.length<=1||!t[e+1]||1===t[e+1].type;t[e]=Pn(t[e],s?2:0),t.splice(e,0,n)}else if(2===t[e].type){t=[...t];const n=new fn(i,2,2),s=t.length<=1||!t[e-1]||t[e-1].type>=2;t[e]=Pn(t[e],s?1:0),t.splice(e+1,0,n)}return t}function rs(t,e,i){const n=t[e];return n&&Sn(n,i)?((t=[...t])[e]=Tn(n,i),t):t}function os(t,e){if(t=[...t],null==e||0===e.size)return t;for(const i of[...e].sort(at)){switch(t[i].type){case 1:null!=t[i+1]&&1!==t[i+1].type&&(t[i+1]=Pn(t[i+1],1));break;case 2:case 3:null!=t[i-1]&&0===t[i-1].type&&(t[i-1]=Pn(t[i-1],t[i].type))}t.splice(i,1)}return t}function as(t){const e=[];for(const i of bs(t)){const t=i.length-1;if(0===t){e.unshift(Dn(i[0],1));continue}const n=3===i[t].type;n&&i.push(i.shift()),i[0]=Dn(i[0],n?3:2),i[t]=Dn(i[t],1);for(let e=1;e<t;e++)i[e]=Dn(i[e],0);i.reverse(),e.unshift(...i)}return e}function ls(t,e){return!e||e.isIdentity?[...t]:t.map((t=>Ln(t,e)))}function cs(t,e,i){let n,s;for(let r=t.length-1;r>=0;r--)if(s=t[r],1!==s.joint){if(s.handleOut&&(n=e.distanceTo(s.handleOut),n<=i))return{index:r,distance:n,node:s,handle:1};if(s.handleIn&&(n=e.distanceTo(s.handleIn),n<=i))return{index:r,distance:n,node:s,handle:0}}return null}function us(t,e){if(t.length<=1||1===t[e]?.type)return t;let i=qn(t,e);const n=Jn(t,e);if(n===i)return t;let s=!1;if(3!==t[i].type){if(!t[i].point.equals(t[n].point))return t;s=!0}if(t=[...t],s){const s=1!==t[i].joint?t[i].handleIn:null;t[n]=new fn(t[n].point,1,s?0:t[n].joint,s,1!==t[n].joint?t[n].handleOut:null),t.splice(i,1),e===i&&e--,i--,n!==i&&(t[i]=Pn(t[i],3))}return n===i||(t[e]=Pn(t[e],1),i>e&&(t[i]=Pn(t[i],0)),t[e-1]=Pn(t[e-1],3),n<e-1&&(t[n]=Pn(t[n],0)),t.splice(n,i-n+1,...t.slice(e,i+1),...t.slice(n,e))),t}function hs(t){const e=t.length;if(e<2)return 0;let i,n=0,s=null,r=null;for(let o=0;o<e;o++)i=t[o],null!=r&&1!==i.type?(n+=yn(r,i),2===i.type?s=r=null:3===i.type?(n+=yn(i,s),s=r=null):r=i):s=r=i;return n}function ds(t){return f(t,8)}function fs(t,e){const i=t.length;if(e??=new Skia.SkPath,0===i)return e;let n,s=null,r=null;for(let o=0;o<i;o++)n=t[o],null!=r&&1!==n.type?(ps(e,r,n),2===n.type?s=r=null:3===n.type?(ps(e,n,s),e.close(),s=r=null):r=n):(e.moveTo(n.point.x,n.point.y),s=r=n);return e}function ps(t,e,i){1!==i.joint&&i.handleIn?1!==e.joint&&e.handleOut?t.cubicTo(e.handleOut.x,e.handleOut.y,i.handleIn.x,i.handleIn.y,i.point.x,i.point.y):t.quadTo(i.handleIn.x,i.handleIn.y,i.point.x,i.point.y):1!==e.joint&&e.handleOut?t.quadTo(e.handleOut.x,e.handleOut.y,i.point.x,i.point.y):t.lineTo(i.point.x,i.point.y)}function gs(t){const e=[],i=[];return t.walk(((t,n,s,r)=>{switch(t){case Skia.SkPathVerb.Move:i.length>0&&ms(e,i.splice(0)),i.push(new Be(n.x,n.y),null,null);break;case Skia.SkPathVerb.Close:ms(e,i.splice(0),!0);break;case Skia.SkPathVerb.Line:i.push(new Be(n.x,n.y),null,null);break;case Skia.SkPathVerb.Quad:i.length>0&&(i[i.length-1]=new Be(n.x,n.y)),i.push(new Be(s.x,s.y),null,null);break;case Skia.SkPathVerb.Cubic:i.length>0&&(i[i.length-1]=new Be(n.x,n.y)),i.push(new Be(r.x,r.y),new Be(s.x,s.y),null)}}),!1),i.length>0&&ms(e,i),e}function ms(t,e,i=!1){let n=e.length;if(0!==n)if(n-=3,0!==n){if(i&&null==e[1]&&null==e[n+2]&&a(e[0].distanceTo(e[n]),0)?(t.push(Cn(1,e[0],e[n+1],e[2])),n-=3):t.push(Cn(1,e[0],e[1],e[2])),n>0){for(let i=3;i<n;i+=3)t.push(Cn(0,e[i],e[i+1],e[i+2]));t.push(Cn(i?3:2,e[n],e[n+1],e[n+2]))}}else t.push(Cn(1,e[0],e[1],e[2]))}function ys(t){const e=[],i=t.length;if(!i)return e;let n=!1,s=!0;for(let r=0;r<i;r++)switch(t[r].type){case 1:s||e.push(r-1),e.push(r),s=!1,n=!0;break;case 2:case 3:e.push(r),s=!0,n=!1;break;case 0:n||(e.push(r),n=!0,s=!1)}return s||e.push(i-1),e}function vs(t,e){if(e??=ys(t),e.length<=2)return[[...t]];const i=[];for(let n=0;n<e.length;n+=2)i.push(t.slice(e[n],e[n+1]+1));return i}function*bs(t){const e=[];for(const i of t)1===i.type&&e.length>0&&(yield e.splice(0)),e.push(i);e.length>0&&(yield e)}function xs(t,e){const i=[];let n=0;for(let s=0;s<e.length;s+=2){let r=t[e[s]];const o=[n];for(let i=e[s]+1;i<=e[s+1];i++)n+=yn(r,t[i]),o.push(n),r=t[i];3===r.type&&(n+=yn(r,t[e[s]])),o.push(n),i.push(o)}return i}const ws=[0,0,0,0],Ms=[0,0,0,0],Ss=.551784777779014,ks=[1,-1,0,0,-1,1,0,0],_s=[0,1,1,1,1,0,0,0],Is=[0,1,1,2,2,3,3,0];function Cs(t,e,i,n,s,r){if(function(t){return!t||!!Array.isArray(t)&&0===t[0]&&0===t[1]&&0===t[2]&&0===t[3]}(s)){if(r)return[Cn(1,new Be(t,e)),Cn(0,new Be(t+i,e)),Cn(0,new Be(t+i,e+n)),Cn(3,new Be(t,e+n))];s=ws}else Array.isArray(s)||(Ms[0]=Ms[1]=Ms[2]=Ms[3]=s,s=Ms);const o=i&&n?Math.min(i/(s[0]+s[1]),n/(s[1]+s[2]),i/(s[2]+s[3]),n/(s[3]+s[0]),1):0,a=[];let l;for(let r=0;r<8;r++){const c=(r+6)%8;l=s[Is[r]]*o;const u=new Be(t+i*_s[r]+ks[r]*l,e+n*_s[c]+ks[c]*l);l*=Ss;const h=new Be(u.x-l*ks[r],u.y-l*ks[c]);let d;d=r%2?Cn(7===r?3:0,u,null,h):Cn(0===r?1:0,u,h,null),a.push(d)}if(r){let t=a.length-1;for(let e=0;e<t;e+=2){const i=e+1;a[e].point.equals(a[i].point)&&(a[e]=zn(a[e],a[i].handleOut,1),a.splice(i,1),e--,t--)}3!==a[t].type&&(a[t]=Pn(a[t],3))}return a}function Ls(t,e){const i=[],n=t.length-1;if(n<0)return i;i.push(Cn(1,t[0]));for(let e=1;e<n;e++)i.push(Cn(0,t[e]));return n>0&&i.push(Cn(e?3:2,t[n])),i}function Ns(t,e,i,n,s,r,o,a,l){const c=function(t,e,i){const n=2*Math.PI/t;i[0]=(i[0]-90)*fe,i[1]=(i[1]-90)*fe-n/2;const s=new Array(2*t);s[0]=Cn(1,Ts(e[0],i[0])),i[0]+=n,i[1]+=n;const r=2*t-1;for(let t=1;t<r;t++){const r=t%2;s[t]=Cn(0,Ts(e[r],i[r])),i[r]+=n}return s[r]=Cn(3,Ts(e[1],i[1])),s}(t,[i,e],[o+a,r+a]);if(!n&&!s)return l?c:c.map((t=>jn(t,t.point,t.point,2)));const u=[s*i*.47829,n*e*.47829];return c.map(((t,e)=>{const i=Ts(u[e%2],t.point.direction-Math.PI/2,t.point);return jn(t,i,i.mirror(t.point),2)}))}function js(t,e,i,n=0,s){const r=function(t,e,i=0){i-=90,i*=fe;const n=2*Math.PI/t,s=new Array(t);s[0]=Cn(1,Ts(e,i)),i+=n;let r=1;for(;r<t-1;r++)s[r]=Cn(0,Ts(e,i)),i+=n;return s[r]=Cn(3,Ts(e,i)),s}(t,e,n);return i?(i*=e/4,r.map((t=>{const e=Ts(i,t.point.direction-Math.PI/2,t.point);return jn(t,e,e.mirror(t.point),2)}))):s?r:r.map((t=>jn(t,t.point,t.point,2)))}function Ts(t,e,i=Be.ZERO){return new Be(i.x+t*Math.cos(e),i.y+t*Math.sin(e))}class zs extends Fn{#q=null;#K=null;constructor(t){super(),this.nodes=t}toJSON(){const t=super.toJSON();return t.nodes=this.nodes,t}applyJSON(t){this.nodes=t.nodes,super.applyJSON(t)}get isEmpty(){return 0===this.nodes.length}get firstNode(){return this.nodes[0]||null}get lastNode(){return this.nodes[this.nodes.length-1]||null}get contours(){return this.#q??=ys(this.nodes)}get contoursLength(){return this.contours.length>>1}get contoursDimensions(){return this.#K??=xs(this.nodes,this.contours)}setNodes(t){return t!==this.nodes&&(this.nodes.splice(0),this.nodes.push(...t),this.invalidate(),!0)}setInternalMatrix(t){if(!t||t.isIdentity)return null;const e=this.nodes,i=e.length;for(let n=0;n<i;n++)e[n]=Ln(e[n],t);return null}preparePath(t){fs(this.nodes,t)}getPositionInfo(t,e,i=null,n=null){if(!this.isPointInBounds(t,Math.max(e||0,i||0,n||0)))return null!=i?cs(this.nodes,t,i):null;if(null!=e){const i=function(t,e,i){let n,s;for(let r=t.length-1;r>=0;r--)if(s=t[r],n=e.distanceTo(s),n<=i)return{index:r,distance:n,node:s};return null}(this.nodes,t,e);if(i)return i}if(null!=i){const e=cs(this.nodes,t,i);if(e)return e}return null!=n?function(t,e,i){let n,s,r,o,l=null,c=Number.POSITIVE_INFINITY,u=null,h=null;const d=t.length;for(let f=0;f<d;f++)if(s=t[f],h&&1!==s.type){if(o=_n(e,h,s,i),null!=o&&(r=e.distanceTo(bn(h,s,o)),r<=i&&r<c&&(c=r,l=f-1,n=o,a(c,0))))return{index:l,distance:c,percent:n};switch(s.type){case 3:if(o=_n(e,s,u,i),null!=o&&(r=e.distanceTo(bn(s,u,o)),r<=i&&r<c&&(c=r,l=f,n=o,a(c,0))))return{index:l,distance:c,percent:n};u=h=null;break;case 2:u=h=null;break;default:h=s}}else u=h=s;return null==l?null:{index:l,distance:c,percent:n}}(this.nodes,t,n):null}equals(t){const e=this.nodes.length;if(e!==t.nodes.length)return!1;if(!super.equals(t))return!1;for(let i=0;i<e;i++)if(!this.nodes[i].equals(t.nodes[i]))return!1;return!0}cloneSelf(){const t=new zs(this.nodes.slice());return t.#q=this.#q,t.#K=this.#K,t}invalidate(){this.#q=this.#K=null,super.invalidate()}dispose(){super.dispose(),this.nodes.splice(0),this.#q=this.#K=null}static fromRect(t){const e=new Skia.SkPath;return e.moveTo(t.left,t.top),e.lineTo(t.right,t.top),e.lineTo(t.right,t.bottom),e.lineTo(t.left,t.bottom),e.close(),this.fromSkPath(e,!0)}static fromSkPath(t,e){const i=new this(gs(t));return e&&i.setInternalPath(t),i}static fromString(t){const e=Skia.SkPath.MakeFromString(t,!1);return this.fromSkPath(e,!0)}}const As=Be.ZERO,Ps=new Be(.5,0),Ds=new Be(1,0),Es=new Be(0,.5),Os=new Be(.5,.5),Rs=new Be(1,.5),Ws=new Be(0,1),Bs=new Be(.5,1),Us=new Be(1,1),$s=[As,Ps,Ds,Es,Os,Rs,Ws,Bs,Us],Fs=[{x:1,y:1},{x:2,y:1},{x:3,y:1},{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:1,y:3},{x:2,y:3},{x:3,y:3}];function Vs(t,e,i){return new wi(-t.x*e,-t.y*i,e,i)}function Gs(t,e){if(Os.equals(t))return Be.ZERO;let i=0,n=0;return.5!==t.x&&(i=(e.left-e.right)*t.x-e.left),.5!==t.y&&(n=(e.top-e.bottom)*t.y-e.top),new Be(i,n)}function Hs(t){return.5===t.x&&.5===t.y}class Zs extends Fn{#j;#X;#tt;constructor(t=0,e=0,i=null){super(),this.#j=t,this.#X=e,this.#tt=i||Os}get width(){return this.#j}set width(t){this.#j!==t&&(this.#j=t,this.invalidate())}get height(){return this.#X}set height(t){this.#X!==t&&(this.#X=t,this.invalidate())}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate())}dispose(){super.dispose(),this.#tt=null}get x(){return this.#j*(.5-this.#tt.x)}get y(){return this.#X*(.5-this.#tt.y)}get isCircle(){return this.#j===this.#X}equals(t){return this.#j===t.#j&&this.#X===t.#X&&this.#tt.equals(t.#tt)&&super.equals(t)}cloneSelf(){return new Zs(this.#j,this.#X,this.#tt)}preparePath(t,e){const{x:i,y:n}=this;if(e){const e=4*Math.tan(Math.PI/8)/3,s=this.#j/2,r=this.#X/2,o=s*e,a=r*e;t.moveTo(i+s,n),t.cubicTo(i+s,n+a,i+o,n+r,i,n+r),t.cubicTo(i-o,n+r,i-s,n+a,i-s,n),t.cubicTo(i-s,n-a,i-o,n-r,i,n-r),t.cubicTo(i+o,n-r,i+s,n-a,i+s,n),t.close()}else this.#j===this.#X?t.addCircle(i,n,this.#j/2):t.addEllipse(i,n,this.#j/2,this.#X/2)}toJSON(){const t=super.toJSON();return t.width=this.#j,t.height=this.#X,t.pin=Os.equals(this.#tt)?void 0:this.#tt,t}applyJSON(t){this.#j=t.width,this.#X=t.height,t.pin&&(this.#tt=t.pin),super.applyJSON(t)}}class Ys extends Fn{#et;#it=!1;constructor(t,e=!1){super(),this.#et=t,this.#it=e}dispose(){super.dispose(),this.#et=null}get points(){return this.#et}set points(t){this.#et=t,this.invalidate()}get isClosed(){return this.#it}set isClosed(t){this.#it!==t&&(this.#it=t,this.invalidate())}toJSON(){const t=super.toJSON();return t.points=this.#et,this.#it&&(t.closed=!0),t}applyJSON(t){this.#et=t.points,t.closed&&(this.#it=!0),super.applyJSON(t)}getNodeByPosition(t,e){let i,n;for(let s=this.#et.length-1;s>=0;s--)if(n=this.#et[s],i=t.distanceTo(n),i<=e)return{index:s,distance:i,node:n};return null}getProjectionInfo(t,e){let i,n,s,r,o=Number.POSITIVE_INFINITY,l=null,c=null,u=this.#et.length-1,h=0;for(this.#it||(h=u,u--);u>=0;u--)if(r=Ge(t,this.#et[h],this.#et[u],e),null!=r){if(s=Ve(this.#et[h],this.#et[u],r),n=t.distanceTo(s),h=u,n<=e&&n<o&&(c=r,o=n,l=u,i=Be.fromObject(s),a(o,0)))break}else h=u;return null==l?null:(c=1-c,{index:l,distance:o,node:i,percent:c})}getPositionInfo(t,e,i=null){if(null!=e){const i=this.getNodeByPosition(t,e);if(i)return i}return null!=i?this.getProjectionInfo(t,i):null}getPointsInsertAfter(t,e){return Ys.addPointAfter(this.#et,t,e,this.#it)}getPointsMovedBy(t,e,i){return Ys.movePointsBy(this.#et,t,e,i)}equals(t){if(this.#it!==t.#it)return!1;const e=this.#et.length;if(t.#et.length!==e)return!1;if(!super.equals(t))return!1;for(let i=0;i<e;i++)if(!this.#et[i].equals(t.#et[i]))return!1;return!0}setInternalMatrix(t){return!t||t.isIdentity||(this.#et=t.transformPointArray(this.#et)),null}cloneSelf(){return new Ys(this.#et.slice(),this.#it)}get isLine(){return!this.#it&&2===this.#et.length}toString(){return this.#et.map((t=>[f(t.x,8),f(t.y,8)])).flat().join(" ")}preparePath(t){t.addPoly(this.#et,this.#it)}static movePointsBy(t,e,i,n){return 0===e&&0===i?t:n?0===n.size?t:t.map(((t,s)=>n.has(s)?t.shifted(e,i):t)):t.map((t=>t.shifted(e,i)))}static addPointAfter(t,e,i,n){return t[e]?e===t.length-1?n?((t=t.slice()).push(Be.fromObject(Ve(t[e],t[0],i))),t):t:((t=t.slice()).splice(e+1,0,Be.fromObject(Ve(t[e],t[e+1],i))),t):t}static deletePoints(t,e){if(null==e||0===e.size)return t.slice();const i=[];for(let n=0,s=t.length;n<s;n++)e.has(n)||i.push(t[n]);return i}static canInterpolatePoints(t,e){return t.length===e.length}}class Qs{constructor(t=0){"number"==typeof t?(this.value=t,this.isSimple=!0):(this.isSimple=!1,this.value=t)}get isZero(){return this.isSimple?0===this.value:0===this.value[0]&&0===this.value[1]&&0===this.value[2]&&0===this.value[3]}get simpleValue(){if(this.isSimple)return this.value;const t=this.value;return(t[0]+t[1]+t[2]+t[3])/4}get isSimpleValue(){if(this.isSimple)return!0;const t=this.value;return t[0]===t[1]&&t[1]===t[2]&&t[2]===t[3]}add(t){if(t<0&&this.isZero)return this;if(this.isSimple)return new Qs(Math.max(0,this.value+t));const e=this.value.slice();for(let i=0;i<4;i++)e[i]=Math.max(0,e[i]+t);return new Qs(e)}split(){if(this.isSimple){const t=this.value;return new Qs([t,t,t,t])}return this.clone()}join(){return this.isSimple?this.clone():new Qs(this.simpleValue)}equals(t){if(this.isSimple)return t.isSimple&&this.value===t.value;for(let e=0;e<4;e++)if(this.value[e]!==t.value[e])return!1;return!0}toJSON(){return this.value}clone(){return new Qs("number"==typeof this.value?this.value:[...this.value])}static fromJSON(t){return new Qs(t)}static Same(t,e){return t?e?t.equals(e):0===t.value:!e||0===e.value}}class Js extends Fn{#j;#X;#nt;#tt;constructor(t=1,e=1,i=null,n=null){super(),this.#j=t,this.#X=e,this.#nt=i||null,this.#tt=n||As}dispose(){super.dispose(),this.#nt=null,this.#tt=null}get width(){return this.#j}set width(t){this.#j!==t&&(this.#j=t,this.invalidate())}get height(){return this.#X}set height(t){this.#X!==t&&(this.#X=t,this.invalidate())}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate())}get radius(){return this.#nt??=new Qs}set radius(t){this.#nt&&this.#nt.equals(t)||(this.#nt=t,this.invalidate())}get x(){return-this.#tt.x*this.#j}get y(){return-this.#tt.y*this.#X}get diagonal(){return Math.sqrt(this.#j**2+this.#X**2)}get isRounded(){return null!=this.#nt&&!this.#nt.isZero}get isSimple(){return!this.#nt||this.#nt.isSimple}equals(t){return this.#j===t.#j&&this.#X===t.#X&&this.#tt.equals(t.#tt)&&Qs.Same(this.#nt,t.#nt)&&super.equals(t)}toJSON(){const t=super.toJSON();return t.width=this.#j,t.height=this.#X,t.radius=0!==this.#nt?.value?this.#nt:void 0,As.equals(this.#tt)||(t.pin=this.#tt),t}applyJSON(t){this.#j=t.width,this.#X=t.height,t.radius&&(this.#nt=t.radius),t.pin&&(this.#tt=t.pin),super.applyJSON(t)}cloneSelf(){return new Js(this.#j,this.#X,this.#nt?this.#nt.clone():null,this.#tt)}preparePath(t,e){const{x:i,y:n}=this;if(this.isRounded){const s=this.#nt?.value||0;e?fs(Cs(i,n,this.#j,this.#X,s,!0),t):Array.isArray(s)?t.addCornerRadiusRect(i,n,this.#j,this.#X,...s):t.addCornerRadiusRect(i,n,this.#j,this.#X,s,s,s,s)}else t.addRect(i,n,i+this.#j,n+this.#X);t.close()}}class qs extends Fn{#st;#nt;#rt;#ot;#tt;constructor(t,e,i=0,n=0,s=null){super(),this.#st=t,this.#nt=e,this.#rt=i||0,this.#ot=n||0,this.#tt=s||Os}get sides(){return this.#st}set sides(t){this.#st!==t&&(this.#st=t,this.invalidate())}get radius(){return this.#nt}set radius(t){this.#nt!==t&&(this.#nt=t,this.invalidate())}get cornerRadius(){return this.#rt}set cornerRadius(t){this.#rt!==t&&(this.#rt=t,this.invalidate())}get angle(){return this.#ot}set angle(t){this.#ot!==t&&(this.#ot=t,this.invalidate())}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate())}dispose(){super.dispose(),this.#tt=null}toJSON(){const t=super.toJSON();return t.sides=this.#st,t.radius=this.#nt,t.cornerRadius=this.#rt||void 0,t.angle=this.#ot||void 0,Os.equals(this.#tt)||(t.pin=this.#tt),t}applyJSON(t){this.#st=t.sides,this.#nt=t.radius||0,this.#rt=t.cornerRadius||0,this.#ot=t.angle||0,t.pin&&(this.#tt=t.pin),super.applyJSON(t)}equals(t){return this.#st===t.#st&&this.#nt===t.#nt&&this.#rt===t.#rt&&this.#ot===t.#ot&&this.#tt.equals(t.#tt)&&super.equals(t)}cloneSelf(){return new qs(this.#st,this.#nt,this.#rt,this.#ot,this.#tt)}preparePath(t){t.addRoundRegularPolygon(0,0,this.#st,this.#nt,this.#nt,this.#rt,this.#rt,this.#ot);const e=this.#tt;if(Hs(e))return;const i=t.computeTightBounds();if(i){const n=Gs(e,i);n.isZero||t.offset(n.x,n.y)}}}class Ks extends Fn{#st;#at;#lt;#ct;#ut;#ht;#dt;#ot;#tt;constructor(t,e,i,n=0,s=0,r=0,o=0,a=0,l=null){super(),this.#st=t,this.#at=e,this.#lt=i,this.#ct=n||0,this.#ut=s||0,this.#ht=r||0,this.#dt=o||0,this.#ot=a||0,this.#tt=l||Os}dispose(){super.dispose(),this.#tt=null}get sides(){return this.#st}set sides(t){this.#st!==t&&(this.#st=t,this.invalidate())}get outerRadius(){return this.#at}set outerRadius(t){this.#at!==t&&(this.#at=t,this.invalidate())}get innerRadius(){return this.#lt}set innerRadius(t){this.#lt!==t&&(this.#lt=t,this.invalidate())}get outerCornerRadius(){return this.#ct}set outerCornerRadius(t){this.#ct!==t&&(this.#ct=t,this.invalidate())}get innerCornerRadius(){return this.#ut}set innerCornerRadius(t){this.#ut!==t&&(this.#ut=t,this.invalidate())}get outerRotate(){return this.#ht}set outerRotate(t){this.#ht!==t&&(this.#ht=t,this.invalidate())}get innerRotate(){return this.#dt}set innerRotate(t){this.#dt!==t&&(this.#dt=t,this.invalidate())}get angle(){return this.#ot}set angle(t){this.#ot!==t&&(this.#ot=t,this.invalidate())}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate())}toJSON(){const t=super.toJSON();return t.sides=this.#st,t.outerRadius=this.#at,t.innerRadius=this.#lt,t.outerCornerRadius=this.#ct||void 0,t.innerCornerRadius=this.#ut||void 0,t.outerRotate=this.#ht||void 0,t.innerRotate=this.#dt||void 0,t.angle=this.#ot||void 0,Os.equals(this.#tt)||(t.pin=this.#tt),t}applyJSON(t){this.#st=t.sides,this.#at=t.outerRadius||0,this.#lt=t.innerRadius||0,this.#ct=t.outerCornerRadius||0,this.#ut=t.innerCornerRadius||0,this.#ht=t.outerRotate||0,this.#dt=t.innerRotate||0,this.#ot=t.angle||0,t.pin&&(this.#tt=t.pin),super.applyJSON(t)}equals(t){return this.#st===t.#st&&this.#at===t.#at&&this.#lt===t.#lt&&this.#ct===t.#ct&&this.#ut===t.#ut&&this.#ht===t.#ht&&this.#dt===t.#dt&&this.#ot===t.#ot&&this.#tt.equals(t.#tt)&&super.equals(t)}cloneSelf(){return new Ks(this.#st,this.#at,this.#lt,this.#ct,this.#ut,this.#ht,this.#dt,this.#ot,this.#tt)}preparePath(t){if(t.addRoundStar(0,0,this.#st,this.#at,this.#lt,this.#ct,this.#ut,this.#ht,this.#dt,this.#ot),Hs(this.#tt))return;const e=t.computeTightBounds();if(e){const i=Gs(this.#tt,e);i.isZero||t.offset(i.x,i.y)}}}class Xs extends Fn{#et;constructor(t,e){super(),this.#et=[t,e]}dispose(){super.dispose(),this.#et=null}get points(){return this.#et}set points(t){this.setPoints(t)}setPoints(t){return!this.hasPoints(t)&&(this.#et[0]=t[0],this.#et[1]=t[1],this.invalidate(),!0)}get from(){return this.#et[0]}set from(t){t.equals(this.#et[0])||(this.#et[0]=t,this.invalidate())}get to(){return this.#et[1]}set to(t){t.equals(this.#et[1])||(this.#et[1]=t,this.invalidate())}hasPoints(t){return this.#et[0].equals(t[0])&&this.#et[1].equals(t[1])}equals(t){return this.hasPoints(t.#et)&&super.equals(t)}toJSON(){const t=super.toJSON();return t.from=this.#et[0],t.to=this.#et[1],t}applyJSON(t){this.#et[0]=t.from,this.#et[1]=t.to,super.applyJSON(t)}cloneSelf(){return new Xs(this.#et[0],this.#et[1])}preparePath(t){const e=this.#et;t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y)}setInternalMatrix(t){return!t||t.isIdentity||(this.#et[0]=t.transformPoint(this.#et[0]),this.#et[1]=t.transformPoint(this.#et[1])),null}getPointsMovedBy(t,e,i){return 0===t&&0===e?this.#et.slice():null==i?[this.#et[0].shifted(t,e),this.#et[1].shifted(t,e)]:0===i.size?this.#et.slice():[i.has(0)?this.#et[0].shifted(t,e):this.#et[0],i.has(1)?this.#et[1].shifted(t,e):this.#et[1]]}movePointsBy(t,e,i){if(0===t&&0===e)return!1;let n=!1;for(const s of i)this.#et[s]&&(this.#et[s]=this.#et[s].shifted(t,e),n=!0);return n}getPositionInfo(t,e){let i,n;for(let s=1;s>=0;s--)if(n=this.#et[s],i=t.distanceTo(n),i<=e)return{index:s,distance:i,node:n};return null}}class tr{constructor(){this.align=Skia.SkParagraphTextAlign.Start,this.valign=0,this.width=0,this.height=0,this.autoWidth=!0,this.autoHeight=!0,this.hinting=!1}clone(){const t=new tr;return t.align=this.align,t.valign=this.valign,t.width=this.width,t.height=this.height,t.autoWidth=this.autoWidth,t.autoHeight=this.autoHeight,t}toJSON(){return{align:this.align,valign:this.valign,width:this.width,height:this.height,autoWidth:this.autoWidth,autoHeight:this.autoHeight}}static fromJSON(t){const e=new tr;return e.align=t.align,e.valign=t.valign,e.width=t.width,e.height=t.height,e.autoWidth=t.autoWidth,e.autoHeight=t.autoHeight,e}setWidth(t){return!this.autoWidth&&(t<0&&(t=0),this.width!==t&&(this.width=t,!0))}setHeight(t){return!this.autoHeight&&(t<0&&(t=0),this.height!==t&&(this.height=t,!0))}setAlign(t){return this.align!==t&&(this.align=t,!0)}setVAlign(t){return this.valign!==t&&(this.valign=t,!0)}get adjustY(){if(this.autoHeight)return 0;switch(this.valign){case 1:return 1;case 2:return.5;case 0:return 0}}get adjustX(){if(this.autoWidth)switch(this.align){case Skia.SkParagraphTextAlign.Center:case Skia.SkParagraphTextAlign.Justify:return.5;case Skia.SkParagraphTextAlign.End:return 1}return 0}get maxWidth(){return this.autoWidth?Number.MAX_SAFE_INTEGER:this.width}get maxHeight(){return this.autoHeight?0:this.height}}class er{#ft;#pt=null;#gt=null;#mt=null;constructor(t=""){this.#ft=t}toJSON(){return this.#ft}static fromJSON(t){return new er(t??"")}clone(){const t=new er(this.#ft);return t.#pt=this.#pt,t.#gt=this.#gt,t.#mt=this.#mt,t}invalidate(){this.#pt=null,this.#gt=null,this.#mt=null}get text(){return this.#ft}set text(t){this.#ft!==t&&(this.#ft=t,this.invalidate())}get nbText(){return null===this.#mt&&(this.#mt=this.#ft.replace(/(^ | $)/gm," ")),this.#mt}get length(){return this.#ft.length}get lines(){return null===this.#pt&&(""===this.#ft?this.#pt=[""]:(this.#pt=this.#ft.split(/^/gm),this.#ft.endsWith("\n")&&this.#pt.push(""))),this.#pt}get words(){return null===this.#gt&&(""===this.#ft?this.#gt=[]:this.#gt=this.#ft.split(/\b(\w+\W+)/gm).filter(ir)),this.#gt}insertAt(t,e){return 0!==t.length&&(0===e?this.#ft=t+this.#ft:e===this.#ft.length?this.#ft=this.#ft+t:this.#ft=this.#ft.substring(0,e)+t+this.#ft.substring(e),this.invalidate(),!0)}removeRange(t,e){return t!==e&&(e<t&&([t,e]=[e,t]),0===t?this.#ft=this.#ft.substring(e):e>=this.#ft.length?this.#ft=this.#ft.substring(0,t):this.#ft=this.#ft.substring(0,t)+this.#ft.substring(e),this.invalidate(),!0)}getRange(t,e){return t===e?"":(e<t&&([t,e]=[e,t]),this.#ft.substring(t,e))}prepend(t){return 0!==t.length&&(this.#ft=t+this.#ft,this.invalidate(),!0)}append(t){return 0!==t.length&&(this.#ft+=t,this.invalidate(),!0)}resolveCharRange(t,e){const i=this.#ft.length;return e.start=Math.round(t.start*i),e.end=Math.round(t.end*i),e}resolveLineRange(t,e){const i=this.lines;return e.start=nr(i,Math.round(t.start*i.length)),e.end=nr(i,Math.round(t.end*i.length)),e}resolveWordRange(t,e){const i=this.words;return 0===i.length?e.start=e.end=0:(e.start=nr(i,Math.round(t.start*i.length)),e.end=nr(i,Math.round(t.end*i.length))),e}getCharRange(t){return this.resolveCharRange(t,{start:0,end:0})}getLineRange(t){return this.resolveLineRange(t,{start:0,end:0})}getWordRange(t){return this.resolveWordRange(t,{start:0,end:0})}}function ir(t){return t.length>0}function nr(t,e){if(e<=0)return 0;let i=t[0].length;for(let n=1;n<e&&n<t.length;n++)i+=t[n].length;return i}const sr=new Map([["semicondensed","semi-condensed"],["ultracondensed","ultra-condensed"],["extracondensed","extra-condensed"],["semiexpanded","semi-expanded"],["extraexpanded","extra-expanded"],["ultraexpanded","ultra-expanded"],["condensed","condensed"],["expanded","expanded"],["extended","expanded"],["thin","100"],["hairline","100"],["extralight","200"],["ultralight","200"],["extralight","250"],["light","300"],["lite","300"],["book","350"],["normal","400"],["regular","400"],["plain","400"],["standard","400"],["thick","425"],["extrathick","450"],["medium","500"],["dark","500"],["extradark","550"],["semibold","600"],["demibold","600"],["bold","700"],["extrabold","800"],["ultrabold","800"],["black","900"],["heavy","900"],["fat","900"],["poster","900"],["extrablack","950"],["ultrablack","950"],["oblique","oblique"],["italic","italic"]]),rr=new Map;function*or(t){const e=function(t){return t.variablePrefix?t.variablePrefix:t.typoFamilyName?cr(t.typoFamilyName):t.styleName?cr(t.familyName+t.styleName):t.subFamilyName?cr(t.familyName+t.subFamilyName):cr(t.familyName)}(t),i=function(t){if(!t?.length)return null;const e=new Map;for(const i of t)e.set(i.name,i);return e}(t.axisDefinition);if(t?.instances?.length){let n=null!=t.axisValue,s=null!=t.subFamilyName;for(const r of t.instances){const o=ar(r,e,i);if(n&&lr(t.axisValue,r.axisValue)&&(n=!1,o.includes(t.postScriptName)||o.splice(1,0,t.postScriptName)),s&&t.subFamilyName===r.styleName){s=!1;const i=cr(t.postScriptName);o.includes(i)||o.splice(1,0,i),e&&!o.includes(e)&&o.splice(1,0,e)}yield o}}else yield function(t,e){const i=cr(e);return t.includes(i)||t.splice(1,0,i),t.includes(e)||t.splice(1,0,e),t}(ar(t,e,i),t.postScriptName)}function ar(t,e,i){const n=[t.postScriptName];if(t.styleName){const i=e+"-"+cr(t.styleName);n.includes(i)||n.push(i);const s=e+"-"+t.styleName.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]+/g,"");n.includes(s)||n.push(s)}if(i&&t.axisValue){const s=["","",""];for(const[e,n]of Object.entries(t.axisValue)){if(!i.has(e))continue;const t=`_${ur(n)}${cr(e)}`,r=i.get(e);s[2]+=t,r.def!==n&&(s[1]+=t,r.hidden||(s[0]+=t))}for(let t of s)t&&(t=e+t,n.includes(t)||n.push(t))}return n}function lr(t,e){if(!e)return!1;for(const[i,n]of Object.entries(t))if(e[i]!==n)return!1;return!0}function cr(t){return t.replace(/[^a-zA-Z0-9]+/g,"")}function ur(t){if(!t)return"0";if(Number.isInteger(t))return t.toString();let e=t.toFixed(2);return e=e.replace(/[0]+$/,""),e.endsWith(".")?e.substring(0,e.length-1):e}const hr=new Map,dr=new Set,fr=new Set;let pr;const gr=new Map;let mr;const yr=new Map;function vr(t){for(const e of t)gr.has(e)||gr.set(e,t)}function br(t){return gr.has(t)?gr.get(t)[0]:t}function xr(t){return gr.get(t)||null}function wr(t){return fr.has(t)}function Mr(t){return dr.has(t)}function Sr(t){if(hr.has(t))return hr.get(t);const e=gr.get(t);if(!e)return null;for(const t of e)if(hr.has(t))return hr.get(t);return null}async function kr(...t){const e=[];for(let i of t){const t=Sr(i);null!=t&&await Ir(t)||e.includes(i)||e.push(i)}return e}function _r(t){if(t?.length)for(const e of t)for(const t of or(e))dr.add(t[0]),vr(t)}async function Ir(t){const e=br(t.postscriptName);if(dr.has(e))return!0;if(fr.has(e))return!1;if(mr.hasFamilyName(e))return dr.add(e),!0;try{const e=await(await t.blob()).arrayBuffer();e?.byteLength&&_r(mr.addAllFontInstances(e))}catch{}return!!dr.has(br(e))||(fr.add(e),function(t){if(hr.delete(t.postscriptName),!yr.has(t.family))return;const e=yr.get(t.family),i=e.indexOf(t);i>=0&&(e.splice(i,1),0===e.length&&yr.delete(t.family))}(t),!1)}function Cr(t){return t.clone()}function Lr(t,e){if(e.isEmpty())return!1;let i=!1;for(const n of t)e.mergeStyleInto(n.style)&&(i=!0);return i}function Nr(t,e,i,n,s){if(0===t.length)return!0;if(i===n){if(!s||e.isEmpty())return!1;for(const n of t)if(n.start>=i)return e.mergeStyleInto(n.style);return!1}if(e.isEmpty())return!1;n<i&&([i,n]=[n,i]);let r=!1;for(let s=0;s<t.length;s++){const o=t[s];if(o.start>=n)break;if(!(o.end<=i||e.sameStyle(o.style)))if(r=!0,o.start<i)if(o.end>n){const r=o.clone(),a=o.clone();e.mergeStyleInto(o.style),r.end=o.start=i,a.start=o.end=n,t.splice(s,1,r,o,a),s+=2}else{const n=o.clone();e.mergeStyleInto(n.style),n.start=o.end=i,s++,t.splice(s,0,n)}else if(o.end<=n)e.mergeStyleInto(o.style);else{const i=o.clone();e.mergeStyleInto(i.style),i.end=o.start=n,t.splice(s,0,i),s++}}return r}function jr(t,e,i,n,s){if(e===i||0===t.length)return!1;if(i<e&&([e,i]=[i,e]),i<0)return!1;if(e<0&&(e=0),0===e&&i>=n){if(s){if(1===t.length&&0===t[0].start&&t[0].end===n)return!1;t.splice(1),t[0].start=0,t[0].end=n}else t.splice(0);return!0}const r=i-e;for(let n=0;n<t.length;n++){const s=t[n];s.end<=e||(s.start>=i?(s.start-=r,s.end-=r):s.start<e?s.end>i?s.end-=r:s.end=e:s.end<=i?(t.splice(n,1),n--):(s.start=i-r,s.end-=r))}return!0}function Tr(t,e,i){if(i<=0)return!1;for(const n of t)n.end<e||(n.start>0&&n.start>=e&&(n.start+=i),n.end+=i);return!0}function zr(t,e){let i=t.length-1;if(i<0)return!1;if(0===i)return(0!==t[0].start||t[0].end!==e)&&(t[0].start=0,t[0].end=e,!0);let n=!1;for(let e=0;e<i;e++){const s=t[e],r=t[e+1];s.style.sameStyle(r.style)&&(s.end=r.end,t.splice(e+1,1),e--,i--,n=!0)}return 0!==t[0].start&&(t[0].start=0,n=!0),t[i].end!==e&&(t[i].end=e,n=!0),n}function Ar(t,e){return e<=0?t[0]:e>=t.length?t[t.length-1]:t[e]}function Pr(t,e,i,n){if(i.end<=i.start)return!1;if(0===i.start&&1===i.end)return Lr(t,e);const{start:s,end:r}=i.resolveRange(n);return!(r<=s)&&(0===s&&r===n.length?Lr(t,e):Nr(t,e,s,r,!1))}function Dr(t,e,i){return void 0===t||void 0!==e&&(i?kt(t,e):t===e)}function Er(t,e){return Dr(t.fillOpacity,e.fillOpacity)&&Dr(t.fill,e.fill,!0)}function Or(t,e){return Dr(t.strokeOpacity,e.strokeOpacity)&&Dr(t.strokeLineWidth,e.strokeLineWidth)&&Dr(t.strokeLineCap,e.strokeLineCap)&&Dr(t.strokeLineJoin,e.strokeLineJoin)&&Dr(t.strokeMiterLimit,e.strokeMiterLimit)&&Dr(t.strokeDashOffset,e.strokeDashOffset)&&Dr(t.paintOrder,e.paintOrder)&&Dr(t.strokeDashArray,e.strokeDashArray,!0)&&Dr(t.strokeBrush,e.strokeBrush,!0)}class Rr{#C=null;#yt=null;constructor(t,e){this.blobs=t,this.#C=e}get isEmpty(){return 0===this.blobs.length}setMatrix(t,e){if(e){if(!t||t.isIdentity)return!1;this.#C&&!this.#C.isIdentity&&(t=t.clone().multiply(this.#C))}if(Ai(t?.value,this.#C?.value))return!1;const i=this.#C;if(this.#C=t,this.#yt){const e=this.#yt;for(let n=0;n<e.length;n++){if(!e[n])continue;const s=e[n].copy();e[n].delete(),e[n]=s,i&&!i.isIdentity&&s.transform(i.clone().inverse()),t&&!t.isIdentity&&s.transform(t)}}return!0}clone(){const t=new Rr(this.blobs.map((t=>((t={...t}).blob=t.blob.clone(),t))),this.#C);return this.#yt&&(t.#yt=this.#yt.map((t=>t?t.clone():t))),t}dispose(){if(this.blobs){for(const t of this.blobs.splice(0))t.blob?.delete();this.blobs=null}if(this.#yt){for(const t of this.#yt.splice(0))t?.delete();this.#yt=null}this.#C=null}getPath(t){const e=this.blobs.indexOf(t);if(e<0)return null;const i=this.#yt??=[];if(void 0===i[e]){const n=t.blob.getPath();n&&!n.isEmpty?(n.fillType=Skia.SkPathFillType.Winding,(t.x||t.y)&&n.offset(t.x,t.y),this.#C&&n.transform(this.#C),i[e]=n):(n?.delete(),i[e]=null)}return i[e]}}class Wr{#vt=!1;#bt=null;#xt=null;#pt=null;#wt=null;#Mt=null;#St=null;#e=null;#kt=!1;#t=null;#H=null;#C=null;constructor(t,e,i){this.source=t instanceof er?t:new er(t||""),this.style=e||new tr,this.#C=i||null}toJSON(){return{matrix:this.#C||void 0}}get isEditMode(){return this.#kt}set isEditMode(t){this.#kt!==t&&(this.#kt=t,this.#Mt=null)}get path(){return null==this.#t?this.#t=this.#Q():this.#t}get pathLength(){return null==this.#H?this.#H=this.path?.length||0:this.#H}#Q(){const t=new Skia.SkPath,e=this.#kt,i=this.blobList;for(const n of i.blobs){if(e&&n.clip)continue;const s=i.getPath(n);s&&t.addPath(s)}return t}get matrix(){return this.#C}set matrix(t){this.setMatrix(t)}setMatrix(t){return!(!t||t.isIdentity||(this.#C&&(t=t.clone().multiply(this.#C)),this.#C=t,this.#xt&&this.#xt.setMatrix(t),0))}cloneProperties(t){t.#vt=this.#vt,t.#bt=this.#bt?this.#bt.clone():null,t.#pt=this.#pt,t.#wt=this.#wt,t.#Mt=this.#Mt,t.#St=this.#St,t.#e=this.#e,t.#C=this.#C,this.#xt&&(t.#xt=this.#xt.clone())}get linesBounds(){return this.#St??=wi.merge(this.lines)}get tightBounds(){return this.#Mt??this.#_t()}#_t(){const{bounds:t,style:e}=this;if(!e.autoWidth&&!e.autoHeight)return t;const i=this.linesBounds.intersection(t);return e.autoWidth?e.autoHeight?i??wi.ZERO:this.#Mt=new wi(i?i.x:0,t.y,i?i.width:0,t.height):new wi(t.x,i?i.y:0,t.width,i?i.height:0)}get bounds(){return this.#e??=this.#It()}#It(){const t=this.style;if(t.autoWidth){const e=this.native.getLongestLine();return t.autoHeight?new wi(-t.adjustX*e,0,e,this.native.getHeight()):new wi(-t.adjustX*e,0,e,t.height)}return t.autoHeight?new wi(0,0,t.width,this.native.getHeight()):new wi(0,0,t.width,t.height)}isPointOverText(t,e){if(this.#C&&(t=this.#C.inversePoint(t.x,t.y)),!(this.#kt?this.linesBounds:this.tightBounds).contains(t.x,t.y))return!1;if(e)return!0;for(const e of this.lines)if(t.y>=e.top&&t.y<=e.bottom&&t.x>=e.left&&t.x<=e.right)return!0;return!1}#Ct(){let t;this.#vt=!1,0===this.source.length?(t=" ",this.#vt=!0):(t=this.source.nbText,"\n"===t[t.length-1]&&(t+=" ",this.#vt=!0));const e=this.style,i=e.align;e.autoWidth&&(e.align=Skia.SkParagraphTextAlign.Start);const n=this.computeBlocks();this.#wt=n;const s=Skia.SkParagraph.MakeMulti(t,e,n,mr);return e.align=i,s.layout(e.maxWidth),e.autoWidth&&(e.width=Math.ceil(s.getLongestLine())),e.autoHeight&&(e.height=Math.ceil(s.getHeight())),s}get native(){return this.#bt??=this.#Ct()}#Lt(){const t=this.style,{adjustX:e,adjustY:i}=t,n=this.native?.getLines(e,i,t.maxHeight,e,!1);if(!n?.length)return[];if(this.#vt){const t=n[n.length-1];t.end--;const e=t.runs[t.runs.length-1];1===e.indexes.length?t.runs.pop():(e.indexes=e.indexes.slice(0,-1),e.positions=e.positions.slice(0,-1),e.glyphs&&e.glyphs.slice(0,-1))}return n}get lines(){return this.#pt??=this.#Lt()}#Nt(){const{adjustX:t,adjustY:e,maxHeight:i}=this.style,n=this.native?.getBlobs(t,e,i,t)??[];return new Rr(n,this.#C)}get blobList(){return this.#xt??=this.#Nt()}#jt(){return null==this.#wt&&this.native,this.#wt}*pathsWithStyle(){const t=this.blobList,e=this.#jt();for(const i of t.blobs){if(i.clip)continue;const n=Ar(e,i.index);if(!n)continue;let s=t.getPath(i);s&&(yield[s,n.style])}}draw(t,e){if(0===this.source.length)return;const i=this.blobList;if(i.isEmpty)return;const n=this.#jt(),s=new Skia.SkPaint,r=new Skia.SkPaint;let o=!1,a=!1;const l=t.canvas,c=e?e.clone():new hn;let u=null;const h=!this.#kt,d=this.#C;for(const t of i.blobs){if(h&&t.clip)continue;const e=n[t.index]?.style;e&&(e!==u&&(u&&Er(e,u)||(a=this.#Tt(e,r)),u&&Or(e,u)||(o=this.#zt(e,c,s)),u=e),0===e.paintOrder?(a&&this.#At(l,t,r,d),o&&this.#At(l,t,s,d)):(o&&this.#At(l,t,s,d),a&&this.#At(l,t,r,d)))}s.delete(),r.delete(),c.dispose()}#Tt(t,e){return!(0===t.fillOpacity||!t.fill.isVisible||(e.reset(),!t.fill.preparePaint(e)||(t.fillOpacity<1&&e.addAlpha(t.fillOpacity),0)))}#zt(t,e,i){return!(0===t.strokeOpacity||0===t.strokeLineWidth||!t.strokeBrush.isVisible||(e.width=t.strokeLineWidth,e.lineCap=t.strokeLineCap,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,e.offset=t.strokeDashOffset,e.dashes=t.strokeDashArray,e.brush=t.strokeBrush,i.reset(),!e.preparePaint(i)||(t.strokeOpacity<1&&i.addAlpha(t.strokeOpacity),0)))}#At(t,e,i,n){if(n){const n=this.#xt.getPath(e);n&&t.drawPath(n,i)}else t.drawTextBlob(e.blob,i,e.x,e.y)}invalidate(){this.#xt&&(this.#xt.dispose(),this.#xt=null),this.#bt?.delete(),this.#bt=null,this.#pt=null,this.#wt=null,this.#Mt=this.#St=this.#e=null,this.#t?.delete(),this.#t=null,this.#H=null}dispose(){this.invalidate(),this.style=null,this.source=null,this.#C=null}setText(t){return t!==this.source.text&&!!this._setText(t)&&(this.invalidate(),!0)}insertText(t,e,i){i??=e;let n=!1;return e!==i&&(n=this._removeRange(e,i),0===t.length)?!!n&&(this.invalidate(),!0):!(0===t.length||!this._insertAt(t,Math.min(e,i))&&!n||(this.invalidate(),0))}removeText(t,e){return t!==e&&!!this._removeRange(t,e)&&(this.invalidate(),!0)}}const Br={};class Ur{constructor(){this.fill=void 0,this.fillOpacity=void 0,this.strokeBrush=void 0,this.strokeOpacity=void 0,this.strokeLineWidth=void 0,this.strokeLineCap=void 0,this.strokeLineJoin=void 0,this.strokeMiterLimit=void 0,this.strokeDashArray=void 0,this.strokeDashOffset=void 0,this.paintOrder=void 0,this.fontId=void 0,this.fontSize=void 0,this.fontFeatures=void 0,this.letterSpacing=void 0,this.wordSpacing=void 0,this.lineHeight=void 0,this.baselineShift=void 0}set fillRule(t){}get fillRule(){return 0}toJSON(){return{fill:this.fill,fillOpacity:this.fillOpacity,paintOrder:this.paintOrder,strokeBrush:this.strokeBrush,strokeOpacity:this.strokeOpacity,strokeLineWidth:this.strokeLineWidth,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeDashArray:this.strokeDashArray,strokeDashOffset:this.strokeDashOffset,fontId:this.fontId,fontSize:this.fontSize,fontFeatures:this.fontFeatures,letterSpacing:this.letterSpacing,wordSpacing:this.wordSpacing,lineHeight:this.lineHeight,baselineShift:this.baselineShift}}static fromJSON(t){const e=new Ur;return!t.fontId&&t.fontFamily&&(t.fontId=t.fontFamily,delete t.fontFamily),e.copyProperties(t,!1),e}copyProperties(t,e){this.fill=t.fill?e?t.fill.clone():t.fill:void 0,this.fillOpacity=t.fillOpacity,this.strokeBrush=t.strokeBrush?e?t.strokeBrush.clone():t.strokeBrush:void 0,this.strokeOpacity=t.strokeOpacity,this.strokeLineWidth=t.strokeLineWidth,this.strokeLineCap=t.strokeLineCap,this.strokeLineJoin=t.strokeLineJoin,this.strokeMiterLimit=t.strokeMiterLimit,this.strokeDashArray=t.strokeDashArray?e?t.strokeDashArray.slice():t.strokeDashArray:void 0,this.strokeDashOffset=t.strokeDashOffset,this.paintOrder=t.paintOrder,this.fontId=t.fontId,this.fontSize=t.fontSize,this.fontFeatures=t.fontFeatures,this.letterSpacing=t.letterSpacing,this.wordSpacing=t.wordSpacing,this.lineHeight=t.lineHeight,this.baselineShift=t.baselineShift}clone(){const t=new Ur;return t.copyProperties(this,!0),t}mergeStyleInto(t){let e=!1;return function(t,e){let i=!1;return void 0===t.fill||e.fill&&t.fill.equals(e.fill)||(e.fill=t.fill.clone(),i=!0),void 0!==t.fillOpacity&&t.fillOpacity!==e.fillOpacity&&(e.fillOpacity=t.fillOpacity,i=!0),i}(this,t)&&(e=!0),function(t,e){let i=!1;return void 0===t.strokeBrush||e.strokeBrush&&t.strokeBrush.equals(e.strokeBrush)||(e.strokeBrush=t.strokeBrush.clone(),i=!0),void 0!==t.strokeOpacity&&t.strokeOpacity!==e.strokeOpacity&&(e.strokeOpacity=t.strokeOpacity,i=!0),void 0!==t.strokeLineWidth&&t.strokeLineWidth!==e.strokeLineWidth&&(e.strokeLineWidth=t.strokeLineWidth,i=!0),void 0!==t.strokeLineCap&&t.strokeLineCap!==e.strokeLineCap&&(e.strokeLineCap=t.strokeLineCap,i=!0),void 0!==t.strokeLineJoin&&t.strokeLineJoin!==e.strokeLineJoin&&(e.strokeLineJoin=t.strokeLineJoin,i=!0),void 0!==t.strokeMiterLimit&&t.strokeMiterLimit!==e.strokeMiterLimit&&(e.strokeMiterLimit=t.strokeMiterLimit,i=!0),void 0===t.strokeDashArray||e.strokeDashArray&&kt(t.strokeDashArray,e.strokeDashArray)||(e.strokeDashArray=t.strokeDashArray.slice(),i=!0),void 0!==t.strokeDashOffset&&t.strokeDashOffset!==e.strokeDashOffset&&(e.strokeDashOffset=t.strokeDashOffset,i=!0),void 0!==t.paintOrder&&t.paintOrder!==e.paintOrder&&(e.paintOrder=t.paintOrder,i=!0),i}(this,t)&&(e=!0),function(t,e){let i=!1;return void 0!==t.fontId&&t.fontId!==e.fontId&&(e.fontId=t.fontId,i=!0),void 0!==t.fontSize&&t.fontSize!==e.fontSize&&(e.fontSize=t.fontSize,i=!0),void 0!==t.fontFeatures&&t.fontFeatures!==e.fontFeatures&&(e.fontFeatures=t.fontFeatures,i=!0),void 0!==t.letterSpacing&&t.letterSpacing!==e.letterSpacing&&(e.letterSpacing=t.letterSpacing,i=!0),void 0!==t.wordSpacing&&t.wordSpacing!==e.wordSpacing&&(e.wordSpacing=t.wordSpacing,i=!0),void 0!==t.lineHeight&&t.lineHeight!==e.lineHeight&&(e.lineHeight=t.lineHeight,i=!0),void 0!==t.baselineShift&&t.baselineShift!==e.baselineShift&&(e.baselineShift=t.baselineShift,i=!0),i}(this,t)&&(e=!0),e}sameStyle(t){return function(t,e){return Dr(t.fontSize,e.fontSize)&&Dr(t.fontFeatures,e.fontFeatures)&&Dr(t.letterSpacing,e.letterSpacing)&&Dr(t.wordSpacing,e.wordSpacing)&&Dr(t.lineHeight,e.lineHeight)&&Dr(t.baselineShift,e.baselineShift)&&Dr(t.fontId,e.fontId)}(this,t)&&Er(this,t)&&Or(this,t)}samePaint(t){return Er(this,t)&&Or(this,t)}undef(t){return function(t,e){Dr(t.fillOpacity,e.fillOpacity)&&(t.fillOpacity=void 0),Dr(t.fill,e.fill,!0)&&(t.fill=void 0)}(this,t),function(t,e){Dr(t.strokeOpacity,e.strokeOpacity)&&(t.strokeOpacity=void 0),Dr(t.strokeLineWidth,e.strokeLineWidth)&&(t.strokeLineWidth=void 0),Dr(t.strokeLineCap,e.strokeLineCap)&&(t.strokeLineCap=void 0),Dr(t.strokeLineJoin,e.strokeLineJoin)&&(t.strokeLineJoin=void 0),Dr(t.strokeMiterLimit,e.strokeMiterLimit)&&(t.strokeMiterLimit=void 0),Dr(t.strokeDashOffset,e.strokeDashOffset)&&(t.strokeDashOffset=void 0),Dr(t.strokeDashArray,e.strokeDashArray,!0)&&(t.strokeDashArray=void 0),Dr(t.strokeBrush,e.strokeBrush,!0)&&(t.strokeBrush=void 0),Dr(t.paintOrder,e.paintOrder)&&(t.paintOrder=void 0)}(this,t),function(t,e){Dr(t.fontSize,e.fontSize)&&(t.fontSize=void 0),Dr(t.fontFeatures,e.fontFeatures)&&(t.fontFeatures=void 0),Dr(t.letterSpacing,e.letterSpacing)&&(t.letterSpacing=void 0),Dr(t.lineHeight,e.lineHeight)&&(t.lineHeight=void 0),Dr(t.baselineShift,e.baselineShift)&&(t.baselineShift=void 0),Dr(t.fontId,e.fontId)&&(t.fontId=void 0)}(this,t),this}isEmpty(){return this.sameStyle(Br)}static CreateDefault(){const t=new Ur;return t.fill=Hi.BLACK,t.fillOpacity=1,t.strokeOpacity=1,t.strokeBrush=Gi.INSTANCE,t.strokeLineWidth=0,t.strokeMiterLimit=4,t.strokeLineJoin=0,t.strokeLineCap=0,t.strokeDashOffset=0,t.strokeDashArray=[],t.paintOrder=0,t.fontId="ArialMT",t.fontSize=14,t.fontFeatures=0,t.letterSpacing=0,t.wordSpacing=0,t.lineHeight=1,t.baselineShift=0,t}}class $r{constructor(t,e,i){this.style=t,this.start=e,this.end=i}toJSON(){return[this.style,this.start,this.end]}clone(){return new $r(this.style.clone(),this.start,this.end)}}class Fr extends Wr{constructor(t,e,i,n){super(t,e,n),i||(i=[]),i.length||i.push(new $r(Ur.CreateDefault(),0,this.source.length)),this.blocks=i}dispose(){super.dispose(),this.blocks=null}clone(){const t=new Fr(this.source.clone(),this.style.clone(),this.blocks.map(Cr));return this.cloneProperties(t),t}toJSON(){const t=super.toJSON();return t.text=this.source.text,t.style=this.style,t.blocks=this.blocks,t}static fromJSON(t){return new Fr(t.text,t.style,t.blocks,t.matrix)}computeBlocks(){return this.blocks}_insertAt(t,e){return!!this.source.insertAt(t,e)&&(Tr(this.blocks,e,t.length),!0)}_removeRange(t,e){if(!this.source.removeRange(t,e))return!1;const i=this.blocks,n=this.source.length;return jr(i,t,e,n,!0)&&zr(i,n),!0}_setText(t){const e=t.length,i=this.source.length;this.source.text=t;const n=this.blocks;return 0===e?(n.length>1&&n.splice(1),n[0].start=n[0].end=0):e>i?Tr(n,i,e-i):e<i&&jr(n,e,i,i)&&zr(n,i),!0}addStyleToAll(t){return this.addStyle(t,0,this.source.length)}addStyle(t,e,i){i??=e,i<e&&([e,i]=[i,e]);const n=this.blocks,s=this.source.length;return e<=0&&i>=s?!!Lr(n,t)&&(zr(n,s),this.invalidate(),!0):!!Nr(n,t,e,i,!0)&&(zr(n,s),this.invalidate(),!0)}getTextStyleAtRange(t,e){return function(t,e,i){let n;n=e===i?e:Math.min(e,i)+1;for(const e of t)if(n>=e.start&&n<=e.end)return e;return t[t.length-1]}(this.blocks,t,e??t).style}}class Vr extends Wr{#Pt=null;#Dt=null;constructor(t,e,i,n){super(t,e,n),i?(this.block=i,this.#Et()):this.block=new $r(Ur.CreateDefault(),0,this.source.length)}get provider(){return this.#Dt}set provider(t){this.#Dt!==t&&(this.#Dt=t,this.#Pt=null)}get blocks(){return this.#Pt??=this.#Ot()}#Ot(){if(!this.#Dt||!this.#Dt.hasBlocks)return[this.block];const t=this.source,e=[this.block.clone()];for(const[i,n]of this.#Dt.getBlocks())Pr(e,n,i,t);return e}clone(){const t=new Vr(this.source.clone(),this.style.clone(),this.block.clone());return t.#Pt=this.#Pt,this.cloneProperties(t),t}toJSON(){const t=super.toJSON();return t.text=this.source.text,t.style=this.style,t.block=this.block,t}static fromJSON(t){return new Vr(t.text,t.style,t.block,t.matrix)}dispose(){super.dispose(),this.#Dt=null,this.#Pt=null,this.block=null}computeBlocks(){return this.blocks}_insertAt(t,e){return!!this.source.insertAt(t,e)&&(this.#Et(),!0)}_removeRange(t,e){return!!this.source.removeRange(t,e)&&(this.#Et(),!0)}_setText(t){return this.source.text=t,this.#Et(),!0}#Et(){this.block.start=0,this.block.end=this.source.length}invalidate(){this.#Pt=null,super.invalidate()}}class Gr{constructor(t=0,e=1,i=0){this.start=t,this.end=e,this.type=i}toJSON(){return[this.start,this.end,this.type]}get isEmpty(){return this.start===this.end}get length(){return this.end-this.start}set length(t){this.end=this.start+t}clone(){return new Gr(this.start,this.end,this.type)}resolveRange(t){switch(this.type){case 1:return t.getWordRange(this);case 2:return t.getLineRange(this)}return t.getCharRange(this)}}let Hr;Y(De,null,De.fromCode,"Color"),Y(Hi,null,Hi.fromColor,"SolidBrush"),Y(Gi,null,(function(){return Gi.INSTANCE}),"EmptyBrush"),J([Be,"Point"],[wi,"Rectangle"],[$i,"Matrix"],[Fi,"Size"],[ki,"ConvexQuad"],[Zs,"EllipseShape"],[Xs,"LineShape"],[fn,"PathNode"],[zs,"Path"],[Ys,"PolyShape"],[Js,"RectShape"],[Qs,"RectShapeRadius"],[qs,"RegularPolygonShape"],[Ks,"StarShape"],[Fr,"Paragraph"],[Vr,"DynamicParagraph"],[tr,"ParagraphStyle"],[Ur,"TextStyle"],[$r,"TextBlock"],[Gr,"RelativeTextRange"],[hn,"Pen"],[dn,"PenEffect"],[Oe,"Composition"],[class extends Vi{#Rt;#Wt;#Bt;#Ut;constructor(t,e=5,i=new $i,n=null){super(6),this.#Rt=t,this.#Bt=e,this.#Ut=i,this.#Wt=n}toJSON(){return[this.#Rt,this.#Bt,this.#Ut,this.#Wt]}get isVisible(){return!0}preparePaint(t){let e,i;switch(super.preparePaint(t),this.#Bt){case 3:e=Skia.SkTileMode.Repeat,i=Skia.SkTileMode.Decal;break;case 4:e=Skia.SkTileMode.Mirror,i=Skia.SkTileMode.Decal;break;case 1:e=Skia.SkTileMode.Decal,i=Skia.SkTileMode.Repeat;break;case 2:e=Skia.SkTileMode.Decal,i=Skia.SkTileMode.Mirror;break;case 5:e=Skia.SkTileMode.Repeat,i=Skia.SkTileMode.Repeat;break;case 6:e=Skia.SkTileMode.Mirror,i=Skia.SkTileMode.Mirror;break;default:e=Skia.SkTileMode.Decal,i=Skia.SkTileMode.Decal}return t.shader=this.#Rt.getPicture().makeShader(e,i,this.#Ut,this.#Wt),!0}equals(t){return!!super.equals(t)&&this.#Rt===t.#Rt}},"PatternBrush"],[Zi,"StopColorList"],[Yi,"WritableStopColorList"],[en,"GradientTransform"],[sn,"LinearGradientBrush"],[rn,"RadialGradientBrush"],[on,"TwoPointGradientBrush"],[an,"ConicalGradientBrush"]),q("ConicalGradientBrush",(function(t){return t[2]-=t[1],new an(...t)}),300,400,500,600),Q("DefaultPen",(function(t){if(!Array.isArray(t))return new hn;const[e=Hi.BLACK,i=1,n=0,s=0,r=4,o=[],a=0]=t,l=new hn;return l.brush=e,l.width=i,l.lineCap=n,l.lineJoin=s,l.miterLimit=r,l.dashes=o,l.offset=a,l}));class Zr{#I=null;constructor(t){t&&20===t.length||((t=new Float32Array(20))[0]=t[6]=t[12]=t[18]=1,this.#I=!0),this.value=t}reset(){const t=this.value;return t.fill(0),t[0]=t[6]=t[12]=t[18]=1,this.#I=!0,this}equals(t){const e=this.value.length;if(t.value.length!==e)return!1;for(let i=0;i<e;i++)if(this.value[i]!==t.value[i])return!1;return!0}clone(){const t=new Zr(this.value.slice());return t.#I=this.#I,t}get isIdentity(){if(null==this.#I){const t=this.value;return this.#I=1===t[0]&&1===t[6]&&1===t[12]&&1===t[18]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&0===t[5]&&0===t[7]&&0===t[8]&&0===t[9]&&0===t[10]&&0===t[11]&&0===t[13]&&0===t[14]&&0===t[15]&&0===t[16]&&0===t[17]&&0===t[19]}return this.#I}preMultiply(t){return this.isIdentity?Qr(t instanceof Zr?t.value:t,this.value):Yr(t instanceof Zr?t.value:t,this.value,this.value),this.#I=null,this}multiply(t){return this.isIdentity?Qr(t instanceof Zr?t.value:t,this.value):Yr(this.value,t instanceof Zr?t.value:t,this.value),this.#I=null,this}tint(t){return this.multiply([t.r/255,0,0,0,0,0,t.g/255,0,0,0,0,0,t.b/255,0,0,0,0,0,t.a,0])}brightness(t){return 1===t?this:this.multiply([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0])}luminanceToAlpha(){return this.multiply([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0])}grayscale(t){return 0===t?this:(t=1-t,this.multiply([.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,0,1,0]))}hueRotate(t){if(t%360==0)return this;t*=fe;const e=Math.cos(t),i=Math.sin(t);return this.multiply([.787*e+.213*(1-i),.715*(1-e-i),.072*(1-e)+.928*i,0,0,.213*(1-e)+.143*i,.715+.285*e+.14*i,.072*(1-e)-.283*i,0,0,.213*(1-e)-.787*i,.715*(1-e+i),.928*e+.072*(1+i),0,0,0,0,0,1,0])}contrast(t){if(1===t)return this;const e=(1-t)/2;return this.multiply([t,0,0,0,e,0,t,0,0,e,0,0,t,0,e,0,0,0,1,0])}saturate(t){return 1===t?this:this.multiply([.213+.787*t,.715-.715*t,.072-.072*t,0,0,.213-.213*t,.715+.285*t,.072-.072*t,0,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,0,1,0])}sepia(t){return 0===t?this:(t=1-t,this.multiply([.393+.607*t,.769-.769*t,.189-.189*t,0,0,.349-.349*t,.686+.314*t,.168-.168*t,0,0,.272-.272*t,.534-.534*t,.131+.869*t,0,0,0,0,0,1,0]))}invert(t){if(0===t)return this;const e=t;return t=-2*t+1,this.multiply([t,0,0,0,e,0,t,0,0,e,0,0,t,0,e,0,0,0,1,0])}blackAndWhite(){return this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0])}negative(){return this.multiply([-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,1,0,0,0,1,0])}bgr(){return this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0])}technicolor(){return this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0])}polaroid(){return this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0])}kodachrome(){return this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0])}browni(){return this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0])}vintage(){return this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0])}colorTone(t=.2,e=.15,i,n){const s=i.r/255,r=i.g/255,o=i.b/255,a=n.r/255,l=n.g/255,c=n.b/255;return this.multiply([.3,.59,.11,0,0,s,r,o,t,0,a,l,c,e,0,s-a,r-l,o-c,0,0])}duoTone(t,e){const i=t.r/255,n=t.g/255,s=t.b/255,r=e.r/255,o=e.g/255,a=e.b/255;return this.multiply([i-r,0,0,0,r,n-o,0,0,0,o,s-a,0,0,0,a,0,0,0,1,0])}night(t=.1){return this.multiply([2*-t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0])}predator(t){return this.multiply([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0,.8044459223747253*t,0,0,0,1,0])}threshold(t){const e=7.8693,i=15.5397,n=2.091;return t=-t,this.multiply([e,i,n,0,t,e,i,n,0,t,e,i,n,0,t,0,0,0,1,0])}lsd(){return this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0])}warm(){return this.multiply([1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0])}cool(){return this.multiply([.99,0,0,0,0,0,.93,0,0,0,0,0,1.08,0,0,0,0,0,1,0])}temperature(t){return this.multiply([1+t,0,0,0,0,0,1,0,0,0,0,0,1-t,0,0,0,0,0,1,0])}protanomaly(){return this.multiply([.817,.183,0,0,0,.333,.667,0,0,0,0,.125,.875,0,0,0,0,0,1,0])}deuteranomaly(){return this.multiply([.8,.2,0,0,0,.258,.742,0,0,0,0,.142,.858,0,0,0,0,0,1,0])}protanopia(){return this.multiply([.567,.433,0,0,0,.558,.442,0,0,0,0,.242,.758,0,0,0,0,0,1,0])}deuteranopia(){return this.multiply([.625,.375,0,0,0,.7,.3,0,0,0,0,.3,.7,0,0,0,0,0,1,0])}tritanopia(){return this.multiply([.95,.05,0,0,0,0,.433,.567,0,0,0,.475,.525,0,0,0,0,0,1,0])}achromatopsia(){return this.multiply([.299,.587,.114,0,0,.299,.587,.114,0,0,.299,.587,.114,0,0,0,0,0,1,0])}achromatomaly(){return this.multiply([.618,.32,.062,0,0,.163,.775,.062,0,0,.163,.32,.516,0,0,0,0,0,1,0])}}function Yr(t,e,i){t===i&&(t=t.slice()),e===i&&(e=e.slice());let n=0;for(let s=0;s<20;s+=5){for(let r=0;r<4;r++)i[n++]=t[s+0]*e[r+0]+t[s+1]*e[r+5]+t[s+2]*e[r+10]+t[s+3]*e[r+15];i[n++]=t[s+0]*e[4]+t[s+1]*e[9]+t[s+2]*e[14]+t[s+3]*e[19]+t[s+4]}}function Qr(t,e){for(let i=0;i<20;i++)e[i]=t[i]}const Jr={left:0,top:0,right:0,bottom:0};class qr{#$t=[];#Ft;#C;#Vt=null;#Gt;constructor(t,e=new $i,i=null){this.#Ft=t,this.#C=e,this.#Vt=new Skia.SkPaint,this.#Ft.setMatrix(e),this.#Gt=i}get canvas(){return this.#Ft}get paint(){return this.#Vt}get surface(){return this.#Gt}dispose(){this.#Ft=null,this.#Gt=null,this.#$t.splice(0),this.#C.toIdentity(),this.#Vt&&(this.#Vt.delete(),this.#Vt=null)}get matrix(){return this.#C}set matrix(t){this.#C=t,this.#Ft.setMatrix(t)}getLineScale(t=1){return t/this.matrix.lineScale}multiplyMatrix(t){t.isIdentity||(this.matrix=this.#C.multiply(t))}multiplyInverseMatrix(t){t.isIdentity||(this.matrix=this.#C.multiplyInverse(t))}translate(t,e){(t||e)&&(this.matrix=this.#C.translate(t,e))}scale(t,e){null==e&&(e=t),1===t&&1===e||(this.matrix=this.#C.scale(t,e))}rotate(t){t%360!=0&&(this.matrix=this.#C.rotate(t))}clipSize(t,e=Be.ZERO,i){Jr.left=e.x,Jr.top=e.y,Jr.right=e.x+t.width,Jr.bottom=e.y+t.height,this.#Ft.clipRect(Jr,i?Skia.SkClipOp.Difference:Skia.SkClipOp.Intersect,!0)}clipRect(t,e){this.#Ft.clipRect(t,e?Skia.SkClipOp.Difference:Skia.SkClipOp.Intersect,!0)}clipPath(t,e,i){t=Kr(t);let n=!1;!e||e.isIdentity||t.isEmpty||((t=t.copy()).transform(e),n=!0),this.#Ft.clipPath(t,i?Skia.SkClipOp.Difference:Skia.SkClipOp.Intersect,!0),n&&t.delete()}clear(t){this.#Ft.clear(t.code)}prepareFillColor(t){if(0===t.a)return!1;const e=this.#Vt;return e.style=Skia.SkPaintStyle.Fill,e.setColor(t),!0}drawBox(t,e){return t instanceof wi?this.drawRect(t,e):this.drawQuad(t,e)}drawQuad(t,e){if(!e.isVisible)return;const i=this.#Vt;if(e.preparePaint(i)){const e=t.points,n=this.#Ft;n.drawLine(e[0].x,e[0].y,e[1].x,e[1].y,i),n.drawLine(e[1].x,e[1].y,e[2].x,e[2].y,i),n.drawLine(e[2].x,e[2].y,e[3].x,e[3].y,i),n.drawLine(e[3].x,e[3].y,e[0].x,e[0].y,i)}i.reset()}drawRect(t,e){if(!e.isVisible)return;const i=this.#Vt;e.preparePaint(i)&&this.#Ft.drawRect(t.left,t.top,t.right,t.bottom,i),i.reset()}fillRect(t,e,i=0){this.prepareFillColor(e)&&(this.#Ft.drawRect(t.left-i,t.top-i,t.right+i,t.bottom+i,this.#Vt),this.#Vt.reset())}drawCircle(t,e,i){if(!i.isVisible)return;const n=this.#Vt;i.preparePaint(n)&&this.#Ft.drawCircle(t.x,t.y,e,n),n.reset()}drawEllipse(t,e,i,n){if(!n.isVisible)return;const s=this.#Vt;n.preparePaint(s)&&this.#Ft.drawEllipse(t.x,t.y,e,i,s),s.reset()}drawText(t,e,i,n=Be.ZERO){if(!e.isVisible)return;const s=this.#Vt;e.preparePaint(s)&&("string"==typeof t?this.#Ft.drawText(t,s,i,Skia.SkTextEncoding.UTF8,n.x,n.y):this.#Ft.drawGlyphs(t,s,i,!0,n.x,n.y)),s.reset()}drawLine(t,e,i){if(!i.isVisible)return;const n=this.#Vt;i.preparePaint(n)&&this.#Ft.drawLine(t,e,n),n.reset()}drawPolyLine(t,e){if(!e.isVisible||0===t.length)return;const i=this.#Vt;e.preparePaint(i)&&this.#Ft.drawPoints(Skia.SkCanvasPointMode.Polygon,t,i),i.reset()}drawArc(t,e,i,n,s){if(!s.isVisible||e===i)return;const r=this.#Vt;s.preparePaint(r)&&this.#Ft.drawArc(t,e,i,n,r),r.reset()}drawImage(t,e=0,i=0,n){if(!n)return void this.#Ft.drawImage(t,e,i);if(!n.isVisible)return;const s=this.#Vt;n.preparePaint(s)?this.#Ft.drawImage(t,e,i,s):this.#Ft.drawImage(t,e,i),s.reset()}drawPicture(t,e,i,n){if(!e){if(n){const e=this.#Vt;e.imageFilter=n,this.#Ft.drawPicture(t,e,i),e.reset()}else this.#Ft.drawPicture(t,null,i);return}if(!e.isVisible)return;const s=this.#Vt;e.preparePaint(s)?(n&&(s.imageFilter=n),this.#Ft.drawPicture(t,s,i),s.reset()):n?(s.imageFilter=n,this.#Ft.drawPicture(t,s,i),s.reset()):this.#Ft.drawPicture(t,null,i)}drawPictureBlend(t,e,i){const n=this.#Vt;n.blendMode=e,i&&(n.colorFilter=i),this.#Ft.drawPicture(t,n),n.reset()}drawColor(t){this.#Ft.drawColor(t)}getWireframePaint(t){const e=this.#Vt;if(e.isAntiAlias=!0,e.setColor(0,0,0),t)e.style=Skia.SkPaintStyle.Fill;else{e.style=Skia.SkPaintStyle.Stroke;const t=this.matrix.lineScale;e.strokeWidth=t>1?1/this.matrix.lineScale:1}return e}drawWireframePath(t,e){this.#Ft.drawPath(Kr(t),this.getWireframePaint(e))}drawWireframeRect(t,e){const i=this.getWireframePaint();this.#Ft.drawRect(t.left,t.top,t.right,t.bottom,i),e&&(this.#Ft.drawLine(t.left,t.top,t.right,t.bottom,i),this.#Ft.drawLine(t.right,t.top,t.left,t.bottom,i))}drawPath(t,e){if(!t||t.isEmpty||!e.isVisible)return;const i=this.#Vt;e.preparePaint(i)&&this.#Ft.drawPath(Kr(t),i),i.reset()}drawPathDirect(t,e){const i=this.#Vt;e.preparePaint(i)&&this.#Ft.drawPath(t,i),i.reset()}fillPath(t,e){!t.isEmpty&&this.prepareFillColor(e)&&(this.#Ft.drawPath(Kr(t),this.#Vt),this.#Vt.reset())}drawPathTransformed(t,e,i){if(!t||t.isEmpty||!i.isVisible)return;const n=this.#Vt;i.preparePaint(n)&&(t=Kr(t),!e||e.isIdentity?this.#Ft.drawPath(t,n):((t=t.copy()).transform(e),this.#Ft.drawPath(t,n),t.delete())),n.reset()}flush(){this.#Gt?.flush()}restore(){0!==this.#$t.length&&(this.#Ft.restore(),this.#C=this.#$t.pop())}save(){this.#Ft.save(),this.#$t.push(this.#C.clone())}saveLayer(t,e){const i=this.#Vt;t.preparePaint(i),e&&(i.imageFilter=e),this.#Ft.saveLayer(i),this.#$t.push(this.#C.clone()),i.reset()}saveFilter(t){const e=this.#Vt;e.imageFilter=t,this.#Ft.saveLayer(e),this.#$t.push(this.#C.clone()),e.reset()}}function Kr(t){return t instanceof zs?t.path:t}const Xr=new class{#Vt=null;#Ht=0;get isVisible(){return this.#Ht>0&&this.#Vt?.isVisible}apply(t,e){return e>=1?t:(this.#Vt=t,this.#Ht=e,this)}preparePaint(t){return this.#Vt.preparePaint(t)?(t.addAlpha(this.#Ht),this.#Ht=0,this.#Vt=null,!0):(this.#Ht=0,this.#Vt=null,!1)}};function to(t,e,i){let n=e.x,s=e.y,r=i.x-n,o=i.y-s;if(r||o){const e=((t.x-n)*r+(t.y-s)*o)/(r*r+o*o);e>1?(n=i.x,s=i.y):e>0&&(n+=r*e,s+=o*e)}return r=t.x-n,o=t.y-s,r*r+o*o}function*eo(t,e){let i,n=t[0];yield n;for(let o=1,a=t.length;o<a;o++)i=t[o],r=n,((s=i).x-r.x)**2+(s.y-r.y)**2>e&&(yield i,n=i);var s,r;i&&n!==i&&(yield i)}function*io(t,e,i,n){let s,r=n;for(let n=e+1;n<i;n++){const o=to(t[n],t[e],t[i]);o>r&&(s=n,r=o)}r<=n||(s-e>1&&(yield*io(t,e,s,n)),yield t[s],i-s>1&&(yield*io(t,s,i,n)))}function*no(t,e){const i=t.length-1;yield t[0],yield*io(t,0,i,e),yield t[i]}function so(t,e,i=.5){return t+i*(e-t)}function ro(t,e,i=.5){return Math.max(0,t+i*(e-t))}function oo(t,e,i=.5){return n(so(t,e,i),0,1)}function ao(t,e,i=.5){return i<.5?t:e}function lo(t,e,i=.5){return new Be(so(t.x,e.x,i),so(t.y,e.y,i))}function co(t,e,i=.5){return n(Math.round(t+i*(e-t)),0,255)}const uo={0:{0:()=>Gi.INSTANCE,1:(t,e,i)=>e.withColor(De.transparent.interpolate(e.color,i)),2:po,3:po,4:po,5:po},1:{0:(t,e,i)=>t.withColor(t.color.interpolate(De.transparent,i)),1:function(t,e,i){return t.withColor(t.color.interpolate(e.color,i))},2:go,3:go,4:go,5:go},2:{0:mo,1:yo,2:function(t,e,i){return new sn(lo(t.start,e.start,i),lo(t.end,e.end,i),fo(t.stopColors,e.stopColors,i),ao(t.spread,e.spread,i),bo(t.transform,e.transform,i))},3:vo,4:vo,5:vo},3:{0:mo,1:yo,2:vo,3:function(t,e,i){return new rn(lo(t.center,e.center,i),ro(t.radius,e.radius,i),fo(t.stopColors,e.stopColors,i),ao(t.spread,e.spread,i),bo(t.transform,e.transform,i))},4:vo,5:vo},4:{0:mo,1:yo,2:vo,3:vo,4:function(t,e,i){return new on(lo(t.start,e.start,i),ro(t.startRadius,e.startRadius,i),lo(t.end,e.end,i),ro(t.endRadius,e.endRadius,i),fo(t.stopColors,e.stopColors,i),ao(t.spread,e.spread,i),bo(t.transform,e.transform,i))},5:vo},5:{0:mo,1:yo,2:vo,3:vo,4:vo,5:function(t,e,i){return new an(lo(t.center,e.center,i),so(t.startAngle,e.startAngle,i),ro(t.arcLength,e.arcLength,i),fo(t.stopColors,e.stopColors,i),ao(t.spread,e.spread,i),bo(t.transform,e.transform,i))}}};function ho(t,e,i){return new Zi(e.list.map((e=>({offset:e.offset,color:t.interpolate(e.color,i)}))))}function fo(t,e,i){return new Zi(function(t,e,i){const n=e.length-t.length;n>0?(t=t.slice(),Zi.expandStopColorArray(t,e,n)):n<0&&(e=e.slice(),Zi.expandStopColorArray(e,t,-n));const s=[],r=t.length;for(let n=0;n<r;n++)s.push({offset:oo(t[n].offset,e[n].offset,i),color:t[n].color.interpolate(e[n].color,i)});return s}(t.list,e.list,i))}function po(t,e,i){return e.withStopColorList(ho(De.transparent,e.stopColors,i))}function go(t,e,i){return e.withStopColorList(ho(t.color,e.stopColors,i))}function mo(t,e,i){return t.withStopColorList(ho(De.transparent,t.stopColors,1-i))}function yo(t,e,i){return t.withStopColorList(ho(e.color,t.stopColors,1-i))}function vo(t,e,i){return(i<.5?t:e).withStopColorListAndTransform(fo(t.stopColors,e.stopColors,i),bo(t.transform,e.transform,i))}function bo(t,e,i){return t?e?new en(so(t.scale,e.scale,i),so(t.rotate,e.rotate,i)):new en(so(t.scale,1,i),so(t.rotate,0,i)):e?new en(so(1,e.scale,i),so(0,e.rotate,i)):null}function xo(t,e,i=.5){if(0===i||t.equals(e))return t;if(1===i)return e;const n=lo(t.point,e.point,i),s=t.handleIn&&e.handleIn?lo(t.handleIn,e.handleIn,i):null,r=t.handleOut&&e.handleOut?lo(t.handleOut,e.handleOut,i):null;return i<.5?new fn(n,t.type,t.joint,s??t.handleIn,r??t.handleOut):new fn(n,e.type,e.joint,s??e.handleIn,r??e.handleOut)}function wo(){return{left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY}}function Mo(t,e){e.x<t.left&&(t.left=e.x),e.x>t.right&&(t.right=e.x),e.y<t.top&&(t.top=e.y),e.y>t.bottom&&(t.bottom=e.y)}function So(t,e=[]){return Number.isFinite(t.left)?[new Be(t.left,t.top),new Be(t.right,t.top),new Be(t.right,t.bottom),new Be(t.left,t.bottom)]:e}const ko=new Map;function _o(t,e){if(ko.has(t))for(const i of ko.get(t))i(e)}function Io(t,e){ko.has(t)||ko.set(t,new Set),ko.get(t).add(e)}function Co(t,e){ko.get(t)?.delete(e)}const Lo=new Map;function No(t,e){if(!Lo.has(t))return void Lo.set(t,[e]);const i=Lo.get(t);i.includes(e)||i.push(e)}function jo(t){if(!Lo.has(t))return[];const e=Lo.get(t).sort(To);return Lo.delete(t),e}function To(t,e){return(t.priority??0)-(e.priority??0)}const zo=Symbol(),Ao=Symbol(),Po=Symbol();let Do,Eo,Oo;function Ro(t){No(zo,t)}function Wo(t){return t.clone()}function Bo(t){t.dispose()}function Uo(t){t.copy??=Wo,t.delete??=Bo,No(Ao,t)}function $o(t){No(Po,t)}function Fo(t){for(const e of Do){const i=t[e.id];i&&e.dispose?.(i),delete t[e.id]}}function Vo(t){for(const e of Eo)e.init&&t.set(e.id,e.init(t.get(e.id)));return t}function Go(t){const e=new Map,i=[];for(let n=0,s=Eo.length;n<s;n++){const s=Eo[n],r=t.get(s.id);if(r){if(s.deps?.length)for(const t of s.deps)i.push(e.get(t));e.set(s.id,s.copy(r,...i)),i.splice(0)}}return e}function Ho(t){if(t?.size){for(const e of Eo){if(!t.has(e.id))continue;const i=t.get(e.id);if(i&&e.delete(i),t.delete(e.id),!t.size)return}t.clear()}}function Zo(t){const e=new Map;if(t)for(const i of Reflect.ownKeys(t))e.set(i,t[i]);return e}Io(Ot,(()=>{Do=jo(zo)??[],Eo=jo(Ao)??[],Oo=jo(Po)??[]}));let Yo=!1,Qo=null;const Jo=function(){let t=!0;const e=()=>{t=!0};return()=>{t&&(Yo=!0,Qo=Ko(),1)&&(t=!1,queueMicrotask(e))}}();function qo(){Qo?.clear(),Qo=null,Yo=!1}function Ko(){let t=null;for(const e of Oo){const i=e.get();null!=i&&(t??=new Map).set(e.id,i)}return t}function Xo(t){return{global:{},content:t||{}}}function ta(t){t&&(t.content&&(Ho(Zo(t.content)),delete t.content),t.global&&(Fo(t.global),delete t.global))}let ea,ia;class na{constructor(){this.manifest=null}async begin(t){this.manifest=t}async end(){this.manifest=null}async serializeData(t){return mt(tt(t))}async serializeRaw(t){return async function(t,e="deflate"){return ut(pt(t,e))}(t)}}class sa{constructor(){this.manifest=null,this.result=null}async begin(t,e){this.manifest=t,this.result=e}async end(){this.manifest=this.result=null}async deserializeData(t){return it(await yt(t),this.result,this.manifest.version)}async deserializeRaw(t){return async function(t,e="deflate"){return ut(gt(t,e))}(ht(t))}}function ra(t,e,i){return{marker:t,serialize:new class extends na{async*items(){const t=e();null!=t&&(yield this.serializeData(t))}},deserialize:new class extends sa{#Zt;async add(t){this.#Zt=await this.deserializeData(t)}async compute(t){const e=this.#Zt??t;return i?i(e,this.result):e}async end(){return this.#Zt=void 0,super.end()}}}}function oa(t,e,i){const n=new DataView(new ArrayBuffer(5));n.setUint8(0,e),n.setUint32(1,i.length),t.enqueue(n.buffer),t.enqueue(i)}async function aa(t){let e;e=t instanceof ReadableStream?new DataView((await ut(t)).buffer):t instanceof Uint8Array?new DataView(t.buffer):new DataView(t);const i=e.getUint32(0);if(1702377317!==i&&1698134117!==i)throw new Error("Unknown file type");let n,s,r=4;function o(t){if(r>=e.byteLength)return null;const i=e.getUint8(r);if(r++,239===i)return null;if(null!=t&&i!==t)return null;const n=e.getUint32(r);r+=4;const s=new DataView(e.buffer,r,n);return r+=n,{marker:i,data:s}}if(n=o(1),!n)throw new Error("Invalid file type");try{s=JSON.parse(await yt(n.data))}catch(t){throw new Error("Invalid manifest")}if(s.version>Z)throw new Error("Project is created using a newer format. Check for updates then retry.");if(s.version<400)throw new Error("Unsupported legacy project");const a=Xo(),l=new Map;for(const t of[Do,Eo])for(const e of t){const t=e.serialization;t&&(l.set(t.marker,t.deserialize),await t.deserialize.begin(s,a))}for(;n=o();)l.has(n.marker)&&await l.get(n.marker).add(n.data);for(const[t,e]of[[Do,a.global],[Eo,a.content]])for(const i of t){const t=i.serialization;t&&(e[i.id]=await t.deserialize.compute(e[i.id]),await t.deserialize.end())}return a}let la=0;const ca=[];function ua(t,e){qo(),ba(0),la=0,function(){for(const t of Eo)t.update(null)}(),ia&&(Fo(ia),ia=null),ia=t.global||{},ca.push([null,Vo(Zo(t.content)),null,null,e]),ya(0)}let ha=100;function da(){return la>0}function fa(){return la<ca.length-1}function pa(){return ca[la]?.[4]}function ga(){ba(la+1);const t=ca[la],e=t[0];t[0]=null,ha===ca.length&&(va(ca.shift()),la--);const i=Ko();t[2]=function(t){const e=Qo;return Qo=null,Yo?(Yo=!1,e??t):null}(t[3])??(i?new Map(i):null),ca.push([e,Go(e),null,i,!1]),la++,_o(Ut)}function ma(t,e){return function(t,e,i){if(!t)return!1;const n=Eo.find((t=>t.id===e));if(!n)return!1;const s=t.get(n.id);return s!==i&&(t.set(n.id,i),n.update(i),s&&n.delete(s),!0)}(ca[la]?.[0],t,e)}function ya(t){qo();const e=ca[la];e[0]??=Go(e[1]),_o(Wt,t),function(t){for(const e of Eo)e.update(t.get(e.id))}(e[0]),function(t){if(t?.size)for(const e of Oo)e.set(t.get(e.id));else for(const t of Oo)t.set(null)}(e[2===t?3:2]),_o(Bt,t)}function va(t){Ho(t[0]),Ho(t[1]),t[2]?.clear(),t[3]?.clear(),t.splice(0)}function ba(t){if(!(t>=ca.length))for(const e of ca.splice(t))va(e)}const xa=new Set;let wa=0,Ma=!1;function Sa(){if(xa.size){const t=[...xa];xa.clear();for(const e of t)_o(e)}Ma&&(Ma=!1,ga())}function ka(){Ma=!0}function _a(){return wa>0}function Ia(t){wa++,t&&Jo()}function Ca(t){t&&ka(),--wa||Sa()}let La=()=>!1;function Na(t){return Tt(t)?async function(...e){if(wa||La())return!1;Ia();try{return!!await t(...e)&&(ka(),!0)}finally{Ca()}}:function(...e){if(wa||La())return!1;Ia();try{return!!t(...e)&&(ka(),!0)}finally{Ca()}}}function ja(t){return function(){wa?xa.add(t):_o(t)}}const Ta="settings",za=new Map;function Aa(t,e){e??=ia;const i=e[Ta]??={};return i[t]??=za.has(t)?za.get(t)(i.settings):null}function Pa(t,e){za.set(t,e)}let Da;function Ea(t,e=!0){const i=Da.has(t.code)?Da.get(t.code):t.key;return e&&1===i.length?i.toUpperCase():i}Ro({id:Ta,serialization:ra(2,(()=>ia?.[Ta]))});const Oa="macOS"===navigator.userAgentData?.platform,Ra=new Map([[0,new Map]]),Wa=new Map([[0,new Set]]),Ba=new Set;let Ua=0;function $a(t){return!!Ra.has(t)&&(Ua=t,!0)}function Fa(t){Ba.add(t)}function Va(t){let e=0;return(Oa?t.metaKey:t.ctrlKey)&&(e|=1),t.shiftKey&&(e|=2),t.altKey&&(e|=4),e}function Ga(t,e,i){const n=Ra.get(i);return n&&n.has(e)?n.get(e).get(t):null}function Ha(t,e,i){if(Wa.has(i))for(const n of Wa.get(i))if(!n(t,e,i))return!1;return!0}function Za(t){let e=Ua;const i=Va(t);if(!Ha(t,i,e)||0!==e&&!Ha(t,i,0))return;if(Ba.size>0)for(const n of Ba)if(n(t,i,e))return void t.preventDefault();const n=Ea(t);let s=Ga(n,i,e);if(!s){if(0===e)return;if(e=0,s=Ga(n,i,e),!s)return}t.preventDefault(),s(t,i,e)}function Ya(t){if(!Ba.size)return;let e=Ua;const i=Va(t);if(Ha(t,i,e)&&(0===e||Ha(t,i,0)))for(const n of Ba)if(n(t,i,e))return}const Qa=new Set(["number","text","password","url","search"]);function Ja(t){return t instanceof HTMLInputElement?Qa.has(t.type):t.isContentEditable||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement}function qa(t){return Ja(t.target)||Ja(t.composedPath()[0])}const Ka=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","ScrollLock","Shift","Super","Symbol","SymbolLock","Enter","Tab"," ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Finish","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHanaku","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","Close","New","Open","Print","Save","SpellCheck","MailForward","MailReply","MailSend","Decimal","Key11","Key12","Multiply","Add","Clear","Divide","Subtract","Separator"]),Xa=/^(F|Soft)\d/,tl=/^(TV|Audio|Microphone|Media|Channel|Launch|Browser|Speech|AV|Color|Favorite|Guide|Navigate|Play)/,el=new Map([["ShiftLeft",2],["ShiftRight",2],["AltLeft",4],["AltRight",4]]);Oa?(el.set("MetaLeft",1),el.set("MetaRight",1)):(el.set("ControlLeft",1),el.set("ControlRight",1));let il=0,nl=!1,sl=!1,rl=!1;function ol(t){return il!==t&&(il=t,nl=!!(1&il),sl=!!(2&il),rl=!!(4&il),!0)}function al(t){return Ea(t,!0)}function ll(t){return 1===el.get(t.code)}function cl(t){return 4===el.get(t.code)}const ul=100,hl=1/ul,dl=new $i,fl={x:0,y:0};let pl,gl,ml,yl,vl=1,bl=1;function xl(){return dl.inversePoint(0,0)}function wl(){return dl.inversePoint(pl.width,pl.height)}function Ml(){return wi.fromPoints(dl.inversePoint(0,0),dl.inversePoint(pl.width,pl.height))}function Sl(){let t=0;return vl>=1?t=vl<5?100:vl>=5&&vl<10?50:vl>=10&&vl<25?20:10:vl<1&&(t=vl>=.5?200:vl>=.25?400:vl>=.125?800:vl>=.05?1600:vl>=.02?3200:6400),t}function kl(t){return Cl(t||pl.middle,1.25)}function _l(t){return Cl(t||pl.middle,.8)}function Il(t,e,i){if(!t?.isVisible)return!1;e??=pl,i??=20,i*=2;const s=Math.min((e.width-i)/t.width,(e.height-i)/t.height),r=(e.width/s-t.width)/2,o=(e.height/s-t.height)/2;return function(t,e,i){return i=n(i,hl,ul),(fl.x!==t||fl.y!==e||vl!==i)&&(fl.x=t,fl.y=e,vl=i,Al(),!0)}((r-t.x)*s,(o-t.y)*s,s)}function Cl(t,e){if((e=n(vl*e,hl,ul))===vl)return!1;const i=e/vl;return vl=e,fl.x=t.x+(fl.x-t.x)*i,fl.y=t.y+(fl.y-t.y)*i,Al(),!0}function Ll(t){return dl.transformInversePoint(t)}function Nl(t,e){return new Be(t-pl.x,e-pl.y)}function jl(t,e){return dl.inversePoint(t-pl.x,e-pl.y)}function Tl(t=1){return t/dl.lineScale}function zl(t,e,i,n,s,r){let o=1;s&&(o/=vl,r??=20,o*=Math.min((pl.width-r)/t.width,(pl.height-r)/t.height),(!Number.isFinite(o)||Number.isNaN(o)||o<=0)&&(o=1));const a=new $i;return e&&!e.isIdentity&&a.multiplyInverse(e),i??=Ml().middle,a.translate(i.x,i.y),1!==o&&a.scale(o,o),a.translate(-(t.x+t.width*(n?.x??.5)),-(t.y+t.height*(n?.y??.5))),a}function Al(){dl.toIdentity().panZoom(fl,vl),gl()}class Pl{#Yt;#Qt;#Jt;#qt;constructor(t,e,i=32){this.#Jt=null,this.#qt=null,this.visible=!1;const n={alpha:!1,willReadFrequently:!0};this.horizontal=t,this.vertical=e,this.#Yt=t.getContext("2d",n),this.#Qt=e.getContext("2d",n),this.size=i}dispose(){this.visible=!1,this.#Yt=this.#Qt=null,this.#Jt=this.#qt=null,this.vertical=this.horizontal=this.theme=null}updateSize(t,e,i){St(this.#Yt.canvas,t,this.size*i,i),St(this.#Qt.canvas,this.size*i,e,i),this.#Yt.scale(i,i),this.#Qt.scale(i,i)}getStep(t){let e=0;return t>=1?e=t<5?100:t>=5&&t<10?50:t>=10&&t<25?20:10:t<1&&(e=t>=.5?200:t>=.25?400:t>=.125?800:t>=.05?1600:t>=.02?3200:6400),e}draw(t,e=!1){if(!this.visible)return;const i=this.#Yt,n=this.#Qt;e&&(this.#Jt=this.#qt=null),this.#Jt&&(i.putImageData(this.#Jt,0,0),n.putImageData(this.#qt,0,0));const s=i.canvas.width;this.#Kt(i,s,!1,1),this.#Kt(n,s,!0,1),e||this.#Jt||(this.#Jt=i.getImageData(0,0,i.canvas.width,i.canvas.height),this.#qt=n.getImageData(0,0,n.canvas.width,n.canvas.height)),t&&(this.#Xt(i,t.x,!1),this.#Xt(n,t.y,!0))}#Kt(t,e,i,n=1){const s=this.theme;t.save(),t.fillStyle=s.getColor("rulerBackground").rgba,i?t.fillRect(0,0,this.size,t.canvas.height):t.fillRect(0,0,t.canvas.width,this.size),t.fillStyle=t.strokeStyle=s.getColor("rulerText").rgba,t.lineWidth=1,t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",t.font="10px -expressive-sans, sans-serif",t.textAlign="left",t.textBaseline="ideographic";const r=Sl(),o=i?fl.y:fl.x,a=r*vl,l=a/10,c=Math.floor(o%a),u=new Path2D;let h;h=o>0?(Math.ceil(-o/a)-1)*r:(Math.floor(-o/a)-1)*r;const d=.5*bl;i?(t.translate(0,0),t.rotate(90*fe),t.translate(c+d,-this.size+d)):t.translate(c+d,d);const f=Math.ceil(e/a)+2;for(let e=-1,s=0;e<f;e++,s++){const o=e*a;for(let e=0;e<10;e++){const a=Math.floor(o+e*l);if(u.moveTo(a,i?0:this.size),0===e){u.lineTo(a,i?24:8);let e=h+s*r;1!==n&&(e=Math.round(e*n*1e3)/1e3),t.fillText(e.toString(),a+4,i?20:16)}else 5===e?u.lineTo(a,i?12:20):u.lineTo(a,i?8:24)}}t.stroke(u),t.restore()}#Xt(t,e,i){const n=new Path2D;t.save(),t.lineWidth=1,t.strokeStyle=this.theme.getColor("rulerIndicator").rgba,i?(n.moveTo(.5,e),n.lineTo(this.size,e)):(n.moveTo(e,0),n.lineTo(e,this.size)),t.stroke(n),t.restore()}}class Dl extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n<style>\n    :host {\n        display: block;\n        margin: 0;\n        padding: 0;\n        border: none;\n        min-width: 300px;\n        min-height: 300px;\n        height: 100%;\n        width: 100%;\n        outline: none;\n        box-sizing: border-box;\n    }\n\n    :host {\n        --render-engine-background-color: #252525;\n        --render-engine-board-color: #fff;\n        --render-engine-overlay-color: #fff8;\n        --render-engine-contour-color: #1473e6;\n        --render-engine-rulerBackground-color: #2f2f2f;\n        --render-engine-rulerText-color: #e3e3e3;\n        --render-engine-rulerIndicator-color: #378ef0;\n        --render-engine-snap-color: #c038cc;\n        --render-engine-grid-color: #808080;\n\n        /* guides */\n        --render-engine-guide-color: #d83790;\n        --render-engine-guide-hover-color: var(--render-engine-rulerIndicator-color);\n        --render-engine-guide-hover-size: 1;\n\n        /* element */\n        --render-engine-element-outline-color: #c9252d;\n        --render-engine-element-outline-size: 1;\n\n        /* selection */\n        --render-engine-selection-wrapper-color: #747474;\n        --render-engine-selection-wrapper-size: 1;\n\n        --render-engine-selection-area-color: #0084ff40;\n\n        /* tool */\n        --render-engine-tool-color: #378ef0;\n        --render-engine-tool-size: 1;\n\n        --render-engine-tool-handle-color: white;\n        --render-engine-tool-handle-filled-color: #378ef0;\n        --render-engine-tool-handle-radius-size: 4;\n\n        /* text */\n        --render-engine-text-baseline-color: #c038cc;\n        --render-engine-text-baseline-size: 1;\n\n        /* path */\n        --render-engine-path-line-color: #378ef0;\n        --render-engine-path-line-size: 2;\n\n        --render-engine-path-handle-color: var(--render-engine-path-line-color);\n        --render-engine-path-handle-size: 1;\n        --render-engine-path-handle-radius-size: 3;\n\n        --render-engine-path-node-selected-color: var(--render-engine-path-line-color);\n        --render-engine-path-node-unselected-color: white;\n        --render-engine-path-node-radius-size: 4;\n    }\n\n:host([cursor="artboard"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMS41MDM5LDYuNjY4OWMtLjQ4NDQsMC0uODc4OS0uMzkzMS0uODc4OS0uODc2VjEuNWMwLS40ODI0LjM5MjYtLjg3NS44NzUtLjg3NWg0LjI5M2MuMzU1NSwwLC42NzI5LjIxMjQuODA4Ni41NDA1cy4wNjE1LjcwMjYtLjE5MDQuOTUzMUwyLjExOTEsNi40MTE2Yy0uMTY3LjE2Ni0uMzg0OC4yNTczLS42MTUyLjI1NzNaIi8+PHBhdGggZD0ibTUuNzkyOCwxYy40NDU2LDAsLjY2ODYuNTM4Ni4zNTM2Ljg1MzVMMS44NTM1LDYuMTQ2NGMtLjEwMTguMTAxOS0uMjI3MS4xNDc0LS4zNS4xNDc0LS4yNTcsMC0uNTAzNS0uMTk5Ni0uNTAzNS0uNTAxVjEuNWMwLS4yNzYyLjIyMzktLjUuNS0uNWg0LjI5MjhtMC0uNzVIMS41Qy44MTA4LjI1LjI1LjgxMDguMjUsMS41djQuMjkyOWMwLC42ODk4LjU2MjQsMS4yNTEsMS4yNTM1LDEuMjUxLjMzMDksMCwuNjQzNi0uMTMwNC44ODA0LS4zNjcyTDYuNjc2OCwyLjM4MzljLjM1ODgtLjM1ODguNDY1Mi0uODkzNS4yNzEtMS4zNjIzLS4xOTQyLS40Njg3LS42NDc1LS43NzE2LTEuMTU0OS0uNzcxNmgwWiIgZmlsbD0iI2ZmZiIvPjxyZWN0IHg9IjguNjI1IiB5PSI0LjYyNSIgd2lkdGg9IjEuNzUiIGhlaWdodD0iMy43NSIvPjxwYXRoIGQ9Im0xMCw1djNoLTF2LTNoMW0uNzUtLjc1aC0yLjV2NC41aDIuNXYtNC41aDBaIiBmaWxsPSIjZmZmIi8+PHJlY3QgeD0iNC42MjUiIHk9IjguNjI1IiB3aWR0aD0iMy43NSIgaGVpZ2h0PSIxLjc1Ii8+PHBhdGggZD0ibTgsOXYxaC0zdi0xaDNtLjc1LS43NWgtNC41djIuNWg0LjV2LTIuNWgwWiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im04LjYyNSwyMi4zNzV2LTEzLjc1aDguODc1Yy4xMzk2LDAsLjI3NDQuMDE3Ni40MDkyLjAzNjFsLjEzMzguMDE3MWMyLjI2NDYuMjgyNywzLjk5NzEsMi4wMTUxLDQuMjcyNSw0LjIxOTJsLjAyNDQuMjAwMmMuMDE4Ni4xMzIzLjAzNTIuMjY0Ni4wMzUyLjQwMjN2OC44NzVoLTEzLjc1Wm0xMi0xLjc1di03LjEyNWMwLS4wNDItLjAwMi0uMDg0LS4wMDQ5LS4xMjVoLTIuOTk1MXYtMi45OTQ2Yy0uMDQyLS4wMDM0LS4wODMtLjAwNTQtLjEyNS0uMDA1NGgtNy4xMjV2MTAuMjVoMTAuMjVaIi8+PHBhdGggZD0ibTE3LjUsOWMuMTcxMSwwLC4zMzM3LjAzMTkuNS4wNTA2bC4wNTYzLjAwNTdjMi4wMzE1LjI1NDgsMy42MzI3LDEuODU1OSwzLjg4NzUsMy44ODc1bC4wMDU3LjA1NjNjLjAxODcuMTY2My4wNTA1LjMyODguMDUwNS41djguNWgtMTN2LTEzaDguNW0tNy41LDEyaDExdi03LjVjMC0uMTcxMi0uMDI2Ni0uMzM1My0uMDUwNS0uNWgtMi45NDk1di0yLjk0OTVjLS4xNjQ4LS4wMjM5LS4zMjg5LS4wNTA1LS41LS4wNTA1aC03LjV2MTFtNy41LTEyLjc1aC05LjI1djE0LjVoMTQuNXYtOS4yNWMwLS4xNTU2LS4wMTgzLS4zMDU4LS4wMzg3LS40NTU4bC0uMDE2NS0uMTI3OS0uMDA1LS4wNDg1Yy0uMjk5Ny0yLjM5MTYtMi4xNjU5LTQuMjU3OC00LjU0MDItNC41NTU2bC0uMDc0NS0uMDA3Ny0uMTE4Ny0uMDE1NWMtLjE1MDQtLjAyMDUtLjMwMDgtLjAzODgtLjQ1NjUtLjAzODhoMFptLTYuNzUsMi41aDYuNXYzaDN2Ni41aC05LjV2LTkuNWgwWiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="caret"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTIuNjI1LDIwLjM3NXYtMWgtMi4yNXYxaC0xLjc1di0uMzc1YzAtMS4xODIxLjg2ODItMi4xNjUsMi0yLjM0NTJWNi4zNDUyYy0xLjEzMTgtLjE4MDItMi0xLjE2MzEtMi0yLjM0NTJ2LS4zNzVoMS43NXYxaDIuMjV2LTFoMS43NXYuMzc1YzAsMS4xODIxLS44NjgyLDIuMTY1LTIsMi4zNDUydjExLjMwOTZjMS4xMzE4LjE4MDIsMiwxLjE2MzEsMiwyLjM0NTJ2LjM3NWgtMS43NVoiLz48cGF0aCBkPSJtMTQsNGMwLDEuMTA0Ni0uODk1NCwyLTIsMnYxMmMxLjEwNDYsMCwyLC44OTU0LDIsMmgtMXYtMWgtM3YxaC0xYzAtMS4xMDQ2Ljg5NTQtMiwyLTJWNmMtMS4xMDQ2LDAtMi0uODk1NC0yLTJoMXYxaDN2LTFoMW0uNzUtLjc1aC0yLjV2MWgtMS41di0xaC0yLjV2Ljc1YzAsMS4yNTY1Ljg0NjksMi4zMTg4LDIsMi42NDYxdjEwLjcwNzljLTEuMTUzMS4zMjcyLTIsMS4zODk2LTIsMi42NDYxdi43NWgyLjV2LTFoMS41djFoMi41di0uNzVjMC0xLjI1NjUtLjg0NjktMi4zMTg4LTItMi42NDYxVjYuNjQ2MWMxLjE1MzEtLjMyNzIsMi0xLjM4OTYsMi0yLjY0NjF2LS43NWgwWiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 12 12, auto}\n:host([cursor="hand"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTEuNTAxMSwzLjY4NzJjLjc5OTcsMCwxLjQ2NjMuNjI1MywxLjUzNSwxLjQ0MTcuMTE5LDEuNDE0NS40MjU3LDQuNzI4MS41MDcyLDUuNzMwNS4wMDkyLjExMzQuMDk2NC4xNzIzLjE4MzUuMTcyMy4wNzk2LDAsLjE1OTEtLjA0OTIuMTc5LS4xNTExLjE1MzktLjc4ODQuMzQyOC0zLjc4MTcuNTgzNS01LjExODQuMTM4Mi0uNzY3NC43OTE0LTEuMjkzMywxLjUxNDgtMS4yOTMzLjEzNTgsMCwuMjc0LjAxODUuNDExOC4wNTc1Ljc3LjIxNzUsMS4yNTA4LDEsMS4xMDc5LDEuODA1Mi0uMjM2MSwxLjMzMDEtLjYzMzUsNC4zMDY0LS43NzE0LDUuMDMxNy0uMDIyMy4xMTc0LjA2ODMuMTk0NS4xNTkxLjE5NDUuMDU1OCwwLC4xMTE3LS4wMjkyLjE0MTItLjA5NjMuMTkwNi0uNDMyNC42NDE4LTIuNDY2MS45NTQ5LTMuMzQ2My4yMTctLjYwOTguNzc5OC0uOTk0NywxLjM4NTktLjk5NDcuMTMsMCwuMjYyMS4wMTc3LjM5My4wNTQ3LjgxNDkuMjMwMiwxLjI3NSwxLjExMzQsMS4wMDgyLDEuOTM1M2wtMy4yOTQxLDEwLjMzNjFjLS4yNTIzLjc0NjMtLjg5NTYsMS4yNDA3LTEuNjE0MiwxLjI0MDdoLTQuODY3NmMtLjY4OTcsMC0xLjI2MjQsMC0xLjkwMzUtLjUxNTctMS4yMzcyLS45OTUtMy40NDQzLTMuNTQ3OC00Ljg0NDMtNS4yMjEtLjY3NTUtLjgwNzMtLjQ3MTEtMi4wNDMzLjQyNDgtMi41Nzk5LjI2MjctLjE1NzMuNTUyLS4yMzMxLjgzODUtLjIzMzEuNDk5NSwwLC45OTAzLjIzMDMsMS4zMTU1LjY1OTcuMzI2Ny40MzEzLjgyNzcsMS4zNDU4Ljk0MzIsMS40OTU5LjA0NDUuMDU3OC4xMDMuMDgyNi4xNjAzLjA4MjYuMTI3OCwwLC4yNDk5LS4xMjM0LjE5OTMtLjI3OTItLjM0MDUtMS4wNDgzLTEuNDQ5LTQuMjc2NC0yLjA0OTctNi4wNDUxLS4yOTUzLS44Njk1LjE4ODctMS44MTMyLDEuMDU0OS0yLjA1NzkuMTM4LS4wMzkuMjc3MS0uMDU3Ny40MTQxLS4wNTc3LjYzNzYsMCwxLjIyOTguNDA0MywxLjQ1ODMsMS4wNDU2LjM5NTksMS4xMTEyLDEuMTYwNiwzLjUzMzYsMS40MDMyLDQuMjE3NC4wMTQ1LjA0MDguMDQ3Ni4wNTkxLjA4MDcuMDU5MS4wNDY2LDAsLjA5MzQtLjAzNjMuMDg4NC0uMDk3MS0uMDg4OS0xLjA5MzMtLjUwNzItNC4yMTcyLS42MzY2LTUuNzYtLjA3NzMtLjkyMi42MzIyLTEuNzEzNywxLjUzNTItMS43MTM3IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIuNzUiLz48L3N2Zz4=") 12 12, auto}\n:host([cursor="hand-grab"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTAuNzQxNSw0LjVjMS41MTE4LDAsMS44NDQ2Ljc2NTUsMi4yODYyLDEuNTQwMy4xMzI3LjIzMjkuMjcxMi4zMjEyLjQyMjMuMzIxMi40NzQ4LDAsMS4wNzMyLS44NzMyLDIuMDAyNy0uODczMS4yMDcsMCwuNDMwNS4wNDMzLjY3MjcuMTQ5Mi43ODUzLjM0MzUuNjk2MSwxLjE2NjksMS4xNjE2LDEuOTI1My4wMzU2LjA1OC4wNzc5LjA4MS4xMjk2LjA4MS4yMDE4LDAsLjU0NDctLjM1MjIsMS4xNzMtLjM1MjIuMjc5NSwwLC42MTU2LjA2OTcsMS4wMjA3LjI3MTIuNzc0NC4zODUxLjk0NiwxLjQxNjguNjYwNSwyLjMxMDRsLTMuMTA2NSw4LjI3NzhjLS4yNzAxLjgxMTQtLjk1ODgsMS4zNDg5LTEuNzI4MSwxLjM0ODloLTUuMjEwOWMtLjczODMsMC0xLjM1MTQsMC0yLjAzNzgtLjU2MDctMS4zMjQ0LTEuMDgxOC0yLjk1NDEtMy4wMTExLTQuNDUyOC00LjgzMDMtLjcyMzEtLjg3NzctLjE4NDctMy42NTIzLjc3NDQtNC4yMzU3LjE2MjMtLjA5ODcuMjg3NS0uMTQyMS4zODkyLS4xNDIuMzgxNiwwLC40MzEzLjYxMDMuODY0LDEuMTkwNC4wMzY0LjA0ODkuMDY3LjA3MTkuMDkxOS4wNzE5LjIxNDEsMCwuMDA1NC0xLjcwODEtLjU3MDctMy40MzA3LS4zMTYyLS45NDU0LjIzNDQtMi4wNDQ0LDEuMTYxNi0yLjMxMDQuMTMzOC0uMDM4NC4yNzY3LS4wNTY2LjQyMzYtLjA1NjYuNzcwMywwLDEuNjUwMS41MDAzLDEuODk5NywxLjIxMTguMDY4OC4xOTYyLjExNTMuMjc4NC4xNTMzLjI3ODQuMTk2LDAsLjE2NzItMi4xODYxLDEuODE5OC0yLjE4NjEiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9Ii43NSIvPjwvc3ZnPg==") 12 12, auto}\n:host([cursor="bucket"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMS41MDM5LDYuNjY4OWMtLjQ4NDQsMC0uODc4OS0uMzkzMS0uODc4OS0uODc2VjEuNWMwLS40ODI0LjM5MjYtLjg3NS44NzUtLjg3NWg0LjI5M2MuMzU1NSwwLC42NzI5LjIxMjQuODA4Ni41NDA1cy4wNjE1LjcwMjYtLjE5MDQuOTUzMUwyLjExOTEsNi40MTE2Yy0uMTY3LjE2Ni0uMzg0OC4yNTczLS42MTUyLjI1NzNaIi8+PHBhdGggZD0ibTUuNzkyOCwxYy40NDU2LDAsLjY2ODYuNTM4Ni4zNTM2Ljg1MzZMMS44NTM1LDYuMTQ2NGMtLjEwMTguMTAxOS0uMjI3MS4xNDc0LS4zNS4xNDc0LS4yNTcsMC0uNTAzNS0uMTk5Ni0uNTAzNS0uNTAxVjEuNWMwLS4yNzYxLjIyMzktLjUuNS0uNWg0LjI5MjhtMC0uNzVIMS41Qy44MTA4LjI1LjI1LjgxMDguMjUsMS41djQuMjkyOWMwLC42ODk4LjU2MjQsMS4yNTEsMS4yNTM1LDEuMjUxLjMzMDksMCwuNjQzNi0uMTMwNC44ODA0LS4zNjcyTDYuNjc2OCwyLjM4MzljLjM1ODgtLjM1ODguNDY1Mi0uODkzNS4yNzEtMS4zNjIzLS4xOTQyLS40Njg3LS42NDc1LS43NzE2LTEuMTU0OS0uNzcxNmgwWiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNC43MzE0LDIyLjkzNzVjLS41MTM3LDAtLjk3NzUtLjEwNjktMS4zNzg5LS4zMTc0bC0uMTg0Ni0uMTAyMS01LjU2NDUtNS40ODM5LTMuOTI3Ny0xLjkwMDQsNS4zNzctNS40OTIyYzEuNzA5LTEuNzA4NSwzLjY0NTUtMi43Njc2LDUuMDU3Ni0yLjc2NzYuODU3NCwwLDEuMzk2NS4zNTg0LDEuNjk3My42NTg3bC44NTI1Ljg2MjgsMS43ODEyLTEuNzgxN2MuMjU5OC0uMjU5OC42MDU1LS40MDI4Ljk3MjctLjQwMjhzLjcxMjkuMTQzMS45NzI3LjQwMjhjLjI1ODguMjU5My40MDIzLjYwNDUuNDAyMy45NzIyLDAsLjM2NzItLjE0MjYuNzEyNC0uNDAyMy45NzIybC0xLjc5NDksMS43OTM5LDMuMzYzMywzLjQwMjguMDkyOC4xODUxYy45OTAyLDEuODUwNi0uNDMxNiw0LjU0NzktMi4yODIyLDYuMzk2NS0xLjYwNDUsMS42MDQ1LTMuNTMzMiwyLjYwMTEtNS4wMzQyLDIuNjAxMVoiLz48cGF0aCBkPSJtMTkuNDE0Miw2LjU4NThjLjI1NiwwLC41MTE4LjA5NzYuNzA3Mi4yOTI5LjM5MDUuMzkwNS4zOTA1LDEuMDIzNywwLDEuNDE0MmwtMi4wNTc2LDIuMDU3NSwzLjQ4NTYsMy41Mjg4LjA5ODEuMDk4MS4wNjU0LjEzMDdjLjkwMjgsMS42ODctLjQ1OCw0LjIxMDktMi4yMTE1LDUuOTYzMy0xLjUzNzUsMS41MzY2LTMuMzYyOSwyLjQ5MTItNC43Njk3LDIuNDkxMi0uNDUxNCwwLS44NTcyLS4wOTE2LTEuMjAzOS0uMjc0NmwtLjEzMDktLjA3Mi0uMDk4MS0uMDk4MS01LjQ3NjQtNS4zOTQ0LTIuMjgzNC0xLjEwNS0xLjIzMDEtLjU5NS45NTUzLS45NzQzLDQuMDU2NS00LjE0NTVjMS42MzU3LTEuNjM0NywzLjQ3NDItMi42NTQ3LDQuNzg5NC0yLjY1NDcuNzMyOCwwLDEuMTg0Mi4zMDA4LDEuNDMyOS41NDkzbDEuMTE1MiwxLjEyOTIsMi4wNDg4LTIuMDQ4OGMuMTk1My0uMTk1My40NTEzLS4yOTI5LjcwNzItLjI5MjltMC0uNzVjLS40Njc0LDAtLjkwNjkuMTgyLTEuMjM3NC41MTI0bC0xLjUxNTMsMS41MTUzLS41ODUtLjU5MjNjLS4zNTQ0LS4zNTQyLS45Nzk5LS43NzIyLTEuOTY2NC0uNzcyMi0xLjUzLDAtMy41MTg3LDEuMDc0NS01LjMxOTYsMi44NzQybC00LjA2MjQsNC4xNTE1LS45NTQ4Ljk3MzgtLjczMTEuNzQ1Ni45NDAxLjQ1NDcsMS4yMzAxLjU5NSwyLjE3MTksMS4wNTExLDUuMzg4Miw1LjMwNzUuMDk0NC4wOTQyLjA3NTMuMDc1My4wOTM0LjA1MTQuMTMwOS4wNzJjLjQ2NTUuMjQ1OC45ODgzLjM2NzQsMS41NjUzLjM2NzQsMS42MjAyLDAsMy42MDE0LTEuMDEzMyw1LjI5OTgtMi43MTA3LDEuODA1NS0xLjgwNDMsMy41MDI0LTQuNjgwNCwyLjM0MjctNi44NDc2bC0uMDU2LS4xMTI1LS4wNTQ0LS4xMDg4LS4wODYxLS4wODYtLjA5ODEtLjA5ODEtMi45NTg0LTIuOTk1MSwxLjUzMDUtMS41MzA0Yy42ODI0LS42ODI0LjY4MjQtMS43OTI2LjAwMDEtMi40NzQ5LS4zMzA3LS4zMzA2LS43NzAxLS41MTI2LTEuMjM3NS0uNTEyNmgwWiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xOC40MzYzLDkuOTc3OWwtMS41MjIxLDEuNTIyMWMtLjM5MDUuMzkwNS0xLjAyMzcuMzkwNS0xLjQxNDIsMGgwYy0uMzkwNS0uMzkwNS0uMzkwNS0xLjAyMzcsMC0xLjQxNDJsMS41NjM3LTEuNTYzNywxLjM3MjUsMS40NTU5WiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="node"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="node-add"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjxwb2x5Z29uIHBvaW50cz0iMTguNjI1IDIzLjM3NSAxOC42MjUgMjAuMzc1IDE1LjYyNSAyMC4zNzUgMTUuNjI1IDE4LjYyNSAxOC42MjUgMTguNjI1IDE4LjYyNSAxNS42MjUgMjAuMzc1IDE1LjYyNSAyMC4zNzUgMTguNjI1IDIzLjM3NSAxOC42MjUgMjMuMzc1IDIwLjM3NSAyMC4zNzUgMjAuMzc1IDIwLjM3NSAyMy4zNzUgMTguNjI1IDIzLjM3NSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMCwxNnYzaDN2MWgtM3YzaC0xdi0zaC0zdi0xaDN2LTNoMW0uNzUtLjc1aC0yLjV2M2gtM3YyLjVoM3YzaDIuNXYtM2gzdi0yLjVoLTN2LTNoMFoiLz48L3N2Zz4=") 0 0, auto}\n:host([cursor="node-mold"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjxwYXRoIGQ9Im0xNS41LDIzLjVjLS41NTE4LDAtMS0uNDQ4Ny0xLTFzLjQ0ODItMSwxLTFjMy4zMDg2LDAsNi0yLjY5MTQsNi02LDAtLjU1MTMuNDQ4Mi0xLDEtMXMxLC40NDg3LDEsMWMwLDQuNDExMS0zLjU4ODksOC04LDhaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTIyLjUsMTQuODc1Yy4zNDQ3LDAsLjYyNS4yNzk4LjYyNS42MjUsMCw0LjIwNDYtMy40MjA5LDcuNjI1LTcuNjI1LDcuNjI1LS4zNDQ3LDAtLjYyNS0uMjc5OC0uNjI1LS42MjVzLjI4MDMtLjYyNS42MjUtLjYyNWMzLjUxNTYsMCw2LjM3NS0yLjg1OTksNi4zNzUtNi4zNzUsMC0uMzQ1Mi4yODAzLS42MjUuNjI1LS42MjVtMC0uNzVjLS43NTgyLDAtMS4zNzUuNjE2OC0xLjM3NSwxLjM3NSwwLDMuMTAxNi0yLjUyMzMsNS42MjUtNS42MjUsNS42MjUtLjc1ODIsMC0xLjM3NS42MTY4LTEuMzc1LDEuMzc1cy42MTY4LDEuMzc1LDEuMzc1LDEuMzc1YzQuNjE4LDAsOC4zNzUtMy43NTcsOC4zNzUtOC4zNzUsMC0uNzU4Mi0uNjE2OC0xLjM3NS0xLjM3NS0xLjM3NWgwWiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="node-move"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjxjaXJjbGUgY3g9IjIwLjUiIGN5PSIyMC41IiByPSIyLjg3NSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMC41LDE4YzEuMzgwNywwLDIuNSwxLjExOTMsMi41LDIuNXMtMS4xMTkzLDIuNS0yLjUsMi41LTIuNS0xLjExOTMtMi41LTIuNSwxLjExOTMtMi41LDIuNS0yLjVtMC0uNzVjLTEuNzkyMSwwLTMuMjUsMS40NTc5LTMuMjUsMy4yNXMxLjQ1NzksMy4yNSwzLjI1LDMuMjUsMy4yNS0xLjQ1NzksMy4yNS0zLjI1LTEuNDU3OS0zLjI1LTMuMjUtMy4yNWgwWiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="node-sub"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIvPjxyZWN0IHg9IjE1LjYyNSIgeT0iMTguNjI1IiB3aWR0aD0iNy43NSIgaGVpZ2h0PSIxLjc1IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTIzLDE5djFoLTd2LTFoN20uNzUtLjc1aC04LjV2Mi41aDguNXYtMi41aDBaIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="not-allowed"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTEuNSwyMC4zNzVjLTQuODkzNiwwLTguODc1LTMuOTgxNC04Ljg3NS04Ljg3NVM2LjYwNjQsMi42MjUsMTEuNSwyLjYyNXM4Ljg3NSwzLjk4MTQsOC44NzUsOC44NzUtMy45ODE0LDguODc1LTguODc1LDguODc1Wm0tMy4yNDIyLTMuNjg4NWMuOTc2Ni42MTUyLDIuMDg4OS45Mzg1LDMuMjQyMi45Mzg1LDMuMzc3LDAsNi4xMjUtMi43NDc2LDYuMTI1LTYuMTI1LDAtMS4xNTM4LS4zMjMyLTIuMjY2MS0uOTM3NS0zLjI0MjJsLTguNDI5Nyw4LjQyODdabTMuMjQyMi0xMS4zMTE1Yy0zLjM3NywwLTYuMTI1LDIuNzQ3Ni02LjEyNSw2LjEyNSwwLDEuMTUzOC4zMjMyLDIuMjY2MS45Mzc1LDMuMjQyMkwxNC43NDIyLDYuMzEzNWMtLjk3NjYtLjYxNTItMi4wODg5LS45Mzg1LTMuMjQyMi0uOTM4NVoiLz48cGF0aCBkPSJtMTEuNSwzYzQuNjg2NSwwLDguNSwzLjgxMyw4LjUsOC41cy0zLjgxMzUsOC41LTguNSw4LjVTMywxNi4xODcsMywxMS41LDYuODEzNSwzLDExLjUsM20tNS4yNDE3LDEyLjMyNzZMMTUuMzI3Niw2LjI1ODNjLTEuMDc1Mi0uNzg3NC0yLjM5Ni0xLjI1ODMtMy44Mjc2LTEuMjU4My0zLjU4NCwwLTYuNSwyLjkxNi02LjUsNi41LDAsMS40MzE3LjQ3MDksMi43NTI0LDEuMjU4MywzLjgyNzZtNS4yNDE3LDIuNjcyNGMzLjU4NCwwLDYuNS0yLjkxNiw2LjUtNi41LDAtMS40MzE3LS40NzA5LTIuNzUyNC0xLjI1ODMtMy44Mjc2bC05LjA2OTMsOS4wNjkzYzEuMDc1Mi43ODc0LDIuMzk2LDEuMjU4MywzLjgyNzYsMS4yNTgzbTAtMTUuNzVDNi4zOTk1LDIuMjUsMi4yNSw2LjM5OTUsMi4yNSwxMS41czQuMTQ5NSw5LjI1LDkuMjUsOS4yNSw5LjI1LTQuMTQ5NSw5LjI1LTkuMjVTMTYuNjAwNSwyLjI1LDExLjUsMi4yNWgwWm0tNS4xMDU3LDExLjg4MWMtLjQyMzUtLjgxMjItLjY0NDMtMS43MDc1LS42NDQzLTIuNjMxLDAtMy4xNzA2LDIuNTc5NS01Ljc1LDUuNzUtNS43NS45MjM1LDAsMS44MTg4LjIyMDgsMi42MzEuNjQ0M2wtNy43MzY3LDcuNzM2N2gwWm0yLjQ3NDcsMi40NzQ3bDcuNzM2Ny03LjczNjdjLjQyMzUuODEyMi42NDQzLDEuNzA3NS42NDQzLDIuNjMxLDAsMy4xNzA2LTIuNTc5NSw1Ljc1LTUuNzUsNS43NS0uOTIzNSwwLTEuODE4OC0uMjIwOC0yLjYzMS0uNjQ0M2gwWiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 12 12, auto}\n:host([cursor="pen"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjUuNzEzOSAxNi4yNjUxIC42MjUgMTMuMjEyNCAuNjI1IC44NjU3IDExLjM3NSA2Ljc3ODMgMTEuMzc1IDEyLjg4NjIgMTMuNTM5MSAxNi4xMzI4IDcuMzM4OSAxOS41MTUxIDUuNzEzOSAxNi4yNjUxIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMS41bDEwLDUuNXY2bDIsMy01LjUsMy0xLjUtMy01LTNWMS41TS4yNS4yMzE1djEzLjE5MzFsLjM2NDEuMjE4NSw0LjgxMjcsMi44ODc2LDEuNDAyMywyLjgwNDcuMzQ3NS42OTUyLjY4MjQtLjM3MjIsNS41LTMsLjcxOTYtLjM5MjUtLjQ1NDctLjY4Mi0xLjg3NC0yLjgxMTF2LTYuMjE2NGwtLjM4ODUtLjIxMzdMMS4zNjE1Ljg0MjguMjUuMjMxNUguMjVaIi8+PGxpbmUgeDE9IjEiIHkxPSIxLjUiIHgyPSI2IiB5Mj0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjc1Ii8+PHJlY3QgeD0iNSIgeT0iOSIgd2lkdGg9IjIiIGhlaWdodD0iMiIgcng9IjEiIHJ5PSIxIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="pen-add"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjE4LjYyNSAyMy4zNzUgMTguNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE1LjYyNSAxOC42MjUgMTguNjI1IDE4LjYyNSAxOC42MjUgMTUuNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE4LjYyNSAyMy4zNzUgMTguNjI1IDIzLjM3NSAyMC4zNzUgMjAuMzc1IDIwLjM3NSAyMC4zNzUgMjMuMzc1IDE4LjYyNSAyMy4zNzUiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtMjAsMTZ2M2gzdjFoLTN2M2gtMXYtM2gtM3YtMWgzdi0zaDFtLjc1LS43NWgtMi41djNoLTN2Mi41aDN2M2gyLjV2LTNoM3YtMi41aC0zdi0zaDBaIi8+PHBvbHlnb24gcG9pbnRzPSI1LjcxMzkgMTYuMjY1MSAuNjI1IDEzLjIxMjQgLjYyNSAuODY1NyAxMS4zNzUgNi43NzgzIDExLjM3NSAxMi44ODYyIDEzLjUzOTEgMTYuMTMyOCA3LjMzODkgMTkuNTE1MSA1LjcxMzkgMTYuMjY1MSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xLDEuNWwxMCw1LjV2NmwyLDMtNS41LDMtMS41LTMtNS0zVjEuNU0uMjUuMjMxNXYxMy4xOTMxbC4zNjQxLjIxODUsNC44MTI3LDIuODg3NiwxLjQwMjMsMi44MDQ3LjM0NzUuNjk1Mi42ODI0LS4zNzIyLDUuNS0zLC43MTk2LS4zOTI1LS40NTQ3LS42ODItMS44NzQtMi44MTExdi02LjIxNjRsLS4zODg1LS4yMTM3TDEuMzYxNS44NDI4LjI1LjIzMTVILjI1WiIvPjxsaW5lIHgxPSIxIiB5MT0iMS41IiB4Mj0iNiIgeTI9IjEwIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9Ii43NSIvPjxyZWN0IHg9IjUiIHk9IjkiIHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHJ4PSIxIiByeT0iMSIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="pencil"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWxpbmUgcG9pbnRzPSIxMy41IDcuNSAxNS41IDUuNSAxOC41IDguNSAxNi41IDEwLjUiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PHBhdGggZD0ibTUuMzc1LDIxLjVsMTEuMTI1LTExLTMtM0wyLjUsMTguNjI1bC0xLjkwMjYsNC42Mzc2Yy0uMDM2Mi4wODgxLjA1MTkuMTc2Mi4xNC4xNGw0LjYzNzYtMS45MDI2WiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48bGluZSB4MT0iMi41IiB5MT0iMTguNSIgeDI9IjUuNSIgeTI9IjIxLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PC9zdmc+") 0 24, auto}\n:host([cursor="pen-close"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSIyMC41IiBjeT0iMjAuNSIgcj0iMi44NzUiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtMjAuNSwxOGMxLjM4MDcsMCwyLjUsMS4xMTkzLDIuNSwyLjVzLTEuMTE5MywyLjUtMi41LDIuNS0yLjUtMS4xMTkzLTIuNS0yLjUsMS4xMTkzLTIuNSwyLjUtMi41bTAtLjc1Yy0xLjc5MjEsMC0zLjI1LDEuNDU3OS0zLjI1LDMuMjVzMS40NTc5LDMuMjUsMy4yNSwzLjI1LDMuMjUtMS40NTc5LDMuMjUtMy4yNS0xLjQ1NzktMy4yNS0zLjI1LTMuMjVoMFoiLz48cG9seWdvbiBwb2ludHM9IjUuNzEzOSAxNi4yNjUxIC42MjUgMTMuMjEyNCAuNjI1IC44NjU3IDExLjM3NSA2Ljc3ODMgMTEuMzc1IDEyLjg4NjIgMTMuNTM5MSAxNi4xMzI4IDcuMzM4OSAxOS41MTUxIDUuNzEzOSAxNi4yNjUxIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMS41bDEwLDUuNXY2bDIsMy01LjUsMy0xLjUtMy01LTNWMS41TS4yNS4yMzE2djEzLjE5MzFsLjM2NDEuMjE4NSw0LjgxMjcsMi44ODc2LDEuNDAyMywyLjgwNDcuMzQ3NS42OTUyLjY4MjQtLjM3MjIsNS41LTMsLjcxOTYtLjM5MjUtLjQ1NDctLjY4Mi0xLjg3NC0yLjgxMTF2LTYuMjE2NGwtLjM4ODUtLjIxMzdMMS4zNjE1Ljg0MjguMjUuMjMxNkguMjVaIi8+PGxpbmUgeDE9IjEiIHkxPSIxLjUiIHgyPSI2IiB5Mj0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjc1Ii8+PHJlY3QgeD0iNSIgeT0iOSIgd2lkdGg9IjIiIGhlaWdodD0iMiIgcng9IjEiIHJ5PSIxIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="pen-continue"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjUuNzEzOSAxNi4yNjUxIC42MjUgMTMuMjEyNCAuNjI1IC44NjU3IDExLjM3NSA2Ljc3ODMgMTEuMzc1IDEyLjg4NjIgMTMuNTM5MSAxNi4xMzI4IDcuMzM4OSAxOS41MTUxIDUuNzEzOSAxNi4yNjUxIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMS41bDEwLDUuNXY2bDIsMy01LjUsMy0xLjUtMy01LTNWMS41TS4yNS4yMzE2djEzLjE5MzFsLjM2NDEuMjE4NSw0LjgxMjcsMi44ODc2LDEuNDAyMywyLjgwNDcuMzQ3NS42OTUyLjY4MjQtLjM3MjIsNS41LTMsLjcxOTYtLjM5MjUtLjQ1NDctLjY4Mi0xLjg3NC0yLjgxMTF2LTYuMjE2NGwtLjM4ODUtLjIxMzdMMS4zNjE1Ljg0MjguMjUuMjMxNkguMjVaIi8+PGxpbmUgeDE9IjEiIHkxPSIxLjUiIHgyPSI2IiB5Mj0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjc1Ii8+PHJlY3QgeD0iNSIgeT0iOSIgd2lkdGg9IjIiIGhlaWdodD0iMiIgcng9IjEiIHJ5PSIxIi8+PHJlY3QgeD0iMTQuNDY0MyIgeT0iMTguNjI1IiB3aWR0aD0iOS4wNzE1IiBoZWlnaHQ9IjIuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03LjY2MjIgMTMuNDEwNCkgcm90YXRlKC0zMi43MzM3KSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMi4wOTQ3LDE2Ljg2OTFsLjgxMDUsMS4yNjE3LTcsNC41LS44MTA1LTEuMjYxNyw3LTQuNW0uMjI1NS0xLjAzNjZsLS42MzEuNDA1Ny03LDQuNS0uNjMwNy40MDU0LjQwNTMuNjMwOC44MTA1LDEuMjYxNy40MDU1LjYzMTIuNjMxLS40MDU3LDctNC41LjYzMDctLjQwNTQtLjQwNTMtLjYzMDgtLjgxMDUtMS4yNjE3LS40MDU1LS42MzEyaDBaIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="pen-start"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjUuNzEzOSAxNi4yNjUxIC42MjUgMTMuMjEyNCAuNjI1IC44NjU3IDExLjM3NSA2Ljc3ODMgMTEuMzc1IDEyLjg4NjIgMTMuNTM5MSAxNi4xMzI4IDcuMzM4OSAxOS41MTUxIDUuNzEzOSAxNi4yNjUxIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTEsMS41bDEwLDUuNXY2bDIsMy01LjUsMy0xLjUtMy01LTNWMS41TS4yNS4yMzE2djEzLjE5MzFsLjM2NDEuMjE4NSw0LjgxMjcsMi44ODc2LDEuNDAyMywyLjgwNDcuMzQ3NS42OTUyLjY4MjQtLjM3MjIsNS41LTMsLjcxOTYtLjM5MjUtLjQ1NDctLjY4Mi0xLjg3NC0yLjgxMTF2LTYuMjE2NGwtLjM4ODUtLjIxMzdMMS4zNjE1Ljg0MjguMjUuMjMxNkguMjVaIi8+PGxpbmUgeDE9IjEiIHkxPSIxLjUiIHgyPSI2IiB5Mj0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjc1Ii8+PHJlY3QgeD0iNSIgeT0iOSIgd2lkdGg9IjIiIGhlaWdodD0iMiIgcng9IjEiIHJ5PSIxIi8+PHBvbHlnb24gcG9pbnRzPSIxOC42MjUgMjMuMzc1IDE4LjYyNSAyMS43ODk2IDE3LjQ2NzggMjIuOTQ2OCAxNi4wNTI3IDIxLjUzMjcgMTcuMjEgMjAuMzc1IDE1LjYyNSAyMC4zNzUgMTUuNjI1IDE4LjYyNSAxNy4yMTA5IDE4LjYyNSAxNi4wNTI3IDE3LjQ2NjggMTcuNDY3OCAxNi4wNTI3IDE4LjYyNSAxNy4yMSAxOC42MjUgMTUuNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE3LjIxIDIxLjUzMjIgMTYuMDUyNyAyMi45NDczIDE3LjQ2NjggMjEuNzg5MSAxOC42MjUgMjMuMzc1IDE4LjYyNSAyMy4zNzUgMjAuMzc1IDIxLjc5IDIwLjM3NSAyMi45NDczIDIxLjUzMjcgMjEuNTMyMiAyMi45NDY4IDIwLjM3NSAyMS43ODk2IDIwLjM3NSAyMy4zNzUgMTguNjI1IDIzLjM3NSIvPjxwYXRoIGQ9Im0yMCwxNnYyLjExNTRsMS41MzIyLTEuNTMyMy44ODQ4Ljg4MzgtMS41MzMxLDEuNTMzMmgyLjExNjF2MWgtMi4xMTU2bDEuNTMyNiwxLjUzMjctLjg4NDguODgzOC0xLjUzMjItMS41MzIzdjIuMTE1OGgtMXYtMi4xMTU4bC0xLjUzMjIsMS41MzIzLS44ODQ4LS44ODM4LDEuNTMyNi0xLjUzMjdoLTIuMTE1NnYtMWgyLjExNjFsLTEuNTMzMS0xLjUzMzIuODg0OC0uODgzOCwxLjUzMjIsMS41MzIzdi0yLjExNTRoMW0uNzUtLjc1aC0yLjV2MS4wNTQ2bC0uMjUxOC0uMjUxOS0uNTMtLjUzMDEtLjUzMDQuNTI5OC0uODg0OC44ODM4LS41MzA5LjUzMDMuNTMwNS41MzA2LjI1MjkuMjUyOWgtMS4wNTU1djIuNWgxLjA1NTFsLS4yNTI0LjI1MjQtLjUzMDUuNTMwNi41MzA5LjUzMDMuODg0OC44ODM4LjUzMDQuNTI5OC41My0uNTMwMS4yNTE4LS4yNTE5djEuMDU1MWgyLjV2LTEuMDU1MWwuMjUxOC4yNTE5LjUzLjUzMDEuNTMwNC0uNTI5OC44ODQ4LS44ODM4LjUzMDktLjUzMDMtLjUzMDUtLjUzMDYtLjI1MjQtLjI1MjRoMS4wNTUxdi0yLjVoLTEuMDU1NWwuMjUyOS0uMjUyOS41MzA1LS41MzA2LS41MzA5LS41MzAzLS44ODQ4LS44ODM4LS41MzA0LS41Mjk4LS41My41MzAxLS4yNTE4LjI1MTl2LTEuMDU0NmgwWiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="pen-sub"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB4PSIxNS42MjUiIHk9IjE4LjYyNSIgd2lkdGg9IjcuNzUiIGhlaWdodD0iMS43NSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMywxOXYxaC03di0xaDdtLjc1LS43NWgtOC41djIuNWg4LjV2LTIuNWgwWiIvPjxwb2x5Z29uIHBvaW50cz0iNS43MTM5IDE2LjI2NTEgLjYyNSAxMy4yMTI0IC42MjUgLjg2NTcgMTEuMzc1IDYuNzc4MyAxMS4zNzUgMTIuODg2MiAxMy41MzkxIDE2LjEzMjggNy4zMzg5IDE5LjUxNTEgNS43MTM5IDE2LjI2NTEiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtMSwxLjVsMTAsNS41djZsMiwzLTUuNSwzLTEuNS0zLTUtM1YxLjVNLjI1LjIzMTZ2MTMuMTkzMWwuMzY0MS4yMTg1LDQuODEyNywyLjg4NzYsMS40MDIzLDIuODA0Ny4zNDc1LjY5NTIuNjgyNC0uMzcyMiw1LjUtMywuNzE5Ni0uMzkyNS0uNDU0Ny0uNjgyLTEuODc0LTIuODExMXYtNi4yMTY0bC0uMzg4NS0uMjEzN0wxLjM2MTUuODQyOC4yNS4yMzE2SC4yNVoiLz48bGluZSB4MT0iMSIgeTE9IjEuNSIgeDI9IjYiIHkyPSIxMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIuNzUiLz48cmVjdCB4PSI1IiB5PSI5IiB3aWR0aD0iMiIgaGVpZ2h0PSIyIiByeD0iMSIgcnk9IjEiLz48L3N2Zz4=") 0 0, auto}\n:host([cursor="picker"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtLjUzMzIsMjIuMDY0bC44MjYyLTEuNDYzOSwxLjU1ODYtMy40NTMxLDYuODE4NC02LjkzOTktLjYxMTMtLjU4MTUsMS4yMDYxLTEuMjY3Ni43NDUxLjcwNzUsNC45MTIxLTQuOTEyNmMuNDkzMi0uNDkzNywxLjE0OTQtLjc2NTEsMS44NDc3LS43NjUxLjY5NzMsMCwxLjM1MzUuMjcxNSwxLjg0NzcuNzY1MS40OTMyLjQ5MzIuNzY0NiwxLjE0OTQuNzY0NiwxLjg0NzJzLS4yNzE1LDEuMzU0LS43NjU2LDEuODQ3MmwtNC44MTc0LDQuODE3OSwxLjAwOTguOTU5NS0xLjIwNjEsMS4yNjgxLS43NzE1LS43MzM0LTcuMTU2Miw2Ljk5OS0zLjM3MywxLjQ5OS0xLjQzMTYuODA5MS0xLjQwMzMtMS40MDIzWiIvPjxwYXRoIGQ9Im0xNy44MzU4LDMuNzYyNmMuNTcyNiwwLDEuMTQ1My4yMTg0LDEuNTgyMi42NTUzaDBjLjg3MzguODczOC44NzM4LDIuMjkwNSwwLDMuMTY0M2wtNS4wODk4LDUuMDg5OCwxLjAxNjYuOTY1OC0uNjg5NS43MjQ2LS43NjItLjcyMzktNy4zNjYsNy4yMDQ0LTMuMzExNSwxLjQ3MTctMS4yMTU4LjY4NTYtMS0xLC42ODU1LTEuMjE1OCwxLjU0NjktMy40MjE5LDcuMDM5MS03LjE2NDUtLjYxNjItLjU4NTUuNjg5NS0uNzI0Ni43MzguNzAxMSw1LjE3MDktNS4xNzFjLjQzNjktLjQzNjksMS4wMDk1LS42NTUzLDEuNTgyMi0uNjU1M20wLS43NWMtLjc5OCwwLTEuNTQ4Mi4zMTA3LTIuMTEyNC44NzQ5bC00LjY1NDEsNC42NTQxLS4yMDgtLjE5NzYtLjU0MzMtLjUxNjEtLjUxNjYuNTQyOS0uNjg5NS43MjQ2LS41MTczLjU0MzcuNTQ0MS41MTcuMDYzNC4wNjAyLTYuNTA0Niw2LjYyMDUtLjA5MzQuMDk1MS0uMDU0OS4xMjE1LTEuNTMzMiwzLjM5MTUtLjY2OTIsMS4xODY4LS4yNzk3LjQ5Ni40MDI3LjQwMjcsMSwxLC40MDI2LjQwMjcuNDk2MS0uMjc5NywxLjE4NDYtLjY2OCwzLjI3ODktMS40NTcyLjEyMzQtLjA1NDguMDk2NC0uMDk0NCw2Ljg0OTEtNi42OTg5LjIzNzguMjI2LjU0MzMuNTE2Mi41MTY2LS41NDMuNjg5NS0uNzI0Ni41MTczLS41NDM4LS41NDQxLS41MTctLjQ1ODctLjQzNTgsNC41NDU3LTQuNTQ1N2MuNTY0My0uNTY0My44NzUxLTEuMzE0NS44NzUxLTIuMTEyNHMtLjMxMDgtMS41NDgyLS44NzUxLTIuMTEyNGMtLjU2NDItLjU2NDItMS4zMTQzLS44NzUtMi4xMTI0LS44NzVoMFoiIGZpbGw9IiNmZmYiLz48cG9seWdvbiBwb2ludHM9IjIuMDMwMyAyMS41IDIuNSAyMS45Njk3IDIuODQ3NyAyMS42NTcyIDYuMTYwMiAyMC4xODUxIDEyLjk2NzggMTMuNDk3NiAxMC41MDIgMTEuMDMyNyAzLjgxNTQgMTcuODM5NCAyLjI2NTYgMjEuMjY1MSAyLjAzMDMgMjEuNSIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 24, auto}\n:host([cursor="picker-alt"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMjAuNTk5NiwyMi42NDExbC0zLjM0MDgtMS40ODI5LTcuMTU2Mi02Ljk5OS0uNzcxNS43MzM0LTEuMjA2MS0xLjI2ODEsMS4wMDk4LS45NTk1LTQuODE4NC00LjgxNzljLS40OTMyLS40OTMyLS43NjQ2LTEuMTQ5NC0uNzY0Ni0xLjg0NzJzLjI3MTUtMS4zNTQuNzY1Ni0xLjg0NzJjLjQ5MzItLjQ5MzcsMS4xNDk0LS43NjUxLDEuODQ2Ny0uNzY1MS42OTgyLDAsMS4zNTQ1LjI3MTUsMS44NDc3Ljc2NTFsNC45MTIxLDQuOTEyNi43NDUxLS43MDc1LDEuMjA2MSwxLjI2NzYtLjYxMTMuNTgxNSw2LjgxODQsNi45Mzk5LDEuNTc0MiwzLjQ4MjkuODEwNSwxLjQzNDEtMS40MDMzLDEuNDAyMy0xLjQ2MzktLjgyNTJaIi8+PHBhdGggZD0ibTYuMTY0MiwzLjc2MjZjLjU3MjYsMCwxLjE0NTMuMjE4NCwxLjU4MjIuNjU1M2w1LjE3MDksNS4xNzEuNzM4LS43MDExLjY4OTUuNzI0Ni0uNjE2Mi41ODU1LDcuMDM5MSw3LjE2NDUsMS41NDY5LDMuNDIxOS42ODU1LDEuMjE1OC0xLDEtMS4yMTU4LS42ODU2LTMuMzExNS0xLjQ3MTctNy4zNjYtNy4yMDQ0LS43NjIuNzIzOS0uNjg5NS0uNzI0NiwxLjAxNjYtLjk2NTgtNS4wODk4LTUuMDg5OGMtLjg3MzgtLjg3MzgtLjg3MzgtMi4yOTA1LDAtMy4xNjQyaDBjLjQzNjktLjQzNjksMS4wMDk1LS42NTUzLDEuNTgyMi0uNjU1M20wLS43NWMtLjc5OCwwLTEuNTQ4Mi4zMTA3LTIuMTEyNC44NzQ5LS41NjQzLjU2NDMtLjg3NSwxLjMxNDUtLjg3NSwyLjExMjVzLjMxMDcsMS41NDgyLjg3NSwyLjExMjVsNC41NDU3LDQuNTQ1Ny0uNDU4Ny40MzU4LS41NDQxLjUxNy41MTczLjU0MzcuNjg5NS43MjQ2LjUxNjYuNTQzLjU0MzMtLjUxNjIuMjM3OC0uMjI1OSw2Ljg0OTEsNi42OTg5LjA5NjQuMDk0NC4xMjM0LjA1NDgsMy4yNzg5LDEuNDU3MiwxLjE4NDYuNjY4LjQ5NjEuMjc5Ny40MDI2LS40MDI3LDEtMSwuNDAyNy0uNDAyNy0uMjc5Ny0uNDk2LS42NjkyLTEuMTg2OC0xLjUzMzItMy4zOTE1LS4wNTQ5LS4xMjE1LS4wOTM0LS4wOTUxLTYuNTA0Ni02LjYyMDUuMDYzNC0uMDYwMi41NDQxLS41MTctLjUxNzMtLjU0MzctLjY4OTUtLjcyNDYtLjUxNjYtLjU0MjktLjU0MzMuNTE2MS0uMjA4LjE5NzYtNC42NTQxLTQuNjU0MWMtLjU2NDItLjU2NDItMS4zMTQ1LS44NzUtMi4xMTI0LS44NzVoMFoiIGZpbGw9IiNmZmYiLz48cG9seWdvbiBwb2ludHM9IjIxLjk2OTcgMjEuNSAyMS41IDIxLjk2OTcgMjEuMTUyMyAyMS42NTcyIDE3LjgzOTggMjAuMTg1MSAxMS4wMzIyIDEzLjQ5NzYgMTMuNDk4IDExLjAzMjcgMjAuMTg0NiAxNy44Mzk0IDIxLjczNDQgMjEuMjY1MSAyMS45Njk3IDIxLjUiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtMjIuNSwyMi41aDBjLjI5MDctLjI5MDcuMzM1OC0uNzQ2Mi4xMDc4LTEuMDg4M2wtMi42MDc4LTQuNDExN2gtNmw3LjQxMTcsNS42MDc4Yy4zNDIxLjIyODEuNzk3Ni4xODMsMS4wODgzLS4xMDc4WiIvPjwvc3ZnPg==") 24 24, auto}\n:host([cursor="resize-v"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjguMTc0OCAxNy42MjUgMTAuNjI1IDE3LjYyNSAxMC42MjUgOC4zNzUgOC4xNzQ4IDguMzc1IDExLjUgNC41NjU5IDE0LjgyNTIgOC4zNzUgMTIuMzc1IDguMzc1IDEyLjM3NSAxNy42MjUgMTQuODI1MiAxNy42MjUgMTEuNSAyMS40MzQxIDguMTc0OCAxNy42MjUiLz48cGF0aCBkPSJtMTEuNSw1LjEzNjFsMi41LDIuODYzOWgtMnYxMGgybC0yLjUsMi44NjM5LTIuNS0yLjg2MzloMnYtMTBoLTJsMi41LTIuODYzOW0wLTEuMTQwNWwtLjU2NTEuNjQ3My0yLjUsMi44NjM5LTEuMDg1MiwxLjI0MzJoMi45MDAzdjguNWgtMi45MDAzbDEuMDg1MiwxLjI0MzIsMi41LDIuODYzOS41NjUxLjY0NzMuNTY1MS0uNjQ3MywyLjUtMi44NjM5LDEuMDg1Mi0xLjI0MzJoLTIuOTAwM3YtOC41aDIuOTAwM2wtMS4wODUyLTEuMjQzMi0yLjUtMi44NjM5LS41NjUxLS42NDczaDBaIiBmaWxsPSIjZmZmIi8+PC9zdmc+") 12 12, auto}\n:host([cursor="resize-h"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjE2LjYyNSAxMy4zNzUgNy4zNzUgMTMuMzc1IDcuMzc1IDE1LjgyNTIgMy41NjU0IDEyLjUgNy4zNzUgOS4xNzQ4IDcuMzc1IDExLjYyNSAxNi42MjUgMTEuNjI1IDE2LjYyNSA5LjE3NDggMjAuNDM0NiAxMi41IDE2LjYyNSAxNS44MjUyIDE2LjYyNSAxMy4zNzUiLz48cGF0aCBkPSJtMTcsMTBsMi44NjM5LDIuNS0yLjg2MzksMi41di0ySDd2MmwtMi44NjM5LTIuNSwyLjg2MzktMi41djJoMTB2LTJtLS43NS0xLjY1MDN2Mi45MDAzSDcuNzV2LTIuOTAwMmwtMS4yNDMyLDEuMDg1Mi0yLjg2MzksMi40OTk5LS42NDczLjU2NS42NDczLjU2NSwyLjg2MzksMi41LDEuMjQzMiwxLjA4NTN2LTIuOTAwM2g4LjV2Mi45MDAzbDEuMjQzMi0xLjA4NTMsMi44NjM5LTIuNS42NDczLS41NjUtLjY0NzMtLjU2NS0yLjg2MzktMi41LTEuMjQzMi0xLjA4NTNoMFoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=") 12 12, auto}\n:host([cursor="rotate"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTcuMjUsMTMuMzc1di01LjYyNWgtNC44NzV2Mi4wNTA4bC0zLjk2MDktMy4zMDA4LDMuOTYwOS0zLjMwMDh2Mi4wNTA4aDUuMTI1YzEuMjQwMiwwLDIuMjUsMS4wMDkzLDIuMjUsMi4yNXY1Ljg3NWgtMi41WiIvPjxwYXRoIGQ9Im0xMiwzLjk5OTl2MS42MjUxaDUuNWMxLjAzNDIsMCwxLjg3NS44NDEzLDEuODc1LDEuODc1djUuNWgtMS43NXYtNS41YzAtLjA2ODgtLjA1NTctLjEyNS0uMTI1LS4xMjVoLTUuNXYxLjYyNDhsLTMtMi40OTk5LDMtMi40OTk5bS43NS0xLjYwMTNsLTEuMjMwMSwxLjAyNTEtMywyLjQ5OTktLjY5MTQuNTc2Mi42OTE0LjU3NjIsMywyLjQ5OTksMS4yMzAxLDEuMDI1di0yLjQ3Nmg0LjEyNXY1LjYyNWgzLjI1di02LjI1YzAtMS40NDc0LTEuMTc3Ni0yLjYyNS0yLjYyNS0yLjYyNWgtNC43NXYtMi40NzYzaDBaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTExLjYyNSwxOC43NWgtNS4xMjVjLTEuMjQwMiwwLTIuMjUtMS4wMDkzLTIuMjUtMi4yNXYtNS44NzVoMi41djUuNjI1aDQuODc1di0yLjA1MDhsMy45NjA5LDMuMzAwOC0zLjk2MDksMy4zMDA4di0yLjA1MDhaIi8+PHBhdGggZD0ibTYuMzc1LDExdjUuNWMwLC4wNjg4LjA1NTcuMTI1LjEyNS4xMjVoNS41di0xLjYyNWwzLDIuNDk5OS0zLDIuNDk5OXYtMS42MjQ4aC01LjVjLTEuMDM0MiwwLTEuODc1LS44NDEzLTEuODc1LTEuODc1di01LjVoMS43NW0uNzUtLjc1aC0zLjI1djYuMjVjMCwxLjQ0NzQsMS4xNzc2LDIuNjI1LDIuNjI1LDIuNjI1aDQuNzV2Mi40NzYxbDEuMjMwMS0xLjAyNTEsMy0yLjQ5OTkuNjkxNC0uNTc2Mi0uNjkxNC0uNTc2Mi0zLTIuNDk5OS0xLjIzMDEtMS4wMjUxdjIuNDc2MmgtNC4xMjV2LTUuNjI1aDBaIiBmaWxsPSIjZmZmIi8+PC9zdmc+") 12 12, auto}\n:host([cursor="selection"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="selection-anchor"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIgZmlsbD0iI2ZmZiIvPjxjaXJjbGUgY3g9IjIwLjUiIGN5PSIyMC41IiByPSIyLjg3NSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMC41LDE4YzEuMzgwNywwLDIuNSwxLjExOTMsMi41LDIuNXMtMS4xMTkzLDIuNS0yLjUsMi41LTIuNS0xLjExOTMtMi41LTIuNSwxLjExOTMtMi41LDIuNS0yLjVtMC0uNzVjLTEuNzkyMSwwLTMuMjUsMS40NTc5LTMuMjUsMy4yNXMxLjQ1NzksMy4yNSwzLjI1LDMuMjUsMy4yNS0xLjQ1NzksMy4yNS0zLjI1LTEuNDU3OS0zLjI1LTMuMjUtMy4yNWgwWiIvPjwvc3ZnPg==") 0 0, auto}\n:host([cursor="selection-move"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIgZmlsbD0iI2ZmZiIvPjxyZWN0IHg9IjE3LjYyNSIgeT0iMTcuNjI1IiB3aWR0aD0iNS43NSIgaGVpZ2h0PSI1Ljc1Ii8+PHBhdGggZD0ibTIzLDE4djVoLTV2LTVoNW0uNzUtLjc1aC02LjV2Ni41aDYuNXYtNi41aDBaIiBmaWxsPSIjZmZmIi8+PC9zdmc+") 0 0, auto}\n:host([cursor="selection-resize"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+PHBhdGggZD0ibTEsMmwxMSwxMWgtNi41bC00LjUsNC41VjJNLjI1LjE4OTN2MTkuMTIxM2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNoOGwtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LjI1LjE4OTNILjI1WiIgZmlsbD0iI2ZmZiIvPjxwb2x5Z29uIHBvaW50cz0iMTMuNjI1IDIzLjM3NSAxMy42MjUgMTkuMDk0NyAxNSAyMC40Njk3IDIwLjQ2OTcgMTUgMTkuMDk0NyAxMy42MjUgMjMuMzc1IDEzLjYyNSAyMy4zNzUgMTcuOTA1MyAyMiAxNi41MzAzIDE2LjUzMDMgMjIgMTcuOTA1MyAyMy4zNzUgMTMuNjI1IDIzLjM3NSIvPjxwYXRoIGQ9Im0yMywxNHYyLjk5OTlsLTEtLjk5OTktNiw2LDEsLjk5OTloLTN2LTIuOTk5OWwxLDEsNi02LTEtMWgzbS43NS0uNzVoLTUuNTYwN2wxLjI4MDQsMS4yODAzLjQ2OTYuNDY5Ny00LjkzOTMsNC45MzkzLS40Njk3LS40Njk3LTEuMjgwMy0xLjI4MDN2NS41NjA2aDUuNTYwOGwtMS4yODA1LTEuMjgwMy0uNDY5Ni0uNDY5Niw0LjkzOTMtNC45MzkzLjQ2OTcuNDY5NiwxLjI4MDMsMS4yODAydi01LjU2MDVoMFoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=") 0 0, auto}\n:host([cursor="target"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB4PSIzLjYyNSIgeT0iMTEuNjI1IiB3aWR0aD0iNC43NSIgaGVpZ2h0PSIxLjc1Ii8+PHBhdGggZD0ibTgsMTJ2MWgtNHYtMWg0bS43NS0uNzVIMy4yNXYyLjVoNS41di0yLjVoMFoiIGZpbGw9IiNmZmYiLz48cmVjdCB4PSIxMC42MjUiIHk9IjQuNjI1IiB3aWR0aD0iMS43NSIgaGVpZ2h0PSI0Ljc1Ii8+PHBhdGggZD0ibTEyLDV2NGgtMXYtNGgxbS43NS0uNzVoLTIuNXY1LjVoMi41di01LjVoMFoiIGZpbGw9IiNmZmYiLz48cmVjdCB4PSIxMC42MjUiIHk9IjExLjYyNSIgd2lkdGg9IjEuNzUiIGhlaWdodD0iMS43NSIvPjxwYXRoIGQ9Im0xMiwxMnYxaC0xdi0xaDFtLjc1LS43NWgtMi41djIuNWgyLjV2LTIuNWgwWiIgZmlsbD0iI2ZmZiIvPjxyZWN0IHg9IjEwLjYyNSIgeT0iMTUuNjI1IiB3aWR0aD0iMS43NSIgaGVpZ2h0PSI0Ljc1Ii8+PHBhdGggZD0ibTEyLDE2djRoLTF2LTRoMW0uNzUtLjc1aC0yLjV2NS41aDIuNXYtNS41aDBaIiBmaWxsPSIjZmZmIi8+PHJlY3QgeD0iMTQuNjI1IiB5PSIxMS42MjUiIHdpZHRoPSI0Ljc1IiBoZWlnaHQ9IjEuNzUiLz48cGF0aCBkPSJtMTksMTJ2MWgtNHYtMWg0bS43NS0uNzVoLTUuNXYyLjVoNS41di0yLjVoMFoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=") 12 12, auto}\n:host([cursor="text-add"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cG9seWdvbiBwb2ludHM9IjMuNjI1IDguMzc1IDMuNjI1IDUuMzc1IC42MjUgNS4zNzUgLjYyNSAzLjYyNSAzLjYyNSAzLjYyNSAzLjYyNSAuNjI1IDUuMzc1IC42MjUgNS4zNzUgMy42MjUgOC4zNzUgMy42MjUgOC4zNzUgNS4zNzUgNS4zNzUgNS4zNzUgNS4zNzUgOC4zNzUgMy42MjUgOC4zNzUiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtNSwxdjNoM3YxaC0zdjNoLTF2LTNIMXYtMWgzVjFoMW0uNzUtLjc1aC0yLjV2M0guMjV2Mi41aDN2M2gyLjV2LTNoM3YtMi41aC0zVi4yNWgwWiIvPjxwYXRoIGQ9Im0xMy42MjUsMjMuMzc1di0xLjI1aC4zNzVjMS4yOTEsMCwxLjYyNS0uMzM0LDEuNjI1LTEuNjI1di05LjEyNWgtMS4xMjVjLS40MDkyLDAtLjc2NTYtLjAxMzItMS4wNzUyLS4wMjQ0LS4yMjk1LS4wMDg4LS40MzI2LS4wMTY2LS42MTMzLS4wMTY2LS43NTY4LDAtLjkzNjUsMC0uOTM2NSwxLjY2NnYuMzc1aC0xLjI1di0zLjc1aDEyLjc1djMuNzVoLTEuMjV2LS4zNzVjMC0xLjY2Ni0uMTc5Ny0xLjY2Ni0uOTM2NS0xLjY2Ni0uMTc5NywwLS4zODM4LjAwNzgtLjYxMzMuMDE2Ni0uMzA5Ni4wMTEyLS42NjYuMDI0NC0xLjA3NTIuMDI0NGgtMS4xMjV2OS4xMjVjMCwxLjI5MS4zMzQsMS42MjUsMS42MjUsMS42MjVoLjM3NXYxLjI1aC02Ljc1WiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMywxMHYzaC0uNWMwLTEuNzg1Ny0uMjU1MS0yLjA0MDgtMS4zMTItMi4wNDA4LS40MjI3LDAtLjk3MzguMDQwOC0xLjY4OC4wNDA4aC0xLjV2OS41YzAsMS41LjUsMiwyLDJ2LjVoLTZ2LS41YzEuNSwwLDItLjUsMi0ydi05LjVoLTEuNWMtLjcxNDQsMC0xLjI2NTMtLjA0MDgtMS42ODgtLjA0MDgtMS4wNTY4LDAtMS4zMTIuMjU1Mi0xLjMxMiwyLjA0MDhoLS41di0zaDEybS43NS0uNzVoLTEzLjV2NC41aDJ2LS43NWMwLS45ODA4LjA5MDUtMS4yMTMxLjEyOTMtMS4yNjc0LS4wMDA0LjAwMTMuMDAwNy4wMDE5LjAwMzkuMDAxOS4wMjA4LDAsLjEyOTQtLjAyNTMuNDI4Ny0uMDI1My4xNzU4LDAsLjM3NDUuMDA3Ni41OTkyLjAxNTkuMzEzNy4wMTE2LjY3NDQuMDI0OSwxLjA4ODkuMDI0OWguNzV2OC43NWMwLDEuMDg2NC0uMTYzNiwxLjI1LTEuMjUsMS4yNWgtLjc1djJoNy41di0yaC0uNzVjLTEuMDg2NCwwLTEuMjUtLjE2MzYtMS4yNS0xLjI1di04Ljc1aC43NWMuNDE0MywwLC43NzUtLjAxMzMsMS4wODg3LS4wMjQ5LjIyNDktLjAwODMuNDIzNi0uMDE1OS41OTk0LS4wMTU5LjM0NDIsMCwuNDM2My4wMzM1LjQ1NjMuMDQzNy4wMTUzLjAzNC4xMDU2LjI2NjIuMTA1NiwxLjI0NzF2Ljc1aDJ2LTQuNWgwWiIvPjwvc3ZnPg==") 4.5 4.5, auto}\n:host([cursor="gradient"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5kIHsKICAgICAgICBmaWxsOiAjZmZmOwogICAgICB9CgogICAgICAuZSB7CiAgICAgICAgZmlsbDogdXJsKCNiKTsKICAgICAgfQoKICAgICAgLmYgewogICAgICAgIGZpbGw6IHVybCgjYyk7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSI2Ljg3MTkiIHkxPSIxNi4wNzk1IiB4Mj0iLjczMTgiIHkyPSI1LjE5NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjYuMTY3MSIgeTE9IjE0LjY0MzkiIHgyPSIxLjk3OTYiIHkyPSI3LjAxODkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzIzMWYyMCIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8Zz4KICAgIDxwb2x5Z29uIGNsYXNzPSJlIiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+CiAgICA8cGF0aCBjbGFzcz0iZCIgZD0iTTEsMkwxMiwxM0g1LjVMMSwxNy41VjJNLjI1LC4xODkzVjE5LjMxMDdsMS4yODAzLTEuMjgwMyw0LjI4MDQtNC4yODAzSDEzLjgxMDdsLTEuMjgwNC0xLjI4MDNMMS41MzAzLDEuNDY5NywuMjUsLjE4OTNILjI1WiIvPgogIDwvZz4KICA8cGF0aCBjbGFzcz0iZiIgZD0iTTEuNzUsMy44MTA3TDEwLjE4OTMsMTIuMjVINS4xODkzbC0uMjE5NiwuMjE5Ny0zLjIxOTcsMy4yMTk3VjMuODEwN20tLjc1LTEuODEwN3YxNS41bDQuNS00LjVoNi41TDEsMmgwWiIvPgo8L3N2Zz4=") 0 0, auto}\n:host([cursor="gradient-move"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5kIHsKICAgICAgICBmaWxsOiAjZmZmOwogICAgICB9CgogICAgICAuZSB7CiAgICAgICAgZmlsbDogdXJsKCNiKTsKICAgICAgfQoKICAgICAgLmYgewogICAgICAgIGZpbGw6IHVybCgjYyk7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSI2Ljg3MTkiIHkxPSIxNi4wNzk1IiB4Mj0iLjczMTgiIHkyPSI1LjE5NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjYuMTY3MSIgeTE9IjE0LjY0MzkiIHgyPSIxLjk3OTYiIHkyPSI3LjAxODkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzIzMWYyMCIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8Zz4KICAgIDxyZWN0IHg9IjE3LjYyNSIgeT0iMTcuNjI1IiB3aWR0aD0iNS43NSIgaGVpZ2h0PSI1Ljc1Ii8+CiAgICA8cGF0aCBjbGFzcz0iZCIgZD0iTTIzLDE4djVoLTV2LTVoNW0uNzUtLjc1aC02LjV2Ni41aDYuNXYtNi41aDBaIi8+CiAgPC9nPgogIDxnPgogICAgPGc+CiAgICAgIDxwb2x5Z29uIGNsYXNzPSJlIiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+CiAgICAgIDxwYXRoIGNsYXNzPSJkIiBkPSJNMSwyTDEyLDEzSDUuNUwxLDE3LjVWMk0uMjUsLjE4OTNWMTkuMzEwN2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNIMTMuODEwN2wtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LC4yNSwuMTg5M0guMjVaIi8+CiAgICA8L2c+CiAgICA8cGF0aCBjbGFzcz0iZiIgZD0iTTEuNzUsMy44MTA3TDEwLjE4OTMsMTIuMjVINS4xODkzbC0uMjE5NiwuMjE5Ny0zLjIxOTcsMy4yMTk3VjMuODEwN20tLjc1LTEuODEwN3YxNS41bDQuNS00LjVoNi41TDEsMmgwWiIvPgogIDwvZz4KPC9zdmc+") 0 0, auto}\n:host([cursor="gradient-resize"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5kIHsKICAgICAgICBmaWxsOiAjZmZmOwogICAgICB9CgogICAgICAuZSB7CiAgICAgICAgZmlsbDogdXJsKCNiKTsKICAgICAgfQoKICAgICAgLmYgewogICAgICAgIGZpbGw6IHVybCgjYyk7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSI2Ljg3MTkiIHkxPSIxNi4wNzk1IiB4Mj0iLjczMTgiIHkyPSI1LjE5NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjYuMTY3MSIgeTE9IjE0LjY0MzkiIHgyPSIxLjk3OTYiIHkyPSI3LjAxODkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzIzMWYyMCIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8Zz4KICAgIDxwb2x5Z29uIHBvaW50cz0iMTMuNjI1IDIzLjM3NSAxMy42MjUgMTkuMDk0NyAxNSAyMC40Njk3IDIwLjQ2OTcgMTUgMTkuMDk0NyAxMy42MjUgMjMuMzc1IDEzLjYyNSAyMy4zNzUgMTcuOTA1MyAyMiAxNi41MzAzIDE2LjUzMDMgMjIgMTcuOTA1MyAyMy4zNzUgMTMuNjI1IDIzLjM3NSIvPgogICAgPHBhdGggY2xhc3M9ImQiIGQ9Ik0yMywxNHYyLjk5OTlsLTEtLjk5OTktNiw2LDEsLjk5OTloLTN2LTIuOTk5OWwxLDEsNi02LTEtMWgzbS43NS0uNzVoLTUuNTYwN2wxLjI4MDQsMS4yODAzLC40Njk2LC40Njk3LTQuOTM5Myw0LjkzOTMtLjQ2OTctLjQ2OTctMS4yODAzLTEuMjgwM3Y1LjU2MDZoNS41NjA4bC0xLjI4MDUtMS4yODAzLS40Njk2LS40Njk2LDQuOTM5My00LjkzOTMsLjQ2OTcsLjQ2OTYsMS4yODAzLDEuMjgwMnYtNS41NjA1aDBaIi8+CiAgPC9nPgogIDxnPgogICAgPGc+CiAgICAgIDxwb2x5Z29uIGNsYXNzPSJlIiBwb2ludHM9Ii42MjUgMS4wOTQ3IDEyLjkwNTMgMTMuMzc1IDUuNjU1MyAxMy4zNzUgLjYyNSAxOC40MDUzIC42MjUgMS4wOTQ3Ii8+CiAgICAgIDxwYXRoIGNsYXNzPSJkIiBkPSJNMSwyTDEyLDEzSDUuNUwxLDE3LjVWMk0uMjUsLjE4OTNWMTkuMzEwN2wxLjI4MDMtMS4yODAzLDQuMjgwNC00LjI4MDNIMTMuODEwN2wtMS4yODA0LTEuMjgwM0wxLjUzMDMsMS40Njk3LC4yNSwuMTg5M0guMjVaIi8+CiAgICA8L2c+CiAgICA8cGF0aCBjbGFzcz0iZiIgZD0iTTEuNzUsMy44MTA3TDEwLjE4OTMsMTIuMjVINS4xODkzbC0uMjE5NiwuMjE5Ny0zLjIxOTcsMy4yMTk3VjMuODEwN20tLjc1LTEuODEwN3YxNS41bDQuNS00LjVoNi41TDEsMmgwWiIvPgogIDwvZz4KPC9zdmc+") 0 0, auto}\n:host([cursor="shapebuilder-add"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBvbHlnb24gcG9pbnRzPSIuNjI1IDEuMDk0NyAxMi45MDUzIDEzLjM3NSA1LjY1NTMgMTMuMzc1IC42MjUgMTguNDA1MyAuNjI1IDEuMDk0NyIvPgogICAgPHBhdGggY2xhc3M9ImIiIGQ9Ik0xLDJMMTIsMTNINS41TDEsMTcuNVYyTS4yNSwuMTg5M1YxOS4zMTA3bDEuMjgwMy0xLjI4MDMsNC4yODA0LTQuMjgwM0gxMy44MTA3bC0xLjI4MDQtMS4yODAzTDEuNTMwMywxLjQ2OTcsLjI1LC4xODkzSC4yNVoiLz4KICA8L2c+CiAgPGc+CiAgICA8cG9seWdvbiBwb2ludHM9IjE4LjYyNSAyMy4zNzUgMTguNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE1LjYyNSAxOC42MjUgMTguNjI1IDE4LjYyNSAxOC42MjUgMTUuNjI1IDIwLjM3NSAxNS42MjUgMjAuMzc1IDE4LjYyNSAyMy4zNzUgMTguNjI1IDIzLjM3NSAyMC4zNzUgMjAuMzc1IDIwLjM3NSAyMC4zNzUgMjMuMzc1IDE4LjYyNSAyMy4zNzUiLz4KICAgIDxwYXRoIGNsYXNzPSJiIiBkPSJNMjAsMTZ2M2gzdjFoLTN2M2gtMXYtM2gtM3YtMWgzdi0zaDFtLjc1LS43NWgtMi41djNoLTN2Mi41aDN2M2gyLjV2LTNoM3YtMi41aC0zdi0zaDBaIi8+CiAgPC9nPgo8L3N2Zz4=") 0 0, auto}\n:host([cursor="shapebuilder-sub"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBvbHlnb24gcG9pbnRzPSIuNjI1IDEuMDk0NyAxMi45MDUzIDEzLjM3NSA1LjY1NTMgMTMuMzc1IC42MjUgMTguNDA1MyAuNjI1IDEuMDk0NyIvPgogICAgPHBhdGggY2xhc3M9ImIiIGQ9Ik0xLDJMMTIsMTNINS41TDEsMTcuNVYyTS4yNSwuMTg5M1YxOS4zMTA3bDEuMjgwMy0xLjI4MDMsNC4yODA0LTQuMjgwM0gxMy44MTA3bC0xLjI4MDQtMS4yODAzTDEuNTMwMywxLjQ2OTcsLjI1LC4xODkzSC4yNVoiLz4KICA8L2c+CiAgPGc+CiAgICA8cmVjdCB4PSIxNS42MjUiIHk9IjE4LjYyNSIgd2lkdGg9IjcuNzUiIGhlaWdodD0iMS43NSIvPgogICAgPHBhdGggY2xhc3M9ImIiIGQ9Ik0yMywxOXYxaC03di0xaDdtLjc1LS43NUgxNS4yNXYyLjVoOC41di0yLjVoMFoiLz4KICA8L2c+Cjwvc3ZnPg==") 0 0, auto}\n:host([cursor="zoom"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBhdGggZD0iTTEwLjYwODQsMTMuMTk5MmMtLjk1NjEsLjUyNDktMi4wMjQ0LC44MDA4LTMuMTA4NCwuODAwOC0zLjU4NCwwLTYuNS0yLjkxNi02LjUtNi41UzMuOTE2LDEsNy41LDFzNi41LDIuOTE2LDYuNSw2LjVjMCwxLjU5MDMtLjU3MzIsMy4wOTkxLTEuNjIxMSw0LjI4ODFsMy42ODE2LDMuNjgxNi0xLjU5MDgsMS41OTA4LTMuODYxMy0zLjg2MTNaIi8+CiAgICA8cGF0aCBjbGFzcz0iYiIgZD0iTTcuNSwxLjM3NWMzLjM3NywwLDYuMTI1LDIuNzQ3Niw2LjEyNSw2LjEyNSwwLDEuNjczMy0uNjc1OSwzLjE5MDctMS43NjcyLDQuMjk3MmwzLjY3MjUsMy42NzI1LTEuMDYwNSwxLjA2MDYtMy43OTk2LTMuNzk5NmMtLjkyNjMsLjU2MzUtMi4wMDksLjg5NDMtMy4xNzAyLC44OTQzLTMuMzc3LDAtNi4xMjUtMi43NDc2LTYuMTI1LTYuMTI1UzQuMTIzLDEuMzc1LDcuNSwxLjM3NW0wLS43NUMzLjcwOTEsLjYyNSwuNjI1LDMuNzA5MSwuNjI1LDcuNXMzLjA4NDEsNi44NzUsNi44NzUsNi44NzVjMS4wNTI1LDAsMi4wOTE2LS4yNDYxLDMuMDM4LS43MTU4bDMuNDAxNSwzLjQwMTQsLjUzMDMsLjUzMDMsLjUzMDMtLjUzMDMsMS4wNjA1LTEuMDYwNSwuNTMwNC0uNTMwMy0uNTMwNC0uNTMwMy0zLjE3MzctMy4xNzM4Yy45NjQ0LTEuMjEyLDEuNDg4Mi0yLjcwMTMsMS40ODgyLTQuMjY1NkMxNC4zNzUsMy43MDkxLDExLjI5MDksLjYyNSw3LjUsLjYyNWgwWiIvPgogIDwvZz4KICA8Y2lyY2xlIGNsYXNzPSJiIiBjeD0iNy41IiBjeT0iNy41IiByPSI0Ljg3NSIvPgo8L3N2Zz4=") 7.5 7.5, auto}\n:host([cursor="zoom-in"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBhdGggZD0iTTEwLjYwODQsMTMuMTk5MmMtLjk1NjEsLjUyNDktMi4wMjQ0LC44MDA4LTMuMTA4NCwuODAwOC0zLjU4NCwwLTYuNS0yLjkxNi02LjUtNi41UzMuOTE2LDEsNy41LDFzNi41LDIuOTE2LDYuNSw2LjVjMCwxLjU5MDMtLjU3MzIsMy4wOTkxLTEuNjIxMSw0LjI4ODFsMy42ODE2LDMuNjgxNi0xLjU5MDgsMS41OTA4LTMuODYxMy0zLjg2MTNaIi8+CiAgICA8cGF0aCBjbGFzcz0iYiIgZD0iTTcuNSwxLjM3NWMzLjM3NywwLDYuMTI1LDIuNzQ3Niw2LjEyNSw2LjEyNSwwLDEuNjczMy0uNjc1OSwzLjE5MDctMS43NjcyLDQuMjk3MmwzLjY3MjUsMy42NzI1LTEuMDYwNSwxLjA2MDYtMy43OTk2LTMuNzk5NmMtLjkyNjMsLjU2MzUtMi4wMDksLjg5NDMtMy4xNzAyLC44OTQzLTMuMzc3LDAtNi4xMjUtMi43NDc2LTYuMTI1LTYuMTI1UzQuMTIzLDEuMzc1LDcuNSwxLjM3NW0wLS43NUMzLjcwOTEsLjYyNSwuNjI1LDMuNzA5MSwuNjI1LDcuNXMzLjA4NDEsNi44NzUsNi44NzUsNi44NzVjMS4wNTI1LDAsMi4wOTE2LS4yNDYxLDMuMDM4LS43MTU4bDMuNDAxNSwzLjQwMTQsLjUzMDMsLjUzMDMsLjUzMDMtLjUzMDMsMS4wNjA1LTEuMDYwNiwuNTMwNC0uNTMwMy0uNTMwNC0uNTMwMy0zLjE3MzctMy4xNzM4Yy45NjQ0LTEuMjEyLDEuNDg4Mi0yLjcwMTMsMS40ODgyLTQuMjY1NkMxNC4zNzUsMy43MDkxLDExLjI5MDksLjYyNSw3LjUsLjYyNWgwWiIvPgogIDwvZz4KICA8Y2lyY2xlIGNsYXNzPSJiIiBjeD0iNy41IiBjeT0iNy41IiByPSI0Ljg3NSIvPgogIDxwb2x5Z29uIHBvaW50cz0iMTAgNyA4IDcgOCA1IDcgNSA3IDcgNSA3IDUgOCA3IDggNyAxMCA4IDEwIDggOCAxMCA4IDEwIDciLz4KPC9zdmc+") 7.5 7.5, auto}\n:host([cursor="zoom-out"]) {cursor: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmIgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnPgogICAgPHBhdGggZD0iTTEwLjYwODQsMTMuMTk5MmMtLjk1NjEsLjUyNDktMi4wMjQ0LC44MDA4LTMuMTA4NCwuODAwOC0zLjU4NCwwLTYuNS0yLjkxNi02LjUtNi41UzMuOTE2LDEsNy41LDFzNi41LDIuOTE2LDYuNSw2LjVjMCwxLjU5MDMtLjU3MzIsMy4wOTkxLTEuNjIxMSw0LjI4ODFsMy42ODE2LDMuNjgxNi0xLjU5MDgsMS41OTA4LTMuODYxMy0zLjg2MTNaIi8+CiAgICA8cGF0aCBjbGFzcz0iYiIgZD0iTTcuNSwxLjM3NWMzLjM3NywwLDYuMTI1LDIuNzQ3Niw2LjEyNSw2LjEyNSwwLDEuNjczMy0uNjc1OSwzLjE5MDctMS43NjcyLDQuMjk3MmwzLjY3MjUsMy42NzI1LTEuMDYwNSwxLjA2MDUtMy43OTk2LTMuNzk5NmMtLjkyNjMsLjU2MzUtMi4wMDksLjg5NDMtMy4xNzAyLC44OTQzLTMuMzc3LDAtNi4xMjUtMi43NDc2LTYuMTI1LTYuMTI1UzQuMTIzLDEuMzc1LDcuNSwxLjM3NW0wLS43NUMzLjcwOTEsLjYyNSwuNjI1LDMuNzA5MSwuNjI1LDcuNXMzLjA4NDEsNi44NzUsNi44NzUsNi44NzVjMS4wNTI1LDAsMi4wOTE2LS4yNDYxLDMuMDM4LS43MTU4bDMuNDAxNSwzLjQwMTQsLjUzMDMsLjUzMDMsLjUzMDMtLjUzMDMsMS4wNjA1LTEuMDYwNiwuNTMwNC0uNTMwMy0uNTMwNC0uNTMwMy0zLjE3MzctMy4xNzM4Yy45NjQ0LTEuMjEyLDEuNDg4Mi0yLjcwMTMsMS40ODgyLTQuMjY1NkMxNC4zNzUsMy43MDkxLDExLjI5MDksLjYyNSw3LjUsLjYyNWgwWiIvPgogIDwvZz4KICA8Y2lyY2xlIGNsYXNzPSJiIiBjeD0iNy41IiBjeT0iNy41IiByPSI0Ljg3NSIvPgogIDxyZWN0IHg9IjUiIHk9IjciIHdpZHRoPSI1IiBoZWlnaHQ9IjEiLz4KPC9zdmc+") 7.5 7.5, auto}\n\n    #main {\n        background: var(--render-engine-background-color);\n        box-sizing: border-box;\n    }\n    #grid {\n        display: grid;\n        grid-template-columns: 32px 1fr;\n        grid-template-rows: 32px 1fr;\n        grid-gap: 0;\n        outline: none;\n        border: none;\n        padding: 0;\n        margin: 0;\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n    }\n    #grid.no-ruler {\n        grid-template-rows: 1fr;\n        grid-template-columns: 1fr;\n        grid-template-areas: "main";\n    }\n    #grid.no-ruler > .bg-ruler, #grid.no-ruler > #unit {\n        display: none;\n    }\n    #grid.no-ruler > canvas {\n        grid-area: main;\n    }\n\n    .bg-ruler {\n        background: var(--render-engine-rulerBackground-color);\n        box-sizing: border-box;\n    }\n\n    #unit {\n        display: flex;\n        flex: 1;\n        font-size: 10px;\n        font-family: -expressive-sans, sans-serif;\n        color: var(--render-engine-rulerText-color);\n        justify-content: center;\n        align-items: center;\n        user-select: none;\n        box-sizing: border-box;\n    }\n\n    canvas {\n        display: block;\n        outline: none;\n        border: none;\n        touch-action: none;\n    }\n</style>\n<div class="no-ruler" id="grid">\n    <div id="unit" class="bg-ruler"><slot name="unit">px</slot></div>\n    <canvas id="rulerH" class="bg-ruler" height="32"></canvas>\n    <canvas id="rulerV" class="bg-ruler" width="32"></canvas>\n    <canvas id="main"></canvas>\n</div>\n',this.ruler=new Pl(this.shadowRoot.getElementById("rulerH"),this.shadowRoot.getElementById("rulerV"))}get canvas(){return this.shadowRoot.getElementById("main")}#te="selection";get cursor(){return this.#te}set cursor(t){this.#te!==t&&(this.#te=t,this.setAttribute("cursor",t))}updateRulerVisibility(){const t=this.shadowRoot.getElementById("grid").classList;this.ruler.visible?t.remove("no-ruler"):t.add("no-ruler")}connectedCallback(){this.isConnected&&this.dispatchEvent(new Event("connect"))}disconnectedCallback(){this.dispatchEvent(new Event("disconnect"))}}class El extends xt{constructor(t){super(t,"--render-engine-")}parse(t){return De.parse(t)}updateInternalValues(){this.board=this.getColor("board"),this.background=this.getColor("background"),this.overlay=this.getColor("overlay"),this.contour=this.getColor("contour"),this.snap=this.getColor("snap"),this.textBaseline=this.getColor("text-baseline")}}let Ol=!1,Rl=!1,Wl=!1;const Bl={x:0,y:0};function Ul(){return jl(Bl.x,Bl.y)}const $l=new Map;function Fl(t){return $l.get(t)}let Vl;function Gl(t){return t!==Vl&&(Vl?.deactivate(),Vl=t,Vl?.activate(),ic(),_o(oe,Vl),!0)}function Hl(t){t?Vl?.startPan(1):Vl?.endPan(1)}function Zl(t){ml.cursor=t}function Yl(){Jl()}let Ql=null;function Jl(){Vl&&Ql&&Vl.onMouseMove(Ql)}let ql,Kl=!0,Xl=!0,tc=null;function ec(){Kl=!0,Xl=!1,tc&&(tc.delete(),tc=null)}function ic(){Kl=!0}let nc,sc,rc,oc,ac,lc=0;function cc(){1!=++lc||nc||(nc=requestAnimationFrame(hc))}function uc(){0==--lc&&(cancelAnimationFrame(nc),nc=null)}function hc(t){dc(t),nc=requestAnimationFrame(hc)}function dc(t){Kl&&(Kl=!1,function(){if(!Xl)return ql(pc()),void(Xl=!0);if(tc){const t=pc();return t.save(),t.matrix=t.matrix.toIdentity(),t.drawImage(tc),void t.restore()}ql(pc()),tc=fc().makeImageSnapshot()}(),Vl?.render(t),pc().flush())}function fc(){return sc??=function(t){const e=Skia.SkSurface.MakeWebGLCanvasSurface(t,t.width,t.height,{antialias:!1,powerPreference:"high-performance"},oc),i=e.canvasElement.getContext("webgl2");return oc??={samples:0,stencil_bits:0},oc.samples=i.getParameter(i.SAMPLES),oc.stencil_bits=i.getParameter(i.STENCIL_BITS),e}(ml.canvas)}function pc(){return rc??=function(){const t=fc();return new qr(t.getCanvas(),$i.CreateDevicePixelRatio(bl),t)}()}function gc(){uc(),mc();const t=ml.canvas;Lc(t);const e=t.width,i=t.height,n=t.cloneNode(!1);t.replaceWith(n),St(n,e,i,bl),Cc(n),ec(),cc()}function mc(){sc&&(sc.canvasElement?.getContext("webgl2"),sc.delete(),sc=null),rc&&(rc.dispose(),rc=null)}function yc(){Uc(!0),ec()}function vc(){_c(!0),wt.isObserved(ml)||wt.observe(ml,Ic),ml.addEventListener("dragenter",xc),ml.addEventListener("dragover",xc),ml.addEventListener("drop",wc),ml.ruler.vertical.addEventListener("pointerdown",$c),ml.ruler.horizontal.addEventListener("pointerdown",$c),ml.updateRulerVisibility(),Cc(ml.canvas),yl.update()}function bc(){wt.unobserve(ml),ml.removeEventListener("dragenter",xc),ml.removeEventListener("dragover",xc),ml.removeEventListener("drop",wc),ml.ruler.vertical.removeEventListener("pointerdown",$c),ml.ruler.horizontal.removeEventListener("pointerdown",$c),Lc(ml.canvas)}function xc(t){t.preventDefault()}function wc(t){t.preventDefault(),ac?.(t)}const Mc=[0,0];function Sc(){let[t,e]=Mc;const i=ml.ruler;if(i.visible){const n=bl*i.size;t-=n,e-=n}St(ml.canvas,t,e,bl),mc(),ec(),i.updateSize(t,e,bl),Uc(!0)}let kc;function _c(t){t&&(kc=null);const e=kc??=ml.getBoundingClientRect(),i=ml.ruler,n=i.visible?i.size:0;var s;s=new wi(e.x+n,e.y+n,e.width-n,e.height-n),pl=s}function Ic(t){var e;e=devicePixelRatio||1,bl!==e&&(bl=e),Mc[0]=t.devicePixelContentBoxSize[0].inlineSize,Mc[1]=t.devicePixelContentBoxSize[0].blockSize,_c(!0),Sc(),Vl&&(Yl(),ec(),dc(0))}function Cc(t){t.addEventListener("webglcontextlost",gc),t.addEventListener("pointerdown",Nc),t.addEventListener("pointerup",jc),t.addEventListener("pointermove",Tc),t.addEventListener("pointerenter",zc),t.addEventListener("pointerleave",Ac),t.addEventListener("wheel",Pc),t.addEventListener("focus",Dc),t.addEventListener("blur",Dc),t.setAttribute("tabindex","-1")}function Lc(t){t.removeEventListener("webglcontextlost",gc),t.removeEventListener("pointerdown",Nc),t.removeEventListener("pointerup",jc),t.removeEventListener("pointermove",Tc),t.removeEventListener("pointerenter",zc),t.removeEventListener("pointerleave",Ac),t.removeEventListener("wheel",Pc),t.removeEventListener("focus",Dc),t.removeEventListener("blur",Dc)}function Nc(t){t.isPrimary&&(Rl=!0,ml.canvas.setPointerCapture(t.pointerId),Vl?.onMouseDown(Ql=Ec(t)))}function jc(t){Rl&&t.isPrimary&&(Rl=!1,ml.canvas.releasePointerCapture(t.pointerId),Vl?.onMouseUp(Ql=Ec(t)))}function Tc(t){t.isPrimary&&(Bl.x=t.clientX,Bl.y=t.clientY,Ol&&Uc(!1),Vl?.onMouseMove(Ql=Ec(t)))}function zc(t){t.isPrimary&&(Ol=!0,Uc(!1),Vl?.onMouseEnter(Ql=Ec(t)))}function Ac(t){t.isPrimary&&(Ol=!1,Uc(!1),Vl?.onMouseLeave(Ql=Ec(t)))}function Pc(t){t.preventDefault(),t.stopImmediatePropagation(),Vl&&(Ql=Ec(t),function(t,e){Cl(t,n(1-.005*e,.85,1.15))}(Ql.canvasPosition,t.deltaY))}function Dc(t){Wl="focus"===t.type,Wl?Vl?.onFocus():Vl?.onBlur()}function Ec(t){const e=Nl(t.clientX,t.clientY);return{canvasPosition:e,position:Ll(e),button:t.button>=3?3:t.button,domEvent:t}}let Oc,Rc=1;function Wc(){Uc(!0),Rc!==vl&&(Rc=vl,Yl(),_o(re,vl)),ec()}function Bc(t){const e=ml?.ruler;pl&&e&&e.visible!==t&&(e.visible=t,ml.updateRulerVisibility(),_c(!1),Sc(),Yl())}function Uc(t){ml.ruler.draw(Ol?Nl(Bl.x,Bl.y):null,t)}function $c(t){if(!Oc||0!==t.button)return;if(null!=Vl&&(Vl.isWorkingOrPanning||!Vl.allowGuideCreation))return;const e=Vl,i=Oc(t.target===ml.ruler.horizontal,(()=>{Vl===i&&(i.deactivate(),Vl=e,e.activate(),ec())}));i&&(Vl?.deactivate(),Rl=!0,ml.canvas.setPointerCapture(t.pointerId),Vl=i,i.activate(),i.onMouseDown(Ql=Ec(t)))}Io(Bt,(function(){Vl?.onStateChanged(),ec()})),Io(Ut,ic);const Fc={mouse:1,pen:2,touch:4};class Vc{constructor(){this.isWorking=!1,this.mouseDownEvent=null,this.defaultCanvasCursor="selection",this.dblClickDelta=300,this.#ee=!1,this.#ie=!1,this.#ne=Number.NEGATIVE_INFINITY,this.#se=!1,this.#re=!1,this.#oe=0,this.#ae=null,this.#le=null,this.#ce=!1}#ee;#ie;get startPosition(){return this?.mouseDownEvent.position}get isActive(){return this.#ie}get isWorkingOrPanning(){return this.isWorking||this.#oe>0}get allowGuideCreation(){return!1}get allowSpaceBarPan(){return!0}activate(){this.#ie=!0,Zl(this.defaultCanvasCursor)}deactivate(){this.#ie=!1,this.#ee=!1,this.mouseDownEvent=null,this.#se=!1,this.#re=!1,this.#ce=!1,this.#oe=0,this.#ae=null,ic(),Zl("selection")}render(t){this.#oe||this.draw(t)}#ne;#se;#re;get isMouseLeftDown(){return this.#se||this.#re}get isMouseInside(){return Ol}onMouseDown(t){if(this.mouseDownEvent=t,this.#oe)switch(t.domEvent?.preventDefault(),t.button){case 0:this.#se=!0,this.startPan(4,t.canvasPosition);break;case 2:t.domEvent?.stopPropagation(),this.startPan(16,t.canvasPosition);break;case 1:this.startPan(8,t.canvasPosition)}else if(0===t.button){if(this.#re)return this.#re=!1,this.#se=!0,void(this.#ne=t.domEvent.timeStamp);!this.isWorking&&t.domEvent.timeStamp-this.#ne<=this.dblClickDelta?(this.#ne=Number.NEGATIVE_INFINITY,this.onDblClick(t)):(this.#ne=t.domEvent.timeStamp,this.#se=!0,this.onMouseLeftButtonDown(t),this.#ee=!0)}else 2===t.button?(t.domEvent?.preventDefault(),this.onContextMenu(t)):1===t.button&&(t.domEvent?.preventDefault(),this.startPan(8,t.canvasPosition))}onMouseUp(t){if(this.#oe)switch(t.button){case 0:this.#se=!1,this.endPan(4);break;case 2:this.endPan(16);break;case 1:this.endPan(8)}else this.#se&&0===t.button&&(this.#se=!1,this.onMouseLeftButtonUp(t));this.mouseDownEvent=null}onMouseMove(t){if(this.#oe)return void(this.mouseDownEvent&&this.#ue(t));if(!this.isMouseLeftDown)return void this.onMouseHover(t);let e=!1;if(this.#ee){const i=this.mouseDownEvent;if(i&&i.canvasPosition.distanceTo(t.canvasPosition)<(Fc[t.domEvent.pointerType]||1))return;this.#ee=!1,e=!0}this.onMouseLeftButtonMove(t,e)}onKeyDown(t){return this.isWorking}onKeyUp(t){return this.isWorking}#oe;get isPanning(){return 0!==this.#oe}#ae;#le;#ce;startPan(t,e=null){return 0!==this.#oe?(e&&!this.#ae&&(this.#ae=e),(this.#oe&t)!==t&&(this.#oe|=t,this.#he()),!1):(this.#ae=null,this.#oe=t,this.#le=ml.cursor,this.#se?(this.#oe|=4,this.#ce=!0):this.#ce=this.#re,this.#he(),ic(),!0)}endPan(t){return!!(this.#oe&t)&&(this.#oe&=~t,this.#he(),0!==this.#oe?(28&this.#oe||(this.#ae=null),!1):(this.#ae=null,this.#re=this.#ce&&!this.#se,Zl(this.#le),this.#le=null,this.onPanEnd(),!0))}onPanEnd(){Jl(),ic()}#ue(t){const e=t.canvasPosition;var i,n;this.#ae&&(i=e.x-this.#ae.x,n=e.y-this.#ae.y,(i||n)&&(fl.x+=i,fl.y+=n,Al())),this.#ae=e}#he(){const t=this.#oe;Zl(28&t?"hand-grab":3&t?"hand":this.defaultCanvasCursor)}}let Gc=1;const Hc=new Map,Zc=new Map,Yc=new Map;function Qc(t,e=1,i){Jc(t,i),qc(t,e),Zc.set(t,new hn)}function Jc(t,e){Hc.set(t,Hi.fromColor(e??De.black))}function qc(t,e){Yc.set(t,{value:e,original:e})}function Kc(t){return Hc.get(t)}function Xc(t){return Zc.get(t)}function tu(t){return Yc.get(t).value}function eu(t,e){return Tl(Yc.get(t).original)/(e?Math.max(e.lineScale,1e-4):1)}function iu(t){if(t===Gc)return!1;Gc=t;for(const e of Yc.values())e.value=e.original/t;for(const[t,e]of Zc)e.width=Yc.get(t).value;return!0}function nu(){for(const[t,e]of Yc)e.original=yl.getSize(t,e.original),e.value=e.original/Gc,Zc.has(t)&&(Zc.get(t).width=e.value);for(let[t,e]of Hc)e=e.withColor(yl.getColor(t,e.color)),Hc.set(t,e),Zc.has(t)&&(Zc.get(t).brush=e)}let su;function ru(t){su=t}Io(Ot,(()=>{yl.addEventListener("update",nu)})),Io(Rt,nu);const ou=Lt((()=>_o(Kt)));function au(t){const e=new Set,i=Lt((()=>{_o(t,e),e.clear()}));return t=>{su&&t.document===su&&!e.has(t)&&(e.add(t),i())}}const lu=au(Xt),cu=au(te),uu=au(ee),hu=au(ie),du=au(ne),fu=au(se),pu=new $i;class gu{#de=null;#fe=null;#pe=null;#ge=null;#me=null;#ye=null;#ve=null;#be=null;#xe=!1;#we=!0;#Me=null;#Se=null;#ke=null;#_e=null;#Ie=null;#Ce=null;constructor(t=null){this.#de=t}dispose(){if(this.#ve)for(const t of Array.from(this.children()))t.dispose();this.#ve=this.#be=null,this.#fe=null,this.#Se=this.#Me=null,this.#ke=this.#_e=this.#Ie=this.#Ce=null,this.#pe=null,this.#ge=this.#ye=this.#me=null}applyJSON(t){this.#de=t.id,this.#fe=t.title??null,this.#xe=!!t.hidden;const e=t.children;if(e&&this.supportsChildren)for(const t of e)t&&this.acceptsChild(t)&&t.acceptsParent(this)&&this.#Le(t)}toJSON(){return{id:this.#de,title:this.#fe??void 0,hidden:!!this.#xe||void 0,visible:this.#we,children:this.#ve?Array.from(this.children()):void 0}}static fromJSON(t){const e=new this;return e.applyJSON(t),e}get id(){return this.#de}set id(t){this.#de=t}get title(){return this.#fe}set title(t){this.#fe=t}get document(){return this.#pe}set document(t){this.#pe=t}get parent(){return this.#ge}get firstChild(){return this.#ve}get lastChild(){return this.#be}get nextSibling(){return this.#me}get previousSibling(){return this.#ye}get hasChildren(){return null!=this.#ve}get isFragment(){return 0===this.nodeType||3===this.nodeType}get isDocument(){return 0===this.nodeType}get isLayer(){return 1===this.nodeType}get isElement(){return 2===this.nodeType}get isFilterContainer(){return 3===this.nodeType}get isFilter(){return 4===this.nodeType}get hidden(){return this.#xe}set hidden(t){this.#xe!==t&&(this.#xe=t,this.onVisibilityChanged())}get visible(){return this.#we}set visible(t){this.#we!==t&&(this.#we=t,this.onVisibilityChanged())}get isInvisible(){return this.#xe||!this.#we}onChildAdded(t,e){t.isInvisible||this.invalidate(!0)}onChildRemoved(t){t.isInvisible||this.invalidate(!0)}onChildMoved(t){t.isInvisible||this.invalidate(!1)}onParentChanged(t,e){this.#pe?.onNodeParentChanged(this,e),t&&t.#pe&&!$i.Same(t.globalMatrix,e?.globalMatrix)&&this.invalidateGlobalMatrix(!1)}onSiblingsChanged(){}onVisibilityChanged(){this.invalidateParent(!0,!0)}onChildGraphicsChanged(t,e,i){!i&&t.isInvisible||this.invalidate(e)}onChildMatrixChanged(t){t.isInvisible||this.invalidate(!0)}invalidateLocalMatrix(t){this.#Se&&(this.#Se=null,du(this),t?this.invalidateGlobalMatrix(!0):(this.#Me&&this.invalidateGlobalMatrix(!1),this.#ge?.onChildMatrixChanged(this)))}invalidateGlobalMatrix(t){if(this.#Me=null,fu(this),this.#_e=null,this.#Ce=null,hu(this),!t)for(let t=this.#ve;null!==t;t=t.#me)t.#Me&&t.invalidateGlobalMatrix(!1)}invalidate(t,e){t&&this.invalidateBounds(),this.invalidateGraphics(),this.#ge?.onChildGraphicsChanged(this,t,e)}invalidateParent(t,e){this.#ge?.onChildGraphicsChanged(this,t,e)}contains(t){if(t===this)return!1;do{if((t=t.#ge)===this)return!0}while(null!=t);return!1}bringForward(){if(!this.#me||!this.#ge)return!1;const t=this.#pe;try{t&&(t.preventAdoptAndAbandon=!0),this.#ge.insertAfter(this,this.#me)}finally{t&&(t.preventAdoptAndAbandon=!1)}return!0}sendBackward(){if(!this.#ye||!this.#ge)return!1;const t=this.#pe;try{t&&(t.preventAdoptAndAbandon=!0),this.#ge.insertBefore(this,this.#ye)}finally{t&&(t.preventAdoptAndAbandon=!1)}return!0}bringToFront(){if(!this.#me||!this.#ge)return!1;const t=this.#pe;try{t&&(t.preventAdoptAndAbandon=!0),this.#ge.insertAfter(this,this.#ge.#be)}finally{t&&(t.preventAdoptAndAbandon=!1)}return!0}sendToBack(){if(!this.#ye||!this.#ge)return!1;const t=this.#pe;try{t&&(t.preventAdoptAndAbandon=!0),this.#ge.insertBefore(this,this.#ge.#ve)}finally{t&&(t.preventAdoptAndAbandon=!1)}return!0}remove(){return!!this.#ge&&(this.isFragment?this.detachFromTree():this.#ge.removeChild(this),!0)}get supportsRenderableChildren(){return this.supportsChildren}get supportsContextChildren(){return this.supportsChildren}acceptsParent(t){return!(!t||!t.supportsChildren||this.isDocument)&&(this.isLayer?t.isDocument:this.isElement?t.isLayer||t.isElement:!this.isFilterContainer&&!!this.isFilter&&(t.isFilterContainer||t.isFilter))}acceptsChild(t){return!!this.supportsChildren&&(this.isDocument?t.isLayer:this.isLayer||this.isElement?t.isElement:!(!this.isFilterContainer&&!this.isFilter)&&t.isFilter)}insertAfter(t,e){return null!==e.#me?this.insertBefore(t,e.#me):this.appendChild(t)}insertBefore(t,e){if(t===e||e.#ye===t)return t;if(e.#ge!==this||t.contains(this))throw new Error("Invalid target");const i=t.#ge===this;if(!i){if(!this.acceptsChild(t))throw new Error("Child is not supported");if(!t.acceptsParent(this))throw new Error("Parent is not supported")}const n=t.#ge;if(n)if(n===this){if(t.#me===e)return t;this.#Ne(t)}else n.removeChild(t);t.#ge=this;const s=e.#ye;return e.#ye=t,t.#me=e,t.#ye=s,s?s.#me=t:this.#ve=t,this.#pe?.adoptNode(t),i?(t.onSiblingsChanged(),this.onChildMoved(t)):(t.onParentChanged(this,n),this.onChildAdded(t,n)),t}appendChild(t){if(t===this.#be)return t;if(t===this||t.contains(this))throw new Error("Invalid node");const e=t.#ge===this;if(!e){if(!this.acceptsChild(t))throw new Error("Child is not supported");if(!t.acceptsParent(this))throw new Error("Parent is not supported")}const i=t.#ge;if(i)if(i===this){if(this.#be===t)return t;this.#Ne(t)}else i.removeChild(t);return this.#Le(t),e?(t.onSiblingsChanged(),this.onChildMoved(t)):(t.onParentChanged(this,i),this.onChildAdded(t,i)),t}prependChild(t){return this.#ve?this.insertBefore(t,this.#ve):this.appendChild(t)}insertAdjacentNodes(t,...e){if(0===e.length)return!1;let i=e[0];if(this===i)return!1;let n=!1;const s=this.#pe;let r=!1;null!=s&&s===i.document&&(s.preventAdoptAndAbandon=!0,r=!0);try{switch(t){case"append":if(this.#be===i||!this.acceptsChild(i)||!i.acceptsParent(this)||i.contains(this))return!1;this.#be!==i&&(this.appendChild(i),n=!0);break;case"prepend":if(this.#ve===i||!this.acceptsChild(i)||!i.acceptsParent(this)||i.contains(this))return!1;this.#ve!==i&&(this.prependChild(i),n=!0);break;case"before":if(!this.#ge||this.#ye===i||!this.#ge.acceptsChild(i)||!i.acceptsParent(this.#ge)||i.contains(this.#ge))return!1;this!==i&&this.#ye!==i&&(this.#ge.insertBefore(i,this),n=!0);break;case"after":if(!this.#ge||this.#me===i||!this.#ge.acceptsChild(i)||!i.acceptsParent(this.#ge)||i.contains(this.#ge))return!1;this!==i&&this.#me!==i&&(this.#ge.insertAfter(i,this),n=!0);break;default:return!1}if(e.length>1){const t=i.#ge;for(let s=1;s<e.length;s++)t.acceptsChild(e[s])&&e[s].acceptsParent(t)&&!e[s].contains(t)&&(i!==e[s]&&i.#me!==e[s]&&(t.insertAfter(e[s],i),n=!0),i=e[s])}}finally{s&&r&&(s.preventAdoptAndAbandon=!1)}return n}removeChild(t){if(t===this||t.#ge!==this)throw new Error("Invalid node");return t.isFragment?(t.detachFromTree(),t):(this.#Ne(t),t.onParentChanged(null,this),this.onChildRemoved(t),t)}#Ne(t){this.#ve===t?this.#be===t?this.#ve=this.#be=null:(this.#ve=t.#me,this.#ve.#ye=null):this.#be===t?(this.#be=t.#ye,this.#be.#me=null):(t.#me.#ye=t.#ye,t.#ye.#me=t.#me),t.#ge=t.#me=t.#ye=null,this.#pe?.abandonNode(t)}#Le(t){t.#ge=this,this.#be&&(this.#be.#me=t,t.#ye=this.#be),this.#be=t,this.#ve||(this.#ve=t),this.#pe?.adoptNode(t)}cloneCurrent(){return new this.constructor}cloneProperties(t){t.#fe=this.#fe,t.#xe=this.#xe,t.#we=this.#we,this.#Se&&(t.#Se=this.#Se.clone()),this.#Me&&(t.#Me=this.#Me.clone()),t.#ke=this.#ke,t.#_e=this.#_e,t.#Ie=this.#Ie,t.#Ce=this.#Ce}clone(t=!1){const e=this.cloneCurrent();e.#de=t?null:this.#de,this.cloneProperties(e);for(let i=this.#ve;null!=i;i=i.#me)e.#Le(i.clone(t));return e}*[Symbol.iterator](){for(let t=this.#ve;null!=t;t=t.#me)yield t}*children(t=!1){if(t)for(let t=this.#be;null!=t;t=t.#ye)yield t;else for(let t=this.#ve;null!=t;t=t.#me)yield t}get localMatrix(){return this.isTransformable?this.#Se??=this.computeLocalMatrix():pu}computeLocalMatrix(){return pu}get globalMatrix(){if(this.#Me)return this.#Me;if(!this.isTransformable)return this.#Me=this.#ge?.globalMatrix||pu;const t=this.localMatrix;if(!this.#ge)return this.#Me=t;const e=this.#ge.globalMatrix;return e.isIdentity?this.#Me=t:t.isIdentity?this.#Me=e.clone():this.#Me=e.clone().multiply(t)}getLocalPoint(t,e=!0){const i=this.globalMatrix;return i.isIdentity?t:i.inversePoint(t.x,t.y,e)}getGlobalPoint(t,e=!0){const i=this.globalMatrix;return i.isIdentity?t:i.point(t.x,t.y,e)}localBoundsContainPoint(t){const e=this.globalMatrix;return e&&!e.isIdentity&&(t=e.inversePoint(t.x,t.y)),this.localBounds.contains(t.x,t.y)}get localBounds(){return this.#ke??=this.computeLocalBounds()}get globalBounds(){return this.#_e??=this.computeGlobalBounds()}computeGlobalBounds(){return ki.fromRectangle(this.localBounds,this.globalMatrix)}get localBoundsPoints(){return this.#Ie??=this.computeLocalBoundsPoints()}get globalBoundsPoints(){return this.#Ce??=this.computeGlobalBoundsPoints()}computeGlobalBoundsPoints(){const t=this.localBoundsPoints;if(!t.length)return t;const e=this.globalMatrix;return e.isIdentity?t:e.transformPointArray(t)}computeLocalBoundsPoints(){const t=this.localBounds;return t?[t.topLeft,t.topRight,t.bottomRight,t.bottomLeft]:st}invalidateBounds(){const t=null!=this.#ke;this.#ke=this.#_e=this.#Ie=this.#Ce=null,t&&(uu(this),hu(this))}attachToTree(t){if(!this.isFragment)return!1;const e=this.#ge;return t!==e&&(t&&t.#pe===this.#pe||this.#pe?.abandonNode(this),this.#ge=t,t&&t.#pe?.adoptNode(this),e?.onFragmentDetached(this),this.onParentChanged(t,e),t?.onFragmentAttached(this),!0)}detachFromTree(){return this.attachToTree(null)}onFragmentDetached(t){}onFragmentAttached(t){}get hasFragments(){return!1}get fragments(){return null}}class mu extends gu{constructor(){super(...arguments),this.nodeType=3,this.supportsFilters=!1,this.supportsContext=!1,this.supportsChildren=!0,this.isTransformable=!1,this.isRenderable=!1,this.type="filter-container"}get inputBounds(){return this.parent?.pictureBounds}get outputBounds(){return this.localBounds}get filter(){return this.isInvisible?null:this.lastChild?.filter||null}onParentChanged(t,e){t&&(this.invalidateBounds(),super.onParentChanged(t,e),e&&this.firstChild?.invalidateChain())}onChildRemoved(t){const e=this.firstChild;this.invalidateBounds(),e?e.invalidateChain():this.isInvisible||this.parent?.invalidateFilters()}onChildAdded(t){t.invalidateChain()}onChildMoved(t){this.firstChild.invalidateChain()}onVisibilityChanged(){this.invalidateBounds(),this.parent?.invalidateFilters()}onChildGraphicsChanged(t,e,i){this.invalidateBounds(),!i&&this.isInvisible||this.parent?.invalidateFilters()}computeLocalBounds(){const t=this.inputBounds;if(!t)return wi.ZERO;const e=this.filter;return e&&wi.fromLTRBObject(e.getBounds(t))||t}invalidateGraphics(){}}function yu(t,e,i){if(t.length<2)return i?t:[...t];const n=i?t:[];i&&(t=t.splice(0));const s=t[0].document;if(!s)return n;const r=[s];let o=t.length;for(;r.length>0;){const i=r.pop();if(t.includes(i)&&(n.unshift(i),0==--o))return n;if(i.hasChildren&&r.push(...i.children(e)),i.hasFragments){const t=i.fragments;t?.length&&(1===t.length?r.push(t[0]):(e&&t.reverse(),r.push(...t)))}}return n}function vu(t){const e=new Map;return null!=t.id&&e.set(t.id,t),bu(t,e),e}function bu(t,e){for(const i of t.children()){if(null!=i.id&&e.set(i.id,i),i.hasFragments)for(const t of i.fragments)bu(t,e);i.hasChildren&&bu(i,e)}}function xu(t){const e=t[0].parent;for(let i=1;i<t.length;i++)if(t[i].parent!==e)return!1;return!0}function wu(t){const e=t.parent?.globalMatrix;return!e||e.isIdentity?null:e}function*Mu(t,e){if(t.hasFragments&&!e)for(const i of t.fragments)yield i,yield*Mu(i,e);if(t.hasChildren)for(const i of t.children())yield i,yield*Mu(i,e)}function*Su(t){yield t,yield*Mu(t)}const ku=new Map([["document","Document"],["layer","Layer"],["text","Text"],["clip-group","Clip Group"],["clip-path","Clip Path"],["ellipse","Ellipse"],["group","Group"],["image","Image"],["line","Line"],["mask","Mask"],["path","Path"],["poly","Polyline"],["rect","Rectangle"],["regular-polygon","Polygon"],["star","Star"],["symbol","Symbol"],["text-style","Text Style"],["filter-container","Effects"],["filter:blur","Blur"],["filter:color-adjust","Color adjust"],["filter:drop-shadow","Drop Shadow"]]);function _u(t){let e=t.title;return null==e?ku.get(t.type)||"":(e=e.trim(),""===e?ku.get(t.type)||"":e)}const Iu=ja(Zt);let Cu=!1;function Lu(){return Cu}const Nu=[];function ju(){return Nu}function Tu(){return Nu[0]||null}function zu(){return Nu[Nu.length-1]||null}function Au(){return Nu.length>0}function Pu(t){for(const e of t)e.invalidate(!0);return t}function Du(t){return t&&t.supportsContext&&t.document===su&&(!t.isLayer||null!=(t.previousSibling||t.nextSibling))}function Eu(t,e=!1){if(!Du(t))return!!Nu.length&&(Cu=!1,Zu(0),Iu(),!0);if(Nu[0]===t){if(!Cu||1===Nu.length)return!1;Zu(1)}else Zu(0),Nu.push(t),Cu=e||!t.supportsContextChildren,t.invalidate(!0);return Iu(),!0}function Ou(t){const e=t.filter(Wu);if(0===e.length)return Eu(null);if(1===e.length)return Eu(e[0],!0);Zu(0),Cu=!0,Nu.push(...e),Hu();for(const t of e)t.invalidate(!0);return Iu(),!0}function Ru(){return!!Nu.length&&Eu(function(){if(!Nu.length)return null;let t=zu()?.parent;for(;t&&!t.supportsContext;)t=t.parent;return t||null}(),!1)}function Wu(t){return null!=t&&t.supportsContext&&t.document===su}function Bu(t){if(!Cu||!t.supportsContext||t.document!==su||Nu.indexOf(t)>=0)return!1;for(const e of Nu)if(e.contains(t))return!1;return Nu.push(t),Hu(),t.invalidate(!0),Iu(),!0}function Uu(t){return Nu.includes(t)}function $u(t){return!Cu&&Nu.includes(t)}function Fu(t=!1){if(!Nu.length)return null;let e=Cu?zu()?.parent?.globalMatrix:Nu[0]?.globalMatrix;return!e||e.isIdentity?null:(e=e.clone(),t?e.inverse():e)}function Vu(t){if(!Nu.length)return su===t.document;if(!Cu)return Nu[0].contains(t);for(const e of Nu)if(e===t||e.contains(t))return!0;return!1}function Gu(t){return Nu.length?Cu?t&&1!==Nu.length?Nu.slice().reverse():Nu:Nu[0].children(t):su.children(t)}function Hu(){return!(Nu.length<=1||(yu(Nu,!1,!0),0))}function Zu(t){Pu(Nu.splice(t))}function Yu(){return Nu.length?Cu?Nu.map(Ju):Ju(Nu[0]):null}function Qu(t){if(Cu=!1,Nu.length&&Zu(0),t){if(Nt(t)){for(const e of t){const t=qu(e);Wu(t)&&Nu.push(t)}Cu=Nu.length>0}else{const e=qu(t);e&&Du(e)&&(Nu.push(e),Cu=!e.supportsContextChildren)}Nu.length&&(Hu(),Pu(Nu))}}function Ju(t){return t.id}function qu(t){return su.find(t)}var Ku;Io(Et,(()=>{$o({id:"isolation-context",priority:-1e3,get:Yu,set:Qu})})),Io(Vt,(function(t){if(!Nu.length)return;let e=!1;for(let i=0;i<Nu.length;i++)(Nu[i]===t||t.contains(Nu[i]))&&(Nu.splice(i,1),i--,e=!0);e&&(Nu.length||(Cu=!1),Iu())})),Io(Ut,(()=>{if(!Nu.length)return;const t=ca[la]?.[1]?.get("document");if(t)for(const e of Nu)t.find(e.id)?.invalidate(!0)}));class Xu extends gu{#je=void 0;#Te=null;#ze=null;#Ae=!1;#Pe=null;#De=null;#Ee=!1;#Oe=11;#Ht=1;#Re=!1;#We=null;get supportsContext(){return this.providesPicture}get isolationContour(){return null}dispose(){super.dispose(),this.#We=this.#Oe=null,this.#Te?.dispose(),this.#Te=null,this.#je?.delete(),this.#je=null,this.#Pe?.delete(),this.#Pe=null,this.#ze=this.#De=null}applyJSON(t){this.#Ee=!!t.locked,this.providesPicture&&(this.#Ht=t.opacity??1,this.#Re=!!t.isolate,this.#Oe=t.blendMode??11);const e=t.filters;e&&!this.setInitialFilters(e)&&e.dispose?.(),super.applyJSON(t)}toJSON(){const t=super.toJSON();return this.#Ee&&(t.locked=!0),this.providesPicture&&(1!==this.#Ht&&(t.opacity=this.#Ht),this.#Re&&(t.isolate=!0),11!==this.#Oe&&(t.blendMode=this.#Oe)),this.#Te&&(t.filters=this.#Te),t}cloneProperties(t){super.cloneProperties(t),t.#Ee=this.#Ee,t.#Ht=this.#Ht,t.#Re=this.#Re,t.#Oe=this.#Oe,t.#We=this.#We,t.#je=this.#je?this.#je.clone():this.#je,t.#ze=this.#ze}clone(t=!1){const e=super.clone(t);return this.#Te&&e.setInitialFilters(this.#Te.clone(t)),e}get supportsFilters(){return this.providesPicture}invalidateFilters(){this.#Te&&(cu(this),this.invalidateParent(!0))}get locked(){return this.#Ee}set locked(t){this.#Ee=t}get opacity(){return this.#Ht}set opacity(t){this.#Ht!==t&&this.providesPicture&&(this.#Ht=t,this.#We=null,this.invalidateParent())}get blend(){return this.#Oe}set blend(t){this.#Oe!=t&&this.providesPicture&&(this.#Oe=t,this.#We=null,this.invalidateParent())}get isolate(){return this.#Re}set isolate(t){this.#Re!=t&&this.providesPicture&&(this.#Re=t,this.#We=null,this.invalidateParent())}get composition(){return null==this.#We?this.#We=this.providesPicture?new Oe(this.#Oe,this.#Ht,this.#Re):Oe.NormalComposition:this.#We}isClickable(t){return!this.#Ee&&(t?this.isRenderable&&!this.isInvisible:!this.isInvisibleDrawing)}intersectsRect(t){if(!this.isClickable())return!1;if(this.supportsRenderableChildren){if(!this.hasChildren||!this.globalBounds.intersectsRect(t))return!1;for(const e of this.children())if(e.isClickable()&&e.intersectsRect(t))return!0;return!1}return this.globalBounds.intersectsRect(t)}get isInvisibleDrawing(){return!this.providesPicture||this.isInvisible||0===this.#Ht}get pictureBounds(){return this.#ze??=this.computePictureBounds()}computePictureBounds(){return this.supportsRenderableChildren?this.computePictureBoundsForChildren():this.localBounds}computePictureBoundsForChildren(){return wi.merge(this.#Be())}*#Be(){for(const t of this.children())t instanceof Ku&&t.isRenderable&&!t.isInvisible&&(yield t.pictureAndFiltersBounds.transform(t.localMatrix))}get pictureAndFiltersBounds(){return this.#Ae?this.#De:this.#Te?.outputBounds||this.pictureBounds}get picture(){return void 0===this.#je?this.providesPicture?this.#je=this.computePicture():this.#je=null:this.#je}get providesPicture(){return this.isRenderable}computePicture(){const t=this.pictureBounds,e=new Skia.SkPictureRecorder,i=new qr(e.beginRecording(t)),n=this.drawOnPicture(i,t),s=n?e.finishRecordingAsPicture(n):e.finishRecordingAsPicture(t);return e.delete(),i.dispose(),s}get hasFragments(){return null!=this.#Te}get fragments(){return this.#Te?[this.#Te]:null}get filters(){return this.#Te}set filters(t){this.setFilters(t)}setFilters(t){return!(!this.supportsFilters||this.#Te===t||(this.#Te?.detachFromTree(),t?.attachToTree(this),0))}setInitialFilters(t){return t?!!(t instanceof mu&&this.supportsFilters)&&(this.#Te=t,t.attachToTree(this),!0):(this.#Te=null,!0)}onFragmentAttached(t){this.#Te!==t&&t instanceof mu&&(this.#Te=t,this.invalidate(!0))}onFragmentDetached(t){this.#Te===t&&(this.#Te=null,this.invalidate(!0))}get isFrozen(){return this.#Ae}set isFrozen(t){if(t!==this.#Ae)if(this.#Ae=t,this.#Pe?.delete(),this.#Pe=null,this.#De=null,t){const t=this.picture;t?(this.#Pe=t.clone(),this.#De=wi.fromLTRBObject(t.getBounds())):this.#De=wi.ZERO}else this.invalidateParent(!0)}get frozenPicture(){return this.#Pe}draw(t){if(this.isInvisibleDrawing)return;const e=this.#Ae?this.#Pe:this.picture;e&&t.drawPicture(e,this.composition,this.localMatrix,this.#Te?.filter)}drawWireframe(t){const e=this.localMatrix;e.isIdentity?this.drawOnWireframe(t):(t.save(),t.multiplyMatrix(e),this.drawOnWireframe(t),t.restore())}drawOnPicture(t,e){if(!this.hasChildren)return wi.ZERO;if(Au())for(const e of this.children())e instanceof Ku&&e.isRenderable&&!Uu(e)&&e.draw(t);else for(const e of this.children())e instanceof Ku&&e.isRenderable&&e.draw(t)}drawOnWireframe(t){if(this.hasChildren)if(Au())for(const e of this.children())e instanceof Ku&&!Uu(e)&&e.drawWireframe(t);else for(const e of this.children())e instanceof Ku&&e.drawWireframe(t)}invalidateBounds(){this.#ze=null,super.invalidateBounds(),this.#Te?.invalidateBounds()}invalidateGraphics(){this.#je?.delete(),this.#je=void 0,lu(this)}invalidateGlobalMatrix(t){super.invalidateGlobalMatrix(t),this.#Te?.invalidateGlobalMatrix(!0)}}Ku=Xu;const th=ja(Yt);let eh=null,ih=new Set,nh=null;function sh(){return ih.values()}function rh(){return eh}function oh(){return[...ih]}function ah(){return ih.size}function lh(){return!ih.size}function ch(){if(nh){const t=su.find(nh);if(t?.isLayer)return t;nh=null}for(const t of su.children(!0))if(!t.hidden)return nh=t.id,t;const t=su.lastChild;return nh=t.id,t}function uh(t){return ih.has(t)}function hh(t){if(!ih.size)return!1;if(ih.has(t))return!0;for(const e of ih)if(e.contains(t))return!0;return!1}function dh(t,e){return e?ih.has(t)?!!_h(t)&&(Sh(),!0):(function(t){if(ih.size)return kh()?.nodeType!==t.nodeType?(ih.clear(),void ih.add(t)):(function(t){let e=t.parent;for(;e&&!e.isDocument&&ih.size>0;)ih.has(e)&&ih.delete(e),e=e.parent}(t),function(t){if(!ih.size||!t.hasFragments&&!t.hasChildren)return 0;for(const e of ih)t.contains(e)&&ih.delete(e)}(t),void ih.add(t));ih.add(t)}(t),_h(t),Sh(),!0):!(1===ih.size&&ih.has(t)||(ih.clear(),ih.add(t),_h(t),Sh(),0))}function fh(t){const e=t.length-1;if(e<0)return xh();if(0===e)return dh(t[0]);let i=!1;t=[...t];for(const e of ih){const n=t.indexOf(e);if(n>=0){if(t.splice(n,1),!t.length)break}else i=!0,ih.delete(e)}if(t.length){for(const e of t)ih.add(e);i=!0,_h(t[t.length-1])}else _h()&&(i=!0);return!!i&&(Sh(),!0)}function ph(t,e){if(t===e||t.nodeType!==e.nodeType||t.parent!==e.parent)return dh(e);let i=[],n=!1;for(let s=t.parent?.firstChild;null!=s;s=s.nextSibling){if(!n)if(s===t)n=!0,i.push(s);else{if(s!==e)continue;{n=!0,i.push(s);const r=t;t=e,e=r}}if(i.push(s),s===e)break}return fh(i)}function gh(t,e=!0,i,n){if(!t.isVisible)return!n&&xh();if(n){let n=!1;for(const s of mh(t,e,i))n=!0,ih.has(s)?ih.delete(s):ih.add(s);return n&&(_h(),Sh()),n}const s=ih.size>0;ih.clear();for(const n of mh(t,e,i))ih.add(n);return ih.size?(ih.has(eh)||_h(),Sh(),!0):(eh=null,!!s&&(Sh(),!0))}function*mh(t,e=!0,i){let n,s=null;if(Au())if(Lu()){n=[];for(const t of ju()){const e=t.parent;e&&!n.includes(e)&&n.push(e)}1===n.length&&(n=n[0]),s=ju()}else n=Tu();else n=su;if(Array.isArray(n))for(const r of n)for(const n of yh(t,e,r,s))i&&!i(n)||(yield n);else if(n)for(const r of yh(t,e,n,s))i&&!i(r)||(yield r)}function*yh(t,e,i,n,s){for(const r of i.children(!0))if((!n||-1!==n.indexOf(r))&&!r.isInvisible&&!r.locked&&r.globalBounds.intersectsRect(t))if(r.supportsRenderableChildren){if(!r.hasChildren)continue;e||r.isLayer?yield*yh(t,e,r,n,!1):null!=yh(t,e,r,n,!0).next().value&&(yield r)}else if(yield r,s)return}function vh(t){return!!ih.has(t)&&(ih.delete(t),eh===t&&_h(),Sh(),!0)}function bh(t,e){return e&&ih.has(t)?vh(t):dh(t,e)}function xh(){return!!ih.size&&(eh=null,ih.clear(),Sh(),!0)}function wh(t){return t?eh!==t&&dh(t,!0):xh()}function Mh(t){for(const e of ih)if(t(e))return!0;return!1}function Sh(){Dh(),th()}function kh(){if(!ih.size)return null;const[t]=ih;return t}function _h(t){t??=kh();const e=eh===t;for(eh=t||null;null!=t&&!t.isDocument;){if(t.isLayer)return nh=t.id,e;t=t.parent}return e}function Ih(){return ih.size?[Lh(),eh?.id]:null}function Ch(t){if(nh=null,eh=null,ih.clear(),Dh(),!t)return;let e=null;for(const i of t[0]){const t=su.find(i);t&&(ih.add(t),e=t)}eh=su.find(t[1])??e,eh&&(ih.add(eh),_h(eh))}function Lh(){const t=new Array(ih.size);let e=0;for(const i of ih)t[e++]=i.id;return t}function Nh(){return Th(zh)}function jh(){return Th(Ah)}function*Th(t,e=!0){if(e)for(const e of ih)t(e)&&(yield e);else for(const e of ih)e!==eh&&t(e)&&(yield e)}function zh(t){return t.isTransformable}function Ah(t){return t.isElement}Io(Et,(()=>{$o({id:"selection",priority:-900,get:Ih,set:Ch})})),Io(Vt,(function(t){if(!ih.size)return;let e=!1;for(const i of ih)(i===t||t.contains(i))&&(ih.delete(i),e=!0);e&&(eh&&!ih.has(eh)&&_h(),Sh())})),Io(Zt,(function(){if(!ih.size||!Au())return;let t=!1;if(Lu())for(const e of ih)e.supportsContext&&Uu(e)||(ih.delete(e),t=!0);else{const e=Tu();ih.has(e)&&(ih.delete(e),t=!0);for(const i of ih)e.contains(i)||(ih.delete(i),t=!0)}t&&(eh&&!ih.has(eh)&&_h(),Sh())})),Io(ie,Dh),Io(ne,Dh);let Ph=null;function Dh(){Ph=null}function Eh(){return ih.size?wi.merge(function*(t){for(const e of t)e.isRenderable&&(yield e.globalBounds.bounds)}(ih)):wi.ZERO}class Oh extends Xu{constructor(){super(...arguments),this.nodeType=2,this.#Ue=Be.ZERO,this.#$e=Be.ZERO,this.#B=Be.UNIT,this.#Fe=0,this.#Ve=0,this.#Ge=0,this.#He=0,this.#Ze=0}#Ue;#$e;#B;#Fe;#Ve;#Ge;#He;#Ze;get supportsChildren(){return!1}get isRenderable(){return!0}get isTransformable(){return!0}dispose(){super.dispose(),this.#Ue=this.#$e=this.#B=null}cloneProperties(t){super.cloneProperties(t),this.isTransformable&&(t.#Ue=this.#Ue,t.#$e=this.#$e,t.#B=this.#B,t.#Fe=this.#Fe,t.#Ve=this.#Ve,t.#Ge=this.#Ge,t.#He=this.#He,t.#Ze=this.#Ze)}toJSON(){const t=super.toJSON();if(this.isTransformable&&(this.#Ue.isZero||(t.position=this.#Ue),this.#$e.isZero||(t.anchor=this.#$e),1===this.#B.x&&1===this.#B.y||(t.scale=this.#B),this.#Fe&&(t.skewAngle=this.#Fe),this.#Ve&&(t.skewAxis=this.#Ve),this.#Ge&&(t.rotate=this.#Ge),0!==this.#He)){t.orientation=this.#He;const e=this.autoOrientAngle;e%360!=0&&(t.autoOrientAngle=e)}return t}applyJSON(t){this.isTransformable&&(this.#Ue=t.position??Be.ZERO,this.#$e=t.anchor??Be.ZERO,this.#B=t.scale??Be.UNIT,this.#Fe=t.skewAngle||0,this.#Ve=t.skewAxis||0,this.#Ge=t.rotate||0,this.#He=t.orientation??0),super.applyJSON(t)}get position(){return this.#Ue}set position(t){t instanceof fn&&(t=t.point),this.isTransformable&&(this.#Ue=t,this.invalidateLocalMatrix(!1))}get anchor(){return this.#$e}set anchor(t){this.isTransformable&&(this.#$e=t,this.invalidateLocalMatrix(!1))}get scale(){return this.#B}set scale(t){this.isTransformable&&(this.#B=t,this.invalidateLocalMatrix(!1))}get skewAngle(){return this.#Fe}set skewAngle(t){this.isTransformable&&(this.#Fe=t,this.invalidateLocalMatrix(!1))}get skewAxis(){return this.#Ve}set skewAxis(t){this.isTransformable&&(this.#Ve=t,this.invalidateLocalMatrix(!1))}get rotate(){return this.#Ge}set rotate(t){this.isTransformable&&(this.#Ge=t,this.invalidateLocalMatrix(!1))}get orientation(){return this.#He}set orientation(t){this.#He!==t&&this.isTransformable&&(this.#He=t,this.invalidateLocalMatrix(!1))}get autoOrientAngle(){return 0===this.#He?0:-1===this.#He?180+this.#Ze:this.#Ze}set autoOrientAngle(t){this.setAutoOrientAngle(t)}setAutoOrientAngle(t){return!!this.isTransformable&&(t%=360,this.#Ze!==t&&(this.#Ze=t,0!==this.#He&&this.invalidateLocalMatrix(!1),!0))}get totalRotate(){return this.#Ge+this.autoOrientAngle}computeLocalMatrix(){return(new $i).translate(this.#Ue.x,this.#Ue.y).rotate(this.totalRotate).skewAxis(this.#Fe,this.#Ve).scale(this.#B.x,this.#B.y).translate(-this.#$e.x,-this.#$e.y)}#Ye(){let t=!1;return this.#Ue.isZero||(this.#Ue=Be.ZERO,t=!0),this.#Ge!==-this.autoOrientAngle&&(this.#Ge=-this.autoOrientAngle),0!==this.#Ve?(this.#Ve=0,0!==this.#Fe&&(t=!0)):0!==this.#Fe&&(this.#Fe=0,t=!0),1===this.#B.x&&1===this.#B.y||(this.#B=Be.UNIT,t=!0),this.#$e.isZero||(this.#$e=Be.ZERO,t=!0),t}#Qe(t,e){if(!t||t.isIdentity)return!(!e||!this.#Ye()||(this.invalidateLocalMatrix(),0));const i=e?t:t.clone().multiply(this.localMatrix),{translate:n,rotate:s,scale:r,skew:o}=i.decompose(),a=i.transformInversePoint(n.sub(this.#Ue).negate(),!1);return this.#Ge=s-this.autoOrientAngle,this.#Fe=o,this.#Ve=0,this.#B=r,this.#$e=a,this.invalidateLocalMatrix(),!0}absorbMatrix(t){return!!this.isTransformable&&this.#Qe(t,!1)}setTransformMatrix(t){return!(!this.isTransformable||this.localMatrix.equals(t))&&this.#Qe(t,!0)}get forwardsMatrixIncorporation(){return this.supportsChildren}incorporateMatrix(t,e,i=!0){if(!this.isTransformable){if(!this.hasChildren)return!1;let n=!1;for(const i of this.children())i.incorporateMatrix(t,e,!1)&&(n=!0);return!!n&&(i?this.invalidate(!0):(this.invalidateBounds(),this.invalidateGraphics(),this.invalidateGlobalMatrix(!0)),!0)}return this.localMatrix.isIdentity||(t=t?t.clone().multiply(this.localMatrix):this.localMatrix.clone()),!!e(this,t,e)&&(i?(this.invalidateLocalMatrix(!1),this.parent?.invalidate(!0)):(this.invalidateLocalMatrix(!1),this.invalidateGlobalMatrix(!0)),!0)}get isResizable(){return!1}localResize(t,e){return null}pictureBoundsContainPoint(t){const e=this.globalMatrix;return e&&!e.isIdentity&&(t=e.inversePoint(t.x,t.y)),this.pictureBounds.contains(t.x,t.y)}getElementAt(t,e){if(!this.isClickable(e?.wireframe)||!this.pictureBoundsContainPoint(t))return null;if(!this.supportsChildren)return this;if(!this.hasChildren)return null;let i;for(const n of this.children(!0))if(i=n.getElementAt(t,e))return e.seeThrough||uh(i)?i:this;return null}}class Rh extends Oh{#Je=null;#qe=null;#Ke=1;#Xe=1;#ti=0;#ei=void 0;#ii=void 0;dispose(){super.dispose(),this.#ei?.delete(),this.#ii?.delete(),this.#ei=this.#ii=null,this.#qe?.dispose(),this.#Je=this.#qe=null}toJSON(){const t=super.toJSON();return t.fill=this.#Je,1!==this.#Ke&&(t.fillOpacity=this.#Ke),t.stroke=this.#qe,1!==this.#Xe&&(t.strokeOpacity=this.#Xe),0!==this.#ti&&(t.paintOrder=this.#ti),t}applyJSON(t){this.#Je=t.fill||null,this.#Ke=t.fillOpacity??1,this.#qe=t.stroke||null,this.#Xe=t.strokeOpacity??1,this.#ti=t.paintOrder??0,super.applyJSON(t)}cloneProperties(t){super.cloneProperties(t),t.#Je=this.#Je?this.#Je.clone():null,t.#Ke=this.#Ke,t.#ti=this.#ti,t.#qe=this.#qe?this.#qe.clone():null,t.#Xe=this.#Xe,t.#ii=this.#ii?this.#ii.clone():this.#ii,t.#ei=this.#ei?this.#ei.clone():this.#ei}get paintOrder(){return this.#ti}set paintOrder(t){this.#ti=t,this.invalidate(!1)}get fill(){return this.#Je??=Hi.BLACK}set fill(t){this.#Je=t,this.invalidate(!1)}get fillOpacity(){return this.#Ke}set fillOpacity(t){this.#Ke=t,this.invalidate(!1)}getDefaultPen(){return new hn}get stroke(){return this.#qe??=this.getDefaultPen()}set stroke(t){this.#qe!==t&&(this.#qe?.dispose(),this.#qe=t),this.invalidateOutlinePath(),this.invalidate(!0)}get strokeBrush(){return this.stroke.brush}set strokeBrush(t){const e=this.isStrokeVisible;this.stroke.brush=t,this.invalidate(e!==this.isStrokeVisible)}get strokeOpacity(){return this.#Xe}set strokeOpacity(t){const e=this.isStrokeVisible;this.#Xe=t,this.invalidate(e!==this.isStrokeVisible)}get strokeLineWidth(){return this.stroke.width}set strokeLineWidth(t){this.stroke.width=t,this.invalidateOutlinePath(),this.invalidate(!0)}get strokeLineCap(){return this.stroke.lineCap}set strokeLineCap(t){const e=this.stroke;t!==e.lineCap&&(e.lineCap=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeLineJoin(){return this.stroke.lineJoin}set strokeLineJoin(t){const e=this.stroke;t!==e.lineJoin&&(e.lineJoin=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeMiterLimit(){return this.stroke.miterLimit}set strokeMiterLimit(t){t=n(t,1,Number.POSITIVE_INFINITY);const e=this.stroke;t!==e.miterLimit&&(e.miterLimit=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeDashArray(){return this.stroke.dashes}set strokeDashArray(t){const e=this.stroke;t!==e.dashes&&(e.dashes=t,this.invalidateOutlinePath(),this.invalidate(!1))}get strokeDashOffset(){return this.stroke.offset}set strokeDashOffset(t){const e=this.stroke;t!==e.offset&&(e.offset=t,e.dashes.length>0&&(this.invalidateOutlinePath(),this.invalidate(!1)))}get strokeDashPathLength(){return this.stroke.dashPathLength}set strokeDashPathLength(t){t??=0;const e=this.stroke;t!==e.dashPathLength&&(e.dashPathLength=t,e.dashes.length>0&&(this.invalidateOutlinePath(),this.invalidate(!1)))}get strokeAlign(){return this.stroke.align}set strokeAlign(t){const e=this.stroke;t!==e.align&&(e.align=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeEffect(){return this.stroke.effect}set strokeEffect(t){const e=this.stroke;t!==e.effect&&(e.effect=t,this.invalidateOutlinePath(),this.invalidate(!0))}get strokeProfile(){return this.stroke.profile}set strokeProfile(t){const e=this.stroke;t!==e.profile&&(e.profile=t,this.invalidateOutlinePath(),this.invalidate(!0))}computePictureBounds(){return this.getStrokeBounds(this.localBounds)}getStrokeBounds(t){return this.isStrokeVisible?this.stroke.getInflatedBounds(t):t}drawOnPicture(t,e){let i,n;return 0===this.#ti?(i=this.drawFill(t),n=this.drawStroke(t)):(n=this.drawStroke(t),i=this.drawFill(t)),n||i?e:wi.ZERO}drawOnWireframe(t){const e=this.localPath;e&&!e.isEmpty&&t.drawWireframePath(e)}drawFill(t){if(this.isFillVisible){const e=this.localPath;return!(!e||e.isEmpty||(t.drawPathDirect(e,Xr.apply(this.fill,this.#Ke)),0))}return!1}drawStroke(t){if(this.isStrokeVisible){const e=this.stroke;if(e.isUniform){const i=this.localPath;return!(!i||i.isEmpty||(t.drawPathDirect(i,Xr.apply(e,this.#Xe)),0))}{const i=this.outlinePath;return!(!i||i.isEmpty||(t.drawPathDirect(i,Xr.apply(e.brush,this.#Xe)),0))}}return!1}get globalPath(){if(void 0===this.#ii){const t=this.globalMatrix;this.#ii=this.localPath?.copy()||null,this.#ii&&!t.isIdentity&&this.#ii.transform(t)}return this.#ii}get pathLength(){return this.localPath?.length||0}get outlinePath(){return void 0===this.#ei&&(this.#ei=this.stroke.outlinePath(this.localPath)),this.#ei}computeGlobalBoundsPoints(){return super.computeGlobalBoundsPoints()}invalidateOutlinePath(){this.#ei?.delete(),this.#ei=void 0}invalidateGlobalPath(){this.#ii?.delete(),this.#ii=void 0}invalidateGlobalMatrix(t){this.invalidateGlobalPath(),super.invalidateGlobalMatrix(t)}invalidateBounds(){this.invalidateGlobalPath(),super.invalidateBounds()}isGlobalPointOnPaintedStroke(t){return this.isLocalPointOnPaintedStroke(this.getLocalPoint(t))}isLocalPointOnPaintedStroke(t){if(0===this.#Xe||!this.stroke.isVisible)return!1;const e=this.outlinePath;return null!=e&&!e.isEmpty&&e.contains(t.x,t.y)}isGlobalPointOnPaintedFill(t){return this.isLocalPointOnPaintedFill(this.getLocalPoint(t))}isLocalPointOnPaintedFill(t){if(0===this.#Ke||!this.fill.isVisible)return!1;const e=this.localPath;return null==e||e.isEmpty?null:e.contains(t.x,t.y)}get isVisible(){return this.opacity>0&&(this.isFillVisible||this.isStrokeVisible)}get isInvisibleDrawing(){return super.isInvisibleDrawing||!(this.isFillVisible||this.isStrokeVisible)}get isStrokeVisible(){return this.strokeOpacity>0&&this.stroke.isVisible}get isFillVisible(){return this.fillOpacity>0&&this.fill.isVisible}intersectsRect(t){return!(this.isInvisible||this.locked||!this.isFillVisible&&!this.isStrokeVisible)&&!!this.globalBounds.intersectsRect(t)&&this.globalPath?.intersectsRect(t,!1)}getElementAt(t,e){if(this.locked||(e.wireframe?this.hidden||!this.visible:this.isInvisible))return null;if(null!=e.filter&&!e.filter(this,t))return null;if(e.boundsOnly&&this.localBoundsContainPoint(t))return this.isFillVisible||this.isStrokeVisible?this:null;if(t=this.getLocalPoint(t),!this.pictureBounds.contains(t.x,t.y))return null;if(e.wireframe)return this.isLocalPointOnPaintedFill(t)?this:null;const i=this.localBounds;return 0===i.width?0===i.height?null:this.isLocalPointOnPaintedStroke(t)?this:null:0===i.height?this.isLocalPointOnPaintedStroke(t)?this:null:this.isLocalPointOnPaintedFill(t)||this.isLocalPointOnPaintedStroke(t)?this:null}}class Wh extends Rh{constructor(t,e){super(e),this._shape=t}get forwardsMatrixIncorporation(){return!0}get shape(){return this._shape}set shape(t){t!==this._shape&&(this._shape=t,this.invalidateShape())}setShapeMatrix(t){return!!this._shape.setMatrix(t,!0)&&(this.invalidateShape(),!0)}get fillRule(){return this._shape.fillRule}set fillRule(t){const e=this._shape;e.fillRule!==t&&(e.fillRule=t,this.invalidateShape())}applyJSON(t){this._shape=t.shape,t.fillRule&&(this._shape.fillRule=t.fillRule),super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.shape=this._shape,t}get isResizable(){return!0}get localPath(){return this._shape.path}get pathLength(){return this._shape.pathLength}get localBounds(){return this._shape.bounds}computeLocalBounds(){return this._shape.bounds}invalidateShape(){this.invalidateGlobalPath(),this.invalidateOutlinePath(),this.invalidate(!0)}dispose(){super.dispose(),this._shape?.dispose(),this._shape=null}cloneCurrent(){return new this.constructor(this._shape.clone())}}class Bh{constructor(t,e,i,n){this.id=t,this.handler=i,this.groups=null!=n?Array.isArray(n)?n:[n]:null,"string"==typeof e?(this.getValue=t=>t[e],this.setValue=(t,n)=>!i.sameValue(n,t[e])&&(t[e]=n,!0)):(this.getValue=e[0],this.setValue=e[1])}sameValue(t,e){return this.handler.sameValue(this.getValue(t),e)}cloneValue(t){return this.handler.cloneValue(this.getValue(t))}}function Uh(t,e,i=0){return t+e-i}function $h(t,e,i=Be.ZERO){return new Be(t.x+e.x-i.x,t.y+e.y-i.y)}function Fh(t,e,i){if(t.length!==e.length)return i;const n=[];for(let s=0,r=t.length;s<r;s++)n[s]=$h(t[s],e[s],i[s]);return n}function Vh(t,e,i){return new fn($h(t.point,e.point,i.point),i.type,i.joint,i.handleIn?$h(t.handleIn,e.handleIn,i.handleIn):null,i.handleOut?$h(t.handleOut,e.handleOut,i.handleOut):null)}const Gh={interpolate:so,sameValue:hd,cloneValue:It,mix:Uh},Hh={interpolate:function(t,e,i=.5){return Math.round(t+i*(e-t))},sameValue:hd,cloneValue:It,mix:Uh},Zh={interpolate:ro,sameValue:hd,cloneValue:It,mix:Uh},Yh={interpolate:oo,sameValue:hd,cloneValue:It,mix:Uh},Qh={interpolate:lo,sameValue:cd,cloneValue:It,mix:$h},Jh={interpolate:function(t,e,i=.5){return[lo(t[0],e[0],i),lo(t[1],e[1],i)]},sameValue:ud,cloneValue:dd,mix:Fh},qh={interpolate:function(t,e,i=.5){if(0===i||t.equals(e))return t;if(1===i)return e;const n=bn(t,e,i);return new fn(new Be(n.x,n.y),0,0)},sameValue:function(t,e){return(t instanceof fn?t.point:t).equals(e instanceof fn?e.point:e)},cloneValue:fd,mix:function(t,e,i){return $h(t instanceof fn?t.point:t,e instanceof fn?e.point:e,i instanceof fn?i.point:i)}},Kh={interpolate:function(t,e,i=.5){return 0===i||t.equals(e)?t:1===i?e:new We(so(t.x,e.x,i),so(t.y,e.y,i),i>=1?e.angle:t.angle)},sameValue:cd,cloneValue:fd},Xh={interpolate:function(t,e,i=.5){if(t.length!==e.length)return ao(t,e,i).slice();const n=[],s=t.length;for(let r=0;r<s;r++)n.push(lo(t[r],e[r],i));return n},sameValue:ud,cloneValue:dd,mix:Fh},td={interpolate:function(t,e,i=.5){return i<=0?t:i>=1?e:new De(co(t.r,e.r,i),co(t.g,e.g,i),co(t.b,e.b,i),function(t,e,i=.5){return null==t&&(t=1),null==e&&(e=1),n(o(t+i*(e-t)),0,1)}(t.a,e.a,i))},sameValue:cd,cloneValue:It,mix:function(t,e){const i=t.a+e.a;return new De(Math.round((t.r*t.a+e.r*e.a)/i),Math.round((t.g*t.a+e.g*e.a)/i),Math.round((t.b*t.a+e.b*e.a)/i),i/2)}},ed={interpolate:function(t,e,i=.5){return 0===i?t:1===i?e:uo.hasOwnProperty(t.type)&&uo[t.type].hasOwnProperty(e.type)?uo[t.type][e.type](t,e,i):ao(t,e,i)},sameValue:cd,cloneValue:It},id={interpolate:ao,sameValue:hd,cloneValue:It},nd={interpolate:ao,sameValue:cd,cloneValue:It},sd=id,rd=id,od={interpolate:function(t,e,i=.5){if(0===i)return t.slice();if(1===i)return e.slice();if(t.length!==e.length)if(0===t.length)t=new Array(e.length).fill(0);else if(0===e.length)e=new Array(t.length).fill(0);else{const i=E(t.length,e.length);t=new Array(Math.trunc(i/t.length)).fill(t).flat(),e=new Array(Math.trunc(i/e.length)).fill(e).flat()}const n=[],s=t.length;for(let r=0;r<s;r++)n.push(ro(t[r],e[r],i));return n},sameValue:function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},cloneValue:dd},ad={interpolate:function(t,e,i=.5){if(0===i)return t.slice();if(1===i)return e.slice();if(t.length!==e.length)return ao(t,e,i).slice();const n=t.length,s=[];for(let r=0;r<n;r++)s.push(xo(t[r],e[r],i));return s},sameValue:ud,cloneValue:function(t){return t.map(fd)},mix:function(t,e,i){if(t.length!==e.length)return i;const n=[];for(let s=0,r=t.length;s<r;s++)n[s]=Vh(t[s],e[s],i[s]);return n}},ld={interpolate:function(t,e,i=.5){if(0===i)return t.clone();if(1===i)return e.clone();let n=t.value,s=e.value;if("number"==typeof t.value){if("number"==typeof e.value)return new Qs(ro(t.value,e.value,i));n=[t.value,t.value,t.value,t.value]}else"number"==typeof e.value&&(s=[e.value,e.value,e.value,e.value]);const r=[];for(let t=0;t<4;t++)r.push(ro(n[t],s[t],i));return new Qs(r)},sameValue:cd,cloneValue:fd};function cd(t,e){return t.equals(e)}function ud(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}function hd(t,e){return t===e}function dd(t){return t.slice()}function fd(t){return t.clone()}const pd=new Map;function gd(t,e=!0){if(pd.has(t)||pd.set(t,new Map),e){const e=pd.get(t),i=Object.getPrototypeOf(t);if(i&&pd.has(i))for(const t of pd.get(i).values())t instanceof Bh&&e.set(t.id,t)}}function md(t,...e){gd(t,!1);const i=pd.get(t);for(const t of e)t instanceof Bh&&i.set(t.id,t)}function yd(t,e){const i=pd.get(t);if(i)for(const t of Array.from(i.values()))e(t)&&i.delete(t.id)}function vd(t,e){return pd.get(t?.constructor)?.has(e.id)}function bd(t){return pd.get(t?.constructor)?.values()}let xd=0;const wd=Lt((()=>{xd&&clearTimeout(xd),xd=setTimeout(Sd,60)})),Md=new Set;function Sd(){xd=0,Md.size&&(_o(de,Md),Md.clear())}function kd(t){if(Array.isArray(t))for(const e of t)Md.add(e);else Md.add(t);wd()}let _d=(t,e,i)=>e.setValue(t,i);function Id(t,e,i){return!!vd(t,e)&&Cd(t,e,i)}function Cd(t,e,i){return!!_d(t,e,i)&&(e.groups&&kd(e.groups),!0)}function Ld(t,e,i){let n=!1;for(const s of t)vd(s,e)&&_d(s,e,i(s))&&(n=!0);return n&&e.groups&&kd(e.groups),n}const Nd=new Bh("node.compositing.opacity","opacity",Yh,5),jd=new Bh("node.compositing.blend","blend",id,5),Td=new Bh("node.compositing.isolate","isolate",sd,5);var zd=Object.freeze({__proto__:null,blend:jd,isolate:Td,opacity:Nd});const Ad=new Bh("node.transform.position","position",qh,1),Pd=new Bh("node.transform.anchor","anchor",Qh,1),Dd=new Bh("node.transform.scale","scale",Qh,1),Ed=new Bh("node.transform.rotate","rotate",Gh,1),Od=new Bh("node.transform.skew-angle","skewAngle",Gh,1),Rd=new Bh("node.transform.skew-axis","skewAxis",Gh,1),Wd=new Bh("node.transform.orientation","orientation",id,1);var Bd=Object.freeze({__proto__:null,anchor:Pd,orientation:Wd,position:Ad,rotate:Ed,scale:Dd,skewAngle:Od,skewAxis:Rd});const Ud=new Bh("node.sizable.pin","pin",nd,4),$d=new Bh("shape.path.nodes","nodes",ad,4),Fd=new Bh("vector.fill.rule","fillRule",id,4),Vd=new Bh("node.layer.z-order","zOrder",Hh,4),Gd=new Bh("node.motion.distance","travel",Gh);new Bh("node.motion.orientation","orientation",id,1);const Hd=new Bh("node.motion.oriented-point","position",Kh,1),Zd=new Bh("vector.fill.opacity","fillOpacity",Yh,2),Yd=new Bh("vector.fill.brush","fill",ed,2);var Qd=Object.freeze({__proto__:null,brush:Yd,opacity:Zd,rule:Fd});const Jd=new Bh("vector.stroke.opacity","strokeOpacity",Yh,3),qd=new Bh("vector.stroke.brush","strokeBrush",ed,3),Kd=new Bh("vector.stroke.line-width","strokeLineWidth",Zh,3),Xd=new Bh("vector.stroke.line-join","strokeLineJoin",id,3),tf=new Bh("vector.stroke.line-cap","strokeLineCap",id,3),ef=new Bh("vector.stroke.miter-limit","strokeMiterLimit",Zh,3),nf=new Bh("vector.stroke.dash-array","strokeDashArray",od,3),sf=new Bh("vector.stroke.dash-offset","strokeDashOffset",Gh,3),rf=new Bh("vector.stroke.dash-path-length","strokeDashPathLength",sd,3),of=new Bh("vector.stroke.paint-order","paintOrder",id,3),af=new Bh("vector.stroke.align","strokeAlign",id,3),lf=new Bh("vector.stroke.profile","strokeProfile",id,3),cf=new Bh("vector.stroke.effect","strokeEffect",id,3);var uf=Object.freeze({__proto__:null,align:af,brush:qd,dashArray:nf,dashOffset:sf,dashPathLength:rf,effect:cf,lineCap:tf,lineJoin:Xd,lineWidth:Kd,miterLimit:ef,opacity:Jd,paintOrder:of,profile:lf}),hf=Object.freeze({__proto__:null,fill:Qd,stroke:uf});const df=new Bh("paragraph.style.width","width",Zh,4),ff=new Bh("paragraph.style.height","height",Zh,4),pf=new Bh("paragraph.style.auto-width","autoWidth",sd,4),gf=new Bh("paragraph.style.auto-height","autoHeight",sd,4),mf=new Bh("paragraph.style.align","align",id,4),yf=new Bh("paragraph.style.valign","valign",id,4),vf=new Bh("paragraph.style.direction","direction",id,4);var bf=Object.freeze({__proto__:null,align:mf,autoHeight:gf,autoWidth:pf,direction:vf,height:ff,valign:yf,width:df});const xf=new Bh("text.range.start","rangeStart",Yh,7),wf=new Bh("text.range.end","rangeEnd",Yh,7),Mf=new Bh("text.range.length","rangeLength",Yh,7),Sf=new Bh("text.range.type","rangeType",id,7);var kf=Object.freeze({__proto__:null,end:wf,length:Mf,start:xf,type:Sf});const _f=new Bh("text.source.content","text",rd,7),If=new Bh("text.style.font-id","fontId",rd,7),Cf=new Bh("text.style.font-size","fontSize",Zh,7),Lf=new Bh("text.style.letter-spacing","letterSpacing",Zh,7),Nf=new Bh("text.style.word-spacing","wordSpacing",Zh,7),jf=new Bh("text.style.line-height","lineHeight",Zh,7),Tf=new Bh("text.style.baseline-shift","baselineShift",Gh,7);var zf=Object.freeze({__proto__:null,baselineShift:Tf,fontId:If,fontSize:Cf,letterSpacing:Lf,lineHeight:jf,wordSpacing:Nf});const Af=new Bh("element.reference.id","reference",rd,4),Pf=new Bh("element.reference.seek","seek",Gh,4);var Df=Object.freeze({__proto__:null,id:Af,seek:Pf});const Ef=new Bh("element.clip-group.is-alpha-mask","isAlphaMask",sd,4);var Of=Object.freeze({__proto__:null,isAlphaMask:Ef}),Rf=Object.freeze({__proto__:null,nodes:$d,rule:Fd});const Wf=new Bh("element.rect.width","width",Zh,4),Bf=new Bh("element.rect.height","height",Zh,4),Uf=new Bh("element.rect.radius","radius",ld,4);var $f=Object.freeze({__proto__:null,height:Bf,pin:Ud,radius:Uf,width:Wf});const Ff=new Bh("element.ellipse.width","width",Zh,4),Vf=new Bh("element.ellipse.height","height",Zh,4);var Gf=Object.freeze({__proto__:null,height:Vf,pin:Ud,width:Ff});const Hf=new Bh("element.image.id","imageId",rd,4),Zf=new Bh("element.image.width","width",Zh,4),Yf=new Bh("element.image.height","height",Zh,4);var Qf=Object.freeze({__proto__:null,height:Yf,id:Hf,pin:Ud,width:Zf});const Jf=new Bh("element.line.points","points",Jh,4);var qf=Object.freeze({__proto__:null,points:Jf});const Kf=new Bh("element.poly.points","points",Xh,4),Xf=new Bh("element.poly.closed","isClosed",sd,4);var tp=Object.freeze({__proto__:null,closed:Xf,points:Kf}),ep=Object.freeze({__proto__:null,nodes:$d});const ip=new Bh("element.regular-polygon.sides","sides",Zh,4),np=new Bh("element.regular-polygon.radius","radius",Zh,4),sp=new Bh("element.regular-polygon.corner-radius","cornerRadius",Gh,4),rp=new Bh("element.regular-polygon.angle","angle",Gh,4);var op=Object.freeze({__proto__:null,angle:rp,cornerRadius:sp,pin:Ud,radius:np,sides:ip});const ap=new Bh("element.star.sides","sides",Zh,4),lp=new Bh("element.star.outer-radius","outerRadius",Zh,4),cp=new Bh("element.star.inner-radius","innerRadius",Zh,4),up=new Bh("element.star.outer-corner-radius","outerCornerRadius",Gh,4),hp=new Bh("element.star.inner-corner-radius","innerCornerRadius",Gh,4),dp=new Bh("element.star.outer-rotate","outerRotate",Gh,4),fp=new Bh("element.star.inner-rotate","innerRotate",Gh,4),pp=new Bh("element.star.angle","angle",Gh,4);var gp=Object.freeze({__proto__:null,angle:pp,innerCornerRadius:hp,innerRadius:cp,innerRotate:fp,outerCornerRadius:up,outerRadius:lp,outerRotate:dp,pin:Ud,sides:ap});const mp=new Bh("element.symbol.pan","pan",Qh,4),yp=new Bh("element.symbol.zoom","zoom",Zh,4),vp=new Bh("element.symbol.rotation","rotation",Gh,4),bp=new Bh("element.symbol.align","align",Qh,4),xp=new Bh("element.symbol.width","width",Zh,4),wp=new Bh("element.symbol.height","height",Zh,4);var Mp=Object.freeze({__proto__:null,align:bp,height:wp,pan:mp,pin:Ud,rotation:vp,width:xp,zoom:yp}),Sp=Object.freeze({__proto__:null,clipGroup:Of,clipPath:Rf,ellipse:Gf,image:Qf,line:qf,path:ep,poly:tp,rect:$f,reference:Df,regularPolygon:op,star:gp,symbol:Mp});const kp=new Bh("filter.blur.radius","radius",Zh,6);var _p=Object.freeze({__proto__:null,radius:kp});const Ip=new Bh("filter.color-adjust.brightness","brightness",Zh,6),Cp=new Bh("filter.color-adjust.contrast","contrast",Zh,6),Lp=new Bh("filter.color-adjust.saturate","saturate",Zh,6),Np=new Bh("filter.color-adjust.hue-rotate","hueRotate",Gh,6),jp=new Bh("filter.color-adjust.invert","invert",Zh,6),Tp=new Bh("filter.color-adjust.grayscale","grayscale",Zh,6),zp=new Bh("filter.color-adjust.sepia","sepia",Zh,6);var Ap=Object.freeze({__proto__:null,brightness:Ip,contrast:Cp,grayscale:Tp,hueRotate:Np,invert:jp,saturate:Lp,sepia:zp});const Pp=new Bh("filter.drop-shadow.blur","blur",Zh,6),Dp=new Bh("filter.drop-shadow.offset","offset",Qh,6),Ep=new Bh("filter.drop-shadow.color","color",td,6);var Op=Object.freeze({__proto__:null,blur:Pp,color:Ep,offset:Dp});const Rp=[1,2,3,4,5,6,7],Wp=new wi(0,0,100,100);function Bp(t,e,i){return i&&e instanceof nn?e.toRelative(i.localBounds).toAbsolute(Wp):t.handler.cloneValue(e)}class Up{constructor(){this.values=new Map([[Nd,1],[jd,11],[Zd,1],[Yd,Hi.fromColor("#bababa")],[Fd,1],[Jd,1],[qd,Hi.BLACK],[tf,0],[Xd,0],[ef,4],[Kd,1],[nf,[]],[sf,0],[rf,0],[of,0],[af,0],[cf,null],[If,"SourceSans3Roman-Regular"],[Cf,24],[jf,1.2],[Lf,0],[Nf,0],[Tf,0],[mf,0],[yf,0],[Uf,new Qs(0)],[ip,5],[sp,0],[ap,5],[fp,0],[dp,0],[hp,0],[up,0]]),this.customDecorators=new Map([]),this.customUpdaters=new Map([[Yd,Bp],[qd,Bp]]),this.starRadiusRatio=.4}dispose(){this.values.clear()}hasValue(t){return this.values.has(t)}getValue(t){return this.values.get(t)}setValue(t,e){return!!this.values.has(t)&&(this.customUpdaters.has(t)&&(e=this.customUpdaters.get(t)(t,e)),this.values.set(t,e),!0)}update(t){if(!t)return;const e=this.customUpdaters;for(const i of this.values.keys())if(vd(t,i)){const n=i.getValue(t);if(void 0!==n){let s;s=e.has(i)?e.get(i)(i,n,t):i.handler.cloneValue(n),this.values.set(i,s)}}this.updateCustomValues(t)}decorate(t){if(!t)return;const e=this.customDecorators;for(const[i,n]of this.values.entries())vd(t,i)&&(e.has(i)?e.get(i)(t,i,n):i.setValue(t,i.handler.cloneValue(n)))}decorateParagraphStyle(t){return t.align=this.paragraphAlign,t.valign=this.paragraphVAlign,t}decorateTextStyle(t,e=!0){t.fillOpacity=this.fillOpacity,t.fill=this.#ni(this.fill),t.strokeOpacity=this.strokeOpacity,t.strokeBrush=this.#ni(this.strokeBrush),t.strokeLineWidth=this.strokeLineWidth,t.strokeMiterLimit=this.strokeMiterLimit,t.strokeLineCap=this.strokeLineCap,t.strokeLineJoin=this.strokeLineJoin,t.paintOrder=this.paintOrder;const i=!t.fill.isVisible;return i||0===t.fillOpacity?0!==t.strokeOpacity&&t.strokeBrush.isVisible?(t.strokeLineWidth<=0||t.strokeLineWidth>1)&&(t.strokeLineWidth=1):(i&&(t.fill=Hi.BLACK),0===t.fillOpacity&&(t.fillOpacity=1),t.strokeLineWidth=0):t.strokeLineWidth=0,t.strokeDashOffset=0,t.strokeDashArray=[],t.fontId=this.fontId,t.fontSize=this.fontSize,t.letterSpacing=this.letterSpacing,t.wordSpacing=this.wordSpacing,t.lineHeight=this.lineHeight,t}#ni(t){return t instanceof nn?Hi.BLACK:t}updateCustomValues(t){if("start"===t.type){const e=t;this.starRadiusRatio=e.innerRadius/e.outerRadius,(!i(this.starRadiusRatio)||this.starRadiusRatio<=0)&&(this.starRadiusRatio=.4)}}get opacity(){return this.values.get(Nd)}set opacity(t){this.setValue(Nd,t)}get blend(){return this.values.get(jd)}set blend(t){this.setValue(jd,t)}get isolate(){}get fill(){return this.values.get(Yd)}set fill(t){this.setValue(Yd,t)}get fillOpacity(){return this.values.get(Zd)}set fillOpacity(t){this.setValue(Zd,t)}get fillRule(){return this.values.get(Fd)}set fillRule(t){this.setValue(Fd,t)}get strokeBrush(){return this.values.get(qd)}set strokeBrush(t){this.setValue(qd,t)}get strokeOpacity(){return this.values.get(Jd)}set strokeOpacity(t){this.setValue(Jd,t)}get strokeLineCap(){return this.values.get(tf)}set strokeLineCap(t){this.setValue(tf,t)}get strokeLineJoin(){return this.values.get(Xd)}set strokeLineJoin(t){this.setValue(Xd,t)}get strokeMiterLimit(){return this.values.get(ef)}set strokeMiterLimit(t){this.setValue(ef,t)}get strokeLineWidth(){return this.values.get(Kd)}set strokeLineWidth(t){this.setValue(Kd,t)}get strokeDashOffset(){return this.values.get(sf)}set strokeDashOffset(t){this.setValue(sf,t)}get strokeDashArray(){return this.values.get(nf)}set strokeDashArray(t){this.setValue(nf,t)}get strokeDashPathLength(){return this.values.get(rf)}set strokeDashPathLength(t){this.setValue(rf,t)}get paintOrder(){return this.values.get(of)}set paintOrder(t){this.setValue(of,t)}get strokeAlign(){return this.values.get(af)}set strokeAlign(t){this.setValue(af,t)}get strokeEffect(){return this.values.get(cf)}set strokeEffect(t){this.setValue(cf,t)}copyFillToStroke(t=!1){this.strokeBrush=this.fill,t||(this.strokeOpacity=this.fillOpacity)}copyStrokeToFill(t=!1){this.fill=this.strokeBrush,t||(this.fillOpacity=this.strokeOpacity)}swapStrokeFill(t=!1){let e=this.strokeBrush;this.strokeBrush=this.fill,this.fill=e,t||(e=this.strokeOpacity,this.strokeOpacity=this.fillOpacity,this.fillOpacity=e)}changeStrokeBrushType(t){return t!==this.strokeBrush.type&&(this.strokeBrush=ln(this.strokeBrush,t,this.brushBounds),!0)}changeFillBrushType(t){return t!==this.fill.type&&(this.fill=ln(this.fill,t,this.brushBounds),!0)}get brushBounds(){return Wp}get fontFeatures(){return 0}get fontId(){return this.values.get(If)}set fontId(t){this.setValue(If,t)}get fontSize(){return this.values.get(Cf)}set fontSize(t){this.setValue(Cf,t)}get lineHeight(){return this.values.get(jf)}set lineHeight(t){this.setValue(jf,t)}get letterSpacing(){return this.values.get(Lf)}set letterSpacing(t){this.setValue(Lf,t)}get wordSpacing(){return this.values.get(Nf)}set wordSpacing(t){this.setValue(Nf,t)}get baselineShift(){return this.values.get(Tf)}set baselineShift(t){this.setValue(Tf,t)}get paragraphAlign(){return this.values.get(mf)}set paragraphAlign(t){this.setValue(mf,t)}get paragraphVAlign(){return this.values.get(yf)}set paragraphVAlign(t){this.setValue(yf,t)}get rectRadius(){return this.values.get(Uf)}set rectRadius(t){this.setValue(Uf,t)}setRectRadiusType(t){const e=this.rectRadius;t?e.isSimple&&(this.rectRadius=e.split()):e.isSimple||(this.rectRadius=e.join())}get regularPolygonSides(){return this.values.get(ip)}set regularPolygonSides(t){this.setValue(ip,t)}get regularPolygonCornerRadius(){return this.values.get(sp)}set regularPolygonCornerRadius(t){this.setValue(sp,t)}get starSides(){return this.values.get(ap)}set starSides(t){this.setValue(ap,t)}get starInnerRotate(){return this.values.get(fp)}set starInnerRotate(t){this.setValue(fp,t)}get starOuterRotate(){return this.values.get(dp)}set starOuterRotate(t){this.setValue(dp,t)}get starInnerCornerRadius(){return this.values.get(hp)}set starInnerCornerRadius(t){this.setValue(hp,t)}get starOuterCornerRadius(){return this.values.get(up)}set starOuterCornerRadius(t){this.setValue(up,t)}}const $p=1e-4;function*Fp(t,e,i,n,s){(i.x||i.y)&&(e=e.clone().translate(i.x?t.localBounds.width:0,i.y?t.localBounds.height:0)),(e.tx||e.ty)&&(yield[Pd,t.anchor.shifted(-e.tx,-e.ty)]);const r=t.localBounds.transform(e,!1);yield[n,r.width||$p],yield[s,r.height||$p]}class Vp extends Wh{get type(){return"ellipse"}get width(){return this._shape.width}set width(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.width&&(this._shape.width=t,this.invalidateShape())}get height(){return this._shape.height}set height(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.height&&(this._shape.height=t,this.invalidateShape())}get pin(){return this._shape.pin}set pin(t){this._shape.pin.equals(t)||(this._shape.pin=t,this.invalidateShape())}applyJSON(t){super.applyJSON(t)}*localResize(t){yield*function*(t,e,i,n){(e.tx||e.ty)&&(yield[Pd,t.anchor.shifted(-e.tx,-e.ty)]);const s=new wi(-t.width/2,-t.height/2,t.width,t.height).transform(e,!1);yield[i,s.width||$p],yield[n,s.height||$p]}(this,t,Ff,Vf)}}var Gp;class Hp extends Oh{get supportsChildren(){return!0}get type(){return"group"}computeLocalBounds(){return this.hasChildren?wi.fromIterablePoints(this.#si()):wi.ZERO}*#si(){for(const t of this.children()){if(t.isInvisible)continue;const e=t.localBounds;0===e.width&&0===e.height||(yield*e.cornerPoints(t.localMatrix))}}computeGlobalBounds(){return this.hasChildren?super.computeGlobalBounds():ki.ZERO}computeLocalBoundsPoints(){if(!this.hasChildren)return st;const t=wo(),e=Ti([]);return Ni(this.globalMatrix.value,e),this.#ri(this,t,e),So(t,st)}#ri(t,e,i){for(const n of t.children())if(n instanceof Gp)this.#ri(n,e,i);else for(let t of n.globalBoundsPoints)Mo(e,Oi(i,t.x,t.y))}computeGlobalBoundsPoints(){if(!this.hasChildren)return st;const t=wo();return this.#oi(this,t),So(t,st)}#oi(t,e){for(const i of t.children())if(i instanceof Gp)t.#oi(i,e);else for(let t of i.globalBoundsPoints)Mo(e,t)}invalidateGlobalMatrix(t){this.invalidateBounds(),super.invalidateGlobalMatrix(t)}}Gp=Hp;class Zp extends Wh{get type(){return"path"}get path(){return this._shape}get nodes(){return this._shape.nodes}set nodes(t){this._shape.setNodes(t),this.invalidateShape()}*localResize(t){yield[$d,ls(this._shape.nodes,t)]}}class Yp extends Wh{get type(){return"poly"}get points(){return this._shape.points}set points(t){t!==this._shape.points&&(this._shape.points=t,this.invalidateShape())}get isClosed(){return this._shape.isClosed}set isClosed(t){t!==this._shape.isClosed&&(this._shape.isClosed=t,this.invalidateShape())}intersectsRect(t){if(this.isInvisible||this.locked||!this.isFillVisible&&!this.isStrokeVisible)return!1;let e=this.points;if(0===e.length)return!1;const i=this.globalMatrix;return i&&!i.isIdentity&&(e=i.transformPointArray(e)),t.intersectsPolyline(e,this.isClosed,!0)}*localResize(t){yield[Kf,t.transformPointArray(this._shape.points)]}}class Qp extends Wh{get type(){return"rect"}get radius(){return this._shape.radius}set radius(t){this._shape.radius!==t&&(this._shape.radius=t,this.invalidateShape())}get width(){return this._shape.width}set width(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.width&&(this._shape.width=t,this.invalidateShape())}get height(){return this._shape.height}set height(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.height&&(this._shape.height=t,this.invalidateShape())}get pin(){return this._shape.pin}set pin(t){this._shape.pin.equals(t)||(this._shape.pin=t,this.invalidateShape())}applyJSON(t){super.applyJSON(t)}intersectsRect(t){if(this.isInvisible||this.locked||!this.isFillVisible&&!this.isStrokeVisible)return!1;if(!this.radius.isZero)return this.globalPath?.intersectsRect(t,!0);const{x:e,y:i,width:n,height:s}=this._shape;let r=[{x:e,y:i},{x:e+n,y:i},{x:e+n,y:i+s},{x:e,y:i+s}];const o=this.globalMatrix;return o&&!o.isIdentity&&(r=o.transformPointArray(r)),t.intersectsPolyline(r,!0,!0)}*localResize(t,e){yield*Fp(this,t,e,Wf,Bf)}}class Jp extends Wh{get type(){return"regular-polygon"}get sides(){return this._shape.sides}set sides(t){(t=n(t,3,Number.POSITIVE_INFINITY))!==this._shape.sides&&(this._shape.sides=t,this.invalidateShape())}get radius(){return this._shape.radius}set radius(t){t!==this._shape.radius&&(this._shape.radius=t,this.invalidateShape())}get cornerRadius(){return this._shape.cornerRadius}set cornerRadius(t){t!==this._shape.cornerRadius&&(this._shape.cornerRadius=t,this.invalidateShape())}get angle(){return this._shape.angle}set angle(t){t!==this._shape.angle&&(this._shape.angle=t,this.invalidateShape())}get pin(){return this._shape.pin}set pin(t){this._shape.pin.equals(t)||(this._shape.pin=t,this.invalidateShape())}applyJSON(t){super.applyJSON(t)}*localResize(t,e){const i=this.radius;(e.x||e.y)&&(t=t.clone().translate(e.x?i:0,e.y?i:0)),yield[np,t.point(i,i).length/Math.SQRT2||$p]}}class qp extends Wh{get type(){return"line"}get points(){return this._shape.points}set points(t){this._shape.setPoints(t)&&this.invalidateShape()}get from(){return this._shape.from}set from(t){this._shape.from.equals(t)||(this._shape.from=t,this.invalidateShape())}get to(){return this._shape.to}set to(t){this._shape.to.equals(t)||(this._shape.to=t,this.invalidateShape())}computeLocalBounds(){return wi.fromIterablePoints(this._shape.points)}computeLocalBoundsPoints(){return this._shape.points}computeGlobalBoundsPoints(){const t=this._shape.points,e=this.globalMatrix;return e.isIdentity?t:e.transformPointArray(t)}intersectsRect(t){if(this.isInvisible||this.locked||!this.isFillVisible&&!this.isStrokeVisible)return!1;const e=this.globalMatrix;return e&&!e.isIdentity?t.intersectsLine(e.transformPoint(this.from),e.transformPoint(this.to),!0):t.intersectsLine(this.from,this.to,!0)}*localResize(t){yield[Jf,t.transformPointArray(this.shape.points)]}}class Kp extends Wh{get type(){return"star"}get sides(){return this._shape.sides}set sides(t){(t=n(t,3,Number.POSITIVE_INFINITY))!==this._shape.sides&&(this._shape.sides=t,this.invalidateShape())}get outerRadius(){return this._shape.outerRadius}set outerRadius(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.outerRadius&&(this._shape.outerRadius=t,this.invalidateShape())}get innerRadius(){return this._shape.innerRadius}set innerRadius(t){(t=n(t,0,Number.POSITIVE_INFINITY))!==this._shape.innerRadius&&(this._shape.innerRadius=t,this.invalidateShape())}get outerCornerRadius(){return this._shape.outerCornerRadius}set outerCornerRadius(t){t!==this._shape.outerCornerRadius&&(this._shape.outerCornerRadius=t,this.invalidateShape())}get innerCornerRadius(){return this._shape.innerCornerRadius}set innerCornerRadius(t){t!==this._shape.innerCornerRadius&&(this._shape.innerCornerRadius=t,this.invalidateShape())}get outerRotate(){return this._shape.outerRotate}set outerRotate(t){t!==this._shape.outerRotate&&(this._shape.outerRotate=t,this.invalidateShape())}get innerRotate(){return this._shape.innerRotate}set innerRotate(t){t!==this._shape.innerRotate&&(this._shape.innerRotate=t,this.invalidateShape())}get angle(){return this._shape.angle}set angle(t){t!==this._shape.angle&&(this._shape.angle=t,this.invalidateShape())}get pin(){return this._shape.pin}set pin(t){this._shape.pin.equals(t)||(this._shape.pin=t,this.invalidateShape())}applyJSON(t){super.applyJSON(t)}*localResize(t,e){const i=this.innerRadius>this.outerRadius,n=i?this.innerRadius:this.outerRadius;(e.x||e.y)&&(t=t.clone().translate(e.x?n:0,e.y?n:0));let s=t.point(n,n,!0).length/Math.SQRT2||$p;if(s===n)return;let r=(i?this.outerRadius:this.innerRadius)*s/n;i&&([s,r]=[r,s]),yield[lp,s],yield[cp,r]}}class Xp extends Oh{#t;get isRenderable(){return!1}get forwardsMatrixIncorporation(){return!0}constructor(t,e){super(e),this.#t=t}dispose(){super.dispose(),this.#t?.dispose(),this.#t=null}get path(){return this.#t}get nodes(){return this.#t.nodes}set nodes(t){this.#t.setNodes(t),this.invalidate(!0)}get fillRule(){return this.#t.fillRule}set fillRule(t){this.#t.fillRule!==t&&(this.#t.fillRule=t,this.invalidate())}setPathMatrix(t){return!!this.#t.setMatrix(t,!0)&&(this.invalidate(!0),!0)}applyJSON(t){this.#t=t.path,super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.path=this.#t,t}get isResizable(){return!0}*localResize(t){yield[$d,ls(this.#t.nodes,t)]}get localBounds(){return this.#t.bounds}computeLocalBounds(){return this.#t.bounds}getElementAt(t,e){return this.hidden||!this.visible||this.locked||!this.localBoundsContainPoint(t)?null:(null==e.filter||e.filter(this,t))&&this.#t?.contains(t,this.globalMatrix)?this:null}cloneCurrent(){return new this.constructor(this.#t.clone())}drawOnPicture(t,e){return wi.ZERO}drawOnWireframe(t){}get picture(){return null}}class tg extends Xp{get type(){return"clip-path"}acceptsParent(t){return"clip-group"===t.type}}class eg extends Oh{#ai;constructor(t,e){super(e),this.#ai=t}get isInvisible(){return!this.#ai||super.isInvisible}applyJSON(t){this.#ai=t.reference,super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.reference=this.#ai,t}get reference(){return this.#ai}set reference(t){this.#ai!==t&&(this.#ai=t,this.invalidate())}getReferencePictureOptions(){}resolvePicture(){return this.#ai&&this.document,null}drawOnWireframe(t){t.drawWireframeRect(this.localBounds,!0)}getElementAt(t,e){return this.isClickable(e?.wireframe)&&this.localBoundsContainPoint(t)&&(null==e.filter||e.filter(this,t))?this:null}cloneCurrent(){return new this.constructor(this.#ai)}}const ig=new $i;class ng extends eg{#li=Be.ZERO;#j=0;#X=0;#ci=1;#ui=0;#E=Os;#tt=As;constructor(t,e){super(t,e)}get type(){return"symbol"}applyJSON(t){if(this.#j=t.width,this.#X=t.height,this.#ui=t.rotation||0,this.#E=t.align||Os,t.pan?this.#li=t.pan:this.#li=new Be(t.x||0,t.y||0),null!=t.zoom)this.#ci=t.zoom||0;else{const e=t.box;e?(this.#ci=Math.max(this.#j,e.width,this.#X,e.height),!Number.isNaN(this.#ci)&&Number.isFinite(this.#ci)||(this.#ci=1)):this.#ci=1}if(null!=t.pin){let e=t.pin;this.#tt=e}super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.pan=this.#li,t.zoom=this.#ci,t.rotation=this.#ui,t.align=this.#E,t.width=this.#j,t.height=this.#X,this.#tt.isZero||(t.pin=this.#tt),t}get pan(){return this.#li}set pan(t){this.#li.equals(t)||(this.#li=t,this.invalidate())}get zoom(){return this.#ci}set zoom(t){t<0&&(t=-t),this.#ci!==t&&(this.#ci=t,this.invalidate())}get rotation(){return this.#ui}set rotation(t){this.#ui!==t&&(this.#ui=t,this.invalidate())}get align(){return this.#E}set align(t){this.#E.equals(t)||(this.#E=t,this.invalidate())}get width(){return this.#j}set width(t){t=n(t,0,Number.POSITIVE_INFINITY),this.#j!==t&&(this.#j=t,this.invalidate(!0))}get height(){return this.#X}set height(t){t=n(t,0,Number.POSITIVE_INFINITY),this.#X!==t&&(this.#X=t,this.invalidate(!0))}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate(!0))}get isResizable(){return!0}computeLocalBounds(){return Vs(this.#tt,this.#j,this.#X)}cloneProperties(t){super.cloneProperties(t),t.#li=this.#li,t.#ci=this.#ci,t.#ui=this.#ui,t.#E=this.#E,t.#j=this.#j,t.#X=this.#X,t.#tt=this.#tt}drawOnPicture(t,e){if(0===this.#ci)return;const i=this.resolvePicture();if(!i)return;t.clipRect(e.outset(.5,.5)),ig.toIdentity().translate(this.#j*this.#E.x,this.#X*this.#E.y).rotate(this.#ui).scale(this.#ci,this.#ci).translate(-this.#li.x,-this.#li.y);const n=this.localBounds;return t.translate(n.x,n.y),t.drawPicture(i,Oe.NormalIsolatedComposition,ig),e}*localResize(t,e){yield*Fp(this,t,e,xp,wp)}}class sg extends Hp{get type(){return"mask"}get supportsContext(){return!0}get isRenderable(){return!1}get providesPicture(){return!0}acceptsParent(t){return"clip-group"===t.type}}class rg{#hi=new Map;constructor(t){t&&this.merge(t)}get size(){return this.#hi.size}all(){return this.#hi.values()}has(t){return this.#hi.has(t)}get(t){return this.#hi.get(t)||null}delete(t){const e=this.#hi.get(t);return!!e&&(this.#hi.delete(t),e.dispose(),!0)}add(t){return!this.#hi.has(t.id)&&(this.#hi.set(t.id,t),!0)}import(t){const e=this.#hi;for(const i of[...t])e.has(i.id)?e.get(i.id)===i&&t.#hi.delete(i.id):(e.set(i.id,i),t.#hi.delete(i.id))}merge(t){const e=this.#hi;for(const i of t)e.has(i.id)?e.get(i.id)!==i&&i.dispose():e.set(i.id,i)}dispose(){for(const t of this.#hi.values())t.dispose();this.#hi.clear()}[Symbol.iterator](){return this.#hi.values()}}class og extends rg{}class ag{constructor(t,e){this.data=t,this.id=e}get width(){return this.data.width}get height(){return this.data.height}getBlob(){return new Blob([this.data.getBytes()])}dispose(){this.data?.delete(),this.data=null}static async idFromData(t){return async function(t){const e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(zt).join("")}(t)}static async fromRawData(t,e){if(!t)return null;const i=Skia.SkImage.MakeFromEncoded(t);return i?(e??=await this.idFromData(i.getBytes()),new ag(i,e)):null}}const lg="images";function cg(t){return t??=ia,t[lg]??=new og}function ug(t){const e=new Set;return hg(t.firstChild,e),e}function hg(t,e){for(let i=t;null!=i;i=i.nextSibling){if("image"===i.type){const t=i.imageResource;t&&e.add(t)}i.hasChildren&&hg(i.firstChild,e)}}Ro({id:lg,priority:0,dispose(t){t.dispose()},serialization:{marker:4,serialize:new class extends na{#di;async begin(t){const e=this.#di=[...ug(su)].reverse();return e.length&&(t[lg]=e.map((t=>t.id))),super.begin(t)}async*items(){for(const t of this.#di)yield this.serializeRaw(t.getBlob().stream())}async end(){return this.#di=null,super.end()}},deserialize:new class extends sa{#fi=null;#pi;#gi;async begin(t,e){return this.#pi=0,this.#fi=t[lg],this.#gi=[],super.begin(t,e)}async end(){return this.#fi=this.#gi=null,super.end()}async add(t){const e=this.#fi[this.#pi++],i=await ag.fromRawData(await this.deserializeRaw(t),e);i&&this.#gi.push(i)}async compute(t){return t&&!this.#gi?.length?t:(t?.dispose(),new og(this.#gi))}}}});class dg extends Oh{#mi;#j=null;#X=null;#tt=As;constructor(t,e){super(e),this.#mi=t}get type(){return"image"}get imageId(){return this.#mi}set imageId(t){this.#mi!==t&&(this.#mi=t,this.invalidate(!0))}get imageResource(){return cg().get(this.#mi)}get width(){return null==this.#j?this.#j=this.imageResource?.width||0:this.#j}set width(t){t<0&&(t=0),this.#j!==t&&(this.#j=t,this.invalidate(!0))}get height(){return null==this.#X?this.#X=this.imageResource?.height||0:this.#X}set height(t){t<0&&(t=0),this.#X!==t&&(this.#X=t,this.invalidate(!0))}get pin(){return this.#tt}set pin(t){this.#tt.equals(t)||(this.#tt=t,this.invalidate(!0))}get isRenderable(){return!0}get isResizable(){return!0}*localResize(t,e){yield*Fp(this,t,e,Zf,Yf)}computeLocalBounds(){return Vs(this.#tt,this.width,this.height)}drawOnWireframe(t){t.drawWireframeRect(this.localBounds,!0)}drawOnPicture(t,e){const i=this.imageResource;if(!i)return;const{width:n,height:s}=this;return t.translate(-this.#tt.x*n,-this.#tt.y*s),t.scale(n/i.width,s/i.height),t.drawImage(this.imageResource.data),e}cloneCurrent(){return new dg(this.imageId)}cloneProperties(t){super.cloneProperties(t),t.#mi=this.#mi,t.#j=this.#j,t.#X=this.#X,t.#tt=this.#tt}toJSON(){const t=super.toJSON();return t.image=this.#mi,t.width=this.width,t.height=this.height,this.#tt.isZero||(t.pin=this.#tt),t}applyJSON(t){if(this.#mi=t.image||t.resourceId,null!=t.width&&(this.#j=t.width),null!=t.height&&(this.#X=t.height),null!=t.pin){let e=t.pin;this.#tt=e}super.applyJSON(t)}}class fg extends Oh{#yi;#vi;#bi;#xi;#wi;#Mi=!1;get type(){return"clip-group"}get forwardsMatrixIncorporation(){return!0}get isAlphaMask(){return this.#Mi}set isAlphaMask(t){this.#Mi!==t&&(this.#Mi=t,this.invalidateParent(!1,!0))}onChildAdded(t,e){gg(t)?this.#Si(t):mg(t)?this.#ki(t):super.onChildAdded(t,e)}onChildRemoved(t){gg(t)?this.#Si(t):mg(t)?this.#ki(t):super.onChildRemoved(t)}onChildMoved(t){gg(t)?this.#Si(t,!1):mg(t)?this.#ki(t,!1):super.onChildMoved(t)}onChildGraphicsChanged(t,e,i){gg(t)?this.#Si(t,!0,!0):mg(t)?this.#ki(t,!0,!0):super.onChildGraphicsChanged(t,e,i)}onChildMatrixChanged(t){gg(t)?this.#Si(t):mg(t)?this.#ki(t):super.onChildMatrixChanged(t)}get clipPath(){return void 0===this.#yi?this.#yi=this.#_i():this.#yi}get clipBounds(){return void 0===this.#bi?this.#bi=this.#Ii():this.#bi}get clipPicture(){return void 0===this.#vi?this.#vi=this.#Ci(this.clipBounds):this.#vi}get maskBounds(){return void 0===this.#wi?this.#wi=this.#Li():this.#wi}get maskPicture(){return void 0===this.#xi?this.#xi=this.#Ni(this.maskBounds):this.#xi}#ki(t,e=!0,i){!i&&t.isInvisible||(this.#xi?.delete(),this.#wi=this.#xi=void 0,this.invalidate(e))}#Si(t,e=!0,i){!i&&t.isInvisible||(this.#yi?.delete(),this.#vi?.delete(),this.#bi=this.#yi=this.#vi=void 0,this.invalidate(e))}#Ci(t){if(!t||!t.isVisible)return null;const e=new Skia.SkPictureRecorder,i=new qr(e.beginRecording(t));for(const t of this.children()){if(t.isInvisible||!gg(t))continue;const e=t.path;if(e.isEmpty)continue;const n=t.localMatrix;n.isIdentity?i.drawPathDirect(e.path,Hi.WHITE):(i.save(),i.multiplyMatrix(n),i.drawPathDirect(e.path,Hi.WHITE),i.restore())}const n=e.finishRecordingAsPicture(t);return e.delete(),i.dispose(),n}#Ni(t){if(!t||!t.isVisible)return null;const e=new Skia.SkPictureRecorder,i=new qr(e.beginRecording(t));for(const t of this.children())mg(t)&&t.draw(i);const n=e.finishRecordingAsPicture(t);return e.delete(),i.dispose(),n}#Ii(){const t=this.clipPath;return t?wi.fromLTRBObject(t.computeTightBounds()):null}#Li(){return bg(this,mg)}#_i(){const t=new Skia.SkPath;t.fillType=Skia.SkPathFillType.Winding;for(const e of this.children()){if(!gg(e)||e.isInvisible)continue;const i=e.path;i.isEmpty||t.addPath(i.path,e.localMatrix)}return t.isEmpty?(t.delete(),null):t}#ji(){return bg(this,(t=>!pg(t)))||wi.ZERO}get isolationContour(){return this.clipPath}computeLocalBounds(){return this.clipBounds||this.maskBounds||this.#ji()}computePictureBounds(){return $u(this)?wi.merge([this.clipBounds,this.#wi,this.#ji()]):this.localBounds}get supportsChildren(){return!0}acceptsChild(t){return t.isElement&&(t.isRenderable||pg(t))}toJSON(){const t=super.toJSON();return this.#Mi&&(t.alphaMask=!0),t}applyJSON(t){super.applyJSON(t),t.alphaMask&&(this.#Mi=!0);const e=t.clipRule;if(null!=e)for(const t of this.children())gg(t)&&(t.fillRule=e)}dispose(){super.dispose(),this.#yi?.delete(),this.#vi?.delete(),this.#xi?.delete(),this.#yi=this.#bi=this.#vi=this.#xi=this.#xi=null}getElementAt(t,e){if($u(this))return super.getElementAt(t,e);if(this.locked||!this.localBounds.isVisible||(e.wireframe?this.hidden||!this.visible:this.isInvisible))return null;const i=this.getLocalPoint(t),n=this.clipPath;if(n&&!n.contains(i.x,i.y))return null;const s=this.maskBounds;if(s&&!s.containsPoint(i))return null;if(null!=e.filter&&!e.filter(this,t))return null;let r;for(const i of this.children(!0))if(i.providesPicture&&(r=i.getElementAt(t,e),r))break;return r?e.seeThrough||uh(r)?r:this:null}cloneProperties(t){super.cloneProperties(t),t.#Mi=this.#Mi,t.#bi=this.#bi,t.#wi=this.#wi,this.#yi?t.#yi=this.#yi.clone():t.#yi=this.#yi,this.#vi?t.#vi=this.#vi.clone():t.#vi=this.#vi,this.#xi?t.#xi=this.#xi.clone():t.#xi=this.#xi}drawOnPicture(t,e){if(!this.hasChildren)return wi.ZERO;if(Au())if($u(this))for(const e of this.children())e instanceof Xu&&e.providesPicture&&e.draw(t);else for(const e of this.children())e instanceof Xu&&e.isRenderable&&!Uu(e)&&e.draw(t);else for(const e of this.children())e instanceof Xu&&e.isRenderable&&!pg(e)&&e.draw(t)}draw(t){if(this.isInvisible)return;const e=this.isFrozen?this.frozenPicture:this.picture;if(!e)return;if($u(this))return void t.drawPicture(e,this.composition,this.localMatrix,this.filters?.filter);const i=this.composition;if(i.isInvisible)return;const n=this.clipPicture,s=this.maskPicture;(n||s)&&(t.saveLayer(i,this.filters?.filter),t.multiplyMatrix(this.localMatrix),t.drawPicture(e),s&&t.drawPictureBlend(s,Skia.SkBlendMode.DstIn,this.#Mi?vg??=Skia.SkColorFilter.MakeMatrix([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]):yg??=Skia.SkColorFilter.MakeLuma()),n&&t.drawPictureBlend(n,Skia.SkBlendMode.DstIn),t.restore())}drawOnWireframe(t){let e=!Uu(this);if(e){const i=this.clipPath;i?(t.save(),t.clipPath(i)):e=!1}super.drawOnWireframe(t),e&&t.restore()}}function pg(t){return gg(t)||mg(t)}function gg(t){return"clip-path"===t.type}function mg(t){return"mask"===t.type}let yg,vg;function bg(t,e){let i=0,n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(const a of t.children()){if(a.isInvisible||!e(a))continue;let t=a.pictureAndFiltersBounds;t&&t.isVisible&&(a.localMatrix.isIdentity||(t=t.transform(a.localMatrix)),i++,n=Math.min(n,t.left),s=Math.min(s,t.top),r=Math.max(r,t.right),o=Math.max(o,t.bottom))}return i?wi.fromLTRB(n,s,r,o):null}class xg extends Oh{constructor(t,e){super(e),this.paragraph=t}get forwardsMatrixIncorporation(){return!0}get type(){return"text"}applyJSON(t){this.paragraph=t.paragraph,super.applyJSON(t)}toJSON(){const t=super.toJSON();return t.paragraph=this.paragraph,t}dispose(){super.dispose(),this.paragraph?.dispose(),this.paragraph=null}computeLocalBounds(){return this.paragraph.tightBounds.transform(this.paragraph.matrix)}computePictureBounds(){let t=wi.merge([this.paragraph.bounds,this.paragraph.linesBounds]).transform(this.paragraph.matrix),e=0;for(const t of this.paragraph.blocks)e=Math.max(e,t.style.strokeLineWidth??0);return e>0?(e*=2,t.outset(e,e)):t}get style(){return this.paragraph.style}get width(){return this.style.width}set width(t){this.style.setWidth(t)&&this.invalidateParagraph()}get height(){return this.style.height}set height(t){this.style.setHeight(t)&&this.invalidateParagraph()}get autoWidth(){return this.style.autoWidth}set autoWidth(t){const e=this.style;e.autoWidth!==t&&(e.autoWidth=t,this.invalidateParagraph())}get autoHeight(){return this.style.autoHeight}set autoHeight(t){const e=this.style;e.autoHeight!==t&&(e.autoHeight=t,this.invalidateParagraph())}get align(){return this.style.align}set align(t){this.style.setAlign(t)&&this.invalidateParagraph()}get valign(){return this.style.valign}set valign(t){this.style.setVAlign(t)&&this.invalidateParagraph()}get text(){return this.paragraph.source.text}set text(t){this.setText(t)}setParagraphMatrix(t){return!!this.paragraph.setMatrix(t)&&(this.invalidate(!0,!0),!0)}setText(t){return!!this.paragraph.setText(t)&&(this.invalidateParagraph(),!0)}get fillOpacity(){return this.getStyleProperty("fillOpacity")}set fillOpacity(t){this.setStyleProperty("fillOpacity",t)}get fill(){return this.getStyleProperty("fill")}set fill(t){this.setStyleProperty("fill",t)}get fillRule(){return 0}set fillRule(t){}get strokeOpacity(){return this.getStyleProperty("strokeOpacity")}set strokeOpacity(t){this.setStyleProperty("strokeOpacity",t)}get strokeBrush(){return this.getStyleProperty("strokeBrush")}set strokeBrush(t){this.setStyleProperty("strokeBrush",t)}get strokeLineWidth(){return this.getStyleProperty("strokeLineWidth")}set strokeLineWidth(t){this.setStyleProperty("strokeLineWidth",t)}get strokeMiterLimit(){return this.getStyleProperty("strokeMiterLimit")}set strokeMiterLimit(t){this.setStyleProperty("strokeMiterLimit",t)}get strokeLineCap(){return this.getStyleProperty("strokeLineCap")}set strokeLineCap(t){this.setStyleProperty("strokeLineCap",t)}get strokeLineJoin(){return this.getStyleProperty("strokeLineJoin")}set strokeLineJoin(t){this.setStyleProperty("strokeLineJoin",t)}get strokeDashOffset(){return this.getStyleProperty("strokeDashOffset")}set strokeDashOffset(t){this.setStyleProperty("strokeDashOffset",t)}get strokeDashArray(){return this.getStyleProperty("strokeDashArray")}set strokeDashArray(t){this.setStyleProperty("strokeDashArray",t)}get strokeDashPathLength(){return 0}set strokeDashPathLength(t){}get paintOrder(){return this.getStyleProperty("paintOrder")}set paintOrder(t){this.setStyleProperty("paintOrder",t)}get fontId(){return this.getStyleProperty("fontId")}set fontId(t){this.setStyleProperty("fontId",t)}get fontSize(){return this.getStyleProperty("fontSize")}set fontSize(t){this.setStyleProperty("fontSize",t)}get fontFeatures(){return this.getStyleProperty("fontFeatures")}set fontFeatures(t){this.setStyleProperty("fontFeatures",t)}get letterSpacing(){return this.getStyleProperty("letterSpacing")}set letterSpacing(t){this.setStyleProperty("letterSpacing",t)}get wordSpacing(){return this.getStyleProperty("wordSpacing")}set wordSpacing(t){this.setStyleProperty("wordSpacing",t)}get lineHeight(){return this.getStyleProperty("lineHeight")}set lineHeight(t){this.setStyleProperty("lineHeight",t)}get baselineShift(){return this.getStyleProperty("baselineShift")}set baselineShift(t){this.setStyleProperty("baselineShift",t)}drawOnPicture(t,e){return this.paragraph.draw(t),e}drawOnWireframe(t){const e=this.paragraph?.path;e&&!e.isEmpty&&t.drawWireframePath(e,!0)}getElementAt(t,e){if(this.locked||(e.wireframe?this.hidden||!this.visible:this.isInvisible))return null;if(null!=e.filter&&!e.filter(this,t))return null;if(e.boundsOnly&&this.localBoundsContainPoint(t))return this;const i=this.globalMatrix;return i&&!i.isIdentity&&(t=i.inversePoint(t.x,t.y)),this.paragraph.isPointOverText(t,!0)?this:null}intersectsRect(t){return!!this.isClickable()&&this.globalBounds.intersectsRect(t)}invalidateParagraph(){this.paragraph?.invalidate(),this.invalidate(!0)}}class wg extends xg{constructor(t,e){super(t,e)}cloneCurrent(){return new wg(this.paragraph.clone())}getStyleProperty(t,e){return e??=Hr(this),this.paragraph.getTextStyleAtRange(e.start,e.end)[t]}setStyleProperty(t,e,i){const n=new Ur;let s;return n[t]=e,i??=Hr(this),s=i.start===i.end?this.paragraph.addStyleToAll(n):this.paragraph.addStyle(n,i.start,i.end),!!s&&(this.invalidateParagraph(),!0)}collectFonts(t){for(const{style:e}of this.paragraph.blocks)e.fontId&&t.add(e.fontId)}}class Mg extends Oh{#u;#Ti;static CreateFromBlock(t,e){const i=new this;i.#u=t.style;const n=e.length;return i.#Ti=0===n?new Gr(0,0):new Gr(t.start/n,t.end/n),i}computeLocalBounds(){return wi.ZERO}onVisibilityChanged(){this.parent?.invalidateParagraph()}get isTransformable(){return!1}get isRenderable(){return!1}get supportsChildren(){return!1}get supportsContext(){return!1}acceptsChild(t){return!1}acceptsParent(t){return t instanceof xg}dispose(){super.dispose(),this.#u=this.#Ti=null}cloneProperties(t){super.cloneProperties(t),t.#u=this.#u?this.#u.clone():void 0,t.#Ti=this.#Ti?this.#Ti.clone():void 0}toJSON(){const t=super.toJSON();return t.style=this.#u,t.range=this.#Ti,t}applyJSON(t){this.#u=t.style,this.#Ti=t.range,super.applyJSON(t)}get type(){return"text-style"}get style(){return this.#u??=new Ur}set style(t){this.#u=t}get range(){return this.#Ti??=new Gr}get rangeStart(){return this.range.start}set rangeStart(t){this.setRange(t,this.range.end)}get rangeEnd(){return this.range.end}set rangeEnd(t){this.setRange(this.range.start,t)}get rangeLength(){return this.range.length}set rangeLength(t){this.setRange(this.range.start,this.range.start+t)}get rangeType(){return this.range.type}set rangeType(t){this.setRangeType(t)}setRangeType(t){return this.range.type!==t&&(this.range.type=t,this.invalidateParagraph(),!0)}setRange(t,e){return t=n(t,0,1),(e=n(e,0,1))<t&&([t,e]=[e,t]),(this.range.start!==t||this.range.end!==e)&&(this.range.start=t,this.range.end=e,this.invalidateParagraph(),!0)}addStyle(t){return!!t.mergeStyleInto(this.style)&&(this.invalidateParagraph(),!0)}setStyleProperty(t,e){return this.style[t]!==e&&(this.style[t]=e,this.invalidateParagraph(),!0)}getStyleProperty(t){const e=this.style[t];return void 0===e?this.parent?.[t]:e}get fillOpacity(){return this.getStyleProperty("fillOpacity")}set fillOpacity(t){this.setStyleProperty("fillOpacity",t)}get fill(){return this.getStyleProperty("fill")}set fill(t){this.setStyleProperty("fill",t)}get fillRule(){return 0}set fillRule(t){}get strokeOpacity(){return this.getStyleProperty("strokeOpacity")}set strokeOpacity(t){this.setStyleProperty("strokeOpacity",t)}get strokeBrush(){return this.getStyleProperty("strokeBrush")}set strokeBrush(t){this.setStyleProperty("strokeBrush",t)}get strokeLineWidth(){return this.getStyleProperty("strokeLineWidth")}set strokeLineWidth(t){this.setStyleProperty("strokeLineWidth",t)}get strokeMiterLimit(){return this.getStyleProperty("strokeMiterLimit")}set strokeMiterLimit(t){this.setStyleProperty("strokeMiterLimit",t)}get strokeLineCap(){return this.getStyleProperty("strokeLineCap")}set strokeLineCap(t){this.setStyleProperty("strokeLineCap",t)}get strokeLineJoin(){return this.getStyleProperty("strokeLineJoin")}set strokeLineJoin(t){this.setStyleProperty("strokeLineJoin",t)}get strokeDashOffset(){return this.getStyleProperty("strokeDashOffset")}set strokeDashOffset(t){this.setStyleProperty("strokeDashOffset",t)}get strokeDashArray(){return this.getStyleProperty("strokeDashArray")}set strokeDashArray(t){this.setStyleProperty("strokeDashArray",t)}get strokeDashPathLength(){return 0}set strokeDashPathLength(t){}get paintOrder(){return this.getStyleProperty("paintOrder")}set paintOrder(t){this.setStyleProperty("paintOrder",t)}get fontId(){return this.getStyleProperty("fontId")}set fontId(t){this.setStyleProperty("fontId",t)}get fontSize(){return this.getStyleProperty("fontSize")}set fontSize(t){this.setStyleProperty("fontSize",t)}get fontFeatures(){return this.getStyleProperty("fontFeatures")}set fontFeatures(t){this.setStyleProperty("fontFeatures",t)}get letterSpacing(){return this.getStyleProperty("letterSpacing")}set letterSpacing(t){this.setStyleProperty("letterSpacing",t)}get wordSpacing(){return this.getStyleProperty("wordSpacing")}set wordSpacing(t){this.setStyleProperty("wordSpacing",t)}get lineHeight(){return this.getStyleProperty("lineHeight")}set lineHeight(t){this.setStyleProperty("lineHeight",t)}get baselineShift(){return this.getStyleProperty("baselineShift")}set baselineShift(t){this.setStyleProperty("baselineShift",t)}invalidateParagraph(){if(this.isInvisible)return;const t=this.parent;t&&(t instanceof xg||t instanceof Mg)&&t.invalidateParagraph()}draw(t){}drawOnPicture(t,e){return wi.ZERO}drawWireframe(t){}drawOnWireframe(t){}collectFonts(t){const e=this.style.fontId;if(null!=e&&""!==e&&t.add(e),this.hasChildren)for(const e of this.children())e.collectFonts(t)}}class Sg extends xg{constructor(t,e){super(t,e),t&&(t.provider=this)}get supportsChildren(){return!0}get supportsRenderableChildren(){return!1}get supportsContextChildren(){return!1}acceptsChild(t){return t instanceof Mg}toJSON(){const t=super.toJSON();return t.blocks=this.paragraph.blocks,t}applyJSON(t){super.applyJSON(t),t.paragraph&&(t.paragraph.provider=this)}cloneCurrent(){return new Sg(this.paragraph.clone())}hasBlocks(){return this.hasChildren}*getBlocks(){for(const t of this.children())t instanceof Mg&&!t.isInvisible&&(yield[t.range,t.style])}getStyleProperty(t){return this.paragraph.block.style[t]}setStyleProperty(t,e){const i=new Ur;return i[t]=e,!!i.mergeStyleInto(this.paragraph.block.style)&&(this.invalidateParagraph(),!0)}collectFonts(t){const e=this.paragraph.block.style.fontId;if(null!=e&&""!==e&&t.add(e),this.hasChildren)for(const e of this.children())e.collectFonts(t)}}class kg extends Xu{constructor(){super(...arguments),this.nodeType=1,this.isRenderable=!0,this.isTransformable=!1,this.supportsChildren=!0}get type(){return"layer"}getElementAt(t,e){if(this.isInvisible||this.locked||!this.pictureBounds.contains(t.x,t.y))return null;let i;for(const n of this.children(!0))if(i=n.getElementAt(t,e))return i;return null}computeLocalBounds(){return wi.fromIterablePoints(this.#zi())}*#zi(){for(const t of this.children())yield*t.globalBoundsPoints}}let _g=0,Ig=!1,Cg=function(t,e,i){if(!t.forwardsMatrixIncorporation)return jg(t,e);let[n,s]=function(t){if(Bi(t.value,!0))return[t,null];const e=Ui(t.value),i=(new $i).translate(e.translate.x,e.translate.y).rotate(e.rotate).scale(e.scale.x?Math.sign(e.scale.x):1,e.scale.y?Math.sign(e.scale.y):1);return[i,t=t.clone().preMultiplyInverse(i)]}(e),r=jg(t,n);if(t.supportsChildren&&(s||Ig)){s??=new $i;for(const e of t.children())e.incorporateMatrix(s,i,!1)&&(r=!0);return r}return function(t,e){if(t instanceof Xp)return t.setPathMatrix(e);let i=1;if(_g&&(i=Tg(e?.lineScale)),t instanceof xg)return!!t.setParagraphMatrix(e)&&(zg(t,e,i,1),!0);if(t instanceof Wh){let n=0;return 1&_g&&(n=t.pathLength),!!t.setShapeMatrix(e)&&(n=n?Tg(n/t.pathLength):1,zg(t,e,i,n),!0)}return!1}(t,s)&&(r=!0),r};function Lg(t,e,i,n){const s=_g;null!=i&&(_g=i),Ig=n;const r=t.incorporateMatrix(e,Cg,!0);return Ig=!1,_g=s,r}function Ng(t,e,i){if(i){const i=e.toRelative(t.localBounds);return n=>n===t?e:i.toAbsolute(n.localBounds)}const n=e.withTransformedCoords(t.globalMatrix);return i=>{if(i===t)return e;const s=i.globalMatrix;return s.isIdentity?n:n.withTransformedCoords(s.clone().inverse())}}function jg(t,e){return t.setTransformMatrix(e)}function Tg(t){return t&&Number.isFinite(t)?t<0?-t:t:1}function zg(t,e,i,n){if(!e||e.isIdentity)return!1;let s=!1;if(t instanceof wg)for(const r of t.paragraph.blocks)Ag(r.style,e,i,n)&&(s=!0);else if(Dg(t,Yd,e)&&(s=!0),Dg(t,qd,e)&&(s=!0),Pg(t,i,n)&&(s=!0),t instanceof Sg)for(const r of t.children())zg(r,e,i,n)&&(s=!0);return s}function Ag(t,e,i,n){let s=!1;if(t.fill instanceof nn){const i=t.fill.withTransformedCoords(e);i!==t.fill&&(t.fill=i,s=!0)}if(t.strokeBrush instanceof nn){const i=t.strokeBrush.withTransformedCoords(e);i!==t.strokeBrush&&(t.strokeBrush=i,s=!0)}return Pg(t,i,n)&&(s=!0),s}function Pg(t,e,i){let n=!1;return e&&1!==e&&t.strokeLineWidth&&(t.strokeLineWidth*=e,n=!0),i&&1!==i&&!t.strokeDashPathLength&&(t.strokeDashOffset&&(t.strokeDashOffset*=i,n=!0),t.strokeDashArray?.length&&(t.strokeDashArray=t.strokeDashArray.map((t=>t?(n=!0,t*i):0)))),n}function Dg(t,e,i){const n=e.getValue(t);if(!(n instanceof nn))return!1;const s=n.withTransformedCoords(i);return n!==s&&Cd(t,e,s)}function Eg(t,e){return Og(t,2,2,e)}function Og(t,e,i,n){const s=t.globalBounds.getPointAtPosition(e,i);return null!==s&&Wg(t,s,n)}function Rg(t,e,i){if(!t.isTransformable)return!1;const n=t.localBounds.getPointAtPosition(e,i);return null!==n&&Cd(t,Pd,n)}function Wg(t,e,i){return Hg(t,Zg(t,e,!0),i)}function Bg(t){t.isTransformable&&Wg(t,t.globalBounds.middle,!0);for(const e of t.children())Bg(e)}function Ug(t,e){return 0!==e&&Ld(t,Ed,(t=>t.rotate+e))}function $g(t,e){return(1!==e.x||1!==e.y)&&Ld(t,Dd,(t=>t.scale.mul(e)))}function Fg(t,e,i){return!e.isZero&&(i?Ld(t,Pd,(t=>{const i=t.globalMatrix;return i.isIdentity?t.anchor.sub(e):t.anchor.sub(i.transformInversePoint(e,!1))})):Ld(t,Ad,(t=>t.position.add(Zg(t,e)))))}function Vg(t,e,i,n,s){const r=Zg(t,t.position),o=e.getPointAtPosition(i,n,!1,r),a=t.globalBounds.bounds.getPointAtPosition(i,n,!1,r);return!a.equals(o)&&Gg(t,o.sub(a),s)}function Gg(t,e,i){if(e.isZero||!t.isTransformable)return!1;if(i){const i=t.globalMatrix;return Cd(t,Pd,t.anchor.sub(i.isIdentity?e:i.transformInversePoint(e,!1)))}return Cd(t,Ad,t.position.add(Zg(t,e)))}function Hg(t,e,i){if(!t.isTransformable)return!1;const n=t.position;if(n.equals(e))return!1;const s=t.anchor.sub(t.localMatrix.transformInversePoint(n.sub(e),!1));return i?(t.anchor=s,t.position=e,!0):(Cd(t,Pd,s),Cd(t,Ad,e),!0)}function Zg(t,e,i=!1){if(e.isZero)return e;const n=t?.parent.globalMatrix;return n&&!n.isIdentity?n.transformInversePoint(e,i):e}let Yg=class t extends gu{#je;#ze;#Ai;#Pi;constructor(t){super(t??Ct()),this.nodeType=0,this.supportsFilters=!1,this.supportsChildren=!0,this.supportsContext=!1,this.isTransformable=!1,this.isRenderable=!0,this.#je=void 0,this.#ze=null,this.#Ai=null,this.#Pi=0,this.document=this}get type(){return"document"}dispose(){super.dispose(),this.#je?.delete(),this.#je=null}cloneCurrent(){return new t(this.id)}cloneProperties(t){super.cloneProperties(t),t.#je=this.#je?this.#je.clone():this.#je}applyJSON(t){this.id??=Ct();const e=t.children;if(e?.length&&!e[0].isLayer){const i=new kg;for(i.title="Layer 1";e.length>0;)i.appendChild(e.shift());t.children=[i]}super.applyJSON(t)}static fromJSON(t){const e=new this(t.id);return e.applyJSON(t),e}get hidden(){return!1}set hidden(t){}get visible(){return!0}set visible(t){}get isInvisible(){return!1}get preventAdoptAndAbandon(){return this.#Pi>0}set preventAdoptAndAbandon(t){t?this.#Pi++:this.#Pi>0&&this.#Pi--}adoptNode(t){if(this.preventAdoptAndAbandon)return!1;const e=this.nodeCache;for(const i of Su(t))i.id??=Ct(),i.document=this,e.set(i.id,i);return!0}abandonNode(t){if(this.preventAdoptAndAbandon)return!1;_o(Vt,t);const e=this.#Ai;for(const i of Su(t))e?.delete(i.id),i.document=null;return!0}onNodeParentChanged(t,e){e&&t.parent&&t.isElement&&t.isTransformable&&function(t,e){if(!t||!e||!t.isTransformable)return!1;const i=e.globalMatrix,n=t.parent,s=new $i;n&&s.multiplyInverse(n.globalMatrix),i&&!i.isIdentity&&s.multiply(i),Lg(t,s,0)}(t,e)}find(t){return this.nodeCache.get(t)||null}get picture(){if(void 0===this.#je){const t=this.pictureBounds;if(!t.isVisible)return this.#je=null;const e=new Skia.SkPictureRecorder,i=new qr(e.beginRecording(t));for(const t of this.children())t.draw(i);this.#je=e.finishRecordingAsPicture(t)||null,e.delete(),i.dispose()}return this.#je}get pictureBounds(){return this.#ze??=wi.merge(this.#Di())}computeLocalBounds(){return wi.merge(this.#Ei())}computeLocalBoundsPoints(){return st}*#Ei(){for(const t of this.children())!t.isInvisible&&t.hasChildren&&(yield t.localBounds)}*#Di(){for(const t of this.children())!t.isInvisible&&t.hasChildren&&(yield t.pictureAndFiltersBounds)}invalidateBounds(){this.#ze=null,super.invalidateBounds()}invalidateGraphics(){void 0!==this.#je&&(this.#je?.delete(),this.#je=void 0),function(t){su&&t===su&&ou()}(this)}get nodeCache(){return this.#Ai??=vu(this)}get hasNodeCache(){return null!=this.#Ai}};class Qg extends gu{constructor(){super(...arguments),this.nodeType=4,this.supportsFilters=!1,this.supportsContext=!1,this.isTransformable=!1,this.isRenderable=!1,this.#Oi=void 0,this.#Ri=void 0,this.#Wi=void 0}#Oi;#Ri;#Wi;get supportsChildren(){return!1}dispose(){super.dispose(),this.#Wi?.delete(),this.#Wi=null,this.#Oi=this.#Ri=null}cloneProperties(t){super.cloneProperties(t),t.#Oi=this.#Oi,t.#Ri=this.#Ri,t.#Wi=this.#Wi?this.#Wi.clone():this.#Wi}get element(){const t=this.parent;return t?t.isFilterContainer?t.parent:t instanceof Qg?t.element:null:null}get inputBounds(){return void 0===this.#Oi?this.#Oi=this.#Bi():this.#Oi}#Bi(){const t=this.previousSibling;return t?t.outputBounds:this.parent?.inputBounds||null}get outputBounds(){if(void 0===this.#Ri){const t=this.inputBounds;return!this.providesBounds||this.isInvisible||this.isIdentity?this.#Ri=t:this.#Ri=this.computeOutputBounds(t)}return this.#Ri}computeOutputBounds(t){return t}get filter(){if(void 0===this.#Wi){const t=this.#Ui();if(this.isIdentity||this.isInvisible)return this.#Wi=t?t.clone():null;const e=this.computeFilter(t,this.needsBounds?this.outputBounds:null);return this.#Wi=null==e||e===t?t?.clone()||null:e}return this.#Wi}#Ui(){const t=this.previousSibling;return t?t.filter:null}onChildMoved(t){}onChildAdded(t,e){}onChildRemoved(t){}onSiblingsChanged(){}onParentChanged(t,e){super.onParentChanged(t,e),this.invalidate(!0)}onVisibilityChanged(){this.invalidateChain()}invalidateGraphics(){this.#Wi?.delete(),this.#Wi=void 0}invalidateBounds(){this.#Oi=this.#Ri=void 0,super.invalidateBounds()}invalidate(t,e){t&&this.invalidateBounds(),this.invalidateGraphics(),e&&this.parent?.onChildGraphicsChanged(this,t,e)}invalidateFilter(){this.isInvisible?(this.invalidateGraphics(),this.invalidateBounds()):this.invalidateChain()}invalidateChain(){let t=this;for(;t;)t.invalidate(!0,!1),t=t.nextSibling;this.parent?.onChildGraphicsChanged(this,!0)}computeLocalBounds(){return this.outputBounds||wi.ZERO}}class Jg extends Qg{#$i=void 0;dispose(){this.#$i?.delete(),this.#$i=void 0,super.dispose()}get providesBounds(){return!1}get needsBounds(){return!1}computeFilter(t){const e=this.colorFilter;return e?Skia.SkImageFilter.MakeColorFilter(e,t):null}get colorFilter(){return void 0===this.#$i?this.#$i=this.computeColorFilter():this.#$i}cloneProperties(t){super.cloneProperties(t),this.#$i?t.#$i=this.#$i.clone():t.#$i=this.#$i}invalidateGraphics(){super.invalidateGraphics(),this.#$i?.delete(),this.#$i=void 0}}const qg=new Zr;class Kg extends Jg{computeColorFilter(){return this.computeColorMatrix(qg.reset()),qg.isIdentity?null:Skia.SkColorFilter.MakeMatrix(qg.value)}}class Xg extends Qg{#nt=0;toJSON(){const t=super.toJSON();return this.#nt>0&&(t.radius=this.#nt),t}applyJSON(t){super.applyJSON(t);let e=t.radius;if(null==e){let i=t.x||0,n=t.y??i;e=Math.sqrt(i**2+n**2)}this.#nt=e||0}cloneProperties(t){super.cloneProperties(t),t.#nt=this.#nt}get needsBounds(){return!1}get providesBounds(){return!0}get type(){return"filter:blur"}get isIdentity(){return 0===this.#nt}get radius(){return this.#nt}set radius(t){t<0&&(t=0),this.#nt!==t&&(this.#nt=t,this.invalidateFilter())}computeOutputBounds(t){const e=3*this.#nt;return t?.outset(e,e)}computeFilter(t){return Skia.SkImageFilter.MakeBlur(this.#nt,this.#nt,Skia.SkTileMode.Decal,t)}}class tm extends Kg{#Fi=1;#Vi=1;#Gi=1;#Hi=0;#Zi=0;#Yi=0;#Qi=0;get type(){return"filter:color-adjust"}cloneProperties(t){super.cloneProperties(t),t.#Fi=this.#Fi,t.#Vi=this.#Vi,t.#Gi=this.#Gi,t.#Hi=this.#Hi,t.#Zi=this.#Zi,t.#Yi=this.#Yi,t.#Qi=this.#Qi}toJSON(){const t=super.toJSON();return t.brightness=this.#Fi,t.contrast=this.#Vi,t.saturate=this.#Gi,t.hueRotate=this.#Hi,t.invert=this.#Zi,t.grayscale=this.#Yi,t.sepia=this.#Qi,t}applyJSON(t){super.applyJSON(t),this.#Fi=t.brightness,this.#Vi=t.contrast,this.#Gi=t.saturate,this.#Hi=t.hueRotate,this.#Zi=t.invert,this.#Yi=t.grayscale,this.#Qi=t.sepia}get isIdentity(){return 1===this.#Fi&&1===this.#Vi&&1===this.#Gi&&this.#Hi%360==0&&0===this.#Zi&&0===this.#Yi&&0===this.#Qi}get brightness(){return this.#Fi}set brightness(t){this.#Fi!==t&&(this.#Fi=t,this.invalidateFilter())}get contrast(){return this.#Vi}set contrast(t){this.#Vi!==t&&(this.#Vi=t,this.invalidateFilter())}get saturate(){return this.#Gi}set saturate(t){this.#Gi!==t&&(this.#Gi=t,this.invalidateFilter())}get hueRotate(){return this.#Hi}set hueRotate(t){this.#Hi!==t&&(this.#Hi=t,this.invalidateFilter())}get invert(){return this.#Zi}set invert(t){this.#Zi!==t&&(this.#Zi=t,this.invalidateFilter())}get grayscale(){return this.#Yi}set grayscale(t){this.#Yi!==t&&(this.#Yi=t,this.invalidateFilter())}get sepia(){return this.#Qi}set sepia(t){this.#Qi!==t&&(this.#Qi=t,this.invalidateFilter())}computeColorMatrix(t){t.brightness(this.#Fi).contrast(this.#Vi).saturate(this.#Gi).hueRotate(this.#Hi).invert(this.#Zi).grayscale(this.#Yi).sepia(this.#Qi)}}De.fromCode(16770432),De.fromCode(3375104);class em extends Qg{#n=Be.ZERO;#Ji=0;#qi=De.black;get type(){return"filter:drop-shadow"}get needsBounds(){return!1}get providesBounds(){return!0}get offset(){return this.#n}set offset(t){this.#n.equals(t)||(this.#n=t,this.invalidateFilter())}get blur(){return this.#Ji}set blur(t){t<0&&(t=0),this.#Ji!==t&&(this.#Ji=t,this.invalidateFilter())}get color(){return this.#qi}set color(t){this.#qi.equals(t)||(this.#qi=t,this.invalidateFilter())}get isIdentity(){return 0===this.#qi.a}computeOutputBounds(t){if(!t)return null;let{x:e,y:i,width:n,height:s}=t;const r=this.#n;r.isZero||(r.x<0?(e+=r.x,n-=r.x):n+=r.x,r.y<0?(i+=r.y,s-=r.y):s+=r.y);const o=3*this.#Ji;return o>0&&(e-=o,e-=o,n+=2*o,i-=o,s+=2*o),new wi(e,i,n,s)}computeFilter(t){return Skia.SkImageFilter.MakeDropShadow(this.#n.x,this.#n.y,this.#Ji,this.#Ji,this.#qi.code,t)}cloneProperties(t){super.cloneProperties(t),t.#n=this.#n,t.#Ji=this.#Ji,t.#qi=this.#qi}applyJSON(t){super.applyJSON(t);let e=t.blur;null==e&&t.radius instanceof Be&&(e=t.radius.length),this.#Ji=e||0,this.#n=t.offset??Be.ZERO,this.#qi=t.color||De.black}toJSON(){const t=super.toJSON();return this.#n.isZero||(t.offset=this.#n),this.#Ji>0&&(t.blur=this.#Ji),t.color=this.#qi,t}}De.fromCode(16770432),De.fromCode(3375104);const im=ja(Jt),nm={start:0,end:0};let sm=null;function rm(t,e){return(nm.start!==t||nm.end!==e)&&(nm.start=t,nm.end=e,sm&&im(),!0)}function om(){return!!am(rh())&&(im(),!0)}function am(t){if(t instanceof xg||(t=null),sm===t)return!1;const e=null===sm;return sm=t,nm.start=nm.end=0,!(!sm&&e)}const lm={start:0,end:0};function cm(){return sm?[nm.start,nm.end]:null}function um(t){if(sm=null,nm.start=nm.end=0,t&&am(rh())){const e=sm.text.length;nm.start=Math.min(t[0],e),nm.end=Math.max(t[1],e)}}Hr=t=>t===sm?nm:lm,Io(Ft,om),Io(Zt,om),Io(Yt,om),Io(Et,(()=>{$o({id:"text-selection",priority:-800,get:cm,set:um})}));const hm=ja(Qt);let dm=new Map;function fm(){return!dm.size}function pm(t){return dm.get(t)||null}function gm(){return!!dm.size&&(dm.clear(),hm(),!0)}function mm(){return dm.entries()}function ym(t,e,i){if(!uh(t))return!1;if(dm.has(t)){const n=dm.get(t);if(i){if(n.has(e))return!1}else{if(n.has(e)&&1===n.size&&1===dm.size)return!1;n.clear(),dm.clear(),dm.set(t,n)}return n.add(e),hm(),!0}i||dm.clear();const n=new Set;return n.add(e),dm.set(t,n),hm(),!0}function vm(t,e){let i;if(Sm(t))i=t.nodes.length;else if(t instanceof Yp)i=t.points.length;else{if(!(t instanceof qp))return!1;i=2}const n=new Array(i);for(let t=0;t<i;t++)n[t]=t;return bm(t,n,e)}function bm(t,e,i){if(!uh(t))return!1;if(dm.has(t)){const n=dm.get(t);if(function(t,e){if(t.size!==e.length)return!1;for(const i of e)if(!t.has(i))return!1;return!0}(n,e))return!1;i||(n.clear(),dm.clear(),dm.set(t,n));for(const t of e)n.add(t);return hm(),!0}return i||dm.clear(),dm.set(t,new Set(e)),hm(),!0}function xm(t,e){if(!dm.has(t))return!1;const i=dm.get(t);return!!i.has(e)&&(i.delete(e),i.size||dm.delete(t),hm(),!0)}function wm(t){if(!dm.has(t))return!1;const e=function(t){return t instanceof Zp||t instanceof Xp?t.path.nodes.length:t instanceof Yp?t.points.length:0}(t);if(!e)return!1;let i=!1;const n=dm.get(t);for(const t of[...n])t>=e&&(n.delete(t),i=!0);return i&&t.document===su&&hm(),i}function Mm(t){return t instanceof Zp||t instanceof Yp||t instanceof qp||t instanceof Xp}function Sm(t){return t instanceof Zp||t instanceof Xp}function km(t,e){return Sm(t)?t.nodes[e]?.point:t instanceof qp||t instanceof Yp?t.points[e]:null}function*_m(t){const e=dm.get(t);if(!e?.size)return;const i=t.nodes;for(const t of e)i[t]&&(yield i[t])}function Im(t,e){const i=function(t){return t instanceof Zp||t instanceof Xp?t.path.nodes:t instanceof Yp||t instanceof qp?t.points:null}(t);return i?.length?function(t,e,i){null!=i&&i.isIdentity&&(i=null);let n,s=null;for(let r=0,o=e.length;r<o;r++)n=i?i.point(e[r].x,e[r].y):e[r],t.contains(n.x,n.y)&&(s??=new Set).add(r);return s}(e,i,t.globalMatrix):null}function Cm(t,e){return t.isVisible?Lm(t,e):gm()}function Lm(t,e){let i=!1;const n=Th(Mm);if(e)for(const e of n){const n=Im(e,t);if(n)if(i=!0,dm.has(e)){const t=dm.get(e);for(const e of n)t.has(e)?t.delete(e):t.add(e)}else dm.set(e,n)}else{const e=new Set(dm.keys());for(const s of n){const n=Im(s,t);n?(e.delete(s),dm.has(s)&&Nm(n,dm.get(s))||(dm.set(s,n),i=!0)):dm.has(s)&&(dm.delete(s),e.delete(s),i=!0)}if(e.size){for(const t of e)dm.delete(t);i=!0}}return!!i&&(hm(),!0)}function Nm(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function jm(){if(!dm.size)return null;const t=new Map;for(const[e,i]of dm)i.size&&t.set(e.id,[...i].sort(ot));return t}function Tm(t){if(dm.clear(),t?.size)for(const[e,i]of t){const t=su.find(e);t&&uh(t)&&dm.set(t,new Set(i))}}Io(Et,(()=>{$o({id:"point-selection",priority:-700,get:jm,set:Tm})})),Io(Vt,(function(t){if(!dm.size)return!1;let e=!1;for(const i of[...dm.keys()])(i===t||t.contains(i))&&(dm.delete(i),e=!0);return e&&hm(),e})),Io(Yt,(function(){if(!dm.size)return!1;if(lh())return gm();let t=!1;for(const e of dm.keys())uh(e)||(dm.delete(e),t=!0);return t&&hm(),t}));const zm="tree-folding",Am=ja(qt);function Pm(t){return t??=ia,t[zm]??=new Set}function Dm(t){return Pm().has(t.id)}function Em(t){if(!t||!Om(t))return!1;const e=t.id,i=Pm();return i.has(e)?i.delete(e):i.add(e),Am(),!0}function Om(t){return!(!t.supportsChildren||!t.hasChildren)||!(!t.isElement&&!t.isLayer)&&null!=t.filters}Ro({id:zm,serialization:ra(5,(function(){!function(){const t=Pm();for(const e of t)su.find(e)||t.delete(e)}();const t=Pm();return t.size?t:null}))});const Rm=ja(Ft);function Wm(t){return t instanceof Rh||t instanceof xg}function Bm(t){return t instanceof Rh}function Um(t){if(t??=su,t.hasChildren)return!1;const e=new kg;return e.title="Layer 1",t.appendChild(e),t===su&&Rm(),!0}function $m(t){if(!t?.length)return!1;if(Au())if(Lu()){let e=zu();const i=e.parent;for(const n of t)i.insertAfter(n,e),Bu(n),e=n}else{const e=Tu();for(const i of t)e.appendChild(i)}else{const e=ch();for(const i of t)e.appendChild(i)}return Rm(),!0}function Fm(t){const e=Xm(t);t.remove(),t.dispose(),e&&Rm()}function Vm(t){let e=!1,i=!1;for(const n of t)!i&&Xm(n)&&(i=!0),e=!0,n.remove(),n.dispose();return i&&Rm(),e}function Gm(){return!lh()&&!!Vm(oh())&&(Um(),!0)}function Hm(t){if(t.isFragment)return null;const e=t.clone(!0);return e.title=function(t,e){if(t&&(t=t.trim()),null==t||""===t)return ku.has(e)?`${ku.get(e)} (copy)`:null;const i=t.replace(/\(copy(?:\s(\d+))?\)\s*$/i,(function(t,e){return`(copy ${parseInt(e??"1")+1})`}));return i!==t?i:`${t} (copy)`}(t.title,t.type),t.parent.insertAfter(e,t),Xm(e)&&(Rm(),_o(Ht,[t,e])),e}function Zm(t,e,i){const n=t.parent,s=t.previousSibling,r=Xm(t);r&&_o(Gt,[t,e]),n.removeChild(t),i||null==s?n.prependChild(e):n.insertAfter(e,s),r&&Rm()}function Ym(t,e,i="append",n){if("append"===i||"prepend"===i)switch(t.nodeType){case 3:if(!e.supportsFilters)return!1;if(e.isLayer||e.isElement)return null==e.filters&&(e.filters=t,Xm(e)&&Rm(),!0);break;case 4:if(e.isLayer||e.isElement){if(!e.supportsFilters)return!1;e.filters??=new mu,e=e.filters}}if(n){if(!e.insertAdjacentNodes(i,t,...n))return!1}else if(!e.insertAdjacentNodes(i,t))return!1;return Xm(e)&&Rm(),!0}function Qm(t,e,i=!0){const n=[],s=[];for(const r of t)r instanceof e&&r.isElement&&r.supportsChildren&&(r.hasChildren?(n.push(...Jm(r)),i&&s.push(r)):i&&s.push(r));return s.length>0&&Vm(s),n}function Jm(t){if(!t.isElement)return[];let e=t.localMatrix;e.isIdentity&&(e=null);const i=[],n=t.document;try{n&&(n.preventAdoptAndAbandon=!0);const e=t.parent;let s=t;for(const n of[...t.children()])e.acceptsChild(n)&&n.acceptsParent(e)&&(i.push(n),e.insertAfter(n,s),s=n)}finally{n&&(n.preventAdoptAndAbandon=!1,i.length&&su===n&&Rm())}return i}function qm(t,e,i){let n=!1,s=!1;null!=i&&(t=yu([...t],i,!0));for(const i of t)e(i)&&(n=!0,!s&&Xm(i)&&(s=!0));return s&&Rm(),n}function Km(t,e){const i=new Hp(t.id);return i.hidden=t.hidden,i.visible=t.visible,i.title=t.title,i.opacity=t.opacity,i.isolate=t.isolate,i.blend=t.blend,t.filters&&(i.filters=t.filters),t.hasChildren&&i.insertAdjacentNodes("append",...t.children()),e&&(t.remove(),t.dispose()),i}function Xm(t){return null!=su&&su===t.document}function ty(t){const e=[...t.paragraph.pathsWithStyle()];if(!e.length)return null;const i=e.length-1;let n=!0;for(let t=1;t<=i;t++)if(!e[t][1].samePaint(e[t-1][1])){n=!1;break}if(n){let n;const s=e[0][1];if(0===i)n=e[0][0].copy();else{n=new Skia.SkPath;for(const t of e)n.addPath(t[0])}e.splice(0);const r=new Zp(zs.fromSkPath(n,!0),t.id);return ny(t,r),ry(t,r),oy(s,r),r.fillRule=0,r}const s=new Hp(t.id);ny(t,s),ry(t,s);for(const[t,i]of e){const e=new Zp(zs.fromSkPath(t.copy(),!0));oy(i,e),e.fillRule=0,s.appendChild(e)}return s.hasChildren?s:(s.dispose(),null)}function ey(t,e){let i=null;if(t instanceof Wh?i=t.shape.convertToPath():t instanceof Rh?i=t.localPath.copy():t instanceof xg?(i=t.paragraph.path.copy(),i.fillType=Skia.SkPathFillType.Winding):t instanceof Xp&&(i=t.path.convertToPath()),!i)return null;if(e&&!i.isEmpty){const e=t.globalMatrix;e?.isIdentity||i.transform(e)}return i}function iy(t,e){t!==e&&(ny(t,e),ry(t,e),oy(t,e),e.fillRule=t.fillRule)}function ny(t,e){e.opacity=t.opacity,e.blend=t.blend,e.isolate=t.isolate,sy(t,e)}function sy(t,e){e.hidden=t.hidden,e.locked=t.locked,e.visible=t.visible,e.title=t.title}function ry(t,e){e.orientation=t.orientation,e.autoOrientAngle=t.autoOrientAngle,e.position=t.position,e.anchor=t.anchor,e.scale=t.scale,e.rotate=t.rotate,e.skewAngle=t.skewAngle,e.skewAxis=t.skewAxis}function oy(t,e){e.fillOpacity=t.fillOpacity,e.fill=t.fill,e.paintOrder=t.paintOrder,e.strokeOpacity=t.strokeOpacity,t instanceof Rh?e.stroke=t.stroke.clone():(e.strokeBrush=t.strokeBrush.clone(),e.strokeLineWidth=t.strokeLineWidth,e.strokeLineJoin=t.strokeLineJoin,e.strokeLineCap=t.strokeLineCap,e.strokeMiterLimit=t.strokeMiterLimit,e.strokeDashArray=t.strokeDashArray.slice(),e.strokeDashOffset=t.strokeDashOffset,e.strokeDashPathLength=t.strokeDashPathLength)}const ay=$d;let ly,cy;function uy(t){return t instanceof Zp||t instanceof Xp}function hy(t,e,i,n=.5,s){return Sy(t,Xn,e,i,n,s)}function dy(t,e){return Sy(t,ts,e)}function fy(t,e,i){return Sy(t,Hn,e,i)}function py(t,e,i){return Sy(t,Vn,e,i)}function gy(t,e,i){return Sy(t,Gn,e,i)}function my(t){return Sy(t,as)}function yy(t,e,i){return Sy(t,rs,e,i)}function vy(t,e,i){return Sy(t,ns,e,i)}function by(t,e){return!!Sy(t,os,e)&&(wm(t),!0)}function xy(t,e,i,n,s){return Sy(t,Kn,e,i,n,s)}function wy(t,e,i){return!(!e.x&&!e.y)&&(t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e,!1)),Sy(t,Zn,e.x,e.y,i))}function My(t,e,i,n,s){return t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e)),Sy(t,Yn,e,i,n,s)}function Sy(t,e,...i){if(!uy(t))return!1;const n=e(t.nodes,...i);return t.nodes!==n&&!!Cd(t,ay,n)&&(ly?.(t,e,i),!0)}const ky=Kf,_y=Jf;let Iy;function Cy(t){return t instanceof Yp}function Ly(t){return t instanceof qp}function Ny(t,e,i){return Ey(t,Ys.addPointAfter,e,i,t.isClosed)}function jy(t,e){return!!Ey(t,Ys.deletePoints,e)&&(wm(t),!0)}function Ty(t){return Ey(t,zy)}function zy(t){return t.length>1?t.toReversed():t}function Ay(t,e,i){return!e.isZero&&(t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e,!1)),Ey(t,Ys.movePointsBy,e.x,e.y,i))}function Py(t,e,i){if(e.isZero)return!1;t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e,!1));const n=Ys.movePointsBy(t.points,e.x,e.y,i);return t.points!==n&&Cd(t,_y,n)}function Dy(t){const e=t.points;return!e[0].equals(e[1])&&Cd(Sp,_y,e.toReversed())}function Ey(t,e,...i){if(!Cy(t))return!1;const n=e(t.points,...i);return t.points!==n&&!!Cd(t,ky,n)&&(Iy?.(t,e,i),!0)}const Oy=new Up,Ry=Symbol(),Wy=Symbol(),By=new Map,Uy=new Map,$y=new Set,Fy=new Set;function Vy(t){for(const[e,i]of t){if(!By.has(e)){Fy.add(e),By.set(e,new Set);for(const t of e.groups)$y.add(t)}By.get(e).add(i)}!function(t){if(lh()?function(t,e){for(const i of t){if(!Oy.hasValue(i)){Uy.get(i)!==Ry&&(Uy.set(i,Ry),e.add(i));continue}const t=Oy.getValue(i);Uy.has(i)&&qy(i,t,Uy.get(i))||(Uy.set(i,t),e.add(i))}}(t,Hy):1===ah()?(Gy[0]=rh(),Jy(t,Gy,Hy),Gy[0]=null):Jy(t,sh(),Hy),Hy.size){for(const t of Hy){let e=Uy.get(t);const i=e===Wy,n=e===Ry;(i||n)&&(e=void 0);for(const s of By.get(t))s(e,i,n)}Hy.clear()}}(new Set(t.keys()))}const Gy=[null],Hy=new Set,Zy=new Set,Yy=new Set,Qy=new Set;function Jy(t,e,i){t:for(const n of e)for(const e of t){if(Zy.has(e))continue;if(!vd(n,e)){Yy.has(e)||Qy.add(e);continue}const s=e.getValue(n);if(Yy.has(e)){if(!qy(e,s,Uy.get(e))&&(Uy.set(e,Wy),i.add(e),Zy.add(e),Zy.size===t.size))break t}else Uy.has(e)?qy(e,s,Uy.get(e))||(Uy.set(e,e.handler.cloneValue(s)),i.add(e)):(Uy.set(e,s),i.add(e)),Yy.add(e),Qy.delete(e)}for(const t of Qy)Uy.get(t)!==Ry&&(Uy.set(t,Ry),i.add(t));Zy.clear(),Yy.clear(),Qy.clear()}function qy(t,e,i){return e===i||e!==Ry&&e!==Wy&&i!==Ry&&i!==Wy&&t.handler.sameValue(e,i)}class Ky extends Oh{get isTransformable(){return!1}}J([fg,"ClipGroupElement"],[tg,"ClipPathElement"],[Vp,"EllipseElement"],[Hp,"GroupElement"],[qp,"LineElement"],[sg,"MaskElement"],[Zp,"PathElement"],[Yp,"PolyElement"],[Qp,"RectElement"],[Jp,"RegularPolygonElement"],[Kp,"StarElement"],[ng,"SymbolElement"],[wg,"TextElement"],[Sg,"StyledTextElement"],[Mg,"TextStyleElement"],[dg,"ImageElement"],[kg,"Layer"],[Yg,"Document"],[mu,"FilterContainer"],[Xg,"BlurFilter"],[tm,"ColorAdjustFilter"],[em,"DropShadowFilter"]),q("ClipPathElement",(function(t){const e=t.path,i=t.id;t.id=null,delete t.path;const n=fg.fromJSON(t),s=new tg(e,i);return n.prependChild(s),n}),300,400,500),Io(Et,(()=>{!function(){const t=[Jd,qd,Kd,ef,tf,Xd,sf,nf,of];gd(kg),md(kg,...Object.values(zd),Vd),gd(Oh),md(Oh,jd,Nd,...Object.values(Bd)),gd(Ky),yd(Ky,(t=>t.id.startsWith("node.transform."))),gd(Xp),yd(Xp,(t=>t.id.startsWith("node.compositing."))),gd(Rh),md(Rh,...Object.values(Qd),...Object.values(uf)),gd(Wh),gd(eg),md(eg,...Object.values(Df)),gd(Hp),md(Hp,Td),gd(sg),gd(xg),md(xg,...Object.values(Qd),...t,...Object.values(bf),...Object.values(zf),_f),gd(wg),gd(Sg),gd(Mg),yd(Mg,(t=>t.id.startsWith("node.compositing."))),md(Mg,...Object.values(Qd),...t,...Object.values(zf),...Object.values(kf)),gd(fg),md(fg,Td,...Object.values(Of)),gd(tg),md(tg,...Object.values(Rf)),gd(dg),md(dg,...Object.values(Qf)),gd(qp),md(qp,...Object.values(qf)),gd(Zp),md(Zp,...Object.values(ep)),gd(Yp),md(Yp,...Object.values(tp)),gd(Jp),md(Jp,...Object.values(op)),gd(Kp),md(Kp,...Object.values(gp)),gd(Vp),md(Vp,...Object.values(Gf)),gd(Qp),md(Qp,...Object.values($f)),gd(ng),md(ng,...Object.values(Mp)),gd(Xg),md(Xg,...Object.values(_p)),gd(tm),md(tm,...Object.values(Ap)),gd(em),md(em,...Object.values(Op))}(),Uo({id:"document",priority:-1e3,update:ru,copy:null,delete:null,serialization:{marker:3,serialize:new class extends na{begin(t){return t.fontMap=function(){const t=new Set;if(function(t,e){e??=new Set;for(const i of Mu(t,!0))i instanceof xg&&i.collectFonts(e)}(su,t),!t.size)return;let e;for(const i of t){const t=xr(i);t?.length>1&&(e??={},e[t[0]]=t)}return e}(),super.begin(t)}async*items(){su&&(yield this.serializeData(su))}},deserialize:new class extends sa{#Zt;async begin(t,e){await super.begin(t,e),function(t){if(t)for(const e of Object.values(t))vr(e)}(t.fontMap)}async add(t){this.#Zt=await this.deserializeData(t)}async compute(){return this.#Zt}async end(){return this.#Zt&&(await async function(t){const e=new Set,i=new Set;for(const n of Mu(t,!0))if(n instanceof xg){if(n.collectFonts(i),0===i.size)continue;let t=!1;for(const n of i)wr(n)?e.add(n):Mr(n)||((await kr(n)).includes(n)&&e.add(n),t=!0);i.clear(),t&&n.invalidateParagraph()}e.size&&Dt.addFailedFonts(e)}(this.#Zt),this.#Zt=void 0),super.end()}}}})}));const Xy=new Map,tv=new Map,ev=new Map;let iv;function nv(t,e,i){var n;t&&(n=t.mime,Xy.set(n,(async(e,i)=>t.paste(e,i)))),e&&(function(t){tv.set(t,(async t=>e.copy(t)))}(e.mime),i&&function(t,e){ev.set(t,e)}(e.mime,i))}async function sv(t,e){await ov(t,e)}async function rv(t){return!!await ov(t)&&!!ev.has(t)&&ev.get(t)(t)}async function ov(t,e){if(!tv.has(t))return!1;const i=await tv.get(t)(e??null,t);return!!i&&At(i)}async function av(t,e){const i=await t.getType(e);return i&&0!==i.size?i:null}const lv=1702377317;class cv{constructor(t,e){this.app=t,this.mime=e}async copy(t){return t??=await this.getInput(),null==t?null:this.#Ki(await this.getData(t))}async#Ki(t){if(null==t)return null;const e=pt((i=this.createManifest(t),n=this.iterateAllData(t),i.version||(i.version=Z),new ReadableStream({async start(t){const e=new Blob([JSON.stringify(i)],vt),n=new DataView(new Uint32Array(2).buffer);n.setUint32(0,1702377317),n.setUint32(4,e.size),t.enqueue(n.buffer),t.enqueue(await e.arrayBuffer())},async pull(t){const{value:e,done:i}=await n.next();if(i)return void t.close();let s;s=e[1]instanceof ArrayBuffer?e[1]:e[1]instanceof Blob?await e[1].arrayBuffer():await new Blob([tt(e[1])],vt).arrayBuffer();const r=new DataView(new Uint32Array(2).buffer);r.setUint32(0,e[0]),r.setUint32(4,s.byteLength),t.enqueue(r.buffer),t.enqueue(s)}})));var i,n;if(!e)return null;const s=this.mime;return new ClipboardItem({[s]:await ct(e,{type:s.startsWith("web ")?s.substring(4):s})})}createManifest(t){return{version:null,app:this.app}}}class uv extends cv{*iterateAllData(t){yield[0,t]}}class hv{constructor(t,e){this.app=t,this.mime=e}isAvailable(){return!0}clean(){this.manifest=this.options=null}async paste(t,e){if(this.options=e,!this.isAvailable())return!1;try{return await async function(t,e){const i=await ut(t),n=new DataView(i.buffer);let s=0,r=n.getUint32(s);if(!e.setPrefix(r))return e.cancel();s+=4;let o=n.getUint32(s);s+=4;let a=new DataView(n.buffer,s,o);s+=o;const l=JSON.parse(ft(a));if(!e.setManifest(l))return e.cancel();for(;!(s>=n.byteLength);)r=n.getUint32(s),s+=4,o=n.getUint32(s),s+=4,e.supportsItem(r)&&(a=new DataView(n.buffer,s,o),e.addItem(r,a)),s+=o;return e.resolve()}(gt(t.stream()),this)}catch(t){return Dt.showToast("Clipboard error","error"),!1}finally{this.clean()}}async deserializeData(t){return it(await new Blob([t],{type:"application/json"}).text(),null,this.manifest.version)}setPrefix(t){return t===lv||(Dt.showToast("Clipboard contains unrecognised data","warning"),!1)}setManifest(t){return t.version>Z?(Dt.showToast("Clipboard contains data created with a newer version of the app","warning"),!1):(this.manifest=t,!!t.app.startsWith("expressive/")||(Dt.showToast("Clipboard contains unsupported data","warning"),!1))}cancel(){return!1}}class dv extends hv{#Zt;supportsItem(t){return 0===t}addItem(t,e){0===t&&(this.#Zt=e)}async resolve(){if(!this.#Zt)return Dt.showToast("Clipboard is empty","info"),!1;const t=await this.deserializeData(this.#Zt);return this.#Zt=null,t?this.handle(t):(Dt.showToast("Invalid clipboard data","error"),!1)}clean(){this.#Zt=null,super.clean()}}const fv={top:{alignX:.5,alignY:0,dirX:0,dirY:-1,offsetX:0,offsetY:4},"top-left":{alignX:0,alignY:0,dirX:1,dirY:-1,offsetX:0,offsetY:4},"top-right":{alignX:1,alignY:0,dirX:-1,dirY:-1,offsetX:0,offsetY:4},bottom:{alignX:.5,alignY:1,dirX:0,dirY:1,offsetX:0,offsetY:4},"bottom-right":{alignX:1,alignY:1,dirX:-1,dirY:1,offsetX:0,offsetY:4},"bottom-left":{alignX:0,alignY:1,dirX:1,dirY:1,offsetX:0,offsetY:4}};let pv=null,gv=!1;function mv(){return pv||(pv=document.querySelector("cc-shell"),gv=pv.hasAttribute("titlebar")),pv}function yv(t){mv().blockPointerEvents(t)}function vv(t,e="normal",i){return mv().showToast(t,e,i)}async function bv(t,e,i,n=!0){let s;return s="string"==typeof i?fv[i]:i,mv().showContextMenu(t,e,s,n)}async function xv(t,e){return mv().showDialog(t,e)}let wv=null;async function Mv(t,e){return wv??=document.createElement("cc-loading-dialog-content"),xv(wv,{message:t,done:e,animated:!0})}async function Sv(t,e,i=300){if(!(t instanceof Promise))return t;if(!i)return Mv(e,t);let n,s;const r=setTimeout((()=>{n=Mv(e,new Promise((t=>s=t)))}),i);let o;try{o=await t}finally{clearTimeout(r),n&&(s?.(o),await n)}return o}let kv=null;const _v=new BroadcastChannel("cc");function Iv(t){mv().style.cursor=t||"auto"}const Cv="cc-computed-theme-changed",Lv=document.querySelector('meta[name="theme-color"]');let Nv=Tv();Pv();let jv=!1;function Tv(){return localStorage.getItem("theme")||"auto"}function zv(){const t="auto"===Nv?jv?"dark":"light":Nv;Av(t),window.dispatchEvent(new CustomEvent(Cv,{detail:t}))}function Av(t){Lv?.setAttribute("content","dark"===t?"#1D1D1D":"#FFF")}function Pv(){document.documentElement.style.setProperty("--theme",Nv)}function Dv(t){return Nv!==t&&(Nv=t,localStorage.setItem("theme",Nv),Pv(),zv(),_v.postMessage({type:"theme",value:Nv}),!0)}function Ev(){return Nv}function Ov(t,e){e?window.addEventListener(Cv,t):window.removeEventListener(Cv,t)}(()=>{const t=matchMedia("(prefers-color-scheme: dark)");jv=t.matches,t.addEventListener("change",(t=>{jv=t.matches,"auto"===Nv&&zv()}),{capture:!0,passive:!0}),"auto"===Nv?zv():Av(Nv),_v.addEventListener("message",(t=>{"theme"===t.data.type&&Dv(Tv())}))})();const Rv=globalThis,Wv=Rv.ShadowRoot&&(void 0===Rv.ShadyCSS||Rv.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Bv=Symbol(),Uv=new WeakMap;let $v=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==Bv)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(Wv&&void 0===t){const i=void 0!==e&&1===e.length;i&&(t=Uv.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&Uv.set(e,t))}return t}toString(){return this.cssText}};const Fv=t=>new $v("string"==typeof t?t:t+"",void 0,Bv),Vv=(t,...e)=>{const i=1===t.length?t[0]:e.reduce(((e,i,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[n+1]),t[0]);return new $v(i,t,Bv)},Gv=Wv?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return Fv(e)})(t):t,{is:Hv,defineProperty:Zv,getOwnPropertyDescriptor:Yv,getOwnPropertyNames:Qv,getOwnPropertySymbols:Jv,getPrototypeOf:qv}=Object,Kv=globalThis,Xv=Kv.trustedTypes,tb=Xv?Xv.emptyScript:"",eb=Kv.reactiveElementPolyfillSupport,ib={toAttribute(t,e){switch(e){case Boolean:t=t?tb:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},nb=(t,e)=>!Hv(t,e),sb={attribute:!0,type:String,converter:ib,reflect:!1,hasChanged:nb};Symbol.metadata??=Symbol("metadata"),Kv.litPropertyMetadata??=new WeakMap;class rb extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=sb){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const i=Symbol(),n=this.getPropertyDescriptor(t,i,e);void 0!==n&&Zv(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){const{get:n,set:s}=Yv(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return n?.call(this)},set(e){const r=n?.call(this);s.call(this,e),this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??sb}static _$Ei(){if(this.hasOwnProperty("elementProperties"))return;const t=qv(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty("finalized"))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty("properties")){const t=this.properties,e=[...Qv(t),...Jv(t)];for(const i of e)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,i]of e)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(Gv(t))}else void 0!==t&&e.push(Gv(t));return e}static _$Eu(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{if(Wv)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const i of e){const e=document.createElement("style"),n=Rv.litNonce;void 0!==n&&e.setAttribute("nonce",n),e.textContent=i.cssText,t.appendChild(e)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){const i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(void 0!==n&&!0===i.reflect){const s=(void 0!==i.converter?.toAttribute?i.converter:ib).toAttribute(e,i.type);this._$Em=t,null==s?this.removeAttribute(n):this.setAttribute(n,s),this._$Em=null}}_$AK(t,e){const i=this.constructor,n=i._$Eh.get(t);if(void 0!==n&&this._$Em!==n){const t=i.getPropertyOptions(n),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:ib;this._$Em=n,this[n]=s.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??nb)(this[t],e))return;this.P(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,i){this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,i]of t)!0!==i.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],i)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}rb.elementStyles=[],rb.shadowRootOptions={mode:"open"},rb.elementProperties=new Map,rb.finalized=new Map,eb?.({ReactiveElement:rb}),(Kv.reactiveElementVersions??=[]).push("2.0.4");const ob=globalThis,ab=ob.trustedTypes,lb=ab?ab.createPolicy("lit-html",{createHTML:t=>t}):void 0,cb="$lit$",ub=`lit$${(Math.random()+"").slice(9)}$`,hb="?"+ub,db=`<${hb}>`,fb=document,pb=()=>fb.createComment(""),gb=t=>null===t||"object"!=typeof t&&"function"!=typeof t,mb=Array.isArray,yb=t=>mb(t)||"function"==typeof t?.[Symbol.iterator],vb="[ \t\n\f\r]",bb=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,xb=/-->/g,wb=/>/g,Mb=RegExp(`>|${vb}(?:([^\\s"'>=/]+)(${vb}*=${vb}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Sb=/'/g,kb=/"/g,_b=/^(?:script|style|textarea|title)$/i,Ib=(t,...e)=>({_$litType$:1,strings:t,values:e}),Cb=Symbol.for("lit-noChange"),Lb=Symbol.for("lit-nothing"),Nb=new WeakMap,jb=fb.createTreeWalker(fb,129);function Tb(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==lb?lb.createHTML(e):e}const zb=(t,e)=>{const i=t.length-1,n=[];let s,r=2===e?"<svg>":"",o=bb;for(let e=0;e<i;e++){const i=t[e];let a,l,c=-1,u=0;for(;u<i.length&&(o.lastIndex=u,l=o.exec(i),null!==l);)u=o.lastIndex,o===bb?"!--"===l[1]?o=xb:void 0!==l[1]?o=wb:void 0!==l[2]?(_b.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=Mb):void 0!==l[3]&&(o=Mb):o===Mb?">"===l[0]?(o=s??bb,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?Mb:'"'===l[3]?kb:Sb):o===kb||o===Sb?o=Mb:o===xb||o===wb?o=bb:(o=Mb,s=void 0);const h=o===Mb&&t[e+1].startsWith("/>")?" ":"";r+=o===bb?i+db:c>=0?(n.push(a),i.slice(0,c)+cb+i.slice(c)+ub+h):i+ub+(-2===c?e:h)}return[Tb(t,r+(t[i]||"<?>")+(2===e?"</svg>":"")),n]};class Ab{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let s=0,r=0;const o=t.length-1,a=this.parts,[l,c]=zb(t,e);if(this.el=Ab.createElement(l,i),jb.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(n=jb.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes())for(const t of n.getAttributeNames())if(t.endsWith(cb)){const e=c[r++],i=n.getAttribute(t).split(ub),o=/([.?@])?(.*)/.exec(e);a.push({type:1,index:s,name:o[2],strings:i,ctor:"."===o[1]?Rb:"?"===o[1]?Wb:"@"===o[1]?Bb:Ob}),n.removeAttribute(t)}else t.startsWith(ub)&&(a.push({type:6,index:s}),n.removeAttribute(t));if(_b.test(n.tagName)){const t=n.textContent.split(ub),e=t.length-1;if(e>0){n.textContent=ab?ab.emptyScript:"";for(let i=0;i<e;i++)n.append(t[i],pb()),jb.nextNode(),a.push({type:2,index:++s});n.append(t[e],pb())}}}else if(8===n.nodeType)if(n.data===hb)a.push({type:2,index:s});else{let t=-1;for(;-1!==(t=n.data.indexOf(ub,t+1));)a.push({type:7,index:s}),t+=ub.length-1}s++}}static createElement(t,e){const i=fb.createElement("template");return i.innerHTML=t,i}}function Pb(t,e,i=t,n){if(e===Cb)return e;let s=void 0!==n?i._$Co?.[n]:i._$Cl;const r=gb(e)?void 0:e._$litDirective$;return s?.constructor!==r&&(s?._$AO?.(!1),void 0===r?s=void 0:(s=new r(t),s._$AT(t,i,n)),void 0!==n?(i._$Co??=[])[n]=s:i._$Cl=s),void 0!==s&&(e=Pb(t,s._$AS(t,e.values),s,n)),e}class Db{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:i}=this._$AD,n=(t?.creationScope??fb).importNode(e,!0);jb.currentNode=n;let s=jb.nextNode(),r=0,o=0,a=i[0];for(;void 0!==a;){if(r===a.index){let e;2===a.type?e=new Eb(s,s.nextSibling,this,t):1===a.type?e=new a.ctor(s,a.name,a.strings,this,t):6===a.type&&(e=new Ub(s,this,t)),this._$AV.push(e),a=i[++o]}r!==a?.index&&(s=jb.nextNode(),r++)}return jb.currentNode=fb,n}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class Eb{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,n){this.type=2,this._$AH=Lb,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Pb(this,t,e),gb(t)?t===Lb||null==t||""===t?(this._$AH!==Lb&&this._$AR(),this._$AH=Lb):t!==this._$AH&&t!==Cb&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):yb(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==Lb&&gb(this._$AH)?this._$AA.nextSibling.data=t:this.T(fb.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:i}=t,n="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=Ab.createElement(Tb(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(e);else{const t=new Db(n,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=Nb.get(t.strings);return void 0===e&&Nb.set(t.strings,e=new Ab(t)),e}k(t){mb(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,n=0;for(const s of t)n===e.length?e.push(i=new Eb(this.S(pb()),this.S(pb()),this,this.options)):i=e[n],i._$AI(s),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class Ob{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,n,s){this.type=1,this._$AH=Lb,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Lb}_$AI(t,e=this,i,n){const s=this.strings;let r=!1;if(void 0===s)t=Pb(this,t,e,0),r=!gb(t)||t!==this._$AH&&t!==Cb,r&&(this._$AH=t);else{const n=t;let o,a;for(t=s[0],o=0;o<s.length-1;o++)a=Pb(this,n[i+o],e,o),a===Cb&&(a=this._$AH[o]),r||=!gb(a)||a!==this._$AH[o],a===Lb?t=Lb:t!==Lb&&(t+=(a??"")+s[o+1]),this._$AH[o]=a}r&&!n&&this.j(t)}j(t){t===Lb?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Rb extends Ob{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Lb?void 0:t}}class Wb extends Ob{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Lb)}}class Bb extends Ob{constructor(t,e,i,n,s){super(t,e,i,n,s),this.type=5}_$AI(t,e=this){if((t=Pb(this,t,e,0)??Lb)===Cb)return;const i=this._$AH,n=t===Lb&&i!==Lb||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==Lb&&(i===Lb||n);n&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class Ub{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){Pb(this,t)}}const $b={P:cb,A:ub,C:hb,M:1,L:zb,R:Db,D:yb,V:Pb,I:Eb,H:Ob,N:Wb,U:Bb,B:Rb,F:Ub},Fb=ob.litHtmlPolyfillSupport;Fb?.(Ab,Eb),(ob.litHtmlVersions??=[]).push("3.1.2");const Vb=(t,e,i)=>{const n=i?.renderBefore??e;let s=n._$litPart$;if(void 0===s){const t=i?.renderBefore??null;n._$litPart$=s=new Eb(e.insertBefore(pb(),t),t,void 0,i??{})}return s._$AI(t),s};let Gb=class extends rb{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Vb(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Cb}};Gb._$litElement$=!0,Gb.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:Gb});const Hb=globalThis.litElementPolyfillSupport;function Zb(t,e=""){return t?e:Lb}Hb?.({LitElement:Gb}),(globalThis.litElementVersions??=[]).push("4.0.4");const Yb={cancelable:!0};class Qb extends Event{constructor(t,e=null,i,n){super(n??"change",i??Yb),this.detail=t,this.item=e}handle(t,e){return!(this.defaultPrevented||!t&&(this.preventDefault(),this.stopPropagation(),e?.(),1))}}const Jb=new Map,qb=new Map;class Kb extends xt{constructor(t){super(t,"--cc-canvas-",!1),this.lineWidth=0,this.lineHeight=0,this.scrollSize=6,this.scrollColor="#000",this.scrollRoundness=1,this.scrollOpacity=1}updateInternalValues(){this.lineWidth=this.getSize("line-width",0),this.lineHeight=this.getSize("line-height",0),this.scrollSize=this.getSize("scroll-size",6),this.scrollColor=this.getColor("scroll-color","gray"),this.scrollOpacity=this.getSize("scroll-opacity",1),this.scrollRoundness=this.getSize("scroll-roundness",1)}parse(t){return t}}class Xb{#Xi;#tn;#en;#c;#in;constructor(...t){this.#Xi=qb,this.dblClickMaxDiff=250,this.isMouseInside=!1,this.isMouseDown=!1,this.mousePosition={x:-1,y:-1},this.isScrolling=!1,this.#c=null,this.#in=null,this.size={dpr:1,bounds:new DOMRect,canvas:{width:0,height:0},content:{width:0,height:0}},this.#nn=t=>{const e=this.size;e.dpr=window.devicePixelRatio,e.canvas.width=t.devicePixelContentBoxSize[0].inlineSize,e.canvas.height=t.devicePixelContentBoxSize[0].blockSize,e.content.width=e.canvas.width/e.dpr,e.content.height=e.canvas.height/e.dpr,this.canvas.width=e.canvas.width,this.canvas.height=e.canvas.height,e.bounds=this.canvas.getBoundingClientRect(),this.onSizeChanged()},this.#sn=()=>{const t=this.canvas?.getBoundingClientRect();t&&(this.size.bounds=t)},this.#rn=()=>{this.theme.update(),this.renderFrame(!0)},this.#on=t=>{t.preventDefault(),t.stopPropagation(),!this.isScrolling&&this.onWheel(t)&&this.onScroll()},this.renderFrame=t=>{t?(this.#an=!1,this.#ln()):this.#an=!0},this.#cn=0,this.#un=()=>{this.#an&&(this.#an=!1,this.#ln()),this.#cn=requestAnimationFrame(this.#un)},this.#ln=()=>{const t=this.size,e=this.#tn;if(e.reset(),e.clearRect(0,0,t.canvas.width,t.canvas.height),e.scale(t.dpr,t.dpr),this.render(e,t.content.width,t.content.height),this.isMouseInside){const t=this.theme;e.fillStyle=t.scrollColor,e.globalAlpha=t.scrollOpacity;for(const t of this.#en)t.shouldDraw&&e.fill(t.path,"nonzero")}},this.#hn=t=>{t.isPrimary&&(this.isMouseInside=!0,this.#dn(),this.#fn()&&this.renderFrame(),this.#pn(t))},this.#gn=t=>{t.isPrimary&&(this.#mn(),this.isMouseInside=!1,this.mousePosition.x=this.mousePosition.y=-1,(this.clearHoverInfo()||this.#fn())&&this.renderFrame())},this.#yn=-1,this.#vn=t=>{if(!t.isPrimary||0!==t.button)return;this.isMouseDown=!0,this.#mn();const e=t.timeStamp-this.#yn;if(this.#yn=t.timeStamp,e<this.dblClickMaxDiff)return void this.handleDblClick(t);C(this.#pn,this.#bn,!1),this.canvas.setPointerCapture(t.pointerId);const i=this.#xn(t);if(i?.isVisible)return this.isScrolling=!0,this.#c=i.initScrollByMouse(t),this.clearHoverInfo()&&this.renderFrame(),void I(!0);this.handleMouseDown(t),I(!0)},this.#pn=t=>{t.isPrimary&&(this.#wn(t),this.isMouseDown?this.isScrolling?this.#c(t)&&this.renderFrame():(this.#in=t,this.handleMouseMove(t)):this.#xn(t)?.isVisible?(this.setCursor(),this.clearHoverInfo()&&this.renderFrame()):this.handleMouseHover(t))},this.#bn=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.canvas.releasePointerCapture(t.pointerId),L(),this.#dn(),this.isMouseDown=!1,this.#in=null,this.isScrolling?(this.isScrolling=!1,this.#c=null):this.handleMouseUp(t),this.#xn(t)?.isVisible?this.clearHoverInfo()&&this.renderFrame():this.updateHoverInfo()&&this.renderFrame())},this.canvas=document.createElement("canvas"),this.canvas.id="canvas",this.#tn=this.canvas.getContext("2d",{alpha:!1,willReadFrequently:!1}),this.#en=t,this.theme=this.createTheme(this.canvas),this.theme.addEventListener("update",(()=>this.onThemeChanged()))}createTheme(t){return new Kb(t)}get lineHeight(){return this.theme.lineHeight}get lineWidth(){return this.theme.lineWidth}get contentWidth(){return this.size.content.width}get contentHeight(){return this.size.content.height}activate(){const t=this.canvas;wt.observe(t,this.#nn),window.addEventListener("resize",this.#sn),Ov(this.#rn,!0),t.addEventListener("wheel",this.#on,{passive:!1}),t.addEventListener("pointerenter",this.#hn),t.addEventListener("pointerleave",this.#gn),t.addEventListener("pointerdown",this.#vn),this.canvas.isConnected?this.theme.update():requestAnimationFrame(this.#rn),this.#Mn()}deactivate(){this.#Sn();const t=this.canvas;wt.unobserve(t),window.removeEventListener("resize",this.#sn),Ov(this.#rn,!1),t.removeEventListener("wheel",this.#on),t.removeEventListener("pointerenter",this.#hn),t.removeEventListener("pointerleave",this.#gn),t.removeEventListener("pointerdown",this.#vn),this.mousePosition.x=this.mousePosition.y=-1,this.isScrolling=!1,this.isMouseInside=!1,this.isMouseDown=!1}#nn;#sn;#rn;#on;onSizeChanged(){this.updateScrollbarSize(),this.updateHoverInfo(),this.renderFrame(!0)}onThemeChanged(){const t=this.theme,e={lineHeight:t.lineHeight,roundness:t.scrollRoundness,thickness:t.scrollSize};for(const t of this.#en)t.updateOptions(e)}refresh(t,e){t&&this.invalidate(),this.updateScrollbarSize(),this.updateHoverInfo(),this.renderFrame(e)}updateScrollbarSize(){if(0===this.#en.length)return!1;const{contentWidth:t,contentHeight:e}=this,i=this.size.content;let n=!1;for(const s of this.#en)s.updateSize(i.width,i.height,s.isVertical?e:t)&&(n=!0);return n}handleMouseHover(t){this.updateHoverInfo()&&this.renderFrame()}onScroll(){this.isMouseDown?this.#in&&this.#pn(this.#in):this.updateHoverInfo(),this.renderFrame()}onWheel(t){let e=!1;for(const i of this.#en)i.scrollByWheel(t)&&(e=!0);return e}#an;#cn;#un;#Mn(){this.refresh(!0),this.#un()}#Sn(){this.#cn&&(cancelAnimationFrame(this.#cn),this.#cn=0),this.#an&&(this.#an=!1,this.#ln())}#ln;#wn(t){const e=this.size.bounds;this.mousePosition.x=t.clientX-e.x,this.mousePosition.y=t.clientY-e.y}#fn(){for(const t of this.#en)if(t.isVisible)return!0;return!1}#hn;#gn;#dn(){this.canvas.addEventListener("pointermove",this.#pn)}#mn(){this.canvas.removeEventListener("pointermove",this.#pn)}#yn;#vn;#pn;#bn;#xn(t){const e=this.getMouseX(t),i=this.getMouseY(t);for(const t of this.#en)if(t.contains(e,i))return t;return null}setCursor(t){this.canvas.style.cursor=t??"default"}setTitle(t){this.canvas.title!==t&&(this.canvas.title=t)}getMouseX(t){return t.clientX-this.size.bounds.x}getMouseY(t){return t.clientY-this.size.bounds.y}renderIcon(t,e,i,n,s,r=1,o=1){t.save(),t.globalAlpha*=r,t.translate(n,s),t.scale(o,o),t.translate(-i/2,-i/2),t.fill(this.#Xi.get(e),"nonzero"),t.restore()}renderCenteredText(t,e,i,n,s,r=0){t.textRendering="optimizeLegibility",t.textBaseline="middle",t.beginPath(),t.rect(i,0,n-i,s),t.clip(),t.fillText(e,i,s/2+r)}}class tx extends Gb{#kn;constructor(){super(),this.#kn=document.createElement("div"),this.#kn.id="titlebar"}setTitle(t){this.#kn.textContent=t}firstUpdated(){this.#_n=this.shadowRoot.getElementById("context-menu"),this.#In=this.shadowRoot.getElementById("toast"),this.#kn.textContent||this.setTitle(document.title)}connectedCallback(){super.connectedCallback(),window.addEventListener("wheel",this.#on,{passive:!1})}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("wheel",this.#on)}render(){return Ib`
            ${this.#kn}
            <slot></slot>
            <cc-context-menu id="context-menu"></cc-context-menu>
            <cc-toast id="toast" type="normal" @close=${this.#Cn}></cc-toast>
            `}#on=t=>{(t.ctrlKey||t.metaKey)&&0!==t.deltaY&&0===t.deltaX&&0===t.deltaZ&&t.preventDefault()};blockPointerEvents(t){t?this.style.setProperty("--cc-pointer-events","none","important"):this.style.setProperty("--cc-pointer-events","auto")}#In;#Ln=null;#Cn=()=>{this.#Ln&&(clearTimeout(this.#Ln),this.#Ln=null),this.#In.classList.remove("show")};showToast(t,e,i){const n=this.#In;n.type=e??"normal",n.innerText=t,n.classList.add("show"),clearTimeout(this.#Ln),this.#Ln=setTimeout(this.#Cn,i??5e3)}#_n;#Nn;async showContextMenu(t,e,i,n=!0){if(this.#Nn)return this.#Nn;this.#Nn=this.#_n.open(t,e,i.alignX,i.alignY,i.dirX,i.dirY,i.offsetX,i.offsetY,n);const s=await this.#Nn;return this.#Nn=null,s}#jn=new WeakMap;async showDialog(t,e){let i;const n=this.#jn;n.has(t)?i=n.get(t):(i=document.createElement("cc-dialog"),i.appendChild(t),n.set(t,i)),this.shadowRoot.appendChild(i),await t.init(e);const s=await i.open();return i.remove(),s}static{this.styles=[Vv`
:host {
    display: flex;
    flex-direction: column;
    width: 100vw;
    height: 100vh;
    margin: 0;
    padding: 0;
    color: var(--text-color-default);
    background: var(--surface-color);
    font-size: 14px;
    font-family: -expressive-sans, sans-serif;
    contain: strict;
    --cc-pointer-events: auto;
    --cc-titlebar-height: env(titlebar-area-height, 32px);
}

:host(:not([titlebar])) {
    --cc-titlebar-height: 0px;
    #titlebar {
        display: none;
    }
}

#titlebar {
    app-region: drag;
    width: 100%;
    height: var(--cc-titlebar-height);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    overflow: hidden;
}

::slotted(*) {
    app-region: no-drag;
    flex: 1;
    width: 100vw;
    max-width: 100vw;
    height: calc(100vh - var(--cc-titlebar-height, 0px));
    max-height: calc(100vh - var(--cc-titlebar-height, 0px));
}

#toast {
    position: fixed;
    left: 50%;
    bottom: 64px;
    transform: translateX(-50%);
}

#toast:not(.show) {
    display: none;
}

`]}}function ex(t,e,i,n,s,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!e&&t?n.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d=!1,f=i.length-1;f>=0;f--){var p={};for(var g in n)p[g]="access"===g?{}:n[g];for(var g in n.access)p.access[g]=n.access[g];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,i[f])("accessor"===l?{get:h.get,set:h.set}:h[c],p);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(h.get=a),(a=o(m.set))&&(h.set=a),(a=o(m.init))&&s.unshift(a)}else(a=o(m))&&("field"===l?s.unshift(a):h[c]=a)}u&&Object.defineProperty(u,n.name,h),d=!0}function ix(t,e,i){for(var n=arguments.length>2,s=0;s<e.length;s++)i=n?e[s].call(t,i):e[s].call(t);return n?i:void 0}function nx(t,e,i){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}"function"==typeof SuppressedError&&SuppressedError;const sx={attribute:!0,type:String,converter:ib,reflect:!1,hasChanged:nb},rx=(t=sx,e,i)=>{const{kind:n,metadata:s}=i;let r=globalThis.litPropertyMetadata.get(s);if(void 0===r&&globalThis.litPropertyMetadata.set(s,r=new Map),r.set(i.name,t),"accessor"===n){const{name:n}=i;return{set(i){const s=e.get.call(this);e.set.call(this,i),this.requestUpdate(n,s,t)},init(e){return void 0!==e&&this.P(n,void 0,t),e}}}if("setter"===n){const{name:n}=i;return function(i){const s=this[n];e.call(this,i),this.requestUpdate(n,s,t)}}throw Error("Unsupported decorator location: "+n)};function ox(t){return(e,i)=>"object"==typeof i?rx(t,e,i):((t,e,i)=>{const n=e.hasOwnProperty(i);return e.constructor.createProperty(i,n?{...t,wrapped:!0}:t),n?Object.getOwnPropertyDescriptor(e,i):void 0})(t,e,i)}function ax(t){return ox({...t,state:!0,attribute:!1})}const lx=(t,e,i)=>(i.configurable=!0,i.enumerable=!0,Reflect.decorate&&"object"!=typeof e&&Object.defineProperty(t,e,i),i);function cx(t,e){return(i,n,s)=>{const r=e=>e.renderRoot?.querySelector(t)??null;if(e){const{get:t,set:e}="object"==typeof n?i:s??(()=>{const t=Symbol();return{get(){return this[t]},set(e){this[t]=e}}})();return lx(i,n,{get(){let i=t.call(this);return void 0===i&&(i=r(this),(null!==i||this.hasUpdated)&&e.call(this,i)),i}})}return lx(i,n,{get(){return r(this)}})}}let ux=(()=>{let t,e,i,n=Gb,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],e=[ox({type:String,reflect:!0})],i=[ox({type:Boolean,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:u},s,r),ex(this,null,e,{kind:"accessor",name:"variant",static:!1,private:!1,access:{has:t=>"variant"in t,get:t=>t.variant,set:(t,e)=>{t.variant=e}},metadata:u},o,a),ex(this,null,i,{kind:"accessor",name:"outline",static:!1,private:!1,access:{has:t=>"outline"in t,get:t=>t.outline,set:(t,e)=>{t.outline=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#Tn=ix(this,s,!1);get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#zn=(ix(this,r),ix(this,o,"primary"));get variant(){return this.#zn}set variant(t){this.#zn=t}#An=(ix(this,a),ix(this,l,!1));get outline(){return this.#An}set outline(t){this.#An=t}render(){return Ib`<slot></slot>`}static{this.styles=[Vv`

:host {
    --btn-text: transparent;
    --btn-face: transparent;
    --btn-border: transparent;
    --btn-border-radius: 32px;
}

@container --theme-provider style(--theme: dark) {
    :host {
        --btn-text: var(--text-color-lighter);

        --btn-primary-face: var(--gray-600);
        --btn-primary-face-hover: var(--gray-700);
        --btn-primary-face-down: var(--gray-800);

        --btn-secondary-face: var(--gray-800);
        --btn-secondary-face-hover: var(--gray-700);
        --btn-secondary-face-down: var(--gray-600);

        --btn-primary-outline-face: transparent;
        --btn-primary-outline-face-hover: var(--gray-800);
        --btn-primary-outline-face-down: var(--gray-700);
        --btn-primary-outline-border: var(--white);

        --btn-secondary-outline-face: transparent;
        --btn-secondary-outline-face-hover: var(--gray-800);
        --btn-secondary-outline-face-down: var(--gray-700);
        --btn-secondary-outline-border: var(--gray-600);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --btn-text: var(--text-color-darker);

        --btn-primary-face: var(--gray-200);
        --btn-primary-face-hover: var(--gray-100);
        --btn-primary-face-down: var(--gray-50);

        --btn-secondary-face: var(--gray-50);
        --btn-secondary-face-hover: var(--gray-100);
        --btn-secondary-face-down: var(--gray-200);

        --btn-primary-outline-face: transparent;
        --btn-primary-outline-face-hover: var(--gray-50);
        --btn-primary-outline-face-down: var(--gray-100);
        --btn-primary-outline-border: var(--black);

        --btn-secondary-outline-face: transparent;
        --btn-secondary-outline-face-hover: var(--gray-50);
        --btn-secondary-outline-face-down: var(--gray-100);
        --btn-secondary-outline-border: var(--gray-400);
    }
}

:host {
    font-size: 14px;
    font-weight: 700;
    padding: 7px 14px;
    line-height: 1;

    border-width: 2px;
    border-color: transparent;
    border-style: solid;

    cursor: pointer;
    outline: none;
    user-select: none;
    contain: content;

    border-radius: var(--btn-border-radius);
    box-sizing: border-box;
    height: var(--btn-border-radius);

    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    place-content: center;

    color: var(--btn-text);
    background: var(--btn-face);
    border-color: var(--btn-border);

    --btn-accent-face: var(--accent-color-500);
    --btn-accent-face-hover: var(--accent-color-600);
    --btn-accent-face-down: var(--accent-color-700);
}

::slotted(cc-icon) {
    margin: 0 4px;
}

:host([disabled]) {
    opacity: 45%;
    --btn-face: var(--btn-primary-face) !important;
    pointer-events: none;
}

:host([variant="primary"]) {
    --btn-face: var(--btn-primary-face);
}

:host([variant="primary"]:hover) {
    --btn-face: var(--btn-primary-face-hover);
}

:host([variant="primary"]:active) {
    --btn-face: var(--btn-primary-face-down);
}

:host([variant="secondary"]) {
    --btn-face: var(--btn-secondary-face);
}

:host([variant="secondary"]:hover) {
    --btn-face: var(--btn-secondary-face-hover);
}

:host([variant="secondary"]:active) {
    --btn-face: var(--btn-secondary-face-down);
}

:host([variant="accent"]) {
    --btn-face: var(--btn-accent-face);
    --btn-text: var(--white);
}

:host([variant="accent"]:hover) {
    --btn-face: var(--btn-accent-face-hover);
}

:host([variant="accent"]:active) {
    --btn-face: var(--btn-accent-face-down);
}

:host([variant="primary"][outline]) {
    --btn-face: var(--btn-primary-outline-face);
    --btn-border: var(--btn-primary-outline-border);
}

:host([variant="primary"][outline]:hover) {
    --btn-face: var(--btn-primary-outline-face-hover);
    --btn-border: var(--btn-primary-outline-border);
}

:host([variant="primary"][outline]:active) {
    --btn-face: var(--btn-primary-outline-face-down);
    --btn-border: var(--btn-primary-outline-border);
}

:host([variant="secondary"][outline]) {
    --btn-face: var(--btn-secondary-outline-face);
    --btn-border: var(--btn-secondary-outline-border);
}

:host([variant="secondary"][outline]:hover) {
    --btn-face: var(--btn-secondary-outline-face-hover);
    --btn-border: var(--btn-secondary-outline-border);
}

:host([variant="secondary"][outline]:active) {
    --btn-face: var(--btn-secondary-outline-face-down);
    --btn-border: var(--btn-secondary-outline-border);
}

:host(:not([outline])) {
    border-width: 0;
}

:host([hidden]) {
    display: none;
}
    `]}constructor(){super(...arguments),ix(this,c)}}})(),hx=(()=>{let t,e,i,n,s,r,o=Gb,a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[],m=[],y=[],v=[];return class extends o{static{const b="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],e=[ox({type:String,reflect:!0})],i=[ox({type:Boolean,reflect:!0})],n=[ox({type:Boolean,reflect:!0})],s=[ox({type:Boolean,reflect:!0})],r=[ox({type:Boolean,reflect:!0,attribute:"hold-affordance"})],ex(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:b},a,l),ex(this,null,e,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:t=>"size"in t,get:t=>t.size,set:(t,e)=>{t.size=e}},metadata:b},c,u),ex(this,null,i,{kind:"accessor",name:"quiet",static:!1,private:!1,access:{has:t=>"quiet"in t,get:t=>t.quiet,set:(t,e)=>{t.quiet=e}},metadata:b},h,d),ex(this,null,n,{kind:"accessor",name:"selected",static:!1,private:!1,access:{has:t=>"selected"in t,get:t=>t.selected,set:(t,e)=>{t.selected=e}},metadata:b},f,p),ex(this,null,s,{kind:"accessor",name:"emphasized",static:!1,private:!1,access:{has:t=>"emphasized"in t,get:t=>t.emphasized,set:(t,e)=>{t.emphasized=e}},metadata:b},g,m),ex(this,null,r,{kind:"accessor",name:"holdAffordance",static:!1,private:!1,access:{has:t=>"holdAffordance"in t,get:t=>t.holdAffordance,set:(t,e)=>{t.holdAffordance=e}},metadata:b},y,v),b&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:b})}#Tn=ix(this,a,!1);get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#Pn=(ix(this,l),ix(this,c,void 0));get size(){return this.#Pn}set size(t){this.#Pn=t}#Dn=(ix(this,u),ix(this,h,!1));get quiet(){return this.#Dn}set quiet(t){this.#Dn=t}#En=(ix(this,d),ix(this,f,!1));get selected(){return this.#En}set selected(t){this.#En=t}#On=(ix(this,p),ix(this,g,!1));get emphasized(){return this.#On}set emphasized(t){this.#On=t}#Rn=(ix(this,m),ix(this,y,!1));get holdAffordance(){return this.#Rn}set holdAffordance(t){this.#Rn=t}#Wn=ix(this,v);constructor(){super(),this.#Wn=document.createElement("slot")}render(){return this.#Wn}static{this.styles=[Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --action-btn-face: var(--gray-800);
        --action-btn-face-hover: var(--gray-700);
        --action-btn-face-down: var(--gray-600);

        --action-btn-text: var(--text-color-default);
        --action-btn-text-selected: var(--white);
        --action-btn-text-accent: var(--white);

        --action-btn-face-quiet: transparent;
        --action-btn-face-quiet-hover: var(--gray-800);
        --action-btn-face-quiet-down: var(--gray-700);

        --action-btn-face-selected: var(--gray-600);
        --action-btn-face-selected-hover: var(--gray-700);
        --action-btn-face-selected-down: var(--gray-800);
    }

    :host([input-face]) {
        --action-btn-face: var(--gray-1000);
        --action-btn-face-hover: var(--gray-1000);
        --action-btn-face-down: var(--black);

        --action-btn-face-selected: var(--gray-1000);
        --action-btn-face-selected-hover: var(--gray-1000);
        --action-btn-face-selected-down: var(--black);

        --action-btn-border-hover: var(--gray-700);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --action-btn-face: var(--gray-100);
        --action-btn-face-hover: var(--gray-200);
        --action-btn-face-down: var(--gray-300);

        --action-btn-text: var(--text-color-default);
        --action-btn-text-selected: var(--black);
        --action-btn-text-accent: var(--white);

        --action-btn-face-quiet: transparent;
        --action-btn-face-quiet-hover: var(--gray-50);
        --action-btn-face-quiet-down: var(--gray-100);

        --action-btn-face-selected: var(--gray-300);
        --action-btn-face-selected-hover: var(--gray-200);
        --action-btn-face-selected-down: var(--gray-100);
    }

    :host([input-face]) {
        --action-btn-face: var(--gray-50);
        --action-btn-face-hover: var(--gray-50);
        --action-btn-face-down: var(--gray-200);

        --action-btn-face-selected: var(--gray-50);
        --action-btn-face-selected-hover: var(--gray-50);
        --action-btn-face-selected-down: var(--gray-200);

        --action-btn-border-hover: var(--gray-300);
    }
}

:host {
    --action-btn-padding: 3px;
    --action-btn-border-size: 4px;

    color: var(--action-btn-text);

    font-size: var(--action-btn-font-size, 14px);

    line-height: 1;
    appearance: none;
    border-radius: calc(var(--action-btn-border-size) * var(--cc-border-tl, 1)) calc(var(--action-btn-border-size) * var(--cc-border-tr, 1)) calc(var(--action-btn-border-size) * var(--cc-border-br, 1)) calc(var(--action-btn-border-size) * var(--cc-border-bl, 1));
    border: none;
    cursor: pointer;
    outline: none;
    user-select: none;

    padding: var(--action-btn-padding);

    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    place-content: center;
    contain: paint;

    --action-btn-face-selected-emp: var(--accent-color-500);
    --action-btn-face-selected-emp-hover: var(--accent-color-600);
    --action-btn-face-selected-emp-down: var(--accent-color-700);
}

:host {
    background-color: var(--action-btn-bg, var(--action-btn-face));
}
:host(:hover) {
    background-color: var(--action-btn-bg-hover, var(--action-btn-face-hover));
}
:host(:active), :host([active]) {
    background-color: var(--action-btn-bg-active, var(--action-btn-face-down));
}

:host([disabled]) {
    opacity: 45%;
    background-color: var(--action-btn-face) !important;
    pointer-events: none;
}

:host([disabled][quiet]) {
    background-color: transparent !important;
}


:host([quiet]) {
    --action-btn-bg: var(--action-btn-face-quiet);
    --action-btn-bg-hover: var(--action-btn-face-quiet-hover);
    --action-btn-bg-active: var(--action-btn-face-quiet-down);
}

:host([input-face]) {
    --action-btn-font-size: 12px;
    overflow: hidden;
    box-sizing: border-box;
    border: 1px solid var(--action-btn-face);
    padding: calc(var(--action-btn-padding) - 1px);
}
:host([input-face][selected]) {
    border: 1px solid var(--accent-color-500);
}
:host([input-face]:not([selected]):hover) {
    border: 1px solid var(--action-btn-border-hover);
}

slot {
    pointer-events: none;
}

@container --cc-quiet-provider style(--cc-quiet: true) {
    :host {
        --action-btn-bg: var(--action-btn-face-quiet);
        --action-btn-bg-hover: var(--action-btn-face-quiet-hover);
        --action-btn-bg-active: var(--action-btn-face-quiet-down);
    }
    :host([disabled]) {
        background-color: transparent !important;
    }
}

:host([size="m"]) {
    --action-btn-padding: 7px;
}
@container --cc-size-provider style(--cc-size: m) {
    :host {
        --action-btn-padding: 7px;
    }
}

:host([hold-affordance])::after {
    --action-btn-indicator-size: 4px;
    content: "";
    width: var(--action-btn-indicator-size);
    border-top: var(--action-btn-indicator-size) solid transparent;
    border-right: var(--action-btn-indicator-size) solid currentColor;
    position: absolute;
    right: 2px;
    bottom: 2px;
    user-select: none;
    pointer-events: none;
}

:host([selected]) {
    --action-btn-bg: var(--action-btn-face-selected);
    --action-btn-bg-hover: var(--action-btn-face-selected-hover);
    --action-btn-bg-active: var(--action-btn-face-selected-down);
}

:host([selected][emphasized]) {
    color: var(--action-btn-text-accent);
    --action-btn-bg: var(--action-btn-face-selected-emp);
    --action-btn-bg-hover: var(--action-btn-face-selected-emp-hover);
    --action-btn-bg-active: var(--action-btn-face-selected-emp-down);
}

@container --cc-emphasized-provider style(--cc-emphasized: true) {
    :host([selected]) {
        color: var(--action-btn-text-accent);
        --action-btn-bg: var(--action-btn-face-selected-emp);
        --action-btn-bg-hover: var(--action-btn-face-selected-emp-hover);
        --action-btn-bg-active: var(--action-btn-face-selected-emp-down);
    }
}
    `]}}})();const dx=Vv`
:host {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;

    align-items: center;
    justify-content: flex-start;
    user-select: none;

    gap: 8px;

    --cc-border-tl: 1;
    --cc-border-tr: 1;
    --cc-border-br: 1;
    --cc-border-bl: 1;

    contain: paint;

    container-name: --cc-size-provider --cc-quiet-provider --cc-emphasized-provider;
    container-type: normal;
}
:host([disabled]) {
    pointer-events: none;
}
:host([justify="center"]) {
    justify-content: center;
}
:host([justify="end"]) {
    justify-content: flex-end;
}

:host([quiet]) {
    --cc-quiet: true;
}
:host([emphasized]) {
    --cc-emphasized: true;
}
:host([size="m"]) {
    --cc-size: m;
}

:host([vertical]) {
    flex-direction: column;
}

:host([compact]) {
    gap: 0;
    --cc-border-tl: 0;
    --cc-border-tr: 0;
    --cc-border-br: 0;
    --cc-border-bl: 0;
}
:host([gapless]) {
    gap: 0;
}
`,fx=Vv`
:host([compact]) > :first-child {
    --cc-border-tl: 1;
    --cc-border-tr: 0;
    --cc-border-br: 0;
    --cc-border-bl: 1;
}

:host([compact][vertical]) > :first-child {
    --cc-border-tl: 1;
    --cc-border-tr: 1;
    --cc-border-br: 0;
    --cc-border-bl: 0;
}

:host([compact]) > :last-child {
    --cc-border-tl: 0;
    --cc-border-tr: 1;
    --cc-border-br: 1;
    --cc-border-bl: 0;
}
:host([compact][vertical]) > :last-child {
    --cc-border-tl: 0;
    --cc-border-tr: 0;
    --cc-border-br: 1;
    --cc-border-bl: 1;
}
`,px=Vv`
:host([compact]) > cc-action-button:first-of-type {
    --cc-border-tl: 1;
    --cc-border-tr: 0;
    --cc-border-br: 0;
    --cc-border-bl: 1;
}

:host([compact][vertical]) > cc-action-button:first-of-type {
    --cc-border-tl: 1;
    --cc-border-tr: 1;
    --cc-border-br: 0;
    --cc-border-bl: 0;
}

:host([compact]) > cc-action-button:last-of-type {
    --cc-border-tl: 0;
    --cc-border-tr: 1;
    --cc-border-br: 1;
    --cc-border-bl: 0;
}
:host([compact][vertical]) > cc-action-button:last-of-type {
    --cc-border-tl: 0;
    --cc-border-tr: 0;
    --cc-border-br: 1;
    --cc-border-bl: 1;
}
`,gx=Vv`
:host([compact]) ::slotted(*:first-child) {
    --cc-border-tl: 1;
    --cc-border-tr: 0;
    --cc-border-br: 0;
    --cc-border-bl: 1;
}

:host([compact][vertical]) ::slotted(*:first-child) {
    --cc-border-tl: 1;
    --cc-border-tr: 1;
    --cc-border-br: 0;
    --cc-border-bl: 0;
}

:host([compact]) ::slotted(*:last-child) {
    --cc-border-tl: 0;
    --cc-border-tr: 1;
    --cc-border-br: 1;
    --cc-border-bl: 0;
}
:host([compact][vertical]) ::slotted(*:last-child) {
    --cc-border-tl: 0;
    --cc-border-tr: 0;
    --cc-border-br: 1;
    --cc-border-bl: 1;
}
`,mx=Vv`:host {pointer-events: var(--cc-pointer-events, auto)}`,yx=Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --input-face: var(--gray-1000);

        --input-border-hover: var(--gray-700);
        --input-border-selected: var(--accent-color-500);

        --input-text: var(--text-color-default);
        --input-placeholder-text: var(--gray-500);
        --input-icon: var(--text-color-darker);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --input-face: var(--gray-50);

        --input-border-hover: var(--gray-300);
        --input-border-selected: var(--accent-color-500);

        --input-text: var(--text-color-default);
        --input-placeholder-text: var(--gray-400);
        --input-icon: var(--text-color-lighter);
    }
}

#input,
#input::-webkit-outer-spin-button,
#input::-webkit-inner-spin-button {
    appearance: none;
}

#input {
    box-sizing: border-box;
    border: none;
    outline: none;
    color: var(--input-text);
    font-size: 12px;
    font-family: -expressive-sans;
    text-overflow: ellipsis;
    overflow: visible;
    text-align: left;
    width: 100%;
    height: 100%;
    background: none;
    user-select: text;
    flex: 1;
    padding: 0;
}

:host([indeterminate]) #input::placeholder {
    display: none !important;
}

#input::placeholder {
    color: var(--input-placeholder-text);
}

:host {
    display: flex;
    align-items: center;

    box-sizing: border-box;
    contain: content;
    height: 24px;

    color: var(--text-color-default);
    background-color: var(--input-face);
    border: 1px solid transparent;

    gap: 8px;
    padding: 0 3px;

    user-select: none;

    font-family: -expressive-sans;
    --input-border-size: 4px;

    border-radius: calc(var(--input-border-size) * var(--cc-border-tl, 1)) calc(var(--input-border-size) * var(--cc-border-tr, 1)) calc(var(--input-border-size) * var(--cc-border-br, 1)) calc(var(--input-border-size) * var(--cc-border-bl, 1));
}

:host([padded]) #input {
    padding-left: 4px;
}

::slotted(*) {
    color: var(--input-icon);
    flex-shrink: 0;
}

:host([quiet]) {
    background: none;
    border: none;
    padding: 0;
}

:host(:not([quiet]):hover) {
    border: 1px solid var(--input-border-hover);
}

:host([active]:not([quiet])),
:host(:not([quiet]):focus-within) {
    border: 1px solid var(--input-border-selected);
}

:host([disabled]) {
    opacity: 45%;
    pointer-events: none;
}

:host([text-center]) #input {
    text-align: center;
}

:host([text-right]) #input {
    text-align: right;
}

:host([size="m"]) {
    height: 32px;
}
@container --cc-size-provider style(--cc-size: m) {
    :host {
        height: 32px;
    }
}
`,vx=Vv`
*[badge]::before {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;

    top: 1px;
    right: 1px;

    border-radius: 2px;
    padding: 1px;

    background: var(--accent-color-500);
    color: #fff;

    font-family: -expressive-mono;
    line-height: 1;
    font-size: 7px;
    content: attr(badge);
}

*[badge][disabled]::before {
    filter: grayscale(1);
}

*[badge][badge-left]::before {
    right: unset;
    left: 1px;
}

*[badge][badge-hover]::before {
    opacity: 0;
    transition: 0.125s ease-in-out opacity;
}
*[badge][badge-hover]:hover::before {
    opacity: 1;
}
`;function bx(t,e){return Fv(`\n${t} {\n    overflow-x: hidden !important;\n    overflow-y: scroll !important;\n\n    outline: none !important;\n    line-height: normal;\n\n    display: block;\n\n    box-sizing: border-box;\n    overscroll-behavior: contain;\n    scrollbar-gutter: stable both-edges;\n}\n\n${t}::-webkit-scrollbar {\n    width: var(--scrollbar-size);\n    height: var(--scrollbar-size);\n}\n\n${t}::-webkit-scrollbar-corner {\n    display: none;\n}\n\n${t}::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n${t}::-webkit-scrollbar-thumb {\n    background: transparent;\n    border-radius: var(--scrollbar-size);\n}\n\n${t}${e?"(:hover)":":hover"}::-webkit-scrollbar-thumb {\n    background: var(--scrollbar-color);\n}\n`)}bx(":host",!0);const xx=Vv`:host{display:contents}`,wx=Vv`.text-ellipsis{
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
}`;class Mx extends Gb{firstUpdated(){this.style.containerName="--cc-size-provider --cc-quiet-provider --cc-emphasized-provider"}render(){return Ib`<slot></slot>`}static{this.styles=[dx,gx]}}let Sx=(()=>{let t,e=Gb,i=[];return class extends e{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:String,reflect:!1,noAccessor:!0})],ex(this,null,t,{kind:"setter",name:"name",static:!1,private:!1,access:{has:t=>"name"in t,set:(t,e)=>{t.name=e}},metadata:n},null,i),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#Bn=void ix(this,i);#Un=void 0;get name(){return this.#Bn}set name(t){this.#Bn!==t&&(this.#Bn=t,this.#Un?.remove(),this.#Un=void 0,this.requestUpdate())}get#$n(){return void 0===this.#Un&&(this.#Un=Jb.get(this.#Bn)||null,this.#Un&&(this.#Un=this.#Un.cloneNode(!0))),this.#Un}render(){return this.#$n||Lb}static{this.styles=[Vv`
:host {
    display: inline-block;
    width: 18px;
    height: 18px;
    user-select: none;
    pointer-events: none;
    color: inherit;
    box-sizing: content-box;
    contain: strict;
}

:host([padded]) {
    padding: 3px;
}

svg {
    width: 100%;
    height: 100%;
    stroke: none;
    fill: currentColor;
}

svg > * {
    shape-rendering: geometricPrecision;
}
    `]}}})(),kx=(()=>{let t,e=Gb,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:String,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"name",static:!1,private:!1,access:{has:t=>"name"in t,get:t=>t.name,set:(t,e)=>{t.name=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#Fn=ix(this,i,"");get name(){return this.#Fn}set name(t){this.#Fn=t}render(){return Lb}static{this.styles=Vv`
:host {
    display: inline-block;
    width: 18px;
    height: 18px;
    user-select: none;
    pointer-events: none;
    background: var(--icon-color, currentColor);
    clip-path: path(evenodd, var(--icon-path));
    box-sizing: content-box;
    contain: strict;
}

:host([padded]) {
    padding: 3px;
}

:host([name=""]), :host(:not([name])) {
    visibility: hidden;
}

:host([name="Checkmark"]) {
    --icon-path: "M15.656,3.8625l-.7275-.5665a.5.5,0,0,0-.7.0875L7.411,12.1415,4.0875,8.8355a.5.5,0,0,0-.707,0L2.718,9.5a.5.5,0,0,0,0,.707l4.463,4.45a.5.5,0,0,0,.75-.0465L15.7435,4.564A.5.5,0,0,0,15.656,3.8625Z";
}
:host([name="ChevronDown"]) {
    --icon-path: "M4,7.01a1,1,0,0,1,1.7055-.7055l3.289,3.286,3.289-3.286a1,1,0,0,1,1.437,1.3865l-.0245.0245L9.7,11.7075a1,1,0,0,1-1.4125,0L4.293,7.716A.9945.9945,0,0,1,4,7.01Z";
}
:host([name="Close"]) {
    --icon-path: "M13.2425,3.343,9,7.586,4.7575,3.343a.5.5,0,0,0-.707,0L3.343,4.05a.5.5,0,0,0,0,.707L7.586,9,3.343,13.2425a.5.5,0,0,0,0,.707l.707.7075a.5.5,0,0,0,.707,0L9,10.414l4.2425,4.243a.5.5,0,0,0,.707,0l.7075-.707a.5.5,0,0,0,0-.707L10.414,9l4.243-4.2425a.5.5,0,0,0,0-.707L13.95,3.343a.5.5,0,0,0-.70711-.00039Z";
}
:host([name="MaintainChecked"]) {
    --icon-path: "M14,9a3.419,3.419,0,0,0-3.333-3.5H7.333A3.419,3.419,0,0,0,4,9a3.419,3.419,0,0,0,3.333,3.5h3.334A3.419,3.419,0,0,0,14,9ZM7,14.5a5.5,5.5,0,0,1,0-11V2A7,7,0,0,0,7,16ZM11,2V3.5a5.5,5.5,0,0,1,0,11V16A7,7,0,0,0,11,2Z";
}
:host([name="MaintainUnchecked"]) {
    --icon-path: "M7,14.5a5.5,5.5,0,0,1,0-11V2A7,7,0,0,0,7,16ZM11,2V3.5a5.5,5.5,0,0,1,0,11V16A7,7,0,0,0,11,2Z";
}
:host([name="Play"]) {
    --icon-path: "M4,2.529V15.471a.521.521,0,0,0,.784.456L15.741,9.456a.531.531,0,0,0,0-.912L4.784,2.073A.521.521,0,0,0,4,2.529Z";
}
:host([name="Pause"]) {
    --icon-path: "M16,2.5c0-.3333-.1667-.5-.5-.5h-5c-.3333,0-.5.1667-.5.5v13c0,.3333.1667.5.5.5h5c.3333,0,.5-.1667.5-.5V2.5Zm-8,0c0-.3333-.1667-.5-.5-.5H2.5c-.3333,0-.5.1667-.5.5v13c0,.3333.1667.5.5.5h5c.3333,0,.5-.1667.5-.5V2.5Z";
}
:host([name="SwapArrows"]) {
    --icon-path: "M16.937,12.084A.252.252,0,0,0,16.75,12H14.125V8.5A3.629,3.629,0,0,0,10.5,4.875H6V2.25a.25.25,0,0,0-.437-.166L2.17,5.6a.251.251,0,0,0,0,.35l3.39,3.4A.25.25,0,0,0,6,9.182V6.125h4.5A2.377,2.377,0,0,1,12.875,8.5V12H9.818a.25.25,0,0,0-.166.437l3.4,3.39a.251.251,0,0,0,.35,0l3.513-3.393A.25.25,0,0,0,16.937,12.084Z";
}
:host([name="SwapArrowUpLeft"]) {
    --icon-path: "M13.5,14.875A7.384,7.384,0,0,1,6.125,7.5V6H9.182a.25.25,0,0,0,.166-.437L5.836,2.17a.252.252,0,0,0-.351,0l-3.4,3.39A.25.25,0,0,0,2.25,6H4.875V7.5A8.635,8.635,0,0,0,13.5,16.125H16v-1.25Z";
}
:host([name="SwapArrowDownRight"]) {
    --icon-path: "M3.238,4.5a7.383,7.383,0,0,0,7.375,7.375h1.5V8.818a.247.247,0,0,1,.084-.187.25.25,0,0,1,.353.021l3.392,3.512a.25.25,0,0,1,0,.351l-3.389,3.4a.254.254,0,0,1-.188.084.249.249,0,0,1-.249-.25V13.125h-1.5A8.635,8.635,0,0,1,1.988,4.5V2h1.25Z";
}
:host([name="EvenOdd"]) {
    --icon-path: "M15.562,2H2.437A.438.438,0,0,0,2,2.438V15.562A.438.438,0,0,0,2.437,16H15.562A.438.438,0,0,0,16,15.562V2.438A.438.438,0,0,0,15.562,2ZM9,13a4,4,0,1,1,4-4A4,4,0,0,1,9,13Z";
}
:host([name="NonZero"]) {
    --icon-path: "M6,9a3,3 0 1,0 6,0a3,3 0 1,0 -6,0M15.562,2H2.437A.438.438,0,0,0,2,2.438V15.562A.438.438,0,0,0,2.437,16H15.562A.438.438,0,0,0,16,15.562V2.438A.438.438,0,0,0,15.562,2ZM9,13a4,4,0,1,1,4-4A4,4,0,0,1,9,13Z";
}
:host([name="RectRadiusSame"]) {
    --icon-path: "M14,2a2,2,0,0,1,2,2V14a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V4A2,2,0,0,1,4,2H14m0-1H4A3,3,0,0,0,1,4V14a3,3,0,0,0,3,3H14a3,3,0,0,0,3-3V4a3,3,0,0,0-3-3Z";
}
:host([name="RectRadiusSeparate"]) {
    --icon-path: "M2,7V4A2,2,0,0,1,4,2H7V1H4A3,3,0,0,0,1,4V7ZM11,2h3a2,2,0,0,1,2,2V7h1V4a3,3,0,0,0-3-3H11ZM7,16H4a2,2,0,0,1-2-2V11H1v3a3,3,0,0,0,3,3H7ZM16,11v3a2,2,0,0,1-2,2H11v1h3a3,3,0,0,0,3-3V11Z";
}
:host([name="Folder"]) {
    --icon-path: "M16.5,4l-7.166.004-1.65-1.7A1,1,0,0,0,6.9645,2H2A1,1,0,0,0,1,3V14.5a.5.5,0,0,0,.5.5h15a.5.5,0,0,0,.5-.5V4.5A.5.5,0,0,0,16.5,4ZM2,3H6.9645L8.908,5H2Z";
}
`}constructor(){super(...arguments),ix(this,n)}}})();class _x{#Vn;#Gn;constructor(t){this.started=!1,this.inherited=!1,this.#Vn=null,this.#Gn=!1,this.#Gn=!!t}start(t){this.started||(this.started=!0,this.#Vn?.dispatchEvent(new CustomEvent("start",{bubbles:this.#Gn,detail:t})))}update(t){this.started||this.start(t),this.#Vn?.dispatchEvent(new CustomEvent("update",{bubbles:this.#Gn,detail:t}))}end(){this.started&&(this.started=!1,this.#Vn?.dispatchEvent(new Event("end",{bubbles:this.#Gn})))}connect(t){this.#Vn!==t&&this.end(),this.#Vn=t}disconnect(){this.end(),this.#Vn=null}}const Ix=[],Cx=new WeakMap;function Lx(t){Ix.push(t),Cx.set(t,document.activeElement),t.showModal()}function Nx(){const t=Ix.pop();if(t&&Cx.has(t)){const e=Cx.get(t);Cx.delete(t),e instanceof HTMLElement&&e.isConnected&&e.focus()}}const jx={cancelable:!0,bubbles:!1,composed:!1};function Tx(t){Ix.at(-1)?.dispatchEvent(new CustomEvent("send-response",{detail:t,...jx}))}function zx(t,e,i,n,s,r,o,a){let l=s+(r-s)*i;switch(n){case-1:if(l-e-t<o){if(.5===i)return o;const n=s+(r-s)*(1-i);return n+e+t>a?a-t:n}return l-e-t;case 1:if(l+e+t>a){if(.5===i)return a-t;const n=s+(r-s)*(1-i);return n-e-t<o?o:n-e-t}return l+e<o?o:l+e}if(t>a-o)return(a-o-t)/2;const c=l-t/2;return c<o?o:l+t/2<=a?c:a-t}function Ax(t,e,i,n,s,r,o=0,a=0){const{x:l,y:c}=function(t,e,i,n,s,r,o=0,a=0){const l=function(){const t=document.documentElement;return new DOMRect(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}(),c=function(t){return t instanceof HTMLElement?t.getBoundingClientRect():t instanceof DOMRect?t:new DOMRect(t.x,t.y,0,0)}(e);return{x:zx(t.width,o,i,s,c.left,c.right,l.left,l.right),y:zx(t.height,a,n,r,c.top,c.bottom,l.top,l.bottom)}}(t.getBoundingClientRect(),e,i,n,s,r,o,a);t.style.transform=`translate(${l}px, ${c}px)`}class Px extends Gb{#Hn;#Zn;firstUpdated(){this.#Hn=this.shadowRoot.getElementById("dialog"),this.#Zn=this.shadowRoot.getElementById("popover")}render(){return Ib`<dialog title="" id="dialog" @send-response=${this.#Yn} @cancel=${this.#Qn} @close=${this.#Jn} @click=${this.#qn}>
            <div id="popover" part="popover">
                <slot id="slot"></slot>
            </div>
        </dialog>`}#Kn;#Xn;#ts;get isOpen(){return null!=this.#Kn}async open(t,e=1,i=0,n=1,s=1,r=0,o=0){return this.#Kn?this.#Kn:this.#Kn=new Promise((a=>{this.#Xn=a,queueMicrotask((()=>{this.setAttribute("open",""),Lx(this.#Hn),Ax(this.#Hn,t,e,i,n,s,r,o);const a=this.shadowRoot.getElementById("slot");for(const t of a.assignedElements())t.dispatchEvent(new Event("popover-visible"))}))}))}close(t){this.#Kn&&(this.#ts=t,this.#Hn.close())}#Yn=t=>{t.stopPropagation(),this.close(t.detail)};#Qn=t=>{t.preventDefault(),t.stopPropagation(),this.close()};#Jn=()=>{if(Nx(),this.removeAttribute("open"),this.#Kn){const t=this.#Xn,e=this.#ts;this.#Xn=this.#Kn=this.#ts=void 0,t(e)}};#qn=t=>{t.composedPath().includes(this.#Zn)||this.close()};static{this.styles=[Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --popover-face: var(--gray-1000);
        --popover-border: var(--gray-700);
        --popover-shadow: 1px 4px 8px -2px rgb(0 0 0);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --popover-face: var(--white);
        --popover-border: var(--gray-100);
        --popover-shadow: 1px 4px 8px -2px rgb(0 0 0 / 15%);
    }
}

:host {
    cursor: default;
    display: contents;
}

#dialog {
    appearance: none;
    border: none;
    outline: none;
    background: none;
    padding: 16px !important;
    margin: 0 !important;
    overflow: hidden;
    box-sizing: border-box;
    border-radius: 4px;
    max-width: 100vw;
    max-height: 100vh;
    contain: content;
}
#dialog::backdrop {
    background: transparent;
}

#popover {
    color: var(--text-color-default);
    background-color: var(--popover-face);
    border: 1px solid var(--popover-border);
    padding: 4px 0;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    box-shadow: var(--popover-shadow);
    box-sizing: border-box;
    user-select: none;
    min-width: var(--popover-min-width, 24px);
}

    `]}}const Dx=t=>t??Lb;let Ex=(()=>{let t,e,i,n,s,r=Gb,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[];return class extends r{static{const m="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[ox({type:String,reflect:!1})],e=[ox({type:Boolean,reflect:!1})],i=[ox({type:Object,attribute:!1})],n=[ox({type:Boolean,reflect:!0})],s=[ox({type:String,reflect:!1})],ex(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:m},o,a),ex(this,null,e,{kind:"accessor",name:"lazy",static:!1,private:!1,access:{has:t=>"lazy"in t,get:t=>t.lazy,set:(t,e)=>{t.lazy=e}},metadata:m},l,c),ex(this,null,i,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:m},u,h),ex(this,null,n,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:m},d,f),ex(this,null,s,{kind:"accessor",name:"placeholder",static:!1,private:!1,access:{has:t=>"placeholder"in t,get:t=>t.placeholder,set:(t,e)=>{t.placeholder=e}},metadata:m},p,g),m&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})}#es=ix(this,o,void 0);get value(){return this.#es}set value(t){this.#es=t}#is=(ix(this,a),ix(this,l,!1));get lazy(){return this.#is}set lazy(t){this.#is=t}#ns=(ix(this,c),ix(this,u,[]));get items(){return this.#ns}set items(t){this.#ns=t}#Tn=(ix(this,h),ix(this,d,!1));get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#ss=(ix(this,f),ix(this,p,void 0));get placeholder(){return this.#ss}set placeholder(t){this.#ss=t}#Zn=ix(this,g);#rs=!1;firstUpdated(){this.#Zn=this.shadowRoot.getElementById("popover")}get#os(){const t=this.value;if(void 0!==t){const e=this.items.find((e=>e&&"object"==typeof e&&e.value===t));if(e)return e.title}return this.placeholder||""}render(){let t=Lb;return!this.#rs&&this.lazy||(t=this.items.map(this.#as)),Ib`
            <div id="wrapper" @click=${this.#ls}>
                <div id="label" class="text-ellipsis">${this.#os}</div>
                <cc-css-icon id="icon" name="ChevronDown"></cc-css-icon>
            </div>
            <cc-popover id="popover" @click=${this.#cs}>${t}</cc-popover>
        `}#cs(t){const e=t.target;if(!e.classList.contains("item"))return;if(void 0===e.dataset.index)return;const i=parseInt(e.dataset.index),n=this.items[i];n&&"object"==typeof n&&this.#Zn.close(n)}#as=(t,e)=>{if(!t)return Ib`<div class="divider"></div>`;if("string"==typeof t)return Ib`<div class="header">${t}</div>`;const i=this.value===t.value;return Ib`<cc-menu-item class="item" .disabled=${!!t.disabled} data-index=${e} badge=${Dx(t.badge)}>
            <cc-css-icon class="icon" slot="before" name=${i?"Checkmark":""}></cc-css-icon>
            ${t.title}
        </cc-menu-item>`};async#ls(){this.setAttribute("open","");const t=this.#Zn,e=this.getBoundingClientRect();t.style.setProperty("--popover-min-width",e.width+"px"),this.lazy&&(this.#rs=!0,this.requestUpdate(),await this.updateComplete,this.#rs=!1);const i=await t.open(e,.5,1,0,1,0,-12);this.removeAttribute("open");const n=i?.value;void 0!==n&&n!==this.value&&this.dispatchEvent(new Qb(n,i))&&(this.value=n)}static{this.styles=[vx,wx,Vv`
@container --theme-provider style(--theme: light) {
    :host {
        --picker-face: var(--gray-50);
        --picker-face-hover: var(--gray-50);
        --picker-face-down: var(--gray-200);

        --picker-border-hover: var(--gray-300);

        --picker-divider: var(--gray-100);
    }
}

@container --theme-provider style(--theme: dark) {
    :host {

        --picker-face: var(--gray-1000);
        --picker-face-hover: var(--gray-1000);
        --picker-face-down: var(--black);

        --picker-border-hover: var(--gray-700);

        --picker-divider: var(--gray-700);
    }
}

:host {
    display: block;
    height: 24px;
    background-color: var(--picker-face);
    color: var(--text-color-default);
    border: 1px solid var(--picker-face);

    --picker-border: transparent;
    --picker-border-selected: var(--accent-color-500);

    --picker-border-size: 4px;
    border-radius: calc(var(--picker-border-size) * var(--cc-border-tl, 1)) calc(var(--picker-border-size) * var(--cc-border-tr, 1)) calc(var(--picker-border-size) * var(--cc-border-br, 1)) calc(var(--picker-border-size) * var(--cc-border-bl, 1));
    padding: 0 3px 0 7px;

    box-sizing: border-box;
    width: 100%;
}

#label {
    flex: 1;
    pointer-events: none;
    font-size: 12px;
}

#wrapper {
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    gap: 3px;
    cursor: pointer;
    user-select: none;
}

:host([disabled]) {
    opacity: 45%;
    pointer-events: none !important;
}

:host(:hover) {
    border-color: var(--picker-border-hover);
}

:host(:active) {
    background-color: var(--picker-face-down);
}

:host([open]) {
    background-color: var(--picker-face-down);
    border-color: var(--picker-border-selected);
}

:host([size="m"]) {
    height: 32px;
}
@container --cc-size-provider style(--cc-size: m) {
    :host {
        height: 32px;
    }
}

#popover {
    width: 100%;
    max-height: 50vh;
}

.divider {
    pointer-events: none;
    background: var(--picker-divider);
    width: 100%;
    height: 1px;
    margin: 1px 0;
}

.header {
    pointer-events: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 0 8px;
    font-size: 10px;
    opacity: 75%;
}

.item:not([disabled]) > .icon {
    color: var(--accent-color-500);
}
`]}}})();const Ox=t=>(...e)=>({_$litDirective$:t,values:e});let Rx=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};const Wx="important",Bx=" !"+Wx,Ux=Ox(class extends Rx{constructor(t){if(super(t),1!==t.type||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const n=t[i];return null==n?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`}),"")}update(t,[e]){const{style:i}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(const t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?i.removeProperty(t):i[t]=null);for(const t in e){const n=e[t];if(null!=n){this.ft.add(t);const e="string"==typeof n&&n.endsWith(Bx);t.includes("-")||e?i.setProperty(t,e?n.slice(0,-11):n,e?Wx:""):i[t]=n}}return Cb}}),$x={min:0,max:100,step:1};let Fx=(()=>{let t,e,i,r,o,a,l,c=Gb,u=[],h=[],d=[],f=[],p=[],g=[],m=[],y=[],v=[],b=[],w=[],M=[];return class extends c{constructor(){super(...arguments),this.#es=ix(this,u,void 0),this.#us=(ix(this,h),ix(this,d,$x)),this.#Tn=(ix(this,f),ix(this,p,!1)),this.#hs=(ix(this,g),ix(this,m,!1)),this.#ds=(ix(this,y),ix(this,v,void 0)),this.#fs=(ix(this,b),ix(this,w,void 0)),this.stream=(ix(this,M),null),this.#ps=null,this.#vn=t=>{if(t.preventDefault(),!t.isPrimary||0!==t.button)return;const e=this.#gs;e.setAttribute("active",""),C(this.#pn,this.#bn),e.setPointerCapture(t.pointerId),this.#ps=e.getBoundingClientRect(),x(),this.#ms.start(this.value),t.target===e&&this.#pn(t)},this.#pn=t=>{const e=this.offsetHeight,i=this.#ps,r=n((t.clientX-(i.left+e/2))/(i.width-e)),o=this.constraint;let a=o.min+r*(o.max-o.min);a=s(a,o.step,o.min,o.max),this.value!==a&&(this.value=a,this.#ms.update(a))},this.#bn=t=>{if(!t.isPrimary)return;0!==t.button&&t.preventDefault();const e=this.#gs;e.releasePointerCapture(t.pointerId),L(),e.removeAttribute("active"),this.#ps=null,this.#ms.end()}}static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(c[Symbol.metadata]??null):void 0;t=[ox({type:Number,reflect:!1})],e=[ox({type:Object,reflect:!1})],i=[ox({type:Boolean,reflect:!0})],r=[ox({type:Boolean,reflect:!0})],o=[ox({type:Number,reflect:!1})],a=[cx("#wrapper",!0)],ex(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:n},u,h),ex(this,null,e,{kind:"accessor",name:"constraint",static:!1,private:!1,access:{has:t=>"constraint"in t,get:t=>t.constraint,set:(t,e)=>{t.constraint=e}},metadata:n},d,f),ex(this,null,i,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:n},p,g),ex(this,null,r,{kind:"accessor",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,get:t=>t.indeterminate,set:(t,e)=>{t.indeterminate=e}},metadata:n},m,y),ex(this,null,o,{kind:"accessor",name:"pivot",static:!1,private:!1,access:{has:t=>"pivot"in t,get:t=>t.pivot,set:(t,e)=>{t.pivot=e}},metadata:n},v,b),ex(this,l={get:nx((function(){return this.#fs}),"#wrapper","get"),set:nx((function(t){this.#fs=t}),"#wrapper","set")},a,{kind:"accessor",name:"#wrapper",static:!1,private:!0,access:{has:t=>#gs in t,get:t=>t.#gs,set:(t,e)=>{t.#gs=e}},metadata:n},w,M),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#es;get value(){return this.#es}set value(t){this.#es=t}#us;get constraint(){return this.#us}set constraint(t){this.#us=t}#Tn;get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#hs;get indeterminate(){return this.#hs}set indeterminate(t){this.#hs=t}#ds;get pivot(){return this.#ds}set pivot(t){this.#ds=t}#fs;get#gs(){return l.get.call(this)}set#gs(t){return l.set.call(this,t)}get#ms(){return this.stream??=new _x}connectedCallback(){super.connectedCallback(),this.#ms.inherited||this.#ms.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.#ms.inherited||this.#ms.disconnect()}#ps;#vn;#pn;#bn;render(){const t=this.constraint,e=this.value,i=this.pivot,s=null==i?0:n((i-t.min)/(t.max-t.min)),r=null==e?s:n((e-t.min)/(t.max-t.min));return Ib`<div id="wrapper" @pointerdown=${this.#vn} style=${Ux({"--slider-progress":r,"--slider-pivot":s})}>
            <div id="track"></div><div id="slider"><div id="thumb"></div></div>
        </div>`}static{this.styles=Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --slider-track-face: var(--gray-700);
        --slider-track-face-filled: var(--gray-300);
        --slider-track-handle-face: var(--gray-900);
        --slider-track-handle-border: var(--gray-300);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --slider-track-face: var(--gray-200);
        --slider-track-face-filled: var(--gray-800);
        --slider-track-handle-face: var(--white);
        --slider-track-handle-border: var(--gray-800);
    }
}

:host {
    --thumb-size: 16px;
    --track-height: 2px;

    box-sizing: border-box;
    width: 100%;
    height: var(--thumb-size);
    user-select: none;
    overflow: clip;

    display: flex;
    contain: content;
    pointer-events: var(--cc-pointer-events, auto);
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
}

#wrapper {
    --slider-progress: 0;
    --slider-pivot: 0;
    width: 100%;
    height: 100%;
    flex: 1;
    display: inline-grid;
    place-items: center;
    gap: 0;
}

#wrapper > * {
    grid-area: 1 / 1 / 1 / 1;
}

#track {
    width: 100%;
    background: var(--slider-track-face);
    height: var(--track-height);
    pointer-events: none;
}

:host([ramp]) {
    --track-height: 14px;
}

:host([ramp]) #track {
    clip-path: polygon(0% 40%, 100% 0%, 100% 100%, 0% 60%);
    border-radius: var(--thumb-size);
}


/*
|-----|----|-----|
0     p    l     1
*/
:host([filled]:not([indeterminate])) #track {
    --slider-gradient-progress: calc((100% - var(--thumb-size) / 2) * var(--slider-progress));
    --slider-pivot-progress: calc((100%) * var(--slider-pivot));

    --from: min(var(--slider-gradient-progress), var(--slider-pivot-progress));
    --to: max(var(--slider-gradient-progress), var(--slider-pivot-progress));

    background: linear-gradient(to right,
        var(--slider-track-face) 0% var(--from),
        var(--slider-track-face-filled) var(--from) var(--to),
        var(--slider-track-face) var(--to) 100%
    );
}

:host([indeterminate]) #slider {
    --slider-progress: 0.5;
}

#slider {
    width: 100%;
    height: var(--thumb-size);
    transform: translateX(calc((100% - var(--thumb-size)) * var(--slider-progress)));
    pointer-events: none;
    justify-self: start;
}

#thumb {
    box-sizing: border-box;
    width: var(--thumb-size);
    height: var(--thumb-size);
    background-color: var(--slider-track-handle-face);
    border-radius: var(--thumb-size);
    border: 2px solid var(--slider-track-handle-border);
    transition: border-width 0.15s ease-in-out;
    pointer-events: var(--cc-pointer-events, auto);
}

#wrapper[active] #thumb,
#thumb:active {
    border: 6px solid var(--slider-track-handle-border);
}
    `}}})(),Vx=(()=>{let t,e,i,n=Gb,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],e=[ox({type:Boolean,reflect:!0})],i=[ox({type:Boolean,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"checked",static:!1,private:!1,access:{has:t=>"checked"in t,get:t=>t.checked,set:(t,e)=>{t.checked=e}},metadata:u},s,r),ex(this,null,e,{kind:"accessor",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,get:t=>t.indeterminate,set:(t,e)=>{t.indeterminate=e}},metadata:u},o,a),ex(this,null,i,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#ys=ix(this,s,!1);get checked(){return this.#ys}set checked(t){this.#ys=t}#hs=(ix(this,r),ix(this,o,!1));get indeterminate(){return this.#hs}set indeterminate(t){this.#hs=t}#Tn=(ix(this,a),ix(this,l,!1));get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}render(){return Ib`<div id="thumb"></div>`}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#ls)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#ls)}#ls=(ix(this,c),()=>{if(this.disabled)return;const t=!this.checked;this.dispatchEvent(new Qb(t))&&(this.indeterminate=!1,this.checked=t)});static{this.styles=Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --toggle-face: var(--gray-700);
        --toggle-handle: var(--text-color-default);
        --toggle-handle-checked: var(--white);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --toggle-face: var(--gray-100);
        --toggle-handle: var(--text-color-default);
        --toggle-handle-checked: var(--white);
    }
}

:host {
    --thumb-size: 14px;

    display: inline-grid;
    align-items: center;

    width: 32px;
    height: 18px;
    padding: 2px;

    cursor: pointer;
    user-select: none;


    background-color: var(--toggle-face);
    border-radius: var(--thumb-size);
    box-sizing: border-box;

    --toggle-face-checked: var(--accent-color-500);
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
    background-color: var(--toggle-face) !important;
}

:host([checked]) {
    background-color: var(--toggle-face-checked);
}


:host([checked]) #thumb {
    transform: translateX(100%);
    background: var(--toggle-handle-checked);
}

:host([disabled]) #thumb {
    background: var(--toggle-handle) !important;
}

:host([indeterminate]) {
    background-color: var(--toggle-face) !important;
}
:host([indeterminate]) #thumb {
    transform: translateX(50%);
    background: var(--toggle-handle) !important;
}

#thumb {
    background: var(--toggle-handle);
    width: var(--thumb-size);
    height: var(--thumb-size);
    border-radius: var(--thumb-size);
    transition: transform 0.15s ease-in-out;
}
    `}}})(),Gx=(()=>{let t,e,i,n=Gb,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],e=[ox({type:Number,reflect:!1})],i=[ox({type:String,reflect:!1})],ex(this,null,t,{kind:"accessor",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,get:t=>t.indeterminate,set:(t,e)=>{t.indeterminate=e}},metadata:u},s,r),ex(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:u},o,a),ex(this,null,i,{kind:"accessor",name:"label",static:!1,private:!1,access:{has:t=>"label"in t,get:t=>t.label,set:(t,e)=>{t.label=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#hs=ix(this,s,!1);get indeterminate(){return this.#hs}set indeterminate(t){this.#hs=t}#es=(ix(this,r),ix(this,o,0));get value(){return this.#es}set value(t){this.#es=t}#vs=(ix(this,a),ix(this,l,""));get label(){return this.#vs}set label(t){this.#vs=t}render(){const t=Math.round(100*this.value)+"%";return Ib`
        <div id="info"><span>${this.label}</span><span>${this.indeterminate?"":t}</span></div>
        <div id="track" style=${Ux({"--fill-width":t})}>
            <div id="slider">
                <div id="fill"></div>
            </div>
        </div>
        `}static{this.styles=Vv`
:host {
    display: inline-block;
    width: 100%;
    user-select: none;
    --progress-radius-size: 4px;

    --fill-width: 0;
    --indeterminate-fill-width: 50%;
    --fill-color: var(--accent-color-500);
}

#info {
    display: flex;
    flex-direction: row;
    align-items: baseline;
    justify-content: space-between;
    font-size: 12px;
    color: var(--text-color-default);
    margin-bottom: 8px;
}

:host([hide-label]) #info {
    display: none;
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
    --fill-color: var(--gray-500) !important;
}

#track, #slider {
    pointer-events: none;
    width: 100%;
    height: 8px;
    border-radius: var(--progress-radius-size);
    overflow: hidden;
}

#fill {
  width: var(--fill-width);
  height: 100%;
  border-radius: var(--progress-radius-size);
  background: var(--fill-color);
}

:host([indeterminate]) #slider {
    --fill-width: var(--indeterminate-fill-width) !important;
}

:host([indeterminate][disabled]) #slider {
    --fill-width: 100% !important;
}

:host([indeterminate]:not([disabled])) #slider {
    /* start value (internal) - hides fill completely */
    --initial-slider-position: calc(var(--fill-width) * -1);
    --final-slider-position: 100%;

    transform: translate(--initial-slider-position);
    will-change: transform;

    animation-name: slide;
    animation-duration: 1s;
    animation-delay: 0;
    animation-iteration-count: infinite;
    animation-timing-function: ease-in-out;
    animation-direction: normal;
}

:host([indeterminate][alternate]) #slider {
    animation-direction: alternate;
}

:host([indeterminate][ping-pong]) #slider {
    --initial-slider-position: 0;
    --final-slider-position: calc(100% - var(--fill-width));
    animation-direction: alternate;
    animation-timing-function: linear;
    animation-duration: 0.5s;
}

@keyframes slide {
  from {
    transform: translateX(var(--initial-slider-position));
  }
  to {
    transform: translateX(var(--final-slider-position));
  }
}
    `}constructor(){super(...arguments),ix(this,c)}}})(),Hx=(()=>{let t,e,i,n,s=Gb,r=[],o=[],a=[],l=[],c=[],u=[];return class extends s{static{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[cx("#dialog",!0)],i=[ox({type:Boolean,reflect:!0})],n=[ox({type:Boolean,reflect:!0})],ex(this,e={get:nx((function(){return this.#bs}),"#dialog","get"),set:nx((function(t){this.#bs=t}),"#dialog","set")},t,{kind:"accessor",name:"#dialog",static:!1,private:!0,access:{has:t=>#Hn in t,get:t=>t.#Hn,set:(t,e)=>{t.#Hn=e}},metadata:h},r,o),ex(this,null,i,{kind:"accessor",name:"cancelable",static:!1,private:!1,access:{has:t=>"cancelable"in t,get:t=>t.cancelable,set:(t,e)=>{t.cancelable=e}},metadata:h},a,l),ex(this,null,n,{kind:"accessor",name:"animated",static:!1,private:!1,access:{has:t=>"animated"in t,get:t=>t.animated,set:(t,e)=>{t.animated=e}},metadata:h},c,u),h&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})}#bs=ix(this,r,void 0);get#Hn(){return e.get.call(this)}set#Hn(t){return e.set.call(this,t)}#xs=(ix(this,o),ix(this,a,!1));get cancelable(){return this.#xs}set cancelable(t){this.#xs=t}#ws=(ix(this,l),ix(this,c,!0));get animated(){return this.#ws}set animated(t){this.#ws=t}render(){return Ib`<dialog id="dialog" part="dialog"
        @send-response=${this.#Yn}
        @cancel=${this.#Qn}
        @close=${this.#Jn}>
            <slot></slot>
            <div id="close" part="close" @click=${this.#Ms}><cc-css-icon name="Close"></cc-css-icon></div>
        </dialog>`}#ts=ix(this,u);#Xn;#Yn(t){t.stopPropagation(),this.close(t.detail)}#Qn(t){t.preventDefault(),t.stopPropagation(),this.cancelable&&this.close()}#Jn(){if(Nx(),this.#Xn){const t=this.#Xn,e=this.#ts;this.#Xn=this.#ts=void 0,t(e)}}#Ms(){this.close()}disconnectedCallback(){super.disconnectedCallback(),this.animated&&this.#Ss()}async open(){if(!this.#Xn)return new Promise((t=>{this.#Xn=t,Lx(this.#Hn)}))}close(t){this.#Xn&&(this.#ts=t,this.animated?this.#ks():setTimeout((()=>this.#Hn.close()),0))}#ks=()=>{const t=this.#Hn;t.addEventListener("animationend",this.#_s),t.classList.add("hiding")};#Ss=()=>{const t=this.#Hn;t.removeEventListener("animationend",this.#_s),t.classList.remove("hiding")};#_s=t=>{"hide-dialog"===t.animationName&&(this.#Ss(),this.#Hn.close())};static{this.styles=Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --box-shadow-color: var(--black);
    }
}
@container --theme-provider style(--theme: light) {
    :host {
        --box-shadow-color: var(--gray-400);
    }
}
#dialog {
    background: var(--surface-color);
    color: var(--text-color-default);
    border: none;
    outline: none;
    padding: 0;
    border-radius: 4px;

    min-width: 32px;
    min-height: 32px;
    max-width: 100vw;
    max-height: 100vh;
    font-size: 12px;

    box-shadow: 0px 0px 24px -4px var(--box-shadow-color);

    contain: content;
}

#dialog.hiding #close,
:host(:not([cancelable])) #close {
    display: none;
}

#close {
    position: absolute;
    top: 16px;
    right: 16px;

    box-sizing: border-box;
    padding: 3px;
    width: 24px;
    height: 24px;
    cursor: pointer;
    border-radius: 50%;
}
#close:hover {
    background: #5555;
}

:host([size="s"]) {
    width: 288px;
    min-height: 120p;
}

#dialog::backdrop {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    /* background: #0008; */
    backdrop-filter: blur(1px);
    animation: none;
}

:host([animated]) #dialog[open] {
    animation: show-dialog 0.125s ease-in-out forwards;
}

:host([animated]) #dialog.hiding {
    animation: hide-dialog 0.125s ease-in-out forwards;
}

:host([animated]) #dialog[open]::backdrop {
    animation: show-backdrop 0.125s ease-out forwards;
}

:host([animated]) #dialog.hiding::backdrop {
    animation: hide-backdrop 0.125s ease-in-out forwards;
}


@keyframes show-dialog {
    from {
        opacity: 0;
        transform: scale(50%, 50%) translateY(50%)
    }
    to {
        opacity: 1;
        transform: scale(100%, 100%) translateY(0)
    }
}

@keyframes hide-dialog {
    to {
        opacity: 0;
        transform: scale(50%, 50%) translateY(-50%);
    }
}

@keyframes show-backdrop {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes hide-backdrop {
    to {
        opacity: 0;
    }
}

    `}}})();class Zx extends Gb{get dialog(){return this.closest("cc-dialog")}}const Yx={ctrl:"⌘",alt:"⌥",shift:"⇧",enter:"↵",backspace:"⌫",delete:"⌫",escape:"⎋",left:"←",right:"→",up:"↑",down:"↓",space:"␣",tab:"⇥"},Qx="macOS"===navigator.userAgentData?.platform;let Jx=(()=>{let t,e=Gb,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:Array,reflect:!1,attribute:"shortcut",converter:t=>t.split(" ")})],ex(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#es=ix(this,i,void 0);get value(){return this.#es}set value(t){this.#es=t}render(){if(Qx)return this.value.map((t=>this.renderKeySymbol(t,Yx)));const t=[this.renderKey(this.value[0])];for(let e=1;e<this.value.length;e++)t.push(this.renderSeparator("+"),this.renderKey(this.value[e]));return t}renderKey(t){return t=1===t.length?t.toUpperCase():t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase(),Ib`<span>${t}</span>`}renderKeySymbol(t,e){return t in e?Ib`<span>${e[t]}</span>`:Ib`<span>${t.toUpperCase()}</span>`}renderSeparator(t){return Ib`<span class="separator">${t}</span>`}static{this.styles=Vv`
        :host {
            font-family: -expressive-keys;
            pointer-events: none;
            font-size: 12px;
            font-weight: normal;
            font-style: normal;
            color: inherit;
            display: flex;
            align-items: center;
            flex-direction: row;
            text-rendering: optimizeLegibility;
        }

        .separator {
            font-size: smaller;
        }
    `}constructor(){super(...arguments),ix(this,n)}}})(),qx=(()=>{let t,e=Gb,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#Tn=ix(this,i,!1);get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}render(){return Ib`
            <slot name="before"></slot>
            <span id="text" class="text-ellipsis"><slot></slot></span>
            <slot name="after"></slot>
        `}static{this.styles=[wx,Vv`
@container --theme-provider style(--theme: light) {
    :host {
        --menu-item-face-hover: var(--gray-50);
    }
}

@container --theme-provider style(--theme: dark) {
    :host {
        --menu-item-face-hover: var(--gray-900);
    }
}

:host {
    display: flex;
    align-items: center;
    box-sizing: border-box;
    width: 100%;
    height: 32px;
    font-size: 14px;
    padding: 0 8px;
    gap: 8px;
    color: var(--text-color-default);
    background: none;
    contain: layout paint;
}

:host([disabled]) {
    opacity: 45%;
    pointer-events: none;
}

:host(:hover) {
    /* background: linear-gradient(45deg, var(--menu-item-face-hover), transparent); */
    background: var(--menu-item-face-hover);
}

#text {
    flex: 1;
}

::slotted(*) {
    flex-shrink: 0;
}
    `]}constructor(){super(...arguments),ix(this,n)}}})(),Kx=(()=>{let t,e=Gb,i=[],n=[];return class extends e{constructor(){super(...arguments),this.#ns=ix(this,i,void 0),this.level=(ix(this,n),0),this.#as=(t,e)=>t?"string"==typeof t?Ib`<div class="header">${t}</div>`:Ib`<cc-menu-item class="item"
        @click=${this.#ls}
        @pointerenter=${this.#Is}
        @pointerleave=${this.#Cs}
        .disabled=${!!t.disabled}
        data-submenu=${Zb(t.children)}
        data-selectable=${Zb(t.selectable)}
        data-index=${e}>
            ${this.#Ls(t)}
            ${t.title}
            ${this.#Ns(t)}
        </cc-menu-item>`:Ib`<div class="divider"></div>`,this.#ls=t=>{this.#js(t,"menu-item-click")},this.#Is=t=>{this.#js(t,"menu-item-enter")},this.#Cs=t=>{this.#js(t,"menu-item-leave")}}static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({attribute:!1})],ex(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#ns;get items(){return this.#ns}set items(t){this.#ns=t}render(){return this.items.map(this.#as)}#as;#Ls(t){return t.selectable?Ib`<cc-css-icon class="icon" slot="before" name=${t.value?"Checkmark":""}></cc-css-icon>`:t.icon?Ib`<cc-icon class="icon" slot="before" .name=${t.icon}></cc-icon>`:Ib`<div class="icon" slot="before"></div>`}#Ns(t){return t.children?Ib`<cc-icon slot="after" name="workflow:ChevronRight"></cc-icon>`:t.shortcut?Ib`<cc-kbd .value=${t.shortcut} slot="after"></cc-kbd>`:Lb}#Ts(t){const e=t.target;if(!e.hasAttribute("data-index"))return null;const i=parseInt(e.dataset.index);return this.items[i]||null}#js(t,e){const i=this.#Ts(t);i&&this.dispatchEvent(new CustomEvent(e,{bubbles:!0,composed:!0,cancelable:!1,detail:{item:i,menu:this,trigger:t.target,event:t}}))}#ls;#Is;#Cs;static{this.styles=Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --menu-face: var(--gray-1000);
        --menu-border: var(--gray-700);
        --menu-item-divider: var(--gray-800);
        --menu-item-face-hover: var(--gray-800);
        --menu-shadow: 1px 4px 8px -2px rgb(0 0 0);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --menu-face: var(--white);
        --menu-border: var(--gray-100);
        --menu-item-divider: var(--gray-100);
        --menu-item-face-hover: var(--gray-100);
        --menu-shadow: 1px 4px 8px -2px rgb(0 0 0 / 15%);
    }
}

:host {
    color: var(--text-color-default);
    background-color: var(--menu-face);
    border: 1px solid var(--menu-border);
    padding: 4px 0;
    border-radius: 4px;
    min-width: 96px;
    display: flex;
    flex-direction: column;
    box-shadow: var(--menu-shadow);
    box-sizing: border-box;
    user-select: none;
    contain: content;
}

.divider {
    pointer-events: none;
    background: var(--menu-border);
    width: 100%;
    height: 1px;
    margin: 1px 0;
}

.header {
    pointer-events: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 4px 16px;
    font-size: 10px;
    opacity: 75%;
}

cc-kbd {
    pointer-events: none;
    opacity: 75%;
    user-select: none;
}

.item > .icon {
    pointer-events: none;
}

.item[data-selectable]:not([disabled]) > .icon {
    color: var(--accent-color-500);
}

.item > div.icon {
    width: 18px;
}
`}}})();class Xx extends Gb{#Hn;constructor(){super(),this.#Hn=document.createElement("dialog")}render(){return this.#Hn}#$t=[];#zs(t){const e=this.#$t;t.level=e.length,e.push(t),this.#Hn.appendChild(t)}#As(t){const e=this.#$t;for(;e.length>t;)e.pop().remove()}connectedCallback(){super.connectedCallback();const t=this.#Hn;t.addEventListener("cancel",this.#Qn),t.addEventListener("close",this.#Jn),t.addEventListener("click",this.#ls),t.addEventListener("menu-item-click",this.#Ps),t.addEventListener("menu-item-enter",this.#Ds),t.addEventListener("menu-item-leave",this.#Es)}disconnectedCallback(){const t=this.#Hn;t.removeEventListener("cancel",this.#Qn),t.removeEventListener("close",this.#Jn),t.removeEventListener("click",this.#ls),t.removeEventListener("menu-item-click",this.#Ps),t.removeEventListener("menu-item-enter",this.#Ds),t.removeEventListener("menu-item-leave",this.#Es),this.#As(0),super.disconnectedCallback()}#Qn=t=>{t.preventDefault(),t.stopPropagation(),this.close(void 0)};#Jn=()=>{if(Nx(),this.#As(0),this.#Os.clear(),this.#Kn){const t=this.#Xn,e=this.#ts;this.#Xn=this.#Kn=this.#ts=void 0,t(e)}};#Kn;#Xn;#ts;async open(t,e,i=1,n=0,s=1,r=1,o=0,a=0,l=!0){return this.#Kn?this.#Kn:(this.#Rs=l,this.#Kn=new Promise((async l=>{this.#Xn=l;const c=this.#Ws(t),u=this.#Bs(t);this.#zs(u),c&&u.requestUpdate(),Lx(this.#Hn),await u.updateComplete,Ax(u,e,i,n,s,r,o,a)})))}close(t){this.#Kn&&(this.#ts=t,this.#Hn.close())}#Ps=async t=>{t.stopPropagation();const{item:e,menu:i,event:n}=t.detail;e.children||(await(e.action?.(e,n)),e.preventClose?(i.requestUpdate(),await i.updateComplete):this.close(e))};#Us=null;#Ds=t=>{t.stopPropagation(),this.#Us&&(clearTimeout(this.#Us),this.#Us=null);const{item:e,menu:i,trigger:n}=t.detail,s=i.level+1,r=e.children;if(!r)return void this.#As(s);const o=this.#$t.find((t=>t.items===r));o||(this.#Us=setTimeout((async()=>{this.#As(s);const t=this.#Ws(r),e=this.#Bs(r);this.#zs(e),t&&e.requestUpdate(),await e.updateComplete,Ax(e,n,1,0,1,1,-5,-5)}),200))};#Es=t=>{t.stopPropagation(),this.#Us&&(clearTimeout(this.#Us),this.#Us=null)};#ls=t=>{t.target===this.#Hn&&this.close()};#Rs=!0;#$s=new WeakMap;#Os=new Map;#Bs=t=>{const e=this.#Rs?this.#$s:this.#Os;if(e.has(t))return e.get(t);const i=document.createElement("cc-menu");return i.setAttribute("part","menu"),i.items=t,e.set(t,i),i};#Ws(t){return(this.#Rs?this.#$s:this.#Os).has(t)}static{this.styles=Vv`
dialog {
    appearance: none;
    border: none;
    outline: none;
    background: none;
    padding: 0;
    margin: 0;
    overflow: hidden;
    box-sizing: border-box;
    width: 100vw;
    height: 100vh;
    max-width: 100vw;
    max-height: 100vh;
    contain: strict;
}
dialog::backdrop {
    background: none;
}
cc-menu {
    position: absolute;
    top: 0;
    left: 0;
    min-width: 220px;
    width: 220px;
}
`}}class tw extends Gb{#Fs;#Vs;#Gs;constructor(){super(),this.#Vs=document.createElement("div"),this.#Vs.id="scrollbar-y",this.#Gs=document.createElement("div"),this.#Gs.id="content",this.#Gs.part.add("content"),this.#Gs.appendChild(document.createElement("slot")),this.#Fs=[this.#Gs,this.#Vs]}render(){return this.#Fs}connectedCallback(){super.connectedCallback(),wt.observe(this,this.#Hs,"border-box"),wt.observe(this.#Gs,this.#Hs,"border-box"),this.addEventListener("scroll",this.#Hs,{passive:!0}),this.#Vs.addEventListener("pointerdown",this.#vn)}disconnectedCallback(){super.disconnectedCallback(),wt.unobserve(this),wt.unobserve(this.#Gs),this.removeEventListener("scroll",this.#Hs),this.#Vs.removeEventListener("pointerdown",this.#vn)}#Zs;#n;#vn=t=>{t.isPrimary&&0===t.button&&(this.#Zs=this.getBoundingClientRect(),this.#n=t.offsetY,C(this.#pn,this.#bn),this.#Vs.setPointerCapture(t.pointerId))};#pn=t=>{const e=(t.clientY-this.#Zs.y-this.#n)/this.#Zs.height;this.scrollTop=n(e)*this.scrollHeight};#bn=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.#Zs=null,this.#Vs.releasePointerCapture(t.pointerId),L())};#Hs=()=>{const t=this.#Vs,e=this.offsetHeight/this.scrollHeight;let i=0,n=0;e<1&&(i=this.offsetHeight*e,n=this.scrollTop*(0+e)),t.style.setProperty("--scroll-top",n+"px"),t.style.setProperty("--scroll-height",i+"px")};static{this.styles=Vv`
:host {
    display: block;
    width: 100%;
    height: 100%;
    contain: strict;

    overflow-x: hidden;
    overflow-y: auto;
    overscroll-behavior: contain;
    box-sizing: border-box;
    outline: none;
    padding: 0 !important;

    --scroll-top: 0;
    --scroll-height: 0;
}

#content {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    flex-direction: column;
    width: 100%;
    height: auto;
    word-break: break-all;
    word-wrap: break-word;
    outline: none;
}

:host::-webkit-scrollbar {
    display: none;
}

:host(:hover) #scrollbar-y {
    display: block;
}

#scrollbar-y {
    display: none;

    position: sticky;
    top: 0;
    float: right;

    transform: translateY(var(--scroll-top));

    width: var(--scrollbar-size);
    border-radius: calc(var(--scrollbar-size) / 2);
    height: var(--scroll-height);
    background: var(--scrollbar-color);

    margin: 0;
    padding: 0;
    outline: none;

    user-select: none;

    will-change: transform, height;
}
`}}let ew=(()=>{let t,e,i,n,s=Gb,r=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[];return class extends s{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ox({attribute:!1})],e=[ox({type:Boolean,reflect:!0})],i=[ox({reflect:!1})],n=[ox({type:Boolean,reflect:!0,attribute:"css-icon"})],ex(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:f},r,o),ex(this,null,e,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:f},a,l),ex(this,null,i,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:f},c,u),ex(this,null,n,{kind:"accessor",name:"cssIcon",static:!1,private:!1,access:{has:t=>"cssIcon"in t,get:t=>t.cssIcon,set:(t,e)=>{t.cssIcon=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#ns=ix(this,r,[]);get items(){return this.#ns}set items(t){this.#ns=t}#Tn=(ix(this,o),ix(this,a,!1));get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#es=(ix(this,l),ix(this,c,void 0));get value(){return this.#es}set value(t){this.#es=t}#Ys=(ix(this,u),ix(this,h,!1));get cssIcon(){return this.#Ys}set cssIcon(t){this.#Ys=t}render(){const t=this.items.find((t=>t.value===this.value))??this.items[0];return Ib`<cc-action-button
            title=${t.title}
            .selected=${t.emphasized||!1}
            .emphasized=${t.emphasized||!1}
            .disabled=${this.disabled}
            @click=${this.#ls}
        >
            ${this.#Ls(t.icon)}
        </cc-action-button>`}#Ls(t){return this.cssIcon?Ib`<cc-css-icon .name=${t}></cc-css-icon>`:Ib`<cc-icon .name=${t}></cc-icon>`}#ls(){const t=this.items;let e=this.value,i=0;void 0!==e&&(i=(t.findIndex((t=>t.value===this.value))+1)%t.length),e=t[i].value,this.dispatchEvent(new Qb(e,t[i]))&&(this.value=e)}static{this.styles=Vv`
:host {
    display: inline-block;
    container-name: --cc-size-provider --cc-quiet-provider;
    container-type: normal;
}

:host([quiet]) {
    --cc-quiet: true;
}
:host([size="m"]) {
    --cc-size: m;
}
    `}constructor(){super(...arguments),ix(this,d)}}})(),iw=(()=>{let t,e,i,n,s=Gb,r=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[];return class extends s{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ox({attribute:!1})],e=[ox({reflect:!1})],i=[ox({type:Boolean,reflect:!0})],n=[ox({type:Boolean,reflect:!1})],ex(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:f},r,o),ex(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:f},a,l),ex(this,null,i,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:f},c,u),ex(this,null,n,{kind:"accessor",name:"text",static:!1,private:!1,access:{has:t=>"text"in t,get:t=>t.text,set:(t,e)=>{t.text=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#ns=ix(this,r,[]);get items(){return this.#ns}set items(t){this.#ns=t}#es=(ix(this,o),ix(this,a,void 0));get value(){return this.#es}set value(t){this.#es=t}#Tn=(ix(this,l),ix(this,c,!1));get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#Qs=(ix(this,u),ix(this,h,!1));get text(){return this.#Qs}set text(t){this.#Qs=t}render(){return this.items.map(this.text?this.#Js:this.#qs)}#Js=(ix(this,d),(t,e)=>Ib`<cc-action-button .disabled=${this.disabled} .selected=${t.value===this.value} data-index=${e}>
            ${t.title}
        </cc-action-button>`);#qs=(t,e)=>Ib`<cc-action-button .disabled=${this.disabled} .selected=${t.value===this.value} title=${t.title} data-index=${e}>
            <cc-icon .name=${t.icon}></cc-icon>
        </cc-action-button>`;#ls=t=>{const e=t.composedPath()[0];if(void 0===e.dataset.index)return;const i=this.items[+e.dataset.index];if(!i)return;const n=i.value;n!==this.value&&this.dispatchEvent(new Qb(n,i))&&(this.value=n)};connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#ls)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#ls)}static{this.styles=[dx,fx]}}})(),nw=(()=>{let t,e,i,n,s=Gb,r=[],o=[],a=[],l=[],c=[],u=[],h=[];return class extends s{constructor(){super(...arguments),this.#ns=(ix(this,r),ix(this,o,[])),this.#Ks=(ix(this,a),ix(this,l,!1)),this.#Xs=ix(this,c),this.#tr=ix(this,u,!1),this.longPressDelay=(ix(this,h),400),this.menuOffset=8,this.#hi=new WeakMap,this.#er=null,this.#ir=(t,e)=>{let i=!1;return Array.isArray(t)&&(t=this.#hi.get(t)||t[0],i=!0),Ib`<cc-action-button
            class="item"
            badge=${Dx(t.badge)}
            .selected=${t.value===this.#Xs}
            .holdAffordance=${i}
            title=${function(t){let e=t.title;return t.shortcut&&(e+=` (${t.shortcut.join("+")})`),e}(t)}
            data-index=${e}>
            <cc-icon .name=${t.icon}></cc-icon>
        </cc-action-button>`},this.#ls=t=>{const e=this.#nr(t);if(null==e)return;this.#sr();let i=this.items[e];if(Array.isArray(i)){const t=this.#hi;t.has(i)||t.set(i,i[0]),i=t.get(i)}i&&this.#rr(i)},this.#or=null,this.#sr=()=>{clearTimeout(this.#or),this.#or=null},this.#vn=t=>{const e=this.#nr(t);null!=e&&(this.#sr(),Array.isArray(this.items[e])&&(this.#or=setTimeout(this.#ar,this.longPressDelay,e,t.composedPath()[0])))},this.#ar=async(t,e)=>{const i=this.items[t];if(!Array.isArray(i))return;let n;e.setAttribute("active",""),await this.#lr(),n=this.vertical?await this.#er.open(i,e,1,.5,1,0,this.menuOffset,0):await this.#er.open(i,e,.5,1,0,1,0,this.menuOffset),e.removeAttribute("active"),n&&this.#rr(n)&&this.#hi.set(i,n)}}static{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ox({attribute:!1})],e=[ox({type:Boolean,reflect:!1})],i=[ox({reflect:!1,noAccessor:!0})],n=[ox({type:Boolean,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:d},o,a),ex(this,null,e,{kind:"accessor",name:"unselectable",static:!1,private:!1,access:{has:t=>"unselectable"in t,get:t=>t.unselectable,set:(t,e)=>{t.unselectable=e}},metadata:d},l,c),ex(this,null,i,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:d},null,r),ex(this,null,n,{kind:"accessor",name:"vertical",static:!1,private:!1,access:{has:t=>"vertical"in t,get:t=>t.vertical,set:(t,e)=>{t.vertical=e}},metadata:d},u,h),d&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d})}#ns;get items(){return this.#ns}set items(t){this.#ns=t}#Ks;get unselectable(){return this.#Ks}set unselectable(t){this.#Ks=t}#Xs;get value(){return this.#Xs}set value(t){if(this.#Xs===t)return;const e=this.items;for(const i of e)if(Array.isArray(i)){const e=i.find((e=>e.value===t));if(e){this.#hi.set(i,e);break}}else if(i.value===t)break;this.#Xs=t,this.requestUpdate()}#tr;get vertical(){return this.#tr}set vertical(t){this.#tr=t}#hi;#er;render(){const t=this.items.map(this.#ir);return this.#er&&t.push(this.#er),t}#ir;connectedCallback(){super.connectedCallback(),this.addEventListener("pointerdown",this.#vn),this.addEventListener("pointerup",this.#sr),this.addEventListener("pointercancel",this.#sr),this.addEventListener("click",this.#ls)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("pointerdown",this.#vn),this.removeEventListener("pointerup",this.#sr),this.removeEventListener("pointercancel",this.#sr),this.removeEventListener("click",this.#ls)}#rr(t){if(this.#Xs===t.value){if(!this.unselectable)return!1;t=void 0}return!!this.dispatchEvent(new Qb(t?.value,t))&&(this.value=t?.value,!0)}#nr(t){if(0!==t.button)return null;const e=t.composedPath();if(e.includes(this.#er))return null;const i=e[0];return i.classList.contains("item")&&void 0!==i.dataset.index?parseInt(i.dataset.index):null}#ls;#or;#sr;#vn;async#lr(){this.#er||(this.#er=document.createElement("cc-context-menu"),this.#er.id="menu",this.requestUpdate(),await this.updateComplete)}#ar;static{this.styles=[dx,px,vx]}}})(),sw=(()=>{let t,e,i,n,s,r=Gb,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[];return class extends r{static{const m="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],e=[ox({type:Boolean,reflect:!0})],i=[ox({type:String,reflect:!1,attribute:"on-icon"})],n=[ox({type:String,reflect:!1,attribute:"off-icon"})],s=[ox({type:Boolean,reflect:!0,attribute:"css-icon"})],ex(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:m},o,a),ex(this,null,e,{kind:"accessor",name:"checked",static:!1,private:!1,access:{has:t=>"checked"in t,get:t=>t.checked,set:(t,e)=>{t.checked=e}},metadata:m},l,c),ex(this,null,i,{kind:"accessor",name:"onIcon",static:!1,private:!1,access:{has:t=>"onIcon"in t,get:t=>t.onIcon,set:(t,e)=>{t.onIcon=e}},metadata:m},u,h),ex(this,null,n,{kind:"accessor",name:"offIcon",static:!1,private:!1,access:{has:t=>"offIcon"in t,get:t=>t.offIcon,set:(t,e)=>{t.offIcon=e}},metadata:m},d,f),ex(this,null,s,{kind:"accessor",name:"cssIcon",static:!1,private:!1,access:{has:t=>"cssIcon"in t,get:t=>t.cssIcon,set:(t,e)=>{t.cssIcon=e}},metadata:m},p,g),m&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})}#Tn=ix(this,o,!1);get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#ys=(ix(this,a),ix(this,l,!1));get checked(){return this.#ys}set checked(t){this.#ys=t}#cr=(ix(this,c),ix(this,u,"MaintainChecked"));get onIcon(){return this.#cr}set onIcon(t){this.#cr=t}#ur=(ix(this,h),ix(this,d,"MaintainUnchecked"));get offIcon(){return this.#ur}set offIcon(t){this.#ur=t}#Ys=(ix(this,f),ix(this,p,!0));get cssIcon(){return this.#Ys}set cssIcon(t){this.#Ys=t}render(){const t=this.checked;return Ib`<cc-action-button .selected=${t} .disabled=${this.disabled} @click=${this.#ls}>
            ${this.#Ls(t?this.onIcon:this.offIcon)}
        </cc-action-button>`}#Ls(t){return this.cssIcon?Ib`<cc-css-icon .name=${t}></cc-css-icon>`:Ib`<cc-icon .name=${t}></cc-icon>`}#ls(){const t=!this.checked;this.dispatchEvent(new Qb(t))&&(this.checked=t)}static{this.styles=Vv`
:host {
    display: flex;
    container-name: --cc-size-provider --cc-quiet-provider --cc-emphasized-provider;
    container-type: normal;
}

:host([quiet]) {
    --cc-quiet: true;
}
:host([emphasized]) {
    --cc-emphasized: true;
}
:host([size="m"]) {
    --cc-size: m;
}
    `}constructor(){super(...arguments),ix(this,g)}}})(),rw=(()=>{let t,e,i=Gb,n=[],s=[],r=[],o=[];return class extends i{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[ox({type:String,reflect:!1})],e=[ox({type:Boolean,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"label",static:!1,private:!1,access:{has:t=>"label"in t,get:t=>t.label,set:(t,e)=>{t.label=e}},metadata:a},n,s),ex(this,null,e,{kind:"accessor",name:"open",static:!1,private:!1,access:{has:t=>"open"in t,get:t=>t.open,set:(t,e)=>{t.open=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#vs=ix(this,n,"");get label(){return this.#vs}set label(t){this.#vs=t}#hr=(ix(this,s),ix(this,r,!1));get open(){return this.#hr}set open(t){this.#hr=t}render(){return Ib`
            <div id="label" @click=${this.toggle}>
                <span>${this.label}</span>
                <cc-css-icon id="icon" name="ChevronDown"></cc-css-icon>
            </div>
            <div id="content" part="content" .inert=${!this.open}>
                <slot></slot>
            </div>`}toggle(){this.dispatchEvent(new Event("toggle",{cancelable:!0}))&&(this.open=!this.open)}static{this.styles=Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --accordion-hover-color: var(--white);
        --accordion-hover-bg: var(--gray-800);
    }
}
@container --theme-provider style(--theme: light) {
    :host {
        --accordion-hover-color: var(--black);
        --accordion-hover-bg: var(--gray-50);
    }
}
:host {
    display: block;
    box-sizing: border-box;
    --accordion-padding: 8px;
    --accordion-padding-double: calc(var(--accordion-padding) * 2);
    border-bottom: var(--border-size) solid var(--separator-color);
    contain: content;
}

:host([hidden]) {
    display: none;
}

:host([open]) {
    padding-bottom: var(--accordion-padding);
}

#label {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    height: 48px;
    padding: 0 var(--accordion-padding-double);
    color: var(--text-color-default);

    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
    user-select: none;
    cursor: pointer;
}

#label:hover {
    color: var(--accordion-hover-color);
}

:host(:not([open])) #label:hover {
    /* background: linear-gradient(45deg, var(--accordion-hover-bg), transparent); */
    background: var(--accordion-hover-bg);
}

#icon {
    margin-right: 3px;
    transform: rotate(90deg);
    transition: transform 0.2s;
}

:host([open]) #icon {
    transform: rotate(0deg);
}

#content {
    padding: var(--accordion-padding) var(--accordion-padding-double);
}

:host(:not([open])) #content {
    display: none;
}
`}constructor(){super(...arguments),ix(this,o)}}})();const{I:ow}=$b,aw=(t,e)=>void 0===e?void 0!==t?._$litType$:t?._$litType$===e,lw=()=>document.createComment(""),cw=(t,e,i)=>{const n=t._$AA.parentNode,s=void 0===e?t._$AB:e._$AA;if(void 0===i){const e=n.insertBefore(lw(),s),r=n.insertBefore(lw(),s);i=new ow(e,r,t,t.options)}else{const e=i._$AB.nextSibling,r=i._$AM,o=r!==t;if(o){let e;i._$AQ?.(t),i._$AM=t,void 0!==i._$AP&&(e=t._$AU)!==r._$AU&&i._$AP(e)}if(e!==s||o){let t=i._$AA;for(;t!==e;){const e=t.nextSibling;n.insertBefore(t,s),t=e}}}return i},uw=(t,e,i=t)=>(t._$AI(e,i),t),hw={},dw=(t,e=hw)=>t._$AH=e,fw=t=>t._$AH,pw=t=>{t._$AP?.(!1,!0);let e=t._$AA;const i=t._$AB.nextSibling;for(;e!==i;){const t=e.nextSibling;e.remove(),e=t}},gw=(t,e,i)=>{const n=new Map;for(let s=e;s<=i;s++)n.set(t[s],s);return n},mw=Ox(class extends Rx{constructor(t){if(super(t),2!==t.type)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let n;void 0===i?i=e:void 0!==e&&(n=e);const s=[],r=[];let o=0;for(const e of t)s[o]=n?n(e,o):o,r[o]=i(e,o),o++;return{values:r,keys:s}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,n]){const s=fw(t),{values:r,keys:o}=this.dt(e,i,n);if(!Array.isArray(s))return this.ut=o,r;const a=this.ut??=[],l=[];let c,u,h=0,d=s.length-1,f=0,p=r.length-1;for(;h<=d&&f<=p;)if(null===s[h])h++;else if(null===s[d])d--;else if(a[h]===o[f])l[f]=uw(s[h],r[f]),h++,f++;else if(a[d]===o[p])l[p]=uw(s[d],r[p]),d--,p--;else if(a[h]===o[p])l[p]=uw(s[h],r[p]),cw(t,l[p+1],s[h]),h++,p--;else if(a[d]===o[f])l[f]=uw(s[d],r[f]),cw(t,s[h],s[d]),d--,f++;else if(void 0===c&&(c=gw(o,f,p),u=gw(a,h,d)),c.has(a[h]))if(c.has(a[d])){const e=u.get(o[f]),i=void 0!==e?s[e]:null;if(null===i){const e=cw(t,s[h]);uw(e,r[f]),l[f]=e}else l[f]=uw(i,r[f]),cw(t,s[h],i),s[e]=null;f++}else pw(s[d]),d--;else pw(s[h]),h++;for(;f<=p;){const e=cw(t,l[p+1]);uw(e,r[f]),l[f++]=e}for(;h<=d;){const t=s[h++];null!==t&&pw(t)}return this.ut=o,dw(t,l),Cb}});let yw=(()=>{let t,e=Gb,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:Array})],ex(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#ns=ix(this,i,[]);get items(){return this.#ns}set items(t){this.#ns=t}#we=(ix(this,n),0);render(){return this.#we=0,Ib`${mw(this.items,vw,this.#as)}<div id="placeholder"><slot></slot></div>`}#dr=0;connectedCallback(){super.connectedCallback(),this.#dr++>0&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),this.#dr++,this.requestUpdate()}updated(){this.#we?this.classList.remove("placeholder"):this.classList.add("placeholder")}#as=t=>{const e=this.#dr%2==1?this.resolve():null,i=null!=e&&t.isVisible(e),n=i?t.getLabel(e):"",s=t.open,r=i&&s?t.getElement(e):null;return i&&this.#we++,Ib`<cc-accordion
            .label=${n}
            .open=${s}
            .hidden=${!i}
            data-id=${t.id}
            @toggle=${this.#fr}
        >
            ${r||Lb}
        </cc-accordion>`};#fr(t){bw.call(this,t)}static{this.styles=Vv`
#placeholder {display: none}
:host(.placeholder) #accordion {display: none}
:host(.placeholder) #placeholder {display: block}
`}}})();function vw(t){return t.id}function bw(t){const e=t.target.dataset.id,i=this.items.find((t=>t.id===e));i&&(i.open=!i.open,this.requestUpdate())}class xw{constructor(t){this.id=t,this.open=!0,this.#Vn=null}#Vn;getElement(t){return this.#Vn??=this.createElement(),this.#Vn.value=t,this.#Vn}}class ww extends Gb{#pr=!1;constructor(){super(),this.updateContent=Lt((()=>{this.#pr&&this.isConnected&&this.refresh()}))}firstUpdated(){this.#pr=!0,this.updateContent()}find(t){return this.shadowRoot.querySelector(t)}connectedCallback(){super.connectedCallback(),this.updateContent()}}class Mw{constructor(t,e,i,n=!0){this.id=t,this.label=e,this.content=i,this.open=n}}let Sw=(()=>{let t,e=Gb,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:Array})],ex(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#ns=ix(this,i,[]);get items(){return this.#ns}set items(t){this.#ns=t}render(){return Ib`${mw(this.items,vw,this.#as)}`}#as=(ix(this,n),t=>{const e=t.open?t.content:null;return e?.isConnected&&e.updateContent(),Ib`<cc-accordion
            .label=${t.label}
            .open=${t.open}
            data-id=${t.id}
            @toggle=${this.#fr}
        >${e||Lb}</cc-accordion>`});#fr(t){bw.call(this,t)}}})(),kw=(()=>{let t,e,i,n,s,r,o,a,l,c,u=Gb,h=[],d=[],f=[],p=[],g=[],m=[],y=[],v=[],b=[],x=[],w=[],M=[],S=[],k=[],_=[],I=[],C=[],L=[];return class extends u{static{const N="function"==typeof Symbol&&Symbol.metadata?Object.create(u[Symbol.metadata]??null):void 0;t=[ox({type:String,reflect:!1})],e=[ox({type:String,reflect:!1})],i=[ox({reflect:!1})],n=[ox({type:Number,reflect:!1,attribute:"minlength"})],s=[ox({type:Number,reflect:!1,attribute:"maxlength"})],r=[ox({type:String,reflect:!1})],o=[ox({type:Boolean,reflect:!0})],a=[ox({attribute:!1})],l=[cx("#input",!0)],ex(this,null,t,{kind:"accessor",name:"placeholder",static:!1,private:!1,access:{has:t=>"placeholder"in t,get:t=>t.placeholder,set:(t,e)=>{t.placeholder=e}},metadata:N},h,d),ex(this,null,e,{kind:"accessor",name:"type",static:!1,private:!1,access:{has:t=>"type"in t,get:t=>t.type,set:(t,e)=>{t.type=e}},metadata:N},f,p),ex(this,null,i,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:N},g,m),ex(this,null,n,{kind:"accessor",name:"minLength",static:!1,private:!1,access:{has:t=>"minLength"in t,get:t=>t.minLength,set:(t,e)=>{t.minLength=e}},metadata:N},y,v),ex(this,null,s,{kind:"accessor",name:"maxLength",static:!1,private:!1,access:{has:t=>"maxLength"in t,get:t=>t.maxLength,set:(t,e)=>{t.maxLength=e}},metadata:N},b,x),ex(this,null,r,{kind:"accessor",name:"pattern",static:!1,private:!1,access:{has:t=>"pattern"in t,get:t=>t.pattern,set:(t,e)=>{t.pattern=e}},metadata:N},w,M),ex(this,null,o,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:N},S,k),ex(this,null,a,{kind:"accessor",name:"formatter",static:!1,private:!1,access:{has:t=>"formatter"in t,get:t=>t.formatter,set:(t,e)=>{t.formatter=e}},metadata:N},_,I),ex(this,c={get:nx((function(){return this.#gr}),"#input","get"),set:nx((function(t){this.#gr=t}),"#input","set")},l,{kind:"accessor",name:"#input",static:!1,private:!0,access:{has:t=>#mr in t,get:t=>t.#mr,set:(t,e)=>{t.#mr=e}},metadata:N},C,L),N&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N})}static{this.shadowRootOptions={...Gb.shadowRootOptions,delegatesFocus:!0}}#ss=ix(this,h,void 0);get placeholder(){return this.#ss}set placeholder(t){this.#ss=t}#yr=(ix(this,d),ix(this,f,"text"));get type(){return this.#yr}set type(t){this.#yr=t}#es=(ix(this,p),ix(this,g,void 0));get value(){return this.#es}set value(t){this.#es=t}#vr=(ix(this,m),ix(this,y,void 0));get minLength(){return this.#vr}set minLength(t){this.#vr=t}#br=(ix(this,v),ix(this,b,void 0));get maxLength(){return this.#br}set maxLength(t){this.#br=t}#xr=(ix(this,x),ix(this,w,void 0));get pattern(){return this.#xr}set pattern(t){this.#xr=t}#Tn=(ix(this,M),ix(this,S,!1));get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#wr=(ix(this,k),ix(this,_,null));get formatter(){return this.#wr}set formatter(t){this.#wr=t}#gr=(ix(this,I),ix(this,C,void 0));get#mr(){return c.get.call(this)}set#mr(t){return c.set.call(this,t)}render(){let t="";return null!=this.value&&(t=this.formatter?this.formatter.format(this.value):this.value.toString()),Ib`
            <slot name="before"></slot>
            <input id="input" part="input"
                .value=${t}
                .type=${this.type}
                .disabled=${this.disabled}
                .inert=${this.disabled}
                @input=${this.#Mr}
                @change=${this.#Sr}
                minlength=${Dx(this.minLength)}
                maxlength=${Dx(this.maxLength)}
                pattern=${Dx(this.pattern)}
                placeholder=${Dx(this.placeholder)}
                spellcheck="false"
                autocomplete="off"
            >
            <slot name="after"></slot>
        `}selectAll(){this.#mr.setSelectionRange(0,this.#mr.value.length,"none")}#Mr(t){t.stopPropagation(),this.dispatchEvent(new CustomEvent("update",{detail:this.#mr.value}))}#Sr(t){let e;if(t.stopPropagation(),this.formatter){if(e=this.formatter.parse(this.#mr.value),this.formatter.equals?.(e,this.value))return}else e=this.#mr.value;e!==this.value&&(this.dispatchEvent(new Qb(e))?this.value=e:this.requestUpdate())}static{this.styles=[yx]}constructor(){super(...arguments),ix(this,L)}}})(),_w=(()=>{let t,e,i,s,r,o,a,l=Gb,c=[],h=[],d=[],f=[],p=[],g=[],m=[],y=[],v=[],b=[],x=[],w=[];return class extends l{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(l[Symbol.metadata]??null):void 0;t=[ox({type:Number,reflect:!1})],e=[ox({type:Number,reflect:!1})],i=[ox({type:Number,reflect:!1})],s=[ox({type:Number,reflect:!1})],r=[ox({type:Boolean,reflect:!0})],o=[cx("#input",!0)],ex(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:n},c,h),ex(this,null,e,{kind:"accessor",name:"fps",static:!1,private:!1,access:{has:t=>"fps"in t,get:t=>t.fps,set:(t,e)=>{t.fps=e}},metadata:n},d,f),ex(this,null,i,{kind:"accessor",name:"min",static:!1,private:!1,access:{has:t=>"min"in t,get:t=>t.min,set:(t,e)=>{t.min=e}},metadata:n},p,g),ex(this,null,s,{kind:"accessor",name:"max",static:!1,private:!1,access:{has:t=>"max"in t,get:t=>t.max,set:(t,e)=>{t.max=e}},metadata:n},m,y),ex(this,null,r,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:n},v,b),ex(this,a={get:nx((function(){return this.#gr}),"#input","get"),set:nx((function(t){this.#gr=t}),"#input","set")},o,{kind:"accessor",name:"#input",static:!1,private:!0,access:{has:t=>#mr in t,get:t=>t.#mr,set:(t,e)=>{t.#mr=e}},metadata:n},x,w),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}static{this.shadowRootOptions={...Gb.shadowRootOptions,delegatesFocus:!0}}#es=ix(this,c,0);get value(){return this.#es}set value(t){this.#es=t}#kr=(ix(this,h),ix(this,d,60));get fps(){return this.#kr}set fps(t){this.#kr=t}#_r=(ix(this,f),ix(this,p,0));get min(){return this.#_r}set min(t){this.#_r=t}#Ir=(ix(this,g),ix(this,m,5184e6));get max(){return this.#Ir}set max(t){this.#Ir=t}#Tn=(ix(this,y),ix(this,v,!1));get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#gr=(ix(this,b),ix(this,x,void 0));get#mr(){return a.get.call(this)}set#mr(t){return a.set.call(this,t)}render(){return Ib`
            <slot name="before"></slot>
            <input id="input" part="input" type="text"
                .value=${j(this.value,this.fps)}
                .disabled=${this.disabled}
                .inert=${this.disabled}
                @change=${this.#Sr}
                spellcheck="false"
                autocomplete="off"
            >
            <slot name="after"></slot>
        `}#Sr(t){t.stopPropagation();const e=1e3/this.fps,i=z(this.min*e,e),s=z(this.max*e,e);let r=function(t,e){if(!t)return 0;const i=u(t,1),n=i.length;if(0===n)return 0;i.reverse();let s=Math.abs(1e3*i[0]/e);return n>1&&(s+=Math.abs(1e3*i[1]),n>2&&(s+=Math.abs(6e4*i[2]))),Math.round(s)}(this.#mr.value,this.fps);r=z(r,e),r=n(r,i,s),r!==this.value&&(this.dispatchEvent(new Qb(r))?this.value=r:this.requestUpdate())}static{this.styles=[yx]}constructor(){super(...arguments),ix(this,w)}}})();const Iw={unit:"",digits:2};let Cw=(()=>{let t,e,i,n,r,o=Gb,a=[];return class extends o{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0,noAccessor:!0})],e=[ox({type:Boolean,reflect:!0,noAccessor:!0})],i=[ox({attribute:!1,noAccessor:!0})],n=[ox({type:String,reflect:!1,noAccessor:!0})],r=[ox({type:Number,reflect:!1,noAccessor:!0})],ex(this,null,t,{kind:"setter",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,set:(t,e)=>{t.disabled=e}},metadata:s},null,a),ex(this,null,e,{kind:"setter",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,set:(t,e)=>{t.indeterminate=e}},metadata:s},null,a),ex(this,null,i,{kind:"setter",name:"formatter",static:!1,private:!1,access:{has:t=>"formatter"in t,set:(t,e)=>{t.formatter=e}},metadata:s},null,a),ex(this,null,n,{kind:"setter",name:"placeholder",static:!1,private:!1,access:{has:t=>"placeholder"in t,set:(t,e)=>{t.placeholder=e}},metadata:s},null,a),ex(this,null,r,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:s},null,a),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}static{this.shadowRootOptions={...Gb.shadowRootOptions,delegatesFocus:!0}}#Cr;get disabled(){return this.#Cr}set disabled(t){this.#Cr!==t&&(this.#Cr=t,this.#mr.disabled=this.#mr.inert=t)}#Lr;get indeterminate(){return this.#Lr}set indeterminate(t){this.#Lr!==t&&(this.#Lr=t,this.#Nr())}#jr;get formatter(){return this.#jr}set formatter(t){this.#jr!==t&&(this.#jr=t,this.#Nr())}#mr;get#ms(){return this.stream??=new _x}#Tr;get placeholder(){return this.#Tr}set placeholder(t){this.#mr.placeholder=t}#Xs;get value(){return this.#Xs}set value(t){this.#Xs!==t&&(this.#Xs=t,this.#Nr())}constructor(){super(),this.#Cr=(ix(this,a),!1),this.#Lr=!1,this.stream=null,this.pointerStep=5,this.#jr=Iw,this.#Tr="",this.#Xs=void 0,this.#zr=!1,this.#Ar=()=>{this.#zr=!0;const t=this.#mr,e=this.formatter;t.type="number",t.min=Lw(e.min,e.scale),t.max=Lw(e.max,e.scale),t.step=Lw(e.step,e.scale),t.addEventListener("wheel",this.#on),t.addEventListener("input",this.#Mr),t.addEventListener("keydown",this.#Pr),this.#Nr()},this.#Dr=()=>{this.#zr=!1;const t=this.#mr;t.type="text",this.#Nr(),t.removeEventListener("wheel",this.#on),t.removeEventListener("input",this.#Mr),t.removeEventListener("keydown",this.#Pr),this.#ms.end()},this.#Mr=t=>{t.stopPropagation(),this.#rr(this.#mr.valueAsNumber/(this.#jr.scale??1))},this.#Pr=t=>{switch(t.key){case"ArrowUp":return t.preventDefault(),void this.#Er(1,t.shiftKey);case"ArrowDown":return t.preventDefault(),void this.#Er(-1,t.shiftKey);case"Enter":case"Escape":return t.preventDefault(),void this.#mr.blur()}},this.#on=t=>{t.preventDefault(),t.stopPropagation();const e=-Math.sign(t.deltaY);0===e||isNaN(e)||this.#Er(e,t.shiftKey)},this.#Or={x:0,y:0},this.#Rr=!1,this.#vn=t=>{t.isPrimary&&0===t.button&&t.composedPath()[0]!==this.#mr&&(t.preventDefault(),x(),this.setPointerCapture(t.pointerId),this.setAttribute("active",""),C(this.#pn,this.#bn),this.#Or.x=t.clientX,this.#Or.y=t.clientY,this.#Rr=!1)},this.#pn=t=>{const e=this.#Or,i=this.pointerStep,n=Math.round((t.clientX-e.x)/i);if(Math.abs(n)>=1)return e.x+=n*i,e.y=t.clientY,void(this.#Er(n,t.shiftKey)&&(this.#Rr=!0));const s=-Math.round((t.clientY-e.y)/i);return Math.abs(s)>=1?(e.x=t.clientX,e.y-=s*i,void(this.#Er(s,t.shiftKey)&&(this.#Rr=!0))):void 0},this.#bn=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.releasePointerCapture(t.pointerId),L(),this.removeAttribute("active"),this.#Rr&&this.#ms.end())};const t=document.createElement("input");t.id="input",t.part.add("input"),t.type="text",t.inputMode="decimal",this.#mr=t}connectedCallback(){super.connectedCallback();const t=this.#mr;t.addEventListener("focus",this.#Ar),t.addEventListener("blur",this.#Dr),this.pointerStep&&this.addEventListener("pointerdown",this.#vn),this.#ms.inherited||this.#ms.connect(this)}disconnectedCallback(){super.disconnectedCallback();const t=this.#mr;t.removeEventListener("focus",this.#Ar),t.removeEventListener("blur",this.#Dr),this.pointerStep&&this.removeEventListener("pointerdown",this.#vn),this.#ms.inherited||this.#ms.disconnect()}render(){return Ib`
            <slot name="before"></slot>
            ${this.#mr}
            <slot name="after"></slot>
        `}#zr;#Nr(){let t=this.#Xs;const e=this.#mr;if(this.#Lr||null==this.#Xs)return void(e.value="");const i=this.#jr;i.scale&&(t*=i.scale),this.#zr?e.valueAsNumber=Math.round(1e4*t)/1e4:e.value=f(t,i.digits??2,i.unit??"")}#Er(t,e){const i=this.#jr;return e&&(t*=10),t*=(i.stepScale||1)*(i.step||1),!!this.#rr((this.#Xs??i.min??0)+t)&&(this.#Nr(),!0)}#rr(t){if(Number.isNaN(t)||!Number.isFinite(t))return!1;const e=this.#jr;return t=s(t,e.step,e.min,e.max),this.#Xs!==t&&(this.#ms.started||this.#ms.start(this.#Xs),this.#Xs=t,this.#ms.update(t),!0)}#Ar;#Dr;#Mr;#Pr;#on;#Or;#Rr;#vn;#pn;#bn;static{this.styles=[yx,Vv`:host {cursor: ew-resize}`]}}})();function Lw(t,e){return null==t?"":(t*(e??1)).toFixed(2)}let Nw=(()=>{let t,e,i,n,s=Gb,r=[],o=[],a=[],l=[],c=[];return class extends s{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ox({type:String,reflect:!1,noAccessor:!0})],e=[ox({type:Number,reflect:!1,noAccessor:!0})],i=[ox({type:Boolean,reflect:!0})],n=[ox({type:Boolean,reflect:!0})],ex(this,null,t,{kind:"setter",name:"paint",static:!1,private:!1,access:{has:t=>"paint"in t,set:(t,e)=>{t.paint=e}},metadata:u},null,r),ex(this,null,e,{kind:"setter",name:"opacity",static:!1,private:!1,access:{has:t=>"opacity"in t,set:(t,e)=>{t.opacity=e}},metadata:u},null,r),ex(this,null,i,{kind:"accessor",name:"selected",static:!1,private:!1,access:{has:t=>"selected"in t,get:t=>t.selected,set:(t,e)=>{t.selected=e}},metadata:u},o,a),ex(this,null,n,{kind:"accessor",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,get:t=>t.indeterminate,set:(t,e)=>{t.indeterminate=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#Je=ix(this,r);#Vt="transparent";get paint(){return this.#Vt}set paint(t){this.#Vt!==t&&(this.#Vt=t,this.#Je.style.setProperty("background",t))}#Ht=1;get opacity(){return this.#Ht}set opacity(t){this.#Ht!==t&&(this.#Ht=t,this.#Je.style.setProperty("opacity",t.toString()))}#En=ix(this,o,!1);get selected(){return this.#En}set selected(t){this.#En=t}#hs=(ix(this,a),ix(this,l,!1));get indeterminate(){return this.#hs}set indeterminate(t){this.#hs=t}constructor(){super(),ix(this,c),this.#Je=document.createElement("div"),this.#Je.id="fill"}render(){return this.#Je}static{this.styles=Vv`
@container --theme-provider style(--theme: light) {
    :host {
        --brush-thumb-bg: var(--gray-100);
        --brush-thumb-border: var(--gray-300);
        --q-mark: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBmaWxsPSIjMDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjE0LjIyMjIiIHZpZXdCb3g9IjAgMCA4IDE0LjIyMjIiPgogICAgPHBhdGggZD0ibTIuNTk5OCw5LjU2OTZjLS4wNzQxLS40OTE5LS4wNTUyLS45NDIyLjA1NjEtMS4zNTI0LjExMTItLjQwOTQuMjczMS0uNzg1NC40ODgzLTEuMTI3My4yMTUyLS4zNDEuNDU5NC0uNjU4Ny43MzQzLS45NTIyLjI3MzEtLjI5MzUuNTMzNS0uNTgxMi43Nzc3LS44NjEzLjI0NDItLjI3OTMuNDQ4NS0uNTU2MS42MTEzLS44Mjk2LjE2MjgtLjI3MjcuMjQ0Mi0uNTY3LjI0NDItLjg4MTMsMC0uNDkxMS0uMTU5MS0uODg3Mi0uNDc3NC0xLjE4ODItLjMyMDEtLjMwMDItLjc1OTYtLjQ1MTEtMS4zMjItLjQ1MTEtLjQ1OTQsMC0uODc1My4wOTU5LTEuMjQ1Mi4yODY4LS4zNzA3LjE5MTgtLjcxODkuNDUxMS0xLjA0NDQuNzc4OEwwLDEuNzgyN2MuNDg5Mi0uNTE4NiwxLjA3MDYtLjk0NTUsMS43NDQzLTEuMjgwNy42NzQ2LS4zMzQ0LDEuNDM0Mi0uNTAyLDIuMjc4Ny0uNTAyLjU3NjksMCwxLjExMDQuMDcxNywxLjU5ODcuMjE1MS40OTAxLjE0MzQuOTA3OS4zNTg1LDEuMjU2OS42NDU0LjM0NzIuMjg2OC42MjIxLjY0MjkuODIxMSwxLjA2NTYuMjAwNy40MjM2LjMwMDIuOTE1NS4zMDAyLDEuNDc1OCwwLC40MzY5LS4wODUuODI5Ni0uMjU1LDEuMTc4MnMtLjM4MTYuNjc5Ni0uNjMzLjk5MzljLS4yNTMyLjMxNDMtLjUyMjcuNjE0NS0uODEyLjkwMTNzLS41NDguNTg3OC0uNzc3Ny45MDIyLS40MTQyLjY0ODctLjU1NTIsMS4wMDM5LS4xODI3Ljc1MTMtLjEyMywxLjE4ODJoLTIuMjQ0NFoiLz4KICAgIDxwYXRoIGQ9Im0zLjk5MDksMTQuMjIyMmMtLjM4MTUsMC0uNjk3NC0uMTI2NS0uOTQ4Ni0uMzc2OC0uMjUwNC0uMjUwMy0uMzc1Ni0uNTY4Ni0uMzc1Ni0uOTU2NnMuMTI1Mi0uNzA2My4zNzU2LS45NTY2Yy4yNTEyLS4yNTAzLjU2NzEtLjM3NjguOTQ4Ni0uMzc2OHMuNzAwMy4xMjY1Ljk1NjYuMzc2OC4zODU4LjU2ODYuMzg1OC45NTY2LS4xMjk2LjcwNjMtLjM4NTguOTU2Ni0uNTc1MS4zNzY4LS45NTY2LjM3NjhaIi8+Cjwvc3ZnPg==");
    }
}

@container --theme-provider style(--theme: dark) {
    :host {
        --brush-thumb-bg: var(--gray-800);
        --brush-thumb-border: var(--gray-700);
        --q-mark: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBmaWxsPSIjZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjE0LjIyMjIiIHZpZXdCb3g9IjAgMCA4IDE0LjIyMjIiPgogICAgPHBhdGggZD0ibTIuNTk5OCw5LjU2OTZjLS4wNzQxLS40OTE5LS4wNTUyLS45NDIyLjA1NjEtMS4zNTI0LjExMTItLjQwOTQuMjczMS0uNzg1NC40ODgzLTEuMTI3My4yMTUyLS4zNDEuNDU5NC0uNjU4Ny43MzQzLS45NTIyLjI3MzEtLjI5MzUuNTMzNS0uNTgxMi43Nzc3LS44NjEzLjI0NDItLjI3OTMuNDQ4NS0uNTU2MS42MTEzLS44Mjk2LjE2MjgtLjI3MjcuMjQ0Mi0uNTY3LjI0NDItLjg4MTMsMC0uNDkxMS0uMTU5MS0uODg3Mi0uNDc3NC0xLjE4ODItLjMyMDEtLjMwMDItLjc1OTYtLjQ1MTEtMS4zMjItLjQ1MTEtLjQ1OTQsMC0uODc1My4wOTU5LTEuMjQ1Mi4yODY4LS4zNzA3LjE5MTgtLjcxODkuNDUxMS0xLjA0NDQuNzc4OEwwLDEuNzgyN2MuNDg5Mi0uNTE4NiwxLjA3MDYtLjk0NTUsMS43NDQzLTEuMjgwNy42NzQ2LS4zMzQ0LDEuNDM0Mi0uNTAyLDIuMjc4Ny0uNTAyLjU3NjksMCwxLjExMDQuMDcxNywxLjU5ODcuMjE1MS40OTAxLjE0MzQuOTA3OS4zNTg1LDEuMjU2OS42NDU0LjM0NzIuMjg2OC42MjIxLjY0MjkuODIxMSwxLjA2NTYuMjAwNy40MjM2LjMwMDIuOTE1NS4zMDAyLDEuNDc1OCwwLC40MzY5LS4wODUuODI5Ni0uMjU1LDEuMTc4MnMtLjM4MTYuNjc5Ni0uNjMzLjk5MzljLS4yNTMyLjMxNDMtLjUyMjcuNjE0NS0uODEyLjkwMTNzLS41NDguNTg3OC0uNzc3Ny45MDIyLS40MTQyLjY0ODctLjU1NTIsMS4wMDM5LS4xODI3Ljc1MTMtLjEyMywxLjE4ODJoLTIuMjQ0NFoiLz4KICAgIDxwYXRoIGQ9Im0zLjk5MDksMTQuMjIyMmMtLjM4MTUsMC0uNjk3NC0uMTI2NS0uOTQ4Ni0uMzc2OC0uMjUwNC0uMjUwMy0uMzc1Ni0uNTY4Ni0uMzc1Ni0uOTU2NnMuMTI1Mi0uNzA2My4zNzU2LS45NTY2Yy4yNTEyLS4yNTAzLjU2NzEtLjM3NjguOTQ4Ni0uMzc2OHMuNzAwMy4xMjY1Ljk1NjYuMzc2OC4zODU4LjU2ODYuMzg1OC45NTY2LS4xMjk2LjcwNjMtLjM4NTguOTU2Ni0uNTc1MS4zNzY4LS45NTY2LjM3NjhaIi8+Cjwvc3ZnPg==");
    }
}

 :host {
    display: inline-grid;
    place-items: center;

    width: 32px;
    height: 32px;
    box-sizing: border-box;
    border-radius: 4px;
    border: 1px solid var(--brush-thumb-border);
    user-select: none;

    background: var(--chess-gradient) 50% / 16px 16px;
    contain: strict;
 }

 #fill {
    grid-column: 1; grid-row: 1;

    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    border-radius: 3px;
    outline: none;
    box-sizing: border-box;
 }

 :host([indeterminate]) #fill {
    display: none;
 }

 :host([indeterminate]) {
    background-color: var(--brush-thumb-bg);
    background-repeat: no-repeat;
    background-position: center;
    background-image: var(--q-mark);
    background-size: 16px 16px;
 }

 :host([indeterminate][cut]) {
    background-image: var(--q-mark), var(--q-mark), var(--q-mark), var(--q-mark);
    background-position: top left, top right, bottom left, bottom right;
    background-size: 8px 8px;
 }

 :host([cut]) {
    clip-path: polygon(-5% -5%, -5% 105%, 25% 105%, 25% 25%, 75% 25%, 75% 75%, 25% 75%, 25% 105%, 105% 105%, 105% -5%);
 }

 :host([cut])::after {
    grid-column: 1; grid-row: 1;
    content: "";
    box-sizing: border-box;
    display: inline-block;
    width: 18px;
    height: 18px;

    background: var(--brush-thumb-border);
    border-radius: 2px;
 }
 `}}})(),jw=(()=>{let t,e,i,n=Gb,s=[],r=[],o=[];return class extends n{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],e=[ox({type:String,reflect:!1,noAccessor:!0})],i=[ox({type:Number,reflect:!1,noAccessor:!0})],ex(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:a},r,o),ex(this,null,e,{kind:"setter",name:"color",static:!1,private:!1,access:{has:t=>"color"in t,set:(t,e)=>{t.color=e}},metadata:a},null,s),ex(this,null,i,{kind:"setter",name:"opacity",static:!1,private:!1,access:{has:t=>"opacity"in t,set:(t,e)=>{t.opacity=e}},metadata:a},null,s),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#Je=ix(this,s);#Tn=ix(this,r,!1);get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#qi=(ix(this,o),"transparent");get color(){return this.#qi}set color(t){this.#qi!==t&&(this.#qi=t,this.#Je.style.background=t)}#Ht=1;get opacity(){return this.#Ht}set opacity(t){this.#Ht!==t&&(this.#Ht=t,this.#Je.style.opacity=(t??1).toString())}constructor(){super(),this.#Je=document.createElement("div"),this.#Je.id="fill"}render(){return this.#Je}static{this.styles=Vv`
@container --theme-provider style(--theme: light) {
    :host {
        --color-thumb-border: var(--gray-50);
        --color-thumb-border-hover: var(--gray-300);
    }
}

@container --theme-provider style(--theme: dark) {
    :host {
        --color-thumb-border: var(--gray-1000);
        --color-thumb-border-hover: var(--gray-700);
    }
}
:host {
    display: inline-block;
    box-sizing: border-box;
    width: 24px;
    height: 24px;

    background: var(--chess-gradient) 50% / 16px 16px;
    background-position: bottom left;
    background-origin: border-box;

    --color-thumb-rounding: 4px;
    border-radius: calc(var(--color-thumb-rounding) * var(--cc-border-tl, 1)) calc(var(--color-thumb-rounding) * var(--cc-border-tr, 1)) calc(var(--color-thumb-rounding) * var(--cc-border-br, 1)) calc(var(--color-thumb-rounding) * var(--cc-border-bl, 1));

    border: 1px solid var(--color-thumb-border);
    cursor: pointer;
    contain: strict;
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
}

:host([selected]) {
    --color-thumb-border: var(--accent-color-500) !important;
}

:host(:hover) {
    border-color: var(--color-thumb-border-hover);
}

#fill {
    width: 100%;
    height: 100%;
}

:host([size="m"]) {
    width: 32px;
    height: 32px;
}
@container --cc-size-provider style(--cc-size: m) {
    :host {
        width: 32px;
        height: 32px;
    }
}
`}}})(),Tw=(()=>{let t,e,i=Gb,n=[],s=[],r=[],o=[];return class extends i{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],e=[ox({type:Boolean,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"content",static:!1,private:!1,access:{has:t=>"content"in t,get:t=>t.content,set:(t,e)=>{t.content=e}},metadata:a},n,s),ex(this,null,e,{kind:"accessor",name:"active",static:!1,private:!1,access:{has:t=>"active"in t,get:t=>t.active,set:(t,e)=>{t.active=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#Wr=ix(this,n,!1);get content(){return this.#Wr}set content(t){this.#Wr=t}#Br=(ix(this,s),ix(this,r,!1));get active(){return this.#Br}set active(t){this.#Br=t}render(){return this.content?Ib`<slot></slot>`:Lb}static{this.styles=Vv`
:host {
    --color-handle-size: 16px;
    --color-handle-bg: none;
    --color-handle-scale: 1;
    --color-handle-tx: -50%;
    --color-handle-ty: -50%;
    --color-handle-border-size: 2px;
    --color-handle-border: #fff;

    display: flex;
    box-sizing: border-box;
    width: var(--color-handle-size);
    height: var(--color-handle-size);
    background: var(--color-handle-bg);

    translate: var(--color-handle-tx) var(--color-handle-ty);
    scale: var(--color-handle-scale);
    transition: scale 0.2s;

    border: calc(var(--color-handle-border-size) / var(--color-handle-scale)) solid var(--color-handle-border);
    outline: calc(1px / var(--color-handle-scale)) solid var(--gray-500);
    box-shadow: inset 0 0 0 calc(1px / var(--color-handle-scale)) var(--gray-500);

    border-radius: 50%;
    user-select: none;
    pointer-events: var(--cc-pointer-events, auto);
    contain: layout;
}

:host([chess]) {
    --color-handle-bg: var(--chess-gradient) 50% /  var(--color-handle-size);
}

:host([active]) {
    --color-handle-scale: 1.75;
    z-index: 1;
}

:host([active][data-tip])::before {
    content: attr(data-tip);


    font-family: -expressive-keys;
    box-sizing: border-box;
    border: 0.25px solid var(--gray-500);
    border-radius: 4px;
    padding: 1px 3px;
    pointer-events: none;
    white-space: pre;

    display: flex;
    align-items: center;
    justify-content: space-around;

    text-align: justify;

    font-size: 6px;
    min-width: 100%;

    background: var(--canvas-color);
    color: var(--text-color-default);

    position: absolute;

    translate: -50% -100%;
    top: -4px;
    left: 50%;
}
`}constructor(){super(...arguments),ix(this,o)}}})(),zw=(()=>{let t,e,i,s,r=Gb,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[];return class extends r{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[ox({type:Number,reflect:!1})],e=[ox({type:Boolean,reflect:!0})],i=[ox({type:Boolean,reflect:!0})],s=[ox({type:String,reflect:!1})],ex(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:n},o,a),ex(this,null,e,{kind:"accessor",name:"vertical",static:!1,private:!1,access:{has:t=>"vertical"in t,get:t=>t.vertical,set:(t,e)=>{t.vertical=e}},metadata:n},l,c),ex(this,null,i,{kind:"accessor",name:"tip",static:!1,private:!1,access:{has:t=>"tip"in t,get:t=>t.tip,set:(t,e)=>{t.tip=e}},metadata:n},u,h),ex(this,null,s,{kind:"accessor",name:"color",static:!1,private:!1,access:{has:t=>"color"in t,get:t=>t.color,set:(t,e)=>{t.color=e}},metadata:n},d,f),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#es=ix(this,o,0);get value(){return this.#es}set value(t){this.#es=t}#tr=(ix(this,a),ix(this,l,!1));get vertical(){return this.#tr}set vertical(t){this.#tr=t}#Ur=(ix(this,c),ix(this,u,!1));get tip(){return this.#Ur}set tip(t){this.#Ur=t}#$r=(ix(this,h),ix(this,d,"#000"));get color(){return this.#$r}set color(t){this.#$r=t}#Fr=ix(this,f);#Vr;#ms=new _x;connectedCallback(){super.connectedCallback(),this.#ms.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.#ms.disconnect()}firstUpdated(){this.#Fr=this.shadowRoot.getElementById("slider"),this.#Vr=this.shadowRoot.getElementById("thumb")}render(){return Ib`<div id="slider" @pointerdown=${this.#vn} style=${Ux({"--alpha-slider-value":this.value,"--alpha-slider-color":this.color})}><div id="track"><cc-color-handle id="thumb" content chess data-tip=${Zb(this.tip,Math.round(1e4*this.value)/100+"%")}><div id="color"></div></cc-color-handle></div></div>`}#ps=null;#vn=t=>{t.isPrimary&&0===t.button&&(this.#Vr.setAttribute("active",""),this.setPointerCapture(t.pointerId),C(this.#pn,this.#bn),this.#ps=this.#Fr.getBoundingClientRect(),x(),this.#ms.start(this.value),t.target===this.#Fr&&this.#pn(t))};#pn=t=>{const e=this.#ps;let i=n(this.vertical?1-(t.clientY-e.top)/e.height:(t.clientX-e.left)/e.width);i=Math.round(100*i)/100,this.value!==i&&(this.value=i,this.#ms.update(i))};#bn=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.releasePointerCapture(t.pointerId),L(),this.#Vr.removeAttribute("active"),this.#ps=null,this.#ms.end())};static{this.styles=Vv`
:host {
    --alpha-slider-color: #000;
    --alpha-slider-size: 16px;
    --alpha-slider-direction: to right;

    display: flex;
    box-sizing: border-box;
    border-radius: 4px;
    user-select: none;
    contain: layout;
}

:host {
    width: 160px;
    height: var(--alpha-slider-size);
}

:host([vertical]) {
    width: var(--alpha-slider-size);
    height: 160px;
    flex-direction: column;
    --alpha-slider-direction: to top;
}

#slider {
    box-sizing: border-box;
    border-radius: inherit;

    flex: 1;
    margin: 0 calc(var(--alpha-slider-size) / 2);

    background: linear-gradient(var(--alpha-slider-direction), transparent 0%, var(--alpha-slider-color) 100%),
                var(--chess-gradient) 50% / var(--alpha-slider-size) var(--alpha-slider-size);
}

:host([vertical]) #slider {
    margin: calc(var(--alpha-slider-size) / 2) 0;
}

#track {
    width: 100%;
    height: 100%;
    transform: translateX(calc(var(--alpha-slider-value, 0) * 100%));
    pointer-events: none;
}

:host([vertical]) #track {
    transform: translateY(calc((1 - var(--alpha-slider-value, 0)) * 100%));
}

#thumb {
    --color-handle-tx: -50%;
    --color-handle-ty: 0;
    --color-handle-size: var(--alpha-slider-size);
}

:host([vertical]) #thumb {
    --color-handle-tx: 0;
    --color-handle-ty: -50%;
}

#color {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: var(--alpha-slider-color);
    opacity: var(--alpha-slider-value, 0);
    pointer-events: none;
}

`}}})(),Aw=(()=>{let t,e,i,s,r,o,a=Gb,l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[],m=[],y=[],v=[],b=[];return class extends a{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(a[Symbol.metadata]??null):void 0;t=[ox({type:Number,reflect:!1})],e=[ox({type:Number,reflect:!1})],i=[ox({type:Number,reflect:!1})],s=[ox({type:Number,reflect:!1})],r=[ox({type:Number,reflect:!1})],o=[ox({type:Boolean})],ex(this,null,t,{kind:"accessor",name:"radius",static:!1,private:!1,access:{has:t=>"radius"in t,get:t=>t.radius,set:(t,e)=>{t.radius=e}},metadata:n},l,c),ex(this,null,e,{kind:"accessor",name:"thumb",static:!1,private:!1,access:{has:t=>"thumb"in t,get:t=>t.thumb,set:(t,e)=>{t.thumb=e}},metadata:n},u,h),ex(this,null,i,{kind:"accessor",name:"hue",static:!1,private:!1,access:{has:t=>"hue"in t,get:t=>t.hue,set:(t,e)=>{t.hue=e}},metadata:n},d,f),ex(this,null,s,{kind:"accessor",name:"saturation",static:!1,private:!1,access:{has:t=>"saturation"in t,get:t=>t.saturation,set:(t,e)=>{t.saturation=e}},metadata:n},p,g),ex(this,null,r,{kind:"accessor",name:"brightness",static:!1,private:!1,access:{has:t=>"brightness"in t,get:t=>t.brightness,set:(t,e)=>{t.brightness=e}},metadata:n},m,y),ex(this,null,o,{kind:"accessor",name:"tip",static:!1,private:!1,access:{has:t=>"tip"in t,get:t=>t.tip,set:(t,e)=>{t.tip=e}},metadata:n},v,b),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#Gr=ix(this,l,160);get radius(){return this.#Gr}set radius(t){this.#Gr=t}#Hr=(ix(this,c),ix(this,u,16));get thumb(){return this.#Hr}set thumb(t){this.#Hr=t}#Zr=(ix(this,h),ix(this,d,0));get hue(){return this.#Zr}set hue(t){this.#Zr=t}#Yr=(ix(this,f),ix(this,p,1));get saturation(){return this.#Yr}set saturation(t){this.#Yr=t}#Qr=(ix(this,g),ix(this,m,1));get brightness(){return this.#Qr}set brightness(t){this.#Qr=t}#Ur=(ix(this,y),ix(this,v,!1));get tip(){return this.#Ur}set tip(t){this.#Ur=t}#ms=(ix(this,b),new _x);#Jr=!1;#qr=!1;connectedCallback(){super.connectedCallback(),this.#ms.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.#ms.disconnect()}render(){let t,e;return this.tip&&(this.#Jr&&(t=`${Math.trunc(this.hue)}°`),this.#qr&&(e=`S: ${Math.trunc(100*this.saturation)}%\nB: ${Math.trunc(100*this.brightness)}%`)),Ib`<div id="wrapper"
style=${Ux({"--wheel-radius":this.radius+"px","--thumb-size":this.thumb+"px","--clip-path":this.#Kr(this.radius,this.thumb),"--hue":this.hue+"deg","--saturation":this.saturation,"--brightness":this.brightness})}>
<div id="hue" class="layer" @pointerdown=${this.#Xr}></div>
<cc-color-handle id="hue-thumb" .active=${this.#Jr} data-tip=${Dx(t)} @pointerdown=${this.#Xr}></cc-color-handle>
<div id="area" class="layer" @pointerdown=${this.#to}><div id="area-slider"><cc-color-handle id="area-thumb" .active=${this.#qr} data-tip=${Dx(e)}></cc-color-handle></div></div>
</div>
`}get#eo(){return{h:this.hue,s:this.saturation,v:this.brightness}}#ps=null;#Xr=t=>{t.isPrimary&&0===t.button&&(this.#ps=this.shadowRoot.getElementById("hue").getBoundingClientRect(),this.#Jr=!0,this.setPointerCapture(t.pointerId),C(this.#io,this.#no),x(),this.#ms.start(this.#eo),"hue"===t.target.id&&this.#io(t),this.requestUpdate())};#io=t=>{const e=this.#ps,{width:i,height:n,left:s,top:r}=e,o=s+i/2,a=r+n/2,l=t.clientX-o,c=t.clientY-a,u=180*Math.atan2(c,l)/Math.PI,h=(360+Math.round(u))%360;this.hue!==h&&(this.hue=h,this.#ms.update(this.#eo))};#no=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.releasePointerCapture(t.pointerId),L(),this.#Jr=!1,this.#ps=null,this.#ms.end(),this.requestUpdate())};#to=t=>{t.isPrimary&&0===t.button&&(this.#ps=this.shadowRoot.getElementById("area").getBoundingClientRect(),this.#qr=!0,this.setPointerCapture(t.pointerId),C(this.#so,this.#ro),x(),this.#ms.start(this.#eo),"area"===t.target.id&&this.#so(t),this.requestUpdate())};#so=t=>{const e=this.#ps;let i=n((t.clientX-e.left)/e.width),s=n(1-(t.clientY-e.top)/e.height);i=Math.round(100*i)/100,s=Math.round(100*s)/100,this.saturation===i&&this.brightness===s||(this.saturation=i,this.brightness=s,this.#ms.update(this.#eo))};#ro=t=>{t.isPrimary&&(0!==t.button&&t.preventDefault(),this.releasePointerCapture(t.pointerId),L(),this.#qr=!1,this.#ps=null,this.#ms.end(),this.requestUpdate())};#Kr(t,e){const i=t/2,n=i-e,s=t-2*e;return`path(evenodd, 'M ${i} ${i} m -${i} 0 a ${i} ${i} 0 1 0 ${t} 0 a ${i} ${i} 0 1 0 -${t} 0 M ${i} ${i} m -${n} 0 a ${n} ${n} 0 1 0 ${s} 0 a ${n} ${n} 0 1 0 -${s} 0')`}static{this.styles=Vv`
:host {
    contain: layout;
    pointer-events: var(--cc-pointer-events, auto);
}
:host, * {
    user-select: none;
}
#wrapper {
    --wheel-radius: 160px;
    --thumb-size: 16px;

    --hue: 0deg;
    --saturation: 1;
    --brightness: 1;

    width: var(--wheel-radius);
    height: var(--wheel-radius);
    aspect-ratio: 1;

    display: grid;
    place-items: center;
}

.layer {
    width: 100%;
    aspect-ratio: 1;

    box-sizing: border-box;
    grid-area: 1 / 1 / 1 / 1;
}

#hue {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    clip-path: var(--clip-path);
    background: conic-gradient(
        from 90deg,
        rgb(255, 0, 0),
        rgb(255, 128, 0),
        rgb(255, 255, 0),
        rgb(128, 255, 0),
        rgb(0, 255, 0),
        rgb(0, 255, 128),
        rgb(0, 255, 255),
        rgb(0, 128, 255),
        rgb(0, 0, 255),
        rgb(128, 0, 255),
        rgb(255, 0, 255),
        rgb(255, 0, 128),
        rgb(255, 0, 0)
    );
}

#hue-thumb, #area-thumb {
    --color-handle-size: var(--thumb-size) !important;
}

#hue-thumb {
    --radius: calc((var(--wheel-radius) - var(--thumb-size)) / 2);
    --color-handle-tx: calc(cos(var(--hue)) * var(--radius));
    --color-handle-ty: calc(sin(var(--hue)) * var(--radius));
    --color-handle-bg: hsl(var(--hue), 100%, 50%);
    grid-area: 1 / 1 / 1 / 1;
}

#area-thumb {
    --lum: calc(var(--brightness) * (1 - var(--saturation) / 2));
    --sat: calc((var(--brightness) - var(--lum)) / min(var(--lum), 1 - var(--lum)));
    --color-handle-bg: hsl(var(--hue), calc(var(--sat) * 100%), calc(var(--lum) * 100%));
}

#area-slider {
    width: 100%;
    height: 100%;
    pointer-events: none;
    transform: translate(calc(100% * var(--saturation)), calc(100% * (1 - var(--brightness))));
}

#area {
    border-radius: 2px;
    width: calc(1.41421356237 * (50% - 3 / 2 * var(--thumb-size)) - 2px);

    --area-y: calc(var(--lightness) + var(--saturation) * min(var(--lightness), 1 - var(--lightness)));
    --area-x: calc(2 * (1 - var(--lightness) / var(--area-y)));

    background: linear-gradient(to top, black 0%, hsla(var(--hue), 100%, 0%, 0) 100%), linear-gradient(to right, white 0%, hsla(var(--hue), 100%, 0%, 0) 100%), hsl(var(--hue), 100%, 50%);
}
    `}}})(),Pw=(()=>{let t,e=Gb,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"vertical",static:!1,private:!1,access:{has:t=>"vertical"in t,get:t=>t.vertical,set:(t,e)=>{t.vertical=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#tr=ix(this,i,!1);get vertical(){return this.#tr}set vertical(t){this.#tr=t}render(){return Lb}static{this.styles=Vv`
:host {
    display: block;
    --divider-size: 24px;
    pointer-events: none;
    user-select: none;
    background: var(--gray-500);
    opacity: 45%;

    width: var(--divider-size);
    height: 1px;
    margin: auto 0;
}

:host([vertical]) {
    width: 1px;
    height: var(--divider-size);
    margin: 0 auto;
}
`}constructor(){super(...arguments),ix(this,n)}}})(),Dw=(()=>{let t,e=Gb,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:String,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"type",static:!1,private:!1,access:{has:t=>"type"in t,get:t=>t.type,set:(t,e)=>{t.type=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#yr=ix(this,i,"normal");get type(){return this.#yr}set type(t){this.#yr=t}render(){return Ib`
            <div id="content"><slot></slot></div>
            <div id="close" @click=${this.#oo}><cc-css-icon name="Close"></cc-css-icon></div>`}#oo(){this.dispatchEvent(new Event("close"))}static{this.styles=Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --toast-face: var(--gray-900);
        --toast-border: var(--gray-700);
        --toast-shadow: 1px 4px 8px -2px rgb(0 0 0);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --toast-face: var(--gray-50);
        --toast-border: var(--gray-100);
        --toast-shadow: 1px 4px 8px -2px rgb(0 0 0 / 15%);
    }
}

:host {
    display: flex;
    align-items: center;
    gap: 4px;
    box-sizing: border-box;
    border-radius: 4px;
    user-select: none;
    border: 1px solid var(--toast-border);
    box-shadow: var(--toast-shadow);

    width: min-content;
    height: auto;
    overflow: clip;
    padding: 8px;
    min-width: 320px;
    min-height: 64px;
    max-width: 640px;
    max-height: 240px;
    font-size: 14px;

    color: var(--text-color-default);
    background: var(--toast-face);
}

:host(:not([type="normal"])) {
    color: #fff;
}

:host([type="info"]) {
    --toast-face: var(--info-color);
}

:host([type="success"]) {
    --toast-face: var(--success-color);
}

:host([type="warning"]) {
    --toast-face: var(--warning-color);
}

:host([type="error"]) {
    --toast-face: var(--error-color);
}

#content {
    flex: 1;
}

#close {
    box-sizing: border-box;
    padding: 3px;
    width: 24px;
    height: 24px;
    cursor: pointer;
    border-radius: 50%;
}
#close:hover {
    background: #5555;
}
`}constructor(){super(...arguments),ix(this,n)}}})(),Ew=(()=>{let t,e,i=Gb,n=[],s=[],r=[],o=[];return class extends i{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[ox({type:Object,attribute:!1})],e=[ox({type:String,reflect:!1})],ex(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:a},n,s),ex(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#ns=ix(this,n,[]);get items(){return this.#ns}set items(t){this.#ns=t}#es=(ix(this,s),ix(this,r,void 0));get value(){return this.#es}set value(t){this.#es=t}#ao=(ix(this,o),new WeakMap);render(){return this.current||Lb}get current(){const t=this.items.find((t=>t.value===this.value));return t?(this.#ao.has(t)||this.#ao.set(t,this.#lo(t)),this.#ao.get(t)):null}#lo(t){return"string"==typeof t.content?document.createElement(t.content):t.content(t)}static{this.styles=Vv`
        :host {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        :host > * {
            width: 100%;
            height: 100%;
        }
    `}}})();const Ow=["Top-Left","Top-Center","Top-Right","Middle-Left","Center","Middle-Right","Bottom-Left","Bottom-Center","Bottom-Right"],Rw=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:0,y:.5},{x:.5,y:.5},{x:1,y:.5},{x:0,y:1},{x:.5,y:1},{x:1,y:1}];let Ww=(()=>{let t,e,i,n,s=Gb,r=[],o=[],a=[],l=[],c=[],u=[],h=[];return class extends s{static{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0})],e=[ox({type:Boolean,reflect:!1})],i=[ox({type:Array,attribute:!1})],n=[ox({type:Object,reflect:!1,noAccessor:!0})],ex(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:d},o,a),ex(this,null,e,{kind:"accessor",name:"unselectable",static:!1,private:!1,access:{has:t=>"unselectable"in t,get:t=>t.unselectable,set:(t,e)=>{t.unselectable=e}},metadata:d},l,c),ex(this,null,i,{kind:"accessor",name:"valueMap",static:!1,private:!1,access:{has:t=>"valueMap"in t,get:t=>t.valueMap,set:(t,e)=>{t.valueMap=e}},metadata:d},u,h),ex(this,null,n,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:d},null,r),d&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d})}#Tn=(ix(this,r),ix(this,o,!1));get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#Ks=(ix(this,a),ix(this,l,!1));get unselectable(){return this.#Ks}set unselectable(t){this.#Ks=t}#co=(ix(this,c),ix(this,u,Rw));get valueMap(){return this.#co}set valueMap(t){this.#co=t}#Xs=(ix(this,h),null);get value(){return this.#Xs}set value(t){if(this.#Xs!==t){if(null==t)this.#Xs=this.#uo=null;else{const e=this.valueMap.findIndex((e=>e.x===t.x&&e.y===t.y));if(-1===e)this.#Xs=this.#uo=null;else{if(this.#uo===e)return;this.#uo=e,this.#Xs=this.valueMap[e]}}this.requestUpdate()}}#uo=null;render(){return Ib`<div id="wrapper">${mw(Ow,this.#ho)}</div>`}#ho=(t,e)=>Ib`<div class="pin" data-index=${e} title=${t} @click=${this.#ls} selected=${Zb(this.#uo===e)}></div>`;#ls(t){let e,i=parseInt(t.target.dataset.index);if(i===this.#uo){if(!this.unselectable)return;e=null,i=null}else e=this.valueMap[i];this.dispatchEvent(new Qb(e))&&(this.#uo=i,this.#Xs=e,this.requestUpdate())}static{this.styles=Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --pin-point-face-hover: var(--text-color-darker);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --pin-point-face-hover: var(--text-color-lighter);
    }
}

:host {
    --pin-point-size: 18px;
    --pin-point-radius: 3px;
    --pin-point-border-radius: 1px;
    --pin-point-line-size: 0px;
    --pin-point-face: var(--text-color-default);

    --container-size: calc(var(--pin-point-size) + 2 * var(--pin-point-radius));

    display: block;
    box-sizing: border-box;
    width: var(--container-size);
    height: var(--container-size);
    user-select: none;
    contain: strict;
}

:host([bordered]) {
    --pin-point-line-size: 2px;
}

:host([round]) {
    --pin-point-border-radius: 50%;
}

:host([size="m"]) {
    --pin-point-size: 32px;
    --pin-point-radius: 5px;
}

:host([disabled]) {
    pointer-events: none;
    opacity: 45%;
}

#wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: calc(var(--pin-point-size) - var(--pin-point-line-size));
    height: calc(var(--pin-point-size) - var(--pin-point-line-size));

    border: var(--pin-point-line-size) solid var(--pin-point-face);
    pointer-events: none;
}

.pin {
    position: absolute;
    border-radius: var(--pin-point-border-radius);
    width: calc(2 * var(--pin-point-radius));
    height: calc(2 * var(--pin-point-radius));
    background: var(--pin-point-face);
    cursor: pointer;
    pointer-events: var(--cc-pointer-events, auto);
}

:host([disabled]) .pin {
    pointer-events: none;
}

.pin:hover {
    background: var(--pin-point-face-hover);
}

:host(:not([disabled])) .pin[selected] {
    background: var(--accent-color-500);
}

:host(:not([disabled])) .pin[selected]:hover {
    background: var(--accent-color-400);
}

.pin[data-index="0"] {top: 0; left: 0; transform: translate(-50%, -50%)}
.pin[data-index="1"] {top: 0; left: 50%; transform: translate(-50%, -50%)}
.pin[data-index="2"] {top: 0; right: 0; transform: translate(50%, -50%)}
.pin[data-index="3"] {top: 50%; left: 0; transform: translate(-50%, -50%)}
.pin[data-index="4"] {top: 50%; left: 50%; transform: translate(-50%, -50%)}
.pin[data-index="5"] {top: 50%; right: 0; transform: translate(50%, -50%)}
.pin[data-index="6"] {bottom: 0; left: 0; transform: translate(-50%, 50%)}
.pin[data-index="7"] {bottom: 0; left: 50%; transform: translate(-50%, 50%)}
.pin[data-index="8"] {bottom: 0; right: 0; transform: translate(50%, 50%)}

`}}})();const Bw=-12,Uw=new Map([["bottom",[.5,1,0,1,0,Bw]],["top",[.5,0,0,-1,0,Bw]],["right",[1,.5,1,0,Bw,0]],["left",[0,.5,-1,0,Bw,0]]]);let $w=(()=>{let t,e,i=hx,n=[],s=[],r=[],o=[];return class extends i{constructor(){super(...arguments),this.longPressDelay=400,this.#co=ix(this,n,Rw),this.#do=(ix(this,s),ix(this,r,"bottom")),this.#cs=(ix(this,o),t=>{t.preventDefault(),Tx({...t.detail})}),this.#ls=t=>{this.#Zn.isOpen||t.composedPath().includes(this.#Zn)||this.#fo(this.valueMap[4])},this.#or=null,this.#bn=t=>{0===t.button&&(clearTimeout(this.#or),this.#or=null)},this.#sr=()=>{clearTimeout(this.#or),this.#or=setTimeout(this.#po,this.longPressDelay)},this.#po=async()=>{this.#fo(await this.#Zn.open(this,...Uw.get(this.placement)))}}static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[ox({type:Array,attribute:!1})],e=[ox({type:String,reflect:!1})],ex(this,null,t,{kind:"accessor",name:"valueMap",static:!1,private:!1,access:{has:t=>"valueMap"in t,get:t=>t.valueMap,set:(t,e)=>{t.valueMap=e}},metadata:a},n,s),ex(this,null,e,{kind:"accessor",name:"placement",static:!1,private:!1,access:{has:t=>"placement"in t,get:t=>t.placement,set:(t,e)=>{t.placement=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#Zn;#co;get valueMap(){return this.#co}set valueMap(t){this.#co=t}#do;get placement(){return this.#do}set placement(t){this.#do=t}firstUpdated(){this.#Zn=this.shadowRoot.getElementById("popover")}render(){return[super.render(),Ib`<cc-popover id="popover"><cc-pin-point bordered .valueMap=${this.valueMap} @change=${this.#cs} size="m"></cc-pin-point></cc-popover>`]}#cs;#ls;#or;#bn;#sr;#po;#fo(t){t&&this.dispatchEvent(new Qb(t))}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#ls),this.addEventListener("pointerdown",this.#sr),this.addEventListener("pointerup",this.#bn),this.addEventListener("pointercancel",this.#bn)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#ls),this.removeEventListener("pointerdown",this.#sr),this.removeEventListener("pointerup",this.#bn),this.removeEventListener("pointercancel",this.#bn)}static{this.styles=[...super.styles,Vv`
#popover::part(popover) {
    padding: 8px;
}
`]}}})();class Fw extends Gb{render(){return Ib`<slot></slot>`}static{this.styles=Vv`
:host {
    --flex-gap: 8px;
    display: flex;
    flex-direction: column;
    gap: var(--flex-gap);
}
::slotted([flex]) {
    flex: 1;
}
    `}}class Vw extends Gb{render(){return Ib`<slot></slot>`}static{this.styles=Vv`
:host {
    display: flex;
    flex-direction: row;
    gap: var(--flex-gap);
    align-items: center;
}
:host([spaced]) {
    justify-content: space-between;
}

::slotted([flex]) {flex: 1}
::slotted([fluid]) {width: calc((100% - 3 * var(--flex-gap) - 2 * 32px) / 2)}
::slotted([fluid-2]) {width: calc((100% - var(--flex-gap)) / 2)}
::slotted([fluid-3]) {width: calc((100% - 2 * var(--flex-gap)) / 3)}
::slotted([fluid-4]) {width: calc((100% - 3 * var(--flex-gap)) / 4)}
::slotted([fixed-18]) {width: 18px}
::slotted([fixed-24]) {width: 24px}
::slotted([fixed-32]) {width: 32px}
::slotted([fixed-42]) {width: 42px}
::slotted([left-gap]) {margin-left: var(--flex-gap)}
::slotted([right-gap]) {margin-right: var(--flex-gap)}
    `}}let Gw=(()=>{let t,e,i,n,s,r=Gb,o=[];return class extends r{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!0,noAccessor:!0})],e=[ox({type:Boolean,reflect:!0,noAccessor:!0})],i=[ox({type:Number,reflect:!1,noAccessor:!0})],n=[ox({type:Boolean,reflect:!1,noAccessor:!0})],s=[ox({type:Boolean,reflect:!1,noAccessor:!0})],ex(this,null,t,{kind:"setter",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,set:(t,e)=>{t.disabled=e}},metadata:a},null,o),ex(this,null,e,{kind:"setter",name:"indeterminate",static:!1,private:!1,access:{has:t=>"indeterminate"in t,set:(t,e)=>{t.indeterminate=e}},metadata:a},null,o),ex(this,null,i,{kind:"setter",name:"pivot",static:!1,private:!1,access:{has:t=>"pivot"in t,set:(t,e)=>{t.pivot=e}},metadata:a},null,o),ex(this,null,n,{kind:"setter",name:"filled",static:!1,private:!1,access:{has:t=>"filled"in t,set:(t,e)=>{t.filled=e}},metadata:a},null,o),ex(this,null,s,{kind:"setter",name:"ramp",static:!1,private:!1,access:{has:t=>"ramp"in t,set:(t,e)=>{t.ramp=e}},metadata:a},null,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#Cr=(ix(this,o),!1);get disabled(){return this.#Cr}set disabled(t){this.#Cr!==t&&(this.#Fr.disabled=this.#mr.disabled=this.#Cr=t)}#Lr=!1;get indeterminate(){return this.#Lr}set indeterminate(t){this.#Lr!==t&&(this.#Fr.indeterminate=this.#mr.indeterminate=this.#Lr=t)}#Xs;get value(){return this.#Xs}set value(t){this.#Xs!==t&&(this.#Fr.value=this.#mr.value=this.#Xs=t)}get formatter(){return this.#mr.formatter}set formatter(t){this.#mr.formatter=t}get constraint(){return this.#Fr.constraint}set constraint(t){this.#Fr.constraint=t}get pivot(){return this.#Fr.pivot}set pivot(t){this.#Fr.pivot=t}get filled(){return this.#Fr.hasAttribute("filled")}set filled(t){this.#go(this.#Fr,"filled",t)}get ramp(){return this.#Fr.hasAttribute("filled")}set ramp(t){this.#go(this.#Fr,"ramp",t)}#ms=new _x;#mr;#Fr;#Gs;constructor(){super(),this.#ms.inherited=!0;const t=document.createElement("cc-number-input");t.id="input",t.part.add("input"),t.setAttribute("quiet",""),t.setAttribute("text-right",""),t.stream=this.#ms,t.pointerStep=0,this.#mr=t;const e=document.createElement("cc-slider");e.id="slider",e.part.add("slider"),e.stream=this.#ms,this.#Fr=e;const i=document.createElement("slot");i.id="label",i.part.add("label"),this.#Gs=[i,e,t]}connectedCallback(){super.connectedCallback(),this.addEventListener("update",this.#mo),this.#ms.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("update",this.#mo),this.#ms.disconnect()}#go(t,e,i){i?t.setAttribute(e,""):t.removeAttribute(e)}#mo=t=>{this.#Fr.value=this.#mr.value=this.#Xs=t.detail};render(){return this.#Gs}static{this.styles=Vv`
:host {
    display: grid;
    column-gap: 8px;
    row-gap: 0px;
    grid-template-areas: "label label label input" "slider slider slider slider";
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: min-content;
    align-items: center;
    user-select: none;
    contain: content;
}

:host([inline]) {
    grid-template-areas: "label slider slider input";
    grid-template-columns: min-content 1fr 1fr 32px;
}

:host([inline][hide-label]) {
    grid-template-areas: "slider slider slider input";
    grid-template-columns: 1fr 1fr 1fr 32px;
}

:host([inline][hide-label]) #label {
    display: none;
}

:host([disabled]) {
    pointer-events: none;
}

:host([disabled]) #label {
    opacity: 45%;
}
::slotted(*) {grid-area: label}
#label {grid-area: label; font-size: 12px}
#slider {grid-area: slider}
#input {grid-area: input}
    `}}})(),Hw=(()=>{let t,e,i,n,s=Gb,r=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[];return class extends s{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ox({type:Array,attribute:!1})],e=[ox({reflect:!1})],i=[ox({type:String,reflect:!0})],n=[ox({type:String,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:f},r,o),ex(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:f},a,l),ex(this,null,i,{kind:"accessor",name:"variant",static:!1,private:!1,access:{has:t=>"variant"in t,get:t=>t.variant,set:(t,e)=>{t.variant=e}},metadata:f},c,u),ex(this,null,n,{kind:"accessor",name:"justify",static:!1,private:!1,access:{has:t=>"justify"in t,get:t=>t.justify,set:(t,e)=>{t.justify=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#ns=ix(this,r,[]);get items(){return this.#ns}set items(t){this.#ns=t}#es=(ix(this,o),ix(this,a,void 0));get value(){return this.#es}set value(t){this.#es=t}#zn=(ix(this,l),ix(this,c,"bottom"));get variant(){return this.#zn}set variant(t){this.#zn=t}#yo=(ix(this,u),ix(this,h,"start"));get justify(){return this.#yo}set justify(t){this.#yo=t}render(){return this.items.map(this.#vo)}#vo=(ix(this,d),(t,e)=>{const i=t.value===this.value;return Ib`<div part="tab" class="tab" active=${Zb(i)} data-index=${e}>${t.title}</div>`});connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#ls)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#ls)}#ls=t=>{const e=t.composedPath()[0];if(!(e instanceof HTMLElement&&e.className.includes("tab")))return;const i=+e.dataset.index,n=this.items[i];n&&n.value!==this.value&&this.dispatchEvent(new Qb(n.value,n))&&(this.value=n.value)};static{this.styles=Vv`
@container --theme-provider style(--theme: dark) {
    :host {
        --tabs-text-active-color: var(--text-color-lighter);
        --tabs-border-color: var(--gray-700);
        --tabs-border-active-color: var(--gray-300);
    }
}

@container --theme-provider style(--theme: light) {
    :host {
        --tabs-text-active-color: var(--text-color-darker);
        --tabs-border-color: var(--gray-200);
        --tabs-border-active-color: var(--gray-800);
    }
}

:host {
    display: flex;
    box-sizing: border-box;
    font-size: 14px;
    justify-contentL flex-start;
    --tabs-width: max-content;
    --tabs-height: 32px;
    --tabs-border-size: 2px;
    color: var(--text-color-default);
}

:host([justify="center"]) {
    justify-content: center;
}
:host([justify="end"]) {
    justify-content: flex-end;
}
:host([justify="fill"]) .tab {
    flex: 1;
}

:host([variant="top"]),
:host([variant="bottom"]) {
    flex-direction: row;
    padding: 0 8px;
}

:host([variant="left"]),
:host([variant="right"]) {
    flex-direction: column;
    padding: 8px 0;
}

:host([variant="left"]) {
    align-items: flex-start;
    border-left: var(--tabs-border-size) solid var(--tabs-border-color);
}
:host([variant="right"]) {
    align-items: flex-end;
    border-right: var(--tabs-border-size) solid var(--tabs-border-color);
}
:host([variant="top"]) {
    border-top: var(--tabs-border-size) solid var(--tabs-border-color);
}
:host([variant="bottom"]) {
    border-bottom: var(--tabs-border-size) solid var(--tabs-border-color);
}

.tab {
    display: flex;
    justify-content: center;
    box-sizing: border-box;
    user-select: none;
    cursor: pointer;
    padding: 8px;
}

.tab:hover {
    color: var(--tabs-text-active-color);
}

.tab[active] {
    color: var(--tabs-text-active-color);
    border-color: var(--tabs-border-active-color) !important;
}
:host([bold]) .tab[active] {
    font-weight: bolder;
}

:host([variant="top"]) .tab,
:host([variant="bottom"]) .tab {
    flex-direction: row;
    width: var(--tabs-width);
}

:host([variant="left"]) .tab,
:host([variant="right"]) .tab {
    flex-direction: column;
    height: var(--tabs-height);
}

:host([variant="top"]) .tab {
    border-top: var(--tabs-border-size) solid var(--tabs-border-color);
    transform: translateY(calc(-1 * var(--tabs-border-size)));
}

:host([variant="bottom"]) .tab {
    border-bottom: var(--tabs-border-size) solid var(--tabs-border-color);
    transform: translateY(var(--tabs-border-size));
}

:host([variant="left"]) .tab {
    border-left: var(--tabs-border-size) solid var(--tabs-border-color);
    transform: translateX(calc(-1 * var(--tabs-border-size)));
}

:host([variant="right"]) .tab {
    border-right: var(--tabs-border-size) solid var(--tabs-border-color);
    transform: translateX(var(--tabs-border-size));
}

`}}})(),Zw=(()=>{let t,e,i,n=Gb,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ox({attribute:!1})],e=[ox({reflect:!1})],i=[ox({type:Boolean,reflect:!0})],ex(this,null,t,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:u},s,r),ex(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:u},o,a),ex(this,null,i,{kind:"accessor",name:"vertical",static:!1,private:!1,access:{has:t=>"vertical"in t,get:t=>t.vertical,set:(t,e)=>{t.vertical=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#ns=ix(this,s,[]);get items(){return this.#ns}set items(t){this.#ns=t}#es=(ix(this,r),ix(this,o,void 0));get value(){return this.#es}set value(t){this.#es=t}#tr=(ix(this,a),ix(this,l,!1));get vertical(){return this.#tr}set vertical(t){this.#tr=t}render(){return this.items.map(this.#as)}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#ls)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#ls)}#as=(ix(this,c),(t,e)=>Ib`
        <div part="item" class="item" data-index=${e} badge=${Dx(t.badge)} data-selected=${Zb(t.value===this.value)}>
            <div part="icon" class="icon"><cc-icon .name=${t.icon}></cc-icon></div>
            <div class="content">
                <div part="title" class="title">${t.title}</div>
                <div part="description" class="description">${t.description||""}</div>
            </div>
        </div>
        `);#ls=t=>{const e=t.composedPath()[0],i=this.items[+e?.dataset?.index];i&&i.value!==this.value&&this.dispatchEvent(new Qb(i.value,i))&&(this.value=i.value)};static{this.styles=[vx,Vv`
:host {
    display: flex;
    flex-direction: row;
    gap: 8px;
    box-sizing: border-box;
    user-select: none;
    --item-padding: 16px;
}
:host([vertical]) {
    flex-direction: column;
}

.item {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 8px;
    border-radius: 4px;
    padding: var(--item-padding);
    cursor: pointer;
    contain: content;
}
.item:hover, .item[data-selected] {
    background: var(--surface-hover-color);
}

.item > * {
    pointer-events: none;
}

.icon {
    width: 32px;
    height: 32px;
    border-radius: 4px;
    padding: 7px;
    box-sizing: border-box;
    background: var(--accent-color-500);
    color: var(--white);
}


.content {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    gap: 0;
    font-size: 12px;
}

.title {
    font-weight: bold;
}
.description {
    font-size: 10px;
    opacity: 75%;
}

`]}}})(),Yw=(()=>{let t,e,i,n,s=Gb,r=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[];return class extends s{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!1})],e=[ox({type:Boolean,reflect:!0})],i=[ox({type:Boolean,reflect:!0})],n=[ox({attribute:!1})],ex(this,null,t,{kind:"accessor",name:"directory",static:!1,private:!1,access:{has:t=>"directory"in t,get:t=>t.directory,set:(t,e)=>{t.directory=e}},metadata:f},r,o),ex(this,null,e,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:f},a,l),ex(this,null,i,{kind:"accessor",name:"invalid",static:!1,private:!1,access:{has:t=>"invalid"in t,get:t=>t.invalid,set:(t,e)=>{t.invalid=e}},metadata:f},c,u),ex(this,null,n,{kind:"accessor",name:"options",static:!1,private:!1,access:{has:t=>"options"in t,get:t=>t.options,set:(t,e)=>{t.options=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#Xs=null;get value(){return this.#Xs}set value(t){t?this.directory&&"file"===t.kind||this.#Xs&&t.isSameEntry(this.#Xs)||(this.#Xs=t,this.requestUpdate()):this.#Xs&&(this.#Xs=null,this.requestUpdate())}#bo=ix(this,r,!1);get directory(){return this.#bo}set directory(t){this.#bo=t}#Tn=(ix(this,o),ix(this,a,!1));get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#xo=(ix(this,l),ix(this,c,!1));get invalid(){return this.#xo}set invalid(t){this.#xo=t}#wo=(ix(this,u),ix(this,h,void 0));get options(){return this.#wo}set options(t){this.#wo=t}render(){return Ib`<cc-action-button id="input" .disabled=${this.disabled} @click=${this.#Mo} input-face>
            <div id="file" class="text-ellipsis">${this.#Xs?.name||""}</div>
            <cc-css-icon name="Folder"></cc-css-icon>
        </cc-action-button>`}async#Mo(){try{const t=await(this.directory?window.showDirectoryPicker(this.options):window.showSaveFilePicker(this.options));if(!t)return;if(this.#Xs&&t.isSameEntry(this.#Xs))return;this.dispatchEvent(new Qb(t))&&(this.#Xs=t,this.requestUpdate())}catch{}}static{this.styles=[wx,Vv`
:host {
    width: 100%;
}
#input {
    width: 100%;
    justify-content: space-between;
}
#file {
    flex: 1;
}
:host([invalid]) #input {
    color: var(--error-color);
    border: 1px solid var(--error-color);
}
`]}constructor(){super(...arguments),ix(this,d)}}})();class Qw extends Zx{#So;constructor(){super(),this.#So=document.createElement("cc-progressbar"),this.#So.id="progress"}render(){return this.#So}async init(t){const e=this.dialog;e.cancelable=!1,e.animated=!!t.animated;const i=this.#So;i.indeterminate=!0,i.value=0,i.label=t?.message||"",t.done.then(this.#oo)}#oo=t=>{this.dialog.close(t)};static{this.styles=Vv`
:host {
    display: flex;
    width: 320px;
    height: 96px;
    align-items: center;
    padding: 16px;
    pointer-events: none;
    user-select: none;
    box-sizing: border-box;
}
`}}let Jw=(()=>{let t,e,i=Zx,n=[],s=[];return class extends i{static{const r="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[ax()],ex(this,e={get:nx((function(){return this.#ko}),"#data","get"),set:nx((function(t){this.#ko=t}),"#data","set")},t,{kind:"accessor",name:"#data",static:!1,private:!0,access:{has:t=>#Zt in t,get:t=>t.#Zt,set:(t,e)=>{t.#Zt=e}},metadata:r},n,s),r&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}#ko=ix(this,n,{});get#Zt(){return e.get.call(this)}set#Zt(t){return e.set.call(this,t)}render(){const t=this.#Zt;return Ib`
        <div id="message">${t.message||""}</div>
        <div id="buttons">
            <cc-button variant="secondary" outline @click=${this.#Qn} hidden=${Zb(!1===t.cancel)}>${t.cancel||"Cancel"}</cc-button>
            <cc-button variant="primary" outline @click=${this.#_o}>${t.no||"No"}</cc-button>
            <cc-button variant="accent" @click=${this.#Io}>${t.yes||"Yes"}</cc-button>
        </div>
        `}#Io(){this.dialog.close(!0)}#_o(){this.dialog.close(!1)}#Qn(){this.dialog.close(void 0)}async init(t){this.dialog.cancelable=!1!==t.cancel,this.#Zt=t,await this.updateComplete}static{this.styles=Vv`
:host {
    display: flex;
    flex-direction: column;
    width: 440px;
    height: 160px;
    padding: 16px;
    user-select: none;
}

#message {
    flex: 1;
    font-size: 14px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

#buttons {
    display: flex;
    gap: 8px;
    justify-content: center;
}

cc-button {
    flex: 1;
}

`}constructor(){super(...arguments),ix(this,s)}}})();const qw={min:0,max:1,step:.01,scale:100,unit:"%",digits:0},Kw={step:.001,stepScale:10,scale:100,digits:1,unit:"%"},Xw={...Kw,min:0},tM={...Kw,min:0,max:1},eM={min:0,step:.1,stepScale:10,digits:1,unit:""},iM={min:0,step:1,digits:0,unit:""},nM={step:.1,stepScale:10,digits:1,unit:"°"},sM={...nM,min:0,max:360},rM={step:.01,stepScale:100,digits:2,unit:""},oM={...rM,min:0},aM=new Map,lM=new Map;function cM(t,e){t.startsWith(".")||(t="."+t),aM.set(t,e)}function uM(t){if(t.type)return t.type;const e="."+t.name.trim().toLowerCase().split(".").pop();return aM.has(e)?aM.get(e):""}function hM(t,...e){for(const i of e)lM.set(i,t)}let dM;async function fM(t,e,i){if(t instanceof FileSystemFileHandle){if("file"!==t.kind)return null;t=await t.getFile()}return e??=uM(t),pM(await t.arrayBuffer(),e,i)}async function pM(t,e,i){if(!lM.has(e))return!1;const n=Xo();try{return!1!==await lM.get(e)(n,t,e)&&await async function(t,e){const i=await dM(t,e);return!!i&&(_o(le,i),!0)}(n,i)}catch{return!1}finally{ta(n)}}async function gM(t){return t instanceof File?aa(await t.arrayBuffer()):t instanceof FileSystemFileHandle?aa(await(await t.getFile()).arrayBuffer()):t instanceof Blob?aa(await t.arrayBuffer()):aa(t)}const mM=new Map([["normal",0],["fill",0],["fill stroke",0],["fill stroke markers",0],["fill markers",0],["fill markers stroke",0],["stroke",2],["stroke fill",2],["stroke fill markers",2],["stroke markers",2],["stroke markers fill",2],["markers",0],["markers fill",0],["markers fill stroke",0],["markers stroke",2],["markers stroke fill",2]]),yM=new Map([[0,"fill"],[2,"stroke"]]),vM=new Map([["butt",0],["square",2],["round",1]]),bM=EM(vM),xM=new Map([["miter",0],["bevel",2],["round",1]]),wM=EM(xM),MM=new Map([["normal",11],["multiply",10],["screen",14],["overlay",12],["darken",3],["lighten",8],["color-dodge",2],["color-burn",1],["hard-light",6],["soft-light",15],["difference",4],["exclusion",5],["hue",7],["saturation",13],["color",0],["luminosity",9]]),SM=EM(MM),kM=new Map([["pad",0],["repeat",1],["reflect",2]]),_M=EM(kM),IM=new Map([["evenodd",1],["nonzero",0]]),CM=EM(IM);function LM(t){return yM.get(t)??"fill"}function NM(t){return bM.get(t)??"butt"}function jM(t){return wM.get(t)??"miter"}function TM(t){return SM.get(t)??"normal"}function zM(t){return MM.get(t)??11}function AM(t){return _M.get(t)??"pad"}function PM(t){return CM.get(t)??"evenodd"}function DM(t){return IM.get(t)??1}function EM(t){const e=new Map;for(const[i,n]of t)e.set(n,i);return e}class OM{#$t=[];constructor(t,e){this.push(t,e)}get#Xs(){return this.#$t.at(-1)}get#ge(){return this.#$t.at(-2)}get viewBox(){return this.#Xs[0]}get matrix(){return this.#Xs[1]}get parentMatrix(){return this.#ge[1]}push(t,e){this.#$t.push([t,e||new $i])}concat(t,e){const i=this.#Xs;this.#$t.push([e||i[0],i[1].clone().multiply(t)])}pop(){this.#$t.length>1&&this.#$t.pop()}}const RM="http://www.w3.org/2000/svg";function WM(t){return document.createElementNS(RM,t)}const BM={x1:{axis:"x",fallback:0},y1:{axis:"y",fallback:0},x2:{axis:"x",fallback:1},y2:{axis:"y",fallback:0}},UM={cx:{axis:"x",fallback:.5},cy:{axis:"y",fallback:.5},r:{axis:null,fallback:.5},fx:{axis:"x",fallback:t=>t.cx},fy:{axis:"y",fallback:t=>t.cy},fr:{axis:null,fallback:0}};class $M{constructor(){this.#Co=new Map,this.subUnitAsPercent=!1,this.#Lo=["id","title","data-title","data-name"]}#Co;dispose(){this.#Co?.clear(),this.#Co=null}getStyle(t){return this.#Co.has(t)||this.#Co.set(t,t.computedStyleMap()),this.#Co.get(t)}getUnit(t,e){return this.getStyle(t).get(e)}isPercentLikeUnit(t){return this.subUnitAsPercent&&"px"===t.unit&&t.value>=0&&t.value<=1}getNumber(t,e){return this.getUnit(t,e).value}getKeyword(t,e){return this.getStyle(t).get(e).value}getString(t,e){return this.getStyle(t).get(e).toString()}getNumberOrPercentFromViewBox(t,e,i,n=null,s=1){const r=this.getUnit(t,e);return"auto"===r.value.toString()?s*this.getAxisValue(i,n):"percent"===r.unit?r.value/100*this.getAxisValue(i,n):this.isPercentLikeUnit(r)?r.value*this.getAxisValue(i,n):r.value}getOpacity(t){return this.getNumber(t,"opacity")}getBlendMode(t){return zM(this.getKeyword(t,"mix-blend-mode"))}getIsolate(t){return"isolate"===this.getKeyword(t,"isolation")}getAxisValue(t,e){return"x"===e?t.width:"y"===e?t.height:Math.sqrt((t.width**2+t.height**2)/2)}getAxisSize(t,e,i,n,s=0){const r=this.getUnit(t,e);return r instanceof CSSUnitValue?"percent"===r.unit?r.value/100*this.getAxisValue(i,n):this.isPercentLikeUnit(r)?r.value*this.getAxisValue(i,n):r.value:s}getPercentAxisValue(t,e,i){return"x"===i?e.x+t*e.width:"y"===i?e.y+t*e.height:t*Math.sqrt((e.width**2+e.height**2)/2)}getSVGLength(t,e,i){t instanceof SVGAnimatedLength&&(t=t.baseVal);const n=t.valueInSpecifiedUnits;return t.unitType===SVGLength.SVG_LENGTHTYPE_PERCENTAGE?this.getPercentAxisValue(n/100,e,i):t.value}resolveElementId(t,e){let i=t;do{i=i.ownerSVGElement;const t=i.getElementById(e);if(t)return t}while(i.ownerSVGElement);return null}resolveHref(t){let e=this.getSVGHref(t);return e&&e.startsWith("#")?this.resolveElementId(t,e.substring(1)):null}getSVGHref(t){return t instanceof SVGElement&&(t=t.href),t instanceof SVGAnimatedString?t.baseVal:t}getSVGRefId(t){if(!t||"none"===t)return null;const e=/^url\(["']?#([^)"']+)["']?\)/i.exec(t);return e&&e[1]?e[1]:null}#Lo;getTitle(t){let e=null;for(const i of this.#Lo)if(e=t.getAttribute(i),"string"==typeof e&&(e=e.trim(),e.length>0))return e;return null}getTransform(t){const e=this.getStyle(t).get("transform");if(!e||"none"===e.toString()||!e.is2D)return new $i;const i=e.toMatrix();return i.isIdentity?new $i:$i.Create(i)}getSVGMatrix(t,e){let i=t[e];if(!i)return null;if(i instanceof SVGAnimatedTransformList&&(i=i.baseVal),!(i instanceof SVGTransformList))return null;const n=i?.consolidate()?.matrix;return n?$i.Create(n):null}getHidden(t){return"none"===this.getString(t,"display")||"visible"!==this.getString(t,"visibility")}getPathLength(t){if(!t.hasAttribute("pathLength"))return 0;const e=t.getAttribute("pathLength");return e&&"none"!==e?l(e,0):0}getVectorEffect(t){return this.getString(t,"vector-effect")}getFill(t){return this.getString(t,"fill")}getFillOpacity(t){return this.getNumber(t,"fill-opacity")}getFillRule(t){return DM(this.getKeyword(t,"fill-rule"))}getPaintOrder(t){return e=this.getString(t,"paint-order"),mM.get(e)??0;var e}getClipRule(t){return DM(this.getKeyword(t,"clip-rule"))}getStroke(t){return this.getString(t,"stroke")}getStrokeOpacity(t){return this.getNumber(t,"stroke-opacity")}getStrokeWidth(t,e){return this.getNumberOrPercentFromViewBox(t,"stroke-width",e)}getStrokeJoin(t){return e=this.getKeyword(t,"stroke-linejoin"),xM.get(e)??0;var e}getStrokeCap(t){return e=this.getKeyword(t,"stroke-linecap"),vM.get(e)??0;var e}getStrokeMiterLimit(t){return this.getNumber(t,"stroke-miterlimit")}getStrokeDashOffset(t,e){return this.getNumberOrPercentFromViewBox(t,"stroke-dashoffset",e)}getStrokeDashArray(t,e){const i=this.getString(t,"stroke-dasharray");if("none"===i)return[];const n=this.getAxisValue(e,null),s=[];for(let t of i.split(/,\s*/g)){t=t.trim();let e=l(t,0);t.endsWith("%")&&(e*=n/100),s.push(e)}return s}getViewBox(t,e){if(!t.hasAttribute("viewBox"))return e??=new wi(0,0,100,100),new wi(this.getAxisSize(t,"x",e,"x",0),this.getAxisSize(t,"y",e,"y",0),this.getAxisSize(t,"width",e,"x",e.width),this.getAxisSize(t,"height",e,"y",e.height));const i=t.viewBox.baseVal;return new wi(i.x,i.y,i.width,i.height)}getViewBoxAlign(t){switch(t.preserveAspectRatio.baseVal.align){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:return{x:1,y:1};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:return{x:1,y:2};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:return{x:1,y:3};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:return{x:2,y:1};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:return{x:2,y:2};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:return{x:2,y:3};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:return{x:3,y:1};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:return{x:3,y:2};case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMAX:return{x:3,y:3}}return null}getViewBoxSlice(t){return t.preserveAspectRatio.baseVal.meetOrSlice===SVGPreserveAspectRatio.SVG_MEETORSLICE_SLICE}getSpreadMethod(t){return e=t.getAttribute("spreadMethod"),kM.get(e)??0;var e}getStopColor(t){return this.getString(t,"stop-color")}getStopOpacity(t){return this.getNumber(t,"stop-opacity")}getStopOffset(t){return t.offset.baseVal}resolveGradientInheritance(t){let e=[];for(;t instanceof SVGGradientElement&&!e.includes(t);)e.push(t),t=this.resolveHref(t);return e}resolveGradientProperties(t,e,i,n,s){const r=this.resolveGradientInheritance(t);let o=!1;for(const t of r)if(t.hasAttribute("gradientUnits")){o=t.gradientUnits.baseVal!==SVGUnitTypes.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX;break}let a,l=0;for(const t of r)if(t.hasAttribute("spreadMethod")){l=this.getSpreadMethod(t);break}for(const t of r)if(t.hasAttribute("gradientTransform")){a=this.getSVGMatrix(t,"gradientTransform");break}a??=new $i;const c=[];for(const t of r){const e=t.querySelectorAll("stop");if(0!==e.length){for(const t of e){let e=De.parse(this.getStopColor(t));if(e.a>0){const i=this.getStopOpacity(t);1!==i&&(e=e.withAddedOpacity(i))}c.push({offset:this.getStopOffset(t),color:e})}break}}const u=o?i:n;s&&!o&&a.preMultiply((new $i).translate(n.middleX,n.middleY).scale(1,n.height/n.width).translate(-n.middleX,-n.middleY));const h={},d=r[0].localName;for(const[t,i]of Object.entries(e)){let e=null;for(const i of r)if(i.localName===d&&i.hasAttribute(t)){if(i[t]instanceof SVGAnimatedLength){e=i[t].baseVal;break}if(i[t]instanceof SVGLength){e=i[t];break}}h[t]=e?this.getSVGLength(e,u,i.axis):"function"==typeof i.fallback?i.fallback(h):this.getPercentAxisValue(i.fallback,u,i.axis)}return{inheritance:r,properties:h,fixed:o,matrix:a,stops:c,spread:l}}resolveLinearGradient(t,e,i){return this.resolveGradientProperties(t,BM,e,i,!1)}resolveRadialGradient(t,e,i){return this.resolveGradientProperties(t,UM,e,i,!0)}}let FM=class{#de;#No;#jo;#To;#zo;constructor(){this.exportIfInvisible=!1,this.rasterizeFilters=!1,this.imageQuality=1,this.#de=0,this.#jo=[],this.#To=new Map,this.#zo=new Map}dispose(){this.#zo.clear()}async exportDocument(t,e,i,n,s,r,o){i??=new Fi(e.width,e.height);const a=WM("svg");a.setAttribute("xmlns",RM),s||(a.setAttribute("width",i.width.toString()),a.setAttribute("height",i.height.toString())),a.setAttribute("viewBox",`${e.x} ${e.y} ${e.width} ${e.height}`),a.style.isolation="isolate",n&&0!==n.a&&(a.style.backgroundColor=n.rgba),this.#No=WM("defs"),a.appendChild(this.#No),r?this.#Ao(r,a):this.#Po(t,a);const l=new Blob([a.outerHTML],{type:o||"image/svg+xml"});return this.#No=null,this.#de=0,this.#jo.splice(0),this.#To.clear(),l}#Do(t){return`${t}-${this.#de++}`}#Eo(t){this.#No.appendChild(t)}#Oo(t){if(!t)return null;if(this.#To.has(t.id))return this.#To.get(t.id);const e=WM("image");e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("width",t.data.width.toString()),e.setAttribute("height",t.data.height.toString()),e.setAttribute("preserveAspectRatio","none");const i=this.#Do("img");return e.setAttribute("id",i),this.#To.set(t.id,i),this.#zo.has(t.id)||this.#zo.set(t.id,t.data.encodeToDataURI(Skia.SkEncodedImageFormat.PNG,this.imageQuality)),e.setAttribute("href",this.#zo.get(t.id)),this.#Eo(e),i}#Ro(t){return!1}#Wo(t){const e=t.pictureBounds,i=WM("image");return i.setAttribute("x",e.x.toString()),i.setAttribute("y",e.y.toString()),i.setAttribute("width",e.width.toString()),i.setAttribute("height",e.height.toString()),i.setAttribute("preserveAspectRatio","none"),this.#jo.push({type:"picture",src:t,dst:i}),i}#Ao(t,e){for(const i of t){if(!i?.isElement)continue;let t=this.#Bo(i);if(!t)continue;const n=i.parent.globalMatrix;if(!n.isIdentity){const e=WM("g");e.setAttribute("transform",n.toString()),e.appendChild(t),t=e}e.appendChild(t)}return e}#Po(t,e){for(const i of t.children()){const t=this.#Bo(i);t&&e.appendChild(t)}return e}#Bo(t){const e=t.isInvisible;if(e&&!this.exportIfInvisible)return null;let i,n=!1;const s=this.rasterizeFilters&&this.#Ro(t);if(s){if(e)return null;i=this.#Wo(t)}else if(t instanceof Rh)i=this.#Uo(t);else if(t instanceof xg)i=this.#$o(t);else switch(t.type){case"group":case"layer":case"mask":t.hasChildren&&(i=WM("g"),n=!0);break;case"clip-group":t.hasChildren&&(i=this.#Fo(t),n=!0);break;case"clip-path":i=this.#Vo(t);break;case"symbol":i=this.#Go(t);break;case"image":i=this.#Ho(t)}if(!i)return null;if(this.#Zo(t,i),!s&&(this.#Yo(t,i),n))for(const e of this.#Qo(t))i.appendChild(e);return i}*#Qo(t){if(t.supportsChildren&&t.hasChildren)for(const e of t.children())if(e.isRenderable){const t=this.#Bo(e);t&&(yield t)}}#$o(t){const e=ty(t);if(!e)return null;const i=this.#Bo(e);return e.dispose(),i}#Uo(t){if(t.isStrokeVisible){if(t.stroke.isUniform){const e=this.#Jo(t);return e?(this.#qo(t,e),this.#Ko(t,e),this.#Xo(t,e),e):null}const e=WM("path");e.setAttribute("d",t.outlinePath?.toString()),e.setAttribute("stroke","none"),e.setAttribute("fill",this.#ta(t.strokeBrush));const i=this.#ea(t.strokeBrush)*t.strokeOpacity;if(1!==i&&e.setAttribute("fill-opacity",i.toString()),!t.isFillVisible)return e;const n=this.#Jo(t);if(!n)return e;this.#Ko(t,n);const s=WM("g");return 0===t.paintOrder?(s.appendChild(n),s.appendChild(e)):(s.appendChild(e),s.appendChild(n)),s}if(t.isFillVisible){const e=this.#Jo(t);return e?(this.#Ko(t,e),e):null}return null}#Jo(t){let e;if(t instanceof Wh&&!t.shape.isDistorted)switch(t.type){case"rect":{const i=t.shape;if(i.isRounded)if(i.isSimple){e=WM("rect"),e.setAttribute("width",i.width.toString()),e.setAttribute("height",i.height.toString());const t=i.radius.value.toString();e.setAttribute("rx",t)}else{e=WM("path");const i=t.shape.convertToPath();e.setAttribute("d",i.toString()),i.delete()}else e=WM("rect"),e.setAttribute("width",i.width.toString()),e.setAttribute("height",i.height.toString())}break;case"ellipse":{const i=t.shape;i.isCircle?(e=WM("circle"),e.setAttribute("r",(i.width/2).toString())):(e=WM("ellipse"),e.setAttribute("rx",(i.width/2).toString()),e.setAttribute("ry",(i.height/2).toString()))}break;case"line":{const i=t.shape;e=WM("line"),e.setAttribute("x1",i.points[0].x.toString()),e.setAttribute("y1",i.points[0].y.toString()),e.setAttribute("x2",i.points[1].x.toString()),e.setAttribute("y2",i.points[1].y.toString())}break;case"poly":{const i=t.shape;e=i.isClosed?WM("polygon"):WM("polyline"),e.setAttribute("points",i.points.map((t=>`${t.x},${t.y}`)).join(" "))}}if(!e){const i=t instanceof Wh?t.shape.convertToPath():t.localPath.clone();if(!i||i.isEmpty)return i?.delete(),null;e=WM("path"),e.setAttribute("d",i.toString()),i.delete()}return e}#Vo(t){const e=t.path;if(!e||e.isEmpty)return null;const i=WM("path");i.setAttribute("d",e.toString()),1===t.fillRule&&i.setAttribute("clip-rule","evenodd");const n=t.localMatrix;return n.isIdentity||i.setAttribute("transform",n.toString()),i}#ia(t){if(!t.length)return null;const e=WM("clipPath");for(const i of t){const t=this.#Bo(i);t&&e.appendChild(t)}return e.hasChildNodes()?e:null}#na(t){if(!t.length)return null;const e=WM("mask");for(const i of t){const t=this.#Bo(i);t&&t.hasChildNodes()&&e.appendChild(t)}return e.hasChildNodes()?(e.setAttribute("maskUnits","userSpaceOnUse"),e):null}#Fo(t){const e=[],i=[],n=[];for(const s of t.children())s instanceof tg?e.push(s):s instanceof sg?i.push(s):n.push(s);if(!n.length||!e.length&&!i.length)return null;let s;if(1===n.length)s=this.#Bo(n[0]);else{s=WM("g");for(const t of n){const e=this.#Bo(t);e&&s.appendChild(e)}s.hasChildNodes()||(s=null)}if(!s)return null;const r=this.#ia(e),o=this.#na(i);return r&&(r.setAttribute("id",this.#Do("cp")),this.#Eo(r),s.setAttribute("clip-path",`url(#${r.id})`)),o&&(t.isAlphaMask&&(o.style.maskType="alpha"),o.setAttribute("id",this.#Do("mk")),this.#Eo(o),s.setAttribute("mask",`url(#${o.id})`)),s}#Go(t){return null}#Ho(t){const e=this.#Oo(t.imageResource);if(!e)return null;const{width:i,height:n}=t,s=WM("use");s.setAttribute("href",`#${e}`),s.setAttribute("width",i.toString()),s.setAttribute("height",n.toString());const r=new $i;if(r.scale(i/t.imageResource.width,n/t.imageResource.height),r.isIdentity)return s;s.setAttribute("transform",r.toString());const o=WM("g");return o.appendChild(s),o}#Yo(t,e){if(!t.supportsFilters||!t.filters||t.filters.isInvisible)return;const i=[];for(const e of t.filters.children())if(!e.isInvisible)if(e instanceof Xg){const t=WM("feGaussianBlur");t.setAttribute("stdDeviation",`${e.radius}`),t.setAttribute("color-interpolation-filters","sRGB"),i.push(t)}else if(e instanceof em){const t=WM("feDropShadow");t.setAttribute("dx",e.offset.x.toString()),t.setAttribute("dy",e.offset.y.toString()),t.setAttribute("flood-color",e.color.rgba),t.setAttribute("stdDeviation",`${e.blur}`),t.setAttribute("color-interpolation-filters","sRGB"),i.push(t)}else if(e instanceof tm){const t=new Zr;t.brightness(e.brightness).contrast(e.contrast).saturate(e.saturate).hueRotate(e.hueRotate).invert(e.invert).grayscale(e.grayscale).sepia(e.sepia);const n=WM("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values",t.value.join(" ")),i.push(n)}if(0===i.length)return;const n=WM("filter");n.id=this.#Do("fx");for(const t of i)n.appendChild(t);this.#Eo(n),e.setAttribute("filter",`url(#${n.id})`)}#Zo(t,e){const i=t.localMatrix;i&&!i.isIdentity&&e.setAttribute("transform",i.toString()),t.providesPicture&&(1!==t.opacity&&e.setAttribute("opacity",t.opacity.toString()),11!==t.blend&&(e.style.mixBlendMode=TM(t.blend)),t.isolate&&t.supportsChildren&&(e.style.isolation="isolate")),t.hidden&&e.setAttribute("visibility","hidden"),null!=t.title&&""!==t.title&&e.setAttribute("title",t.title)}#Xo(t,e){2===t.paintOrder&&e.setAttribute("paint-order","stroke")}#ta(t){switch(t.type){case 1:return this.#sa(t.color);case 2:return this.#ra(t);case 3:return this.#oa(t);case 4:return this.#aa(t)}return"none"}#ra(t){const e=WM("linearGradient");return e.setAttribute("x1",t.start.x.toString()),e.setAttribute("y1",t.start.y.toString()),e.setAttribute("x2",t.end.x.toString()),e.setAttribute("y2",t.end.y.toString()),this.#la(t,e,"lg")}#oa(t){const e=WM("radialGradient");return e.setAttribute("cx",t.center.x.toString()),e.setAttribute("cy",t.center.y.toString()),e.setAttribute("r",t.radius.toString()),this.#la(t,e,"rg")}#aa(t){const e=WM("radialGradient");return e.setAttribute("cx",t.end.x.toString()),e.setAttribute("cy",t.end.y.toString()),e.setAttribute("r",t.endRadius.toString()),e.setAttribute("fx",t.start.x.toString()),e.setAttribute("fy",t.start.y.toString()),e.setAttribute("fr",t.startRadius.toString()),this.#la(t,e,"tg")}#la(t,e,i){e.setAttribute("id",this.#Do(i)),e.setAttribute("gradientUnits","userSpaceOnUse");const n=t.matrix;n&&!n.isIdentity&&e.setAttribute("gradientTransform",n.toString()),e.setAttribute("spreadMethod",AM(t.spread));for(const i of t.stopColors){const t=WM("stop");t.setAttribute("offset",i.offset.toString()),t.setAttribute("stop-color",this.#sa(i.color)),1!==i.color.a&&t.setAttribute("stop-opacity",i.color.a.toString()),e.appendChild(t)}return this.#Eo(e),`url(#${e.id})`}#ea(t){return t instanceof Hi?t.color.a:1}#sa(t){return`#${this.#ca(t.r)}${this.#ca(t.g)}${this.#ca(t.b)}`}#ca(t){const e=Math.round(t).toString(16);return e.length<2?"0"+e:e}#Ko(t,e){1===t.fillRule&&e.setAttribute("fill-rule","evenodd");const i=this.#ea(t.fill)*t.fillOpacity;if(0===i)return void e.setAttribute("fill","none");const n=this.#ta(t.fill);e.setAttribute("fill",n),"none"!==n&&1!==i&&e.setAttribute("fill-opacity",i.toString())}#qo(t,e){const i=this.#ea(t.strokeBrush)*t.strokeOpacity;if(0===i)return void e.setAttribute("stroke","none");const n=t.stroke,s=this.#ta(n.brush);if(e.setAttribute("stroke",s),"none"!==s&&(1!==i&&e.setAttribute("stroke-opacity",i.toString()),e.setAttribute("stroke-width",n.width.toString()),e.setAttribute("stroke-linecap",NM(n.lineCap)),e.setAttribute("stroke-linejoin",jM(n.lineJoin)),0===n.lineJoin&&e.setAttribute("stroke-miterlimit",n.miterLimit.toString()),n.dashes.length>0)){const t=n.dashPathLength;t>0&&e.setAttribute("pathLength",t.toString()),e.setAttribute("stroke-dasharray",n.dashes.join(" ")),0!==n.offset&&e.setAttribute("stroke-dashoffset",n.offset.toString())}}};class VM{constructor(){this.background=De.transparent,this.#ua=null,this.#ha=null,this.#Gt=null}#ua;#ha;#Gt;get canvas(){return this.#ua}get bitmap(){return this.#ua.transferToImageBitmap()}createSurface(t){this.deleteCurrentSurface(),this.#ua=new OffscreenCanvas(t.width,t.height),this.#ha=Skia.GL.getCurrentContext(),this.#Gt=Skia.SkSurface.MakeWebGLCanvasSurface(this.#ua,t.width,t.height)}deleteCurrentSurface(){this.#Gt?.delete(),this.#Gt=null,null!==this.#ha&&(Skia.GL.makeContextCurrent(this.#ha),this.#ha=null),this.#ua=null}async*renderRegions(t,e,i=1,n){const s=t.picture?.clone();if(s){for(const t of e){const e=new Fi(t.width*i,t.height*i);this.createSurface(e);const r=await this.renderPicture(s,t,e,n);this.deleteCurrentSurface(),yield[t,r]}s.delete()}}async renderDocumentRegion(t,e,i,n){const s=t.picture?.clone();if(!s)return null;this.createSurface(i||e);const r=await this.renderPicture(s,e,i,n);return this.deleteCurrentSurface(),s?.delete(),r}async renderPicture(t,e,i,n){return t?(this.drawPicture(t,e,i),this.#ua.convertToBlob(n)):null}drawPicture(t,e,i){this.#Gt||this.createSurface(i||e);const n=this.#Gt;!function(t,e,i,n,s){if(t.clear(s??De.transparent),!e)return;i??=wi.fromLTRBObject(e.getBounds()),n??=i;const r=Math.min(n.width/i.width,n.height/i.height),o=-i.x*r+(n.width-r*i.width)/2,a=-i.y*r+(n.height-r*i.height)/2;t.saveLayer(),t.translate(o,a),t.scale(r,r),t.clipRect(i,Skia.SkClipOp.Intersect,!0),t.drawPicture(e),t.restore()}(n.getCanvas(),t,e,i,this.background),n.flush()}async renderElement(t,e,i,n){let s,r=t.pictureAndFiltersBounds;if(i&&(r=r.transform(t.globalMatrix)),e??=new Fi(r.width,r.height),i){const e=new Skia.SkPictureRecorder,i=new qr(e.beginRecording(r));i.saveLayer(Oe.NormalIsolatedComposition),t.parent&&i.multiplyMatrix(t.parent.globalMatrix),t.draw(i),i.restore(),s=e.finishRecordingAsPicture(r),e.delete(),i.dispose()}else s=t.picture.clone();this.createSurface(e);const o=await this.renderPicture(s,r,e,n);return this.deleteCurrentSurface(),s.delete(),o}dispose(){this.deleteCurrentSurface()}}class GM{#da=0;#fa=null;#pa=null;#qi;constructor(t){this.#qi=t||De.gray}get color(){return this.#qi}set color(t){t.equals(this.#qi)||(this.#qi=t,this.#ga())}toJSON(){return{color:this.#qi}}*snapToSize(t,e,i){let{width:n,height:s}=this.calcSize();e&&(n/=e.x,s/=e.y);const r=Math.floor(t.x/n)*n,o=Math.floor(t.y/s)*s,a=r+n/2,l=o+s/2;if(i){if(t.x===a&&t.y===l)return void(yield t);yield new Be(a,l)}t.x<=a?t.y<=l?yield new Be(r,o):yield new Be(r,o+s):t.y<=l?yield new Be(r+n,o):yield new Be(r+n,o+s)}cloneProperties(t){t.#qi=this.#qi,t.#da=this.#da,t.#fa=this.#fa,this.#pa&&(t.#pa=this.#pa.clone())}getTransformMatrix(t){return null}dispose(){this.#ga()}invalidate(){this.#ga()}#ma(t){if(this.#pa)return this.#pa;const e=pc().paint;e.reset(),e.isAntiAlias=!0,e.style=Skia.SkPaintStyle.Stroke,e.color=this.#qi.code,e.strokeWidth=this.#da;const i=new Skia.SkPictureRecorder,n=i.beginRecording(t);this.drawGridCell(t,n,e);const s=i.finishRecordingAsPicture(t);return i.delete(),this.#pa=s.makeShader(Skia.SkTileMode.Repeat,Skia.SkTileMode.Repeat,this.getTransformMatrix(t),t),s.delete(),e.reset(),this.#pa}#ga(){this.#pa?.delete(),this.#pa=null}shouldDrawGrid(t){return Math.sqrt(t.width*t.height)*vl>=4}calcLineWidth(t){return pc().getLineScale(bl)}render(){const{canvas:t,paint:e}=pc(),i=this.calcSize();this.#fa&&i.equals(this.#fa)||(this.#fa=i,this.#ga());const n=this.calcLineWidth(i);if(this.#da!==n&&(this.#da=n,this.#ga()),!this.shouldDrawGrid(i))return;const s=this.#ma(i);e.isAntiAlias=!0,e.style=Skia.SkPaintStyle.Fill,e.shader=s;const r=xl(),o=wl();t.drawRect(r.x,r.y,o.x,o.y,e),e.reset()}}class HM extends GM{#ya={x:1,y:1};constructor(t,e){super(e),t&&(this.#ya.x=t.x,this.#ya.y=t.y)}cloneProperties(t){super.cloneProperties(t),t.#ya.x=this.#ya.x,t.#ya.y=this.#ya.y}get divisions(){return this.#ya}set divisions(t){this.setDivisions(t.x,t.y)}get divX(){return this.divisions.x}set divX(t){this.setDivisions(t,null)}get divY(){return this.divisions.y}set divY(t){this.setDivisions(null,t)}setDivisions(t,e){const i=this.#ya;return t??=i.x,e??=i.y,(i.x!==t||i.y!==e)&&(i.x=t,i.y=e,this.invalidate(),!0)}drawGridCell(t,e,i){e.drawRect(0,0,t.width,t.height,i);const n=this.#ya;i.strokeWidth/=2;const s=i.strokeWidth/2,r=t.width/n.x;for(let o=1;o<n.x;o++)e.drawVLine(o*r-s,0,t.height,i);const o=t.height/n.y;for(let r=1;r<n.y;r++)e.drawHLine(0,r*o-s,t.width,i)}snap(t){return this.snapToSize(t,this.divisions,!1)}toJSON(){const t=super.toJSON();return t.divisions=this.#ya,t}}class ZM extends HM{#va=null;constructor(t,e,i){super(e,i),this.#va=t}get size(){return this.#va}set size(t){this.#va.equals(t)||(this.#va=t,this.invalidate())}get width(){return this.#va.width}set width(t){this.setSize(t,null)}get height(){return this.#va.height}set height(t){this.setSize(null,t)}setSize(t,e){return t??=this.#va.width,e??=this.#va.height,(this.#va.width!==t||this.#va.height!==e)&&(this.#va=new Fi(t,e),this.invalidate(),!0)}shouldDrawGrid(t){return!(this.#va.width<this.divisions.x||this.#va.height<this.divisions.y)&&super.shouldDrawGrid(t)}clone(){const t=new ZM(this.#va);return this.cloneProperties(t),t}calcSize(){return this.#va}toJSON(){const t=super.toJSON();return t.size=this.#va,t}static fromJSON(t){return new ZM(t.size,t.divisions,t.color)}}class YM extends HM{#va=null;constructor(t,e){super(t||{x:10,y:10},e)}shouldDrawGrid(t){return!0}cloneProperties(t){super.cloneProperties(t),t.#va=this.#va}clone(){const t=new YM;return this.cloneProperties(t),t}calcSize(){const t=Sl();return this.#va&&this.#va.width===t?this.#va:this.#va=new Fi(t,t)}static fromJSON(t){return Array.isArray(t)&&3===t.length?new YM({x:t[1],y:t[2]}):new YM(t?.divisions,t?.color)}}const QM={x:2,y:2};class JM extends GM{#j;#ba=!1;#X=null;#va=null;#ot;constructor(t,e,i,n){super(n),this.#j=t,this.#ot=e??30,this.#ba=!!i}get width(){return this.#j}set width(t){this.#j!==t&&(this.#j=t,this.invalidate())}get height(){return this.#X??=this.#j*Math.tan(this.#ot*fe)}set height(t){this.angle=Math.abs(Math.atan(t/this.#j))*pe}get angle(){return this.#ot}set angle(t){t=n(t,0,90),this.#ot!==t&&(this.#ot=t,this.invalidate())}get xangle(){return 180-2*this.#ot}set xangle(t){this.angle=(180-t)/2}get complex(){return this.#ba}set complex(t){this.#ba!==t&&(this.#ba=t,super.invalidate())}invalidate(){super.invalidate(),this.#X=null,this.#va=null}cloneProperties(t){super.cloneProperties(t),t.#va=this.#va,t.#X=this.#X}clone(){const t=new JM(this.#j,this.#ot,this.#ba);return this.cloneProperties(t),t}calcSize(){return this.#va??=new Fi(this.width,this.height)}drawGridCell(t,e,i){const n=t.width/2,s=t.height/2;this.#ba&&(e.drawRect(0,0,t.width,t.height,i),e.drawLine(n,0,n,t.height,i),e.drawLine(0,s,t.width,s,i)),e.drawLine(0,0,t.width,t.height,i),e.drawLine(0,t.height,t.width,0,i)}snap(t){return this.#ba?this.snapToSize(t,QM,!1):this.snapToSize(t,null,!0)}toJSON(){const t=super.toJSON();return t.size=this.#j,t.angle=this.#ot,t.complex=this.#ba,t}static fromJSON(t){return new JM(t.size,t.angle||null,!!t.complex,t.color)}}const qM=new Fi(1,1);class KM extends GM{clone(){return new KM(this.color)}calcSize(){return qM}drawGridCell(t,e,i){e.drawRect(0,0,1,1,i)}*snap(t){yield t.rounded()}shouldDrawGrid(t){return vl>=2}}const XM={x:new Map,y:new Map},tS=[],eS=new Set,iS=new Set;function nS(t,e,i,n=!1){if(!t.has(e))return void t.set(e,[i,i,n]);const s=t.get(e);i<s[0]?s[0]=i:i>s[1]&&(s[1]=i),n&&(s[2]=!0)}function sS(t,e,i,n){return e===t[i]&&(nS(XM[i],e,t[n],!0),eS.add(t),!0)}function rS(t,e,i,n){let s=!1;for(const r of t.sidePoints(!0))sS(r,e,i,n)&&(s=!0);return!!s&&(iS.add(t),!0)}const oS=new Map([[Be,sS],[wi,rS],[ki,rS]]),aS={x:new Set,y:new Set};function lS(t,e,i,n){if(!aS[e].has(t)&&(aS[e].add(t),n[e].has(t)))for(const s of n[e].get(t))oS.get(s?.constructor)?.(s,t,e,i)}function cS(t,e,i){nS(XM.x,t,e),lS(t,"x","y",i)}function uS(t,e,i){nS(XM.y,e,t),lS(e,"y","x",i)}function hS(t,e,i){nS(XM.x,t,e),nS(XM.y,e,t),lS(t,"x","y",i),lS(e,"y","x",i)}let dS=!1;function fS(t,e){t.equals(e)||(tS.push([e,t]),eS.add(e),dS=!0)}function pS(){dS=!1,tS.splice(0),eS.clear(),iS.clear()}const gS=new hn,mS=new hn;let yS,vS,bS,xS,wS=function*(t){yield t.rounded()},MS=!1;const SS={x:new Map,y:new Map},kS=new Set,_S=new Set,IS={x:new Set,y:new Set};let CS=null;function LS(t){return MS?(t&&function(t){if(xS&&t)for(const e of t)xS.add(e)}(t),!0):!!tk().enabled&&(xS=new WeakSet(t),AS(),MS=!0)}function NS(){MS&&(MS=!1,xS=null,_S.clear(),jS())}function jS(){pS(),kS.clear(),IS.x.clear(),IS.y.clear(),SS.x.clear(),SS.y.clear()}function TS(){tk().enabled?MS&&AS():NS()}function zS(t,e){e?.isIdentity&&(e=null);for(let i of t)i=e?e.point(i.x,i.y):i,_S.add(i),MS&&ES(i)}function AS(){jS();for(const t of yS)t();_S.size&&OS(_S)}function PS(t,e,i){t.has(e)||t.set(e,new Set),t.get(e).add(i)}function DS(t,e){IS.x.add(t),e&&PS(SS.x,t,e)}function ES(t,e){kS.add(t),PS(SS.x,t.x,t),PS(SS.y,t.y,t),e&&(PS(SS.x,t.x,e),PS(SS.y,t.y,e))}function OS(t,e){if(e&&!e.isIdentity)for(const i of t)ES(e.point(i.x,i.y));else for(const e of t)ES(e)}function RS(t,e){if(t.width||t.height){e&&!e.isIdentity&&(t=t instanceof wi?ki.fromRectangle(t,e):t.transform(e),e=null);for(const e of t.sidePoints(!0))ES(e,t)}}function*WS(t,e,i,n){const s=IS[e];if(s.has(t))return void(yield t);let r=null,o=1/0;for(const e of s){if(e<i||e>n)continue;const s=Math.abs(t-e);s<o&&(o=s,r=e)}for(const s of CS?YS(kS):kS){const a=s[e];if(a<i||a>n)continue;const l=Math.abs(t-a);l<o&&(o=l,r=a)}null!=r&&(yield r)}function BS(t,e,i,n){let s=1/0,r=!1;const o=new Set;return a=>{if(r)return!0;if(o.has(a))return!1;o.add(a);const l=a+i,c=function(t,e,i,n){if(CS)if("x"===e){if(n<CS.left||i>CS.right)return null;i=Math.max(i,CS.left),n=Math.min(n,CS.right)}else{if(n<CS.top||i>CS.bottom)return null;i=Math.max(i,CS.top),n=Math.min(n,CS.bottom)}let s,r=1/0,o=null;for(const a of function*(t,e,i,n){for(const s of vS)yield*s(t,e,i,n)}(t,e,i,n))if(!(a>n||a<i)){if(a===t)return a;s=Math.abs(t-a),s<r&&(r=s,o=a)}return o}(l,e,l-n,l+n);if(null==c)return!1;if(c===l)return t[e]=i,r=!0;const u=Math.abs(c-l);return u<s&&(s=u,t[e]=c-a),!1}}function US(){return 10/vl}const $S=[null];function FS(t,e){return MS?($S[0]=t,t.add(JS($S,Be.ZERO,e))):t}function VS(t,e,i){return MS?JS(t.sidePoints(!0),e,i):function(t,e){return e?"x"===e?t.y?new Be(0,t.y):Be.ZERO:t.x?new Be(t.x,0):Be.ZERO:t}(e,i)}function GS(t,e,i=15){let n=e.getAngleTo(t);if(n%i!=0&&(n=Math.round(n/i)*i),e=Be.fromAngle(n,t.distanceTo(e),t),n%180==0){const t=FS(e,"y");return e.shifted(t.x-e.x,0)}if(n%90==0){const t=FS(e,"x");return e.shifted(0,t.y-e.y)}return pS(),e}function HS(t,e){if(t.distanceTo(e)<US())return pS(),e;const i=ZS(e.getAngleTo(t),!0),n=FS(t="x"===i?new Be(e.x,t.y):new Be(t.x,e.y),i);return fS(n,e),n}function ZS(t,e){return(t=(t+180+(e?90:0))%360)>45&&t<135||t>225&&t<315?"y":"x"}function*YS(t){for(const e of t)CS.contains(e.x,e.y)&&(yield e)}function QS(t,e,i,n){let s=1/0;if(n){let r=null;const o={x:i.x,y:i.y};o[n]=0;const a="x"===n?"y":"x";for(const i of e)for(const e of t(i.add(o))){const t=e[a]-i[a];if(!t)return Be.ZERO;const n=Math.abs(t);n<s&&(s=n,r=t)}return null!=r&&(o[a]=r),new Be(o.x,o.y)}let r=i;for(const n of e)for(const e of t(n.add(i))){if(n.equals(e))return Be.ZERO;const t=Be.distance(e,n);t<s&&(s=t,r=e.sub(n))}return r}function JS(t,e,i){pS();const n=tk();CS=n.view?Ml():null;const s=new Set(n.view?YS(t):t);if(!s.size)return e;let r;if(r=n.pixel&&wS?QS(wS,s,e,i):bS?.enabled?QS(bS.snap,s,e,i):function(t,e,i){const n=US(),s={x:null,y:null};if(i){let r;"x"===i?(r="y",s.x=0):(r="x",s.y=0);const o=BS(s,r,e[r],n);for(const e of t)if(o(e[r]))break}else{const i=BS(s,"x",e.x,n),r=BS(s,"y",e.y,n);let o=!1,a=!1;for(const e of t)if(o=o||i(e.x),a=a||r(e.y),o&&a)break}return s}(s,e,i),!r||null==r.x&&null==r.y)return e;const o=new Be(r.x??e.x,r.y??e.y);return function(t,e,i,n){let s;s="x"===i?uS:"y"===i?cS:hS;for(const i of t)s(i.x+e.x,i.y+e.y,n);aS.x.clear(),aS.y.clear(),function(){tS.splice(0);let t=0;for(const[e,i]of XM.x)i[2]&&i[0]!==i[1]&&(tS[t++]=[{x:e,y:i[0]},{x:e,y:i[1]}]);XM.x.clear();for(const[e,i]of XM.y)i[2]&&i[0]!==i[1]&&(tS[t++]=[{x:i[0],y:e},{x:i[1],y:e}]);XM.y.clear()}(),dS=(tS.length||eS.size||iS.size)>0}(s,o,null==r.x?"x":null==r.y?"y":null,SS),o}const qS=Symbol(),KS=Symbol(),XS="snapping";function tk(t){return Aa(XS,t)}let ek;function ik(){ek||(ek=!0,Pa(XS,(t=>({enabled:t?.snapping?.enabled??!0,view:t?.snapping?.view??!0,pixel:!1}))),function(t,e=0){No(KS,{priority:e,handler:WS})}(0,0),Io(Ot,(()=>{yS=jo(qS).map(nk),vS=jo(KS).map(nk)})))}function nk(t){return t.handler}function sk(t,e=0){No(qS,{priority:e,handler:t})}const rk="grid";let ok,ak;function lk(t){return ma(rk,t)}function ck(){return ok||lk(new YM),ok}function uk(t){return Aa(rk,t)}function hk(){return uk().enabled}let dk=class t{constructor(t,e,i=!1){this.position=t,this.isHorizontal=e,this.isHidden=i}toJSON(){return[this.position,this.isHorizontal,this.isHidden]}clone(){return new t(this.position,this.isHorizontal,this.isHidden)}},fk=class t{#xa;#wa=new hn;constructor(t=[]){this.#xa=t||[]}get isEmpty(){return 0===this.#xa.length}exists(t,e,i){const n=this.#xa;if(0===n.length)return!1;for(const s of n)if(s!==i&&s.isHorizontal===e&&s.position===t)return!0;return!1}toJSON(){return[this.#xa]}dispose(){this.#xa=null}add(t){this.#xa.push(t)}has(t){return this.#xa.indexOf(t)>=0}remove(t){const e=this.#xa.indexOf(t);return e>=0&&(this.#xa.splice(e,1),!0)}render(){const t=pc(),e=this.#wa;e.width=bl/t.matrix.lineScale,e.brush=e.brush.withColor(yl.getColor("guide"));const i=xl(),n=wl();for(const s of this.#xa)s.isHidden||(s.isHorizontal?t.drawLine({x:i.x,y:s.position},{x:n.x,y:s.position},e):t.drawLine({x:s.position,y:i.y},{x:s.position,y:n.y},e))}getGuideAtPoint(t,e=1e-6){for(const i of this.#xa){if(i.isHidden)continue;const n=i.isHorizontal?t.x:t.y;if(Math.abs(i.position-n)<=e)return i}return null}clone(){return new t(this.#xa.map((t=>t.clone())))}*horizontal(){for(const t of this.#xa)t.isHorizontal&&(yield t)}*vertical(){for(const t of this.#xa)t.isHorizontal||(yield t)}*[Symbol.iterator](){yield*this.#xa}};const pk="guides";let gk,mk;function yk(){return gk||(t=new fk,ma(pk,t)),gk;var t}function vk(t){return Aa(pk,t)}class bk{constructor(t,e="",i){this.bounds=t,this.title=e,this.id=i??Ct()}setSize(t,e){return(this.bounds.width!==t||this.bounds.height!==e)&&(this.bounds=new wi(this.bounds.x,this.bounds.y,t,e),!0)}setBounds(t){return!this.bounds.equals(t)&&(this.bounds=t,!0)}intersectionArea(t){return this.intersectionRect(t)?.area||0}intersectionRect(t){return this.bounds.intersection(t)}clone(){return new bk(this.bounds,this.title,this.id)}toJSON(){return[this.bounds,this.title,this.id]}}class xk{#t=null;#Ma=!0;#e=null;constructor(...t){this.list=t}get isSingle(){return 1===this.list.length}get first(){return this.list[0]}find(t){return this.list.find((e=>e.id===t))||null}add(t){if(t instanceof wi)t=new bk(t);else if(this.list.includes(t))return!1;return this.list.push(t),this.invalidate(),!0}remove(t){const e=this.list.indexOf(t);return-1!==e&&1!==this.list.length&&(this.list.splice(e,1),this.invalidate(),!0)}clone(){const t=new xk(...this.list.map((t=>t.clone())));return!this.#Ma&&this.#t&&(t.#Ma=!1,t.#t=this.#t.copy()),t}invalidate(){this.#Ma=!0,this.#e=null}toJSON(){return this.list}get path(){if(0===this.list.length)return null;if(null==this.#t){const t=new Skia.SkPath;t.fillType=Skia.SkPathFillType.Winding,t.isVolatile=!0,this.#t=t}if(this.#Ma){this.#t.rewind();for(const t of this.list)this.#t.addRect(t.bounds);this.#Ma=!1}return this.#t}get bounds(){return this.#e?this.#e:0===this.list.length?this.#e=wi.ZERO:1===this.list.length?this.#e=this.list[0].bounds:this.#e=wi.fromLTRBObject(this.path.computeTightBounds())}setItemSize(t,e,i){return!!t.setSize(e,i)&&(this.invalidate(),!0)}setItemBounds(t,e){return!!t.setBounds(e)&&(this.invalidate(),!0)}transformItems(t,e){if(!t||t.isIdentity)return!1;if(e??=this.list,0===e.length)return!1;for(const i of e)i.bounds=i.bounds.transform(t);return this.invalidate(),!0}moveItems(t,e){if(t.isZero)return!1;if(e??=this.list,0===e.length)return!1;for(const i of e)i.bounds=i.bounds.shifted(t.x,t.y);return this.invalidate(),!0}*regions(){for(const t of this.list)yield t.bounds}dispose(){this.list?.splice(0),this.list=null,this.#t?.delete(),this.#t=null,this.#e=null}*[Symbol.iterator](){yield*this.list}}const wk="board";let Mk,Sk,kk,_k=!1;function Ik(t){return Aa(wk,t)}function Ck(){return Sk.bounds}Pa(wk,(()=>({snap:!0})));const Lk=Na((async()=>!lh()&&(Jo(),rv("web expressive/elements")))),Nk=Na((async()=>sv("web expressive/elements"))),jk=Na((async(t,e,i)=>(Jo(),Sv(async function(t){const e=await async function(){if(!await Pt())return null;try{return await navigator.clipboard.read()}catch(t){return null}}();if(!e)return Dt.showToast("Access to clipboard is denied","error"),!1;for(const i of e)for(const e of i.types){if(Xy.has(e))return Xy.get(e)(await av(i,e),t,e);if(iv?.has(e))return iv.read(await av(i,e),t,e)}return!1}({isShift:e,isAlt:t,position:i}),"Pasting...",500)))),Tk=Na((async t=>Sv(async function(t){const e=t.dataTransfer.files;if(0===e.length)return null;const i={position:jl(t.clientX,t.clientY),zoom:t.altKey};Jo();for(const t of e)if(await fM(t,null,i))return!0;return!1}(t),"Importing...",500))),zk=Na((async()=>{Sv(async function(){uc();const t=new VM;let e;try{let i=rh();if(i){if(!i.isLayer&&!i.isElement)return!1;e=await t.renderElement(i,null,!0)}else e=await t.renderDocumentRegion(su,Ck())}catch(t){return!1}finally{t.dispose(),cc()}return async function(t){if("image/png"!==t.type){if(!t.type.startsWith("image/"))return console.warn(`Invalid image type ${t.type}`),!1;if("image/png"!==(t=await async function(t){return["image/gif","image/apng","image/avif"].includes(t.type)?async function(t){if(!await ImageDecoder.isTypeSupported(t.type))return null;const e=new ImageDecoder({type:t.type,data:t.stream()}),i=(await e.decode({frameIndex:0,completeFramesOnly:!0})).image;e.close();const n=new OffscreenCanvas(i.displayWidth,i.displayHeight);return n.getContext("2d").drawImage(i,0,0),n.convertToBlob({type:"image/png"})}(t):t}(t)).type)return console.warn(`Cannot convert ${t.type} to image/png`),!1}return async function(t){return At(new ClipboardItem({[t.type]:t},null))}(t)}(e)}(),"Generating image...",500)})),Ak=Na((async()=>{const t=ey(rh(),!0);if(!t)return;const e=[t.toString()];t.delete(),await At(new ClipboardItem({"web expressive/path":new Blob(e,{type:"expressive/path"}),"text/plain":new Blob(e,{type:"text/plain"})}))})),Pk=Na((async()=>{const t=[...jh()];let e;const i=new FM;try{t.length?(yu(t,!1,!0),e=await i.exportDocument(su,Eh(),null,null,!0,t,"text/plain")):e=await i.exportDocument(su,Ck(),null,null,!0,null,"text/plain")}finally{i.dispose()}e&&await At(new ClipboardItem({[e.type]:e}))}));function Dk(){!function(){let t;if(Au())t=Lu()?[...ju()]:[...Tu().children()];else{t=[];for(const e of su.children())t.push(...e.children())}fh(t)}()}function Ek(){xh()}function Ok(){Il(Ck())}function Rk(){kl()}function Wk(){_l()}const Bk=Na((()=>qm(sh(),(t=>t.bringForward()),!0))),Uk=Na((()=>qm(sh(),(t=>t.bringToFront()),!0))),$k=Na((()=>qm(sh(),(t=>t.sendBackward()),!1))),Fk=Na((()=>qm(sh(),(t=>t.sendToBack()),!1))),Vk=Na((function(t){if(lh())return Oy.swapStrokeFill(t),!1;let e=!1;return Qk(Th(Wm),(i=>{const n=i.strokeBrush?.clone(),s=i.fill?.clone();if(Jk(i,qd,s)&&(e=!0),Jk(i,Yd,n)&&(e=!0),t)return;const{fillOpacity:r,strokeOpacity:o}=i;r!==o&&(Jk(i,Jd,r)&&(e=!0),Jk(i,Zd,o)&&(e=!0))})),e})),Gk=Na((function(t){if(lh())return Oy.copyFillToStroke(t),!1;let e=!1;return Qk(Th(Wm),(i=>{Jk(i,qd,i.fill)&&(e=!0),!t&&Jk(i,Jd,i.fillOpacity)&&(e=!0)})),e})),Hk=Na((function(t){if(lh())return Oy.copyStrokeToFill(t),!1;let e=!1;return Qk(Th(Wm),(i=>{Jk(i,Yd,i.strokeBrush)&&(e=!0),!t&&Jk(i,Zd,i.strokeOpacity)&&(e=!0)})),e})),Zk=Na((function(t){return lh()?(Oy.changeStrokeBrushType(t)&&kd(qd.groups),!1):Ld(Th(Wm),qd,(e=>ln(e.strokeBrush,t,e.localBounds)))})),Yk=Na((function(t){return lh()?(Oy.changeFillBrushType(t)&&kd(Yd.groups),!1):Ld(Th(Wm),Yd,(e=>ln(e.fill,t,e.localBounds)))}));function Qk(t,e){for(const i of t)Wm(i)&&e(i)}function Jk(t,e,i,n=!0){return void 0!==i&&(n?Cd(t,e,i):Id(t,e,i))}const qk=Na((function(){if(lh())return!1;const t=[...Th(Wm)];if(!t.length)return!1;const e=[],i=rh();Jo(),xh();let n=null;for(const s of t){if(s instanceof Zp){dh(s,!0);continue}const t=a_(s);t&&(e.push(s),dh(t,!0),t===i&&(n=t))}return e.length>0&&Vm(e),n?(wh(n),!0):!lh()})),Kk=Na((function(t,e,i){if(ah()<2)return!1;Jo();const n=function(t,e,i,n){if(t.length<2)return null;t=yu(t,n,!1);let s,r=null;if(null!=i&&Wm(i)){const n=t.indexOf(i);if(-1===n)s=ey(i);else if(0===n){if(3===e)return null;s=ey(i),t.shift()}else if(n===t.length-1){if(4===e)return null;s=ey(i),t.pop()}else{let o;if(r=t.splice(n+1),t.splice(n,1),4===e){o=o_(t,Skia.SkPathOp.Union,l_(i));const e=r;r=t,t=e}else o=o_(r,Skia.SkPathOp.Union,l_(i));if(s=ey(i),s&&(o.add(s,Skia.SkPathOp.Union),s.delete()),s=o.resolve(),o.delete(),null==s)return null}}else s=ey(i=4===e?n?t.pop():t.shift():3===e&&n?t.shift():t.pop());if(!s)return null;const o=l_(i);let a;switch(e){case 1:a=o_(t,Skia.SkPathOp.Union,o),a.add(s,Skia.SkPathOp.Intersect);break;case 2:a=o_(t,Skia.SkPathOp.Xor,o),a.add(s,Skia.SkPathOp.Xor);break;case 3:case 4:a=o_(t,Skia.SkPathOp.Union,o),a.add(s,Skia.SkPathOp.ReverseDifference);break;default:a=o_(t,Skia.SkPathOp.Union,o,!1),a.add(s,Skia.SkPathOp.Union)}s.delete();const l=a.resolve();if(a.delete(),null==l)return null;l.simplify();const c=a_(i,zs.fromSkPath(l,!0));return c&&(function(t){const e=t.localMatrix;if(e.isIdentity)return!1;t.nodes=ls(t.nodes,e),t.position=Be.ZERO,t.rotate=0,t.autoOrientAngle=0,t.skewAngle=0,t.skewAxis=0,t.scale=Be.UNIT,t.anchor=Be.ZERO,t.position=t.anchor=t.localBounds.middle}(c),t.includes(i)||t.push(i),Vm(t),r&&Vm(r)),c}([...Th(Wm)],t,e?rh():null,i);return!!n&&(dh(n,!1),_o(ce,n),!0)})),Xk=Na((function(t,e,i){let n,s=[...Th(Wm)];if(s.length<1)return!1;Jo();let r=t?rh():null;if(i??=.1,null!=r&&1===s.length&&s[0]===r){if(n=ey(r),!n||n.isEmpty)return n?.delete(),null;const t=n.copy(),e=n.cut(t,i);if(t.delete(),!e)return n.delete(),null;n.simplify()}else{if(s=yu(s,e,!0),null!=r&&Wm(r)){const t=s.indexOf(r);-1!==t&&(s.splice(t,1),s.push(r))}else r=s[s.length-1];const t=s.map((t=>{const e=ey(t,!0);return!e||e.isEmpty?(e?.delete(),null):e})).filter((t=>null!=t)),o=Skia.SkPath.MakePieces(t,i,!0);if(t.map((t=>t.delete())),t.splice(0),null==o||0===o.length)return!1;n=new Skia.SkPath,n.isVolatile=!0;for(const t of o)t.simplify(),n.addPath(t),t.delete();const a=l_(r);null!=a&&n.transform(a)}if(n.isEmpty)return n.delete(),null;const o=a_(r,zs.fromSkPath(n,!0));return!!o&&(Vm(s),dh(o),!0)})),t_=Na((function(t){if(lh())return!1;Jo();const e=[],i=[];for(const n of Th(Bm)){if(0===n.strokeLineWidth)continue;const s=n.localPath;if(null==s||s.isEmpty)continue;const r=n.stroke.outlinePath(s);if(null==r)continue;if(r.isEmpty){r.delete();continue}r.simplify(),t&&r.addPath(s);const o=a_(n,zs.fromSkPath(r,!0));null!=o&&(i.push(n),e.push(o))}return i.length>0&&Vm(i),!!e.length&&(fh(e),!0)})),e_=Na((function(t,e){let i=[...Th(Wm)];if(i.length<2)return!1;let n=t?rh():null;if(i=yu(i,e,!0),null!=n&&Wm(n)){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}else n=i.pop();const s=function(t,e){const i=new Skia.SkPath;i.isVolatile=!0;for(const n of t){const t=ey(n,!0);t&&(t.isEmpty||i.addPath(t,e,void 0),t.delete())}return i}(i,l_(n));if(null==s||s.isEmpty)return s?.delete(),!1;Jo();const r=ey(n);r&&(s.addPath(r),r.delete());const o=a_(n,zs.fromSkPath(s,!0));return!!o&&(o.fillRule=0,i.includes(n)||i.push(n),Vm(i),dh(o,!1),!0)})),i_=Na((function(){if(lh())return!1;Jo();let t=!1;for(const e of sh())e instanceof Zp&&c_(e)&&(t=!0);return t})),n_=Na((function(){if(lh())return!1;Jo();const t=[];for(const e of sh()){const i=u_(e);null!=i&&t.push(...i)}return!!t.length&&(fh(t),!0)})),s_=Na(((t,e)=>{if(!uy(t))return!1;Jo();const i=Jn(t.nodes,e);return!!function(t,e){return Sy(t,us,e)}(t,e)&&(ym(t,i,!1),!0)})),r_=Na((()=>{if(lh())return!1;Jo();let t=!1;for(const e of sh())uy(e)?my(e)&&(t=!0):Cy(e)?Ty(e)&&(t=!0):Ly(e)&&Dy(e)&&(t=!0);return t}));function o_(t,e,i,n){let s=!0;const r=new Skia.SkOpBuilder;for(const o of t){const t=ey(o,!0);if(null!=t)if(t.isEmpty)t.delete();else{if(i&&t.transform(i),n){const i=t.split(!0);if(i?.length>0)for(const n of i)t.isEmpty||(s?(r.add(n,Skia.SkPathOp.Union),s=!1):r.add(n,e)),n.delete()}else s?(r.add(t,Skia.SkPathOp.Union),s=!1):r.add(t,e);t.delete()}}return r}function a_(t,e){if(!Wm(t)||!t.parent)return null;let i;if(null==e)if(t instanceof xg)i=ty(t);else{const e=ey(t,!1);if(!e)return null;if(e.isEmpty)return e.delete(),null;i=new Zp(zs.fromSkPath(e,!0),t.id),iy(t,i)}else i=new Zp(e,t.id),iy(t,i);return i?(i.filters=t.filters,Zm(t,i),i):null}function l_(t){const e=t.globalMatrix;return!e||e.isIdentity?null:e.clone().inverse()}function c_(t){const e=t.path.path;return!(!e||e.isEmpty||!e.simplify()||(Cd(t,$d,gs(e)),_o(he,t),0))}function u_(t,e){if(!(t instanceof Zp)||t.path.contoursLength<2)return null;const i=t.document,n=t.parent;if(!i||!n)return null;const s=[];let r=t,o=0;const a=t.filters;for(const e of bs(t.path.nodes)){const i=new Zp(new zs(e));iy(t,i),i.title=_u(i)+" ("+ ++o+")",a&&(i.filters=a.clone(!0)),n.insertAfter(i,r),r=i,s.push(i)}return _o(ue,[t,s]),e||Fm(t),s}const h_=Na((function(t,e,i){return!lh()&&function(t,e,i,n,s){let r=!1;for(const o of t)Vg(o,e,i,n,s)&&(r=!0);return r}(Nh(),t,e.x,e.y,i)})),d_=Na((function(t,e){return function(t,e,i){let n=t.length-1;if(n<2)return!1;const s=e?"y":"x";t.sort(((t,e)=>t.globalBounds.middle[s]-e.globalBounds.middle[s]));const r=t[0].globalBounds.middle[s],o=(t[n].globalBounds.middle[s]-r)/n;let a=!1;for(let l=1;l<n;l++){const n=Math.round(1e4*(r+l*o-t[l].globalBounds.middle[s]))/1e4;if(0===n)continue;const c=e?new Be(0,n):new Be(n,0);Gg(t[l],c,i)&&(a=!0)}return a}([...Nh()],t,e)})),f_=Na((function(t,e){const i=e?Og:Rg;return function(t){if(lh())return!1;let e=!1;for(const i of Nh())t(i)&&(e=!0);return e}((e=>i(e,t.x,t.y)))})),p_=Na((t=>Ug(Nh(),t))),g_=Na((()=>$g(Nh(),{x:1,y:-1}))),m_=Na((()=>$g(Nh(),{x:-1,y:1}))),y_=Na((function(t){return function(t,e,i){let n=!1;for(const s of t)!vd(s,e)||_d(s,e,i)&&(n=!0);return n&&e.groups&&kd(e.groups),n}(Nh(),Wd,t)})),v_=Na((function(){if(lh())return!1;const t=rh();return!(!t.isElement&&!t.isLayer)&&(Jo(),function(t,e){let i=!1,n=!1;for(const s of t)(s.isElement||s.isLayer)&&s.locked!==e&&(s.locked=e,i=!0,!n&&Xm(s)&&(n=!0));return n&&Rm(),i}(sh(),!t.locked))})),b_=Na((function(){return!lh()&&(Jo(),function(t,e){let i=!1,n=!1;for(const s of t)s.hidden!==e&&(s.hidden=e,i=!0,!n&&Xm(s)&&(n=!0));return n&&Rm(),i}(sh(),!rh()?.hidden))})),x_=Na((function(){if(lh())return!1;const t=function(t){const e=[];for(const i of t){const t=Hm(i);t&&e.push(t)}return e}(sh());return!!t.length&&(Jo(),fh(t),!0)})),w_=Na((()=>!lh()&&(Jo(),Gm()))),M_=Na((function(t,e){if(lh())return!1;if(Jo(),1===ah())return Ym(rh(),t,e);const i=yu(oh(),!1,!0);return Ym(i.shift(),t,e,i)})),S_=Na((function(){if(lh())return!1;const t=rh();if(!t.isElement)return!1;Jo();const e=new Hp;if(t.parent.insertAfter(e,t),function(t,e){const i=[];let n=!1;const s=Xm(t);try{su&&(su.preventAdoptAndAbandon=!0);for(const r of yu([...e],!1,!0))if(t.acceptsChild(r)&&r.acceptsParent(t)){const e=!n&&Xm(r);t.appendChild(r),n||!e&&!s||(n=!0),i.push(r)}}finally{su&&(su.preventAdoptAndAbandon=!1)}n&&Rm()}(e,jh()),!e.hasChildren)return e.remove(),e.dispose(),!1;if(Eg(e,!0),Lu()){const t=[...ju()];let i=!1;for(const n of e.children()){const e=t.indexOf(n);e>=0&&(t.splice(e,1),i=!0)}i&&(t.push(e),Ou(t))}return dh(e,!1),!0})),k_=Na((function(){if(lh())return!1;const t=[...jh()];if(!t.length)return!1;Jo();const e=[];return e.push(...Qm(t,Hp,!0)),e.push(...Qm(t,fg,!0)),!!e.length&&(fh(e),!0)})),__=Na((function(){if(lh())return!1;if(!rh().isElement)return!1;const t=[...jh()];if(0===t.length)return vv("Selection is empty","info"),!1;if(1===t.length){const e=t[0];if(e instanceof sg)return!1;if(!(e.isRenderable&&e.parent instanceof fg))return vv("Select at least two objects","info"),!1;Jo();const i=N_(e);return!!i&&(dh(i,!1),!0)}if(!xu(t))return vv("Selected objects must have the same parent","warning"),!1;Jo();const e=L_(t,!0,!1);return e?(dh(e,!1),!0):(vv("Selection cannot not be converted to mask","warning"),!1)})),I_=Na((function(){if(lh())return!1;if(!rh().isElement)return!1;const t=[...jh()];if(0===t.length)return vv("Selection is empty","info"),!1;if(1===t.length){const e=t[0];if(!(Wm(e)&&e.parent instanceof fg))return vv("Select at least two objects","info"),!1;Jo();const i=j_(e);return!!i&&(dh(i),!0)}if(!xu(t))return vv("Selected objects must have the same parent","warning"),!1;Jo();const e=L_(t,!1,!1);return e?(dh(e,!1),!0):(vv("Selection cannot not be converted to clip-path","warning"),!1)})),C_=Na((function(){if(lh())return!1;if(!rh().isElement)return!1;let t=[...Th(Wm)];if(0===t.length)return!1;if(!xu(t))return vv("Selected objects must have the same parent","warning"),!1;Jo(),xh(),yu(t,!1,!0);const e=t[t.length-1],i=new fg;e.parent.insertAfter(i,e),i.insertAdjacentNodes("append",...t);for(const e of t){const t=Hm(e);t&&(t.title=null,j_(t)||(t.remove(),t.dispose()))}return Eu(i,!1),fh(t),!0}));function L_(t,e=!1,i=!0){if(t.length<2)return null;if(i&&!xu(t))return null;let n;yu(t,!1,!0);for(let i=t.length-1;i>=0;i--)if(e?t[i].isRenderable:Wm(t[i])){n=t[i];break}if(!n)return null;const s=new fg;return n.parent.insertAfter(s,n),s.insertAdjacentNodes("append",...t),e?N_(n):j_(n),s.position=s.anchor=s.localBounds.middle,s}function N_(t,e=!0){if(!t.isRenderable)return null;const i=new sg;return t instanceof Hp?(sy(t,i),ry(t,i),i.insertAdjacentNodes("append",...t.children()),Zm(t,i,e),Fm(t)):(t.insertAdjacentNodes(e?"before":"after",i),i.insertAdjacentNodes("append",t)),Rm(),i}function j_(t,e=!0){if(!Wm(t))return null;const i=ey(t);if(!i)return null;const n=new tg(zs.fromSkPath(i,!0),t.id);return n.fillRule=t.fillRule,sy(t,n),ry(t,n),Zm(t,n,e),Fm(t),n}const T_=Na((()=>{if(fm())return!1;Jo();let t=!1;const e=[];for(const[i,n]of mm())uy(i)?by(i,n)&&(t=!0,i.nodes.length||e.push(i)):Cy(i)?jy(i,n)&&(t=!0,i.points.length||e.push(i)):Ly(i)&&n.size>=2&&e.push(i);return t&&gm(),e.length&&Vm(e),t})),z_=Na((t=>{if(fm())return!1;let e=!1;for(const[i,n]of mm())uy(i)&&py(i,t,n)&&(e=!0);return e}));function A_(t){return new Promise((function(e,i){t.oncomplete=t.onsuccess=function(){return e(t.result)},t.onabort=t.onerror=function(){return i(t.error)}}))}function P_(t,e){var i=indexedDB.open(t);i.onupgradeneeded=function(){return i.result.createObjectStore(e)};var n=A_(i);return function(t,i){return n.then((function(n){return i(n.transaction(e,t).objectStore(e))}))}}var D_;function E_(){return D_||(D_=P_("keyval-store","keyval")),D_}function O_(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:E_())("readwrite",(function(i){return i.put(e,t),A_(i.transaction)}))}let R_=null;function W_(){return R_??=P_("expressive","vars")}async function B_(t){let e=await function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:E_())("readonly",(function(e){return A_(e.get(t))}))}("recentProjects",W_())||[];return t&&e.length>0&&(e=e.filter((e=>null!=e.handle&&t.name!==e.handle.name))),e}async function U_(t){const e={title:(su.title||"").trim(),handle:t,date:new Date},i=await B_(t);i.unshift(e),i.splice(20),await O_("recentProjects",i,W_())}class $_{#Sa=[];#ka=!1;#_a=new Set;#Ia=!1;get value(){return this._getInternalValue()}equals(t){return this._sameValue(this.value,t)}subscribe(t,e){return!this.#Ia&&!this.#_a.has(t)&&(this.#_a.add(t),e&&t(this.value,void 0),!0)}unsubscribe(t){return this.#_a.delete(t)}invalidate(){this.#Ia||this._invalidate()}#or=null;invalidateAsync(){this.#Ia||(this.#or&&(clearTimeout(this.#or),this.#or=null),this.#or=setTimeout(this._invalidate.bind(this),0))}dispose(){this.#Ia||(this._cleanup(),this.#Sa.splice(0),this.#Sa=void 0,this.#_a.clear(),this.#_a=void 0,this.#Ia=!0)}_sameValue(t,e){return t===e}_invalidate(){this._notifySubscribers(this._getInternalValue())}_notifySubscribers(t,e=t){if(0!==this.#_a.size&&(this.#Sa.push(t),!this.#ka)){this.#ka=!0;do{t=this.#Sa.shift();for(const i of this.#_a)i(t,e);e=t}while(this.#Sa.length>0);this.#ka=!1}}_change(t,e){const i=this._getInternalValue();return!(e&&this._sameValue(i,t)||(this._setInternalValue(t),this._notifySubscribers(t,i),0))}}class F_ extends $_{set value(t){this._change(t,!0)}get value(){return this._getInternalValue()}change(t,e=!0){return this._change(t,e)}update(t,e=!0){return this._change(t(this.value),e)}}class V_ extends F_{constructor(t){super(),this._value=t}_getInternalValue(){return this._value}_setInternalValue(t){this._value=t}_cleanup(){this._value=void 0}}class G_ extends V_{toggle(){return this._change(!this.value,!1)}}function H_(t){return t.value}const Z_=new V_(null),Y_=new G_(!1),Q_=new G_(!1);function J_(){Q_.change(pa())}Io(Ut,J_),Io(Bt,J_),Io($t,J_);const q_=new V_("");function K_(){q_.change(su?.title||"")}Io(Bt,K_),Io(Ut,K_);const X_=new class extends $_{constructor(t,...e){super(),this._stores=[],this._storesSubscribers=[],this._currentValues=[],this._compute=t;for(let t=0;t<e.length;t++){this._stores.push(e[t]),this._currentValues.push(e[t].value);const i=this.createSubscriber(t);e[t].subscribe(i),this._storesSubscribers.push(i)}this._value=this._compute(...this._currentValues)}get storeValues(){return this._stores.map(H_)}createSubscriber(t){return e=>{e!==this._currentValues[t]&&(this._currentValues[t]=e,this._change(this._compute(...this._currentValues),!0))}}_getInternalValue(){return this._value}_setInternalValue(t){this._value=t}_invalidate(){const t=this._value;this._value=this._compute(...this.storeValues),this._notifySubscribers(this._value,t)}_cleanup(){for(let t=0;t<this._stores.length;t++)this._stores[t].unsubscribe(this._storesSubscribers[t]);this._stores.splice(0),this._storesSubscribers.splice(0),this._currentValues.splice(0),this._value=void 0}}(((t,e)=>{if(!e)return t;const i=e.name;return!t||i.toLocaleLowerCase().startsWith(t.toLocaleLowerCase())?i:`${i} (${t})`}),q_,Z_),tI=new G_(!0),eI=new V_("HEX"),iI=new G_(!1),nI=new G_(!1),sI=new V_(null);new V_("appearance");const rI=new G_(!1);Io(Bt,(t=>{0===t&&rI.change(!1)}));const oI="animator",aI="Expressive Animator",lI="2024.1.1",cI="eaf",uI=`.${cI}`;ea="expressive/animator";const hI=`utm_source=${oI}-pwa&utm_medium=dialog`,dI=`https://expressive.app/expressive-${oI}/?${hI}`,fI=`https://www.youtube.com/@expressiveapps/?${hI}`,pI=`https://expressive.app/expressive-${oI}/pricing/?${hI}`,gI=`https://expressive.app/account/sign-in/?app=${oI}&${hI}`,mI=`/assets/${oI}`,yI=[{description:`${aI} files`,accept:{"application/vnd.expressive.animator":[uI]}}],vI=[],bI=[],xI=Na((async function(t=!1){if(0===WebGLBuffAddr0x9f6e7.valueOf())return;if(!t&&void 0===await zI())return;const e=await async function(){EI??=document.createElement("es-new-project-dialog-content"),OI??=document.createElement("es-create-project-settings");void 0===DI&&(DI=await async function(t){let e;try{e=await(await fetch(`${t}/list.json`)).json()}catch{return null}for(const i of e)i.img=`${t}/${i.img}`,i.url=`${t}/${i.url}`;return e}("/assets/animator/samples"));let t=await xv(EI,{open:AI,settings:OI,recent:await B_(Z_.value),samples:DI});return t?(FileSystemFileHandle,t):null}();e&&(e instanceof FileSystemFileHandle?await Sv(PI(e),"Opening project...",200):"string"==typeof e?await Sv(async function(t){let e;try{e=await gM(await(await fetch(t)).arrayBuffer())}catch{return vv("Failed to open project","error"),!1}return WI(e),!0}(e),"Opening project...",300):WI(e))})),wI=Na((async function(t,e){0!==WebGLBuffAddr0x255b.valueOf()&&(e||void 0!==await zI())&&await Sv(PI(t),"Opening project...",100)})),MI=Tt(SI=async function(t){return 0!==WebGLBuffAddr0xe38e3.valueOf()&&PI(t)})?async function(...t){Ia();try{return await SI(...t)}finally{Ca()}}:function(...t){Ia();try{return SI(...t)}finally{Ca()}};var SI;const kI=Na((async function(t){0!==WebGLBuffAddr0x68939.valueOf()&&await Sv(jI(t),"Saving project...",1e3)})),_I=Na((async function(t){return 0!==WebGLBuffAddr0x1273e.valueOf()&&Sv(async function(t){const e=await AI(t??bI);return!!e&&(Jo(),fM(e))}(t),"Importing...",1e3)})),II=Na((()=>(Jo(),function(){const t=new kg;return t.title="Layer "+([...su.children()].length+1),su.appendChild(t),Rm(),Eu(null),dh(t),!0}()))),CI=Na((t=>!lh()&&(Jo(),function(t){const e=[];for(const i of sh())if(i.isFilter)e.push(i.parent.insertAfter(t(),i));else if(i.isFilterContainer)e.push(i.appendChild(t()));else if(i.supportsFilters&&(i.isLayer||i.isElement)){const n=i;n.filters||(n.filters=new mu),e.push(n.filters.appendChild(t()))}return 0!==e.length&&(Rm(),fh(e),!0)}(t)))),LI=Na((()=>{da()&&(la--,ya(1))})),NI=Na((()=>{fa()&&(la++,ya(2))}));async function jI(t){Y_.change(!0);let e=Z_.value;if(t||!e)try{if(e=await window.showSaveFilePicker({id:"saveProject",suggestedName:RI(su?.title||"New project",cI),types:yI}),null==e)return!1;Z_.change(e)}catch(t){return Y_.change(!1),!1}try{const t=await async function(){const t={version:Z,type:ea};return new ReadableStream({start:async e=>{e.enqueue(new Uint32Array([1702377317]).buffer);for(const e of[Do,Eo])for(const i of e)i.serialization&&await i.serialization.serialize.begin(t);oa(e,1,await mt(JSON.stringify(t)))},pull:async t=>{for(const e of[Do,Eo])for(const i of e){const e=i.serialization;if(e){for await(const i of e.serialize.items())oa(t,e.marker,i);await e.serialize.end()}}t.enqueue(new Uint8Array([239]).buffer),t.close()}})}();await t.pipeTo(await e.createWritable()),function(){const t=ca.length;if(t&&!ca[la][4]){for(let e=0;e<t;e++)ca[e][4]=la===e;_o($t)}}()}catch(t){return vv("Failed to save project","error"),console.error(t),!1}finally{Y_.change(!1)}return await U_(e),!0}const TI={message:"Project contains unsaved changes",yes:"Save project",no:"Discard changes",cancel:"Cancel"};async function zI(){if(pa())return!1;const t=await async function(t){return kv??=document.createElement("cc-confirm-dialog-content"),mv().showDialog(kv,t)}(TI);return t?Sv(jI(!1),"Saving project...",500):t}async function AI(t){t??=vI;try{const[e]=await window.showOpenFilePicker({id:"openProject",multiple:!1,types:t});return e}catch(t){return null}}async function PI(t){if(!t&&!(t=await AI()))return!1;const e=t.name.endsWith(uI);let i;try{i=e?await gM(t):await async function(t,e){if(t instanceof FileSystemFileHandle){if("file"!==t.kind)return null;t=await t.getFile()}if(e??=uM(t),!lM.has(e))return null;const i=lM.get(e),n=Xo();let s=!0;try{!1===await i(n,t,e)&&(s=!1)}catch{s=!1}return s?(_o(ae,n),n):(ta(n),null)}(t)}catch(i){return i instanceof DOMException&&"NotFoundError"===i.name?(vv("File not found","error"),await async function(t){const e=await B_(t);await O_("recentProjects",e,W_())}(t)):vv(e?"Failed to open project":"Failed to import project","error"),!1}return i?(WI(i,e?t:null),e&&await U_(t),!0):(vv("Unsupported file type","error"),!1)}let DI,EI=null,OI=null;function RI(t,e){return t+"."+e}function WI(t,e=null){ua(t,!0),Z_.change(e),Ok()}const BI=[];let UI=null;async function $I(){0===WebGLBuffAddr0xa4fba.valueOf()&&(await VI(),0===WebGLBuffAddr0xa9ea6.valueOf())||(UI??=document.createElement("es-export-dialog-content"),await xv(UI,BI))}let FI=null;async function VI(t){FI??=document.createElement("es-upgrade-dialog-content"),await xv(FI,t)}let GI=null;async function HI(){return GI??=document.createElement("es-about-dialog-content"),xv(GI)}const ZI=Na((t=>(t=t.trim().substring(0,128))!==su.title&&(Jo(),su.title=t,!0))),YI=Na(((t,e)=>{const i=Ck();return n=new wi(i.x,i.y,t||i.width,e||i.height),n??=wi.ZERO,!(!(_k?Mk.setItemBounds(Sk,n):ma(wk,n))||(ec(),0));var n})),QI=Na((t=>!!lk(t)&&(hk()&&ec(),!0))),JI=new Map([["layer","expr:layer"],["rect","expr:rectangle-tool"],["ellipse","expr:ellipse"],["star","expr:star-tool"],["regular-polygon","expr:polygon"],["poly","expr:polyline-tool"],["line","expr:line-tool"],["path","expr:path"],["symbol","expr:symbol"],["group","workflow:Folder"],["clip-group","workflow:Crop"],["clip-path","expr:clip-path"],["mask","workflow:Preset"],["text","expr:text-tool"],["text-style","workflow:TextStyle"],["image","workflow:Image"],["filter-container","workflow:Effects"],["filter:blur","workflow:Blur"],["filter:color-adjust","workflow:Contrast"],["filter:drop-shadow","workflow:TrimPath"]]);function qI(t){return ku.get(t)??"Unknown"}function KI(t){return JI.get(t)??"expr:unknown"}function XI(t){const e=t.title;return null!=e&&""!==e?e:ku.get(t.type)??"Unknown"}function tC(t){return JI.get(t.type)??"expr:unknown"}let eC=(()=>{let t,e,i,n=Gb,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ox({reflect:!0,type:Boolean})],e=[ox({reflect:!1,type:Array})],i=[ox({reflect:!1,type:String})],ex(this,null,t,{kind:"accessor",name:"disabled",static:!1,private:!1,access:{has:t=>"disabled"in t,get:t=>t.disabled,set:(t,e)=>{t.disabled=e}},metadata:u},s,r),ex(this,null,e,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:t=>"items"in t,get:t=>t.items,set:(t,e)=>{t.items=e}},metadata:u},o,a),ex(this,null,i,{kind:"accessor",name:"position",static:!1,private:!1,access:{has:t=>"position"in t,get:t=>t.position,set:(t,e)=>{t.position=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#Tn=ix(this,s,!1);get disabled(){return this.#Tn}set disabled(t){this.#Tn=t}#ns=(ix(this,r),ix(this,o,void 0));get items(){return this.#ns}set items(t){this.#ns=t}#Ca=(ix(this,a),ix(this,l,"bottom-right"));get position(){return this.#Ca}set position(t){this.#Ca=t}#La=(ix(this,c),null);get#Na(){if(null==this.#La)for(const t of this.items)if(null!=t&&"object"==typeof t){this.#La=t;break}return this.#La}set#Na(t){this.#La!==t&&(this.#La=t,this.requestUpdate())}render(){const t=this.#Na;return Ib`
            <cc-action-group compact>
                <cc-action-button @click=${this.#ls} .disabled=${this.disabled||t.disabled} title=${t.title}>
                    <cc-icon .name=${t.icon}></cc-icon>
                </cc-action-button>
                <cc-action-button @click=${this.#ja} .disabled=${this.disabled}>
                        <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>
        `}async#ja(t){const e=await bv(this.items,t.target,this.position);e&&(this.#Na=e)}#ls(t){const e=this.#Na;e?.action?.(e,t)}}})();const iC=t=>(t=>null!=t?._$litType$?.h)(t)?t._$litType$.h:t.strings,nC=Ox(class extends Rx{constructor(t){super(t),this.et=new WeakMap}render(t){return[t]}update(t,[e]){const i=aw(this.it)?iC(this.it):null,n=aw(e)?iC(e):null;if(null!==i&&(null===n||i!==n)){const e=fw(t).pop();let n=this.et.get(i);if(void 0===n){const t=document.createDocumentFragment();n=Vb(Lb,t),n.setConnected(!1),this.et.set(i,n)}dw(n,[e]),cw(n,void 0,e)}if(null!==n){if(null===i||i!==n){const e=this.et.get(n);if(void 0!==e){const i=fw(e).pop();(t=>{t._$AR()})(t),cw(t,void 0,i),dw(t,[i])}}this.it=e}else this.it=void 0;return this.render(e)}});let sC=(()=>{let t,e,i,n,s,r,o,a,l=Gb,c=[],u=[],h=[],d=[],f=[],p=[],g=[],y=[],v=[],b=[],x=[],w=[],M=[],S=[],k=[];return class extends l{static{const m="function"==typeof Symbol&&Symbol.metadata?Object.create(l[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!1})],e=[ox({type:Boolean,reflect:!1})],i=[ox({type:String,reflect:!1})],n=[ox({type:Boolean,reflect:!1,attribute:"eye-dropper"})],s=[ox({type:Boolean,reflect:!1})],r=[ox({type:Boolean,reflect:!0})],o=[ox({type:Boolean,reflect:!1})],a=[ox({type:Object,reflect:!1,converter:t=>De.parse(t),noAccessor:!0})],ex(this,null,t,{kind:"accessor",name:"text",static:!1,private:!1,access:{has:t=>"text"in t,get:t=>t.text,set:(t,e)=>{t.text=e}},metadata:m},u,h),ex(this,null,e,{kind:"accessor",name:"alpha",static:!1,private:!1,access:{has:t=>"alpha"in t,get:t=>t.alpha,set:(t,e)=>{t.alpha=e}},metadata:m},d,f),ex(this,null,i,{kind:"accessor",name:"format",static:!1,private:!1,access:{has:t=>"format"in t,get:t=>t.format,set:(t,e)=>{t.format=e}},metadata:m},p,g),ex(this,null,n,{kind:"accessor",name:"eyeDropper",static:!1,private:!1,access:{has:t=>"eyeDropper"in t,get:t=>t.eyeDropper,set:(t,e)=>{t.eyeDropper=e}},metadata:m},y,v),ex(this,null,s,{kind:"accessor",name:"formatter",static:!1,private:!1,access:{has:t=>"formatter"in t,get:t=>t.formatter,set:(t,e)=>{t.formatter=e}},metadata:m},b,x),ex(this,null,r,{kind:"accessor",name:"thumbnail",static:!1,private:!1,access:{has:t=>"thumbnail"in t,get:t=>t.thumbnail,set:(t,e)=>{t.thumbnail=e}},metadata:m},w,M),ex(this,null,o,{kind:"accessor",name:"addSlot",static:!1,private:!1,access:{has:t=>"addSlot"in t,get:t=>t.addSlot,set:(t,e)=>{t.addSlot=e}},metadata:m},S,k),ex(this,null,a,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:m},null,c),m&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})}#Qs=(ix(this,c),ix(this,u,!0));get text(){return this.#Qs}set text(t){this.#Qs=t}#Ta=(ix(this,h),ix(this,d,!0));get alpha(){return this.#Ta}set alpha(t){this.#Ta=t}#za=(ix(this,f),ix(this,p,"HEX"));get format(){return this.#za}set format(t){this.#za=t}#Aa=(ix(this,g),ix(this,y,!0));get eyeDropper(){return this.#Aa}set eyeDropper(t){this.#Aa=t}#wr=(ix(this,v),ix(this,b,!0));get formatter(){return this.#wr}set formatter(t){this.#wr=t}#Pa=(ix(this,x),ix(this,w,!1));get thumbnail(){return this.#Pa}set thumbnail(t){this.#Pa=t}#Da=(ix(this,M),ix(this,S,!1));get addSlot(){return this.#Da}set addSlot(t){this.#Da=t}#Ea=(ix(this,k),{h:0,s:0,v:0,a:1});#Xs;get value(){return this.#Xs}set value(t){if(!(t instanceof De)||this.#Xs&&t.equals(this.#Xs))return;const e=this.#Xs;this.#Xs=t;const[i,n,s]=function(t,e,i){const n=Math.max(t,e,i),s=n-Math.min(t,e,i),r=[0,0,n];return 0!==s&&(r[0]=n===t?(e-i)/s%6:n===e?2+(i-t)/s:4+(t-e)/s,r[0]=m(Math.round(60*r[0]))),0!==n&&(r[1]=s/n),r}(t.r/255,t.g/255,t.b/255),r=this.#Ea;r.a=t.a,r.v=Math.round(100*s)/100,0===s&&0===r.v||0===n&&0===r.s||(360===r.h&&0===i||(r.h=i),r.s=Math.round(100*n)/100),this.requestUpdate("value",e)}#ms=new _x;connectedCallback(){super.connectedCallback(),this.#ms.connect(this)}disconnectedCallback(){super.disconnectedCallback(),this.#ms.disconnect()}render(){const t=this.addSlot?Ib`<slot></slot>`:Lb;return this.text?this.thumbnail?[this.#Oa(),this.#Ra(),t]:[this.#Wa(),this.#Oa(),t]:[this.#Wa(),t]}#Ra(){return Ib`<cc-popover id="popover">${this.#Wa()}</cc-popover>`}#Wa(){return Ib`<div id="color-container">
            ${nC(this.#Ba())}
            ${this.alpha?nC(this.#Ua()):Lb}
    </div>`}#Ba(){const t=this.#Ea;return Ib`<cc-color-wheel
            .hue=${t.h}
            .saturation=${t.s}
            .brightness=${t.v}
            tip
            @start=${this.#$a}
            @end=${this.#Fa}
            @update=${this.#Va}
        ></cc-color-wheel>`}#Ua(){const t=this.#Xs;return Ib`<cc-alpha-slider
            .value=${this.#Ea.a}
            .color=${`rgb(${t.r}, ${t.g}, ${t.b})`}
            tip
            vertical
            @start=${this.#$a}
            @end=${this.#Fa}
            @update=${this.#Ga}
        ></cc-alpha-slider>`}#Oa(){return Ib`
            <es-color-text
                .value=${this.#Xs}
                .format=${this.format}
                .thumbnail=${this.thumbnail}
                .alpha=${this.alpha}
                .formatter=${this.formatter}
                .eyeDropper=${this.eyeDropper}
                @change=${this.#Ha}
                @thumb=${this.#Za}
                compact
            ></es-color-text>
        `}async#Za(t){const e=t.target.shadowRoot.getElementById("thumbnail");e.setAttribute("selected",""),await this.shadowRoot.querySelector("#popover").open(this,0,.5,-1,0,-12,0),e.removeAttribute("selected")}#Va(t){const e=t.detail;this.#Ea.h=e.h,this.#Ea.s=e.s,this.#Ea.v=e.v,this.#Ya(this.#Ea)}#Ga(t){this.#Ea.a=t.detail,this.#Ya(this.#Ea)}#Ya(t){this.#fo(De.fromHSVA(t.h,t.s,t.v,t.a))}#Ha(t){this.#fo(t.detail),this.#ms.end()}#fo(t,e=!0){this.#Xs&&t.equals(this.#Xs)?e&&this.requestUpdate():(this.#ms.started||this.#ms.start(this.#Xs),this.value=t,this.#ms.update(t))}#$a(){this.#ms.start(this.#Xs)}#Fa(){this.#ms.end()}static{this.styles=Vv`
        :host {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        :host([thumbnail]) {
            gap: 0;
        }

        #popover #color-container {
            padding: 24px 16px;
        }

        #color-container {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;

            gap: 16px;
            min-width: 192px;
        }
    `}}})();const rC=[{title:"HEX",value:"HEX"},{title:"RGB",value:"RGB"},{title:"HSV",value:"HSV"},{title:"HSL",value:"HSL"}],oC="undefined"!=typeof EyeDropper;let aC=(()=>{let t,e,i,n,s,r,o=Gb,a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[],m=[],y=[],v=[];return class extends o{static{const b="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;t=[ox({type:Object,reflect:!1,converter:t=>De.parse(t)})],e=[ox({type:String,reflect:!1})],i=[ox({type:Boolean,reflect:!1})],n=[ox({type:Boolean,reflect:!1,attribute:"eye-dropper"})],s=[ox({type:Boolean,reflect:!1})],r=[ox({type:Boolean,reflect:!1})],ex(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:b},a,l),ex(this,null,e,{kind:"accessor",name:"format",static:!1,private:!1,access:{has:t=>"format"in t,get:t=>t.format,set:(t,e)=>{t.format=e}},metadata:b},c,u),ex(this,null,i,{kind:"accessor",name:"alpha",static:!1,private:!1,access:{has:t=>"alpha"in t,get:t=>t.alpha,set:(t,e)=>{t.alpha=e}},metadata:b},h,d),ex(this,null,n,{kind:"accessor",name:"eyeDropper",static:!1,private:!1,access:{has:t=>"eyeDropper"in t,get:t=>t.eyeDropper,set:(t,e)=>{t.eyeDropper=e}},metadata:b},f,p),ex(this,null,s,{kind:"accessor",name:"formatter",static:!1,private:!1,access:{has:t=>"formatter"in t,get:t=>t.formatter,set:(t,e)=>{t.formatter=e}},metadata:b},g,m),ex(this,null,r,{kind:"accessor",name:"thumbnail",static:!1,private:!1,access:{has:t=>"thumbnail"in t,get:t=>t.thumbnail,set:(t,e)=>{t.thumbnail=e}},metadata:b},y,v),b&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:b})}#es=ix(this,a,void 0);get value(){return this.#es}set value(t){this.#es=t}#za=(ix(this,l),ix(this,c,"HEX"));get format(){return this.#za}set format(t){this.#za=t}#Ta=(ix(this,u),ix(this,h,!0));get alpha(){return this.#Ta}set alpha(t){this.#Ta=t}#Aa=(ix(this,d),ix(this,f,!0));get eyeDropper(){return this.#Aa}set eyeDropper(t){this.#Aa=t}#wr=(ix(this,p),ix(this,g,!0));get formatter(){return this.#wr}set formatter(t){this.#wr=t}#Pa=(ix(this,m),ix(this,y,!1));get thumbnail(){return this.#Pa}set thumbnail(t){this.#Pa=t}render(){return Ib`<cc-action-group compact>
            ${this.thumbnail?nC(this.#Ra()):Lb}
            ${oC&&this.eyeDropper?nC(this.#Qa()):Lb}
            ${nC(this.#Ja())}
            ${this.formatter?nC(this.#qa()):Lb}
        </cc-action-group>`}#Ra(){return Ib`<cc-color-thumb id="thumbnail" @click=${this.#Ka} .color=${this.value.rgba} input-face></cc-color-thumb>`}#Ja(){return Ib`<cc-text-input
            id="input"
            style="flex: 1"
            .value=${this.#Xa(this.value)}
            @change=${this.#tl}
            text-center
        ></cc-text-input>`}#tl(t){this.#el(De.parse(t.detail,this.alpha?null:1))}#Ka(){this.dispatchEvent(new CustomEvent("thumb",{detail:this.value}))}#el(t){return!(null!=this.value&&this.value.equals(t)||!this.dispatchEvent(new Qb(t))||(this.value=t,0))}#Qa(){return Ib`<cc-action-button id="eye-dropper" @click=${this.#il} input-face>
            <cc-icon name="expr:colorpicker-tool"></cc-icon>
        </cc-action-button>`}async#il(){if(oC)try{const t=new EyeDropper;this.#el(De.parse((await t.open()).sRGBHex,1))}catch{}}#qa(){return Ib`<cc-picker id="format" .value=${this.format} .items=${rC} @change=${this.#nl}></cc-picker>`}#nl(t){this.format=t.detail,this.dispatchEvent(new CustomEvent("color-format",{bubbles:!0,composed:!0,detail:this.format}))}#Xa(t){const e=new Pe(t);switch(this.alpha||(e.a=1),this.format){case"RGB":return e.toRgbString();case"HSV":return e.toHsvString();case"HSL":return e.toHslString();default:return 1!==e.a?e.toHex8String(!0):e.toHexString(!0)}}static{this.styles=Vv`
:host {height: 24px}
cc-action-group {width: 100%}
#thumbnail {width: 40px}
#format {width: 56px}
`}constructor(){super(...arguments),ix(this,v)}}})(),lC=(()=>{let t,e,i,s=Gb,r=[];return class extends s{constructor(){super(...arguments),this.maxHandles=(ix(this,r),50),this.#sl=null,this.#rl=!1,this.#uo=0,this.#ol=(t,e)=>{const i=this.#uo===e;return Ib`<div class="slider" style=${Ux({"--slider-stop-color":t.color.rgba,"--slider-stop-offset":t.offset.toFixed(6)})}>
            <cc-color-handle
                class="handle"
                data-tip=${Math.round(100*t.offset)+"%"}
                data-index=${e}
                data-selected=${Zb(i)}
            ></cc-color-handle>
        </div>`},this.#al=null,this.#ll=async t=>{if(t.preventDefault(),!t.isPrimary||0!==t.button)return;x();const e=t.composedPath()[0];if(e.classList.contains("handle"))this.edit=!1,this.#cl(+e.dataset.index),this.#ul=e,this.#al=setTimeout(this.#hl,100);else{if(this.#dl.length+1>=this.maxHandles)return;const e=this.#fl(t);if(this.#dl.hasOffset(e))return;this.#pl();const i=this.#sl.list.indexOf(this.#sl.addStopColor(e));this.#cl(i),this.dispatchEvent(new CustomEvent("add",{bubbles:!1,composed:!0})),this.#gl(),await this.updateComplete,this.#ul=this.#ml(i),this.#hl()}this.#yl=this.getBoundingClientRect(),C(this.#vl,this.#bl),this.focus(),this.setPointerCapture(t.pointerId)},this.#vl=t=>{this.#a(this.#fl(t))},this.#bl=t=>{if(!t.isPrimary)return;0!==t.button&&t.preventDefault();const e=this.#ul;this.#xl(),this.releasePointerCapture(t.pointerId),L(),e.addEventListener("transitionend",(()=>{this.edit=!1}),{once:!0})},this.#hl=()=>{const t=this.#ul;t&&(t.active=!0,t.parentElement.setAttribute("active",""))},this.#xl=()=>{this.#al&&(clearTimeout(this.#al),this.#al=null);const t=this.#ul;t&&(this.#ul=null,t.active=!1,t.parentElement.removeAttribute("active"))},this.#Pr=()=>{},this.#Dr=()=>{this.edit=!1}}static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,noAccessor:!0})],e=[ox({type:Object,noAccessor:!0})],i=[ox({type:Object,noAccessor:!0})],ex(this,null,t,{kind:"setter",name:"edit",static:!1,private:!1,access:{has:t=>"edit"in t,set:(t,e)=>{t.edit=e}},metadata:n},null,r),ex(this,null,e,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:n},null,r),ex(this,null,i,{kind:"setter",name:"color",static:!1,private:!1,access:{has:t=>"color"in t,set:(t,e)=>{t.color=e}},metadata:n},null,r),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}#Xs;#sl;#rl;get edit(){return this.#rl}set edit(t){this.#rl!==t&&(this.#rl=t,t?this.#sl=this.#Xs.createWritable():(this.#wl(),this.#sl=null),this.dispatchEvent(new CustomEvent("edit",{composed:!0,bubbles:!1,detail:t})))}#wl(){const t=this.#sl.list[this.#uo];return this.#sl.sort(),this.#cl(this.#sl.list.indexOf(t)),this.#sl}#uo;#cl(t){if(t===this.#uo||t<0||t>=this.#dl.length)return;const e=this.#uo;this.#uo=t,this.#ml(e).active=!1,this.dispatchEvent(new CustomEvent("select",{composed:!0,bubbles:!1,detail:t})),this.requestUpdate()}#ml(t){return this.shadowRoot.querySelector(`cc-color-handle[data-index="${t}"]`)}get value(){return this.#Xs}set value(t){const e=this.#Xs;t!==e&&(this.#Xs=t,!this.#sl&&this.#uo>=t.length&&this.#cl(t.length-1),this.dispatchEvent(new CustomEvent("value",{bubbles:!1,composed:!0,detail:this.color})),this.requestUpdate("value",e))}get#dl(){return this.#rl?this.#sl:this.#Xs}get color(){return this.#dl.list[this.#uo].color}set color(t){this.edit=!0;const e=this.#dl.list[this.#uo];if(!e.color.equals(t)){const i=e.color;e.color=t,this.#gl(),this.requestUpdate("color",i)}}#a(t,e){const i=this.#dl.list[this.#uo];i&&(e&&(t+=i.offset),t=n(Math.round(100*t)/100),i.offset!==t&&(this.edit=!0,i.offset=t,this.#gl(),this.requestUpdate()))}#gl(t){this.dispatchEvent(new CustomEvent("update",{composed:!0,bubbles:!1,detail:this.#sl.createReadonly(t?null:this.#uo)}))}render(){const t=this.#dl;return t?Ib`<div id="wrapper" style=${Ux({"--gradient-bg":this.#rl?Yi.stringifyStopColorList(t.list,!0):t.toString()})}>${t.list.map(this.#ol)}</div>`:Lb}#ol;#ul;#al;#ll;#vl;#bl;#hl;#xl;#Pr;reverseStops(t){if(this.#pl(),t)this.#sl.reverseColors(),this.#gl();else{const t=this.#sl.list[this.#uo];this.#sl.reverseOffsets();const e=this.#sl.list.indexOf(t);this.#gl(!0),this.#cl(e)}this.edit=!1}removeCurrentHandle(){if(this.#dl.length<=2)return;this.#pl();const t=this.#uo;this.#sl.removeColorAt(t),t>=this.#sl.length&&this.#cl(this.#sl.length-1),this.dispatchEvent(new CustomEvent("remove",{bubbles:!1,composed:!0})),this.#gl(),this.edit=!1}#yl;#fl(t){const e=this.#yl;return e?n(Math.round(100*(t.clientX-e.left)/e.width)/100):0}#pl(){this.#rl&&(this.edit=!1),this.edit=!0}#Dr;firstUpdated(){this.#yl=this.getBoundingClientRect(),this.addEventListener("pointerdown",this.#ll),this.addEventListener("keydown",this.#Pr),this.addEventListener("blur",this.#Dr)}disconnectedCallback(){this.edit=!1,super.disconnectedCallback()}static{this.styles=Vv`
:host {
    display: flex;
    outline: none !important;
    box-sizing: border-box;
    border-radius: 4px;
    user-select: none;

    --slider-size: 16px;

    width: 100%;
    height: var(--slider-size);

    background: var(--chess-gradient) 50% / var(--slider-size);
    contain: layout;
}

#wrapper {
    display: grid;
    border-radius: inherit;
    background: linear-gradient(to right, var(--gradient-bg));
    width: 100%;
    height: var(--slider-size);
}

.slider {
    grid-area: 1 / 1 / 1 / 1;
    width: 100%;
    height: var(--slider-size);
    transform: translateX(calc(100% * var(--slider-stop-offset)));
    pointer-events: none;
}

.handle {
    --color-handle-bg: var(--slider-stop-color);
    --color-handle-tx: -50%;
    --color-handle-ty: 0;
    pointer-events: all;
}

.slider[active] {
    z-index: 1;
}

.handle[data-selected]:not([active]) {
    --color-handle-border: var(--accent-color-500);
}
`}}})();class cC{constructor(t){this.map=new Map(t)}on(){for(const[t,e]of this.map)t instanceof $_?t.subscribe(e):Io(t,e)}off(){for(const[t,e]of this.map)t instanceof $_?t.unsubscribe(e):Co(t,e)}}class uC{#Ml;constructor(t){this.#Ml=new cC(t)}hostConnected(){this.#Ml.on()}hostDisconnected(){this.#Ml.off()}}function hC(t,e){let i;const n=[];for(const s of e)Nt(s)?n.push(s):(i??=()=>t.requestUpdate(),n.push([s,i]));t.addController(new uC(n))}class dC extends yw{constructor(){super(),hC(this,[Bt,Yt])}resolve(){return rh()??Oy}}class fC extends Kb{constructor(){super(...arguments),this.font="12px -expressive-sans",this.indentSize=16,this.itemPadding=8,this.iconSize=18,this.iconMargin=2,this.smallIconScale=.75,this.textMargin=8,this.textBaselineShift=2,this.previewPercent=.4}updateInternalValues(){super.updateInternalValues(),this.background=this.getColor("background"),this.backgroundHover=this.getColor("background-hover"),this.backgroundSelected=this.getColor("background-selected"),this.separator=this.getColor("separator"),this.text=this.getColor("text")}}class pC extends Xb{createTheme(t){return new fC(t)}#Sl={type:0,item:null};#kl=new Set;#_l;constructor(){const t=new p;super(t),this.#_l=t,this.dblClickMaxDiff=-1}#Xs=null;get value(){return this.#Xs}set value(t){t||(t=null),this.#Xs!==t&&(this.#Xs=t)}#Il="";get preview(){return this.#Il}set preview(t){t=t.trim(),this.#Il!==t&&(this.#Il=t,this.renderFrame())}#Cl="";get search(){return this.#Cl}set search(t){t=t.trim(),this.#Cl!==t&&(this.#Cl=t,this.refresh(!0))}#Ll=null;get info(){return this.#Ll??=this.#Nl()}deactivate(){super.deactivate(),this.#Cl=""}scrollToSelected(){const t=this.#Xs;if(!t)return!1;const e=Sr(t);if(!e)return!1;const i=e.family;this.#kl.has(i)||(this.#kl.add(i),this.refresh(!0));let n=this.info.find((t=>t.font.postscriptName===e.postscriptName))?.top;return null!=n&&this.#_l.scrollTo(n,1)}#Nl(){let t=[],e=0,i=this.#Cl;if(""===i)for(const i of yr.values()){if(0===i.length)continue;if(1===i.length){t.push({top:e++,left:0,font:i[0],hasStyles:!1});continue}let n=i.find((t=>"Regular"===t.style||"Roman"===t.style))||i[0];const s=this.#kl.has(n.family);if(t.push({top:e++,left:0,font:n,hasStyles:!0,open:s}),s)for(const n of i)t.push({top:e++,left:1,font:n})}else{i=i.toLowerCase();for(const n of hr.values())n.fullName.toLowerCase().includes(i)&&t.push({top:e++,left:0,font:n})}return t}render(t,e,i){const n=this.theme,s=this.#_l.offset;t.fillStyle=n.background,t.fillRect(0,0,e,i);const r=this.#Sl,o=this.info,a=o.length,l=Math.trunc(s/n.lineHeight),c=Math.min(l+Math.ceil(i/n.lineHeight),a-1);if(t.save(),l<a&&c>=l){const i=this.#Cl.length>0,a=n.lineHeight/2,h=n.iconMargin+n.iconSize/2,d=this.#Il||null;t.translate(0,-s);for(let s=l;s<=c;s++){const l=o[s],c=l===r.item,f=l.font.postscriptName===this.#Xs;t.save(),t.translate(0,n.lineHeight*l.top),!f||l.hasStyles&&l.open?c&&(t.fillStyle=n.backgroundHover,t.fillRect(0,0,e,n.lineHeight)):(t.fillStyle=n.backgroundSelected,t.fillRect(0,0,e,n.lineHeight));let p=n.itemPadding+l.left*n.indentSize,g=e-n.itemPadding;g-=(e-2*n.itemPadding)*n.previewPercent,t.fillStyle=n.text,t.font=Oa?`16px ${l.font.postscriptName}`:`${u=l.font,function(t){if(rr.has(t.postscriptName))return rr.get(t.postscriptName);const e=[];let i=t.fullName.toLowerCase();const n=t.family.toLowerCase();i.startsWith(n)&&(i=i.substring(n.length));const s=i.split(" ");for(let t=0;t<s.length;t++){let i=s[t];"extra"!==i&&"ultra"!==i&&"semi"!==i&&"demi"!==i||(t+1<s.length?(i+=s[t+1],t++):i+="bold"),e.push(i)}const r=e.filter((t=>sr.has(t))).map((t=>sr.get(t))).join(" ");return rr.set(t.postscriptName,r),r}(u)} 16px "${l.font.family}"`,t.textBaseline="middle",t.fillText(d??l.font.family,g,a),i||(p+=h,l.hasStyles&&this.renderIcon(t,l.open?"workflow:ChevronDown":"workflow:ChevronRight",n.iconSize,p,a),p+=h),p+=n.textMargin,t.font=n.font,this.renderCenteredText(t,0===l.left?l.hasStyles?l.font.family:l.font.fullName:l.font.style,p,g,n.lineHeight,n.textBaselineShift),t.restore()}}var u;t.restore()}#jl(t,e){const i=this.#Sl;return(i.type!==t||i.item!==e)&&(i.type=t,i.item=e,this.setCursor(1===t?"pointer":"default"),!0)}updateHoverInfo(){const t=this.info;if(!t.length)return this.clearHoverInfo();const e=this.mousePosition,i=this.theme,n=this.#_l.offset,s=e.y+n,r=Math.floor(s/i.lineHeight);if(r<0||r>=t.length)return this.clearHoverInfo();const o=t[r];let a=!1;if(o.hasStyles){const t=i.itemPadding+2*i.iconMargin+i.smallIconScale*i.iconSize+i.textMargin;a=e.x<=t}return this.#jl(a?1:2,o)}clearHoverInfo(){return this.#jl(0,null)}handleDblClick(){}handleMouseDown(t){t.preventDefault()}handleMouseMove(t){}handleMouseUp(t){switch(this.#Sl.type){case 1:{const t=this.#Sl.item.font.family;this.#kl.has(t)?this.#kl.delete(t):this.#kl.add(t),this.refresh(!0)}break;case 2:{const t=this.#Sl.item.font.postscriptName;this.#Xs=t,Tx(t)}}}invalidate(){this.#Ll=null}get contentHeight(){return this.info.length*this.lineHeight}}class gC extends Gb{#Tl;constructor(){super(),this.#Tl=new pC}connectedCallback(){super.connectedCallback(),this.addEventListener("popover-visible",(()=>{this.#Tl.scrollToSelected()}),{once:!0}),this.#Tl.value=this.value,this.#Tl.activate()}disconnectedCallback(){super.disconnectedCallback(),this.#Tl.deactivate(),this.shadowRoot.getElementById("search").value=""}render(){return[Ib`
            <cc-text-input size="m" placeholder="Search..." id="search" @update=${this.#zl}>
                <cc-icon id="search-icon" name="expr:zoom-tool" slot="before"></cc-icon>
            </cc-text-input>
            <cc-text-input size="m" placeholder="Preview..." id="preview" @update=${this.#Al} value=${this.#Tl.preview}></cc-text-input>
            `,this.#Tl.canvas]}#Al(t){this.#Tl.preview=t.detail}#zl(t){this.#Tl.search=t.detail}static{this.styles=[bx("#wrapper"),Vv`
@container --theme-provider style(--theme: dark) {
    canvas {
        --cc-canvas-background: var(--gray-1000);
        --cc-canvas-background-hover: var(--gray-900);
        --cc-canvas-background-selected: var(--gray-800);
    }
}

@container --theme-provider style(--theme: light) {
    canvas {
        --cc-canvas-background: var(--white);
        --cc-canvas-background-hover: var(--gray-50);
        --cc-canvas-background-selected: var(--gray-100);
    }
}

:host {
    width: 480px;
    height: 640px;
    display: grid;
    grid-template-areas: "search preview" "canvas canvas";
    grid-template-columns: 0.60fr 0.40fr;
    grid-template-rows: 32px auto;
    gap: 0;
    contain: strict;
}

#search {
    grid-area: search;
    box-sizing: border-box;
}

#search-icon {
    margin: 0 3px 0 6px;
}

#preview {
    grid-area: preview;
    padding-left: 0;
}

#search, #preview {
    border-top: none;
    border-left: none;
    border-right: none;
    border-radius: 0;
    background: none !important;
}

canvas {
    grid-area: canvas;
    display: block;
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    border: none;
    outline: none;
    touch-action: none;
    contain: strict;
    --cc-canvas-line-height: 32;
    --cc-canvas-scroll-size: var(--scrollbar-size);
    --cc-canvas-scroll-color: var(--scrollbar-color);
    --cc-canvas-separator-color: var(--separator-color);
    --cc-canvas-text: var(--text-color-default);
    --cc-canvas-text-selected: var(--accent-color-500);
}


`]}}const mC=Vv`
    #expressive-logo {
        background-image: var(--expressive-app-logo);
        background-repeat: no-repeat;
        background-position: left center;
        width: 100%;
        height: 48px;
        user-select: none;
        pointer-events: none;
    }

    #expressive-logo::before {
        content: "Expressive";
        display: block;
        padding-left: 56px;
        padding-top: 4px;
        font-size: 14px;
        user-select: none;
        pointer-events: none;
    }

    #expressive-logo::after {
        content: var(--expressive-app-name);
        display: block;
        padding-left: 56px;
        font-weight: bold;
        font-size: 18px;
        text-transform: uppercase;
        letter-spacing: 1px;
        user-select: none;
        pointer-events: none;
    }
`;class yC extends Zx{render(){return Ib`
    <div id="expressive-logo"></div>
    <div id="content">
        <div id="version">Version ${lI}</div>
        <div id="copyright">Copyright © ${(new Date).getFullYear()} Expressive Suite SRL. All rights reserved.</div>
    </div>
    <div id="buttons">
        <cc-button @click=${this.#ls} href=${fI} variant="primary">YouTube</cc-button>
        <div style="flex: 1"></div>
        <cc-button @click=${this.#ls} href=${dI} variant="accent">Official page</cc-button>
    </div>
`}#ls(t){Mt(t.target.getAttribute("href"))}async init(){this.dialog.cancelable=!0}static{this.styles=[mC,Vv`
:host {
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    width: 440px;
    height: 220px;
    padding: 16px;
}
#content {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 8px;
    font-size: 14px;
}

#buttons {
    display: flex;
    align-items: center;
    gap: 8px;
}

#version {
    font-weight: bold;
}
`]}}class vC extends Rx{constructor(t){if(super(t),this.it=Lb,2!==t.type)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===Lb||null==t)return this._t=void 0,this.it=t;if(t===Cb)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}vC.directiveName="unsafeHTML",vC.resultType=1;const bC=Ox(vC);function xC(t,e){navigator.onLine&&(e??={},e.app_name="animator",e.app_version="2024.1.1",plausible(t,{props:e}))}function wC(t,e){xC("AppSetupStep",{setup_step_name:t,setup_step_skipped:e?1:0})}function MC(){xC("PWAInstalled")}const SC=new Map([[0,"ok"],[1,"aborted"],[2,"error"]]);let kC=null;function _C(t){kC=t}class IC extends Zx{#fe;#gi;#pi=0;get#Pl(){return this.#gi[this.#pi]}next(){this.#pi++,this.requestUpdate()}prev(){this.#pi--,this.requestUpdate()}close(){this.dialog.close()}render(){const t=this.#Pl;return Ib`
        <div id="wrapper">${this.#as(t)}</div>
        <div id="actions">
            <div id="title">${this.#fe}</div>
            <cc-tabs id="tabs" variant="left" bold inert .items=${this.#gi} .value=${this.#pi}></cc-tabs>
            ${this.#Dl(t)}
        </div>`}#as(t){const e=t.content;return"license"===e.data.type?Ib`
            <div id="text-title">${e.title||""}</div>
            <div id="textbox">${bC(e.data.value)}</div>
            `:"action"===e.data.type?Ib`
            <img id="image" inert src=${e.data.image}>
            <div id="content-group">
                <div id="content-title">${e.title}</div>
                <div id="content-description">${e.data.description}</div>
            </div>
        `:Ib`
            <div style="padding: 1em">
                <h2>${e.title}</h2>
                <p style="margin: 0">${e.data.description}</p>
            </div>
            <div style="padding: 1em">
                <cc-rich-list .items=${[{icon:"workflow:DeviceDesktop",title:"System",value:"auto",description:"Match your OS ambiance"},{icon:"workflow:Light",title:"Light",value:"light",description:"Luminous elegance in every detail"},{icon:"workflow:Moon",title:"Dark",value:"dark",description:"Nocturnal charm unveiled"}]} vertical @change=${t=>Dv(t.detail)} .value=${Ev()}></cc-rich-list>
            </div>
        `}async init(t){this.dialog.cancelable=!1,this.#pi=0,this.#fe=t.title,this.#gi=t.items.filter((t=>!t.hidden)),this.#gi.forEach(((t,e)=>t.value=e)),this.requestUpdate(),await this.updateComplete,xC("AppSetupStarted")}#Dl(t){return Ib`<div id="buttons">
            <cc-button variant="secondary" outline @click=${this.#El} .hidden=${!t.secondary}>${t.secondary?.title||""}</cc-button>
            <cc-button variant="accent" @click=${this.#Ol}>${t.primary.title}</cc-button>
        </div>`}async#El(){const t=this.#Pl;await this.#Rl(t.secondary.action),wC(t.id,!0)}async#Ol(){const t=this.#Pl;await this.#Rl(t.primary.action),wC(t.id,!1)}async#Rl(t){if(!t)return;const e=this.shadowRoot.getElementById("buttons");e.inert=!0;try{await t(this)}finally{e.inert=!1}}static{this.styles=[Vv`
:host {
    width: 640px;
    height: 480px;
    user-select: none;
    display: flex;
    flex-direction: row;
}

#actions, #wrapper, #content-group {
    display: flex;
    flex-direction: column;
}
#wrapper, #content-group {
    flex: 1;
}

#actions {
    box-sizing: border-box;
    width: 270px;
}

#actions, #content-group {
    gap: 8px;
    padding: 16px;
    font-size: 14px;
}

#content-group {
    gap: 4px;
}

#title {
    font-size: 20px;
    font-weight: bold;
}

#text-title {
    font-size: 20px;
    font-weight: bold;
    padding: 16px;
}

#content-title {
    font-weight: bold;
}

#tabs {
    flex: 1;
    --tabs-height: 48px;
}

#buttons {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-end;
    gap: 8px;
}

cc-button[hidden] {
    display: none;
}

#image {
    width: 100%;
    aspect-ratio: 1;
}

#textbox {
    flex: 1;
    scrollbar-gutter: stable !important;
    margin: 0 0 16px 16px;
}

#textbox {
    user-select: text;
}
#textbox p {
    margin: 0.5em 0;
    font-size: 0.75rem;
    word-break: break-word;
}
#textbox p.lead {
    margin-top: 0;
}
#textbox h2 {
    margin: 0.5em 0;
    font-size: 1rem;
}
#textbox h4 {
    margin: 0.25em 0;
    font-size: 0.8rem;
}
    `,bx("#textbox")]}}const CC=Intl.NumberFormat("en",{notation:"compact",style:"unit",unit:"byte",unitDisplay:"narrow"});class LC extends Gb{showPreview(t){this.dispatchEvent(new CustomEvent("es-export-preview",{detail:t,bubbles:!0,composed:!0}))}getSuggestedName(t,e){return`${t?t.replace(/[\/\\:]/g,""):"export"}.${e}`}async getFileHandle(t){try{return t=t?{id:"export",...t}:{id:"export"},await window.showSaveFilePicker(t)||null}catch{return null}}async getDirHandle(t){try{return await window.showDirectoryPicker({id:"export",mode:"readwrite",startIn:t})||null}catch{return null}}static{this.styles=[Vv`
    .label {width: 130px;}
    .heading {font-weight: bold; margin: 8px 0;}
    .input-group {
        gap: 4px;
    }
    .input-group :first-child {
        font-size: 10px;
        margin-left: 8px;
    }
`]}}class NC extends Zx{#Wl;#Bl=!1;#Ul;#$l;#Fl;#Vl;constructor(){super(),this.#Ul=document.createElement("cc-progressbar"),this.#Ul.id="progress",this.#Ul.inert=!0,this.#$l=document.createElement("cc-dynamic-container"),this.#$l.id="container",this.#$l.classList.add("inert"),this.#Fl=document.createElement("cc-rich-list"),this.#Fl.id="rich-list",this.#Fl.classList.add("inert"),this.#Fl.addEventListener("change",this.#Gl),this.#Vl=document.createElement("div"),this.#Vl.id="export-result",this.#Vl.inert=!0}async init(t){this.dialog.cancelable=!0,this.#Bl=!1,this.#Fl.items=this.#$l.items=t,this.#Wl||(this.#Fl.value=this.#$l.value=t[0].value);const e=this.#$l.current;e&&e.initialize(),this.#Hl(null),this.#Il=null,this.requestUpdate(),await this.updateComplete}render(){return Ib`
            <div id="left-panel" class="not-preview">${this.renderLeft()}</div>
            <div class="panel-separator not-preview"></div>
            <div id="right-panel" class="not-preview">
                <div id="title">Export settings</div>
                ${this.renderRight()}
                ${this.#$l}
                <div id="actions">
                    ${this.#Zl()}
                </div>
            </div>
            <cc-flex-col id="preview-content">${this.#Yl()}</cc-flex-col>
        `}#Zl(){return this.#Bl?Ib`${this.#Ul}<cc-button variant="secondary" @click=${this.#Ql}>Abort</cc-button>`:Ib`
            ${this.#Vl}
            ${this.#Jl()}
            <cc-button variant="secondary" @click=${this.#Qn}>Cancel</cc-button>
            <cc-button variant="accent" @click=${this.#ql}>Export</cc-button>
        `}#Jl(){return this.#Il?Ib`<cc-button variant="secondary" outline @click=${this.#Kl}>View exported file</cc-button>`:Lb}#Yl(){if(!this.#Xl)return Lb;const{type:t,width:e,height:i,file:n}=this.#Il;return Ib`
<cc-flex-row class="preview-container" style=${Ux({"--aspect":`${e} / ${i}`})} flex>
    ${this.#tc(this.#Xl,t)}
</cc-flex-row>
<cc-flex-row style="justify-content: space-between">
    <div>${n.name} (${CC.format(n.size)})</div>
    <cc-button variant="secondary" outline @click=${this.#ec}>Back to export</cc-button>
</cc-flex-row>
`}#tc(t,e){switch(e){case"svg":return Ib`<object class="preview-object" data="${t}" type="image/svg+xml"></object>`;case"image":return Ib`<img class="preview-object" src="${t}">`;case"video":return Ib`<video class="preview-object" autoplay controls loop src="${t}"></video>`}return Lb}#Kl(){this.#Il&&(this.classList.add("preview"),this.dialog.cancelable=!1,this.#Xl=URL.createObjectURL(this.#Il.file),this.requestUpdate())}#ec(){URL.revokeObjectURL(this.#Xl),this.#Xl=null,this.#Il=null,this.dialog.cancelable=!0,this.requestUpdate(),this.classList.remove("preview")}#Il=null;#Xl;#ic=t=>{this.#Il=t.detail,this.requestUpdate()};renderFormats(){return this.#Fl}#Gl=t=>{if(!t.handle(0!==WebGLBuffAddr0xd0e9f.valueOf(),(()=>VI())))return;this.#Hl(null);const e=t.detail;this.#Wl=e,this.#Fl.value=e,this.#$l.value=e,this.#$l.current?.initialize(),this.#Il&&(this.#Il=null,this.requestUpdate())};async#Ql(){await(this.#$l.current?.abort())}#Qn(){this.dialog.close()}async#ql(){if(this.#Bl)return;const t=this.#$l.current;if(!t||!t.validate())return;let e;this.#Il=null,this.#Bl=!0,this.#nc(0,"Exporting..."),this.requestUpdate(),await this.updateComplete,this.#sc(!0),Iv("wait");try{e=await t.execute(this.#nc)}catch{e=2}Iv(null),this.#sc(!1),this.#Hl(e),this.#Bl=!1,function(t,e){let i;kC&&(i=kC.toString(),kC=null),xC("AppExportCompleted",{export_type:t,export_status:SC.get(e),export_error:i})}(t.lastExecutedType,e),this.requestUpdate()}#Hl(t){const e=this.#Vl;switch(t){case 2:e.setAttribute("data-type","error"),e.textContent="Export failed";break;case 1:e.setAttribute("data-type","aborted"),e.textContent="Export aborted";break;case 0:e.setAttribute("data-type","success"),e.textContent="Export complete";break;default:e.removeAttribute("data-type"),e.textContent=""}}#nc=(t,e)=>{const i=this.#Ul;e&&(i.label=e),t<0?(i.indeterminate=!0,i.value=0):(i.indeterminate=!1,i.value=t)};#sc(t){for(const e of this.shadowRoot.querySelectorAll(".inert"))e.inert=t;this.dialog.cancelable=!t}connectedCallback(){super.connectedCallback(),this.addEventListener("es-export-preview",this.#ic)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("es-export-preview",this.#ic),this.#Il=null}static{this.styles=[Vv`
:host {
    display: flex;
    flex-direction: row;
    width: 768px;
    height: 576px;
    gap: 8px;
    padding: 16px;
    user-select: none;
}

#title {
    font-size: 20px;
    font-weight: bold;
    text-transform: uppercase;
    margin-bottom: 8px;
}

#left-panel, #right-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.panel-separator {
    pointer-events: none;
    width: 1px;
    background: var(--separator-color);
}

#actions {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 8px;
}

#progress, #export-result {
    flex: 1;
}

#export-result {
    font-size: 12px;
}

#export-result[data-type="error"] {
    color: var(--error-color);
}
#export-result[data-type="aborted"] {
    color: var(--warning-color);
}
#export-result[data-type="success"] {
    color: var(--success-color);
}

:host(.preview) .not-preview,
:host(:not(.preview)) #preview-content {
    display: none !important;
}

#preview-content {
    width: 100%;
    height:100%;
    max-height: 100%;
    overflow: hidden;
}

.preview-container {
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background: var(--chess-gradient);
    background-size: 15px 15px;
}

.preview-object {
    aspect-ratio: var(--aspect, auto);

    max-width: 100%;
    max-height: 100%;
    height: auto;
}

`]}}function jC(t,e){const i=EC();return jC=function(e,n){let s=i[e-=328];if(void 0===jC.HzeoZb){const e=function(t,e){let i,n,s=[],r=0,o="";for(t=function(t){let e="",i="";for(let i,n,s=0,r=0;n=t.charAt(r++);~n&&(i=s%4?64*i+n:n,s++%4)?e+=String.fromCharCode(255&i>>(-2*s&6)):0)n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let t=0,n=e.length;t<n;t++)i+="%"+("00"+e.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(i)}(t),n=0;n<256;n++)s[n]=n;for(n=0;n<256;n++)r=(r+s[n]+e.charCodeAt(n%e.length))%256,i=s[n],s[n]=s[r],s[r]=i;n=0,r=0;for(let e=0;e<t.length;e++)n=(n+1)%256,r=(r+s[n])%256,i=s[n],s[n]=s[r],s[r]=i,o+=String.fromCharCode(t.charCodeAt(e)^s[(s[n]+s[r])%256]);return o};jC.ZUsGqj=e,t=arguments,jC.HzeoZb=!0}const r=e+i[0],o=t[r];return o?s=o:(void 0===jC.ZITFjW&&(jC.ZITFjW=!0),s=jC.ZUsGqj(s,n),t[r]=s),s},jC(t,e)}function TC(t,e,i,n,s){return jC(s- -750,n)}function zC(t,e,i,n,s){return jC(t-387,s)}function AC(t,e,i,n,s){return jC(s- -382,i)}function PC(t,e,i,n){return jC(n- -722,i)}function DC(t,e,i){return jC(i- -765,e)}function EC(){const t=["qNFdIIOq","b1b8W7G","cCkZomodW7W","cvTNWQy5","WR5EfMOn","WQtcKCodWPev","svBcL2Df","W7BcTemHW5K","h0JdTXGN","W5jPW70","rtddGxb5","o8ocWQRdNq0","WO1OWQlcUMm","nxP6W4qm","vYdcQhW","F8kwiCkD","WOzUWRRdR3G","W7VcNmozW7dcMa","vG/cOmoSja","khmRbuO","W5VcOfihW7S","qYJdO8oWeG","W7DgEriJ","uCkvW6aZkG","cLpdQa8","yGqAW5RdHW","W5eREmoLW4W","oCkpmCorW5O","WOzVWRZcVMK","kNPeW4mN","f8kUWQdcHSo9","BNtcG2HW","b8kQW7/dN8kj","W7/cSeeyW4W","W7b8zMdcSq","ESkIW49/sq","eCkmAuxcVq","WOS9d3pdJa","W5fMuJBdQG","v0BdTs4r","W6XEt2xcVq","wGX3WQr5","bSofWRvdB8kKEe7cKa","W7RcKMaPW6S","xdFcKtRdUG","W65quNxcNW","W4NcPCo1W4xcIa","WPNcUmkFuNa","zmkrW6znva","BeBcHuDT","kZRdJHtcQG","fCkmpmozW6O","CCoxW6npCa","zZNcVmoeka","mfBcIHyG","W7GltmoeW4C","h0ddTYe+","wsNcU8oQia","W4TPbvyv","zH9Fc8og","W61+jv48","bmkWtmoIWRq","xr7cL8oKmG","cmkonSodW64","yZtdUmkpWRa","W456vJddUa","dupdOG8","wb7cL8oGpa","W495xwpcLa","tdFdUGRdIW","rvXrWRtdLa","W6rJl8o0WQi","bSoeWQ3cHHm","cmkpp8obWPm","pXtdQuRcPa","wcddUsBdRq","aCkYWR7cS8oJ","AmokWRPufq","WO/cMCkzzge","ce1NW7KZ","W5TGtxFcJa","WQJdRfJcLGu","W7zymmoFWR4","W6NcOCoUW5pcTG","W5G6u8oyW6G","W5ndlCorWRK","W4HAEMpcNq","qWlcL2XS","sIZdTSoMWRi","tdBdHmooW4m","W5zZvs/dMa","dfT0W7b0","WPH6uSkbW68","WPyblIJdUq","CW9BkSol","W4zrFJav","c1pcUWH6","rCkrW7zJFG","CHzUASkt","WRJdLNpcHtG","WPRdQvS","uSobWQT9nG","AWDSASoi","F8koWR14sW","WQxdJ8krW4Cm","tCkaaSkUgW","W4zzosGu","r3FdUt0Z","FZBdQN3dVW","WRS6WRxcRCkN","smouWQtdIbi","W7vIc0G/","W6nqerdcVG","WPWTgc3dKq","WQlcImkosKa","zrf7pSoN","sSopmCkc","rX9pjCoS","latdMIZcHG","WRvPWRlcVfa","uCkHW5bdCa","bSkyW7NdL8ku","W68zWO/cJmoU","e8k5WQ3cSmoG","WQbjWQ/cLem","gwtdGmohWPy","F13cQx/dVG","W7WjWRZdQSom","W5bJe1iD","y1ddMJKi","W7nHsd4X","hSoamCowW7C","dNjwW4Ck","cSoyWQZdKa","W5RcP1OPW5O","kXlcLce1","WPFcKmotW6yH","W5Kay8o8W6K","ldpdVa","CKrcWOZdIq","qI3dRCovWQG","WQZcRCk6ufK","WOlcJuVcMSkE","x8kJW4L/BG","CCkQhmoYWRS","af5L","b8kTWRJcJSot","m1CBigG","aK8VWQ9X","fCkWWQZcK8o6","BJRdJdtdNG","W41gDtFdUq","kHNcHG","W58Nw8otW74","fCkXmmo7WQ8","DhFcQSkWsa","W7fjhx4u","D8oDWQOvnq","W5TWrIVdQG","vHJcN8oP","ftNdPM88","WOJdJmoFywW","WOdcGxBcRCkk","W4zPmCo+W7u","EtBcRxT3","i8k5WRVcSCof","W73cOCkVW7NcIW","seBcSa9J","nxjDW6yp","EZldN8ojWQW","W5ddOZOTW5O","sg7cP1nZ","W4iHwmkmW6W","jW3cJG","vYXEuCk1","iCkGmCoBW7m","vuFdJsuO","W5nbEHey","sKlcLSoGia","CN5BWQFdKW","WPRdIKJcQdK","W61Pc2m+","W68DWQ3cQCoH","cx1xW5O0","sSoqWRjqpG","srJdMdVdQW","r8ohWR5tha","WOrBWR3cS0W","rapdVLOU","zcNdNmoWpq","W4iPWQJcTSos","m8klmSogWRm","fh1WW5mY","W5NdVXaYWOO","WOf8uI7dUq","zYxdNYpdRq","W4XBlvmM","WPe8urnMW7CMimk2g3pcNCog","WRBcSKpcNCkU","sdRcS0ldSG","W44GuSofWQ0","W6lcKwCFW5W","D3BdNZeo","vJ/dJCowfG","gI/cPhf6","amklWPFcS8oA","EuBcM2rN","uCkCdmkBbG","uYnfwCk0","m0BcVd1c","rXRcLtZdGG","W6SmWQNcVW","WOerWPhdU8kF","WQpcMSoFW5ui","qqJdVCoFWPG","DWD9D8ka","vfH4WRZdVa","zt7dNCkHiG","Bmkli8oqWRi","WRG8hWtdUa","u8kmdCkCgW","a0BcQJXN","f8kpmSo4W70","zSohWQPhoa","W6fle3y","f8k9WRFcLCoS","ehRcPG1T","W63cNdqBWPO","v1pcICkxwW","b8o5WR7dNCkb","ACoxWRzskq","CI7dISoJhG","WR7dN0BcHGe","W6acWOZcQmkg","W7zjgGZcUa","WQZdJuBcIK8","W5/dPXDOW6m","xmkaW6T+yq","BCoQWPPDfq","yKFdJrK","EIxdO8o5WPS","BvFdIZG0","aCkCW7VdUCke","DSkEmq7dRG","wIBdItFcVW","WO9VWQFcQNq","pJdcLq4B","mH7dVIRcRG","WQ/dJHVcI0q","rH7cSmoihW","WQxcHSocW4ak","p2dcGNzcW6pdNa","lSkupmozW7q","W4jVzCkS","netdTXig","WO9VWRO","uZlcTxTN","ybzGBa","pbxdRZZcTq","bKlcMG5m","t8o3WR5Nja","WQrJdG7cJmoFia","zvv6gSkL","W63cQSo7W5tcKa","W7LEhw8L","D2RdGuj/","trJcL8oRiW","jaBcIe9A","FeJdJJuU","W7ycWRK","W6/cISoHW6JcIW","cffH","WQe2dZVdHW","W77cSeeRW5y","jCkrWQ7cMCo5","emkOiCoMW40","f1i2bw0","WOO0WPxdQCkI","W4JcKcCDWQi","WQRcJuVcKmku","W7dcJxCGW7y","ua5C","krFcIabG","zJpcS2tdTq","W6fdi2Cb","W4GQa8otW6W","CbhdSSoAWRW","W6hcUSoDW5xcJG","W5pcMSobW53cLW","W6jAcMWf","zYPSqeu","C8kccmkDBq","WRtcMSoIW5uF","ySoAWP1Bkq","y2fzWOtdKq","bSowWR7dGay","rCk8W757Aa","iCo8WPhdScK","W6jfdHBcPG","W5W0xmoJW5C","F0NdSCkI","W4GyxmomW6S","uXLzlSk+","BwhdS8kAWQW","vSkBnGxdQa","ztZcI3XN","EmkXW7rTya","CSoaWRfboa","W5KRrCozW6e","j07dKGeA","cvKok2q","Amkae8kgoW","AbZcPwpdLW","lSkgWR/cMSoH","WRK1bqJdKa","W7ZcLL0HW5i","A8kTlSk4lq","W5BdPGaRWPS","wM3dSCkHWRe","a8oLWR7dUdC","WPK8aXbG","W7ZcSKtdNSoK","WQuqguJdUG","W4TCemoUWRK","W649amoJWRO","W4ddObmWWPW","qsJdJurn","FCk1mZJdGW","W5r/chis","WQhdPrK","BWvlF8ks","WRZcMCkpqKq","db/dMmksxW","bGpcLWya","WQhcKCovW6qB","n8kbimoCWPK","wcJdRmogoq","FCkafmk7nG","zfVdJaKh","qahdT8oiWPi","fZhcLmoaW4m","WQhcTrpdM8oV","WPtcPehcO8kZ","qa7dO8oGpq","v8kqW7y6ya","WPu2rtddRG","W7bUp8oCWOm","FbNcLmoJbW","FqldMqVdRG","CWtcNtma","WQxcO0/cMG","W73cKfKTW5m","DNbcWQtdTG","qflcHmk4zW","WR7dVmk/WQ7dIsRcRCoiWOb4hCkt","c8oBWQFdMGq","dmkapCoIW4e","W7DOnKCz","D8kVnYxdGa","W73dIKJcIKi","eCo0WRFcK8o+","W5vND2tcOq","FSowa8knmW","vcBcPNbW","w8kbW73dJWm","W7zVuqxdGa","BLhcKgnO","W4G8u8oxW7K","hx7cMJddVxNdL27cOW","sCkimr/dQa","oKpdSa87","FdvBg8oL","ubRdPXG3","WRVcJSkEzMS","W7bcdhOS","BwNdGCoeWOq","WRyCWQNdUmkf","bHBdQXW9","EeJdQCkIWOi","W7NcNvCfW5i","FJZdRahdRG","buFcUJ94","ow4W","EGtdTatdRa","xXZdTSoDWRu","WQxcHSkvsem","WQlcH8oqW48j","EgpdGmkXWRK","s2FdLSkx","bSotWQFdHdC","WQb/WQ7cUue","h3JcNta","WQOewchcLG","W6jaBH43","W7hdOrqIWQG","pttcLcuY","WRCxWQNdLCkf","BrfoAG","ovWobLu","x0NcPSkiBW","rGRdQubL","uqxdP8oiWR4","uJhcS399","Dt/dL8oL","eghcNaTy","W6PpeWdcUq","WObJWRZcSwu","kSken8oGWOG","brVcPYeK","WQxcM8ofW5me","wSkbW6K","rMJdHq","umkvW6PPFq","dCkeW7RcKfm","vmo8W7NdLSkP","yLjzW53dNq","WO7cKSkkCwa","W5xcO0vWWOO","W5nnqHJdRG","fu/dVrOw","W7/cNb/dNKFdU2tcHSoRuCkq","W4JcGCoQW67cTa","g1ldQamH","pb/cGHqO","W70dWRRcLSoD","xthcOM5r","W6jfebBcVa","bXdcLJGg","c0FcUZT6","Dqr6Bmki","b8k1WQpcKW","WQRcPexdH8kU","xSkpW7hcMLG","W4GNWPFdOSor","tLddJSk/WP4","b8ozWQxdJbi","W73cRrKoWP8","nZZcMW42","W4xcNSo5W6NcRG","WQers07dUmkHFwxcNSoHWOdcU8ol","jSkzW4/dQSko","dmotWRRcMrK","vWRcM8oMjW","WQ7cLM7cQSk7","W5vAmfqO","WRpcGCoqW5uy","W7VcGSk3W47cNW","W4j5l8o0WR0","W6ZcN8ooW5RcKa","WOhcUvBcH8kF","fSkVaSo+W58","W7Ddchys","WQGuv34q","W6vWka7cJG","W5D4aNan","p3nfWQldQW","WPpcSKlcR8kq","W7WRvmoXW4e","WRiBwd9a","WQ9cWR3cLhe","WPSwgGxdNa","qmkcWOecAG","zerkWOpdGq","W4f2xsy7","ed/cSgW5","d8kcgZ/dLW","W7XfeX7cVG","W6THcKOs","lLNdUse8","uMVcGSoNAW","q2pdQSkxWPS","nXxdTr3cQa","WO7dIg/cPXC","WRbSWQRcUxK","j0xdKJOD","W59eELJcGa","W5qRomoJWRS","xr9tk8o+","WO/dMKZcItq","gCkrWP7cOCoK","c155W6uK","wLxcTKLl","yZVdGZFdTa","D8oDWQHmcW","FGNdI0HG","oGtdTbG","W7nDAbK8","WRyDWQ/cQCku","isZdJSo9lW","vbNcTMH3","W5hdTrWtWRK","qvVdNZSU","WRRdV8k/WQZdIq","WO5hWPlcRKe","WPDTpmo+W7C","CCkbW6jSwq","WQ7dMLNcMXO","W79zxwpcSW","wqWLWQrXCrRcRCkFhmomBq","W512dNGh","omk3aCoLW6W","WPamWRVdV8kT","zmk4es7dMG","vmkKl8kzoW","WOe3WPRdOCkk","FX7dP01u","W6zEg2Sv","WQxdOHFdN8oL","WR3dLXhcMbW","yCoEWR0","W4Kjy8oxW5G","W7rfcrJcOW","zZxdM8oZcq","AXVdRIJdJG","sbJcM0FdHq","CHjJD8ks","tHRcQfPJ","b1VdHmk8CmoTxMWVW48NWPe","vrBdPKG/ifJcPmkSAqvrW7a","nKWWee8","W6ldG0pcJba","WOWRgcldGa","W6SiWRRcM8oa","mxa3oK4","W5RdTXC","W4nKpSoUWQi","l8oqWRJdHIW","WR7dMKJcMXK","jstcMdyI","ytdcKx9D","uCoBWRvqmG","uJdcTs5S","W6fod2ej","eeVdRGm0","W5OyWQJcVmo1","WQypnJBdPq","W4rPfeC5","W7tcVraZWRq","kN5DW7O5","E2BdIbis","pmo2tCoWWRO","CuFdGcK2W4JcNSkCDG","zLhdJHuw","W49wDfFcLa","W7fueHS","W5roiLCg","ACoyWQTWdW","l0PZW7aa","z8kUhWldQW","DrhdISoO","h8kpW6DLDG","W7jDa1bG","W5ndcCo0WOO","WRbderJcUq","W6NdUmk5WQ3cMa","nSkPWR/cKmoi","Ew/cNCkuDa","kSkzW4ddI8kX","ntVdJSkKBW","saJcRvldHG","W6v+o8o9WO4","CJpdImo/oW","thxcT8kWBa","ktdcOxVcTG","aghcNdz7","W4HHlSo+W78","nxqSpuO","WOn+WQFcVq","aelcQHS","qLpdT8k/WRe","xWBcIKZdSa","BeBcHuvT","WRlcV8k7x08","tc3dRwjN","WO3cNvlcHSk9","W7WNWOJcKmoJ","WO0Rhc3dKa","W5BdPJeLWPO","WRvVWQRcMeW","bSoqWOZdIbu","wslcOePv","kCkkhmo6WRG","yCkAW7r+yG","CI7dGmoJoW","wCkgW77cNLpdRSoCWOtcRCkXWOTEW6W","W5qYWQ7cVtm","W4zkl3aQ","W7zcu38","CNZdVZax","WRtdPwtcQrW","tSkJf8kbfq","mvVdOY3cJG","WQJdI0JdN0C","mWrP","zqz9lSkE","eCkwmqJdQa","zNpdIIGP","WQrvlHm6","hCkHmmozWRW","WOG8cqxdNq","nHpcGHmO","CfFdKqGh","WPxdN07cMr8","W7hcHCojWPO","zmowWRXWkW","EshdTYhdSG","WOvVWRZcMwK","DxRdLmoNoW","bvqmnu4","W6fmjXS8","qG7dO8o9fa","WQ0SgYxdTq","W7ZcUKi","Ds/dNCo/EG","W6zgDqm8","W7rqlZ4R","W7PqW6BdPmkr","uZb2p8oV","WPlcKCkUy3O","WOqmbYFdRG","ySkxiSkKdG","xCkipqRdUq","nWqCW57dGa","W6JdT8oQW77dIG","ub5zcCo8","W6jbeX3cPq","z8odW6OgmW","BWBdNHxdLW","dvFcVXHI","AJDPsLC","W6/dHCohWPKj","AXBdV0VdQG","bKpdQX46","W7HvtIhcIa","WO4PdsBdMG","mSoCWPRdHGG","xKzpWPVdJW","B3fHWOJdSa","dMFcOs4N","xeBcK0zi","A8kDcGRdUa","au3cUGLz","u1xcOSkjWP8","n8kgW60nzmk9W5Oip8kRrhRdNq","W48QrmkgW7u","zmogWRDh","b8kRW7NcJSky","tW19zSkv","uHjCpSoj","umkqomkgbW","du/cTb0H","ca9XWQnX","C3VdHXyP","WQldI0/cRGe","a8obWOxdJIa","mxqXhei","W69exMxcNa","vWpdVCopWOK","wa3dQcpdIq","W797oCoTWQu","A8oDWQ8","veVdMXOJ","yLVdHqG","W7VcTfKK","umkoW73dIfm","CdNdP05c","krhdTr7cSW","FIddNcJdSq","WRNdILlcM1O","FCkmbSkq","WRRdOr/cLXG","EcddVsZdSW","BtFcTIZdTW","B0lcHwa","WQpcMCoEW5ii","DCoWWPf9gG","aG1XW7SS","W4rNuIVdOa","qX9EomoL","xhldH8kyWPa","DchcOxHv","WOrRWQtcRgu","W4JcGvCLWOC","WPzLWRO","oSkIb8kHWQy","uw5EWOddKq","WOxcJSkiyMe","WOpdLvlcOJ4","WR7dIL7cUXW","dmkNlmolWQ8","jhuuhLq","BtxdJmo6kq","W5xcTX0DWPe","WPuWlGZdUa","W6jnxWpdNG","BCkGqSkOW6K","muBdHLuK","W7DPaMeC","W4LKDetcGa","W7BcTfGT","FM/dSCktWR0","W5aztdWA","vZ7dPSo7WPC","W6fsh3e","WONdJCoBm20","CSkGkaRdRG","g1ZdUZFcP8otr8oPW5zUhCknmG","W75ihtnQ","W4tcTCo3W5hcSG","W63cUCo5W43cQa","n0tcJYTA","WPC8aHnJ","W6PcfmozWOy","evODBmkQ","W6j7nmozWQe","WRdcKmo+W4C","lXxdUa7cQq","qtxdQx1R","zW9oWOZcKW","W6GFWQhcRSoB","W4aRu8ogW4G","t17dSwdcPa","ythcPvLy","W4nVl8kRWRC","jgGXee8","W7DDhxXv","qaBcQMS","W5VdOay0WPO","WRmnWRldUW","CNRdISoPlG","W4n2BmomW7G","W5lcMSoFyt8","dfJdGCk9CG","aCoaWReYiCoshvBcVxmnW6xdGW","wSkFlaRdPa","pxBcKdTG","fSklfmoDW50","DhFcQSk3FW","x8kYoIBdOq","W7/dR1CEWPm","k8kegmk+WRW","pHlcNJma","W6VcNSoEW7xcLq","BxpdHmkqWRq","oNurchi","rennWOVdPa","W6TRmMSQ","WOiZhW","W4X6D0JcGG","WO3dJSkpngW","Ed7dTZ7dOG","W5ldKGmcWQq","W6rhEquy","adJcIdKK","W7PAc3C","mH7dVa","W6pdNt0YWP8","dbxdUt3cKa","muNdGbGG","WO/cMmkFnxa","WPbLWRO","W5vLwcFdOG","WOHLWQhcSq","W5z0fXlcVW","lW/cIb0d","WQujWR7dQSk5","EeRcI2q","w2hcSfbM","x8kyna4","zmo6WRP4mq","W7VdRHukWO0","rJzmDmkY","W6flfhyd","cuHyka","v8kAW5z5Aa","rKpdG8kgta","xCkiirVdUq","DuZdHaWw","iW7cNXyS","pIFdQrpcQa","zGDHASkI","W5hcLhyLW5e","W5pcVCkGtee","ua5spG","xZNcLNldKG","amkEWPVcH8oF","gmk+j8oBWQG","lmkFnCoWW5C","tJpdUrVdLW","WQuZWR/dR0i","umkjputdUa","WQzaWPNcMwi","WRpcJmkjC2i","W7JcK8osWPao","W7Tvhu8s","EfFcNNnL","W7lcV8oKW6VcNa","WQxcH8oqW4mb","s2ldKmogWO0","W7/cPSoTW4tcUa","W77cSqviWOO","W7amWPZcMmoI","C0RcGNvT","W4xcJSoaW7VcVG","W7vqBKCH","n8kZga","c1ZcOmkkWP8","DCo/WQ9HfG","W6f4lr4k","W4DJvdFdVG","uGHepmo+","W4vUqxldTa","W7yrtK/dUa","hslcTGKN","FqZcOuldMG","qrRdVXVdMW","lCkYdmo9WRS","h8onzmouWQi","W5vQm8o/WQa","BXRdJcldGG","jKtdGGmG","eCkKWQNcN8o7","W4dcUJy5WQC","yMFdHqSb","W5nLfKm","sxxdJdpdSW","oLP3W5en","mWtcMbqK","hZNdJt3cTW","g8oDWR93zq","irNcOJxcPq","W6akCCopW6u","taDKw8ki","e8kJhSouWRa","W5FcT18TW50","pH7dRZBcTq","A8kkjmkUma","kmkMW7ZdQmkx","W7bwCbi","oxq8ffS","W4jWm0ys","qwNcImk3vG","W4TuxLBcVa","ymkbW6bqBG","a08ilG","WRRdG1pcGHK","W6JcSbOxWOq","yehdG8k8WRm","W6jKdY7cSG","WQisg0JcRG","y0bcWO7dGa","W4vIfa","BSkkc8kmoq","W6viW6VcOmoB","W4r5CJy","qMBcPuzS","WQpdOKfbW4qLCdpcNCoaWRDl","sIziz8ko","ag8zeMe","gLe1W7iK","asRdVrBcTa","W7fQihyf","DqnIBG","WOeXWPZcTmoE","WQ7cNuZcIXm","kW7cGZKn","wsFdVIVdHG","ydzKimob","W4bZe3Gq","vHddVmkgW4W","W5vRW77dRgm","sYRdNHBdTG","dLnWW7CZ","W7rzFr41","bMpdUGG7","W4pdLCkwD20","W6rHkeZcUa","rHTpa8og","AfBcGNvR","W448rmozW78","BZ3dQ8oWlG","b8kOWRZcMmoS","w8k3W6XnAW","FbpcL1bY","nJ/cNHqM","W6HdvxdcNa","W7ZcH8o1W63cIq","xqdcNCo2iW","x1JcLmoNjW","mmowW6LxBW","WQTDtNPx","WOzLWPJcJhC","WO3cRmkSq2e","W6JcUSoPW7RcNa","W55ewNFcSq","WQNdI1JdNW0","h8kEjCkhW6m","dfTXW5m3","cW3dHCk0FG","W4rOeHyO","W7TvhW","WOaxWO7dImk1","WPP/bSouW69AA8oUsq","sxtdH8ktWO8","W6VcVCoSW7tcKa","pCo3fa","W6bEFZpdQW","W6uAW6VcQmoA","WOCAgdhdGa","jWtcIba1","tW97tCkt","WPy+uxtcTa","vmkadmk8pq","yCksW6zSyq","vt5EkCoH","hmocWRRdH0e","txBcLCksBq","cCoDWQFdOGW","ibFcHqe","zYhcLhDA","E8kxa8kbpG","ar5QgSk5","WRSuWQ3dTSkE","W6K7umoqW4W","W6ncc8oCWQq","FvBdHmkuW4a","WRhcVCkRyKy","W5VcU1CDWOa","W7fcerW","W53cQSoTW5VcTq","teVcRmkxta","W49Aj2qD","h1Sakve","WQCzsrJcRa","c8kJd8kPWPq","x8ktoCkopq","yxXQrKu","eSkuma","ACkmb8kh","W7ZdPvbXW5G","sqH/aCot","W51wdGhcRW","rSoVW6ZdH8k7WRmjW4RcSgDP","nfDoW5VdGa","rdxcQxP7","jLBcUbXp","zqhdKXJdKq","cCkJf8owWPi","A05jWOZdRq","WO7dH1JcGbG","gZRdRdFdGa","xIRdMt3dSW","lSoTWQpdMYm","h8o+WOVdIGK","W6nKcHFcGG","pxtcIWnB","a1HrW7C1","taNcGCoQkG","W7bhpbG6","ssJdKMbG","WRymmWldMG","W5q3WR7cU8ox","F0RdNb4o","W6pcNd8TWOC","uYFcHMO","W6L2eXmO","uf5OWPFcLW","WP8HWRRcSSkR","p0D+W4aL","WQWSgGZdSq","zSk6W5boDq","yYVdT8otcq","nfi7j8ka","tmkBnG/dOG","mCkCW4RdRCkZ","iqtcGW8Z","kuaAW4pcLq","W4JcUSoPW7RcUa","zdtdI8oIEG","WQhcK8ovWPDE","p8osWQRdRI0","D0/cRmkYtG","gu18W7q0","W78iWRRcNmoD","W4RdJJKvWQu","W6bAfNSp","W5CoWPBcQmoh","h2ldUIC/","DIJdHSoLpW","W60zzCoIW7K","W5ZcGdG/WPW","p1jpWOZcLq","WOymlshdTW","m2ldRseI","k3bwW5Gi","rW3cISoRmG","yLjkW57cKa","W6ZcSe08","W7rgwW7dNW","h157W7iU","W47cUu0dW5O","vGpdOXG2","BKzHWOVdJq","D1pcICkxFW","At/dGXddSq","yejJWQddPG","ottdQclcSa","E8kmaqZdPW","W7ykWORcU8oa","h0JdTa8","ldZdIcZcRa","W7iiWQ3cRSkA","uSkppstdQW","uZpdLN18","Bt3cGg/dGG","lSkPb8oKWRy","W45MwmotW7O","jXddGGzZ","BftcM3br","qdhcTxDY","kSoOeCo0WRG","ofi/la","DaXKk8oG","xaJcISkjtG","WRNdImovv2i","mSk1nmoL","yCowWQOfjq","DsPBCCkJ","WOa8WQRdQwq","aCkfW4ddJCkf","CYhcPLhdNa","W7DeBLJcHW","ymoaWQPAlW","CCk7fWZdIG","ACkFoIZdGq","WQdcS1ldMmkK","ua5slG","W4zjmNuX","p1fgW4Cy","WQldG8ovWPaj","pmk0fmo/WRO","vqlcRwrY","aeFcReP2","WORcUSkCq0u","i8klnmosW68","gSkyo8os","zLpdH8kHWRW","ssXEv8ku","Ad3dQJK","WOxcHCoyW6md","bu/cQX99","W7SFWQVcU8oa","W6ZcSaurWPq","WPSabttdLW","W4LQk8oYWQG","W6n4AGmR","W5jlnJlcVa","WRNdP37cGda","BaRcTCoIjW","W7fskmo8WP4","WQm3WORdSCku","kSkeW5ldP8kO","AWddGe5X","n8kPWRJcUCoB","g8kUWRq","urhdRKm6","iCk6W63dMmkH","ytBdTX7dHG","WQxdI8oAmMq","scVdMgldPW","a8onW6eZla","uGvhwmkc","W757D2lcLq"];return(EC=function(){return t})()}function OC(t,e){return new Promise(((i,n)=>{window.dispatchEvent(new CustomEvent(t,{bubbles:!1,detail:{resolve:i,reject:n,data:e}}))}))}!function(){function t(t,e){return jC(t-484,e)}function e(t,e,i){return jC(e- -692,i)}const i=EC();function n(t,e,i,n){return jC(i- -520,n)}for(;;)try{if(278176==parseInt(t(816,"F&gy"))/1+-parseInt(t(1732,"v%0M"))/2+parseInt(n(0,0,-24,"XSoC"))/3*(-parseInt(e(0,620,"ANXd"))/4)+-parseInt(t(1195,"fVkl"))/5+parseInt(jC(495,"eoT*"))/6+-parseInt(e(0,-173,"%Vm$"))/7*(parseInt(e(0,228,"tZY6"))/8)+parseInt(t(1046,"3R*X"))/9*(parseInt(n(0,0,-174,"QJx#"))/10))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(),function(t,e){const i="F&gy",n="M1N#",s="v%0M",r="6fah",o="%TiM",a="4y0V",l="DO4]",c="A8T9",u="QJx#",h="xQE$",d="eOpF",f="zhSe",p="F!cC",g="%Vm$",m="xy&1",y="ANXd",v="eoT*",b="VeRw",x="WeF$",w="@j1h",M="x@%H",S="ptJb",k="ptJb",_="2OwF",I="^w()",C="xy&1",L="F&gy",N="NxV5",j="gKQu",T="8xg3",z="4Qmd",A="yJ@2",P="2kRQ",D="ptJb",E="8mfN",O="yJ@2",R="(51Z",W="xy&1",B={_0x197449:656},U={_0x5ac07f:344,_0x3927aa:561,_0x58d68a:272,_0x19c1e1:229,_0x2ab608:444,_0x10218d:385,_0x173b0c:259,_0x21e8f4:543,_0x4f0945:"v%0M",_0x244dd5:222,_0x4abc0b:87,_0x2d5be1:625,_0x1b6e1c:"%Vm$",_0x425ae4:486,_0x412415:175,_0x4326dc:586,_0xaed3ed:"2kRQ",_0x2ad424:494,_0x14b0e3:306,_0x14def0:987,_0x518760:692,_0x5a1c0e:474,_0x3690c4:560,_0x2dbbf0:974,_0x45aeeb:777,_0x1edbcf:"^w()",_0x209812:458,_0x3510fe:55,_0x200978:1351,_0x2c07d3:"WeF$",_0x349a58:1143,_0x610ff5:18,_0x4637e6:405,_0x1e5b87:250,_0x171632:"eoT*"},$={_0x1890c4:831},F={_0x21599d:43,_0x4bdbdf:"V]5X",_0x5bb030:159,_0x531098:418,_0x3f56ac:753,_0x644174:616,_0x2d7da6:818,_0x40b185:752,_0x3d26bd:1109,_0x13ce8f:315,_0x35e9c8:136,_0x20db7c:90,_0x5caf63:915,_0x3148fa:"vTPK",_0x1cabf8:1100,_0x2fbe77:1305,_0xdb9557:"(51Z",_0x5d84aa:2124,_0x185b90:2389,_0x256b58:1648,_0x3f7746:1895,_0x489af9:2079,_0x187840:1850,_0x30630d:2053,_0x267030:1527,_0x4e330b:2107,_0x4964e3:938,_0x3d4ba4:29,_0x5d48da:519,_0x1a2a68:455,_0x4b661b:"%8B]",_0x3b3e3c:535,_0x2ec037:1062,_0x30375b:1210,_0x2a6509:1093,_0x5ee250:"eOpF",_0x52f2ec:754,_0x48a313:1472,_0x4f433d:583,_0x279001:"6H%8"},V={_0x37607d:30,_0x31122e:234},G={_0x5c2ed4:19,_0x214a9a:531},H={_0x58cbb8:186,_0xb5dc94:"M1N#",_0x241b49:173,_0x540441:32,_0x204690:"(51Z",_0x36631a:16,_0x287f4d:0,_0x6384e3:300,_0x1b0e1a:1082,_0x69c52b:1299,_0x59d0d1:1357,_0x2c9328:533,_0x288c84:"Y[!*",_0xe22ad3:247,_0x423101:3,_0x447b0e:379,_0x313683:108},Z={_0x53cf06:1,_0x74cbd5:494},Y={_0x4687b4:382,_0x12ea0d:15,_0x1db66b:484},Q={_0x37d76f:1553,_0x2b5746:1060,_0x27836a:"%TiM",_0x4df1bf:"WeF$",_0x1faf79:206,_0x270334:497,_0x43569f:1189,_0x21644e:531,_0x2bdbae:1134,_0x24b15f:1482,_0x566031:863,_0x1ddacb:"8mfN",_0x44b911:1108,_0x38c943:"eoT*",_0x526b56:1595,_0x43ff7d:1710,_0x3051df:1967,_0x1bbad4:"VeRw",_0x5e67f0:31,_0x1ac122:975,_0x27113a:965,_0x4355ad:988},J={_0x4e77df:179},q={_0x10482d:129,_0x2c13d3:")ShW",_0x16fc77:310,_0x2a71b5:49,_0x5269d7:423,_0x3a8b9b:653,_0xe5b122:1121,_0x31adbe:1316,_0x300ee0:1544,_0x4f07ea:"3R*X",_0x1e4ed6:1454,_0x4038ab:1120,_0x24f441:30,_0x22f295:187,_0x22ef96:183,_0x343be9:514,_0xfd7603:"9p*9",_0x582b02:1703,_0x4713c0:1657,_0x484246:1577,_0x243c6a:2112,_0x258b29:2167,_0x277416:"6fah",_0x1dc7b9:955,_0x568c25:948,_0x4152ed:1091,_0x4961b1:1326,_0x11dce0:124,_0x1c67fb:222,_0x5ddc14:179,_0x530c11:"2ZJn",_0xc5ddbf:541,_0x2534bd:220,_0x4bb594:605,_0x383689:976,_0x108aff:1497,_0x55cbb4:1134,_0x258a64:1229,_0x557d0a:"2kRQ",_0x144f56:865,_0x3e70f3:1769,_0x55ddc5:1363,_0x33630a:276,_0x48e99d:15,_0x3d8bcf:831,_0x22d038:"x@%H",_0x1f57b1:1292,_0x2a8555:"tZY6",_0x12f320:889,_0x53afc5:824,_0x21edc6:1912,_0x1e4eb2:"xQE$",_0x3abd6f:1543,_0x3856f6:1430,_0x331d83:1586,_0x2d8415:"A8T9",_0x437eac:1886,_0x19411e:2385},K={_0x29c162:23,_0xd18eae:76,_0x3a0057:1489},X={_0x16947f:324,_0x306028:1471},tt={_0x43aa37:441},et={_0x411fbc:96,_0x3ace9e:858},it={_0x257ef8:624},nt={_0x531b6f:851},st={_0x30f291:1032,_0x211d21:751,_0x37969a:1566,_0x5ab13e:"%TiM",_0x5c5ed4:1064,_0x4e8570:1223,_0x3d25e6:"xQE$",_0x1527f5:1616,_0x475965:1496,_0x1320b4:1345,_0x42be9e:846,_0x5c9255:600,_0x10f67b:"y%4F",_0x286e34:1181,_0x261e2c:1260,_0x543dbe:1646,_0x1a6578:2174,_0x3b59db:2025,_0x4439e2:"vTPK",_0x4d0978:295,_0x36fdfb:904,_0xf0adba:728,_0x339de9:827,_0x40b315:1430,_0x16a621:835,_0x3a8bfc:1074,_0x3353d3:"NxV5",_0x485eff:2066,_0x7c3164:666,_0x3d286a:960,_0xb4ec52:987,_0x36cdb9:889,_0x38e6b8:"M1N#",_0x1a6a66:842,_0x205697:436,_0x425c6c:"4y0V",_0x328735:"V]5X",_0x92ecbd:620,_0x3e8a06:1432,_0x45b081:1317,_0x53ffed:873,_0x286db1:"eOpF",_0x48ed05:"QJx#",_0x5b1f5a:1746,_0x168f35:801,_0x53fe06:"6H%8",_0x43c0e7:673,_0x34fb27:1199,_0x47ffd0:360,_0x2d708b:697,_0x2442d8:767,_0x170b0e:1914,_0xde0f67:2268,_0x213e60:2119,_0x24c264:"XSoC",_0x49406e:326,_0x46d6ee:"tZY6",_0x4144fb:423,_0x5bcc33:269,_0x333d38:1766,_0x3d9068:1944,_0x71d9e6:1141,_0x56babc:1045,_0x2c0909:"%8B]",_0x262488:2075,_0x135464:1743,_0x29b098:"6H%8",_0x54d276:1238,_0x1808d2:149,_0x583718:"eoT*",_0x2c73e6:1426,_0xfc4873:1536,_0x8cb721:1760,_0x1a16ea:322,_0xe4950a:44,_0x319bf5:1954,_0x5bfe08:1581,_0x3f1afd:1890,_0x4cd183:2244,_0x224554:2361,_0x478b82:"xy&1",_0x1efa92:1647,_0xddc992:1374,_0x4ef5f4:"%Vm$",_0x4930aa:"6fah",_0x135d07:1528,_0x422e2d:1358,_0x27f7e6:1662,_0x1408ef:1206,_0x2ff401:1568,_0x28d773:1853,_0x3d5293:"3R*X",_0x2e2f88:831,_0x147731:884,_0x5643af:530,_0x363172:808,_0x1d0791:716,_0x3a8822:"v%0M",_0x27bfdf:848,_0x349792:459,_0x2bcd30:502,_0x2417e9:1079,_0x4a394b:1350,_0x33f54d:1721,_0x3c5e7b:1915,_0x3dc769:2034,_0x97f96:"%8B]"},rt={_0x549b8d:1070,_0x19ed64:1296},ot={_0x4411ab:150,_0x237ba3:396},at={_0x4f1650:2412,_0x4493d1:"xy&1",_0x9e1d01:1763,_0xdb5c67:1656,_0x164294:"4y0V",_0x296daf:22,_0x1aa72c:118,_0x2f4d7b:226,_0x2430a6:1966,_0x1a6744:1764,_0x3e67c2:1774,_0x4d539a:654,_0x4bcaf1:1382,_0x6cddc:"V]5X",_0xa8dd02:215,_0x3924d9:"Hn96",_0x4bc27b:631,_0x56ebc8:981,_0x52ef86:1247,_0x1acae7:"v%0M",_0x151e7f:473,_0x5a4fe1:1289,_0xd2dafb:951,_0x1a9fd7:120,_0x48f662:101,_0x51ae36:1886,_0x274397:2042,_0x2ba840:1591,_0x37d256:445,_0x1b8c12:1221,_0x5f2ef8:893,_0x378b57:"8mfN",_0x17be11:"XSoC"},lt={_0x52d9a9:1004,_0x951cf1:82,_0x1e2f97:78},ct={_0x2d3162:236,_0x15c18b:237,_0x145a97:427},ut={_0x1dca88:143,_0x37f75c:333,_0x256fb1:"z2[1",_0x3b1b78:435,_0x1b7667:73,_0x16750b:235,_0x5f087a:811,_0x2e1e49:113,_0x59edfe:191,_0x1066db:172,_0x566da3:169,_0x5a0c68:536,_0x38b01c:588,_0x2674cd:218,_0x5cfe54:604,_0x4124a5:456,_0x555bdf:467,_0x2423b9:849,_0x3676f6:398,_0x449540:28,_0x289b80:471,_0x18a90d:490,_0x2785df:86,_0x6f3436:195,_0x5d926d:646,_0x579979:279,_0x11c943:"Hn96",_0x43ac88:321,_0x58a773:109,_0x37f801:486,_0x3f38c5:69,_0x599280:21,_0x459785:111,_0x5941ca:208,_0x4ec278:401,_0x117cf3:253,_0x30eaae:308,_0x2a2581:"fVkl",_0x313f27:637,_0x2f6635:261,_0x2b676c:80,_0x43fb45:"eOpF",_0x559288:512,_0x18744f:708,_0x5a544e:"yJ@2",_0x31c85e:186,_0x382fe7:352,_0x1fbe6d:"fVkl",_0x35bac6:81,_0x3fb667:401,_0x123791:"ANXd",_0xf2ab1:113,_0x2cbe74:648,_0x19f489:282,_0x436bc6:316,_0x392084:"tZY6",_0x6ff0f3:21,_0xaef443:"NxV5",_0x5f2d8e:569,_0x1eda20:291,_0x454616:"VeRw",_0x32d0db:658,_0x2cfcf1:330,_0x5cc2ec:"8xg3",_0x448e03:160,_0x44b759:"4y0V",_0x217afe:417,_0x1629cc:"DO4]",_0x3b624d:725,_0x1c77ee:643,_0x3f2814:224,_0x416a80:250,_0x4b2a72:87,_0x6ba351:455,_0x2836e2:26,_0x1b0516:897,_0x1589c6:"Y[!*",_0x171eda:963,_0x16f74e:"%Vm$",_0x4908db:562,_0x8e1fff:152,_0x140217:129,_0x2f612:39,_0x369cc3:56,_0x36f2a1:171,_0x2bdced:"vTPK",_0x5eb36d:183,_0x29c89a:10,_0x4de43a:298,_0x50b9da:102,_0x28eec6:20,_0x188763:288,_0x535568:189,_0x25a5bd:365,_0x2cee40:239,_0x23f876:664,_0x5afd58:"WeF$",_0x2fe55a:695,_0x75f18:817,_0xa03041:114,_0x4f8cc8:"%TiM",_0xed5fae:317,_0x3b6239:171,_0x1fe92c:425,_0x5d5052:14,_0x18378d:294,_0x2f5946:856,_0x4676d7:253,_0x11f4c3:299,_0x1cef3b:85},ht={_0x5e3484:24,_0x5b2840:1839},dt={_0x3517b9:145,_0x335ecf:"F&gy",_0x1af576:342,_0x33be9e:1056,_0x5b5545:607,_0x5c8af7:514,_0x4e9d30:1084,_0x30da44:"3R*X",_0x2e54a8:488,_0x4d8e9c:931,_0x32c0bf:"V]5X",_0x57e088:1069,_0x23c9a7:1186,_0x129d12:"LQsu",_0x7dda0f:1534,_0xb0bfe8:1546,_0xa494f6:219,_0x399e19:"ANXd",_0x4d05bb:116,_0x303c99:71,_0x55c0bc:395,_0x2b7e42:"F!cC",_0x4ad5a4:72,_0x590fe2:236,_0x5000bb:525,_0x5ee4fe:"%Vm$",_0x4697e0:1952,_0x524741:1659},ft={_0x5f13ff:"yJ@2",_0x5334fb:87,_0x21c56e:31,_0x5ac00a:439,_0x194bd8:307},pt={_0x288f66:351},gt={_0x3e6c55:"eoT*",_0x551fd8:1083,_0x3026ea:743,_0x2da0db:916,_0x338073:1405,_0x262d30:1641,_0xc7cb9c:"^w()",_0x3b3738:1177,_0x3d4666:1177,_0x112e4e:908,_0x8895d9:888,_0x1da27b:362,_0x4d224e:1018,_0x40fceb:1218,_0xe9cf09:760,_0x4f3e9f:700,_0x179372:"%TiM",_0x23cb3d:1524,_0x1a0e35:2057,_0x72d6c6:"eOpF",_0xdfe2d5:406,_0x50f4df:1570,_0x34844a:1791,_0x1e518e:1458,_0x4f8555:1579,_0x5928f2:397,_0x2a986a:438,_0x4395ef:"xy&1",_0x3bd806:558,_0x88cee0:449,_0x4e9bc2:1260,_0x198d05:727,_0x1c511c:1778,_0x2a57c0:"M1N#",_0x24fb22:718,_0x257af9:697,_0x4d3adb:841,_0x493b2f:159,_0x5d0d27:234,_0x330e31:210,_0xa196cd:319,_0x52cdbc:373,_0x571afb:689,_0xae5609:"6fah",_0x12e5fe:38,_0x560ce7:13,_0x5b5288:596,_0x708752:420,_0x5ca681:"V]5X",_0x256939:1406,_0x3a2b8e:1057,_0x418814:1174,_0x45acd7:1322,_0x375fe1:1201,_0xe43954:1667,_0x14b6cb:813,_0x329142:763,_0x5b9d4c:"%8B]",_0x443041:1237,_0x4cc626:547,_0x1ca400:477,_0x5e687b:379,_0x17cf09:520,_0x5151ba:254,_0x480eaf:"gKQu",_0x18f39a:1503,_0x6d225a:1519,_0x131ce7:1790,_0xbe1e46:425,_0x219b94:40,_0x353086:602,_0x21f9e:"yJ@2",_0xddfe61:301,_0x594539:")ShW",_0xa47048:430,_0x57300d:642,_0x36a5fb:704,_0x3119f2:"DO4]",_0x569ffc:770,_0x524813:"y%4F",_0x157dbc:153,_0x1f41d6:211,_0x1f156d:407,_0x128903:1001,_0x241fe2:1222,_0x45b09c:1572,_0x462a97:207,_0x3e5808:166,_0x56c15f:334,_0x5ddc2e:137,_0x22d56f:613,_0x532817:136,_0x56699a:1234,_0x263902:1315,_0xf7e015:1549,_0x20c44b:1740,_0xd9cdb0:1738,_0x3393ad:121,_0x1dd277:498,_0x29816c:808,_0x2e2dd7:1065,_0x447c94:900,_0x5d0963:219,_0x526a3c:572,_0x5196c6:272,_0xfb3f1d:"4y0V",_0x5e6046:829,_0x529e80:678,_0x487d22:1364,_0x3fec61:"2kRQ",_0x59837b:937,_0x48c4d4:827,_0x1c8205:1051,_0x266ebe:"@j1h",_0x4adc9a:1376,_0x49b387:1301},mt={_0x2c4696:1199},yt={_0x32b9b0:48,_0x182910:251,_0x19f20c:968},vt={_0x5abdb4:28},bt={_0xd87530:341,_0x3c7d6c:224},xt={_0x468dd1:1943,_0x5a2bcc:2004,_0x2420a7:"6fah",_0x63022a:1762,_0x33ec4e:786,_0x35d793:278,_0x1bd14e:466,_0x2d3f6f:"F&gy",_0x2168e5:333,_0x1230c1:"x@%H",_0x1cfeaa:1984,_0x32c8df:506,_0x3032cb:620,_0xdef6b5:414,_0x35498c:448,_0x540ed5:298,_0x52cfb8:454,_0x36d672:307,_0x114da9:"4Qmd",_0x40e29c:54,_0x4b4b1e:216,_0x4c60ce:498,_0x5d4a2d:109,_0x1be454:33,_0x94f4ef:806,_0x41d21a:366,_0x17ca96:"NxV5",_0x2e63a1:314,_0x3dd7bf:121,_0x2e9a41:"yJ@2",_0x3b8d6a:173,_0x533418:227,_0x5a837e:118,_0x5b14bc:221,_0x3e5bf1:339,_0xeb786b:306,_0x1cd899:520,_0x225d3c:0,_0x47793f:"F&gy",_0x44dee2:"2kRQ",_0x14c81d:1230,_0x1e321d:721,_0x28eb44:301,_0x55da3d:"6H%8",_0x1d1d13:846,_0x5a6903:1080,_0x35871c:978,_0x2b7681:1065,_0x4ef67f:"yJ@2",_0x4a3f03:253,_0x300a75:56,_0x3cbb39:19},wt={_0x3a21bb:357},Mt={_0x27089c:65},St={_0x50219c:223,_0x2181a1:74,_0x18c9ed:259},kt={_0x2807be:"zhSe",_0x3392e6:1052,_0x3f998a:602,_0xa29bf3:770,_0x176680:790,_0x5e1833:383,_0x1b93cc:632,_0x1aac2f:"%8B]",_0x3cf74b:248,_0x55fa1f:"2ZJn",_0x91c8c6:739,_0x3ae99b:494,_0x171d82:522,_0x1b0f88:1180,_0x352a6e:833,_0x1b8795:"tZY6",_0x13926a:374,_0x570de5:347,_0x54b117:"6fah",_0x3438ef:42,_0x3ce37a:221,_0xb9367a:208,_0x38b3b2:211,_0x4c64a9:"QJx#",_0x1776f0:460,_0x1d6975:24,_0x5ae5a1:"fVkl",_0x2bf633:1443,_0x538733:"A8T9",_0x1ca43b:1042,_0x50cc30:"F!cC",_0x202d43:1015,_0x45363a:323,_0x46354f:287,_0x189c33:"NxV5",_0x466b4d:704,_0x185aaa:398,_0x2d1cc1:741,_0x19f9aa:354,_0x107290:"%Vm$",_0x446289:258,_0x4fded3:337,_0x33c588:435,_0x317ba0:1292,_0x41eade:635,_0x59a6e1:1165,_0x3bf5f2:439,_0x4db1d7:348,_0x177596:"2ZJn",_0x59060c:745,_0x47318d:1745,_0x180a3c:"%Vm$",_0x15e27e:1668,_0x233f1a:2165,_0x3f5651:")ShW",_0x4ccbcd:1270,_0x226d27:1375,_0x32f3ee:1599,_0x2d9517:1155,_0x2e38cd:550,_0x73071c:698,_0x9aa6e3:1063,_0x17c154:860,_0x38a208:"M1N#",_0x715aa4:1810,_0x42b755:1766,_0x5e0bd8:1362,_0x3f1258:188,_0x54080a:168,_0x1319b3:754,_0x528129:"Y[!*",_0x9e8d8c:742,_0x103840:256,_0x2243bb:"^w()",_0x2a7768:259,_0x47deb7:"xy&1",_0x1bb670:"vTPK",_0x2f3694:136,_0x40676b:442,_0xf75d78:643,_0x1e21b7:563,_0x1d0ec6:284,_0x298a08:583,_0x27b2e7:233,_0x2f6d55:89,_0x3a5298:"9p*9",_0x43694f:274,_0x346309:2022,_0x13d5e2:2261,_0x39a4d6:2346,_0x44990d:1361,_0x4fae6c:382,_0x579af6:738,_0x1a37c9:148,_0x447b8e:163,_0x570c13:1681,_0x16864a:"eOpF",_0x47aa87:1272,_0x13da08:413,_0x1c7d9e:366,_0x484d77:"VeRw",_0x271770:923,_0x2cdc94:1150,_0x1585ad:928,_0x2abc0b:228,_0x552f86:149,_0x4dbed4:135,_0x55edfc:354,_0x1da438:766,_0x38fd35:1297,_0x14ed2b:"ptJb",_0x2caeca:1287,_0x8d5ca6:295,_0x147d82:166,_0x5ec732:819,_0x5cc788:438,_0x5de884:"Y[!*",_0x1e275c:936,_0x155314:394,_0xb20d27:592,_0x5ed870:84,_0x18d050:1406,_0x49e692:1384,_0x39041a:506},_t={_0x4161b9:1051},It={_0x7002da:367,_0x3bcb2e:195},Ct={_0x2910ce:147},Lt={_0x11f459:"Hn96",_0x223f76:1536,_0x32a1b9:1472,_0x8561d5:1151,_0x3055a0:"z2[1",_0x2333af:491,_0x228dbd:1025,_0x40187a:919,_0x3c5d27:1235,_0x5dc12a:743,_0x27ad74:101,_0x5f08a9:503,_0x1df0f2:"8xg3",_0x154665:432,_0x5a858e:1017,_0x209426:618,_0x36266e:"fVkl",_0x4c0c63:744,_0x3f1d4d:"A8T9",_0x2e83b3:1502,_0x26b16a:1456,_0x5602b7:1219,_0x2dc1ca:1581,_0x156990:1626,_0x2a0863:2115,_0x1a9fde:1889,_0x379f5e:881,_0x3eb446:765,_0x5dbaa3:"x@%H",_0xacd856:1959,_0x25259d:"%Vm$",_0x2c9b30:769,_0x5c1034:535,_0x5a3964:389,_0x34b000:2e3,_0x1d1a8d:1849,_0x19993f:2161,_0xa53e1d:1931,_0x12a446:"9p*9",_0x35827e:1228,_0x4ef79d:732,_0x40473c:"2kRQ",_0xae347f:1744,_0x4c3640:1466,_0x5e5b5e:1501,_0xed31:1755,_0x1f6a64:1221,_0x1c89c0:"8mfN",_0x3a03b7:1261,_0x3b1c55:938,_0x50d60a:2245,_0x2152b4:1847,_0x4d14a8:"DO4]",_0xc599f3:1010,_0x470da5:688,_0x29abe3:"8xg3",_0x5c468e:609,_0x25d224:563,_0xd34073:"4y0V",_0x37d070:"9p*9",_0x2c497c:1121,_0xb7ddb6:1718,_0x101352:"%TiM",_0x1ab32c:1337,_0x35423f:1217,_0x5c95c1:1385,_0x24dc9d:590,_0x45ae11:"2kRQ",_0x5125f2:901,_0x4b759c:545,_0x129178:489,_0x2c78ec:387,_0x47b8fe:"xQE$",_0xf6afe3:1268,_0x159181:1455,_0x2ff4de:"%8B]",_0x11e586:1160,_0x30b761:68,_0x2110c1:638,_0x372566:1503,_0x2b1ed9:1022,_0x2c045b:"Hn96",_0x5061cf:429,_0x44dc99:1050,_0x500a9b:654,_0x4e55e8:325,_0x3b853a:"bpf6",_0x12ecc6:856,_0x1d9a4d:"z2[1",_0x33a438:1082,_0x20a67e:"M1N#",_0xb2466:1376,_0x468b4e:870,_0x268510:825,_0x108da4:887,_0x4348ae:"F&gy",_0x29f198:2286,_0x4b2682:1446,_0x22c483:"(51Z",_0x9d8171:858,_0x5be573:1609,_0x174d0b:1255,_0x2d74ef:"y%4F",_0x34b597:1650,_0x2c5b24:462,_0x77300:1245,_0x16991e:1014,_0x3de788:535,_0x206dd8:907,_0x3bf3c3:94,_0x4fa219:"ptJb"},Nt={_0xb4819b:463},jt={_0x506430:394,_0x4a3d14:112},Tt={_0x144e0b:168,_0x1b7761:1454},zt={_0x42dd42:802,_0x4ccb00:302,_0x4eb103:"ptJb",_0x9f7896:1150,_0x35c51c:360,_0x496b1f:"zhSe",_0x4650a1:2112,_0x5a5443:1918,_0x4a2331:"3R*X",_0x3db853:2319,_0x1e3f0f:2489,_0x455dd0:372,_0x2afd49:296,_0x377335:98,_0x465596:1460,_0x3f459d:1272,_0x390c39:"2kRQ",_0x5446d9:1963,_0x12976d:2360,_0x127966:2477,_0x12d129:2368,_0x1a777e:2524,_0x1c43fc:2762,_0x4752a5:2783,_0x486570:805,_0x4a5630:1100,_0x2c79ca:986,_0x44fa59:"WeF$",_0x3c0b25:2462,_0x276c7d:1493,_0x33f1ab:"XSoC",_0x584a6b:1671,_0x1c6264:1485,_0x466916:1131,_0x1b36ee:954,_0x4f7595:320,_0x47b1fd:100,_0x13c37c:110,_0xdfe1b0:1330,_0x437a7f:1597,_0x721f4f:"6H%8",_0x36811d:1367,_0x471a13:815,_0x38e962:295,_0x4205df:459,_0x3eb294:968,_0x1d1b22:433,_0x31a500:159,_0x5df670:92,_0x2c122e:636,_0x2a8bd9:366,_0x57843c:537,_0x5a834d:504,_0x42288f:505,_0xf901f9:934,_0x2af065:"yJ@2",_0x1204ac:1254,_0x3fa859:"y%4F",_0x1b96b1:2010,_0xd39d61:1216,_0x2dc898:"tZY6",_0xa4d314:1209,_0x118eb6:1555,_0x2c8e35:1423,_0xaeaa63:1096,_0x2766b1:831,_0x95b30b:1219,_0x313743:684,_0x32e936:614,_0x161713:364},At={_0x5dd541:654},Pt="V]5X",Dt="z2[1",Et="%8B]",Ot={_0x923f52:"x@%H",_0xa3f925:422,_0x1dd1d0:1668,_0x123623:1665,_0x15ab75:2071,_0x19d60d:1507,_0x3b8ddb:1050,_0x13c20a:"%TiM",_0x56f5d3:1144,_0xce7072:1417,_0x4f4829:36},Rt={_0x1162f9:137},Wt={_0x50c5e8:"QJx#",_0x23007f:220,_0x1f3f4c:1359,_0x250c1f:1964,_0x45ae4b:"6fah",_0x59ff5d:1338,_0x4651f4:1128,_0x429dab:841,_0x1b0ff7:1629,_0x1224bc:"Hn96",_0xe61e4c:531,_0x417ff9:190,_0x18b9c3:101,_0x35aebf:1031,_0x56a1ed:925,_0x22024:1216,_0x1933aa:"4Qmd",_0x29bbb4:1078,_0x2e9ca5:627},Bt={_0x473dfb:451,_0x33faad:407,_0x2a090c:509},Ut={_0x4ed933:254,_0x111f57:208,_0x386d6c:207,_0x3043fa:1121},$t={_0x2dabd8:148},Ft={_0x2a140e:1081,_0x4ad541:1475,_0x18ae46:"gKQu",_0x31bff1:1540,_0xc0c5c:1546,_0x365620:"ANXd",_0x33e27d:1685,_0x1805fc:1687,_0x43f8bd:1174,_0x435a91:"ANXd",_0x38a80f:1473,_0x3104cb:1096,_0x402993:708,_0x5e6005:1647,_0xde3bf7:1507,_0x505c78:1654,_0x4d4651:")ShW",_0x42afec:1107,_0x2a00fb:1594,_0x2a96dc:"ptJb",_0x5d28b6:209,_0x463c6f:560,_0x34a51f:1607,_0x3a369f:1822,_0x2cba59:1173,_0x531055:1652,_0x3699f4:1083,_0x163d5b:1067,_0x781b3c:2228,_0x2718ca:1838,_0x2337dd:2314,_0x1c51eb:1891,_0xc0f83d:401,_0x3582cf:"2OwF",_0x5aef69:424,_0x208ffc:447},Vt={_0x2145df:11,_0xfae278:387},Gt="Hn96",Ht={bJKse:function(t,e){return t-e},tBBqV:function(t,e){return t!==e},cVjzf:ze(i,0,0,0,1343),tHToE:ze(n,0,0,0,1159)+Pe(92,0,s),vHzqp:ze(r,0,0,0,1255)+te(0,0,o,0,-601)+te(0,0,"DO4]",0,392),wtAVZ:te(0,0,a,0,133)+"t",YCVZG:Pe(338,0,"vTPK"),wICch:pe("8xg3",0,0,0,1529)+te(0,0,"eoT*",0,280),ATLqg:ze("x@%H",0,0,0,1156)+te(0,0,l,0,30)+"te",OcXrs:te(0,0,"ptJb",0,-136),gxnvm:te(0,0,"6H%8",0,-410)+te(0,0,"9p*9",0,293)+te(0,0,")ShW",0,-347)+_e(0,0,1954,0,"WeF$")+te(0,0,c,0,-113)+te(0,0,"A8T9",0,-323)+Pe(462,0,"DO4]")+te(0,0,i,0,-460)+Pe(-150,0,"2ZJn")+_e(0,0,2143,0,"(51Z")+te(0,0,"vTPK",0,-436)+Pe(-251,0,"8xg3")+ze("gKQu",0,0,0,1503)+pe(u,0,0,0,1978)+te(0,0,h,0,412)+_e(0,0,1432,0,d),bGUaU:pe("3R*X",0,0,0,2067),GTCjT:pe(f,0,0,0,1495)+ze(o,0,0,0,2022)+"d",cMCQK:Pe(527,0,d)+pe(p,0,0,0,1820)+pe("%TiM",0,0,0,1473),xrBMY:_e(0,0,1738,0,g)+"o",bSpGd:Pe(-232,0,"8xg3")+"e",dBBLu:pe(m,0,0,0,1880)+"y",TkFrm:te(0,0,y,0,-526)+"e",IVKuQ:function(t,e){return t===e},HAwEf:ze("asOf",0,0,0,1404),FTjku:pe("xQE$",0,0,0,1451),fPAFi:function(t,e){return t<e},SgHFd:te(0,0,v,0,43),EpiBn:function(t,e){return t(e)},pMwTK:pe("zhSe",0,0,0,1480),VlxKd:function(t,e){return t(e)},CgEHb:te(0,0,"z2[1",0,373)+pe("DO4]",0,0,0,1720)+Pe(558,0,u)+ze("asOf",0,0,0,2024),aVlIk:function(t,e){return t!==e},dJFJW:Pe(-305,0,"V]5X"),xHbZO:pe("VeRw",0,0,0,1907),lMZqA:Pe(-240,0,"A8T9"),CuFIp:function(t){return t()},Norxs:function(t){return t()},banWP:function(t){return t()},aRiVc:function(t,e,i,n,s){return t(e,i,n,s)},YUNAn:function(t,e){return t!==e},joIyQ:Pe(88,0,b),CugOE:_e(0,0,1620,0,a),WNKTw:ze("F&gy",0,0,0,1538)+_e(0,0,1335,0,"V]5X")+"re",VYugQ:pe(a,0,0,0,1267)+"ss",YTGif:function(t,e){return t(e)},GAHlx:Pe(-104,0,c)+_e(0,0,1512,0,"4y0V"),ItcOH:ze("M1N#",0,0,0,1778)+Pe(-349,0,"fVkl"),CjzYq:te(0,0,"ANXd",0,-11),xIbbh:pe("asOf",0,0,0,1588)+_e(0,0,1281,0,"V]5X")+_e(0,0,1852,0,"2OwF")+pe("%Vm$",0,0,0,1461)+pe(")ShW",0,0,0,1533)+"p",CMVRw:_e(0,0,2021,0,"4y0V"),KDGyh:function(t,e){return t*e},cQXie:function(t,e){return t+e},NmtSu:te(0,0,"VeRw",0,421),EvYgj:function(t,e){return t(e)},aHbMl:function(t,e){return t===e},XMHpN:Pe(534,0,h),Xpdvj:_e(0,0,1861,0,x),kuRIw:Pe(168,0,w)+te(0,0,"WeF$",0,278)+te(0,0,"2ZJn",0,6)+ze(x,0,0,0,1930)+"d",ZZflh:function(t,e){return t(e)},ziSOL:function(t,e){return t(e)},IKYYH:function(t,e,i,n){return t(e,i,n)},YrCWc:pe("asOf",0,0,0,2127),rLvtr:pe("VeRw",0,0,0,2252),tYxwc:function(t,e,i){return t(e,i)},ZBIEW:function(t,e){return t===e},iFVwv:Pe(314,0,"6H%8"),GTDzQ:te(0,0,"6fah",0,364),UNTDm:pe("ptJb",0,0,0,2088),IJrna:pe(M,0,0,0,1662),pFiIS:_e(0,0,2162,0,"WeF$"),RaYZq:function(t,e){return t>e},FZkrB:_e(0,0,1992,0,"y%4F"),zdoSA:function(t,e){return t(e)},PBAQb:Pe(425,0,s)+ze(i,0,0,0,1873)+Pe(1,0,"4y0V"),tOgFh:function(t,e){return t(e)},GQWUQ:function(t,e){return t!==e},OAOgG:ze("tZY6",0,0,0,1912),wpcsU:function(t,e){return t(e)},QMwop:function(t,e){return t!==e},bqXBS:pe(S,0,0,0,1442),NzxMK:function(t,e){return t===e},KgRMz:te(0,0,g,0,-544),BNerM:_e(0,0,1651,0,w),mxbaH:function(t,e){return t(e)},jvsIL:pe(k,0,0,0,2007),Prscc:te(0,0,"LQsu",0,-512),ftHMC:te(0,0,"DO4]",0,150),BrLaH:function(t,e){return t!==e},RfGga:function(t,e){return t!==e},pIyiU:te(0,0,"WeF$",0,-277),ovgTA:Pe(-49,0,"XSoC"),lWMuv:function(t,e){return t(e)},KiwVw:function(t,e){return t(e)},UgRau:te(0,0,"LQsu",0,22)+_e(0,0,1530,0,"2ZJn")+_e(0,0,1298,0,"%8B]")+"_5",bDsXl:_e(0,0,1692,0,"bpf6")+"56",qNWhx:_e(0,0,2126,0,"V]5X"),RnSQY:function(t,e){return t%e},CGlAR:function(t,e){return t<<e},oxrYL:function(t,e){return t+e},WdVaI:function(t,e){return t*e},ungEj:te(0,0,"v%0M",0,181),uibXA:function(t,e){return t+e},fQulL:function(t,e){return t!==e},tfurn:pe(i,0,0,0,1299),nhgKF:_e(0,0,1706,0,"8mfN"),ymCfr:function(t,e){return t(e)},kRvQV:Pe(-23,0,"z2[1"),UUHUp:function(t,e){return t<e},MekEn:function(t,e){return t===e},rIotg:pe("A8T9",0,0,0,1793),bUTIh:function(t,e){return t>=e},eZrGj:function(t,e){return t-e},qHNQz:_e(0,0,1411,0,"fVkl"),ySXAR:ze(_,0,0,0,1550),uoIIf:function(t,e){return t(e)},rNUJd:function(t,e,i){return t(e,i)},SEzrJ:te(0,0,I,0,24)+pe("6fah",0,0,0,1456)+Pe(-328,0,"Y[!*")+pe(C,0,0,0,2190)+_e(0,0,1737,0,"zhSe")+Pe(-317,0,"eoT*")+"te",dnRsp:function(t,e){return t===e},BkKKv:te(0,0,L,0,204),GgpoM:te(0,0,"Y[!*",0,283),yBeEs:function(t,e){return t(e)},aFqFM:function(t,e){return t(e)},uyYjM:function(t,e,i){return t(e,i)},PsaKo:function(t,e,i){return t(e,i)},FxRJv:function(t,e,i){return t(e,i)},rDrWx:function(t){return t()},uVPrx:function(t,e){return t===e},Rfbfy:ze("4y0V",0,0,0,1525),KEpgx:function(t){return t()},PKKYr:ze("%8B]",0,0,0,1244),ZkRoi:function(t,e){return t!==e},LIreJ:Pe(77,0,"xQE$"),QvGHO:ze("^w()",0,0,0,1636),CuaOR:function(t,e,i,n,s){return t(e,i,n,s)},JuXoP:ze("xQE$",0,0,0,1137),yIHUu:ze("VeRw",0,0,0,2010),FDpmr:function(t,e){return t!==e},uPUwD:Pe(239,0,"y%4F"),COkSN:function(t,e){return t!==e},OMvgg:ze("v%0M",0,0,0,1565),eEzjK:ze("fVkl",0,0,0,1516),XEoRM:_e(0,0,2180,0,"@j1h"),VNQOS:ze(N,0,0,0,1757),LZpac:function(t,e){return t(e)},mMGWm:pe(x,0,0,0,1487)+Pe(-83,0,"DO4]")+te(0,0,"F&gy",0,-156)+Pe(487,0,"6H%8"),UaaVP:function(t){return t()},gEIof:function(t,e){return t(e)},ajoKm:function(t){return t()},kvMgA:function(t,e){return t===e},wzjUZ:function(t,e){return t(e)},hXBhH:function(t,e){return t(e)},tHpJv:function(t,e,i,n){return t(e,i,n)},MOfWo:function(t,e){return t>=e},GHntN:function(t){return t()},TrJjQ:function(t,e,i){return t(e,i)},baDtB:function(t,e){return t===e},iGJeU:function(t,e,i){return t(e,i)},gwjqU:function(t,e){return t==e},ljsER:function(t,e){return t(e)},ShLbs:function(t,e,i){return t(e,i)},rGqZb:function(t){return t()},PuAcB:function(t,e){return t&&e},Otiek:function(t,e){return t(e)},mXunp:function(t){return t()},nvknq:ze("6fah",0,0,0,1743)+te(0,0,"8xg3",0,-432)+te(0,0,"3R*X",0,193)+ze(j,0,0,0,1291)+ze(")ShW",0,0,0,1301)+_e(0,0,1353,0,"asOf"),DIVGk:function(t,e){return t(e)},CfgXG:function(t,e){return t(e)},IUoNM:function(t,e){return t(e)},CypYJ:function(t){return t()},wlyml:function(t,e){return t===e},INyJN:function(t){return t()},zzuif:function(t,e){return t(e)},utkIY:function(t,e){return t(e)},poruh:function(t,e,i){return t(e,i)},yXSkM:_e(0,0,1891,0,"%Vm$")+te(0,0,"ptJb",0,265)+Pe(31,0,"6fah")+Pe(-73,0,"yJ@2")+ze("%8B]",0,0,0,1938)+te(0,0,I,0,-102),FUOGn:function(t){return t()},ZAFgN:function(t,e,i){return t(e,i)},SNGxf:function(t){return t()},QiSeH:function(t,e){return t(e)},zFdnZ:function(t,e){return t(e)},RxkVd:function(t,e){return t(e)},YHeTJ:function(t){return t()},IACmo:te(0,0,"WeF$",0,305)+"t",nZkxH:te(0,0,b,0,-49)+"e",Kjuqr:Pe(325,0,"3R*X")+_e(0,0,1983,0,T)+"to",QLYlK:_e(0,0,1548,0,M)+pe("6H%8",0,0,0,2173),KylrQ:function(t,e){return t*e},qSVla:function(t,e){return t*e},DNyYe:function(t,e){return t*e},bMqvc:_e(0,0,2036,0,"%TiM")+te(0,0,j,0,-551)+_e(0,0,2206,0,"6fah")+"l",blDyw:te(0,0,"M1N#",0,-240)+_e(0,0,1272,0,"Y[!*")+Pe(-186,0,p)+te(0,0,"4y0V",0,-163)+ze("2OwF",0,0,0,1371)+te(0,0,"v%0M",0,405)+pe("yJ@2",0,0,0,1643)+Pe(438,0,"4y0V")+pe(_,0,0,0,2089)+ze("Y[!*",0,0,0,1083)+pe("WeF$",0,0,0,2035)+_e(0,0,1783,0,"ANXd")+te(0,0,"XSoC",0,3)+_e(0,0,1514,0,I)+Pe(-227,0,"v%0M")+pe(r,0,0,0,1326)+ze("vTPK",0,0,0,2016)+_e(0,0,1920,0,v)+Pe(49,0,"v%0M")+ze("8mfN",0,0,0,1555)+ze(b,0,0,0,1559)+ze(T,0,0,0,1304)+Pe(208,0,"bpf6")+_e(0,0,1262,0,"x@%H")+ze("VeRw",0,0,0,1009)+Pe(-144,0,"2ZJn")+te(0,0,"6H%8",0,160)+Pe(659,0,"zhSe")+Pe(440,0,z)+ze(k,0,0,0,2042)+Pe(109,0,"V]5X")+pe("^w()",0,0,0,1827)+te(0,0,"8xg3",0,-363)+_e(0,0,1525,0,"%Vm$")+ze("WeF$",0,0,0,1095)+Pe(375,0,"ptJb")+Pe(-247,0,"%8B]")+_e(0,0,1234,0,"ANXd")+ze("XSoC",0,0,0,1989)+Pe(-313,0,"F&gy")+pe("^w()",0,0,0,1316)+ze("fVkl",0,0,0,1810)+te(0,0,"asOf",0,291)+te(0,0,N,0,-361)+_e(0,0,1571,0,"F&gy")+Pe(504,0,"x@%H")+pe("v%0M",0,0,0,1826)+ze("yJ@2",0,0,0,1658)+ze("vTPK",0,0,0,1108)+ze("%TiM",0,0,0,1316)+pe(A,0,0,0,1929)+_e(0,0,2110,0,P)+ze("9p*9",0,0,0,1733)+te(0,0,"bpf6",0,230)+ze(y,0,0,0,1510)+pe("z2[1",0,0,0,1905)+pe("NxV5",0,0,0,1691)+Pe(579,0,p)+te(0,0,"%Vm$",0,-515)+te(0,0,"V]5X",0,227)+pe("2OwF",0,0,0,1842)+te(0,0,"ptJb",0,-212)+Pe(-208,0,"v%0M")+ze("4Qmd",0,0,0,1584)+Pe(155,0,"8mfN")+te(0,0,"eOpF",0,-322)+pe("9p*9",0,0,0,1591)+ze("VeRw",0,0,0,1771)+ze("4Qmd",0,0,0,1917)+Pe(-132,0,u)+pe("9p*9",0,0,0,2258)+Pe(-194,0,"M1N#")+_e(0,0,2120,0,D)+_e(0,0,2135,0,"x@%H")+pe(S,0,0,0,1795)+_e(0,0,1585,0,"asOf")+te(0,0,E,0,383)+_e(0,0,2009,0,"6H%8")+"AB",FWSTt:pe("xQE$",0,0,0,2271)+ze("3R*X",0,0,0,1023)+pe("tZY6",0,0,0,2083),yZrUr:ze("Y[!*",0,0,0,1141)+_e(0,0,1383,0,L)+te(0,0,"xQE$",0,-590)+_e(0,0,1323,0,"M1N#")+_e(0,0,1201,0,"XSoC")+ze("asOf",0,0,0,1051)+Pe(634,0,"v%0M")+ze("8xg3",0,0,0,1955)+te(0,0,"6H%8",0,-188)+ze("2kRQ",0,0,0,1227),wLSVp:Pe(311,0,"fVkl")+Pe(-38,0,z)+pe(P,0,0,0,1833)+_e(0,0,2204,0,E)+_e(0,0,1578,0,A)+_e(0,0,2048,0,"LQsu")+pe("4y0V",0,0,0,1889)+_e(0,0,1699,0,a)+te(0,0,"8xg3",0,-593)+te(0,0,"Y[!*",0,450),QSmDq:te(0,0,"NxV5",0,-321)+ze("8xg3",0,0,0,1226)+Pe(177,0,"A8T9")+ze("ANXd",0,0,0,1483)+_e(0,0,1387,0,"%8B]")+Pe(394,0,"zhSe")+Pe(-367,0,"Hn96")+pe("8xg3",0,0,0,1725)+_e(0,0,1533,0,A)+pe("4y0V",0,0,0,1943),QuSiN:pe("V]5X",0,0,0,1586)+ze("VeRw",0,0,0,2047)+_e(0,0,1414,0,"4y0V")+te(0,0,"3R*X",0,-539)+Pe(-395,0,"3R*X")+pe("9p*9",0,0,0,2219)+Pe(655,0,"Y[!*")+pe("F!cC",0,0,0,2094)+pe(I,0,0,0,1959)+pe(D,0,0,0,1766),FOCNI:pe(")ShW",0,0,0,1424)+_e(0,0,1467,0,"xy&1")+ze("bpf6",0,0,0,1487)+ze(S,0,0,0,1174)+te(0,0,"^w()",0,39)+_e(0,0,1622,0,"eOpF")+pe("eOpF",0,0,0,1900)+pe("^w()",0,0,0,1857)+ze(l,0,0,0,1748)+pe(")ShW",0,0,0,2072)};t[Ht[ze("%TiM",0,0,0,1415)]][Ht[Pe(593,0,"Y[!*")]](t[Ht[Pe(509,0,"QJx#")]][Ht[pe("8mfN",0,0,0,1728)]]);let Zt=0;const Yt="sn",Qt="ld",Jt="lr",qt="lk",Kt=Ht[pe("xQE$",0,0,0,2141)](Ht[Pe(331,0,"F&gy")](12,3600),1e3),Xt=Ht[ze("%Vm$",0,0,0,1387)](14,Ht[te(0,0,"v%0M",0,-595)](Ht[te(0,0,"2kRQ",0,-95)](24,3600),1e3));function te(t,e,i,n,s){return jC(s- -930,i)}const ee=t=>JSON[_e(0,0,1222,0,"2ZJn")+pe("xQE$",0,0,0,1530)](t),ie=t=>JSON[Pe(603,0,"V]5X")](t);let ne=0;const se=new(t[Ht[_e(0,0,1318,0,C)]])(Ht[pe("ptJb",0,0,0,2125)]),re=Ht[_e(0,0,1912,0,"F!cC")],oe=t[Ht[pe("eoT*",0,0,0,2183)]][Ht[_e(0,0,1818,0,"9p*9")]](new Uint16Array(1))[0],ae=Ht[_e(0,0,1958,0,"vTPK")]((function(){function e(t,e,i,n){return pe(n,0,0,0,t- -371)}function i(t,e){return ze(e,0,0,0,t-133)}function n(t,e,i){return te(0,0,t,0,i-629)}function s(t,e,i,n){return te(0,0,t,0,n-760)}function r(t,e,i,n){return _e(0,0,n- -1380,0,i)}if(Ht[i(1312,"v%0M")](Ht[i(2141,"9p*9")],Ht[i(1808,"xy&1")]))return _0xdad662[i(1705,"xQE$")](Ht[i(1839,Gt)](_0x417901[e(1308,0,0,"M1N#")+"m"](),_0x2c5df6[n("V]5X",0,662)+"m"]()));{const o=t[Ht[r(0,0,")ShW",268)]][Ht[s("F&gy",0,0,694)]](Ht[i(1958,"NxV5")]);o[Ht[n("yJ@2",0,249)]]=Ht[e(1443,0,0,"3R*X")],o[Ht[i(2183,"%8B]")]](Ht[s("vTPK",0,0,566)],Ht[s("@j1h",0,0,244)]),t[Ht[s("M1N#",0,0,360)]][Ht[r(0,0,"%TiM",565)]][Ht[r(0,0,"4Qmd",463)]](o);const a=o[Ht[n("DO4]",0,882)]][Ht[i(1387,"xQE$")]][Ht[n("LQsu",0,992)]][Ht[e(1054,0,0,"XSoC")]];return o[Ht[r(0,0,Gt,608)]](),a}}));function le(e){function i(t,e,i,n){return _e(0,0,e- -199,0,n)}function n(t,e,i,n,s){return _e(0,0,s- -1796,0,e)}function s(t,e,i,n,s){return ze(s,Vt._0x2145df,Vt._0xfae278,0,n- -401)}if(Ht[s(0,Ft._0x2a140e,0,Ft._0x4ad541,Ft._0x18ae46)](Ht[s(0,0,Ft._0x31bff1,Ft._0xc0c5c,"gKQu")],Ht[(r=Ft._0x365620,Ft._0x33e27d,ze(r,0,0,0,1397))]))return!1;{const r=t[i(Ft._0x1805fc,Ft._0x43f8bd,0,Ft._0x435a91)](e),o=new Uint8Array(r[i(0,Ft._0x3104cb,Ft._0x402993,"ANXd")+"h"]);for(let t=0;Ht[s(Ft._0x5e6005,Ft._0xde3bf7,0,Ft._0x505c78,Ft._0x4d4651)](t,r[i(0,Ft._0x42afec,Ft._0x2a00fb,"8mfN")+"h"]);t++){if(Ht[n(0,Ft._0x2a96dc,0,Ft._0x5d28b6,-Ft._0x463c6f)](Ht[s(Ft._0x34a51f,0,Ft._0x3a369f,1304,"2kRQ")],Ht[i(0,Ft._0x2cba59,Ft._0x531055,"Hn96")]))return!1;o[t]=r[i(Ft._0x3699f4,1278,Ft._0x163d5b,"8mfN")+i(Ft._0x781b3c,Ft._0x2718ca,Ft._0x2337dd,"%Vm$")](t)}return o[n(Ft._0xc0f83d,Ft._0x3582cf,Ft._0x5aef69,Ft._0x208ffc,334)+"r"]}var r}function ce(){function e(t,e){return _e(0,$t._0x2dabd8,e- -1416,0,t)}function i(t,e,i){return pe(i,Ut._0x4ed933,Ut._0x111f57,Ut._0x386d6c,e- -Ut._0x3043fa)}function n(t,e,i){return pe(t,0,Bt._0x473dfb,Bt._0x33faad,i- -Bt._0x2a090c)}function s(t,e,i,n,s){return ze(s,0,0,0,e-263)}return Ht[e(Wt._0x50c5e8,71)](Ht[e("WeF$",Wt._0x23007f)],Ht[s(0,1493,Wt._0x1f3f4c,0,"6H%8")])?Ht[s(0,1901,0,Wt._0x250c1f,Wt._0x50c5e8)](_0x49a367,_0x3148e7):"_"+t[n(Wt._0x45ae4b,Wt._0x59ff5d,Wt._0x4651f4,Wt._0x429dab)+"o"][e(Wt._0x1224bc,Wt._0xe61e4c)+i(0,Wt._0x417ff9,"z2[1")]()[i(Wt._0x35aebf,Wt._0x56a1ed,"ANXd")]("-")[n(Wt._0x1933aa,0,Wt._0x29bbb4)]("")}function ue(...t){function e(t,e,i){return ze(e,0,0,Rt._0x1162f9,i- -787)}function i(t,e,i){return Pe(t-1266,0,i)}return Ht[("F!cC",ze("F!cC",0,0,0,1034))](Ht[e(0,Ot._0x923f52,Ot._0xa3f925)],Ht[i(Ot._0x1dd1d0,Ot._0x123623,"gKQu")])?new Function(...t):Ht[i(Ot._0x19d60d,Ot._0x3b8ddb,Ot._0x13c20a)](_0x27df48,Ht[e(0,"ptJb",445,Ot._0x4f4829)])}function he(){function t(t,e,i,n){return te(0,0,n,0,t-1171)}function e(t,e,i,n){return _e(0,0,i- -1304,0,n)}function i(t,e){return pe(t,0,0,0,e- -676)}function n(t,e,i){return _e(0,0,t-142,0,i)}function s(t,e,i,n){return te(0,0,t,0,n-881)}if(Ht[n(1528,0,"LQsu")](Ht[t(712,0,0,"4y0V")],Ht[n(2078,0,"Hn96")])){const r=Ht[i("Hn96",660)](ce),o=Ht[n(1618,0,"2kRQ")](ce),a=Ht[t(709,0,0,"asOf")](ce),l=n(2228,0,"WeF$")+s("ptJb",0,0,949)+e(0,0,319,Pt)+s("XSoC",0,0,1098)+"y("+r+","+o+(n(1521,0,"fVkl")+n(1780,0,"y%4F")+s("8xg3",0,0,1237)+n(1451,0,"DO4]")+e(0,0,765,"XSoC")+i("(51Z",551)+s(Dt,0,0,1133)+e(0,0,175,"vTPK")+i("XSoC",813)+n(1710,0,"@j1h")+s("asOf",0,0,1238)+n(1684,0,"8mfN")+n(1429,0,Pt)+e(0,0,-61,"tZY6")+e(0,0,792,"y%4F")+t(1074,0,0,"F!cC")+i("x@%H",1196)+i("2ZJn",1280)+e(0,0,-115,"tZY6")+e(0,0,78,"ANXd")+s("%8B]",0,0,658)+n(2244,0,"9p*9")+e(0,0,217,"@j1h")+n(1578,0,Et)+t(1514,0,0,Dt)+s("vTPK",0,0,930)+e(0,0,138,Et))+a+(s("bpf6",0,0,545)+n(1718,0,"9p*9"));return Ht[e(0,0,53,"%Vm$")](ue,r,o,a,l)}return null}function de(t){function e(t,e,i){return pe(e,0,0,0,i- -1202)}function i(t,e,i){return Pe(i-361,0,t)}const n={iUPbC:function(t,e){return Ht[jC(1027,"eOpF")](t,e)}};function s(t,e,i,n){return _e(0,0,t- -98,0,n)}return Ht[i("XSoC",0,337)](Ht[s(1475,0,0,"A8T9")],Ht[e(0,"2OwF",58)])?n[s(1723,0,0,"zhSe")](_0x4efb54,_0x438da0):[t[i("8xg3",0,98)+e(0,"4y0V",987)],t[i("2ZJn",0,475)],t[("V]5X",pe("V]5X",0,0,0,1312)+i("y%4F",0,456))],Ht[_e(0,0,2190,0,"F&gy")](t[e(0,"tZY6",957)+e(0,"2kRQ",56)],null),t[s(1455,0,0,"A8T9")]]}async function fe(){function e(t,e,i,n,s){return te(0,0,s,0,n-1455)}function i(t,e,i,n,s){return Pe(s-1708,0,i)}function n(t,e,i,n,s){return te(0,0,s,0,n-699)}function s(t,e,i,n){return Pe(i-At._0x5dd541,0,n)}function r(t,e,i,n){return pe(e,0,0,0,n- -1711)}if(Ht[s(zt._0x42dd42,0,zt._0x4ccb00,zt._0x4eb103)](Ht[n(zt._0x9f7896,0,zt._0x35c51c,840,"%TiM")],Ht[i(0,0,zt._0x496b1f,zt._0x4650a1,zt._0x5a5443)]))return!1;{const o=await t[i(0,0,zt._0x4a2331,zt._0x3db853,2317)+i(0,zt._0x1e3f0f,"2kRQ",0,2279)][r(zt._0x455dd0,"2ZJn",zt._0x2afd49,-zt._0x377335)+e(zt._0x465596,zt._0x3f459d,0,1283,zt._0x390c39)+i(0,zt._0x5446d9,"8mfN",zt._0x12976d,2303)][i(zt._0x127966,0,"F&gy",zt._0x12d129,2285)+i(zt._0x1a777e,zt._0x1c43fc,"WeF$",zt._0x4752a5,2315)+e(zt._0x486570,zt._0x4a5630,0,zt._0x2c79ca,zt._0x44fa59)+i(zt._0x3c0b25,zt._0x276c7d,zt._0x33f1ab,zt._0x584a6b,1999)]([Ht[i(zt._0x1c6264,0,"VeRw",zt._0x466916,1327)],Ht[s(0,0,zt._0x1b36ee,"M1N#")]]),a=o[n(zt._0x4f7595,zt._0x47b1fd,0,zt._0x13c37c,"xy&1")+"s"][i(zt._0xdfe1b0,zt._0x437a7f,zt._0x721f4f,zt._0x36811d,1550)+"r"]((t=>!t[n(0,0,0,133,"eOpF")][r(0,"A8T9",0,-160)+r(0,"asOf",0,-273)+"e"]()[i(0,0,"XSoC",0,1590)+e(0,0,0,885,"A8T9")](e(0,0,0,965,"^w()"))&&t[r(0,"zhSe",0,-274)]!==i(0,0,"8xg3",0,1898)+i(0,0,"ptJb",0,1754)));return{serial:await Ht[n(0,zt._0x471a13,0,zt._0x38e962,"6fah")](Ne,Yt),app:Ht[s(zt._0x4205df,zt._0x3eb294,zt._0x1d1b22,"DO4]")],browser:a[s(zt._0x5df670,zt._0x2c122e,zt._0x2a8bd9,"NxV5")+"h"]?a[0][i(0,0,"ptJb",0,1989)]:Ht[n(zt._0x5a834d,0,zt._0x42288f,zt._0xf901f9,zt._0x2af065)],platform:o[s(zt._0x1204ac,0,1006,zt._0x3fa859)+e(zt._0x1b96b1,zt._0xd39d61,0,1567,zt._0x2dc898)],architecture:o[e(zt._0xa4d314,zt._0x118eb6,0,zt._0x2c8e35,"xQE$")+e(0,zt._0xaeaa63,zt._0x2766b1,zt._0x95b30b,"NxV5")+"re"],bitness:o[r(zt._0x313743,"2ZJn",zt._0x32e936,-zt._0x161713)+"ss"]}}}function pe(t,e,i,n,s){return jC(s-883,t)}async function ge(e,i,n=5){function s(t,e,i,n,s){return _e(0,Tt._0x144e0b,s- -Tt._0x1b7761,0,n)}function r(t,e){return ze(t,0,jt._0x506430,jt._0x4a3d14,e-339)}function o(t,e){return _e(0,0,t- -548,Nt._0xb4819b,e)}function a(t,e){return te(0,0,t,0,e-943)}function l(t,e,i){return ze(t,0,0,0,i- -114)}if(!Ht[s(0,0,0,Lt._0x11f459,-264)](Ht[s(0,0,0,"^w()",518)],Ht[r("F&gy",2092)]))return null;{const c=Ht[r("vTPK",1847,Lt._0x223f76)];try{if(Ht[r("VeRw",1407,Lt._0x32a1b9,Lt._0x8561d5)](Ht[a(Lt._0x3055a0,Lt._0x2333af,Lt._0x228dbd,Lt._0x40187a)],Ht[a("(51Z",Lt._0x3c5d27,Lt._0x5dc12a)])){const t=_0x424538[Ht[s(Lt._0x27ad74,0,Lt._0x5f08a9,Lt._0x1df0f2,Lt._0x154665)]][Ht[s(Lt._0x5a858e,Lt._0x209426,0,Lt._0x36266e,Lt._0x4c0c63)]](Ht[r("x@%H",2168)]);t[Ht[o(1664,Lt._0x3f1d4d,Lt._0x2e83b3,Lt._0x26b16a,Lt._0x5602b7)]]=Ht[o(Lt._0x2dc1ca,"@j1h",Lt._0x156990,Lt._0x2a0863,Lt._0x1a9fde)],t[Ht[a("y%4F",897,Lt._0x379f5e,Lt._0x3eb446)]](Ht[r(Lt._0x5dbaa3,Lt._0xacd856)],Ht[a(Lt._0x25259d,Lt._0x2c9b30,Lt._0x5c1034,Lt._0x5a3964)]),_0x3e1697[Ht[r("2kRQ",Lt._0x34b000,Lt._0x1d1a8d,Lt._0x19993f,Lt._0xa53e1d)]][Ht[l(Lt._0x12a446,Lt._0x35827e,1030,Lt._0x4ef79d)]][Ht[r(Lt._0x40473c,Lt._0xae347f,Lt._0x4c3640)]](t);const e=t[Ht[o(Lt._0x5e5b5e,"A8T9",Lt._0xed31)]][Ht[o(Lt._0x1f6a64,Lt._0x1c89c0,Lt._0x3a03b7,Lt._0x3b1c55)]][Ht[r("4Qmd",Lt._0x50d60a,Lt._0x2152b4)]][Ht[o(1537,Lt._0x4d14a8,Lt._0xc599f3)]];return t[Ht[a("8mfN",1179,Lt._0x470da5)]](),e}{const o=new AbortController,u=t[a(Lt._0x29abe3,679,Lt._0x5c468e)+s(Lt._0x25d224,0,0,Lt._0xd34073,693)]((()=>o[s(0,0,0,"vTPK",456)]()),Ht[l(Lt._0x37d070,0,1351,Lt._0x2c497c,Lt._0xb7ddb6)](n,1e3)),h=await t[a(Lt._0x101352,Lt._0x1ab32c,Lt._0x35423f,Lt._0x5c95c1)](Ht[a("V]5X",852,Lt._0x24dc9d)](c,e),{method:Ht[a(Lt._0x45ae11,Lt._0x5125f2,Lt._0x4b759c,Lt._0x129178,Lt._0x2c78ec)],body:Ht[l(Lt._0x47b8fe,Lt._0xf6afe3,Lt._0x159181)](ee,i),signal:o[l(Lt._0x2ff4de,Lt._0x11e586,1081)+"l"]});return t[s(Lt._0x30b761,0,Lt._0x2110c1,"DO4]",247)+r("WeF$",Lt._0x372566,Lt._0x2b1ed9)+"ut"](u),await h[a(Lt._0x2c045b,578,Lt._0x5061cf)]()}}catch(t){if(Ht[o(Lt._0x44dc99,"WeF$",Lt._0x500a9b)](Ht[s(0,Lt._0x4e55e8,0,Lt._0x3b853a,725)],Ht[a("DO4]",1232,Lt._0x12ecc6)])){const t={};return t[o(1417,Lt._0x1d9a4d,Lt._0x33a438)+"s"]=Ht[o(940,Lt._0x20a67e,Lt._0xb2466)],t[a("9p*9",Lt._0x468b4e,Lt._0x268510,Lt._0x108da4)]=Ht[l(Lt._0x4348ae,Lt._0x29f198,1880)],t}return[_0xf800b9[a(Lt._0x22c483,869,Lt._0x9d8171)+o(Lt._0x5be573,"4y0V",Lt._0x174d0b)],_0x519ed3[r(Lt._0x2d74ef,1650)],_0x30dbf6[l("vTPK",0,942,Lt._0x2c5b24)+o(Lt._0x77300,"xy&1",Lt._0x16991e)],Ht[a("tZY6",776,Lt._0x3de788)](_0x5695e3[a("fVkl",403,Lt._0x206dd8)+a(Lt._0x4fa219,1016,Lt._0x268510)],null),_0xc2298a[a("^w()",1203)]]}}}function me(){}async function ye(t=0){function e(t,e,i){return _e(Ct._0x2910ce,0,t-89,0,i)}function i(t,e,i,n,s){return Pe(n- -18,0,s)}function n(t,e,i,n,s){return ze(s,0,0,0,e- -650)}const s={NelUj:function(t){return Ht[jC(1323,"zhSe")](t)},Diheh:function(t,e,i,n){return Ht[jC(1039,"LQsu")](t,e,i,n)}};function r(t,e,i,n,s){return Pe(s-666,It._0x7002da,n)}function o(t,e,i,n,s){return pe(t,0,0,0,s- -_t._0x4161b9)}if(Ht[o(kt._0x2807be,kt._0x3392e6,0,kt._0x3f998a,kt._0xa29bf3)](Ht[i(kt._0x176680,kt._0x5e1833,0,kt._0x1b93cc,kt._0x1aac2f)],Ht[i(0,0,kt._0x3cf74b,278,kt._0x55fa1f)])){const a=await Ht[i(kt._0x91c8c6,0,kt._0x3ae99b,kt._0x171d82,"XSoC")](Ce,Qt,!0),l=await a[n(0,kt._0x1b0f88,kt._0x352a6e,0,kt._0x1b8795)+"le"]();let c=await l[i(0,0,0,-kt._0x13926a,"%8B]")]();if(!t){if(Ht[i(0,0,kt._0x570de5,-275,kt._0x54b117)](Ht[o("A8T9",0,kt._0x3438ef,kt._0x3ce37a,kt._0xb9367a)],Ht[i(kt._0x38b3b2,0,0,-264,kt._0x4c64a9)]))return new _0x13e64b(..._0x5d7c68);t=Date[e(1578,0,"WeF$")]()}if(!c){if(!Ht[r(kt._0x1776f0,kt._0x1d6975,0,"zhSe",442)](Ht[e(1888,0,kt._0x5ae5a1)],Ht[o(kt._0x538733,0,0,0,418)]))return void Ht[r(kt._0x226d27,kt._0x32f3ee,0,"z2[1",kt._0x2d9517)](_0xe3e216,!1);{c=t[r(kt._0x1ca43b,0,0,kt._0x50cc30,920)+r(kt._0x202d43,kt._0x45363a,kt._0x46354f,kt._0x189c33,662)]();const s={};s[n(0,kt._0x466b4d,kt._0x185aaa,0,"9p*9")+i(0,kt._0x2d1cc1,0,-kt._0x19f9aa,kt._0x107290)+o("DO4]",kt._0x446289,kt._0x4fded3,0,766)+"a"]=!1;const l=await a[o(kt._0x2807be,kt._0x33c588,0,0,331)+r(kt._0x317ba0,0,kt._0x41eade,"QJx#",kt._0x59a6e1)+r(kt._0x3bf5f2,kt._0x4db1d7,0,kt._0x177596,kt._0x59060c)](s);await l[e(kt._0x47318d,0,kt._0x180a3c)](c),await l[e(kt._0x15e27e,kt._0x233f1a,kt._0x3f5651,kt._0x4ccbcd)]()}}const u=Ht[n(kt._0x2e38cd,kt._0x73071c,kt._0x9aa6e3,kt._0x17c154,kt._0x38a208)](parseInt,c);if(Ht[e(kt._0x715aa4,kt._0x42b755,"yJ@2",kt._0x47318d)](u,t))if(Ht[o(kt._0x50cc30,kt._0x3f1258,kt._0x54080a,0,294)](Ht[n(0,558,kt._0x1319b3,0,kt._0x528129)],Ht[r(kt._0x9e8d8c,0,kt._0x103840,kt._0x2243bb,kt._0x2a7768)])){const s={};s[n(0,409,0,0,kt._0x47deb7)+o(kt._0x1bb670,kt._0x2f3694,0,0,kt._0x40676b)+n(kt._0xf75d78,kt._0x1e21b7,kt._0x1d0ec6,kt._0x298a08,"3R*X")+"a"]=!1;const l=await a[r(kt._0x27b2e7,0,kt._0x2f6d55,kt._0x3a5298,kt._0x43694f)+e(kt._0x346309,kt._0x13d5e2,"(51Z")+r(kt._0x44990d,kt._0x4fae6c,kt._0x579af6,"vTPK",916)](s);await l[i(0,kt._0x1a37c9,0,-kt._0x447b8e,kt._0x55fa1f)](t[r(0,kt._0x570c13,0,kt._0x16864a,kt._0x47aa87)+i(kt._0x13da08,0,0,-kt._0x1c7d9e,kt._0x484d77)]()),await l[o("eoT*",kt._0x271770,kt._0x2cdc94,kt._0x1585ad,697)]()}else{const t=s[i(0,kt._0x2abc0b,kt._0x552f86,kt._0x4dbed4,"xQE$")](_0x29b3fa);s[n(0,kt._0x55edfc,kt._0x1da438,0,"vTPK")](t,_0x1aa3f9,_0x4b95b1,_0x3b4375)}else if(Ht[e(1607,kt._0x38fd35,kt._0x14ed2b,kt._0x2caeca)](u,t))return Ht[o(")ShW",kt._0x8d5ca6,kt._0x147d82,0,193)](Ht[i(0,0,kt._0x5ec732,kt._0x5cc788,kt._0x5de884)],Ht[n(0,kt._0x1e275c,0,0,"3R*X")])?Ht[i(kt._0x155314,kt._0xb20d27,0,-kt._0x5ed870,kt._0x2807be)](_0x5c351b,null):-1;return t}_0x28954e=_0x3e38af[o("%Vm$",kt._0x18d050,kt._0x49e692,kt._0x39041a,1035)]()}async function ve(){function t(t,e,i,n,s){return ze(i,St._0x50219c,St._0x2181a1,St._0x18c9ed,s-95)}function e(t,e,i){return ze(t,0,0,Mt._0x27089c,i- -1063)}function i(t,e,i,n){return te(wt._0x3a21bb,0,n,0,e-427)}function n(t,e,i,n,s){return te(0,0,s,0,t-225)}const s={HNQIr:function(t,e){return Ht[jC(438,"zhSe")](t,e)}};var r,o;if(Ht[t(0,0,"yJ@2",0,xt._0x468dd1)](Ht[t(0,xt._0x5a2bcc,xt._0x2420a7,0,xt._0x63022a)],Ht[i(xt._0x33ec4e,xt._0x35d793,xt._0x1bd14e,xt._0x2d3f6f)]))_0x57cbcb=0;else{const a=await Ht[t(0,0,xt._0x1230c1,0,xt._0x1cfeaa)](Ce,qt);if(Ht[i(0,213,xt._0x32c8df,xt._0x2420a7)](a,null))return Ht[n(xt._0x3032cb,xt._0xdef6b5,xt._0x35498c,0,"tZY6")](Ht[(xt._0x540ed5,xt._0x52cfb8,r=-xt._0x36d672,o=xt._0x114da9,ze(o,0,0,0,r- -1455))],Ht[e("%8B]",0,542)])?Ht[i(xt._0x40e29c,xt._0x4b4b1e,xt._0x4c60ce,"%Vm$")](_0xb988bc,Ht[e("(51Z",0,338)]):null;const l=await(await a[i(0,xt._0x94f4ef,xt._0x41d21a,xt._0x17ca96)+"le"]())[n(270,xt._0x2e63a1,xt._0x3dd7bf,0,"%TiM")]();try{return Ht[e(xt._0x2e9a41,xt._0x3b8d6a,-44,xt._0x533418)](Ht[i(xt._0x5a837e,xt._0x5b14bc,0,"v%0M",xt._0x3e5bf1)],Ht[n(-xt._0xeb786b,xt._0x1cd899,0,xt._0x225d3c,xt._0x47793f)])?(_0x2a19d8=1,s[i(0,522,0,xt._0x44dee2)](_0x7fec23,_0x44a57c)):Ht[e("WeF$",xt._0x14c81d,xt._0x1e321d,xt._0x28eb44)](ie,l)}catch{return Ht[e(xt._0x55da3d,0,xt._0x1d1d13)](Ht[n(614,xt._0x35871c,xt._0x2b7681,0,xt._0x55da3d)],Ht[e(xt._0x4ef67f,xt._0x4a3f03,-xt._0x300a75)]),null}}}async function be(e){function i(t,e){return pe(e,bt._0xd87530,bt._0x3c7d6c,0,t- -1879)}function n(t,e,i,n){return ze(n,0,vt._0x5abdb4,0,t- -234)}function s(t,e,i,n,s){return ze(s,yt._0x32b9b0,0,yt._0x182910,n- -yt._0x19f20c)}const r={yZKQL:function(t,e){return Ht[(mt._0x2c4696,jC(1045,")ShW"))](t,e)}};function o(t,e){return ze(t,0,0,0,e- -1312)}function a(t,e){return Pe(t-973,0,e)}if(!Ht[a(1340,gt._0x3e6c55)](Ht[s(0,gt._0x3026ea,gt._0x2da0db,1065,"F!cC")],Ht[n(gt._0x338073,gt._0x262d30,0,gt._0xc7cb9c)])){const l=t[n(gt._0x3d4666,0,gt._0x112e4e,"6H%8")+"o"][i(-gt._0x1da27b,"Hn96")+"e"];if(Ht[s(gt._0x4d224e,gt._0x40fceb,0,gt._0xe9cf09,"%8B]")](Object[s(0,0,gt._0x4f3e9f,772,gt._0x179372)+a(gt._0x23cb3d,"fVkl")+a(929,gt._0x72d6c6)](l)[n(gt._0x50f4df,gt._0x34844a,0,"fVkl")+"y"],l[n(1452,0,0,"@j1h")+"y"]))return!Ht[n(gt._0x1e518e,0,0,"eoT*")](Ht[i(195,"gKQu",gt._0x5928f2)],Ht[i(-gt._0x2a986a,gt._0x4395ef)])&&Ht[i(-177,"2OwF",gt._0x3bd806)](_0x417beb,_0x430a40);const c=Ht[n(gt._0x4e9bc2,gt._0x198d05,0,"NxV5")](le,re),u=Ht[o(gt._0x2a57c0,gt._0x24fb22,gt._0x257af9,gt._0x4d3adb)](le,e[0]),h=Ht[o("LQsu",gt._0x493b2f,gt._0x5d0d27,gt._0x330e31)](le,e[1]),d={};d[i(-gt._0xa196cd,"%TiM",gt._0x52cdbc)]=Ht[o(gt._0xae5609,-gt._0x12e5fe,gt._0x560ce7)],d[s(0,gt._0x5b5288,0,gt._0x708752,gt._0x5ca681)]=Ht[n(gt._0x256939,gt._0x3a2b8e,gt._0x418814,"NxV5")];const f=d,p=await l[n(gt._0x45acd7,gt._0x375fe1,gt._0xe43954,"bpf6")+a(gt._0x329142,gt._0x5b9d4c)](Ht[o("bpf6",382,gt._0x1ca400)],c,f,!1,[Ht[s(gt._0x5e687b,0,gt._0x17cf09,gt._0x5151ba,"6H%8")]]),g=u[o(gt._0x480eaf,609)](0);new Uint8Array(g)[Ht[a(gt._0x18f39a,"^w()")](oe,g[s(0,0,gt._0xbe1e46,gt._0x219b94,gt._0x5ca681)+i(-gt._0x353086,gt._0x21f9e)])]++;const m=[async()=>!await l[o("2kRQ",610)+"y"](f,p,h,g),async()=>await l[s(0,0,0,856,"8mfN")+"y"](f,p,h,u),ae?async()=>await ae[o("%TiM",-15)](l,f,p,h,u):null][i(-gt._0xddfe61,"F!cC")+"r"]((t=>null!=t))[o(gt._0x594539,370,gt._0xa47048)](xe),y=Ht[s(0,gt._0x57300d,0,gt._0x36a5fb,gt._0x3119f2)](Ht[s(gt._0x569ffc,0,0,360,gt._0x524813)](Ht[i(-gt._0x157dbc,"%Vm$",gt._0x1f41d6)](Ht[a(743,"xy&1")](Math[n(1373,0,0,gt._0xae5609)+"m"](),1e4),oe),0),2);for(let t=0,e=m[o("NxV5",-gt._0x462a97,gt._0x3e5808,gt._0x56c15f)+"h"];Ht[i(403,")ShW",gt._0x22d56f)](t,e);t++){if(Ht[a(1561,"tZY6")](Ht[n(gt._0xf7e015,gt._0x20c44b,0,"tZY6")],Ht[o("6H%8",524,gt._0x3393ad)]))return-1;if(!await m[Ht[s(gt._0x29816c,gt._0x2e2dd7,gt._0x447c94,567,"bpf6")](Ht[i(-gt._0x5d0963,"F&gy",gt._0x526a3c)](y,t),e)]())return!Ht[a(1474,gt._0xfb3f1d)](Ht[n(gt._0x5e6046,gt._0x529e80,gt._0x487d22,gt._0x3fec61)],Ht[n(gt._0x59837b,gt._0x48c4d4,gt._0x1c8205,gt._0x266ebe)])&&r[n(1384,gt._0x487d22,0,"asOf")](_0x49a266,_0x147081)}return!0}}function xe(){function t(t,e,i,n){return pe(e,0,pt._0x288f66,0,n- -1602)}const e={XBbDZ:function(t,e){return Ht[(i=ft._0x5f13ff,ft._0x5334fb,n=-ft._0x21c56e,jC(n- -627,i))](t,e);var i,n}};function i(t,e,i,n){return Pe(n-1276,0,t)}return Ht[t(dt._0x3517b9,dt._0x335ecf,dt._0x1af576,-33)](Ht[t(0,"z2[1",dt._0x33be9e,dt._0x5b5545)],Ht[(dt._0x5c8af7,dt._0x4e9d30,n=dt._0x30da44,dt._0x2e54a8,s=dt._0x4d8e9c,_e(0,0,s- -1290,0,n))])?Math[i(dt._0x32c0bf,dt._0x57e088,0,1220)](Ht[i(dt._0x129d12,dt._0x7dda0f,0,dt._0xb0bfe8)](Math[t(dt._0xa494f6,dt._0x399e19,0,-dt._0x4d05bb)+"m"](),Math[t(dt._0x55c0bc,"DO4]",0,258)+"m"]())):e[t(0,dt._0x2b7e42,dt._0x4ad5a4,-dt._0x590fe2)](_0x450587,_0xfb8bc8[i(dt._0x5ee4fe,dt._0x4697e0,dt._0x524741,1492)]);var n,s}async function we(t,e,i){function n(t,e,i,n){return pe(n,0,0,0,t- -1783)}function s(t,e,i,n,s){return pe(s,0,0,0,i- -1836)}function r(t,e,i,n,s){return pe(i,0,0,ht._0x5e3484,s- -ht._0x5b2840)}function o(t,e,i,n){return _e(0,0,n- -1786,0,e)}const a={zDRWb:function(t,e){return Ht[jC(676,"Hn96")](t,e)}};function l(t,e,i){return te(0,0,i,0,e-313)}if(Ht[s(0,0,-ut._0x1dca88,0,"2kRQ")](Ht[n(153,ut._0x37f75c,0,ut._0x256fb1)],Ht[o(0,"%Vm$",ut._0x3b1b78,-ut._0x1b7667)])){const a=Ht[s(0,0,-210,0,"bpf6")](parseInt,await Ht[l(ut._0x5f087a,414,"zhSe")](Ne,Jt,e[o(ut._0x2e1e49,"QJx#",0,ut._0x59edfe)+o(ut._0x566da3,"V]5X",ut._0x5a0c68,-57)]()));if(Ht[s(0,ut._0x38b01c,ut._0x2674cd,0,"fVkl")](Ht[o(ut._0x5cfe54,"gKQu",0,-255)](e,a),Xt)){if(Ht[s(ut._0x4124a5,0,-142,0,"ptJb")](Ht[n(ut._0x555bdf,ut._0x2423b9,ut._0x3676f6,"xQE$")],Ht[r(ut._0x449540,0,"2OwF",0,-416)])){const t={};return t[r(ut._0x289b80,0,"asOf",0,420)+"s"]=Ht[n(-286,0,ut._0x18a90d,"^w()")],t[o(ut._0x2785df,"DO4]",0,ut._0x6f3436)]=Ht[r(ut._0x579979,0,ut._0x11c943,ut._0x43ac88,53)],t}return await Ht[n(-ut._0x58a773,0,0,"%Vm$")](Le,Jt),await Ht[l(ut._0x37f801,-ut._0x3f38c5,"4Qmd")](Se,t),await Ht[l(0,184,"6H%8")](Ie,t,0)}const c=await Ht[o(ut._0x5941ca,"9p*9",ut._0x4ec278,ut._0x117cf3)](ge,Ht[r(0,0,"9p*9",0,150)],i);return Ht[l(ut._0x30eaae,135,ut._0x2a2581,ut._0x313f27)](c[o(ut._0x2b676c,ut._0x43fb45,0,-ut._0x559288)+"s"],Ht[s(ut._0x18744f,0,-183,0,ut._0x5a544e)])?Ht[n(ut._0x31c85e,0,ut._0x382fe7,ut._0x1fbe6d)](Ht[s(0,0,ut._0x35bac6,ut._0x3fb667,ut._0x123791)],Ht[l(0,-ut._0xf2ab1,"3R*X")])?"_"+_0x4bf312[s(0,ut._0x19f489,128,ut._0x436bc6,ut._0x392084)+"o"][o(ut._0x6ff0f3,ut._0xaef443,ut._0x5f2d8e,-ut._0x1eda20)+s(0,0,-406,0,ut._0x454616)]()[s(ut._0x32d0db,0,ut._0x2cfcf1,0,ut._0x5cc2ec)]("-")[n(-ut._0x448e03,0,0,ut._0x44b759)](""):(await Ht[n(343,0,ut._0x217afe,ut._0x1629cc)](Le,Jt),await Ht[s(0,ut._0x1c77ee,-ut._0x3f2814,ut._0x1dca88,"asOf")](Se,t),await Ht[n(ut._0x416a80,ut._0x4b2a72,ut._0x6ba351,"8xg3")](Ie,t,0)):(await Ht[o(ut._0x1b0516,ut._0x1589c6,ut._0x171eda,458)](je,qt,Ht[o(0,ut._0x16f74e,0,-ut._0x4908db)](ee,c[o(ut._0x8e1fff,"%Vm$",ut._0x140217,-ut._0x2f612)])),await Ht[l(0,-ut._0x36f2a1,ut._0x2bdced)](je,Jt,e[n(443,ut._0x5eb36d,ut._0x29c89a,"eOpF")+l(ut._0x50b9da,298,"z2[1")]()),await Ht[s(0,ut._0x188763,-ut._0x535568,0,"ptJb")](Ie,t,0))}{const t=_0x13927e[n(-437,ut._0x25a5bd,0,"NxV5")](_0x3bf17a),e=new _0x221e99(t[l(0,ut._0x23f876,ut._0x5afd58,ut._0x2fe55a)+"h"]);for(let i=0;a[o(ut._0xa03041,ut._0x4f8cc8,0,ut._0xed5fae)](i,t[l(0,-162,"8mfN")+"h"]);i++)e[i]=t[n(-ut._0x1fe92c,ut._0x5d5052,0,ut._0x11c943)+r(ut._0x18378d,ut._0x2f5946,"8xg3",0,-325)](i);return e[r(0,ut._0x4676d7,"F&gy",ut._0x11f4c3,-ut._0x1cef3b)+"r"]}}async function Me(t){function e(t,e,i){return Pe(i-44,0,t)}function i(t,e,i,n,s){return _e(0,0,n- -86,0,s)}function n(t,e,i,n,s){return ze(n,0,0,0,s- -239)}function s(t,e,i,n,s){return Pe(n-lt._0x52d9a9,0,s)}if(Ht[i(at._0x4f1650,0,0,1903,at._0x4493d1)](Ht[i(at._0x9e1d01,0,0,at._0xdb5c67,"fVkl")],Ht[e(at._0x164294,at._0x296daf,-242)])){const o=await Ht[n(0,at._0x2430a6,at._0x1a6744,"fVkl",at._0x3e67c2)](fe);for(const[a,l]of Object[s(0,0,0,at._0x4d539a,"eOpF")+"es"](o)){if(!Ht[n(0,0,0,"vTPK",at._0x4bcaf1)](Ht[e(at._0x6cddc,0,125)],Ht[n(0,0,0,at._0x3924d9,1143)]))return"";if(Ht[s(at._0x4bc27b,0,0,880,"3R*X")](t[a],l))return!!Ht[i(at._0x56ebc8,at._0x52ef86,0,1187,at._0x1acae7)](Ht[n(0,at._0x151e7f,at._0x5a4fe1,"2OwF",at._0xd2dafb)],Ht[(at._0x1a9fd7,r=-at._0x48f662,Pe(r-177,ct._0x2d3162,"(51Z"))])&&Ht[i(at._0x51ae36,at._0x274397,0,at._0x2ba840,"ANXd")](_0x975275)}return!0}var r;_0x235cb5[_0x1c784e]=_0x5e4f4b[s(at._0x37d256,0,at._0x1b8c12,at._0x5f2ef8,at._0x378b57)+s(0,0,0,673,at._0x17be11)](_0x5a8324)}async function Se(t){function e(t,e,i,n){return te(0,ot._0x4411ab,e,ot._0x237ba3,n-495)}function i(t,e,i,n,s){return ze(s,0,0,0,i- -114)}function n(t,e,i,n,s){return Pe(n-239,0,s)}const s={MHuKq:function(t){return Ht[(e=rt._0x549b8d,jC(e-617,"Hn96"))](t);var e},lLFuu:function(t){return Ht[jC(1098,"yJ@2")](t)},fFOVz:function(t,e,i,n,s){return Ht[jC(1041,"tZY6")](t,e,i,n,s)}};function r(t,e,i){return pe(i,0,0,0,t- -1208)}function o(t,e,i,n,s){return ze(s,0,0,0,t-19)}if(Ht[o(st._0x30f291,st._0x211d21,0,st._0x37969a,st._0x5ab13e)](Ht[o(1302,0,st._0x5c5ed4,st._0x4e8570,st._0x3d25e6)],Ht[o(st._0x1527f5,st._0x475965,st._0x1320b4,0,"@j1h")])){const t=s[i(st._0x42be9e,0,979,st._0x5c9255,"4y0V")](_0x101b27),a=s[r(877,0,st._0x10f67b,st._0x286e34)](_0x5c928e),l=s[o(st._0x543dbe,0,st._0x1a6578,st._0x3b59db,st._0x4439e2)](_0x310611),c=r(487,0,"%TiM",st._0x4d0978)+r(st._0x36fdfb,st._0xf0adba,"eoT*",st._0x339de9)+n(st._0x16a621,0,st._0x3a8bfc,800,st._0x3353d3)+i(st._0x485eff,0,1658,0,"y%4F")+"y("+t+","+a+(n(st._0x7c3164,0,0,757,"xy&1")+r(st._0x3d286a,0,"ANXd",st._0xb4ec52)+r(st._0x36cdb9,st._0x3a8bfc,st._0x38e6b8)+n(0,st._0x205697,0,161,st._0x425c6c)+e(0,st._0x328735,0,st._0x92ecbd)+i(st._0x3e8a06,0,st._0x45b081,st._0x53ffed,st._0x286db1)+n(0,0,0,305,st._0x48ed05)+i(st._0x5b1f5a,0,1295,st._0x168f35,"2OwF")+n(0,0,0,442,st._0x53fe06)+r(830,st._0x43c0e7,"eOpF",st._0x34fb27)+r(st._0x47ffd0,0,"V]5X",st._0x2d708b)+o(st._0x170b0e,st._0xde0f67,st._0x213e60,0,st._0x24c264)+r(67,st._0x49406e,st._0x46d6ee,st._0x4144fb)+o(1794,st._0x333d38,0,st._0x3d9068,"zhSe")+o(st._0x71d9e6,0,st._0x56babc,0,st._0x2c0909)+o(st._0x262488,0,st._0x135464,0,st._0x29b098)+r(828,st._0x54d276,"2kRQ")+n(st._0x1808d2,0,0,st._0x92ecbd,st._0x583718)+i(0,st._0x2c73e6,st._0xfc4873,0,"9p*9")+i(st._0x8cb721,0,1703,0,"3R*X")+n(0,st._0x1a16ea,0,-st._0xe4950a,st._0x38e6b8)+i(st._0x319bf5,st._0x5bfe08,1498,0,"%8B]")+o(st._0x3f1afd,st._0x4cd183,st._0x224554,0,st._0x478b82)+i(0,0,st._0x1efa92,st._0xddc992,st._0x4ef5f4)+i(0,0,1532,0,st._0x4930aa)+o(st._0x135d07,st._0x422e2d,st._0x27f7e6,st._0x1408ef,"yJ@2")+o(st._0x2ff401,0,st._0x28d773,0,st._0x3d5293))+l+(e(st._0x2e2f88,"fVkl",st._0x147731,372)+e(0,"asOf",st._0x363172,st._0x1d0791));return s[i(0,0,1106,0,st._0x3a8822)](_0x120471,t,a,l,c)}Zt=0,await Ht[n(0,st._0x27bfdf,st._0x349792,st._0x2bcd30,"8mfN")](Le,qt),Ht[i(0,0,st._0x2417e9,st._0x4a394b,"4Qmd")](me),t&&se[i(0,0,st._0x33f54d,0,"v%0M")+o(st._0x3c5e7b,st._0x3dc769,0,st._0x1527f5,st._0x97f96)+"e"]("")}async function ke(e,i){function n(t,e,i,n,s){return _e(0,0,t- -185,0,s)}function s(t,e){return ze(t,0,0,0,e- -264)}function r(t,e,i){return Pe(i-1495,0,e)}function o(t,e,i,n,s){return te(0,0,i,0,s-778)}const a={JnoxU:function(t,e){return Ht[jC(1364,"tZY6")](t,e)}};function l(t,e,i,n,s){return Pe(s-1391,0,t)}if(Ht[r(0,"XSoC",1140)](Ht[s("V]5X",869)],Ht[n(1296,0,0,0,"6H%8")])){if(ne)return Ht[r(0,"8xg3",1423)](Ht[o(0,0,"DO4]",0,912)],Ht[n(1891,0,0,0,"2kRQ")])?a[s("vTPK",1697)](_0x206fb2,_0x49b74e):Ht[s("6fah",1075)](Se,e);await t[n(1177,0,0,0,"vTPK")+n(994,0,0,0,"Y[!*")][r(0,"%8B]",1427)][o(0,0,"6H%8",0,1237)+"st"](Ht[r(0,"tZY6",1215)],(async()=>{if(Ht[r(0,"V]5X",2137)](Ht[s("ANXd",823)],Ht[o(0,0,"4Qmd",0,610)]))return!1;await Ht[l("Y[!*",0,0,0,2047)](Ie,e,i)}))}else if(Ht[l("6fah",0,0,0,2032)](_0xc856c9[_0x4915b0],_0x4b61ab))return!1}function _e(t,e,i,n,s){return jC(i-nt._0x531b6f,s)}async function Ie(e,i){function n(t,e,i,n,s){return _e(0,0,s- -it._0x257ef8,0,t)}function s(t,e,i,n,s){return pe(e,0,et._0x411fbc,0,s- -et._0x3ace9e)}const r=await Ht[c(q._0x10482d,q._0x2c13d3,q._0x16fc77,-q._0x2a71b5)](ye);function o(t,e,i,n){return ze(n,0,tt._0x43aa37,0,t- -174)}if(Ht[n("F&gy",0,0,0,q._0x3a8b9b)](r,0))return Ht[n("eoT*",q._0xe5b122,q._0x31adbe,0,1335)](Se,e);const a=await Ht[u(q._0x300ee0,0,q._0x4f07ea,q._0x1e4ed6)](ve);if(Ht[c(q._0x24f441,"3R*X",q._0x22f295,-q._0x22ef96)](a,null))return void(Zt=0);if(false)return ne=1,Ht[o(1771,q._0x243c6a,q._0x258b29,"WeF$")](Se,e);const l=Ht[n(q._0x277416,0,0,0,1212)](ie,t[n("bpf6",q._0x1dc7b9,q._0x568c25,0,933)](a[0]));if(!await Ht[s(q._0x4152ed,"2OwF",q._0x4961b1,0,933)](Me,l))return Ht[c(0,"x@%H",0,q._0x11dce0)](Se,e);if(i||Ht[c(q._0x5ddc14,q._0x530c11,q._0xc5ddbf,366)](Ht[c(0,"8mfN",0,-q._0x2534bd)](r,l[s(q._0x383689,"9p*9",q._0x108aff,q._0x55cbb4,q._0x258a64)+s(0,q._0x557d0a,0,0,q._0x144f56)]),Kt))return await Ht[n("M1N#",0,q._0x3e70f3,0,q._0x55ddc5)](we,e,r,l[c(0,"xQE$",q._0x33630a,q._0x48e99d)]);function c(t,e,i,n){return ze(e,0,0,X._0x16947f,n- -X._0x306028)}if(Ht[o(q._0x3d8bcf,0,0,"8mfN")](Date[o(1802,0,0,q._0x22d038)](),l[s(q._0x1f57b1,q._0x2a8555,0,q._0x12f320,q._0x53afc5)+o(1548,q._0x21edc6,0,q._0x1e4eb2)]))return Ht[u(0,0,"fVkl",1753)](Se,e);function u(t,e,i,n){return te(0,K._0x29c162,i,K._0xd18eae,n-K._0x3a0057)}Zt=l[o(1345,q._0x3856f6,q._0x331d83,"Hn96")]?1:2,Ht[u(0,0,q._0x2d8415,q._0x437eac)](me)}async function Ce(e,i=!1){function n(t,e,i,n){return Pe(e-1232,0,n)}const s=await t[n(0,Q._0x37d76f,Q._0x2b5746,Q._0x27836a)+a(0,0,Q._0x4df1bf,Q._0x1faf79)][n(Q._0x43569f,1056,Q._0x21644e,"%8B]")+"ge"][n(0,1044,Q._0x24b15f,"(51Z")+(Q._0x566031,r=Q._0x1ddacb,o=Q._0x44b911,pe(r,0,J._0x4e77df,0,o- -431))+"ry"]();var r,o;function a(t,e,i,n){return Pe(n-320,0,i)}function l(t,e,i){return pe(t,0,0,0,i- -405)}try{const t={};return t[l(Q._0x38c943,0,1591)+"e"]=i,await s[n(0,Q._0x526b56,Q._0x43ff7d,"(51Z",Q._0x3051df)+a(0,0,Q._0x1bbad4,Q._0x5e67f0)+l("WeF$",Q._0x1ac122,Q._0x27113a,Q._0x4355ad)](e,t)}catch{return null}}async function Le(e,i=!1){function n(t,e,i){return te(0,0,i,0,e-342)}const s=await t[o(0,H._0x58cbb8,0,316,H._0xb5dc94)+n(0,H._0x241b49,"8mfN")][n(0,185,H._0x204690,H._0x36631a)+"ge"][o(H._0x287f4d,0,H._0x6384e3,133,"QJx#")+(H._0x1b0e1a,r=H._0x69c52b,pe("gKQu",0,0,0,r- -974))+"ry"]();var r;function o(t,e,i,n,s){return pe(s,Z._0x53cf06,Z._0x74cbd5,0,n- -1599)}try{const t={};t[o(0,0,0,H._0x2c9328,H._0x288c84)+n(H._0xe22ad3,214,"v%0M",H._0x423101)]=i,await s[o(0,0,H._0x447b0e,H._0x313683,"@j1h")+("F&gy",ze("F&gy",Y._0x4687b4,Y._0x12ea0d,Y._0x1db66b,1977))+"y"](e,t)}catch{return!1}return!0}async function Ne(t,e){function i(t,e,i,n){return pe(n,0,0,0,t- -473)}const n=await Ht[s(20,0,F._0x21599d,F._0x4bdbdf)](Ce,t,!0);function s(t,e,i,n){return pe(n,0,0,0,t- -1878)}const r=await n[s(-F._0x531098,F._0x3f56ac,F._0x644174,"zhSe")+"le"]();function o(t,e,i,n,s){return _e(G._0x5c2ed4,0,e- -G._0x214a9a,0,s)}function a(t,e,i){return _e(0,0,i-V._0x37607d,V._0x31122e,t)}if(!r[i(F._0x2d7da6,F._0x40b185,0,"tZY6")]){if(Ht[s(F._0x13ce8f,0,F._0x35e9c8,"XSoC")](e,void 0))return"";const t={};t[o(0,717,0,F._0x5caf63,F._0x3148fa)+o(0,F._0x1cabf8,0,F._0x2fbe77,F._0xdb9557)+a("x@%H",F._0x5d84aa,1867,F._0x185b90)+"a"]=!1;const r=await n[a(F._0x4bdbdf,0,2088,F._0x3f7746)+a("LQsu",F._0x187840,F._0x30630d,F._0x267030)+o(F._0x4964e3,1226,0,0,"ANXd")](t);return await r[s(-F._0x3d4ba4,F._0x5d48da,F._0x1a2a68,F._0x4b661b)](e),await r[i(F._0x2ec037,F._0x30375b,F._0x2a6509,F._0x5ee250)](),e}return await r[o(F._0x48a313,960,F._0x4f433d,0,F._0x279001)]()}async function je(t,e){function i(t,e,i,n){return pe(i,0,0,0,n- -1770)}const n=await Ht[i(U._0x5ac07f,U._0x3927aa,"^w()",-U._0x58d68a)](Ce,t,!0);await n[i(U._0x2ab608,0,"XSoC",U._0x10218d)+"le"]();const s={};s[i(U._0x173b0c,U._0x21e8f4,U._0x4f0945,U._0x244dd5)+i(U._0x4abc0b,U._0x2d5be1,U._0x1b6e1c,-U._0x425ae4)+i(U._0x412415,U._0x4326dc,U._0xaed3ed,U._0x2ad424)+"a"]=!1;const r=await n[(U._0x14def0,U._0x518760,o=U._0x5a1c0e,")ShW",ze(")ShW",0,0,0,o- -$._0x1890c4)+i(U._0x2dbbf0,U._0x45aeeb,U._0x1edbcf,U._0x209812)+c(U._0x3510fe,238,0,0,"z2[1"))](s);var o,a,l;function c(t,e,i,n,s){return Pe(e- -48,0,s)}await r[(U._0x200978,a=U._0x2c07d3,l=U._0x349a58,Pe(l-522,0,a))](e),await r[c(U._0x610ff5,80,U._0x4637e6,U._0x1e5b87,U._0x171632)]()}async function Te(){const e=await Ht[n(0,835,0,"bpf6")](Ce,Yt,!0);function i(t,e,i,n,s){return pe(i,0,0,0,s- -1)}if((await e[n(0,156,0,"4y0V")+"le"]())[a(0,0,0,"(51Z",959)])return;function n(t,e,i,n){return Pe(e-309,0,n)}const s={};function r(t,e,i){return pe(i,0,0,0,t- -1410)}s[r(788,0,"V]5X")+i(0,0,"A8T9",0,1952)+n(0,430,0,"%8B]")+"a"]=!1;const o=await e[r(502,0,"x@%H")+a(0,0,0,"NxV5",972)+n(0,318,0,"6fah")](s);function a(t,e,i,n,s){return _e(0,0,s- -636,0,n)}await o[n(0,-81,0,"6fah")](t[r(261,0,"8mfN")+"o"][a(0,0,0,"xy&1",1137)+r(266,0,"QJx#")]()[te(0,0,"2kRQ",0,-437)]("-")[n(0,624,0,"DO4]")]("")),await o[i(0,0,"3R*X",0,1215)]()}function ze(t,e,i,n,s){return jC(s-B._0x197449,t)}se[_e(0,0,1264,0,"3R*X")+pe("x@%H",0,0,0,2145)]=async function(){await Ht[("z2[1",ze("z2[1",0,0,0,990))](ke,0),Ht[("A8T9",ze("A8T9",0,0,0,1157))](me)},t[_e(0,0,1433,0,x)+Pe(-379,0,")ShW")+ze("eoT*",0,0,0,1973)+"r"](Ht[pe("V]5X",0,0,0,1328)],(async function(t){const e=t[i(-186,0,0,"bpf6")+"l"][pe("9p*9",0,0,0,2242)+"ve"];function i(t,e,i,n){return Pe(t-197,0,n)}const n=await Ht[i(481,0,0,"yJ@2")](Ce,Yt);if(Ht[_e(0,0,1847,0,"(51Z")](n,null))return void Ht[i(386,0,0,"^w()")](e,!1);const s=await n[i(421,0,0,"x@%H")+"le"]();Ht[("WeF$",ze("WeF$",0,0,0,1180))](e,!!s[i(577,0,0,"vTPK")])})),t[ze("DO4]",0,0,0,1531)+te(0,0,"x@%H",0,-528)+ze(f,0,0,0,1820)+"r"](Ht[Pe(251,0,"NxV5")],(async function(t){const e=t[n(0,"6fah",0,0,290)+"l"][_e(0,0,1786,0,"eoT*")+"ve"];function i(t,e,i,n,s){return _e(0,0,e- -745,0,s)}function n(t,e,i,n,s){return _e(0,0,s- -1273,0,e)}t[Pe(-223,0,"v%0M")+"l"][i(0,652,0,0,"XSoC")],await Ht[i(0,502,0,0,"y%4F")](Te),await Ht[n(0,"zhSe",0,0,943)](ke,1),Ht[i(0,1440,0,0,"4Qmd")](e,Zt)})),t[pe("8mfN",0,0,0,1485)+te(0,0,"NxV5",0,-117)+Pe(122,0,"tZY6")+"r"](Ht[te(0,0,n,0,203)],(async function(e){const i=e[n(0,0,0,"v%0M",1409)+"l"][n(0,0,0,"xQE$",2257)+"ve"];function n(t,e,i,n,s){return Pe(s-1632,0,n)}const s=e[u(0,0,0,"4y0V",1206)+"l"][d(R,0,0,1583)+"t"],[r,o]=e[p(0,1483,0,"LQsu")+"l"][u(0,0,0,"VeRw",493)];if(Ht[n(0,0,0,"A8T9",1731)](r,o)&&ne)return Ht[u(0,0,0,"QJx#",587)](s,Ht[u(0,0,0,"8xg3",577)]);const a=await Ht[n(0,0,0,"6H%8",1412)](fe),l=await Ht[u(0,0,0,"3R*X",1475)](ge,Ht[n(0,0,0,"z2[1",1997)],[r,o,a],20);if(Ht[n(0,0,0,"v%0M",2127)](l[h("2kRQ",0,514)+"s"],Ht[h("8xg3",0,-55)]))return Ht[p(0,1731,0,"%TiM")](s,l[h("M1N#",0,-210)]);const c=l[h(R,0,16)];function u(t,e,i,n,s){return pe(n,0,0,0,s- -756)}if(await Ht[p(0,1756,0,W)](je,qt,Ht[p(0,1302,0,"M1N#")](ee,c)),await Ht[n(0,0,0,"NxV5",1701)](ke,1),!Zt)return Ht[d("%Vm$",0,0,731)](s,Ht[h("2ZJn",0,-194)]);function h(t,e,i){return Pe(i-102,0,t)}function d(t,e,i,n){return _e(0,0,n- -525,0,t)}se[d("Hn96",0,0,1417)+d("eOpF",0,0,1627)+"e"]("");const f=Ht[h("6fah",0,-299)](ie,t[p(0,1465,0,W)](c[0]));function p(t,e,i,n){return Pe(e-1137,0,n)}Ht[u(0,0,0,"6fah",463)](i,Ht[n(0,0,0,"v%0M",2142)](de,f))})),t[_e(0,0,2236,0,"eOpF")+_e(0,0,1395,0,"A8T9")+te(0,0,b,0,-273)+"r"](Ht[ze(m,0,0,0,1553)],(async function(e){const i=e[s(980,"xy&1")+"l"][n(0,0,916,0,"ANXd")+"ve"];function n(t,e,i,n,s){return _e(0,0,i- -1284,0,s)}function s(t,e){return te(0,0,e,0,t-1530)}const r=await Ht[n(0,0,794,0,"6H%8")](ve);if(Ht[s(1423,"8xg3")](r,null))return Ht[n(0,0,491,0,"QJx#")](i);const o=Ht[ze("y%4F",0,0,0,1865)](ie,t[a(0,"4y0V",0,0,474)](r[0]))[s(1339,"y%4F")];function a(t,e,i,n,s){return ze(e,0,0,0,s- -727)}await Ht[a(0,"2OwF",0,0,260)](Se,1),await Ht[a(0,"ptJb",0,0,922)](ge,Ht[ze("zhSe",0,0,0,1800)],o),Ht[s(1568,"@j1h")](i)})),t[ze("XSoC",0,0,0,1015)+_e(0,0,1225,0,"bpf6")+ze("9p*9",0,0,0,1791)+"r"](Ht[Pe(235,0,"DO4]")],(async function(e){const i=e[o(0,0,"ANXd",1229)+"l"][o(0,0,"(51Z",1391)],n=e[(s=O,_e(0,0,1980,0,s)+"l")][te(0,0,"QJx#",0,-1)+"ve"];var s;i&&await Ht[a(O,0,0,1233)](ke,1,1);const r=await Ht[a("bpf6",0,0,811)](ve);function o(t,e,i,n){return ze(i,0,0,0,n-84)}function a(t,e,i,n){return te(0,0,t,0,n-1259)}if(!r)return Ht[o(0,0,"VeRw",1418)](n,null);const l=Ht[a("gKQu",0,0,691)](ie,t[a("8mfN",0,0,1343)](r[0]));Ht[o(0,0,"%Vm$",2037)](n,Ht[o(0,0,"DO4]",1686)](de,l))}));const Ae=()=>Zt;function Pe(t,e,i){return jC(t- -737,i)}e?.[Pe(13,0,"V]5X")+"e"](0)?.[Pe(459,0,"DO4]")]((function(e){const i=Ht[_e(0,0,1859,0,"4Qmd")](he);Ht[Pe(493,0,"^w()")](i,t,e,Ae)}))}(globalThis,[TC(0,0,0,"NxV5",-15)+TC(0,0,0,"xy&1",-92)+DC(0,"zhSe",323)+AC(0,0,"ANXd",0,408),DC(0,"yJ@2",617)+TC(0,0,0,"8xg3",-294)+TC(0,0,0,"LQsu",-126)+DC(0,"Y[!*",607),PC(0,0,"8xg3",509)+zC(1231,0,0,0,")ShW")+zC(1260,0,0,0,"8xg3")+zC(1530,0,0,0,"9p*9"),TC(0,0,0,"zhSe",520)+AC(0,0,"^w()",0,341)+PC(0,0,"Hn96",-111)+zC(1304,0,0,0,"%TiM"),TC(0,0,0,"9p*9",-315)+DC(0,"QJx#",436)+PC(0,0,"2kRQ",-150)+AC(0,0,"DO4]",0,247),PC(0,0,"xy&1",-22)+zC(1588,0,0,0,"QJx#")+TC(0,0,0,"9p*9",-128)+zC(1461,0,0,0,"fVkl"),TC(0,0,0,"4Qmd",42)+PC(0,0,"%Vm$",662)+PC(0,0,"QJx#",325)+PC(0,0,"8mfN",29),DC(0,"z2[1",0)+DC(0,"2OwF",216)+TC(0,0,0,"8xg3",123)+PC(0,0,"LQsu",558),zC(1122,0,0,0,"NxV5")+TC(0,0,0,"M1N#",-212)+PC(0,0,"bpf6",-257)+PC(0,0,"QJx#",-353),TC(0,0,0,"6H%8",-281)+PC(0,0,"DO4]",-197)+PC(0,0,"WeF$",282)+PC(0,0,"2kRQ",277),PC(0,0,"4Qmd",70)+TC(0,0,0,"^w()",-27)+PC(0,0,"y%4F",67)+zC(1255,0,0,0,"V]5X"),DC(0,"xQE$",391)+AC(0,0,")ShW",0,462)+TC(0,0,0,"DO4]",304)+PC(0,0,"8mfN",100),DC(0,"M1N#",632)+AC(0,0,"fVkl",0,91)+PC(0,0,"8xg3",151)+zC(1208,0,0,0,"WeF$"),zC(1618,0,0,0,"8xg3")+DC(0,"4Qmd",598)+DC(0,"3R*X",-346)+AC(0,0,"3R*X",0,28),DC(0,"xQE$",391)+PC(0,0,"2ZJn",506)+AC(0,0,"x@%H",0,796)+AC(0,0,"^w()",0,218),AC(0,0,"fVkl",0,717)+AC(0,0,"4y0V",0,-14)+zC(959,0,0,0,"2kRQ")+PC(0,0,"ANXd",189),zC(1312,0,0,0,"ptJb")+PC(0,0,"%Vm$",662)+AC(0,0,"NxV5",0,743)+AC(0,0,"eoT*",0,484),PC(0,0,"F&gy",185)+TC(0,0,0,"LQsu",294)+AC(0,0,"xy&1",0,127)+AC(0,0,"^w()",0,314),DC(0,"VeRw",-400)+DC(0,"4y0V",-397)+PC(0,0,"x@%H",456)+TC(0,0,0,"XSoC",-395),TC(0,0,0,"8mfN",360)+DC(0,"DO4]",-240)+TC(0,0,0,"8xg3",123)+TC(0,0,0,"ptJb",-77),PC(0,0,"Hn96",98)+PC(0,0,"F&gy",233)+PC(0,0,"x@%H",456)+DC(0,"yJ@2",447),TC(0,0,0,"tZY6",466)+TC(0,0,0,"tZY6",-217)+zC(1512,0,0,0,"NxV5")+PC(0,0,"%Vm$",76),AC(0,0,"F!cC",0,261)+DC(0,"XSoC",158)+AC(0,0,"eOpF",0,674)+AC(0,0,"eOpF",0,575),zC(1647,0,0,0,"XSoC")+PC(0,0,"gKQu",615)+AC(0,0,"M1N#",0,319)+PC(0,0,"F!cC",-280),PC(0,0,"3R*X",236)+PC(0,0,"VeRw",-1)+PC(0,0,"bpf6",-257)+TC(0,0,0,"VeRw",390),TC(0,0,0,"XSoC",510)+DC(0,"z2[1",313)+TC(0,0,0,"3R*X",-331)+PC(0,0,"%Vm$",273),AC(0,0,"6fah",0,630)+TC(0,0,0,"WeF$",487)+AC(0,0,"z2[1",0,492)+PC(0,0,"yJ@2",-13),TC(0,0,0,"4y0V",-194)+TC(0,0,0,"eoT*",648)+zC(1546,0,0,0,")ShW")+AC(0,0,"3R*X",0,260),DC(0,"Y[!*",-331)+AC(0,0,"2OwF",0,599)+TC(0,0,0,"@j1h",28)+TC(0,0,0,"eoT*",126),DC(0,"v%0M",-90)+PC(0,0,"zhSe",-133)+TC(0,0,0,"bpf6",-285)+PC(0,0,"WeF$",145),PC(0,0,"8xg3",509)+zC(1310,0,0,0,"XSoC")+PC(0,0,"XSoC",298)+PC(0,0,"bpf6",163),zC(1533,0,0,0,"2ZJn")+DC(0,"asOf",-393)+zC(852,0,0,0,"bpf6")+DC(0,"y%4F",124),DC(0,"VeRw",-400)+DC(0,"M1N#",-227)+zC(1261,0,0,0,"z2[1")+TC(0,0,0,"eoT*",-40),PC(0,0,"%8B]",532)+zC(1444,0,0,0,"(51Z")+AC(0,0,"2ZJn",0,400)+DC(0,"VeRw",411),AC(0,0,"yJ@2",0,1e3)+AC(0,0,"WeF$",0,855)+DC(0,"QJx#",282)+AC(0,0,"%Vm$",0,479),DC(0,"zhSe",505)+TC(0,0,0,"Hn96",122)+TC(0,0,0,"ptJb",-88)+DC(0,"M1N#",539),AC(0,0,"9p*9",0,53)+PC(0,0,"QJx#",479)+TC(0,0,0,"Y[!*",263)+TC(0,0,0,"ANXd",623),DC(0,"y%4F",-422)+DC(0,"LQsu",279)+TC(0,0,0,"^w()",-357)+PC(0,0,"DO4]",420),DC(0,"F&gy",142)+TC(0,0,0,"fVkl",-277)+TC(0,0,0,"yJ@2",-13)+DC(0,"v%0M",-76),PC(0,0,"z2[1",43)+TC(0,0,0,")ShW",94)+DC(0,"fVkl",630)+TC(0,0,0,"gKQu",-130),AC(0,0,"yJ@2",0,1e3)+TC(0,0,0,"x@%H",-238)+AC(0,0,"VeRw",0,394)+DC(0,"6H%8",553),DC(0,"eOpF",422)+TC(0,0,0,"bpf6",-271)+TC(0,0,0,"%8B]",518)+PC(0,0,"A8T9",619),DC(0,"(51Z",-148)+PC(0,0,"tZY6",-189)+PC(0,0,"8xg3",151)+DC(0,"2OwF",618),PC(0,0,")ShW",398)+zC(1771,0,0,0,"%Vm$")+zC(1434,0,0,0,"QJx#")+AC(0,0,"z2[1",0,413),DC(0,"F&gy",142)+PC(0,0,"QJx#",479)+DC(0,"3R*X",-346)+zC(988,0,0,0,"F&gy"),PC(0,0,")ShW",398)+zC(925,0,0,0,"M1N#")+PC(0,0,"QJx#",325)+zC(1430,0,0,0,"XSoC"),TC(0,0,0,"8xg3",481)+PC(0,0,"8mfN",423)+DC(0,"9p*9",-143)+PC(0,0,"z2[1",445),AC(0,0,"DO4]",0,422)+TC(0,0,0,"9p*9",151)+TC(0,0,0,"4y0V",317)+DC(0,"^w()",156),TC(0,0,0,")ShW",370)+zC(1026,0,0,0,"6H%8")+zC(1400,0,0,0,"Y[!*")+zC(962,0,0,0,"2ZJn"),PC(0,0,"xy&1",-22)+AC(0,0,"8xg3",0,74)+TC(0,0,0,"v%0M",127)+PC(0,0,"gKQu",62)]);let RC=(()=>{let t,e,i,n=Zx,s=[],r=[],o=[],a=[];return class extends n{static{const l="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ax()],i=[ox({type:Boolean,reflect:!0})],ex(this,e={get:nx((function(){return this.#rc}),"#details","get"),set:nx((function(t){this.#rc=t}),"#details","set")},t,{kind:"accessor",name:"#details",static:!1,private:!0,access:{has:t=>#oc in t,get:t=>t.#oc,set:(t,e)=>{t.#oc=e}},metadata:l},s,r),ex(this,null,i,{kind:"accessor",name:"loading",static:!1,private:!1,access:{has:t=>"loading"in t,get:t=>t.loading,set:(t,e)=>{t.loading=e}},metadata:l},o,a),l&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})}#rc=ix(this,s,null);get#oc(){return e.get.call(this)}set#oc(t){return e.set.call(this,t)}#ac=(ix(this,r),ix(this,o,!1));get loading(){return this.#ac}set loading(t){this.#ac=t}#lc=(ix(this,a),null);render(){return Ib`
            <img id="image" inert src=${`${mI}/upgrade.png`}>
            <div id="content" class="container">
                ${0!==WebGLBuffAddr0xe0d50.valueOf()?this.#cc(this.#oc):this.#uc()}
                <svg id="spinner" class="w" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="none" stroke-width="10" stroke-linecap="round" stroke-dasharray="50" stroke-dashoffset="0" pathLength="100" />
                </svg>
            </div>
        `}#uc(){return Ib`<div class="container">
                <div class="title">Get started</div>
                <div id="error">${this.#lc||""}</div>
                <cc-text-input id="email" placeholder="Email" class="w"></cc-text-input>
                <cc-text-input id="license-key" placeholder="License Key" class="w"></cc-text-input>
                <cc-button variant="secondary" outline @click=${this.#hc} class="w">Activate</cc-button>
                <div class="link" style="margin-top: 16px" @click=${this.#dc} data-url=${gI}>Manage your subscription</div>
                <div style="margin-top: 56px">Don't have a license key?</div>
                <cc-button style="margin-top: 8px" variant="accent" @click=${this.#dc} data-url=${pI} class="w">Start free trial</cc-button>
                <div>No credit card required.</div>
        </div>`}#cc(t){if(!t)return Lb;const e=t.trial;return Ib`<div class="container" style="align-items: start">
    <div class="title">${e?this.#fc(t.expires):"License info"}</div>
    <div class="label">Registered to</div>
    <div>${t.name} (${t.email})</div>
    <div class="label">${e?"Expires":t.canceled?"Cancels":"Renews at"}</div>
    <div>${t.expires.toDateString()}</div>
    <div class="link" @click=${this.#pc}>Refresh license info</div>
    ${e?Ib`<cc-button class="w c m3" variant="accent" @click=${this.#dc} data-url=${gI}>Buy now</cc-button>
                <cc-button class="w c" variant="secondary" outline @click=${this.#Jn}>Continue trial</cc-button>`:Ib`<cc-button class="w c m3" variant="accent" @click=${this.#Jn}>Continue working</cc-button>
                <cc-button class="w c" variant="secondary" outline @click=${this.#dc} data-url=${gI}>Manage subscription</cc-button>`}
    <div class="link m3 c" style="font-weight: bold" @click=${this.#gc}>Unregister device</div>
    <div class="c" style="font-size: 10px">Only 2 devices can be active concurrently</div>
</div>`}#fc(t){(t=new Date(t)).setHours(0,0,0,0);const e=new Date;e.setHours(0,0,0,0);let i=(t.getTime()-e.getTime())/864e5;return i=i<1?0:Math.ceil(i),`Trial ends ${new Intl.RelativeTimeFormat("en",{localeMatcher:"best fit",numeric:"auto",style:"long"}).format(i,"day")}`}async init(t){this.#lc=null,this.#oc=null,this.dialog.cancelable=!1,0!==WebGLBuffAddr0xbad92.valueOf()?this.#mc(!1):t&&this.#yc(t),await this.updateComplete}#Jn(){this.dialog.close()}#pc(){this.#mc(!0)}#dc(t){Mt(t.target.dataset.url)}#vc(t){this.#lc=t,this.requestUpdate()}#yc(t){let e;try{e=JSON.parse(atob(t))}catch{return}Nt(e)&&4===e.length&&"local"===e[0]&&e[1]===oI&&this.#bc(e[2],e[3])}async#mc(t){this.loading=!0;try{this.#oc=await this.#xc(t)}finally{this.loading=!1,this.requestUpdate()}}async#hc(){const t=this.shadowRoot.querySelector("#email"),e=this.shadowRoot.querySelector("#license-key");this.#lc=null;let i=(t.value||"").trim();if(!i)return t.focus(),this.#vc("Enter your email address");if(!/^[^@\s]+@[^@\s]+\.[a-z0-9]+$/i.test(i))return t.focus(),this.#vc("Your email address is not valid");let n=(e.value||"").trim();if(!n)return e.focus(),this.#vc("Enter your license key");await this.#bc(i,n)}async#bc(t,e){this.dialog.cancelable=!1,this.loading=!0,this.requestUpdate();try{this.#oc=await this.#wc(t,e)||null}catch(t){this.#vc(t.toString())}finally{this.loading=!1,this.requestUpdate()}}async#gc(){this.dialog.cancelable=!1,this.loading=!0,this.requestUpdate(),await async function(){return OC("efec58766668fb3e3292365fbcd5eaeb3332ecf2d217bc1a")}(),this.#oc=null,this.loading=!1,this.requestUpdate()}async#wc(t,e){return this.#Mc(await async function(t,e){return OC("0fd16edb021f27f22f1d4aa554904865d0fc2fdfb166e0c5",[t,e])}(t,e))}async#xc(t){return this.#Mc(await async function(t){return OC("2b96183f0371697b08ad9dda08fc1cb6d1ddda3573b287ad",t)}(t))}#Mc(t){return t?{name:t[0],email:t[1],expires:new Date(t[2]),canceled:t[3],trial:t[4]}:null}static{this.styles=Vv`
:host {
    width: 720px;
    height: 452px;
    user-select: none;
    display: flex;
    flex-direction: row;
}

#image {
    width: 357px;
    height: 452px;
}

#content {
    flex: 1;
}

.container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 8px;
}

.title {
    font-size: 24px;
    font-weight: bold;
    align-self: center;
}

.m1 {
    margin-top: 8px;
}
.m2 {
    margin-top: 16px;
}
.m3 {
    margin-top: 24px;
}

.link {
    cursor: pointer;
    text-decoration: underline;
    font-size: 10px;
}

.label {
    margin-top: 8px;
    font-weight: bold;
}

#error {
    margin:8px 0;
    height: 16px;
    color: var(--error-color);
}

.w {
    width: 220px;
}

.c {
    align-self: center;
}

:host([loading]) #content #spinner {
    display: block;
}
:host([loading]) #content > :not(#spinner) {
    display: none;
}

#spinner {
    display: none;
    height: 32px;
}


#spinner > circle {
    stroke: var(--accent-color-500);
    animation: 1s spin linear infinite forwards;
}

@keyframes spin {
    to {
        stroke-dashoffset: 100;
    }
}
`}}})();const WC={...iM,min:1};let BC=(()=>{let t,e,i,n=Gb,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{constructor(){super(...arguments),this.#Fn=ix(this,s,""),this.#Sc=(ix(this,r),ix(this,o,1920)),this.#kc=(ix(this,a),ix(this,l,1080)),this.sizes=(ix(this,c),[{title:"Custom",value:null},"YouTube",{title:"YouTube 240p",value:[426,240]},{title:"YouTube 360p",value:[640,360]},{title:"YouTube 480p",value:[854,480]},{title:"YouTube 720p",value:[1280,720]},{title:"YouTube 1080p",value:[1920,1080]},{title:"YouTube 1440p",value:[2560,1440]},{title:"YouTube 2160p",value:[3840,2160]},"Instagram",{title:"Instagram Square (1:1)",value:[1080,1080]},{title:"Instagram Story (9:16)",value:[1080,1920]},{title:"Instagram Reel (9:16)",value:[1080,1920]},{title:"Instagram Feed (4:5)",value:[1080,1350]},"TikTok",{title:"TikTok Square (1:1)",value:[1080,1080]},{title:"TikTok Portrait (9:16)",value:[1080,1920]},{title:"TikTok Landscape (16:9)",value:[1920,1080]},"Twitter",{title:"Twitter Square (1:1)",value:[720,720]},{title:"Twitter Portrait (9:16)",value:[720,1280]},{title:"Twitter Landscape (16:9) ",value:[1280,720]}]),this.#_c=null}static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ax()],e=[ax()],i=[ax()],ex(this,null,t,{kind:"accessor",name:"name",static:!1,private:!1,access:{has:t=>"name"in t,get:t=>t.name,set:(t,e)=>{t.name=e}},metadata:u},s,r),ex(this,null,e,{kind:"accessor",name:"width",static:!1,private:!1,access:{has:t=>"width"in t,get:t=>t.width,set:(t,e)=>{t.width=e}},metadata:u},o,a),ex(this,null,i,{kind:"accessor",name:"height",static:!1,private:!1,access:{has:t=>"height"in t,get:t=>t.height,set:(t,e)=>{t.height=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#Fn;get name(){return this.#Fn}set name(t){this.#Fn=t}#Sc;get width(){return this.#Sc}set width(t){this.#Sc=t}#kc;get height(){return this.#kc}set height(t){this.#kc=t}#_c;render(){const{name:t,width:e,height:i}=this;return Ib`
        <cc-flex-col>
            <cc-flex-row>
                <div class="label">Name</div>
                <cc-text-input id="name" placeholder="Project name" .value=${t} @update=${this.#Ic} padded flex></cc-text-input>
            </cc-flex-row>
            <cc-flex-row>
                <div class="label">Preset</div>
                <cc-picker id="size" .value=${this.#Cc(e,i)?.value||null} .items=${this.sizes} @change=${this.#Lc} flex></cc-picker>
            </cc-flex-row>
            <cc-flex-row>
                <div class="label">Frame size</div>
                <cc-number-input id="width" .value=${e} .formatter=${WC} @update=${this.#Nc} flex>
                    <cc-icon name="expr:w"slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" .value=${i} .formatter=${WC} @update=${this.#jc} flex>
                    <cc-icon name="expr:h"slot="before"></cc-icon>
                </cc-number-input>
            </cc-flex-row>
            ${this.renderSettings()}
        </cc-flex-col>
        `}#Cc(t,e){return this.sizes.find((i=>null!=i&&"string"!=typeof i&&null!=i.value&&i.value[0]===t&&i.value[1]===e&&(!this.#_c||i.title===this.#_c)))}#Ic(t){this.name=t.detail}#Lc(t){const e=t.detail;e?(this.width=e[0],this.height=e[1],this.#_c=t.item.title):this.#_c=null}#Nc(t){this.width=t.detail,this.#_c=null}#jc(t){this.height=t.detail,this.#_c=null}reset(){this.name=""}async init(){this.width=1920,this.height=1080,this.title="",await this.updateComplete}static{this.styles=[Vv`
    :host {
        font-size: 12px;
    }
    .label {
        width: 130px;
    }

    `]}}})();const UC=[{title:"Recent projects",value:!1},{title:"Samples",value:!0}];class $C extends Zx{#kl;#Tc;#zc;#Ac=null;#Pc=!1;async init(t){this.dialog.cancelable=!0,this.#kl=t.open,this.#Tc=t.settings,this.#zc=t.recent,this.#Ac=t.samples||null,null==this.#Ac||this.#zc?.length||(this.#Pc=!0),await this.#Tc.init(),this.requestUpdate(),await this.updateComplete}render(){const t=null!=this.#Ac,e=t&&this.#Pc;return Ib`
            <div id="recents-panel">
                <div id="expressive-logo"></div>
                ${this.#Dc(t,e)}
                ${e?this.#Ec():this.#Oc()}
                <div style="display: flex">
                    <cc-button @click=${this.#Rc} variant="secondary" outline>Open...</cc-button>
                </div>
            </div>
            <div id="panel-separator"></div>
            <div id="settings-panel">
                <div id="main-title">Create new project</div>
                <div style="flex: 1" class="v-scroll">
                    ${this.#Tc}
                </div>
                <div>
                    <cc-button style="float: right" @click=${this.#Wc} variant="accent">Create project</cc-button>
                </div>
            </div>
        `}#Dc(t,e){return t?Ib`<cc-tabs .value=${e} .items=${UC} @change=${this.#Bc} justify="fill"></cc-tabs>`:Ib`<div id="secondary-title">Recent projects</div>`}#Bc(t){this.#Pc=t.detail,this.requestUpdate()}#Ec(){return Ib`<div id="samples" class="v-scroll">${mw(this.#Ac,(t=>t.url),this.#Uc)}</div>`}#Uc=t=>Ib`<img class="sample-item" src=${t.img} title=${t.title} @click=${this.#$c} data-url=${t.url}>`;#$c(t){const e=t.target.dataset.url;this.dialog.close(e),function(t){xC("AppSampleOpened",{sample_name:t})}(e.split("/").pop())}#Oc(){return Ib`<div id="recent" class="v-scroll">${this.#Fc()}</div>`}#Fc(){const t=this.#zc;return t&&0!==t.length?t.map(((t,e)=>Ib`<div class="recent-item" @click=${this.#Vc} data-index=${e}>
                <div class="recent-item-name text-ellipsis">${t.handle.name}</div>
                <small class="recent-item-time">${function(t){let e=(t-new Date)/1e3;for(let t=0;t<=VC.length;t++){const i=VC[t];if(Math.abs(e)<i.amount)return FC.format(Math.round(e),i.name);e/=i.amount}return""}(t.date)}</small>
            </div>`)):Ib`<small>No recent projects</small>`}async#Vc(t){const e=this.#zc[+t.target.dataset.index];e?.handle&&await async function(t){const e={mode:"readwrite"};return"granted"===await t.queryPermission(e)||"granted"===await t.requestPermission(e)}(e.handle)&&this.dialog.close(e.handle)}async#Rc(){const t=await this.#kl();t&&this.dialog.close(t)}#Wc(){const t=this.#Tc.createProject();t&&(this.dialog.close(t),this.#Tc.reset(),function(t=0){xC("AppProjectCreated",{recent_count:t})}(this.#zc?.length||0))}static{this.styles=[mC,bx(".v-scroll"),wx,Vv`
:host {
    display: flex;
    flex-direction: row;
    width: 640px;
    height: 480px;
    padding: 16px;
    gap: 8px;
    user-select: none;
}

#recents-panel, #settings-panel {
    height: 100%;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

#recents-panel {
    width: 0;
    flex: 3;
}

#settings-panel {
    flex: 4;
}

#panel-separator {
    width: 1px;
    height: 100%;
    background: var(--separator-color);
}

#samples, #recent {
    flex: 1;
    scrollbar-gutter: stable;
    font-size: 12px;
}

#samples {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-auto-rows: min-content;
    gap: 5px;
    place-items: center;
}

.sample-item {
    cursor: pointer;
    border-radius: 8px;
    aspect-ratio: 1;
    width: 100%;
}

#recent {
    display: flex;
    flex-direction: column;
}

.recent-item {
    cursor: pointer;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 4px 2px;
    border-radius: 2px;
    gap: 2px;
}

.recent-item:hover {
    background: var(--surface-hover-color);
}

.recent-item-name {
    pointer-events: none;
}
.recent-item-time {
    white-space: nowrap;
    pointer-events: none;
}

#main-title {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 24px;
    text-transform: uppercase;
}

#secondary-title {
    margin-top: 8px;
    font-size: 12px;
    text-transform: uppercase;
    opacity: 0.45;
}
`]}}const FC=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),VC=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];class GC extends Gb{constructor(){super(...arguments),this.tool=null}}const HC=[{title:"Create clip path",icon:"expr:clip-path",shortcut:["ctrl","m"],action:I_,get disabled(){return!function(){const t=rh();return!(!t||!t.isElement)&&(1!==ah()||t.parent instanceof fg&&Wm(t))}()}},{title:"Create clip mask",icon:"workflow:Preset",shortcut:["alt","ctrl","m"],action:__,get disabled(){return!function(){const t=rh();return!(!t||!t.isElement)&&(1!==ah()||t.parent instanceof fg&&t.isRenderable)}()}},null,{title:"Draw inside",icon:"workflow:EditInLight",shortcut:["shift","ctrl","m"],action:C_,get disabled(){return!function(){const t=rh();if(!t||!t.isElement)return!1;for(const t of sh())if(Wm(t))return!0;return!1}()}}];function ZC(t,e){return{title:qI(t=`filter:${t}`),icon:KI(t),action:()=>CI((()=>new e))}}const YC={title:"Add effect",icon:"workflow:Effects",get disabled(){const t=rh();return!(t&&(t.isFilterContainer||t.isFilter||t.supportsFilters&&(t.isLayer||t.isElement)))},children:[ZC("color-adjust",tm),ZC("blur",Xg),ZC("drop-shadow",em)]},QC={title:"Arrange",children:[{title:"Bring forward",shortcut:["ctrl","]"],icon:"expr:bring-forward",action:Bk},{title:"Bring to front",shortcut:["shift","ctrl","]"],icon:"expr:bring-front",action:Uk},{title:"Send backward",shortcut:["ctrl","["],icon:"expr:send-backward",action:$k},{title:"Send to back",shortcut:["shift","ctrl","["],icon:"expr:send-back",action:Fk}],get disabled(){return lh()}},JC={title:"Select",children:[{title:"Select all",shortcut:["ctrl","a"],action:Dk},{title:"Select none",shortcut:["shift","ctrl","a"],action:Ek}]};function qC(t,e){return{title:t,selectable:!0,get value(){return Ev()===e},action(){Dv(e)}}}const KC=[{title:"New project",shortcut:["ctrl","p"],icon:"workflow:Document",action(){xI()}},null,{title:"Open",shortcut:["ctrl","o"],icon:"workflow:FolderOpen",action(){wI()}},{title:"Save",shortcut:["ctrl","s"],icon:"workflow:SaveFloppy",action(){kI(!1)}},{title:"Save as...",shortcut:["shift","ctrl","s"],icon:"expr:save-as",action(){kI(!0)}},null,{title:"Import",shortcut:["ctrl","i"],icon:"workflow:AssetsAdded",action(){_I()}},{title:"Export",shortcut:["ctrl","e"],icon:"workflow:AssetsDownloaded",action(){$I()}},null,{title:"Theme",icon:"workflow:ColorPalette",children:[qC("System","auto"),qC("Light","light"),qC("Dark","dark")]},{get title(){return 0!==WebGLBuffAddr0xf1362.valueOf()?"License info":"Upgrade to Pro"},icon:"workflow:Login",action(){VI()}},{title:"About",shortcut:["f1"],icon:"workflow:InfoOutline",action(){HI()}}];class XC extends Gb{render(){return Ib`<cc-action-button title="Clip & Mask" @click=${this.#ls}>
            <cc-icon name="workflow:Preset"></cc-icon>
        </cc-action-button>`}async#ls(t){await bv(HC,t.target,"bottom-right")}}let tL=0,eL=null;function iL(t,e){eL=t,h_(1===tL||1===ah()?Ck():Eh(),t.value,e?.altKey)}function nL(t,e){eL=t,d_(t.value,e?.altKey)}function sL(t){return!rh()?.isElement||ah()<t}function rL(t,e,i){return{title:t,icon:e,value:i,action:iL,get disabled(){return sL(1)},preventClose:!0}}function oL(t,e,i){return{title:t,icon:e,value:i,action:nL,get disabled(){return sL(3)},preventClose:!0}}const aL=["Align horizontally",rL("Left","workflow:AlignLeft",{x:1,y:0}),rL("Center","workflow:AlignCenter",{x:2,y:0}),rL("Right","workflow:AlignRight",{x:3,y:0}),"Align vertically",rL("Top","workflow:AlignTop",{x:0,y:1}),rL("Middle","workflow:AlignMiddle",{x:0,y:2}),rL("Bottom","workflow:AlignBottom",{x:0,y:3}),"Distribute",oL("Horizontally","workflow:DistributeHorizontally",!1),oL("Vertically","workflow:DistributeVertically",!0),"Options",{title:"Align to selection",selectable:!0,get value(){return 0===tL},action(){tL=0},preventClose:!0},{title:"Align to document",selectable:!0,get value(){return 1===tL},action(){tL=1},preventClose:!0}];class lL extends Gb{#Gc;#Hc;#Na=aL[1];constructor(){super(),hC(this,[[Bt,this.#Zc],[Yt,this.#Zc]])}render(){return Ib`<cc-action-group compact>
                <cc-action-button id="action" @click=${this.#ls}>
                    <cc-icon id="icon"></cc-icon>
                </cc-action-button>
                <cc-action-button @click=${this.#Yc}>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>`}firstUpdated(){this.#Gc=this.shadowRoot.getElementById("action"),this.#Hc=this.shadowRoot.getElementById("icon"),this.#Qc()}#Zc=()=>{this.#Gc.disabled=this.#Na.disabled};#Qc(){const t=this.#Gc,e=this.#Na;t.disabled=e.disabled,t.title=e.title,this.#Hc.name=e.icon}#ls(){const t=this.#Na;t.action(t)}async#Yc(t){await bv(aL,t.target,"bottom-right"),eL&&this.#Na!==eL&&(this.#Na=eL,this.#Qc())}}function cL(t){return(e,i,n,s)=>({title:n,selectable:!0,preventClose:!0,shortcut:s,get value(){return e()[i]},action(){const n=e();n[i]=!n[i],t()}})}function uL(t){return(e,i)=>{const n=e();n[i]=!n[i],t()}}async function hL(){let t="/license.html";const e=document.querySelector('meta[name="expressive:license"]');return e&&(t=e.getAttribute("content")),await(await fetch(t)).text()}const dL="model-snapping";function fL(t){return Aa(dL,t)}let pL,gL;function mL(t,e){if(!t.hidden&&!function(t){return xS.has(t)}(t)){if(t.supportsChildren&&t.hasChildren&&function(t){return t.isLayer||t instanceof Hp}(t))for(const i of t.children(!0))mL(i,e);(function(t){return t instanceof Xp||!(!t.isRenderable||t.isLayer||t instanceof Hp)})(t)&&(e.bounds&&RS(t.globalBounds),e.points&&function(t){t instanceof qp||t instanceof Yp?OS(t.points,t.globalMatrix):(t instanceof Zp||t instanceof Xp)&&function(t,e,i){if(e&&!e.isIdentity)for(const n of t)ES(e.point(n.point.x,n.point.y),i);else for(const e of t)ES(e.point,i)}(t.path.nodes,t.globalMatrix)}(t))}}function yL(){return iu(pc().matrix.lineScale/bl)}function vL(){const t=pc();return t.save(),t.multiplyMatrix(dl),yL(),t}function bL(t,e=!0){return e?(e,i)=>{const n=vL();t(e,i),n.restore()}:(e,i)=>{const n=pc();n.save(),n.multiplyMatrix(dl),t(e,i),n.restore()}}function xL(t,e){const i=pc();if(t.isIdentity)return void e(i);i.save(),i.multiplyMatrix(t);const n=t.lineScale;if(1===n)e(i);else{const t=Gc;iu(t*n),e(i),iu(t)}i.restore()}function wL(t,e){if(!t||!e)return;const i=function(...t){return wi.fromTransformedPoints(dl,...t)}(t,e);i.isVisible&&pc().drawRect(i,Kc("selection-area"))}function ML(t,e){if(!t?.isElement)return;const i=pc(),n=Xc("element-outline");t instanceof Wh?i.drawPath(t.globalPath,n):t instanceof Xp?i.drawPathTransformed(t.path,t.globalMatrix,n):t instanceof fg?i.drawPathTransformed(t.clipPath,t.globalMatrix,n):e?i.drawRect(t.globalBounds.bounds,n):i.drawQuad(t.globalBounds,n)}function SL(t,e,i){if(!t?.isElement)return;const n=pc(),s=t.globalBounds;n.drawQuad(s,Xc("tool")),e&&(i&&!t.isResizable?IL(s.middle,null,!1):_L(s,!1))}function kL(t,e,i){pc().drawBox(t,Xc("tool")),e?_L(t,i):i&&IL(t.middle,null,!0)}function _L(t,e){const i=tu("tool-handle-radius"),n=pc();e&&n.drawCircle(t.middle,i,Kc("tool-handle-filled"));const s=Kc("tool-handle"),r=Xc("tool");for(const e of t.sidePoints())n.drawCircle(e,i,s),n.drawCircle(e,i,r)}function IL(t,e,i){e&&!e.isIdentity&&(t=e.point(t.x,t.y));const n=pc(),s=tu("tool-handle-radius");i?n.drawCircle(t,s,Kc("tool-handle-filled")):(n.drawCircle(t,s,Kc("tool-handle")),n.drawCircle(t,s,Xc("tool")))}function CL(t,e){const i=Xc("path-line"),n=pc();e?n.drawPathTransformed(t,e,i):n.drawPath(t,i)}function LL(t,e,i,n){i&&!i.isIdentity&&(t=i.point(t.x,t.y),e=i.point(e.x,e.y)),pc().drawLine(t,e,n??Xc("path-line"))}function NL(){if(gL)return gL;const t=new Skia.SkPath;return t.isVolatile=!0,t.fillType=Skia.SkPathFillType.Winding,gL=t}function jL(t,e,i){const n=t.length;if(!n)return;i&&i.isIdentity&&(i=null);const s=pc(),r=tu("path-node-radius"),o=Xc("path-line"),a=Kc("path-node-unselected");let l;const c=NL();if(!e?.size){for(let e=0;e<n;e++)l=i?i.point(t[e].x,t[e].y):t[e],c.addCircle(l.x,l.y,r);return s.drawPathDirect(c,a),s.drawPathDirect(c,o),void c.rewind()}for(let s=0;s<n;s++)e.has(s)||(l=i?i.point(t[s].x,t[s].y):t[s],c.addCircle(l.x,l.y,r));c.isEmpty||(s.drawPathDirect(c,a),s.drawPathDirect(c,o),c.rewind());const u=Kc("path-node-selected");for(let n of e)t[n]&&(l=i?i.point(t[n].x,t[n].y):t[n],c.addCircle(l.x,l.y,r));c.isEmpty||(s.drawPathDirect(c,u),c.rewind())}function TL(t,e){e&&e.isIdentity&&(e=null);const i=tu("path-node-radius"),n=Xc("path-line"),s=Kc("path-node-unselected"),r=Math.max(t.length-1,1),o=NL();if(e&&!e.isIdentity){let n;for(let s=0;s<r;s++)n=e.point(t[s].x,t[s].y),o.addCircle(n.x,n.y,i)}else for(let e=0;e<r;e++)o.addCircle(t[e].x,t[e].y,i);if(!o.isEmpty){const t=pc();t.drawPathDirect(o,s),t.drawPathDirect(o,n),o.rewind()}}function zL(t,e,i){if(!e?.size)return;i&&i.isIdentity&&(i=null);const n=pc(),s=Xc("path-handle"),r=tu("path-handle-radius");let o,a,l;for(const c of e)o=t[c],o&&pn(o)&&(a=i?i.point(o.point.x,o.point.y):o.point,null!=o.handleIn&&(l=i?i.point(o.handleIn.x,o.handleIn.y):o.handleIn,n.drawLine(a,l,s),n.drawCircle(l,r,s.brush)),null!=o.handleOut&&(l=i?i.point(o.handleOut.x,o.handleOut.y):o.handleOut,n.drawLine(a,l,s),n.drawCircle(l,r,s.brush)))}function AL(t,e){if(!pn(t))return;null!=e&&e.isIdentity&&(e=null);const i=Xc("path-handle"),n=tu("path-handle-radius"),s=e?e.point(t.point.x,t.point.y):t.point;let r;const o=pc();t.handleIn&&(r=e?e.point(t.handleIn.x,t.handleIn.y):t.handleIn,o.drawLine(s,r,i),o.drawCircle(r,n,i.brush)),t.handleOut&&(r=e?e.point(t.handleOut.x,t.handleOut.y):t.handleOut,o.drawLine(s,r,i),o.drawCircle(r,n,i.brush))}function PL(t,e,i){const n=pc(),s=Xc("path-line");if(t instanceof Zp)return n.drawPath(t.globalPath,s),zL(t.path.nodes,e,t.globalMatrix),jL(t.path.nodes,e,t.globalMatrix),!0;if(t instanceof qp)return!i&&(n.drawPath(t.globalPath,s),jL(t.points,e,t.globalMatrix),!0);if(t instanceof Yp)return n.drawPath(t.globalPath,s),jL(t.points,e,t.globalMatrix),!0;if(t instanceof Xp){const i=t.globalMatrix;if(null==i||i.isIdentity)n.drawPath(t.path,s),zL(t.path.nodes,e),jL(t.path.nodes,e);else{const r=new zs(ls(t.nodes,i));n.drawPath(r,s),zL(r.nodes,e),jL(r.nodes,e),r.dispose()}return!0}return!1}Qc("element-outline",1,"red"),Qc("selection-wrapper",1,"gray"),Jc("selection-area","#00F4"),Qc("tool",1,"blue"),Jc("tool-handle","white"),Jc("tool-handle-filled","blue"),qc("tool-handle-radius",4),Qc("text-baseline",1,"magenta"),Qc("path-line",2,"green"),Jc("path-node-selected","green"),Jc("path-node-unselected","white"),qc("path-node-radius",4),Qc("path-handle",1,"green"),qc("path-handle-radius",2.5),Qc("guide",1),Qc("guide-hover",1);const DL={seeThrough:!1,wireframe:!1};function EL(t,e){"boolean"==typeof e&&(DL.seeThrough=e,e=DL);for(let i of Gu(!0))if(i=i.getElementAt(t,e))return i;return null}function OL(t,e){return!t||t.globalMatrix.isIdentity?e:t.globalMatrix.inversePoint(e.x,e.y)}function RL(t){return wi.merge(WL(t))}function*WL(t){for(const e of t)e instanceof Hp?yield*WL(e.children()):yield e.globalBounds.bounds}function BL(t,e=Be.ZERO,i=!1,s=!0){Ia();const r=Fu(!0),o=t(e,r);return function(t,e,i){if(!t.isTransformable)return!1;if(!e||e.isIdentity)return!!i&&(t.position=i,!0);const n=e.decompose();t.rotate=n.rotate,t.skewAngle=n.skew,t.scale=n.scale,i&&(t.position=e.point(i.x,i.y))}(o,r,e),s&&(Oy.decorate(o),i&&o instanceof Rh&&o.isStrokeVisible&&(o.strokeLineWidth=n(10*bl/vl,.1,500))),function(t){if(Au())if(Lu()){const e=zu();e.parent.insertAfter(t,e),Bu(t)}else Tu().appendChild(t);else ch().appendChild(t);Xm(t)&&Rm()}(o),dh(o),Ca(),o}function UL(t){return t instanceof Zp?t.shape:t instanceof Xp?t.path:null}function $L(t,e,i,n,s){if(lh())return null;let r=null,o=Number.POSITIVE_INFINITY;for(const l of Th(Mm)){const c=FL(l,t,e?pm(l):null,i,n,s);if(null!=c&&c.distance<o&&(o=c.distance,r=c,a(o,0)))break}return r}function FL(t,e,i,n,s,r){let o=Number.POSITIVE_INFINITY,a=null,l=null,c=null,u=null,h=null,d=null;t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e));const f=eu("path-node-radius",t.globalMatrix);if(t instanceof Yp){const i=t.shape?.getPositionInfo(e,f,n?f:null);null!=i&&(l=i.index,o=i.distance,c=i.node,d=i.percent,a=null==d?0:2,u=h=null)}else if(t instanceof qp){if(s)return null;const i=t.shape?.getPositionInfo(e,f);null!=i&&(l=i.index,o=i.distance,c=i.node,d=null,a=0,u=h=null)}else{const n=r||!i?.size?null:eu("path-handle-radius",t.globalMatrix),s=UL(t)?.getPositionInfo(e,f,n,f);null!=s&&(null==s.handle||null!=i&&i.has(s.index))&&(l=s.index,o=s.distance,c=s.node,d=s.percent,h=s.handle,null!=h?(u=Sn(s.node,h),a=1):(u=null,a=null==d?0:2))}return null==l?null:{element:t,type:a,index:l,node:c,distance:o,percent:d,handle:u,handleType:h}}class VL extends Vc{static{this.dblClick=null}get handleMoveByArrows(){return!1}deactivate(){super.deactivate(),NS()}onStateChanged(){TS(),ic()}onIsolationContextChanged(){TS(),ec()}onSelectionChanged(){ic()}onDocumentTreeChanged(){ic()}onFocus(){}onBlur(){}onMouseEnter(t){}onMouseLeave(t){}onMouseHover(t){}onContextMenu(t){}onKeyboardStatusChange(t,e){}render(t){this.isPanning||(this.draw(t),function(t){if(!dS)return;t.save(),t.multiplyMatrix(dl);const e=t.matrix.lineScale/bl,i=Yc.get("guide").original,n=Kc("guide");if(tS.length){gS.width=i/e,gS.brush=n;for(const e of tS)t.drawLine(e[0],e[1],gS)}if(iS.size){mS.brush=n,mS.width=i/e,mS.dashes=[2/e,4/e];for(const e of iS)t.drawBox(e,mS)}if(eS.size){const i=3/e;for(const e of eS)t.drawCircle(e,i,n)}t.restore()}(pc()))}onDblClick(t){const e=EL(t.position,nl);null==e?rl?Eu(null):Ru():VL.dblClick?.(e,t)||Eu(e)}onKeyDown(t){return!(!this.isWorking&&("Escape"===t.code?(this.#Jc(),0):"Enter"===t.code?(this.#qc(),0):!this.handleMoveByArrows||"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key||(this.onMoveByArrows(t,"ArrowLeft"===t.key?-1:"ArrowRight"===t.key?1:0,"ArrowUp"===t.key?-1:"ArrowDown"===t.key?1:0),0)))}onKeyUp(t){return!!this.isWorking||!(!this.handleMoveByArrows||"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key)&&(this.onMoveByArrowsFinish(t),!0)}#Jc(){sl?Ru():Eu(null)}#qc(){const t=rh();t&&Eu(t,!1)}onMoveByArrows(t,e,i){const n=nl,s=t.shiftKey?10:1,r=new Be(e*s,i*s);Fg(Nh(),r,n)}onMoveByArrowsFinish(t){}}class GL extends VL{#Sl=[null,null];#Kc=new Map;#Xc;#tu;#eu=null;#iu=null;constructor(t,e){super(),this.#Xc=new Map(t),this.#Xc.has(null)&&(this.defaultCanvasCursor=this.#Xc.get(null)),this.#tu=e?new Map(e):null}addAction(t,e){this.#Kc.set(t,e)}getAction(t){return this.#Kc.get(t)}get hover(){return this.#Sl}activate(){super.activate(),this.update()}deactivate(){this.#Sl[0]=this.#Sl[1]=null,this.#eu=this.#iu=null,super.deactivate()}onStateChanged(){super.onStateChanged(),this.update()}onIsolationContextChanged(){!this.isWorking&&this.update(),super.onIsolationContextChanged()}onSelectionChanged(){!this.isWorking&&this.update(),super.onSelectionChanged()}onMouseLeave(t){!this.isWorking&&this.update(t.position)}update(t){this.#nu(t??Ul())&&(this.updateCursor(),ic())}updateCursor(){Zl(this.getHoverCursor(this.#Sl[0],this.#Sl[1]))}#nu(t){const e=this.#Sl,[i,n]=this.getHoverInfo(t),s=i===e[0]&&(n===e[1]||this.#tu?.get(i)?.(n,e[1]));return e[0]=i,e[1]=n,!s}sameHoverInfo(t,e,i){return e===i||this.#tu?.get(t)?.(e,i)}getHoverCursor(t,e){const i=this.#Xc?.get(t);return"function"==typeof i?i(e):i??this.defaultCanvasCursor}draw(t){if(this.isWorking){const e=this.#eu;if(e?.draw)return void e.draw(this.#iu,t)}this.drawTool(t)}onMouseLeftButtonDown(t){this.isWorking=!0;const e=this.#Kc.get(this.#Sl[0]);"function"==typeof e?[this.#eu,this.#iu]=e(t,this.#Sl[1]):(this.#eu=e,this.#iu=e?.down?.(t,this.#Sl[1]))}onMouseLeftButtonUp(t){const e=this.#eu?.up?.(t,this.#iu);this.#eu=this.#iu=null,this.isWorking=!1,this.update(t.position),e&&(_a()?ka():ga())}onMouseLeftButtonMove(t,e){this.#eu?.move?.(t,this.#iu,e)}onMouseHover(t){this.update(t.position)}}class HL extends VL{constructor(){super(),this.element=null,this.useGradientUpdater=!0,this.startPoint=null,this.currentPoint=null,this.drawSelectionWhenWorking=!0,this.useSnapping=!0,this.scaleStrokeWithZoom=!1,this.#su=null,this.#ru=null,this.dblClickDelta=-1,this.defaultCanvasCursor="target"}get allowGuideCreation(){return!0}activate(){super.activate(),lh()||Oy.update(rh()),Ol&&!this.startPoint&&this.useSnapping&&LS()}deactivate(){this.disposeBuilder(),super.deactivate()}onStateChanged(){super.onStateChanged(),this.element=null,this.startPoint=this.currentPoint=null}onMouseEnter(t){!this.startPoint&&this.useSnapping&&LS()}onMouseLeave(t){this.startPoint||NS()}draw(){if(lh())return;const t=vL();if(!this.isWorking||this.drawSelectionWhenWorking)for(const t of jh())t!==this.element&&this.drawSelectedElement(t);this.element&&this.drawElement(this.element),t.restore()}drawSelectedElement(t){SL(t)}drawElement(t){SL(t)}get shouldMoveOriginToMiddle(){return!0}onKeyboardStatusChange(t){this.element?(this.updateElement(this.element,this.startPoint,this.currentPoint),this.applyGradients(),ec(),kd([1,4])):ic()}saveElement(){this.element&&(this.shouldMoveOriginToMiddle&&Eg(this.element,!0),ga(),this.element=null)}onMouseHover(t){this.element?this.onMouseLeftButtonMove(t):this.useSnapping&&(FS(t.position),ic())}onMouseLeftButtonDown(t){this.element?this.onMouseLeftButtonMove(t):(Jo(),this.isWorking=!0,this.startPoint=this.currentPoint=this.useSnapping?FS(t.position):t.position,Oy.update(rh()),xh())}snapMouseMovePoint(t){return this.useSnapping?FS(t):t}onMouseLeftButtonMove(t){const e=this.snapMouseMovePoint(t.position);this.currentPoint&&e.equals(this.currentPoint)||(this.currentPoint=e,this.element?(this.updateElement(this.element,this.startPoint,this.currentPoint),this.applyGradients(),kd([1,4])):this.createBuilder(),ec())}onMouseLeftButtonUp(t){this.saveElement(),this.disposeBuilder(),this.useSnapping&&LS(),ec(),this.isWorking=!1}#su;#ru;saveGradients(){if(!this.useGradientUpdater)return;const t=Oy.fill,e=Oy.strokeBrush,i=Oy.brushBounds;t instanceof nn&&(this.#su=t.toRelative(i)),e instanceof nn&&(this.#ru=e.toRelative(i))}clearGradients(){this.#su=this.#ru=null}applyGradients(){if(!this.useGradientUpdater)return;const t=this.element;t&&(this.#su&&(t.fill=this.#su.toAbsolute(t.localBounds)),this.#ru&&(t.strokeBrush=this.#ru.toAbsolute(t.localBounds)))}createBuilder(){this.element||(this.saveGradients(),this.element=BL(this.createElement.bind(this),this.startPoint,this.scaleStrokeWithZoom,!0))}disposeBuilder(){const t=this.element;this.element=null,t&&(vh(t),Fm(t)),NS(),this.startPoint=this.currentPoint=null,this.clearGradients()}}const ZL=[null,null];function YL(t=null,e,i,n){return{draw:qL,move:QL,down:e=>[e.position,e.position,t,i,!n],up:e?(t,i)=>(e(t,i[0])?ic():JL(t,i),!1):JL}}function QL(t,e){e[1].equals(t.position)||(e[1]=t.position,ic())}function JL(t,e){return gh(wi.fromPoints(e[0],t.position),e[2]??nl,e[3],sl),ic(),!1}function qL(t){if(t[4]&&!lh()){const t=vL();for(const t of jh())SL(t,!1);t.restore()}wL(t[0],t[1])}const KL=new $i;function XL(t,e){const i=KL.toIdentity();i.multiply(t.globalMatrix);const n=e.matrix;return n&&i.multiply(n),i}function tN(t,e,i,n){let s=t.y;const r=n.matrix;return r&&(s=r.transformInversePoint(t).y),s=Math.abs(e.y-s),n.scale*s/i}function eN(t){return t instanceof sn?rN:t instanceof rn?aN:t instanceof on?cN:t instanceof an?hN:null}function iN(t){return t instanceof sn?sN:t instanceof rn?oN:t instanceof on?lN:t instanceof an?uN:null}function nN(t){switch(t[2]){case 0:case 2:case 1:return"gradient-move"}return"gradient-resize"}function sN(t,e){let{start:i,end:n}=e;const s=XL(t,e);s.isIdentity||(i=s.point(i.x,i.y),n=s.point(n.x,n.y)),LL(i,n,null,Xc("tool")),IL(Be.center(i,n),null,!0),IL(i),IL(n)}function rN(t,e,i,n){const s=XL(e,i),r=nl;if(sl&&2!==t){const e=r?i.center:0===t?i.end:i.start;n=s.isIdentity?GS(e,n):GS(s.point(e.x,e.y),n)}else n=FS(n);s.isIdentity||(n=s.inversePoint(n.x,n.y));const o=i.matrix;if(2===t)return o&&(n=o.transformPoint(n)),i.withCenter(n);if(r)return 0===t?i.withPosition(n,n.mirror(i.center)):i.withPosition(n.mirror(i.center),n);let{start:a,end:l,transform:c}=i;if(0===t?a=n:l=n,o&&(a=o.transformPoint(a),l=o.transformPoint(l)),c&&!c.isIdentity){const t=c.computeMatrix(Be.center(a,l));a=t.transformInversePoint(a),l=t.transformInversePoint(l)}return i.withPosition(a,l)}function oN(t,e){let i,n,s=e.center;const r=XL(t,e);r.isIdentity?(i=s.shifted(e.radius,0),n=s.shifted(0,-e.radius)):(i=r.point(s.x+e.radius,s.y),n=r.point(s.x,s.y-e.radius),s=r.point(s.x,s.y)),xL(r,(t=>{const i=Xc("tool");t.drawCircle(e.center,e.radius,i),t.drawLine(e.center,e.center.shifted(e.radius,0),i),t.drawLine(e.center,e.center.shifted(0,-e.radius),i)})),IL(s,null,!0),IL(n),IL(i)}function aN(t,e,i,n){n=FS(n);const s=e.globalMatrix;return s.isIdentity||(n=s.inversePoint(n.x,n.y)),2===t?i.withCenter(n):3===t?i.withRadius(i.center.distanceTo(n)):i.withScale(tN(n,i.center,i.radius,i))}function lN(t,e){let i,n,s,{start:r,end:o}=e;const a=XL(t,e);a.isIdentity?(i=r.shifted(0,e.startRadius),n=o.shifted(e.endRadius,0),s=o.shifted(0,-e.endRadius)):(i=a.point(r.x,r.y+e.startRadius),n=a.point(o.x+e.endRadius,o.y),s=a.point(o.x,o.y-e.endRadius),r=a.point(r.x,r.y),o=a.point(o.x,o.y)),xL(a,(t=>{const i=Xc("tool");t.drawCircle(e.start,e.startRadius,i),t.drawLine(e.start,e.start.shifted(0,e.startRadius),i),t.drawCircle(e.end,e.endRadius,i),t.drawLine(e.end,e.end.shifted(e.endRadius,0),i),t.drawLine(e.end,e.end.shifted(0,-e.endRadius),i)})),IL(r,null,!0),IL(i),IL(o,null,!0),IL(s),IL(n)}function cN(t,e,i,n){n=FS(n);const s=e.globalMatrix;s.isIdentity||(n=s.inversePoint(n.x,n.y));const r=sl,o=i.matrix;switch(t){case 1:if(r){if(o){let{start:t}=i;return t=o.transformPoint(t),t=i.transform.computeMatrix(n).transformInversePoint(t),i.withPosition(t,n)}return i.withEndCenter(n,rl)}return i.moveBy(n.sub(i.end));case 6:return i.withEndRadius(n.distanceTo(i.end),!r);case 4:return i.withScale(tN(n,i.end,i.endRadius,i));case 0:if(r){let t=i.start;return o&&(t=o.transformPoint(t)),i.moveBy(n.sub(t))}return o&&(n=o.transformInversePoint(n)),i.withStartCenter(n,rl);case 5:{let t=i.startRadius;if(0===t)return i.withStartRadius(n.distanceTo(i.start),!1);const e=tN(n,i.start,t,i)/i.scale;return i.withStartRadius(t*e,r)}}return i}function uN(t,e){const i=XL(t,e),n=i.isIdentity?e.center:i.point(e.center.x,e.center.y);xL(i,(i=>{const n=Xc("tool"),s=t.localBounds.diagonal/2;let r=e.arcLength;r%90==0||s===r*Math.SQRT1_2?r+=.1:r<=0&&(r=.1),i.drawArc(wi.fromCircle(e.center,s),e.startAngle,r,!0,n)})),IL(n,null,!0)}function hN(t,e,i,n){n=FS(n);const s=e.globalMatrix;return s.isIdentity||(n=s.inversePoint(n.x,n.y)),i.withCircle(n)}function dN(t,e){for(const i of e.runs)for(let e=0;e<i.indexes.length;e++)if(i.indexes[e]>=t)return i.positions[e];return e.left}function fN(t,e){if(t<=e[0].end)return e[0];const i=e.length-1;if(t>=e[i].start)return e[i];for(let n=1;n<i;n++)if(t>=e[n].start&&t<=e[n].end)return e[n];return e[i]}function pN(t,e){if(t<=e.left)return e.start;if(t>=e.right)return e.end;for(const i of e.runs)for(let e=1;e<i.positions.length;e++)if(t>=i.positions[e-1]&&t<=i.positions[e])return Math.abs(i.positions[e]-t)<=Math.abs(t-i.positions[e-1])?i.indexes[e]:i.indexes[e-1];return e.start}class gN{#ou;#au;#lu;#cu;#uu;#hu;#du;constructor(t){this.isFocused=!0,this.#ou=new Map,this.#au=new Map,this.#lu=null,this.#cu=null,this.#uu=null,this.#hu=!0,this.#fu=!1,this.element=t,this.#du=t.paragraph}get range(){return nm}dispose(){this.element=null,this.#du=null,this.#ou.clear(),this.#au.clear(),this.#lu=this.#uu=null,this.#ou=this.#au=null}rangeChanged(){Oy.update(this.element),this.#lu=null,this.#uu=null}#pu(){this.#fu=!0,this.element.invalidateParagraph(),this.invalidate()}invalidate(){this.#hu=!0,this.#lu=this.#uu=null,this.#cu=null,this.rangeChanged()}#gu(){this.#hu&&(this.#hu=!1,function(t,e,i){t.clear(),e.clear();for(const n of i)for(const i of n.runs)for(let n=0;n<i.indexes.length-1;n++){const s=i.indexes[n],r=i.indexes[n+1];r-s!=1&&(t.set(s,r),e.set(r,s))}}(this.#ou,this.#au,this.#du.lines))}#fu;get hasChanged(){return this.#fu}set hasChanged(t){this.#fu=t}get baselines(){return this.#cu??=function(t){const e=[];for(const i of t)if(i.runs)for(const t of i.runs)e.push(new Be(t.positions[0],t.baseline)),e.push(new Be(t.positions[t.positions.length-1],t.baseline));return e}(this.#du.lines)}get selectionRects(){return this.#lu??=function(t,e,i){if(e===i)return[];i<e&&([e,i]=[i,e]);const n=[];for(const s of t){if(s.start>i)break;s.end<e||(s.start<e?s.end>i?n.push(wi.fromLTRB(dN(e,s),s.top,dN(i,s),s.bottom)):n.push(wi.fromLTRB(dN(e,s),s.top,s.right,s.bottom)):s.end<=i?n.push(wi.fromLTRBObject(s)):n.push(wi.fromLTRB(s.left,s.top,dN(i,s),s.bottom)))}return n}(this.#du.lines,nm.start,nm.end)}get cursorLine(){return this.#uu??=function(t,e){const i=fN(t,e),n=dN(t,i);return[new Be(n,i.bottom),new Be(n,i.top)]}(nm.end,this.#du.lines)}#mu(t){const e=this.element.globalMatrix;e&&!e.isIdentity&&(t=e.inversePoint(t.x,t.y));const i=this.element.paragraph.matrix;return i&&(t=i.inversePoint(t.x,t.y)),t}getIndexAtPoint(t,e){return e&&(t=this.#mu(t)),function(t,e){return pN(t.x,function(t,e){let i,n=Number.POSITIVE_INFINITY;for(let s=e.length-1;s>=0;s--){const r=Math.abs(t-(e[s].top+e[s].bottom)/2);r<n&&(n=r,i=e[s])}return i}(t.y,e))}(t,this.#du.lines)}#yu(t){return function(t,e,i){if(t<=0)return 0;if(t>=i)return i;const n=fN(t,e);for(const e of n.runs){const i=e.indexes;for(let e=1;e<i.length;e++){if(t===i[e-1]||t===i[e])return t;if(t>i[e-1]&&t<i[e])return i[e-1]}}return n.end}(t,this.#du.lines,this.#du.source.length)}refreshRange(){return this.setRange(nm.start,nm.end)}setRange(t,e){return null!=t&&null!=e&&rm(t=this.#yu(t),e=this.#yu(e))}setPosition(t,e){if(null==t)return!1;const i=nm;return e?t===i.end?this.setRange(i.start,t):this.setRange(i.end,t):rm(t=this.#yu(t),t)}#vu(t){return this.#gu(),function(t,e){return t<=1?0:e.has(t)?e.get(t):t-1}(t,this.#au)}#bu(t){return this.#gu(),function(t,e,i){return t>=i?i:e.has(t)?e.get(t):t+1}(t,this.#ou,this.#du.source.length)}deleteLeft(){return this.#xu(-1)}deleteRight(){return this.#xu(1)}clearSelection(){return this.setPosition(nm.end,!1)}selectAll(){return this.setRange(0,this.#du.source.length)}moveTo(t,e,i){return this.setPosition(this.getIndexAtPoint(t,i),e)}moveLeft(t){const e=nm;return t?this.setRange(e.start,this.#vu(e.end)):e.start>e.end?this.setPosition(e.end,!1):e.start<e.end?this.setPosition(e.start,!1):this.setPosition(this.#vu(e.end),!1)}moveRight(t){const e=nm;return t?this.setRange(e.start,this.#bu(e.end)):e.start<e.end?this.setPosition(e.end,!1):e.start>e.end?this.setPosition(e.start,!1):this.setPosition(this.#bu(e.end),!1)}moveUp(t){return this.#wu(function(t,e){if(t<=0)return 0;const i=fN(t,e);return i===e[0]?t:pN(dN(t,i),e[e.indexOf(i)-1])}(nm.end,this.#du.lines),t)}moveDown(t){return this.#wu(function(t,e){const i=fN(t,e);return i===e[e.length-1]?t:pN(dN(t,i),e[e.indexOf(i)+1])}(nm.end,this.#du.lines),t)}#wu(t,e){return e?this.setRange(nm.start,t):this.setPosition(t,!1)}moveStart(t){const e=function(t,e){return fN(t,e).start}(nm.end,this.#du.lines);return t?this.setRange(nm.start,e):this.setPosition(e)}moveEnd(t){const e=function(t,e){return fN(t,e).end}(nm.end,this.#du.lines);return t?this.setRange(nm.start,e):this.setPosition(e)}insertText(t){const e=nm;if(!this.#du.insertText(t,e.end,e.start))return!1;const i=Math.min(e.start,e.end)+t.length;return rm(i,i),this.#pu(),!0}#xu(t){const e=nm;if(e.end===e.start){this.#gu();const i=this.#vu(e.end);return!!this.#du.removeText(e.end,1===t?this.#bu(e.end):i)&&(-1===t&&rm(i,i),this.#pu(),!0)}if(!this.#du.removeText(e.end,e.start))return!1;const i=Math.min(e.end,e.start);return rm(i,i),this.#pu(),!0}async cut(){return!!await this.copy()&&this.#xu(-1)}async copy(){const t=this.#du.source.getRange(nm.start,nm.end);return""!==t&&async function(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error(t),!1}}(t)}async paste(){const t=await async function(){return await Pt()?navigator.clipboard.readText():null}();return null!=t&&""!==t&&null!=this.element&&this.insertText(t)}async onKeydown(t){const e=t.shiftKey;switch(t.code){case"ArrowLeft":return this.moveLeft(e)?1:0;case"ArrowRight":return this.moveRight(e)?1:0;case"ArrowUp":return this.moveUp(e)?1:0;case"ArrowDown":return this.moveDown(e)?1:0;case"Home":return this.moveStart(e)?1:0;case"End":return this.moveEnd(e)?1:0;case"Clear":return this.clearSelection()?1:0;case"Backspace":return this.deleteLeft()?2:0;case"Delete":return this.deleteRight()?2:0;case"Enter":return this.insertText("\n")?2:0;case"Space":return this.insertText(" ")?2:0;case"Cut":return await this.cut()?2:0;case"Copy":return await this.copy()?1:0;case"Paste":return await this.paste()?2:0}if(t.ctrlKey||t.metaKey)switch(Ea(t)){case"X":return await this.cut()?2:0;case"C":return await this.copy()?1:0;case"V":return await this.paste()?2:0;case"A":return this.selectAll()?1:0}else if(i=t.key,!(Ka.has(i)||Xa.test(i)||tl.test(i)))return this.insertText(t.key)?2:0;var i;return 0}}const mN=[0,null],yN=[2,null],vN=[3,null];class bN extends GL{#Mu=null;#Su=!1;constructor(t=!1){super([[null,"text-add"],[2,"caret"],[1,"caret"],[3,"text-add"],[0,"text-add"]]),this.#Su=t,this.addAction(0,{draw:this.#ku,down:this.#_u,move:this.#Iu,up:this.#Cu}),this.addAction(3,{draw:this.#ku,down:this.#Lu,move:this.#Iu,up:this.#Cu}),this.addAction(2,{down:this.#Nu,move:this.#ju,up:this.#Tu}),this.addAction(1,{down:this.#zu,move:this.#ju,up:this.#Tu})}get name(){return"text"}get allowSpaceBarPan(){return!this.#Mu||!this.#Mu.isFocused}activate(){super.activate(),Io(Jt,this.#Au)}deactivate(){Co(Jt,this.#Au),this.#Pu(),super.deactivate()}#Au=()=>{this.#Du();const t=this.#Mu;t&&(t.rangeChanged(),ic())};#Du(){this.#Mu&&(uh(this.#Mu.element)&&this.#Mu.element.document||this.#Pu())}onStateChanged(){this.#Pu(),super.onStateChanged()}onIsolationContextChanged(){this.#Pu(),super.onIsolationContextChanged()}onSelectionChanged(){this.#Du(),super.onSelectionChanged()}onDocumentTreeChanged(){this.#Du(),super.onDocumentTreeChanged()}onFocus(){this.#Mu&&(this.#Mu.isFocused=!0,this.#Eu(),ic())}onBlur(){this.#Mu&&(this.#Ou(),this.#Mu.isFocused=!1,this.#Mu.hasChanged&&(this.#Mu.hasChanged=!1,ga()),ic())}get isEditorFocused(){return!!this.#Mu&&this.#Mu.isFocused}refreshEditor(){this.#Mu?.invalidate(),ic()}#Ru(t,e,i){const n=Oy;i=i||"Lorem ipsum";const s=new tr;s.width=t||0,s.height=e||0;const r=Tl(1);s.autoWidth=s.width<=r,s.autoHeight=s.height<=r,Oy.decorateParagraphStyle(s);const o=n.decorateTextStyle(Ur.CreateDefault()),a=new $r(o,0,i.length);let l;l=this.#Su?new Sg(new Vr(i,s,a)):new wg(new Fr(i,s,[a]));let c=!1,u=n.fill;const h=n.strokeBrush;return u instanceof nn&&(o.fill=u.toRelative(n.brushBounds).toAbsolute(l.localBounds),c=!0),h instanceof nn&&(o.strokeBrush=h.toRelative(n.brushBounds).toAbsolute(l.localBounds),c=!0),c&&l.invalidate(),l}#Wu(t){const e=EL(t,!0);return e instanceof xg?e:null}getHoverInfo(t){const e=this.#Wu(t);return e?e===this.#Mu?.element?yN:[1,e]:this.#Mu?vN:mN}drawTool(){const t=this.hover[1],e=this.#Mu;if(!t&&!e&&(lh()||!rh().isElement))return;const i=vL();if(e)this.#Bu(e),t&&t!==e.element&&ML(t);else{for(const e of jh())e!==t&&SL(e,!1,!1);t&&ML(t)}i.restore()}#Bu(t){const e=pc(),i=this.#Mu.element,n=i.paragraph.matrix;var s;e.save(),e.multiplyMatrix(i.globalMatrix),n&&e.multiplyMatrix(n),yL(),kL(i.paragraph.bounds,!1,!1),function(t){if(!t.length)return;const e=pc(),i=Xc("text-baseline");for(let n=0;n<t.length;n+=2)e.drawLine(t[n],t[n+1],i)}(t.baselines),function(t){if(!t?.length)return;const e=pc(),i=Kc("selection-area");for(const n of t)n.isVisible&&e.drawRect(n,i)}(t.selectionRects),this.#Uu&&LL((s=t.cursorLine)[0],s[1],void 0),e.restore(),yL()}#Lu=t=>{let e=!0;return this.#Mu&&(this.#Pu(),e=!1),{start:t.position,end:t.position,allowAuto:e}};#ku=t=>{wL(t.start,t.end)};#_u=t=>({start:t.position,end:t.position,allowAuto:!0});#Iu=(t,e)=>{e.end=t.position,ic()};#Cu=(t,e)=>{if(!e.allowAuto&&e.start.distanceTo(e.end)<=2*Math.SQRT2)return!1;if(rl&&e.start.equals(e.end)){const i=EL(t.position,!0);i&&(e.start=i.globalBounds.topLeft,e.start=i.globalBounds.bottomRight)}const i=wi.fromPoints(e.start,e.end),n=BL((()=>this.#Ru(i.width,i.height)),i.topLeft,!1,!1);return this.#$u(n).setRange(0,n.paragraph.source.length),!0};#zu=(t,e)=>(this.#Mu?.element!==e&&(dh(e,!1),this.#$u(e)),this.#Nu(t));#Nu=t=>{this.#Ou();const e=this.#Mu;return e.moveTo(t.position,sl,!0),ic(),{position:e.range.end}};#ju=(t,e)=>{const i=this.#Mu,n=i.getIndexAtPoint(t.position,!0);i.setRange(e.position,n)};#Tu=()=>(this.#Eu(),!1);onKeyDown(t){return!!this.isWorking||(this.#Mu?!!this.#Mu.isFocused&&(t.preventDefault(),t.stopPropagation(),"Escape"===t.code?(this.#Pu(),ec()):this.#Mu.onKeydown(t).then(this.#Fu),!0):super.onKeyDown(t))}onKeyUp(){return this.#Mu&&this.#Mu.isFocused&&this.#Eu(),!1}#Fu=t=>{this.#Ou(),1===t&&ic()};#Vu=0;#Uu=!0;#Gu=()=>{this.#Uu=!this.#Uu,ic()};#Eu(){this.#Vu||(this.#Vu=setInterval(this.#Gu,490),this.#Uu=!0)}#Ou(){this.#Vu&&(clearInterval(this.#Vu),this.#Vu=0),this.#Uu=!0}startEdit(t){this.#$u(t).selectAll()}#$u(t){return this.#Mu?.element===t||(this.#Pu(!1),this.#Mu=new gN(t),t.paragraph.isEditMode=!0,t.invalidateParagraph(),Oy.update(t),this.#Eu()),this.#Mu}#Pu(t=!0){if(this.#Ou(),!this.#Mu)return!1;const e=this.#Mu.element;e&&e.paragraph&&(e.paragraph.isEditMode=!1,e.invalidateParagraph());const i=this.#Mu.hasChanged;return this.#Mu.dispose(),this.#Mu=null,t&&this.update(),i&&ga(),i}}const xN=[0,null];function wN(t){switch(t.type){case 1:return rl?"node-sub":"node-move";case 2:return rl?"node-add":"node-mold";case 0:return rl&&!Ly(t.element)?"node-sub":"node-move"}return"node"}function MN(t,e){return t?!!e&&t.element===e.element&&t.type===e.type&&t.index===e.index&&t.handle==e.handle&&t.handleType==e.handleType:!e}class SN extends VL{#Hu;#Zu;#Ue;#wa;constructor(){super(),this.#Hu=null,this.#Zu=null,this.#Ue=null,this.#wa=new hn,this.horizontal=!1,this.isWorking=!0,this.dblClickDelta=-1}get name(){return"guide"}activate(){super.activate(),Zl(this.horizontal?"resize-v":"resize-h"),this.#wa.brush=Kc("guide")}deactivate(){super.deactivate(),this.#Hu=null,this.#Zu=null,this.#Ue=null,this.restore=null}draw(){pc().drawLine(this.#Hu,this.#Zu,this.#wa)}onMouseLeftButtonDown(t){LS(),this.onMouseLeftButtonMove(t)}onMouseLeftButtonMove(t){let e=sl?t.position.rounded():t.position;e=FS(e,this.horizontal?"x":"y"),this.#Ue=e,e=dl.transformPoint(e),this.horizontal?(this.#Hu=new Be(0,e.y),this.#Zu=new Be(pl.width,e.y)):(this.#Hu=new Be(e.x,0),this.#Zu=new Be(e.x,pl.height)),ic()}onMouseLeftButtonUp(t){const e=this.horizontal,i=e?this.#Ue.y:this.#Ue.x;if(e?t.canvasPosition.y>0:t.canvasPosition.x>0){const t=yk();t.exists(i,e)||(t.add(new dk(i,e)),ga())}NS(),this.restore?.(),this.restore=null}}let kN;function _N(t,e){return kN??=new SN,kN.horizontal=t,kN.restore=e,kN}const IN="render";function CN(t){return Aa(IN,t)}function LN(t){const e=CN();if(e.transparency||t.clear(yl.background),t.save(),t.multiplyMatrix(dl),e.transparency){const e=t.paint;e.isAntiAlias=!0,e.shader=(i=Tl(15),zN||(zN=new Skia.SkRuntimeShaderBuilder(Skia.SkRuntimeEffect.MakeForShader("\nuniform float size;\nhalf4 main(vec2 coord) {\n    vec2 uv = fract(coord / size);\n    uv -= 0.5;\n    return mix(.8, 1, step(uv.x * uv.y, 0)).rrr1;\n}"))),i!==PN?(PN=i,AN?.delete(),zN.float("size",i),AN=zN.makeShader()):AN),e.style=Skia.SkPaintStyle.Fill;const n=xl(),s=wl();t.canvas.drawRect(n.x,n.y,s.x,s.y,e),e.reset()}var i;const n=Mk,s=n.isSingle;if(e.transparency||(s?t.fillRect(n.bounds,yl.board,-.35/vl):t.fillPath(n.path,yl.board)),_k||e.transparency){const e=Sk.bounds,i=t.paint;i.isAntiAlias=!0,i.color=De.black.code,i.style=Skia.SkPaintStyle.Stroke,i.strokeWidth=Tl(1),t.canvas.drawRect(e,i),i.reset()}const r=uk();if(r.enabled&&!r.front&&ck().render(),e.clip&&(t.save(),s?t.clipRect(n.bounds):t.clipPath(n.path)),e.wireframe)!function(t){if(Au()){t.drawColor(yl.overlay);for(const e of ju()){if(!e.isRenderable||e.isInvisible)continue;const i=e.parent?.globalMatrix,n=i&&!i.isIdentity;n&&(t.save(),t.multiplyMatrix(i)),e.drawWireframe(t),n&&t.restore()}}else for(const e of su.children())e.drawWireframe(t)}(t);else if(e.pixelate&&vl>=.9){const e=t.matrix.clone();t.matrix=t.matrix.toIdentity();const i=Skia.SkImageFilter.MakeMatrixTransform(e,null,TN??=Skia.SkSamplingOptions.MakeFilterMipmap(Skia.SkFilterMode.Nearest,Skia.SkMipmapMode.None));t.saveFilter(i),NN(t),t.restore(),i.delete(),t.matrix=e}else NN(t);e.clip&&t.restore(),function(t){if(!Au()||Lu())return;const e=Tu(),i=e.isolationContour;i&&(t.save(),t.multiplyMatrix(e.globalMatrix),jN.width=2*t.getLineScale(bl),jN.brush=jN.brush.withColor(yl.contour),i instanceof wi?t.drawRect(i,jN):t.drawPath(i,jN),t.restore())}(t),r.enabled&&r.front&&ck().render(),vk().enabled&&gk?.render(),t.restore()}function NN(t){t.drawPicture(su.picture,Oe.NormalIsolatedComposition),Au()&&(t.drawColor(yl.overlay),function(t){t.saveLayer(Oe.NormalIsolatedComposition);for(const e of ju()){if(e.isInvisibleDrawing)continue;const i=e.parent?.globalMatrix,n=i&&!i.isIdentity;n&&(t.save(),t.multiplyMatrix(i)),e.draw(t),n&&t.restore()}t.restore()}(t))}Pa(IN,(t=>({ruler:t?.engine?.showRuler??!1,clip:t?.engine?.clipDocument??!1,wireframe:t?.engine?.wireframe??!1,pixelate:t?.engine?.pixelate??!1,transparency:!1})));const jN=new hn;let TN,zN,AN,PN;const DN={has:function(t){return lM.has(t)},read:async(t,e,i)=>pM(await t.arrayBuffer(),i,{position:e?.position,zoom:!e?.isShift&&e?.isAlt})},EN={};function ON(t){let e=t.length;for(;--e>=0;)t[e]=0}EN.G={concat:function(t,e){for(var i=0;i<e.cmds.length;i++)t.cmds.push(e.cmds[i]);for(i=0;i<e.crds.length;i++)t.crds.push(e.crds[i])},getBB:function(t){for(var e=1e99,i=1e99,n=-e,s=-i,r=0;r<t.length;r+=2){var o=t[r],a=t[r+1];o<e&&(e=o),o>n&&(n=o),a<i&&(i=a),a>s&&(s=a)}return[e,i,n,s]},rectToPath:function(t){return{cmds:["M","L","L","L","Z"],crds:[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]]}},insideBox:function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&t[2]<=e[2]&&t[3]<=e[3]},isBox:function(t,e){var i=function(t,e){for(var i=0;i<8;i+=2){for(var n=!0,s=0;s<8;s++)if(Math.abs(e[s]-t[s+i&7])>=2){n=!1;break}if(n)return!0}return!1};if(t.cmds.length>10)return!1;var n=t.cmds.join(""),s=t.crds,r=!1;if("MLLLZ"==n&&8==s.length||"MLLLLZ"==n&&10==s.length){if(10==s.length&&(s=s.slice(0,8)),null==e){e=[s[0],s[1],s[0],s[1]];for(var o=0;o<s.length;o+=2){var a=s[o],l=s[o+1];a<e[0]&&(e[0]=a),l<e[1]&&(e[1]=l),e[2]<a&&(e[2]=a),e[3]<l&&(e[3]=l)}}var c=e[0],u=e[1],h=e[2],d=e[3];r||(r=i(s,[c,u,h,u,h,d,c,d])),r||(r=i(s,[c,d,h,d,h,u,c,u]))}return r},boxArea:function(t){return(t[2]-t[0])*(t[3]-t[1])},newPath:function(t){t.pth={cmds:[],crds:[]}},moveTo:function(t,e,i){var n=EN.M.multPoint(t.ctm,[e,i]),s=t.pth,r=s.cmds.length;0!=r&&"M"==s.cmds[r-1]&&(s.cmds.pop(),s.crds.pop(),s.crds.pop()),t.pth.cmds.push("M"),t.pth.crds.push(n[0],n[1]),t.cpos=n},lineTo:function(t,e,i){var n=EN.M.multPoint(t.ctm,[e,i]);t.cpos[0]==n[0]&&t.cpos[1]==n[1]||(t.pth.cmds.push("L"),t.pth.crds.push(n[0],n[1]),t.cpos=n)},curveTo:function(t,e,i,n,s,r,o){var a;0==t.pth.cmds.length&&EN.G.moveTo(t,0,0),e=(a=EN.M.multPoint(t.ctm,[e,i]))[0],i=a[1],n=(a=EN.M.multPoint(t.ctm,[n,s]))[0],s=a[1],r=(a=EN.M.multPoint(t.ctm,[r,o]))[0],o=a[1],t.cpos=a,t.pth.cmds.push("C"),t.pth.crds.push(e,i,n,s,r,o)},closePath:function(t){t.pth.cmds.push("Z")},arc:function(t,e,i,n,s,r,o){if(o)for(;r>s;)r-=2*Math.PI;else for(;r<s;)r+=2*Math.PI;for(var a=(r-s)/4,l=Math.cos(a/2),c=-Math.sin(a/2),u=(4-l)/3,h=0==c?c:(1-l)*(3-l)/(3*c),d=[u,h],f=[u,-h],p=[l,-c],g={cmds:[0==t.pth.cmds.length?"M":"L"],crds:[l,c]},m=[1,0,0,1,0,0],y=0;y<4;y++)d=EN.M.multPoint(m,d),f=EN.M.multPoint(m,f),p=EN.M.multPoint(m,p),g.crds.push(d[0],d[1],f[0],f[1],p[0],p[1]),g.cmds.push("C"),0==y&&EN.M.rotate(m,-a);var v=[n,0,0,n,e,i];EN.M.rotate(m,a/2-s),EN.M.concat(m,v),EN.M.multArray(m,g.crds),EN.M.multArray(t.ctm,g.crds),EN.G.concat(t.pth,g),i=g.crds.pop(),e=g.crds.pop(),t.cpos=[e,i]},drawRect:function(t,e,i,n,s){EN.G.moveTo(t,e,i),EN.G.lineTo(t,e+n,i),EN.G.lineTo(t,e+n,i+s),EN.G.lineTo(t,e,i+s),EN.G.closePath(t)},toPoly:function(t){if("M"!=t.cmds[0]||"Z"!=t.cmds[t.cmds.length-1])return null;for(var e=1;e<t.cmds.length-1;e++)if("L"!=t.cmds[e])return null;var i=[],n=t.crds.length;for(t.crds[0]==t.crds[n-2]&&t.crds[1]==t.crds[n-1]&&(n-=2),e=0;e<n;e+=2)i.push([t.crds[e],t.crds[e+1]]);return EN.G.polyArea(t.crds)<0&&i.reverse(),i},fromPoly:function(t){for(var e={cmds:[],crds:[]},i=0;i<t.length;i++)e.crds.push(t[i][0],t[i][1]),e.cmds.push(0==i?"M":"L");return e.cmds.push("Z"),e},polyArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,i=(t[0]-t[e])*(t[e+1]+t[1]),n=0;n<e;n+=2)i+=(t[n+2]-t[n])*(t[n+1]+t[n+3]);return.5*-i},polyClip:function(t,e){var i,n,s=function(t){return(a[0]-i[0])*(t[1]-i[1])>(a[1]-i[1])*(t[0]-i[0])},r=function(){var t=[i[0]-a[0],i[1]-a[1]],e=[n[0]-c[0],n[1]-c[1]],s=i[0]*a[1]-i[1]*a[0],r=n[0]*c[1]-n[1]*c[0],o=1/(t[0]*e[1]-t[1]*e[0]);return[(s*e[0]-r*t[0])*o,(s*e[1]-r*t[1])*o]},o=t;i=e[e.length-1];for(let t in e){var a=e[t],l=o;o=[],n=l[l.length-1];for(let t in l){var c;s(c=l[t])?(s(n)||o.push(r()),o.push(c)):s(n)&&o.push(r()),n=c}i=a}return o}},EN.M={getScale:function(t){return Math.sqrt(Math.abs(t[0]*t[3]-t[1]*t[2]))},translate:function(t,e,i){EN.M.concat(t,[1,0,0,1,e,i])},rotate:function(t,e){EN.M.concat(t,[Math.cos(e),-Math.sin(e),Math.sin(e),Math.cos(e),0,0])},scale:function(t,e,i){EN.M.concat(t,[e,0,0,i,0,0])},concat:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5];t[0]=i*e[0]+n*e[2],t[1]=i*e[1]+n*e[3],t[2]=s*e[0]+r*e[2],t[3]=s*e[1]+r*e[3],t[4]=o*e[0]+a*e[2]+e[4],t[5]=o*e[1]+a*e[3]+e[5]},invert:function(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=e*s-i*n;t[0]=s/a,t[1]=-i/a,t[2]=-n/a,t[3]=e/a,t[4]=(n*o-s*r)/a,t[5]=(i*r-e*o)/a},multPoint:function(t,e){var i=e[0],n=e[1];return[i*t[0]+n*t[2]+t[4],i*t[1]+n*t[3]+t[5]]},multArray:function(t,e){for(var i=0;i<e.length;i+=2){var n=e[i],s=e[i+1];e[i]=n*t[0]+s*t[2]+t[4],e[i+1]=n*t[1]+s*t[3]+t[5]}}},EN.C={srgbGamma:function(t){return t<.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},cmykToRgb:function(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=255+e*(-4.387332384609988*e+54.48615194189176*i+18.82290502165302*n+212.25662451639585*s-285.2331026137004)+i*(1.7149763477362134*i-5.6096736904047315*n+-17.873870861415444*s-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*s+17.5119270841813)+s*(-21.86122147463605*s-189.48180835922747),o=255+e*(8.841041422036149*e+60.118027045597366*i+6.871425592049007*n+31.159100130055922*s-79.2970844816548)+i*(-15.310361306967817*i+17.575251261109482*n+131.35250912493976*s-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*s-24.86741582555878)+s*(-20.737325471181034*s-187.80453709719578),a=255+e*(.8842522430003296*e+8.078677503112928*i+30.89978309703729*n-.23883238689178934*s-14.183576799673286)+i*(10.49593273432072*i+63.02378494754052*n+50.606957656360734*s-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*s-193.58209356861505)+s*(-22.33816807309886*s-180.12613974708367);return[Math.max(0,Math.min(1,r/255)),Math.max(0,Math.min(1,o/255)),Math.max(0,Math.min(1,a/255))]},labToRgb:function(t){for(var e=903.3,i=.008856,n=t[0],s=t[1],r=(n+16)/116,o=r*r*r,a=r-t[2]/200,l=a*a*a,c=s/500+r,u=c*c*c,h=[96.72*(u>i?u:(116*c-16)/e)/100,100*(o>i?o:(116*r-16)/e)/100,81.427*(l>i?l:(116*a-16)/e)/100],d=[3.1338561,-1.6168667,-.4906146,-.9787684,1.9161415,.033454,.0719453,-.2289914,1.4052427],f=[d[0]*h[0]+d[1]*h[1]+d[2]*h[2],d[3]*h[0]+d[4]*h[1]+d[5]*h[2],d[6]*h[0]+d[7]*h[1]+d[8]*h[2]],p=0;p<3;p++)f[p]=Math.max(0,Math.min(1,EN.C.srgbGamma(f[p])));return f}},EN.getState=function(t){return{font:EN.getFont(),dd:{flat:1},ca:1,colr:[0,0,0],space:"/DeviceGray",CA:1,COLR:[0,0,0],sspace:"/DeviceGray",bmode:"/Normal",SA:!1,OPM:0,AIS:!1,OP:!1,op:!1,SMask:"/None",lwidth:1,lcap:0,ljoin:0,mlimit:10,SM:.1,doff:0,dash:[],ctm:[1,0,0,1,0,0],cpos:[0,0],pth:{cmds:[],crds:[]},cpth:t?EN.G.rectToPath(t):null,cpstack:[]}},EN.getFont=function(){return{Tc:0,Tw:0,Th:100,Tl:0,Tf:"Helvetica-Bold",Tfs:1,Tmode:0,Trise:0,Tk:0,Tal:0,Tun:0,Tm:[1,0,0,1,0,0],Tlm:[1,0,0,1,0,0],Trm:[1,0,0,1,0,0]}};const RN=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),WN=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),BN=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),UN=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$N=new Array(576);ON($N);const FN=new Array(60);ON(FN);const VN=new Array(512);ON(VN);const GN=new Array(256);ON(GN);const HN=new Array(29);ON(HN);const ZN=new Array(30);function YN(t,e,i,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}let QN,JN,qN;function KN(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}ON(ZN);const XN=t=>t<256?VN[t]:VN[256+(t>>>7)],tj=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},ej=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,tj(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},ij=(t,e,i)=>{ej(t,i[2*e],i[2*e+1])},nj=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},sj=(t,e,i)=>{const n=new Array(16);let s,r,o=0;for(s=1;s<=15;s++)o=o+i[s-1]<<1,n[s]=o;for(r=0;r<=e;r++){let e=t[2*r+1];0!==e&&(t[2*r]=nj(n[e]++,e))}},rj=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},oj=t=>{t.bi_valid>8?tj(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},aj=(t,e,i,n)=>{const s=2*e,r=2*i;return t[s]<t[r]||t[s]===t[r]&&n[e]<=n[i]},lj=(t,e,i)=>{const n=t.heap[i];let s=i<<1;for(;s<=t.heap_len&&(s<t.heap_len&&aj(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!aj(e,n,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=n},cj=(t,e,i)=>{let n,s,r,o,a=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+a++],n+=(255&t.pending_buf[t.sym_buf+a++])<<8,s=t.pending_buf[t.sym_buf+a++],0===n?ij(t,s,e):(r=GN[s],ij(t,r+256+1,e),o=RN[r],0!==o&&(s-=HN[r],ej(t,s,o)),n--,r=XN(n),ij(t,r,i),o=WN[r],0!==o&&(n-=ZN[r],ej(t,n,o)))}while(a<t.sym_next);ij(t,256,e)},uj=(t,e)=>{const i=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.elems;let o,a,l,c=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<r;o++)0!==i[2*o]?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):i[2*o+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,i[2*l]=1,t.depth[l]=0,t.opt_len--,s&&(t.static_len-=n[2*l+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)lj(t,i,o);l=r;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],lj(t,i,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,i[2*l]=i[2*o]+i[2*a],t.depth[l]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,i[2*o+1]=i[2*a+1]=l,t.heap[1]=l++,lj(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const i=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,r=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let c,u,h,d,f,p,g=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(i[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)u=t.heap[c],d=i[2*i[2*u+1]+1]+1,d>l&&(d=l,g++),i[2*u+1]=d,u>n||(t.bl_count[d]++,f=0,u>=a&&(f=o[u-a]),p=i[2*u],t.opt_len+=p*(d+f),r&&(t.static_len+=p*(s[2*u+1]+f)));if(0!==g){do{for(d=l-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(d=l;0!==d;d--)for(u=t.bl_count[d];0!==u;)h=t.heap[--c],h>n||(i[2*h+1]!==d&&(t.opt_len+=(d-i[2*h+1])*i[2*h],i[2*h+1]=d),u--)}})(t,e),sj(i,c,t.bl_count)},hj=(t,e,i)=>{let n,s,r=-1,o=e[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)s=o,o=e[2*(n+1)+1],++a<l&&s===o||(a<c?t.bl_tree[2*s]+=a:0!==s?(s!==r&&t.bl_tree[2*s]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,r=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},dj=(t,e,i)=>{let n,s,r=-1,o=e[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),n=0;n<=i;n++)if(s=o,o=e[2*(n+1)+1],!(++a<l&&s===o)){if(a<c)do{ij(t,s,t.bl_tree)}while(0!=--a);else 0!==s?(s!==r&&(ij(t,s,t.bl_tree),a--),ij(t,16,t.bl_tree),ej(t,a-3,2)):a<=10?(ij(t,17,t.bl_tree),ej(t,a-3,3)):(ij(t,18,t.bl_tree),ej(t,a-11,7));a=0,r=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}};let fj=!1;const pj=(t,e,i,n)=>{ej(t,0+(n?1:0),3),oj(t),tj(t,i),tj(t,~i),i&&t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i};var gj={_tr_init:t=>{fj||((()=>{let t,e,i,n,s;const r=new Array(16);for(i=0,n=0;n<28;n++)for(HN[n]=i,t=0;t<1<<RN[n];t++)GN[i++]=n;for(GN[i-1]=n,s=0,n=0;n<16;n++)for(ZN[n]=s,t=0;t<1<<WN[n];t++)VN[s++]=n;for(s>>=7;n<30;n++)for(ZN[n]=s<<7,t=0;t<1<<WN[n]-7;t++)VN[256+s++]=n;for(e=0;e<=15;e++)r[e]=0;for(t=0;t<=143;)$N[2*t+1]=8,t++,r[8]++;for(;t<=255;)$N[2*t+1]=9,t++,r[9]++;for(;t<=279;)$N[2*t+1]=7,t++,r[7]++;for(;t<=287;)$N[2*t+1]=8,t++,r[8]++;for(sj($N,287,r),t=0;t<30;t++)FN[2*t+1]=5,FN[2*t]=nj(t,5);QN=new YN($N,RN,257,286,15),JN=new YN(FN,WN,0,30,15),qN=new YN(new Array(0),BN,0,19,7)})(),fj=!0),t.l_desc=new KN(t.dyn_ltree,QN),t.d_desc=new KN(t.dyn_dtree,JN),t.bl_desc=new KN(t.bl_tree,qN),t.bi_buf=0,t.bi_valid=0,rj(t)},_tr_stored_block:pj,_tr_flush_block:(t,e,i,n)=>{let s,r,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),uj(t,t.l_desc),uj(t,t.d_desc),o=(t=>{let e;for(hj(t,t.dyn_ltree,t.l_desc.max_code),hj(t,t.dyn_dtree,t.d_desc.max_code),uj(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*UN[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),s=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=s&&(s=r)):s=r=i+5,i+4<=s&&-1!==e?pj(t,e,i,n):4===t.strategy||r===s?(ej(t,2+(n?1:0),3),cj(t,$N,FN)):(ej(t,4+(n?1:0),3),((t,e,i,n)=>{let s;for(ej(t,e-257,5),ej(t,i-1,5),ej(t,n-4,4),s=0;s<n;s++)ej(t,t.bl_tree[2*UN[s]+1],3);dj(t,t.dyn_ltree,e-1),dj(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),cj(t,t.dyn_ltree,t.dyn_dtree)),rj(t),n&&oj(t)},_tr_tally:(t,e,i)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=i,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(GN[i]+256+1)]++,t.dyn_dtree[2*XN(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{ej(t,2,3),ij(t,256,$N),(t=>{16===t.bi_valid?(tj(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},mj=(t,e,i,n)=>{let s=65535&t,r=t>>>16&65535,o=0;for(;0!==i;){o=i>2e3?2e3:i,i-=o;do{s=s+e[n++]|0,r=r+s|0}while(--o);s%=65521,r%=65521}return s|r<<16};const yj=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());var vj=(t,e,i,n)=>{const s=yj,r=n+i;t^=-1;for(let i=n;i<r;i++)t=t>>>8^s[255&(t^e[i])];return~t},bj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},xj={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:wj,_tr_stored_block:Mj,_tr_flush_block:Sj,_tr_tally:kj,_tr_align:_j}=gj,{Z_NO_FLUSH:Ij,Z_PARTIAL_FLUSH:Cj,Z_FULL_FLUSH:Lj,Z_FINISH:Nj,Z_BLOCK:jj,Z_OK:Tj,Z_STREAM_END:zj,Z_STREAM_ERROR:Aj,Z_DATA_ERROR:Pj,Z_BUF_ERROR:Dj,Z_DEFAULT_COMPRESSION:Ej,Z_FILTERED:Oj,Z_HUFFMAN_ONLY:Rj,Z_RLE:Wj,Z_FIXED:Bj,Z_DEFAULT_STRATEGY:Uj,Z_UNKNOWN:$j,Z_DEFLATED:Fj}=xj,Vj=258,Gj=262,Hj=42,Zj=113,Yj=666,Qj=(t,e)=>(t.msg=bj[e],e),Jj=t=>2*t-(t>4?9:0),qj=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Kj=t=>{let e,i,n,s=t.w_size;e=t.hash_size,n=e;do{i=t.head[--n],t.head[n]=i>=s?i-s:0}while(--e);e=s,n=e;do{i=t.prev[--n],t.prev[n]=i>=s?i-s:0}while(--e)};let Xj=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const tT=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},eT=(t,e)=>{Sj(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tT(t.strm)},iT=(t,e)=>{t.pending_buf[t.pending++]=e},nT=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},sT=(t,e,i,n)=>{let s=t.avail_in;return s>n&&(s=n),0===s?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),i),1===t.state.wrap?t.adler=mj(t.adler,e,s,i):2===t.state.wrap&&(t.adler=vj(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)},rT=(t,e)=>{let i,n,s=t.max_chain_length,r=t.strstart,o=t.prev_length,a=t.nice_match;const l=t.strstart>t.w_size-Gj?t.strstart-(t.w_size-Gj):0,c=t.window,u=t.w_mask,h=t.prev,d=t.strstart+Vj;let f=c[r+o-1],p=c[r+o];t.prev_length>=t.good_match&&(s>>=2),a>t.lookahead&&(a=t.lookahead);do{if(i=e,c[i+o]===p&&c[i+o-1]===f&&c[i]===c[r]&&c[++i]===c[r+1]){r+=2,i++;do{}while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<d);if(n=Vj-(d-r),r=d-Vj,n>o){if(t.match_start=e,o=n,n>=a)break;f=c[r+o-1],p=c[r+o]}}}while((e=h[e&u])>l&&0!=--s);return o<=t.lookahead?o:t.lookahead},oT=t=>{const e=t.w_size;let i,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Gj)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Kj(t),n+=e),0===t.strm.avail_in)break;if(i=sT(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Xj(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Xj(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Gj&&0!==t.strm.avail_in)},aT=(t,e)=>{let i,n,s,r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,a=t.strm.avail_in;do{if(i=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,n=t.strstart-t.block_start,i>n+t.strm.avail_in&&(i=n+t.strm.avail_in),i>s&&(i=s),i<r&&(0===i&&e!==Nj||e===Ij||i!==n+t.strm.avail_in))break;o=e===Nj&&i===n+t.strm.avail_in?1:0,Mj(t,0,0,o),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,tT(t.strm),n&&(n>i&&(n=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,i-=n),i&&(sT(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(0===o);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==Ij&&e!==Nj&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(sT(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,r=s>t.w_size?t.w_size:s,n=t.strstart-t.block_start,(n>=r||(n||e===Nj)&&e!==Ij&&0===t.strm.avail_in&&n<=s)&&(i=n>s?s:n,o=e===Nj&&0===t.strm.avail_in&&i===n?1:0,Mj(t,t.block_start,i,o),t.block_start+=i,tT(t.strm)),o?3:1)},lT=(t,e)=>{let i,n;for(;;){if(t.lookahead<Gj){if(oT(t),t.lookahead<Gj&&e===Ij)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Xj(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Gj&&(t.match_length=rT(t,i)),t.match_length>=3)if(n=kj(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Xj(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Xj(t,t.ins_h,t.window[t.strstart+1]);else n=kj(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(eT(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Nj?(eT(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(eT(t,!1),0===t.strm.avail_out)?1:2},cT=(t,e)=>{let i,n,s;for(;;){if(t.lookahead<Gj){if(oT(t),t.lookahead<Gj&&e===Ij)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Xj(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Gj&&(t.match_length=rT(t,i),t.match_length<=5&&(t.strategy===Oj||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,n=kj(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=Xj(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(eT(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=kj(t,0,t.window[t.strstart-1]),n&&eT(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=kj(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Nj?(eT(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(eT(t,!1),0===t.strm.avail_out)?1:2};function uT(t,e,i,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=s}const hT=[new uT(0,0,0,0,aT),new uT(4,4,8,4,lT),new uT(4,5,16,8,lT),new uT(4,6,32,32,lT),new uT(4,4,16,16,cT),new uT(8,16,32,32,cT),new uT(8,16,128,128,cT),new uT(8,32,128,256,cT),new uT(32,128,258,1024,cT),new uT(32,258,258,4096,cT)];function dT(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Fj,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),qj(this.dyn_ltree),qj(this.dyn_dtree),qj(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),qj(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),qj(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const fT=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==Hj&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==Zj&&e.status!==Yj?1:0},pT=t=>{if(fT(t))return Qj(t,Aj);t.total_in=t.total_out=0,t.data_type=$j;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?Hj:Zj,t.adler=2===e.wrap?0:1,e.last_flush=-2,wj(e),Tj},gT=t=>{const e=pT(t);return e===Tj&&(t=>{t.window_size=2*t.w_size,qj(t.head),t.max_lazy_match=hT[t.level].max_lazy,t.good_match=hT[t.level].good_length,t.nice_match=hT[t.level].nice_length,t.max_chain_length=hT[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0})(t.state),e},mT=(t,e,i,n,s,r)=>{if(!t)return Aj;let o=1;if(e===Ej&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>9||i!==Fj||n<8||n>15||e<0||e>9||r<0||r>Bj||8===n&&1!==o)return Qj(t,Aj);8===n&&(n=9);const a=new dT;return t.state=a,a.strm=t,a.status=Hj,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=r,a.method=i,gT(t)};var yT={deflateInit:(t,e)=>mT(t,e,Fj,15,8,Uj),deflateInit2:mT,deflateReset:gT,deflateResetKeep:pT,deflateSetHeader:(t,e)=>fT(t)||2!==t.state.wrap?Aj:(t.state.gzhead=e,Tj),deflate:(t,e)=>{if(fT(t)||e>jj||e<0)return t?Qj(t,Aj):Aj;const i=t.state;if(!t.output||0!==t.avail_in&&!t.input||i.status===Yj&&e!==Nj)return Qj(t,0===t.avail_out?Dj:Aj);const n=i.last_flush;if(i.last_flush=e,0!==i.pending){if(tT(t),0===t.avail_out)return i.last_flush=-1,Tj}else if(0===t.avail_in&&Jj(e)<=Jj(n)&&e!==Nj)return Qj(t,Dj);if(i.status===Yj&&0!==t.avail_in)return Qj(t,Dj);if(i.status===Hj&&0===i.wrap&&(i.status=Zj),i.status===Hj){let e=Fj+(i.w_bits-8<<4)<<8,n=-1;if(n=i.strategy>=Rj||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=n<<6,0!==i.strstart&&(e|=32),e+=31-e%31,nT(i,e),0!==i.strstart&&(nT(i,t.adler>>>16),nT(i,65535&t.adler)),t.adler=1,i.status=Zj,tT(t),0!==i.pending)return i.last_flush=-1,Tj}if(57===i.status)if(t.adler=0,iT(i,31),iT(i,139),iT(i,8),i.gzhead)iT(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),iT(i,255&i.gzhead.time),iT(i,i.gzhead.time>>8&255),iT(i,i.gzhead.time>>16&255),iT(i,i.gzhead.time>>24&255),iT(i,9===i.level?2:i.strategy>=Rj||i.level<2?4:0),iT(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(iT(i,255&i.gzhead.extra.length),iT(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=vj(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(iT(i,0),iT(i,0),iT(i,0),iT(i,0),iT(i,0),iT(i,9===i.level?2:i.strategy>=Rj||i.level<2?4:0),iT(i,3),i.status=Zj,tT(t),0!==i.pending)return i.last_flush=-1,Tj;if(69===i.status){if(i.gzhead.extra){let e=i.pending,n=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+n>i.pending_buf_size;){let s=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+s),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>e&&(t.adler=vj(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex+=s,tT(t),0!==i.pending)return i.last_flush=-1,Tj;e=0,n-=s}let s=new Uint8Array(i.gzhead.extra);i.pending_buf.set(s.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending+=n,i.gzhead.hcrc&&i.pending>e&&(t.adler=vj(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=vj(t.adler,i.pending_buf,i.pending-n,n)),tT(t),0!==i.pending)return i.last_flush=-1,Tj;n=0}e=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,iT(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=vj(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=vj(t.adler,i.pending_buf,i.pending-n,n)),tT(t),0!==i.pending)return i.last_flush=-1,Tj;n=0}e=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,iT(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=vj(t.adler,i.pending_buf,i.pending-n,n))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(tT(t),0!==i.pending))return i.last_flush=-1,Tj;iT(i,255&t.adler),iT(i,t.adler>>8&255),t.adler=0}if(i.status=Zj,tT(t),0!==i.pending)return i.last_flush=-1,Tj}if(0!==t.avail_in||0!==i.lookahead||e!==Ij&&i.status!==Yj){let n=0===i.level?aT(i,e):i.strategy===Rj?((t,e)=>{let i;for(;;){if(0===t.lookahead&&(oT(t),0===t.lookahead)){if(e===Ij)return 1;break}if(t.match_length=0,i=kj(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(eT(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Nj?(eT(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(eT(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===Wj?((t,e)=>{let i,n,s,r;const o=t.window;for(;;){if(t.lookahead<=Vj){if(oT(t),t.lookahead<=Vj&&e===Ij)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=t.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){r=t.strstart+Vj;do{}while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<r);t.match_length=Vj-(r-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=kj(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=kj(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(eT(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Nj?(eT(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(eT(t,!1),0===t.strm.avail_out)?1:2})(i,e):hT[i.level].func(i,e);if(3!==n&&4!==n||(i.status=Yj),1===n||3===n)return 0===t.avail_out&&(i.last_flush=-1),Tj;if(2===n&&(e===Cj?_j(i):e!==jj&&(Mj(i,0,0,!1),e===Lj&&(qj(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),tT(t),0===t.avail_out))return i.last_flush=-1,Tj}return e!==Nj?Tj:i.wrap<=0?zj:(2===i.wrap?(iT(i,255&t.adler),iT(i,t.adler>>8&255),iT(i,t.adler>>16&255),iT(i,t.adler>>24&255),iT(i,255&t.total_in),iT(i,t.total_in>>8&255),iT(i,t.total_in>>16&255),iT(i,t.total_in>>24&255)):(nT(i,t.adler>>>16),nT(i,65535&t.adler)),tT(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?Tj:zj)},deflateEnd:t=>{if(fT(t))return Aj;const e=t.state.status;return t.state=null,e===Zj?Qj(t,Pj):Tj},deflateSetDictionary:(t,e)=>{let i=e.length;if(fT(t))return Aj;const n=t.state,s=n.wrap;if(2===s||1===s&&n.status!==Hj||n.lookahead)return Aj;if(1===s&&(t.adler=mj(t.adler,e,i,0)),n.wrap=0,i>=n.w_size){0===s&&(qj(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(i-n.w_size,i),0),e=t,i=n.w_size}const r=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,oT(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=Xj(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,oT(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=o,t.input=a,t.avail_in=r,n.wrap=s,Tj},deflateInfo:"pako deflate (from Nodeca project)"};const vT=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var bT={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const e in i)vT(i,e)&&(t[e]=i[e])}}return t},flattenChunks:t=>{let e=0;for(let i=0,n=t.length;i<n;i++)e+=t[i].length;const i=new Uint8Array(e);for(let e=0,n=0,s=t.length;e<s;e++){let s=t[e];i.set(s,n),n+=s.length}return i}};let xT=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){xT=!1}const wT=new Uint8Array(256);for(let t=0;t<256;t++)wT[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;wT[254]=wT[254]=1;var MT={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,i,n,s,r,o=t.length,a=0;for(s=0;s<o;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<o&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),a+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(a),r=0,s=0;r<a;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<o&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),i<128?e[r++]=i:i<2048?(e[r++]=192|i>>>6,e[r++]=128|63&i):i<65536?(e[r++]=224|i>>>12,e[r++]=128|i>>>6&63,e[r++]=128|63&i):(e[r++]=240|i>>>18,e[r++]=128|i>>>12&63,e[r++]=128|i>>>6&63,e[r++]=128|63&i);return e},buf2string:(t,e)=>{const i=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,s;const r=new Array(2*i);for(s=0,n=0;n<i;){let e=t[n++];if(e<128){r[s++]=e;continue}let o=wT[e];if(o>4)r[s++]=65533,n+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&n<i;)e=e<<6|63&t[n++],o--;o>1?r[s++]=65533:e<65536?r[s++]=e:(e-=65536,r[s++]=55296|e>>10&1023,r[s++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&xT)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i})(r,s)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+wT[t[i]]>e?i:e}},ST=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const kT=Object.prototype.toString,{Z_NO_FLUSH:_T,Z_SYNC_FLUSH:IT,Z_FULL_FLUSH:CT,Z_FINISH:LT,Z_OK:NT,Z_STREAM_END:jT,Z_DEFAULT_COMPRESSION:TT,Z_DEFAULT_STRATEGY:zT,Z_DEFLATED:AT}=xj;function PT(t){this.options=bT.assign({level:TT,method:AT,chunkSize:16384,windowBits:15,memLevel:8,strategy:zT},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ST,this.strm.avail_out=0;let i=yT.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==NT)throw new Error(bj[i]);if(e.header&&yT.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?MT.string2buf(e.dictionary):"[object ArrayBuffer]"===kT.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=yT.deflateSetDictionary(this.strm,t),i!==NT)throw new Error(bj[i]);this._dict_set=!0}}function DT(t,e){const i=new PT(e);if(i.push(t,!0),i.err)throw i.msg||bj[i.err];return i.result}PT.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize;let s,r;if(this.ended)return!1;for(r=e===~~e?e:!0===e?LT:_T,"string"==typeof t?i.input=MT.string2buf(t):"[object ArrayBuffer]"===kT.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(r===IT||r===CT)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(s=yT.deflate(i,r),s===jT)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),s=yT.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===NT;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},PT.prototype.onData=function(t){this.chunks.push(t)},PT.prototype.onEnd=function(t){t===NT&&(this.result=bT.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ET={Deflate:PT,deflate:DT,deflateRaw:function(t,e){return(e=e||{}).raw=!0,DT(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,DT(t,e)},constants:xj};const OT=16209;var RT=function(t,e){let i,n,s,r,o,a,l,c,u,h,d,f,p,g,m,y,v,b,x,w,M,S,k,_;const I=t.state;i=t.next_in,k=t.input,n=i+(t.avail_in-5),s=t.next_out,_=t.output,r=s-(e-t.avail_out),o=s+(t.avail_out-257),a=I.dmax,l=I.wsize,c=I.whave,u=I.wnext,h=I.window,d=I.hold,f=I.bits,p=I.lencode,g=I.distcode,m=(1<<I.lenbits)-1,y=(1<<I.distbits)-1;t:do{f<15&&(d+=k[i++]<<f,f+=8,d+=k[i++]<<f,f+=8),v=p[d&m];e:for(;;){if(b=v>>>24,d>>>=b,f-=b,b=v>>>16&255,0===b)_[s++]=65535&v;else{if(!(16&b)){if(64&b){if(32&b){I.mode=16191;break t}t.msg="invalid literal/length code",I.mode=OT;break t}v=p[(65535&v)+(d&(1<<b)-1)];continue e}for(x=65535&v,b&=15,b&&(f<b&&(d+=k[i++]<<f,f+=8),x+=d&(1<<b)-1,d>>>=b,f-=b),f<15&&(d+=k[i++]<<f,f+=8,d+=k[i++]<<f,f+=8),v=g[d&y];;){if(b=v>>>24,d>>>=b,f-=b,b=v>>>16&255,16&b){if(w=65535&v,b&=15,f<b&&(d+=k[i++]<<f,f+=8,f<b&&(d+=k[i++]<<f,f+=8)),w+=d&(1<<b)-1,w>a){t.msg="invalid distance too far back",I.mode=OT;break t}if(d>>>=b,f-=b,b=s-r,w>b){if(b=w-b,b>c&&I.sane){t.msg="invalid distance too far back",I.mode=OT;break t}if(M=0,S=h,0===u){if(M+=l-b,b<x){x-=b;do{_[s++]=h[M++]}while(--b);M=s-w,S=_}}else if(u<b){if(M+=l+u-b,b-=u,b<x){x-=b;do{_[s++]=h[M++]}while(--b);if(M=0,u<x){b=u,x-=b;do{_[s++]=h[M++]}while(--b);M=s-w,S=_}}}else if(M+=u-b,b<x){x-=b;do{_[s++]=h[M++]}while(--b);M=s-w,S=_}for(;x>2;)_[s++]=S[M++],_[s++]=S[M++],_[s++]=S[M++],x-=3;x&&(_[s++]=S[M++],x>1&&(_[s++]=S[M++]))}else{M=s-w;do{_[s++]=_[M++],_[s++]=_[M++],_[s++]=_[M++],x-=3}while(x>2);x&&(_[s++]=_[M++],x>1&&(_[s++]=_[M++]))}break}if(64&b){t.msg="invalid distance code",I.mode=OT;break t}v=g[(65535&v)+(d&(1<<b)-1)]}}break}}while(i<n&&s<o);x=f>>3,i-=x,f-=x<<3,d&=(1<<f)-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<o?o-s+257:257-(s-o),I.hold=d,I.bits=f};const WT=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),BT=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),UT=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$T=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var FT=(t,e,i,n,s,r,o,a)=>{const l=a.bits;let c,u,h,d,f,p,g=0,m=0,y=0,v=0,b=0,x=0,w=0,M=0,S=0,k=0,_=null;const I=new Uint16Array(16),C=new Uint16Array(16);let L,N,j,T=null;for(g=0;g<=15;g++)I[g]=0;for(m=0;m<n;m++)I[e[i+m]]++;for(b=l,v=15;v>=1&&0===I[v];v--);if(b>v&&(b=v),0===v)return s[r++]=20971520,s[r++]=20971520,a.bits=1,0;for(y=1;y<v&&0===I[y];y++);for(b<y&&(b=y),M=1,g=1;g<=15;g++)if(M<<=1,M-=I[g],M<0)return-1;if(M>0&&(0===t||1!==v))return-1;for(C[1]=0,g=1;g<15;g++)C[g+1]=C[g]+I[g];for(m=0;m<n;m++)0!==e[i+m]&&(o[C[e[i+m]]++]=m);if(0===t?(_=T=o,p=20):1===t?(_=WT,T=BT,p=257):(_=UT,T=$T,p=0),k=0,m=0,g=y,f=r,x=b,w=0,h=-1,S=1<<b,d=S-1,1===t&&S>852||2===t&&S>592)return 1;for(;;){L=g-w,o[m]+1<p?(N=0,j=o[m]):o[m]>=p?(N=T[o[m]-p],j=_[o[m]-p]):(N=96,j=0),c=1<<g-w,u=1<<x,y=u;do{u-=c,s[f+(k>>w)+u]=L<<24|N<<16|j}while(0!==u);for(c=1<<g-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,m++,0==--I[g]){if(g===v)break;g=e[i+o[m]]}if(g>b&&(k&d)!==h){for(0===w&&(w=b),f+=y,x=g-w,M=1<<x;x+w<v&&(M-=I[x+w],!(M<=0));)x++,M<<=1;if(S+=1<<x,1===t&&S>852||2===t&&S>592)return 1;h=k&d,s[h]=b<<24|x<<16|f-r}}return 0!==k&&(s[f+k]=g-w<<24|64<<16),a.bits=b,0};const{Z_FINISH:VT,Z_BLOCK:GT,Z_TREES:HT,Z_OK:ZT,Z_STREAM_END:YT,Z_NEED_DICT:QT,Z_STREAM_ERROR:JT,Z_DATA_ERROR:qT,Z_MEM_ERROR:KT,Z_BUF_ERROR:XT,Z_DEFLATED:tz}=xj,ez=16180,iz=16190,nz=16191,sz=16192,rz=16194,oz=16199,az=16200,lz=16206,cz=16209,uz=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function hz(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const dz=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<ez||e.mode>16211?1:0},fz=t=>{if(dz(t))return JT;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=ez,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,ZT},pz=t=>{if(dz(t))return JT;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,fz(t)},gz=(t,e)=>{let i;if(dz(t))return JT;const n=t.state;return e<0?(i=0,e=-e):(i=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?JT:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,pz(t))},mz=(t,e)=>{if(!t)return JT;const i=new hz;t.state=i,i.strm=t,i.window=null,i.mode=ez;const n=gz(t,e);return n!==ZT&&(t.state=null),n};let yz,vz,bz=!0;const xz=t=>{if(bz){yz=new Int32Array(512),vz=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(FT(1,t.lens,0,288,yz,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;FT(2,t.lens,0,32,vz,0,t.work,{bits:5}),bz=!1}t.lencode=yz,t.lenbits=9,t.distcode=vz,t.distbits=5},wz=(t,e,i,n)=>{let s;const r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(i-r.wsize,i),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(e.subarray(i-n,i-n+s),r.wnext),(n-=s)?(r.window.set(e.subarray(i-n,i),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0};var Mz={inflateReset:pz,inflateReset2:gz,inflateResetKeep:fz,inflateInit:t=>mz(t,15),inflateInit2:mz,inflate:(t,e)=>{let i,n,s,r,o,a,l,c,u,h,d,f,p,g,m,y,v,b,x,w,M,S,k=0;const _=new Uint8Array(4);let I,C;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(dz(t)||!t.output||!t.input&&0!==t.avail_in)return JT;i=t.state,i.mode===nz&&(i.mode=sz),o=t.next_out,s=t.output,l=t.avail_out,r=t.next_in,n=t.input,a=t.avail_in,c=i.hold,u=i.bits,h=a,d=l,S=ZT;t:for(;;)switch(i.mode){case ez:if(0===i.wrap){i.mode=sz;break}for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(2&i.wrap&&35615===c){0===i.wbits&&(i.wbits=15),i.check=0,_[0]=255&c,_[1]=c>>>8&255,i.check=vj(i.check,_,2,0),c=0,u=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",i.mode=cz;break}if((15&c)!==tz){t.msg="unknown compression method",i.mode=cz;break}if(c>>>=4,u-=4,M=8+(15&c),0===i.wbits&&(i.wbits=M),M>15||M>i.wbits){t.msg="invalid window size",i.mode=cz;break}i.dmax=1<<i.wbits,i.flags=0,t.adler=i.check=1,i.mode=512&c?16189:nz,c=0,u=0;break;case 16181:for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(i.flags=c,(255&i.flags)!==tz){t.msg="unknown compression method",i.mode=cz;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=cz;break}i.head&&(i.head.text=c>>8&1),512&i.flags&&4&i.wrap&&(_[0]=255&c,_[1]=c>>>8&255,i.check=vj(i.check,_,2,0)),c=0,u=0,i.mode=16182;case 16182:for(;u<32;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.head&&(i.head.time=c),512&i.flags&&4&i.wrap&&(_[0]=255&c,_[1]=c>>>8&255,_[2]=c>>>16&255,_[3]=c>>>24&255,i.check=vj(i.check,_,4,0)),c=0,u=0,i.mode=16183;case 16183:for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.head&&(i.head.xflags=255&c,i.head.os=c>>8),512&i.flags&&4&i.wrap&&(_[0]=255&c,_[1]=c>>>8&255,i.check=vj(i.check,_,2,0)),c=0,u=0,i.mode=16184;case 16184:if(1024&i.flags){for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.length=c,i.head&&(i.head.extra_len=c),512&i.flags&&4&i.wrap&&(_[0]=255&c,_[1]=c>>>8&255,i.check=vj(i.check,_,2,0)),c=0,u=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(f=i.length,f>a&&(f=a),f&&(i.head&&(M=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(r,r+f),M)),512&i.flags&&4&i.wrap&&(i.check=vj(i.check,n,f,r)),a-=f,r+=f,i.length-=f),i.length))break t;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===a)break t;f=0;do{M=n[r+f++],i.head&&M&&i.length<65536&&(i.head.name+=String.fromCharCode(M))}while(M&&f<a);if(512&i.flags&&4&i.wrap&&(i.check=vj(i.check,n,f,r)),a-=f,r+=f,M)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===a)break t;f=0;do{M=n[r+f++],i.head&&M&&i.length<65536&&(i.head.comment+=String.fromCharCode(M))}while(M&&f<a);if(512&i.flags&&4&i.wrap&&(i.check=vj(i.check,n,f,r)),a-=f,r+=f,M)break t}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;u<16;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(4&i.wrap&&c!==(65535&i.check)){t.msg="header crc mismatch",i.mode=cz;break}c=0,u=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=nz;break;case 16189:for(;u<32;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}t.adler=i.check=uz(c),c=0,u=0,i.mode=iz;case iz:if(0===i.havedict)return t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=a,i.hold=c,i.bits=u,QT;t.adler=i.check=1,i.mode=nz;case nz:if(e===GT||e===HT)break t;case sz:if(i.last){c>>>=7&u,u-=7&u,i.mode=lz;break}for(;u<3;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}switch(i.last=1&c,c>>>=1,u-=1,3&c){case 0:i.mode=16193;break;case 1:if(xz(i),i.mode=oz,e===HT){c>>>=2,u-=2;break t}break;case 2:i.mode=16196;break;case 3:t.msg="invalid block type",i.mode=cz}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",i.mode=cz;break}if(i.length=65535&c,c=0,u=0,i.mode=rz,e===HT)break t;case rz:i.mode=16195;case 16195:if(f=i.length,f){if(f>a&&(f=a),f>l&&(f=l),0===f)break t;s.set(n.subarray(r,r+f),o),a-=f,r+=f,l-=f,o+=f,i.length-=f;break}i.mode=nz;break;case 16196:for(;u<14;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(i.nlen=257+(31&c),c>>>=5,u-=5,i.ndist=1+(31&c),c>>>=5,u-=5,i.ncode=4+(15&c),c>>>=4,u-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=cz;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;u<3;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.lens[L[i.have++]]=7&c,c>>>=3,u-=3}for(;i.have<19;)i.lens[L[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,I={bits:i.lenbits},S=FT(0,i.lens,0,19,i.lencode,0,i.work,I),i.lenbits=I.bits,S){t.msg="invalid code lengths set",i.mode=cz;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;k=i.lencode[c&(1<<i.lenbits)-1],m=k>>>24,y=k>>>16&255,v=65535&k,!(m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(v<16)c>>>=m,u-=m,i.lens[i.have++]=v;else{if(16===v){for(C=m+2;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(c>>>=m,u-=m,0===i.have){t.msg="invalid bit length repeat",i.mode=cz;break}M=i.lens[i.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===v){for(C=m+3;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}c>>>=m,u-=m,M=0,f=3+(7&c),c>>>=3,u-=3}else{for(C=m+7;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}c>>>=m,u-=m,M=0,f=11+(127&c),c>>>=7,u-=7}if(i.have+f>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=cz;break}for(;f--;)i.lens[i.have++]=M}}if(i.mode===cz)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=cz;break}if(i.lenbits=9,I={bits:i.lenbits},S=FT(1,i.lens,0,i.nlen,i.lencode,0,i.work,I),i.lenbits=I.bits,S){t.msg="invalid literal/lengths set",i.mode=cz;break}if(i.distbits=6,i.distcode=i.distdyn,I={bits:i.distbits},S=FT(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,I),i.distbits=I.bits,S){t.msg="invalid distances set",i.mode=cz;break}if(i.mode=oz,e===HT)break t;case oz:i.mode=az;case az:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=a,i.hold=c,i.bits=u,RT(t,d),o=t.next_out,s=t.output,l=t.avail_out,r=t.next_in,n=t.input,a=t.avail_in,c=i.hold,u=i.bits,i.mode===nz&&(i.back=-1);break}for(i.back=0;k=i.lencode[c&(1<<i.lenbits)-1],m=k>>>24,y=k>>>16&255,v=65535&k,!(m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(y&&!(240&y)){for(b=m,x=y,w=v;k=i.lencode[w+((c&(1<<b+x)-1)>>b)],m=k>>>24,y=k>>>16&255,v=65535&k,!(b+m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}c>>>=b,u-=b,i.back+=b}if(c>>>=m,u-=m,i.back+=m,i.length=v,0===y){i.mode=16205;break}if(32&y){i.back=-1,i.mode=nz;break}if(64&y){t.msg="invalid literal/length code",i.mode=cz;break}i.extra=15&y,i.mode=16201;case 16201:if(i.extra){for(C=i.extra;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.length+=c&(1<<i.extra)-1,c>>>=i.extra,u-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;k=i.distcode[c&(1<<i.distbits)-1],m=k>>>24,y=k>>>16&255,v=65535&k,!(m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(!(240&y)){for(b=m,x=y,w=v;k=i.distcode[w+((c&(1<<b+x)-1)>>b)],m=k>>>24,y=k>>>16&255,v=65535&k,!(b+m<=u);){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}c>>>=b,u-=b,i.back+=b}if(c>>>=m,u-=m,i.back+=m,64&y){t.msg="invalid distance code",i.mode=cz;break}i.offset=v,i.extra=15&y,i.mode=16203;case 16203:if(i.extra){for(C=i.extra;u<C;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}i.offset+=c&(1<<i.extra)-1,c>>>=i.extra,u-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=cz;break}i.mode=16204;case 16204:if(0===l)break t;if(f=d-l,i.offset>f){if(f=i.offset-f,f>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=cz;break}f>i.wnext?(f-=i.wnext,p=i.wsize-f):p=i.wnext-f,f>i.length&&(f=i.length),g=i.window}else g=s,p=o-i.offset,f=i.length;f>l&&(f=l),l-=f,i.length-=f;do{s[o++]=g[p++]}while(--f);0===i.length&&(i.mode=az);break;case 16205:if(0===l)break t;s[o++]=i.length,l--,i.mode=az;break;case lz:if(i.wrap){for(;u<32;){if(0===a)break t;a--,c|=n[r++]<<u,u+=8}if(d-=l,t.total_out+=d,i.total+=d,4&i.wrap&&d&&(t.adler=i.check=i.flags?vj(i.check,s,d,o-d):mj(i.check,s,d,o-d)),d=l,4&i.wrap&&(i.flags?c:uz(c))!==i.check){t.msg="incorrect data check",i.mode=cz;break}c=0,u=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;u<32;){if(0===a)break t;a--,c+=n[r++]<<u,u+=8}if(4&i.wrap&&c!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=cz;break}c=0,u=0}i.mode=16208;case 16208:S=YT;break t;case cz:S=qT;break t;case 16210:return KT;default:return JT}return t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=a,i.hold=c,i.bits=u,(i.wsize||d!==t.avail_out&&i.mode<cz&&(i.mode<lz||e!==VT))&&wz(t,t.output,t.next_out,d-t.avail_out),h-=t.avail_in,d-=t.avail_out,t.total_in+=h,t.total_out+=d,i.total+=d,4&i.wrap&&d&&(t.adler=i.check=i.flags?vj(i.check,s,d,t.next_out-d):mj(i.check,s,d,t.next_out-d)),t.data_type=i.bits+(i.last?64:0)+(i.mode===nz?128:0)+(i.mode===oz||i.mode===rz?256:0),(0===h&&0===d||e===VT)&&S===ZT&&(S=XT),S},inflateEnd:t=>{if(dz(t))return JT;let e=t.state;return e.window&&(e.window=null),t.state=null,ZT},inflateGetHeader:(t,e)=>{if(dz(t))return JT;const i=t.state;return 2&i.wrap?(i.head=e,e.done=!1,ZT):JT},inflateSetDictionary:(t,e)=>{const i=e.length;let n,s,r;return dz(t)?JT:(n=t.state,0!==n.wrap&&n.mode!==iz?JT:n.mode===iz&&(s=1,s=mj(s,e,i,0),s!==n.check)?qT:(r=wz(t,e,i,i),r?(n.mode=16210,KT):(n.havedict=1,ZT)))},inflateInfo:"pako inflate (from Nodeca project)"},Sz=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const kz=Object.prototype.toString,{Z_NO_FLUSH:_z,Z_FINISH:Iz,Z_OK:Cz,Z_STREAM_END:Lz,Z_NEED_DICT:Nz,Z_STREAM_ERROR:jz,Z_DATA_ERROR:Tz,Z_MEM_ERROR:zz}=xj;function Az(t){this.options=bT.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ST,this.strm.avail_out=0;let i=Mz.inflateInit2(this.strm,e.windowBits);if(i!==Cz)throw new Error(bj[i]);if(this.header=new Sz,Mz.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=MT.string2buf(e.dictionary):"[object ArrayBuffer]"===kz.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=Mz.inflateSetDictionary(this.strm,e.dictionary),i!==Cz)))throw new Error(bj[i])}function Pz(t,e){const i=new Az(e);if(i.push(t),i.err)throw i.msg||bj[i.err];return i.result}Az.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let r,o,a;if(this.ended)return!1;for(o=e===~~e?e:!0===e?Iz:_z,"[object ArrayBuffer]"===kz.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),r=Mz.inflate(i,o),r===Nz&&s&&(r=Mz.inflateSetDictionary(i,s),r===Cz?r=Mz.inflate(i,o):r===Tz&&(r=Nz));i.avail_in>0&&r===Lz&&i.state.wrap>0&&0!==t[i.next_in];)Mz.inflateReset(i),r=Mz.inflate(i,o);switch(r){case jz:case Tz:case Nz:case zz:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===Lz))if("string"===this.options.to){let t=MT.utf8border(i.output,i.next_out),e=i.next_out-t,s=MT.buf2string(i.output,t);i.next_out=e,i.avail_out=n-e,e&&i.output.set(i.output.subarray(t,t+e),0),this.onData(s)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==Cz||0!==a){if(r===Lz)return r=Mz.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Az.prototype.onData=function(t){this.chunks.push(t)},Az.prototype.onEnd=function(t){t===Cz&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=bT.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Dz={Inflate:Az,inflate:Pz,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Pz(t,e)},ungzip:Pz,constants:xj};const{Deflate:Ez,deflate:Oz,deflateRaw:Rz,gzip:Wz}=ET,{Inflate:Bz,inflate:Uz,inflateRaw:$z,ungzip:Fz}=Dz;var Vz,Gz={Deflate:Ez,deflate:Oz,deflateRaw:Rz,gzip:Wz,Inflate:Bz,inflate:Uz,inflateRaw:$z,ungzip:Fz,constants:xj};function Hz(){}function Zz(){}Hz.Parse=function(t,e){t=new Uint8Array(t);for(var i=0;37!=t[i]||33!=t[i+1];)i++;for(var n=Hz.B.readASCII(t,i,t.length-i).split(/[\n\r]+/),s=null,r=null,o=0;o<n.length;o++){var a=n[o].trim();if("%"==a.charAt(0)){for(;"%"==a.charAt(0);)a=a.slice(1);var l=a.split(":");"BoundingBox"==l[0]&&(s=l[1].trim().split(/[ ]+/).map(parseFloat)),-1!=a.indexOf("!PS-Adobe-3.0 EPSF-3.0")&&(r=a)}}null!=r&&null!=s||(s=[0,0,595,842]);for(var c=[],u=Hz._getDictStack([],{}),h=[{typ:"file",val:{buff:t,off:i}}],d=[],f=Hz._getEnv(s),p=Date.now(),g=!0;g;)g=Hz.step(c,u,h,d,f,e);f.pgOpen&&e.ShowPage(),e.Done(),console.log(Date.now()-p)},Hz._getDictStack=function(t,e){for(var i=["def","begin","end","currentfile","currentdict","known","version","currentpacking","setpacking","currentoverprint","setoverprint","currentglobal","setglobal","currentsystemparams","setsystemparams","currentuserparams","setuserparams","currentpagedevice","setpagedevice","currentflat","currentlinewidth","currentpoint","currentscreen","setscreen","currenthalftone","currentblackgeneration","currentundercolorremoval","currentcolortransfer","internaldict","dict","string","readstring","readhexstring","readline","getinterval","putinterval","token","array","aload","astore","length","maxlength","matrix","mark","counttomark","cleartomark","dictstack","countdictstack","makefont","scalefont","stringwidth","setfont","setgray","currentgray","setrgbcolor","currentrgbcolor","sethsbcolor","setlinewidth","setstrokeadjust","setflat","setlinecap","setlinejoin","setmiterlimit","setdash","clip","eoclip","clippath","pathbbox","newpath","stroke","fill","eofill","closepath","flattenpath","showpage","print","moveto","lineto","curveto","arc","arcn","show","ashow","xshow","yshow","xyshow","widthshow","awidthshow","charpath","cshow","rmoveto","rlineto","rcurveto","translate","rotate","scale","concat","concatmatrix","invertmatrix","currentmatrix","defaultmatrix","setmatrix","save","restore","gsave","grestore","grestoreall","usertime","readtime","save","restore","flush","flushfile","readonly","executeonly","findresource","defineresource","undefineresource","image","imagemask","colorimage","xcheck","status","cachestatus","setcachelimit","type","if","ifelse","exec","stopped","dup","exch","copy","roll","index","pop","put","get","load","where","store","repeat","for","forall","loop","exit","bind","cvi","cvr","cvs","cvx","cvn","cvlit","add","sub","mul","div","idiv","bitshift","mod","exp","atan","neg","abs","floor","round","truncate","sqrt","ln","sin","cos","srand","rand","==","transform","itransform","dtransform","idtransform","eq","ge","gt","le","lt","ne","and","or","not","filter","begincmap","endcmap","begincodespacerange","endcodespacerange","beginbfrange","endbfrange","beginbfchar","endbfchar"].concat(t),n=["image","colorimage","repeat","for","forall","loop"],s=0;s<n.length;s++)i.push(n[s]+"---");var r=Hz.makeProcs({findfont:"/Font findresource",definefont:"/Font defineresource",undefinefont:"/Font undefineresource"});for(var o in e)r[o]=e[o];var a={},l={},c={};for(a.systemdict={typ:"dict",val:a},a.globaldict={typ:"dict",val:l},a.userdict={typ:"dict",val:c},a.statusdict={typ:"dict",val:{}},a.$error={typ:"dict",val:{}},a.errordict={typ:"dict",val:Hz.makeProcs({handleerror:""})},a.null={typ:"null",val:null},s=0;s<i.length;s++)a[i[s]]={typ:"operator",val:i[s]};for(var o in r)a[o]=r[o];return[a,l,c]},Hz._getEnv=function(t){return{bb:t,gst:EN.getState(t),packing:!1,overprint:!1,global:!1,systemparams:{MaxPatternCache:5e3},userparams:{},pagedevice:{},cmnum:0,fnt:null,res:{},pgOpen:!1,funs:Hz.makeProcs({blackgeneration:"",undercolorremoval:"pop 0"})}},Hz.makeProcs=function(t){var e={};for(var i in t){var n=t[i].replace(/  +/g," ").split(" ");e[i]={typ:"procedure",val:[]};for(var s=0;s<n.length;s++)e[i].val.push({typ:"name",val:n[s]})}return e},Hz.addProc=function(t,e){0!=t.val.length&&(null!=t.off&&t.off!=t.val.length?e.push({typ:"procedure",val:t.val,off:0}):(t.off=0,e.push(t)))},Hz._f32=new Float32Array(1),Hz.step=function(t,e,i,n,s,r,o){var a=Date.now(),l=Hz._f32,c=Hz.getToken,u=s.gst;if(null==(P=c(i,e)))return!1;var h=P.typ,d=P.val;if(-1!=["integer","real","dict","boolean","string","array","procedure","null"].indexOf(h))return t.push(P),!0;if("name"!=h&&"operator"!=h)throw"e";if("/"==d.charAt(0)){if("/"==d.charAt(1))throw"e";t.push(P)}else if("{"==d){for(var f=[],p={typ:"procedure",val:[]},g=c(i,e);;){if("{"==g.val){var m={typ:"procedure",val:[]};p.val.push(m),f.push(p),p=m}else if("}"==g.val){if(0==f.length)break;p=f.pop()}else p.val.push(g);g=c(i,e)}t.push(p)}else if("["==d||"<<"==d)t.push({typ:"mark"});else if("]"==d||">>"==d){for(var y=[];0!=t.length&&"mark"!=(Gt=t.pop()).typ;)y.push(Gt);if(y.reverse(),"]"==d)t.push({typ:"array",val:y});else{for(var v={},b=0;b<y.length;b+=2)v[y[b].val.slice(1)]=y[b+1];t.push({typ:"dict",val:v})}}else{if(null==(re=Hz.getFromStacks(d,e)))throw console.log("unknown operator",d,t,e),"e";if("procedure"==re.typ)Hz.addProc(re,i);else if(-1!=["array","string","dict","null","integer","real","boolean","state","font","name"].indexOf(re.typ))t.push(re);else if("operator"==re.typ){var x=re.val;if("def"==x){var w=t.pop(),M=t.pop();M=M.val.slice(1),e[e.length-1][M]=w}else if("internaldict"==x){var S=t.pop().val;t.push({typ:"dict",val:{}})}else if("dict"==x)S=t.pop().val,t.push({typ:"dict",val:{},maxl:S});else if("string"==x)S=t.pop().val,t.push({typ:"string",val:new Array(S)});else if("readstring"==x||"readhexstring"==x){S=(_=t.pop()).val.length;var k=t.pop().val;if("readstring"==x){for(b=0;b<S;b++)_.val[b]=k.buff[k.off+b];k.off+=S}else for(w=Hz.readHex(k,S),b=0;b<w.length;b++)_.val[b]=w[b];t.push(_,{typ:"boolean",val:!0})}else if("readline"==x){var _=t.pop();for(k=t.pop().val,b=0,Hz.isEOL(k.buff[k.off])&&k.off++;;){var I=k.buff[k.off];if(k.off++,Hz.isEOL(I))break;_.val[b]=I,b++}b<_.val.length&&null!=_.val[b]&&(_.val[b]=null),t.push(_,{typ:"boolean",val:!0})}else if("getinterval"==x){var C=t.pop().val,L=t.pop().val,N=[];if("string"!=(j=t.pop()).typ)throw"e";for(b=0;b<C;b++)N.push(j.val[L+b]);t.push({typ:j.typ,val:N})}else if("putinterval"==x){var j=t.pop(),T=(L=t.pop().val,t.pop());if(L+j.val.length>=T.val.length);else{if("string"!=j.typ)throw"e";for(b=0;b<j.val.length;b++)T.val[L+b]=j.val[b]}}else if("token"==x){if("string"!=(j=t.pop()).typ)throw"e";for(y=[],b=0;b<j.val.length;b++){var z=j.val[b];if(null==z)break;y.push(z)}var A={buff:new Uint8Array(y),off:0},P=c([{typ:"file",val:A}],e),D=[];for(b=A.off;b<y.length;b++)D.push(y[b]);t.push({typ:"string",val:D},P,{typ:"boolean",val:!0})}else if("array"==x)S=t.pop().val,t.push({typ:"array",val:new Array(S)});else if("aload"==x){for(y=(Gt=t.pop()).val,b=0;b<y.length;b++)t.push(y[b]);t.push(Gt)}else if("astore"==x){for(y=(Gt=t.pop()).val,b=0;b<y.length;b++)y[y.length-1-b]=t.pop();t.push(Gt)}else if("length"==x){if(S=0,"array"==(h=(Gt=t.pop()).typ))S=Gt.val.length;else if("procedure"==h)S=Gt.val.length;else if("dict"==h)S=Object.keys(Gt.val).length;else{if("string"!=h)throw console.log(Gt),"e";S=Gt.val.length}t.push({typ:"integer",val:S})}else if("maxlength"==x){var E=t.pop();t.push({typ:"integer",val:E.maxl})}else if("matrix"==x)t.push({typ:"array",val:Hz.makeArr([1,0,0,1,0,0],"real")});else if("mark"==x)t.push({typ:"mark"});else if("counttomark"==x||"cleartomark"==x){for(var O=0;O<t.length&&"mark"!=t[t.length-1-O].typ;)O++;if("cleartomark"==x)for(b=0;b<O+1;b++)t.pop();else t.push({typ:"integer",val:O})}else if("dictstack"==x){for(y=t.pop(),b=0;b<e.length;b++)y.val[b]={typ:"dict",val:e[b]};t.push(y)}else if("countdictstack"==x){var R=0;for(b=0;b<t.length;b++)"dict"==t[b].typ&&R++;t.push({typ:"integer",val:R})}else if("begin"==x){if(null==(B=(Gt=t.pop()).val)||"dict"!=Gt.typ)throw console.log(Gt,e),"e";e.push(B)}else if("end"==x)e.pop();else if("currentfile"==x){var W;for(b=i.length-1;b>=0;b--)"file"==i[b].typ&&(W=i[b]);t.push(W)}else if("currentdict"==x){var B=e[e.length-1];t.push({typ:"dict",val:B})}else if("known"==x){var U=t.pop().val.slice(1);B=t.pop().val,t.push({typ:"boolean",val:null!=B[U]})}else if("version"==x)t.push({typ:"string",val:[51]});else if(-1!=["currentpacking","currentoverprint","currentglobal","currentsystemparams","currentuserparams","currentpagedevice"].indexOf(x))w=s[x.slice(7)],t.push({typ:"boolean"==typeof w?"boolean":"dict",val:w});else if(-1!=["setpacking","setoverprint","setglobal","setsystemparams","setuserparams","setpagedevice"].indexOf(x))s[x.slice(3)]=t.pop().val;else if("currentflat"==x)t.push({typ:"real",val:1});else if("currentlinewidth"==x)t.push({typ:"real",val:u.lwidth});else if("currentpoint"==x){var $=u.ctm.slice(0);EN.M.invert($);var F=EN.M.multPoint($,u.cpos);t.push({typ:"real",val:F[0]},{typ:"real",val:F[1]})}else if("currentscreen"==x)t.push({typ:"int",val:60},{typ:"real",val:0},{typ:"real",val:0});else if("setscreen"==x)t.pop(),t.pop(),t.pop();else if("currenthalftone"==x)t.push({typ:"dict",val:{}});else if("currentblackgeneration"==x||"currentundercolorremoval"==x)t.push(s.funs[x.slice(7)]);else if("currentcolortransfer"==x)for(b=0;b<4;b++)t.push(s.funs.blackgeneration);else if("findresource"==x){var V,G=t.pop().val.slice(1);if(U=t.pop().val.slice(1),"Font"==G)(V={typ:"font",val:EN.getFont()}).val.Tf=U;else if("ProcSet"==G)V={typ:"dict",val:{}};else{if("Category"!=G)throw"Unknown resource category: "+G+","+U;V={typ:"dict",val:{}}}t.push(V)}else if("defineresource"==x){G=t.pop().val.slice(1);var H=t.pop().val;U=t.pop().val.slice(1),null==s.res[G]&&(s.res[G]={}),s.res[G][U]=H,t.push(H)}else if("undefineresource"==x)G=t.pop().val.slice(1),U=t.pop().val.slice(1),null!=s.res[G]&&delete s.res[G];else if("image"==x||"colorimage"==x){var Z=1,Y=!1;"colorimage"==x&&(Z=t.pop().val,Y=t.pop().val),Y?(st=t.pop(),nt=t.pop(),it=t.pop()):it=t.pop();var Q=Hz.readArr(t.pop().val),J=t.pop().val,q=t.pop().val,K=t.pop().val;if(3!=Z)throw"unsupported number of channels "+Z;if(8!=J)throw"unsupported bits per channel: "+J;var X=new Uint8Array(K*q*4);for(b=0;b<X.length;b++)X[b]=255;i.push({typ:"name",val:x+"---",ctx:[K,q,J,Q,Z,Y,X,0,it,nt,st]}),Hz.addProc(it,i),Y&&(Hz.addProc(nt,i),Hz.addProc(st,i))}else if("image---"==x||"colorimage---"==x){var tt=P.ctx,et=(K=tt[0],q=tt[1],J=tt[2],Q=tt[3],Z=tt[4],Y=tt[5],X=tt[6],tt[7]),it=tt[8],nt=tt[9],st=tt[10],rt=0;if(Y)for(b=0;b<3;b++){rt=(at=t.pop().val).length;for(var ot=0;ot<rt;ot++)X[4*(et+ot)+2-b]=at[ot]}else{var at=t.pop().val;if(rt=Math.floor(at.length/3),null==at[0])throw console.log(e),"e";for(ot=0;ot<rt;ot++){var lt=3*ot,ct=4*(et+ot);X[ct+0]=at[lt+0],X[ct+1]=at[lt+1],X[ct+2]=at[lt+2]}}et+=rt,Hz.checkPageStarted(s,r),et==K*q?r.PutImage(u,X,K,q):(tt[7]=et,i.push(P),Hz.addProc(it,i),Y&&(Hz.addProc(nt,i),Hz.addProc(st,i)))}else if("makefont"==x){var ut=Hz.readArr(t.pop().val),ht=JSON.parse(JSON.stringify(t.pop()));EN.M.concat(ht.val.Tm,ut),t.push(ht)}else if("scalefont"==x){var dt=t.pop().val;(ht=t.pop()).val.Tfs*=dt,t.push(ht)}else if("stringwidth"==x)_=t.pop().val,dt=EN.M.getScale(u.font.Tm)/EN.M.getScale(u.ctm),t.push({typ:"real",val:.6*dt*_.length},{typ:"real",val:dt});else if("setfont"==x)u.font=t.pop().val;else if("setlinewidth"==x)u.lwidth=t.pop().val;else if("setstrokeadjust"==x)u.SA=t.pop().val;else if("setlinecap"==x)u.lcap=t.pop().val;else if("setlinejoin"==x)u.ljoin=t.pop().val;else if("setmiterlimit"==x)u.mlimit=t.pop().val;else if("setflat"==x)u.dd.flat=t.pop();else if("setdash"==x)u.doff=t.pop().val,u.dash=Hz.readArr(t.pop().val);else if("show"==x||"ashow"==x||"xshow"==x||"yshow"==x||"xyshow"==x||"widthshow"==x||"awidthshow"==x||"charpath"==x){"charpath"!=x&&"xshow"!=x&&"xyshow"!=x&&"yshow"!=x||t.pop();var ft=t.pop().val;_=Hz.readStr(ft),"awidthshow"==x&&(t.pop(),t.pop(),t.pop(),t.pop()),"widthshow"==x&&(t.pop(),t.pop(),t.pop()),"ashow"==x&&(t.pop(),t.pop());var pt=u.ctm;u.ctm=pt.slice(0),u.ctm[4]=u.cpos[0],u.ctm[5]=u.cpos[1],Hz.checkPageStarted(s,r),r.PutText(u,_,.55*_.length),u.cpos[0]+=_.length*EN.M.getScale(pt)*u.font.Tfs*.55,u.ctm=pt}else if("cshow"==x)t.pop(),t.pop();else if("setgray"==x){var gt=Hz.nrm(t.pop().val);u.colr=u.COLR=[gt,gt,gt]}else if("currentgray"==x)t.push({typ:"real",val:(u.colr[0]+u.colr[1]+u.colr[2])/3});else if("setrgbcolor"==x){var mt=t.pop().val,yt=(gt=t.pop().val,t.pop().val);u.colr=u.COLR=[Hz.nrm(yt),Hz.nrm(gt),Hz.nrm(mt)]}else if("currentrgbcolor"==x)for(b=0;b<3;b++)t.push({typ:"real",val:u.colr[b]});else if("sethsbcolor"==x){var vt,bt,xt,wt=t.pop().val,Mt=t.pop().val;switch(F=wt*(1-Mt),bt=wt*(1-(vt=6*(q=t.pop().val)-(b=Math.floor(6*q)))*Mt),xt=wt*(1-(1-vt)*Mt),b%6){case 0:yt=wt,gt=xt,mt=F;break;case 1:yt=bt,gt=wt,mt=F;break;case 2:yt=F,gt=wt,mt=xt;break;case 3:yt=F,gt=bt,mt=wt;break;case 4:yt=xt,gt=F,mt=wt;break;case 5:yt=wt,gt=F,mt=bt}u.colr=u.COLR=[Hz.nrm(yt),Hz.nrm(gt),Hz.nrm(mt)]}else if("clip"==x||"eoclip"==x){var St=EN.G.getBB(u.pth.crds),kt=EN.G.getBB(u.cpth.crds);if(EN.G.isBox(u.pth,St)&&EN.G.insideBox(kt,St));else if(EN.G.isBox(u.cpth,kt)&&EN.G.insideBox(St,kt))u.cpth=JSON.parse(JSON.stringify(u.pth));else{var _t=EN.G.toPoly(u.pth),It=EN.G.toPoly(u.cpth);_t&&It?0!=(F=EN.G.polyClip(_t,It)).length?u.cpth=EN.G.fromPoly(F):console.log("strange intersection of polygons"):u.cpth=JSON.parse(JSON.stringify(u.pth))}}else if("clippath"==x)u.pth=JSON.parse(JSON.stringify(u.cpth));else if("pathbbox"==x){var Ct=u.pth.crds,Lt=EN.G.getBB(Ct);Ct=[Lt[0],Lt[1],Lt[2],Lt[1],Lt[0],Lt[3],Lt[2],Lt[3]],$=u.ctm.slice(0),EN.M.invert($),EN.M.multArray($,Ct),Lt=EN.G.getBB(Ct),l[0]=Lt[0],Lt[0]=l[0],l[0]=Lt[1],Lt[1]=l[0],l[0]=Lt[2],Lt[2]=l[0],l[0]=Lt[3],Lt[3]=l[0],Lt=Hz.makeArr(Lt,"real"),t.push(Lt[0],Lt[1],Lt[2],Lt[3])}else if("newpath"==x)EN.G.newPath(u);else if("stroke"==x)Hz.checkPageStarted(s,r),r.Stroke(u),EN.G.newPath(u);else if("fill"==x||"eofill"==x)Hz.checkPageStarted(s,r),r.Fill(u,"eofill"==x),EN.G.newPath(u);else if("closepath"==x)EN.G.closePath(u);else if("flattenpath"==x);else if("showpage"==x){Hz.checkPageStarted(s,r),r.ShowPage();var Nt=u.font;(u=s.gst=EN.getState(s.bb)).font=Nt,s.pgOpen=!1}else if("print"==x)ft=t.pop().val,_=Hz.readStr(ft),r.Print(_);else if("moveto"==x||"lineto"==x){var jt=t.pop().val,Tt=t.pop().val;"moveto"==x?EN.G.moveTo(u,Tt,jt):EN.G.lineTo(u,Tt,jt)}else if("rmoveto"==x||"rlineto"==x)jt=t.pop().val,Tt=t.pop().val,$=u.ctm.slice(0),EN.M.invert($),jt+=(F=EN.M.multPoint($,u.cpos))[1],Tt+=F[0],"rmoveto"==x?EN.G.moveTo(u,Tt,jt):EN.G.lineTo(u,Tt,jt);else if("curveto"==x){var zt=t.pop().val,At=t.pop().val,Pt=t.pop().val,Dt=t.pop().val,Et=t.pop().val,Ot=t.pop().val;EN.G.curveTo(u,Ot,Et,Dt,Pt,At,zt)}else if("arc"==x||"arcn"==x){var Rt=t.pop().val,Wt=t.pop().val;yt=t.pop().val,jt=t.pop().val,Tt=t.pop().val,EN.G.arc(u,Tt,jt,yt,Wt*Math.PI/180,Rt*Math.PI/180,"arcn"==x)}else if(-1!=["translate","scale","rotate","concat"].indexOf(x))"array"==(wt=t.pop()).typ?(Ut=Hz.readArr(wt.val),jt=t.pop().val):(Ut=[1,0,0,1,0,0],jt=wt.val),"translate"!=x&&"scale"!=x||(Tt=t.pop().val),"translate"==x&&EN.M.translate(Ut,Tt,jt),"scale"==x&&EN.M.scale(Ut,Tt,jt),"rotate"==x&&EN.M.rotate(Ut,-jt*Math.PI/180),"concat"==x&&EN.M.concat(Ut,jt),"array"==wt.typ?t.push({typ:"array",val:Hz.makeArr(Ut,"real")}):(EN.M.concat(Ut,u.ctm),u.ctm=Ut);else if("concatmatrix"==x){($t=Hz.readArr)(t.pop().val);var Bt=$t(t.pop().val),Ut=$t(t.pop().val).slice(0);EN.M.concat(Ut,Bt),Ut=Hz.makeArr(Ut,"real"),t.push({typ:"array",val:Ut})}else if("invertmatrix"==x){var $t;Bt=($t=Hz.readArr)(t.pop().val),Ut=$t(t.pop().val).slice(0),EN.M.invert(Ut),Ut=Hz.makeArr(Ut,"real"),t.push({typ:"array",val:Ut})}else if("currentmatrix"==x||"defaultmatrix"==x){Ut=t.pop();var Ft=Hz.makeArr("currentmatrix"==x?u.ctm:[1,0,0,1,0,0],"real");for(b=0;b<6;b++)Ut.val[b]=Ft[b];t.push(Ut)}else if("setmatrix"==x)u.ctm=Hz.readArr(t.pop().val);else if("cvi"==x){if(wt=(Gt=t.pop()).val,N=0,"real"==Gt.typ)N=Math.round(wt);else{if("integer"!=Gt.typ)throw"unknown type "+Gt.typ;N=wt}t.push({typ:"integer",val:N})}else if("cvr"==x){if(wt=(Gt=t.pop()).val,N=0,"real"==Gt.typ)N=wt;else if("integer"==Gt.typ)N=wt;else{if("string"!=Gt.typ)throw"unknown type "+Gt.typ;N=parseFloat(Hz.readStr(wt))}t.push({typ:"real",val:N})}else if("cvs"==x){_=t.pop();var Vt=t.pop();if(w="",_.val=[],t.push(_),"real"!=Vt.typ&&"integer"!=Vt.typ)throw"unknown var type: "+Vt.typ;for(w=Math.abs(Math.round(Vt.val)-Vt.val)<1e-6?Math.round(Vt.val)+".0":(Math.round(1e6*Vt.val)/1e6).toString(),b=0;b<w.length;b++)_.val[b]=w.charCodeAt(b)}else if("cvx"==x){var Gt=t.pop();t.push(Gt)}else if("cvn"==x)t.push({typ:"name",val:Hz.readStr(t.pop().val)});else if("cvlit"==x);else if(-1!=["add","sub","mul","div","idiv","bitshift","mod","exp","atan"].indexOf(x)){var Ht=t.pop(),Zt=(Jt=t.pop()).val,Yt=Ht.val,Qt=(N=0,"");"add"==x||"sub"==x||"mul"==x?Qt="real"==Jt.typ||"real"==Ht.typ?"real":"integer":"div"==x||"atan"==x||"exp"==x?Qt="real":"mod"!=x&&"idiv"!=x&&"bitshift"!=x||(Qt="integer"),"real"==Jt.typ&&(l[0]=Zt,Zt=l[0]),"real"==Ht.typ&&(l[0]=Yt,Yt=l[0]),"add"==x&&(N=Zt+Yt),"sub"==x&&(N=Zt-Yt),"mul"==x&&(N=Zt*Yt),"div"==x&&(N=Zt/Yt),"idiv"==x&&(N=~~(Zt/Yt)),"bitshift"==x&&(N=Yt>0?Zt<<Yt:Zt>>>-Yt),"mod"==x&&(N=Zt%Yt),"exp"==x&&(N=Math.pow(Zt,Yt)),"atan"==x&&(N=180*Math.atan2(Zt,Yt)/Math.PI),"real"==Qt&&(l[0]=N,N=l[0]),t.push({typ:Qt,val:N})}else if(-1!=["neg","abs","floor","round","truncate","sqrt","ln","sin","cos"].indexOf(x)){if(Zt=(Jt=t.pop()).val,N=0,Qt="","neg"==x||"abs"==x||"truncate"==x?Qt=Jt.typ:"round"==x||"floor"==x?Qt="integer":"sqrt"!=x&&"sin"!=x&&"cos"!=x&&"ln"!=x||(Qt="real"),"real"==Jt.typ&&(l[0]=Zt,Zt=l[0]),"neg"==x&&(N=-Zt),"abs"==x&&(N=Math.abs(Zt)),"floor"==x&&(N=Math.floor(Zt)),"round"==x&&(N=Math.round(Zt)),"truncate"==x&&(N=Math.trunc(Zt)),"sqrt"==x&&(N=Math.sqrt(Zt)),"ln"==x&&(N=Math.log(Zt)),"sin"==x&&(N=Math.sin(Zt*Math.PI/180)),"cos"==x&&(N=Math.cos(Zt*Math.PI/180)),"ln"==x&&Zt<=0)throw"e";"real"==Qt&&(l[0]=N,N=l[0]),t.push({typ:Qt,val:N})}else if(-1!=["eq","ge","gt","le","lt","ne"].indexOf(x)){var Jt;Ht=t.pop(),Zt=(Jt=t.pop()).val,Yt=Ht.val,N=!1,"eq"==x&&(N=Zt==Yt),"ge"==x&&(N=Zt>=Yt),"gt"==x&&(N=Zt>Yt),"le"==x&&(N=Zt<=Yt),"lt"==x&&(N=Zt<Yt),"ne"==x&&(N=Zt!=Yt),t.push({typ:"boolean",val:N})}else if(-1!=["and","or"].indexOf(x)){var qt=t.pop(),Kt=t.pop(),Xt=(Yt=Kt.val,qt.val),te="integer"==Kt.typ;"and"==x&&(N=te?Yt&Xt:Yt&&Xt),"or"==x&&(N=te?Yt|Xt:Yt||Xt),t.push({typ:te?"integer":"boolean",val:N})}else if("not"==x)wt=(mt=t.pop()).val,N=(te="integer"==mt.typ)?~wt:!wt,t.push({typ:te?"integer":"boolean",val:N});else if("if"==x){var ee=t.pop();(se=t.pop().val)&&Hz.addProc(ee,i)}else if("ifelse"==x){var ie=t.pop(),ne=t.pop(),se=t.pop().val;Hz.addProc(se?ne:ie,i)}else if("exec"==x||"stopped"==x){var re=t.pop();if("stopped"==x&&Hz.addProc({typ:"procedure",val:[{typ:"boolean",val:!1}]},i),"procedure"==re.typ)Hz.addProc(re,i);else{if("name"!=re.typ&&"operator"!=re.typ&&"real"!=re.typ&&"array"!=re.typ)throw console.log(re),"unknown executable type: "+re.typ;Hz.addProc({typ:"procedure",val:[re]},i)}}else if("dup"==x)wt=t.pop(),t.push(wt,wt);else if("exch"==x)t.push(t.pop(),t.pop());else if("copy"==x)if("integer"==(R=t.pop()).typ){var oe=[];for(b=0;b<R.val;b++)oe[R.val-1-b]=t.pop();for(b=0;b<R.val;b++)t.push(oe[b]);for(b=0;b<R.val;b++)t.push(oe[b])}else if("array"==R.typ){for(Ut=t.pop().val,b=0;b<Ut.length;b++)if(R.val[b]=Ut[b],null==Ut[b].val)throw console.log(e),"e";t.push(R)}else{if("dict"!=R.typ)throw"e";for(var ae in Ut=t.pop().val)R.val[ae]=Ut[ae];t.push(R)}else if("roll"==x){for(ot=t.pop().val,R=t.pop().val,oe=[],b=0;b<R;b++)oe.push(t.pop());for(oe.reverse(),ot=(R+ot)%R,b=0;b<ot;b++)oe.unshift(oe.pop());for(b=0;b<R;b++)t.push(oe[b])}else if("index"==x)R=t.pop().val,t.push(t[t.length-1-R]);else if("transform"==x||"itransform"==x||"dtransform"==x||"idtransform"==x){jt=0,Tt=0,"array"==(Ut=t.pop()).typ?(Ut=Hz.readArr(Ut.val),jt=t.pop().val):(jt=Ut.val,Ut=u.ctm.slice(0)),"itransform"!=x&&"idtransform"!=x||EN.M.invert(Ut),Tt=t.pop().val;var le=EN.M.multPoint(Ut,[Tt,jt]);"dtransform"!=x&&"idtransform"!=x||(le[0]-=Ut[4],le[1]-=Ut[5]),t.push({typ:"real",val:le[0]},{typ:"real",val:le[1]})}else if("pop"==x||"srand"==x||"=="==x)t.pop();else if("rand"==x)t.push({typ:"integer",val:Math.floor(2147483647*Math.random())});else if("put"==x)if(d=t.pop(),Gt=t.pop(),"array"==(Qt=(re=t.pop()).typ))re.val[Gt.val]=d;else if("dict"==Qt)re.val[Gt.val.slice(1)]=d;else{if("string"!=Qt)throw Qt+" e";re.val[Gt.val]=d.val}else if("get"==x)if(Gt=t.pop(),"string"==(Qt=(re=t.pop()).typ))t.push({typ:"integer",val:re.val[Gt.val]});else if("array"==Qt)t.push(re.val[Gt.val]);else{if("dict"!=Qt)throw"getting from unknown type "+re.typ;wt=re.val[Gt.val.slice(1)],t.push(wt)}else if("load"==x){if(U=t.pop().val.slice(1),null==(d=Hz.getFromStacks(U,e)))throw console.log(U,e),"e";t.push(d)}else if("where"==x)U=t.pop().val.slice(1),null!=(B=Hz.where(U,e))&&t.push({typ:"dict",val:B}),t.push({typ:"boolean",val:null!=B});else if("store"==x)d=t.pop(),U=t.pop().val.slice(1),null==(B=Hz.where(U,e))&&(B=e[e.length-1]),B[U]=d;else if("repeat"==x){ee=t.pop();var ce=t.pop().val;i.push({typ:"name",val:x+"---",ctx:{proc:ee,cur:0,cnt:ce}})}else if("repeat---"==x)(pe=P.ctx).cur<pe.cnt&&(i.push(P),Hz.addProc(pe.proc,i),pe.cur++);else if("for"==x){ee=t.pop();var ue=t.pop(),he=t.pop(),de=t.pop();i.push({typ:"name",val:x+"---",ctx:{proc:ee,isInt:"integer"==de.typ&&"integer"==he.typ,init:de.val,inc:he.val,limit:ue.val}})}else if("for---"==x)if((pe=P.ctx).isInt)(pe.inc>0&&pe.init<=pe.limit||pe.inc<0&&pe.init>=pe.limit)&&(i.push(P),Hz.addProc(pe.proc,i),t.push({typ:"integer",val:pe.init}),pe.init+=pe.inc);else{var fe=new Float32Array(1);fe[0]=pe.limit,pe.limit=fe[0],fe[0]=pe.inc,pe.inc=fe[0],fe[0]=pe.init,(pe.inc>0&&fe[0]<=pe.limit||pe.inc<0&&fe[0]>=pe.limit)&&(i.push(P),Hz.addProc(pe.proc,i),t.push({typ:"real",val:fe[0]}),fe[0]+=pe.inc,pe.init=fe[0])}else if("loop"==x)ee=t.pop(),i.push({typ:"name",val:x+"---",ctx:{proc:ee}});else if("loop---"==x){var pe=P.ctx;Hz.addProc(pe.proc,i)}else if("forall"==x)ee=t.pop(),re=t.pop(),i.push({typ:"name",val:x+"---",ctx:[ee,re,0]});else if("forall---"==x)if(ee=(pe=P.ctx)[0],re=pe[1],b=pe[2],"dict"==re.typ){var ge=Object.keys(re.val);b<ge.length&&(i.push(P),Hz.addProc(ee,i),t.push({typ:"name",val:"/"+ge[b]}),t.push(re.val[ge[b]]),pe[2]++)}else{if("procedure"!=re.typ&&"array"!=re.typ)throw console.log(ee,re),"forall: unknown type: "+re.typ;b<re.val.length&&(i.push(P),Hz.addProc(ee,i),t.push(re.val[b]),pe[2]++)}else if("exit"==x){for(b=i.length-1;0!=b&&("name"!=i[b].typ||!i[b].val.endsWith("---"));)b--;if(0!=b)for(;i.length>b;)i.pop()}else if("bind"==x);else if("xcheck"==x)h=(re=t.pop()).typ,t.push({typ:"boolean",val:"procedure"==h});else if("status"==x)_=t.pop(),t.push({typ:"boolean",val:!1});else if("cachestatus"==x)for(b=0;b<7;b++)t.push({typ:"integer",val:5e3});else if("setcachelimit"==x)t.pop();else if("type"==x){var me={name:"nametype",dict:"dicttype",boolean:"booleantype",procedure:"operatortype",string:"stringtype",null:"nulltype",integer:"integertype",array:"arraytype",operator:"operatortype",real:"realtype"};if(null==me[(Gt=t.pop()).typ])throw console.log(Gt),Gt.typ;t.push({typ:"name",val:"/"+me[Gt.typ]})}else if("save"==x)t.push({typ:"state",val:JSON.parse(JSON.stringify(u))});else if("restore"==x)u=s.gst=t.pop().val;else if("gsave"==x)n.push(JSON.parse(JSON.stringify(u)));else if("grestore"==x)u=s.gst=n.pop();else if("grestoreall"==x)for(;0!=n.length;)u=s.gst=n.pop();else if("usertime"==x||"realtime"==x)t.push({typ:"integer",val:"usertime"==x?Date.now()-a:Date.now()});else if("flush"==x||"readonly"==x||"executeonly"==x);else if("flushfile"==x)t.pop();else if("filter"==x){var ye,ve=t.pop().val.slice(1);if("ASCII85Decode"==ve){var be=t.pop().val;ye=Hz.F.ASCII85Decode(be)}else if("RunLengthDecode"==ve)be=t.pop().val,ye=Hz.F.RunLengthDecode(be);else{if("SubFileDecode"!=ve)throw console.log(t),ve;be=t.pop().val,ye=new Uint8Array(be)}t.push({typ:"file",val:{buff:ye,off:0,stk:[],env:{pckn:!1}}})}else if("begincmap"==x||"endcmap"==x);else if("begincodespacerange"==x||"beginbfrange"==x||"beginbfchar"==x)s.cmnum=t.pop().val;else if("endcodespacerange"==x||"endbfrange"==x||"endbfchar"==x){var xe="endbfrange"==x?3:2,we=x.slice(3);for(J=0,null==(B=e[e.length-1])[we]&&(B[we]=[]),b=0;b<s.cmnum;b++){var Me=[];for(ot=xe-1;ot>=0;ot--){var Se=t.pop(),ke=Se.val;if("string"==Se.typ)w=Hz.strToInt(ke),0==ot&&(J=ke.length);else{w=[];for(var _e=0;_e<ke.length;_e++)w.push(Hz.strToInt(ke[_e].val))}Me[ot]=w}B[we]=B[we].concat(Me)}"endcodespacerange"!=x&&(B.bpc=J)}else{if(!o)throw console.log(d,x),console.log(e,t),"e";o(x,t,e,i,n,s,r)}}}return!0},Hz.strToInt=function(t){for(var e=0,i=0;i<t.length;i++)e=e<<8|t[i];return e},Hz.checkPageStarted=function(t,e){t.pgOpen||(e.StartPage(t.bb[0],t.bb[1],t.bb[2],t.bb[3]),t.pgOpen=!0)},Hz.F={HexDecode:function(t){function e(t){if(48<=t&&t<=57)return t-48;if(65<=t&&t<=70)return 10+t-65;if(97<=t&&t<=102)return 10+t-97;throw"e"}for(var i=[],n=t.off;62!=t.buff[n];){for(;Hz.isWhite(t.buff[n]);)n++;var s=e(t.buff[n]);if(n++,62==t.buff[n]){i.push(s<<4);break}for(;Hz.isWhite(t.buff[n]);)n++;var r=e(t.buff[n]);n++,i.push((s<<4)+r)}return new Uint8Array(i)},ASCII85Decode:function(t){for(var e=[52200625,614125,7225,85,1],i=[],n=0,s=0,r=t.off;;){if(r>=t.buff.length)throw"e";var o=t.buff[r];if(r++,!Hz.isWhite(o)){if(126==o){if(0!=n){3==n&&i.push(s>>>24&255),4==n&&i.push(s>>>24&255,s>>>16&255);var a=5-n<<3,l=s>>>a&255;0!=(s&=(1<<a)-1)&&l++,i.push(l)}return t.off=r+1,new Uint8Array(i)}if(122!=o){if(o<33||o-33>84)throw"e";s+=(o-33)*e[n],5==++n&&(i.push(s>>>24&255),i.push(s>>>16&255),i.push(s>>>8&255),i.push(s>>>0&255),n=0,s=0)}else i.push(0,0,0,0)}}},RunLengthDecode:function(t){for(var e=[],i=t.off;;){if(i>=t.buff.length)throw console.log(e),"e";var n=t.buff[i];if(i++,128==n)return t.off=i,new Uint8Array(e);if(n<128){for(var s=0;s<n+1;s++)e.push(t.buff[i+s]);i+=n+1}else{for(s=0;s<257-n;s++)e.push(t.buff[i]);i++}}},FlateDecode:function(t){var e=t.buff,i=new Uint8Array(e.buffer,t.off,e.length);return Gz.inflate(i)}},Hz.B={readUshort:function(t,e){return t[e]<<8|t[e+1]},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},readASCII:function(t,e,i){for(var n="",s=0;s<i;s++)n+=String.fromCharCode(t[e+s]);return n}},Hz.nrm=function(t){return Math.max(0,Math.min(1,t))},Hz.makeArr=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push({typ:e,val:t[n]});return i},Hz.readArr=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].val);return e},Hz.readStr=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},Hz.getFromStacks=function(t,e){for(var i=e.length-1;i>=0;){if(null!=e[i][t])return e[i][t];i--}return null},Hz.where=function(t,e){for(var i=e.length-1;i>=0;){if(null!=e[i][t])return e[i];i--}return null},Hz.skipWhite=function(t){for(var e=t.off,i=t.buff,n=Hz.isWhite;n(i[e])||37==i[e];){for(;n(i[e]);)e++;if(37==i[e]){for(;e<i.length&&!Hz.isEOL(i[e]);)e++;e++}}t.off=e},Hz.getToken=function(t,e){if(0==t.length)return null;var i=t[t.length-1];if("procedure"==i.typ){var n=i.val[i.off];return i.off++,i.off==i.val.length&&t.pop(),n}if("name"==i.typ)return t.pop(),i;var s=Hz.getFToken(i.val,e);return null==s&&(t.pop(),0!=t.length&&(s=Hz.getFToken(t[t.length-1].val,e))),s},Hz.getFToken=function(t,e){Hz.skipWhite(t);var i=Hz.isWhite,n=Hz.isSpecl,s=t.off,r=t.buff,o=null;if(s>=r.length)return null;var a=r[s],l=String.fromCharCode(a);if(s++,"("==l){for(var c=0,u=s;41!=r[u]||0!=c;)40==r[u]&&c++,41==r[u]&&c--,92==r[u]&&u++,u++;for(var h=[],d=0;d<u-s;d++)h.push(r[s+d]);s=u+1,o={typ:"string",val:h=Hz.getString(h)}}else if("{"==l||"}"==l||"["==l||"]"==l)o={typ:"name",val:l};else if("<"==l&&60==r[s]||">"==l&&62==r[s])o={typ:"name",val:"<"==l?"<<":">>"},s++;else if("<"==l){for(u=s;62!=r[u];)u++;o={typ:"string",val:h=Hz.readHex({buff:r,off:s},u-s>>>1)},s=u+1}else{for(u=s;u<r.length&&!i(r[u])&&(!n(r[u])||47==r[u]&&47==r[u-1]&&u==s);)u++;var f=Hz.B.readASCII(r,s-1,u-s+1);s=u;var p=parseFloat(f);if("true"==f||"false"==f)o={typ:"boolean",val:"true"==f};else if(isNaN(p))if("//"==f.slice(0,2)){var g=f.slice(2),m=Hz.getFromStacks(g,e);if(null==m)throw"e";o=m}else o={typ:"name",val:f};else{var y=new Float32Array(1);y[0]=p,p=y[0],o={typ:-1==f.indexOf(".")?"integer":"real",val:p}}}return t.off=s,o},Hz.isSpecl=function(t){return-1!=[40,41,60,62,91,93,123,125,37,47].indexOf(t)},Hz.isWhite=function(t){return 9==t||10==t||12==t||13==t||32==t},Hz.isEOL=function(t){return 10==t||13==t},Hz.getString=function(t){for(var e=[],i=["n","r","t","b","f","\\","(",")"," ","/"],n=["\n","\r","\t","\b","\f","\\","(",")"," ","/"],s=0;s<t.length;s++){var r=t[s];if("\\"==String.fromCharCode(r)){var o=String.fromCharCode(t[s+1]);if(s++,"\r"==o||"\n"==o)continue;var a=i.indexOf(o);if(-1!=a)e.push(n[a].charCodeAt(0));else{var l=o+String.fromCharCode(t[s+1])+String.fromCharCode(t[s+2]);s+=2,e.push(parseInt(l,8))}}else e.push(r)}return e},Hz.makeString=function(t){for(var e=["n","r","t","b","f","\\","(",")"],i=["\n","\r","\t","\b","\f","\\","(",")"],n=[],s=0;s<t.length;s++){var r=t[s],o=i.indexOf(String.fromCharCode(r));-1==o?n.push(r):n.push(92,e[o].charCodeAt(0))}return n},Hz.readHex=function(t,e){for(var i=0,n=-1,s=[];;){var r=t.buff[t.off];t.off++;var o=0;if(47<r&&r<58)o=r-48;else if(96<r&&r<103)o=10+r-97;else{if(!(64<r&&r<71))continue;o=10+r-65}if(-1==n)n=o;else if(s[i]=n<<4|o,n=-1,++i==e)break}return s},Zz.Parse=function(t,e){t=new Uint8Array(t);for(var i=0;32==t[i];)i++;0!=i&&(t=new Uint8Array(t.buffer,i,t.length-i));for(var n=t.length-3;"%%E"!=Hz.B.readASCII(t,n,3);)n--;var s=n;for(n--;Hz.isEOL(t[n]);)n--;for(;!Hz.isEOL(t[n]);)n--;var r=parseInt(Hz.B.readASCII(t,n+1,s-n-1));if(isNaN(r))throw"no xref";var o=[],a=Zz.readXrefTrail(t,r,o),l={buff:t,off:0},c=a["/Root"];"ref"==c.typ&&(a["/Root"]=Zz.getIndirect(c.ind,c.gen,l,o));var u=a["/Root"]["/Pages"];"ref"==u.typ&&(a["/Root"]["/Pages"]=Zz.getIndirect(u.ind,u.gen,l,o));for(var h=[a["/Root"]["/Pages"]];0!=h.length;){var d=h.pop();if("/Pages"==d["/Type"])for(var f=d["/Kids"],p=0;p<f.length;p++)"ref"==f[p].typ&&(f[p]=Zz.getIndirect(f[p].ind,f[p].gen,l,o)),h.push(f[p])}Zz.render(a["/Root"],e,a),e.Done()},Zz.render=function(t,e,i){var n=["CS","cs","SCN","scn","SC","sc","sh","Do","gs","ID","EI","re","cm","y","v","B","B*","BT","ET","Tj","TJ","Tf","Tm","Td","T*","Tc","Tw","Tz","TL","Tr","Ts","MP","DP","BMC","BDC","EMC","BX","EX","ri"],s={J:"setlinecap",j:"setlinejoin",w:"setlinewidth",d:"setdash",M:"setmiterlimit",i:"setflat",q:"gsave",Q:"grestore",m:"moveto",l:"lineto",c:"curveto",h:"closepath",W:"clip","W*":"eoclip",f:"fill",F:"fill","f*":"eofill",S:"stroke",b:"h B","b*":"h B*",n:"newpath",RG:"/DeviceRGB  CS SCN",rg:"/DeviceRGB  cs scn",G:"/DeviceGray CS SCN",g:"/DeviceGray cs scn",K:"/DeviceCMYK CS SCN",k:"/DeviceCMYK cs scn",TD:"dup neg TL Td",'"':"exch Tc exch Tw '","'":"T* Tj",s:"h S",BI:"/BI"};s=Hz.makeProcs(s);for(var r=[t["/Pages"]],o=0;0!=r.length;){var a=r.pop();if("/Pages"!=a["/Type"]){o++;var l=a["/Contents"];null==l.length&&(l=[l]);var c=a["/MediaBox"];null==c&&(c=t["/Pages"]["/MediaBox"]);var u=Hz._getEnv(c);u.pgOpen=!0;var h=[],d=[],f=Hz._getDictStack(n,s),p=[];if(e.StartPage(c[0],c[1],c[2],c[3]),i["/Encrypt"])0==r.length&&alert("Encrypted PDF is not supported yet.");else for(var g=0;g<l.length;g++){for(var m=Zz.GS(l[g]),y=m.length-1;0==m[y];)y--;m=new Uint8Array(m.buffer,0,y+1),p.push({typ:"file",val:{buff:m,off:0,extra:a}});for(var v=!0;v;)v=Hz.step(d,f,p,h,u,e,Zz.operator)}if(e.ShowPage(),o>=e.maxPages)break}else for(var b=a["/Kids"],x=b.length-1;x>=0;x--)r.push(b[x])}},Zz.operator=function(t,e,i,n,s,r,o){for(var a=r.gst,l=n.length-1;"file"!=n[l].typ;)l--;var c=n[l].val,u=c.extra["/Resources"];if("Do"==t){var h=e.pop().val,d=u["/XObject"][h],f=d["/Subtype"],p=Zz.GS(d);if("/Form"==f)n.push({typ:"file",val:{buff:p,off:0,extra:d}});else if("/Image"==f){var g=null;d["/SMask"]&&(g=Zz.getImage(d["/SMask"],a));var m=d["/Width"],y=d["/Height"],v=d["/ColorSpace"],b=Zz.getImage(d,a);if(1==d["/ImageMask"]){g=b,b=new Uint8Array(m*y*4);for(var x=255*a.colr[0],w=255*a.colr[1],M=255*a.colr[2],S=0;S<m*y*4;S+=4)b[S]=x,b[S+1]=w,b[S+2]=M,b[S+3]=255}o.PutImage(a,b,m,y,g)}}else if("gs"==t){var k=e.pop().val,_=u["/ExtGState"][k];for(var I in _){var C=_[I];"/Type"!=I&&("/CA"==I?a.CA=C:"/ca"==I?a.ca=C:"/BM"==I?a.bmode=C:"/LC"==I?a.lcap=C:"/LJ"==I?a.ljoin=C:"/LW"==I?a.lwidth=C:"/ML"==I?a.mlimit=C:"/SA"==I?a.SA=C:"/OPM"==I?a.OPM=C:"/AIS"==I?a.AIS=C:"/OP"==I?a.OP=C:"/op"==I?a.op=C:"/SMask"==I?a.SMask="":"/SM"==I&&(a.SM=C))}}else if("ID"==t){for(var L={};"/BI"!=(C=e.pop().val);)L[e.pop().val]=C;c.off++,m=L["/W"],y=L["/H"],b=new Uint8Array(m*y*4),v=L["/CS"];for(var N=L["/BPC"],j=c.off;!Hz.isWhite(c.buff[j])||69!=c.buff[j+1]||73!=c.buff[j+2];)j++;p=c.buff.slice(c.off,j),c.off+=p.length,"/Fl"==L["/F"]&&(p=Hz.F.FlateDecode({buff:p,off:0}),delete L["/F"]),"/G"==v&&null==L["/F"]?Zz.plteImage(p,0,b,null,m,y,N):null!=v[0].typ?Zz.plteImage(p,0,b,v[3].val,m,y,N):b=p,o.PutImage(a,b,m,y)}else if("n"==t||"BT"==t||"EI"==t);else if("ET"==t)a.font.Tm=[1,0,0,1,0,0],a.font.Tlm=a.font.Tm.slice(0);else if("re"==t){y=e.pop().val,m=e.pop().val;var T=e.pop().val,z=e.pop().val;EN.G.moveTo(a,z,T),EN.G.lineTo(a,z+m,T),EN.G.lineTo(a,z+m,T+y),EN.G.lineTo(a,z,T+y),EN.G.closePath(a)}else if("y"==t||"v"==t){var A=a.ctm.slice(0);EN.M.invert(A),I=EN.M.multPoint(A,a.cpos);var P=e.pop().val,D=e.pop().val,E=e.pop().val,O=e.pop().val;"y"==t?EN.G.curveTo(a,O,E,D,P,D,P):EN.G.curveTo(a,I[0],I[1],O,E,D,P)}else if("B"==t||"B*"==t)o.FillAndStroke(a,"B*"==t),EN.G.newPath(a);else if("cm"==t||"Tm"==t){var R=[];for(S=0;S<6;S++)R.push(e.pop().val);R.reverse(),"cm"==t?(EN.M.concat(R,a.ctm),a.ctm=R):(a.font.Tm=R,a.font.Tlm=R.slice(0))}else if("Td"==t||"T*"==t){z=0,T=0,"T*"==t?(z=0,T=-a.font.Tl):(T=e.pop().val,z=e.pop().val);var W=[1,0,0,1,z,T];EN.M.concat(W,a.font.Tlm),a.font.Tm=W,a.font.Tlm=W.slice(0)}else if("Tf"==t){var B=e.pop().val,U=e.pop().val;a.font.Tf=U,a.font.Tfs=B}else if("Tj"==t||"TJ"==t){var $=e.pop();$="string"==$.typ?[$]:$.val,u["/Font"][U];var F=a.font.Tf,V=(U=u["/Font"][F],EN.M.getScale(a.font.Tm)*a.font.Tfs/1e3);for(S=0;S<$.length;S++)if("string"==$[S].typ){var G=Zz.getString($[S].val,U);if($[S+1]&&"string"!=$[S+1].typ){var H=$[S+1].val;G[1]+=-H,-900<H&&H<-100&&(G[0]+=" ")}a.font.Tf=G[2],o.PutText(a,G[0],G[1]/1e3),a.font.Tf=F,a.font.Tm[4]+=V*G[1]}else 0==S&&(a.font.Tm[4]+=-V*$[S].val)}else if("Tc"==t)a.font.Tc=e.pop().val;else if("Tw"==t)a.font.Tw=e.pop().val;else if("Tz"==t)a.font.Th=e.pop().val;else if("TL"==t)a.font.Tl=e.pop().val;else if("Tr"==t)a.font.Tmode=e.pop().val;else if("Ts"==t)a.font.Trise=e.pop().val;else if("CS"==t||"cs"==t)v=e.pop().val,"CS"==t?a.sspace=v:a.space=v;else if("SCN"==t||"scn"==t||"SC"==t||"sc"==t){var Z="SCN"==t||"SC"==t,Y=Z?a.sspace:a.space,Q=null,J=u?u["/ColorSpace"]:null;if("/Lab"==(v=null!=J&&null!=J[Y]?J[Y][1]&&J[Y][1]["/Alternate"]?J[Y][1]["/Alternate"]:"string"==typeof J[Y]?J[Y]:J[Y][0]:Y)||"/DeviceRGB"==v||"/DeviceN"==v||"/ICCBased"==v&&3==J[Y][1]["/N"])(Q=[e.pop().val,e.pop().val,e.pop().val]).reverse();else if("/DeviceCMYK"==v||"/ICCBased"==v&&4==J[Y][1]["/N"]){var q=[e.pop().val,e.pop().val,e.pop().val,e.pop().val];q.reverse(),Q=EN.C.cmykToRgb(q)}else if("/DeviceGray"==v||"/CalGray"==v){var K=Hz.nrm(e.pop().val);Q=[K,K,K]}else{if("/Separation"!=v){if("/Pattern"==v){var X=u["/Pattern"][e.pop().val];if(1==X["/PatternType"])return;return void Zz.setShadingFill(X["/Shading"],X["/Matrix"],Z,a)}throw console.log(Y,v,e,J,u),"e"}var tt=Zz.Func(J[Y][3],[e.pop().val]);Q=J&&J[Y]&&"/DeviceCMYK"==J[Y][2]?EN.C.cmykToRgb(tt):EN.C.labToRgb(tt)}Z?a.COLR=Q:a.colr=Q}else if("sh"==t){var et=u["/Shading"][e.pop().val],it=a.colr,nt=a.pth;a.pth=a.cpth,a.cpth=EN.G.rectToPath(r.bb),Zz.setShadingFill(et,a.ctm.slice(0),!1,a),o.Fill(a),a.colr=it,a.pth=nt}else if("MP"==t||"BMC"==t||"ri"==t)e.pop();else if("DP"==t||"BDC"==t)e.pop(),e.pop();else if("EMC"!=t&&"BX"!=t&&"EX"!=t)throw t},Zz.setShadingFill=function(t,e,i,n){var s=t["/ShadingType"],r=t["/ColorSpace"],o="";if(2==s)o="lin";else{if(3!=s)return void console.log("Unknown shading type",s);o="rad"}var a={typ:o,mat:e,grad:Zz.getGrad(t["/Function"],r),crds:t["/Coords"]};i?n.COLR=a:n.colr=a},Zz.getGrad=function(t,e){var i=Zz._normColor,n=t["/Functions"],s=t["/FunctionType"],r=t["/Bounds"],o=t["/Encode"];if(0==s||2==s)return[[0,i(t,[0],e)],[1,i(t,[1],e)]];var a=o[0],l=[];(0==r.length||r[0]>0)&&l.push([0,i(n[0],[a],e)]);for(var c=0;c<r.length;c++)l.push([r[c],i(n[c],[a],e)]);return(0==r.length||r[r.length-1]<1)&&l.push([1,i(n[n.length-1],[1-a],e)]),l},Zz._clrSamp=function(t,e){return[t[e]/255,t[e+1]/255,t[e+2]/255]},Zz._normColor=function(t,e,i){var n=Zz.Func(t,e);if(i[3]&&i[3]["/Length"]){if(n=Zz.Func(i[3],n),"/DeviceCMYK"!=i[2]&&4!=n.length)throw console.log(n,i),"unknown color profile";n=EN.C.cmykToRgb(n)}else(i[1]&&4==i[1]["/N"]||"/DeviceCMYK"==i)&&(n=EN.C.cmykToRgb(n));return n},Zz.getImage=function(t){var e=t["/Width"],i=t["/Height"],n=e*i,s=Zz.GS(t),r=t["/Filter"],o=t["/ColorSpace"],a=t["/BitsPerComponent"],l=t["/Matte"],c=t.image;if(null==c){var u=t["/Mask"];if(o&&"/Indexed"==o[0]){if(null!=o[3].length){var h=o[3];p=new Uint8Array(768);for(var d=0;d<h.length;d++)p[d]=h.charCodeAt(d)}else p=Zz.GS(o[3]);if("/DeviceCMYK"==o[1]||o[1]&&o[1][1]&&4==o[1][1]["/N"]){var f=p,p=new Uint8Array(768);for(d=0;d<256;d++){var g=(b=d<<2)-d,m=EN.C.cmykToRgb([f[b]/255,f[b+1]/255,f[b+2]/255,f[b+3]/255]);p[g]=255*m[0],p[g+1]=255*m[1],p[g+2]=255*m[2]}}var y=new Uint8Array(4*n);Zz.plteImage(s,0,y,p,e,i,a,u),c=y}else if(null==r&&o&&"/DeviceGray"==o)p=[0,0,0,255,255,255],y=new Uint8Array(4*n),t["/Decode"]&&1==t["/Decode"][0]&&p.reverse(),1==t["/ImageMask"]&&p.reverse(),Zz.plteImage(s,0,y,1==a?p:null,e,i,a,u),c=y;else if(null==r&&o&&"/ICCBased"==o[0]&&o[1]&&4==o[1]["/N"]){y=new Uint8Array(4*n);var v=[0,0,0,0];for(d=0;d<n;d++){var b=4*d;v[0]=s[b]*(1/255),v[1]=s[b+1]*(1/255),v[2]=s[b+2]*(1/255),v[3]=s[b+3]*(1/255),m=EN.C.cmykToRgb(v),y[b]=~~(255*m[0]+.5),y[b+1]=~~(255*m[1]+.5),y[b+2]=~~(255*m[2]+.5),y[b+3]=255}c=y}else if(e*i*3<=s.length){for(var x=Math.ceil(3*e*a/8),w=(y=new Uint8Array(4*n),0);w<i;w++)for(var M=x*w,S=0;S<e;S++){var k=3*S;y[b=4*(w*e+S)]=Zz.getBitNum(s,M,k,a),y[b+1]=Zz.getBitNum(s,M,k+1,a),y[b+2]=Zz.getBitNum(s,M,k+2,a),y[b+3]=255}c=y}else c=s;if(l&&"000"!=l.join("")){var _=Math.round(255*l[0]),I=Math.round(255*l[1]),C=Math.round(255*l[2]);for(d=0;d<c.length;d+=4)c[d]=Math.max(c[d],_),c[d+1]=Math.max(c[d+1],I),c[d+2]=Math.max(c[d+2],C)}t.image=c}return c},Zz.plteImage=function(t,e,i,n,s,r,o,a){for(var l=Math.round(255/((1<<o)-1)),c=Math.ceil(s*o/8),u=0;u<r;u++)for(var h=e+c*u,d=0;d<s;d++){var f=Zz.getBitNum(t,h,d,o),p=u*s+d<<2;if(n){var g=3*f;i[p]=n[g],i[p+1]=n[g+1],i[p+2]=n[g+2]}else{var m=f*l;i[p]=m,i[p+1]=m,i[p+2]=m}i[p+3]=255,a&&a[0]<=f&&f<=a[1]&&(i[p+3]=0)}},Zz.getBitNum=function(t,e,i,n){var s=0;return 8==n?s=t[e+i]:4==n?s=t[e+(i>>1)]>>(1-(1&i)<<2)&15:2==n?s=t[e+(i>>2)]>>(3-(3&i)<<1)&3:1==n&&(s=t[e+(i>>3)]>>7-(7&i)&1),s},Zz.Func=function(t,e){for(var i=t["/Domain"],n=t["/Range"],s=t["/FunctionType"],r=[],o=0;o<e.length;o++)e[o]=Math.max(i[2*o],Math.min(i[2*o+1],e[o]));if(0==s){var a=t["/Encode"],l=t["/Size"],c=t["/Decode"],u=n.length/2;for(null==a&&(a=[0,l[0]-1]),null==c&&(c=n),o=0;o<e.length;o++){var h=Zz.intp(e[o],i[2*o],i[2*o+1],a[2*o],a[2*o+1]);e[o]=Math.max(0,Math.min(l[o]-1,h))}for(var d=0;d<u;d++){var f=Math.round(e[0]),p=Zz.GS(t)[u*f+d];p=Zz.intp(p,0,255,c[2*d],c[2*d+1]),r.push(p)}}else if(2==s){var g=t["/C0"],m=t["/C1"],y=t["/N"];for(f=e[0],o=0;o<g.length;o++)r[o]=g[o]+Math.pow(f,y)*(m[o]-g[o])}else if(4==s){var v=Hz._getEnv([0,0,0,0]);v.pgOpen=!0;var b=[],x=[],w=Hz._getDictStack([],{}),M=[];M.push({typ:"file",val:{buff:Zz.GS(t),off:0}});for(var S=!0;S;)S=Hz.step(x,w,M,b,v,{},Zz.operator);var k=x.pop();for(k.off=0,M.push(k),o=0;o<e.length;o++)x.push({typ:"real",val:e[o]});for(S=!0;S;)S=Hz.step(x,w,M,b,v,{},Zz.operator);for(o=0;o<x.length;o++)r.push(x[o].val)}if(n)for(o=0;o<r.length;o++)r[o]=Math.max(n[2*o],Math.min(n[2*o+1],r[o]));return r},Zz.intp=function(t,e,i,n,s){return n+(t-e)*(s-n)/(i-e)},Zz.getString=function(t,e){var i=e["/Subtype"],n="",s=0,r=null,o=e["/ToUnicode"],a=e["/Encoding"],l=e;if("/Type0"==i&&(l=e["/DescendantFonts"][0]),null!=o)n=Zz.toUnicode(t,o);else if("/WinAnsiEncoding"==a)n=Zz.encFromMap(t,Zz._win1252);else if("/MacRomanEncoding"==a)n=Zz.encFromMap(t,Zz._macRoman);else if("/Type0"==i){var c=0;"/Identity-H"==a&&(c=31);for(var u=0;u<t.length;u+=2){var h=t[u]<<8|t[u+1];n+=String.fromCharCode(h+c)}}else if(null!=a&&"/Encoding"==a["/Type"]){var d=a["/Differences"],f=a["/BaseEncoding"],p=null;if("/WinAnsiEncoding"==f&&(p=Zz._win1252),"/MacRomanEncoding"==f&&(p=Zz._macRoman),d){n="";for(var g=0;g<t.length;g++){var m=t[g],y=-5,v=!1;for(u=0;u<d.length;u++)if("string"==typeof d[u]){if(m==y){n+=Zz.fromCName(d[u].slice(1)),v=!0;break}y++}else y=d[u];if(!v&&null!=p){var b=p.indexOf(m);-1!=b&&(m=String.fromCharCode(p[b+1])),n+=String.fromCharCode(m)}}}}else n=Hz.readStr(t);if("/Type0"==i)if(null==(k=l["/W"]))s=1e3*n.length*.4;else for(g=0;g<t.length;g+=2){var x=t[g]<<8|t[g+1],w=!1;for(u=0;u<k.length;u+=2){var M=k[u],S=k[u+1];S.length?0<=x-M&&x-M<S.length&&(s+=S[x-M],w=!0):(M<=x&&x<=S&&(s+=k[u+2],w=!0),u++)}w||(s+=k[1][0])}else{if("/Type1"!=i&&"/Type3"!=i&&"/TrueType"!=i)throw"unknown font type";var k,_=e["/FirstChar"];if(k=e["/Widths"])for(g=0;g<t.length;g++)s+=k[t[g]-_];else s=1e3*n.length*.4,console.log("approximating word width")}var I=l["/FontDescriptor"];if(I)if(I.psName)r=I.psName;else{var C,L=["","2","3"];for(g=0;g<3;g++)I["/FontFile"+L[g]]&&(C="/FontFile"+L[g]);if(C){var N=Zz.GS(I[C]);null!=C&&N&&65536==Hz.B.readUint(N,0)&&(r=I.psName=Zz._psName(N))}}return null==r&&e["/BaseFont"]&&(r=e["/BaseFont"].slice(1)),null==r&&(r="DejaVuSans"),[n,s,r.split("+").pop()]},Zz._psName=function(t){for(var e=Hz.B.readUshort,i=e(t,4),n=0,s=0;s<i;s++){var r=Hz.B.readASCII(t,12+16*s,4),o=Hz.B.readUint(t,12+16*s+8);if("name"==r){n=o;break}}if(0==n)return null;var a=e(t,n+2),l=n+6,c=n+6;for(s=0;s<a;s++){e(t,c);var u=e(t,c+2);e(t,c+4);var h,d=e(t,c+6),f=e(t,c+8),p=e(t,c+10);c+=12;var g=l+12*a+p;if(1==u||10==u||3==u){h="";for(var m=1;m<f;m+=2)h+=String.fromCharCode(t[g+m])}if(0!=u&&2!=u||(h=Hz.B.readASCII(t,g,f)),6==d&&null!=h&&"OTS"!=h.slice(0,3))return h.replace(/\s/g,"")}return null},Zz.encFromMap=function(t,e){for(var i="",n=0;n<t.length;n++){var s=t[n],r=e.indexOf(s);-1!=r&&(s=e[r+1]),i+=String.fromCharCode(s)}return i},Zz._win1252=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376],Zz._macRoman=[128,196,129,197,130,199,131,201,132,209,133,214,134,220,135,225,136,224,137,226,138,228,139,227,140,229,141,231,142,233,143,232,144,234,145,235,146,237,147,236,148,238,149,239,150,241,151,243,152,242,153,244,154,246,155,245,156,250,157,249,158,251,159,252,160,8224,161,176,162,162,163,163,164,167,165,8226,166,182,167,223,168,174,169,169,170,8482,171,180,172,168,173,9824,174,198,175,216,176,8734,177,177,178,8804,179,8805,180,165,181,181,182,8706,183,8721,184,8719,185,960,186,8747,187,170,188,186,189,937,190,230,191,248,192,191,193,161,194,172,195,8730,196,402,197,8776,198,8710,199,171,200,187,201,8230,202,160,203,192,204,195,205,213,206,338,207,339,208,8211,209,8212,210,8220,211,8221,212,8216,213,8217,214,247,215,9674,216,255,217,376,218,8260,219,8364,220,8249,221,8250,222,64257,223,64258,224,8225,225,183,226,8218,227,8222,228,8240,229,194,230,202,231,193,232,203,233,200,234,205,235,206,236,207,237,204,238,211,239,212,240,63743,241,210,242,218,243,219,244,217,245,305,246,710,247,732,248,175,249,728,250,729,251,730,252,184,253,733,254,731,255,711],Zz.fromCName=function(t){if(1==t.length)return t;if("uni"==t.slice(0,3))return String.fromCharCode(parseInt(t.slice(3),16));var e={space:32,exclam:33,quotedbl:34,numbersign:35,dollar:36,percent:37,parenleft:40,parenright:41,asterisk:42,plus:43,comma:44,hyphen:45,period:46,slash:47,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,colon:58,semicolon:59,less:60,equal:61,at:64,bracketleft:91,bracketright:93,underscore:95,braceleft:123,braceright:125,dieresis:168,circlecopyrt:169,Eacute:201,dotlessi:305,tcaron:357,alpha:945,phi:966,endash:8211,emdash:8212,asteriskmath:8727,quoteright:8217,quotedblleft:8220,quotedblright:8221,bullet:8226,minus:8706,fi:64257,fl:64258}[t];return null==e?("g"!=t.charAt(0)&&console.log("unknown character "+t),t):String.fromCharCode(e)},Zz.toUnicode=function(t,e){var i=e.cmap,n="";if(null==i){var s={buff:Zz.GS(e),off:0},r=[],o=Hz._getDictStack({}),a=[{typ:"file",val:s}],l=[],c=Hz._getEnv([0,0,1,1]);c.pgOpen=!0;for(var u=!0;u;)u=Hz.step(r,o,a,l,c,null,Zz.operator);i=c.res.CMap,e.cmap=i}for(var h in i){i=i[h];break}for(var d=i.bfrange,f=i.bfchar,p=i.bpc,g=0;g<t.length;g+=p){var m=t[g];2==p&&(m=m<<8|t[g+1]);var y=!1;if(!y&&d)for(var v=0;v<d.length;v+=3){var b=d[v],x=d[v+1],w=d[v+2];if(b<=m&&m<=x){null==w.length?m+=w-b:m=w[m-b],y=!0;break}}if(!y&&f)for(v=0;v<f.length;v+=2)if(f[v]==m){m=f[v+1],y=!0;break}n+=String.fromCharCode(m)}return n},Zz.readXrefTrail=function(t,e,i){if("xref"==Hz.B.readASCII(t,e,4)){for(13==t[u=e+4]&&u++,10==t[u]&&u++;;){if("trailer"==Hz.B.readASCII(t,u,7)){u+=8;break}for(var n=u;!Hz.isEOL(t[u]);)u++;var s=Hz.B.readASCII(t,n,u-n);s=s.split(" ");var r=parseInt(s[1]);13==t[u]&&u++,10==t[u]&&u++;for(var o=0;o<r;o++){var a=parseInt(s[0])+o;null==i[a]&&(i[a]={off:parseInt(Hz.B.readASCII(t,u,10)),gen:parseInt(Hz.B.readASCII(t,u+11,5)),chr:Hz.B.readASCII(t,u+17,1),val:null,opn:!1}),u+=20}}var l={buff:t,off:u},c=Zz.readObject(l,l,i);return c["/Prev"]&&Zz.readXrefTrail(t,c["/Prev"],i),c}for(var u=e;!Hz.isEOL(t[u]);)u++;u++;for(var h=Zz.readObject({buff:t,off:u},l,null),d=0,f=Zz.GS(h),p=h["/W"],g=h["/Index"]?h["/Index"][0]:0;d<f.length;){var m=Zz.getInt(f,d,p[0]);d+=p[0];var y=Zz.getInt(f,d,p[1]);d+=p[1];var v=Zz.getInt(f,d,p[2]);d+=p[2],u=0;var b=0,x="n";0==m&&(u=y,b=v,x="f"),1==m&&(u=y,b=v,x="n"),2==m&&(u=y,b=v,x="s"),i[g]={off:u,gen:b,chr:x,val:null,opn:!1},g++}h["/Prev"]&&Zz.readXrefTrail(t,h["/Prev"],i);var w={buff:t,off:0},M=["/Root","/Info"];for(o=0;o<M.length;o++){var S=M[o],k=h[S];k&&"ref"==k.typ&&(h[S]=Zz.getIndirect(k.ind,k.gen,w,i))}return h},Zz.getInt=function(t,e,i){if(0==i)return 0;if(1==i)return t[e];if(2==i)return t[e]<<8|t[e+1];if(3==i)return t[e]<<16|t[e+1]<<8|t[e+2];throw"e"},Zz.getIndirect=function(t,e,i,n){var s=n[t];if("f"==s.chr)return null;if(null!=s.val)return s.val;if(s.opn)return{typ:"ref",ind:t,gen:e};s.opn=!0;var r,o=i.off;if("s"==s.chr){for(var a=Zz.getIndirect(s.off,s.gen,i,n),l={buff:Zz.GS(a),off:0},c=0,u=0;c!=t;)c=Hz.getFToken(l).val,u=Hz.getFToken(l).val;l.off=u+a["/First"],r=Zz.readObject(l,i,n)}else i.off=s.off,Hz.getFToken(i),Hz.getFToken(i),Hz.getFToken(i),r=Zz.readObject(i,i,n);return s.val=r,i.off=o,s.opn=!1,r},Zz.readObject=function(t,e,i){var n=Hz.getFToken(t);if("integer"==n.typ){var s=t.off,r=Hz.getFToken(t);if("integer"==r.typ&&(Hz.skipWhite(t),82==t.buff[t.off]))return t.off++,i&&i[n.val]?Zz.getIndirect(n.val,r.val,e,i):{typ:"ref",ind:n.val,gen:r.val};t.off=s}if("<<"==n.val)return Zz.readDict(t,e,i);if("["==n.val)return Zz.readArra(t,e,i);if("string"==n.typ){for(var o="",a=0;a<n.val.length;a++)o+=String.fromCharCode(n.val[a]);return o}return n.val},Zz.readDict=function(t,e,i){for(var n={};;){var s=t.off,r=Hz.getFToken(t);if("name"==r.typ&&">>"==r.val)break;t.off=s;var o=Zz.readObject(t,e,i),a=Zz.readObject(t,e,i);n[o]=a}if(null!=n["/Length"]){var l=n["/Length"];Hz.getFToken(t),13==t.buff[t.off]&&t.off++,10==t.buff[t.off]&&t.off++,n.buff=t.buff.slice(t.off,t.off+l),t.off+=l,Hz.getFToken(t)}return n},Zz.GS=function(t){if(null==t.stream){var e=t.buff;delete t.buff;var i=t["/Filter"],n=t["/DecodeParms"];if(null!=i){for(var s="string"==typeof i?[i]:i,r=!1,o=0;o<s.length;o++){var a=s[o],l={buff:e,off:0};if("/FlateDecode"==a)e=Hz.F.FlateDecode(l);else if("/ASCIIHexDecode"==a)e=Hz.F.HexDecode(l);else if("/ASCII85Decode"==a)e=Hz.F.ASCII85Decode(l);else{if("/DCTDecode"!=a&&"/CCITTFaxDecode"!=a&&"/JPXDecode"!=a&&"/JBIG2Decode"!=a)throw console.log(a,e),"e";r=!0}}r||delete t["/Filter"]}if(null!=n&&(n instanceof Array&&(n=n[0]),null!=n["/Predictor"]&&1!=n["/Predictor"])){var c=n["/Columns"],u=n["/Colors"]?n["/Colors"]:1,h=u*c,d=e.length/(h+1);Zz._filterZero(e,0,c,d,u),e=e.slice(0,d*h)}t.stream=e}return t.stream},Zz.readArra=function(t,e,i){for(var n=[];;){var s=t.off,r=Hz.getFToken(t);if("name"==r.typ&&"]"==r.val)return n;t.off=s;var o=Zz.readObject(t,e,i);n.push(o)}},Zz._filterZero=function(t,e,i,n,s){for(var r=s*i,o=Zz._paeth,a=0;a<n;a++){var l=e+a*r,c=l+a+1,u=t[c-1];if(0==u)for(var h=0;h<r;h++)t[l+h]=t[c+h];else if(1==u){for(h=0;h<s;h++)t[l+h]=t[c+h];for(h=s;h<r;h++)t[l+h]=t[c+h]+t[l+h-s]&255}else if(0==a){for(h=0;h<s;h++)t[l+h]=t[c+h];if(2==u)for(h=s;h<r;h++)t[l+h]=255&t[c+h];if(3==u)for(h=s;h<r;h++)t[l+h]=t[c+h]+(t[l+h-s]>>1)&255;if(4==u)for(h=s;h<r;h++)t[l+h]=t[c+h]+o(t[l+h-s],0,0)&255}else{if(2==u)for(h=0;h<r;h++)t[l+h]=t[c+h]+t[l+h-r]&255;if(3==u){for(h=0;h<s;h++)t[l+h]=t[c+h]+(t[l+h-r]>>1)&255;for(h=s;h<r;h++)t[l+h]=t[c+h]+(t[l+h-r]+t[l+h-s]>>1)&255}if(4==u){for(h=0;h<s;h++)t[l+h]=t[c+h]+o(0,t[l+h-r],0)&255;for(h=s;h<r;h++)t[l+h]=t[c+h]+o(t[l+h-s],t[l+h-r],t[l+h-s-r])&255}}}return t},Zz._paeth=function(t,e,i){var n=t+e-i,s=Math.abs(n-t),r=Math.abs(n-e),o=Math.abs(n-i);return s<=r&&s<=o?t:r<=o?e:i};class Yz{#pi=0;#Yu=null;#gs=null;#Qu=new Map;#Ju=new Map;#qu=[];#e=[];#Ku;constructor(t){this.#Ku=t}destroy(){this.#Ku=null,this.#gs?.dispose(),this.#gs=this.#Yu=null,this.#Qu.clear(),this.#Ju.clear(),this.#e.splice(0);for(const t of this.#qu.splice(0))t.dispose()}#Xu(t){return new Zp(t)}#th(t){const e=new fg;return e.appendChild(new tg(t)),e}#eh(t,e){if(!e||e.bounds.containsRect(this.#Yu)||t.localBounds.isVisible&&e.bounds.containsRect(t.localBounds)||t.globalBounds.isVisible&&e.bounds.containsQuad(t.globalBounds))return e?.dispose(),t;const i=this.#th(e);return i.appendChild(t),i}StartPage(t,e,i,n){this.#Yu=new wi(t,e,i,n),this.#gs=new Hp}ShowPage(){this.#ih(this.#gs);const t=this.#Yu,e=this.#gs;if(this.#gs=this.#Yu=null,!e.hasChildren)return void e.dispose();const i=(new $i).translate(-t.x,t.height-t.y).scale(1,-1);e.absorbMatrix(i),this.#qu.push(e),this.#e.push(t),this.#pi++}Done(){this.#Ku&&this.#Ku({pages:this.#qu.splice(0),images:new Map(this.#Ju),bounds:this.#e.splice(0)}),this.destroy()}#ih(t){for(let e=t.lastChild;null!=e;e=e.previousSibling){if(!(e instanceof fg&&e.nextSibling instanceof fg))continue;const t=e.nextSibling;if(e.clipPath.equals(t.clipPath)){for(const i of[...t.children()])i.remove(),i instanceof tg?i.dispose():e.appendChild(i);t.remove(),t.dispose()}}}#nh(t){return new De(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2]))}#sh(t){if(Array.isArray(t))return new Hi(this.#nh(t));const e=this.#rh(t.mat),i=[];for(const e of t.grad)i.push({offset:e[0],color:this.#nh(e[1])});const n=new Zi(i);return"lin"===t.typ?new sn(new Be(t.crds[0],t.crds[1]),new Be(t.crds[2],t.crds[3]),n).withTransformedCoords(e):"rad"===t.typ?kt(t.crds.slice(0,3),t.crds.slice(3,6))?new rn(new Be(t.crds[0],t.crds[1]),t.crds[2],n).withTransformedCoords(e):new on(new Be(t.crds[0],t.crds[1]),t.crds[2],new Be(t.crds[3],t.crds[4]),t.crds[5],n).withTransformedCoords(e):Gi.INSTANCE}#oh(t){return zM(t.toLowerCase().substring(1))}#ah(t,e){if(null==t||0===t.cmds.length)return null;const i=[];let n=0;for(const e of t.cmds){i.push(e);let s=0;switch(e){case"M":case"L":s=2;break;case"Q":s=4;break;case"C":s=6}s>0&&(i.push(t.crds.slice(n,n+s)),n+=s)}const s=zs.fromString(i.join(" "));return null==e||e.isIdentity||s.setNodes(ls(s.nodes,e)),s}#rh(t){return $i.Create(t)}Fill(t,e,i){const n=!i;i||(i=this.#Xu(this.#ah(t.pth))),i.fillRule=e?1:0,i.strokeBrush=Gi.INSTANCE,i.fill=this.#sh(t.colr),i.fillOpacity=t.ca??1,i.blend=this.#oh(t.bmode),n&&this.#gs.appendChild(this.#eh(i,this.#ah(t.cpth)))}Stroke(t,e){const i=!e,n=this.#rh(t.ctm).lineScale;e||((e=this.#Xu(this.#ah(t.pth))).fill=Gi.INSTANCE),e.strokeOpacity=t.CA??1,e.strokeBrush=this.#sh(t.COLR),e.blend=this.#oh(t.bmode),e.strokeLineCap=[0,1,2][t.lcap],e.strokeLineJoin=[0,1,2][t.ljoin],e.strokeMiterLimit=n*(t.mlimit??10),e.strokeLineWidth=n*t.lwidth,e.strokeDashOffset=n*(t.doff||0),e.strokeDashArray=(Array.isArray(t.dash)?t.dash:[]).map((t=>n*t)),i&&this.#gs.appendChild(this.#eh(e,this.#ah(t.cpth)))}FillAndStroke(t,e){const i=this.#Xu(this.#ah(t.pth));this.Fill(t,e,i),this.Stroke(t,i),this.#gs.appendChild(this.#eh(i,this.#ah(t.cpth)))}PutText(t,e){}#lh(t,e,i,n){const s=t.length;if(s!==e*i*4)return null;if(null!=n&&n.length===s)return null;if(this.#Qu.has(t))return this.#Qu.get(t);const r=new Uint8ClampedArray(t.length);for(let n=0;n<i;n++){const s=n*e*4,o=(i-n-1)*e*4;for(let i=0;i<e;i++){const e=4*i;r[s+e]=t[o+e],r[s+e+1]=t[o+e+1],r[s+e+2]=t[o+e+2],r[s+e+3]=t[o+e+3]}}return{width:e,height:i,data:r}}PutImage(t,e,i,n,s){const r=this.#lh(e,i,n,s);if(null==r)return;const o=new dg(null);o.width=i,o.height=n,this.#Ju.set(o,r);const a=new $i(1/i,0,0,1/n,0,0);a.preMultiply(this.#rh(t.ctm)),o.setTransformMatrix(a),this.#gs.appendChild(this.#eh(o,this.#ah(t.cpth)))}}async function Qz(t){let e=Skia.SkImage.MakeFromPixels(t.data,t.width,t.height);if(!e)return null;const i=e.encodeToData();if(e.delete(),!i)return null;const n=i.getBytes();if(!n||!n.byteLength)return i.delete(),null;const s=await ag.idFromData(n);return e=Skia.SkImage.MakeFromEncoded(i),i.delete(),e?new ag(e,s):null}class Jz{#tn=null;#ch=new $M;#uh=[];#hh=new Map;#ts;constructor(t){this.#ts=t}dispose(){this.#hh?.clear(),this.#hh=null,this.#tn=null,this.#ch?.dispose(),this.#ch=null,this.#ts=null}async#dh(t){return t instanceof File?t.text():new Blob([t],{type:"image/svg+xml"}).text()}async import(t){const e=new kg;let i;try{i=await this.#fh("string"==typeof t?t:await this.#dh(t),e)}catch{return e.dispose(),!1}const n=new Yg;return n.appendChild(e),this.#ts.content.board=new wi(0,0,i.width,i.height),this.#ts.content.document=n,!0}async#fh(t,e){const i=function(t){const e=(new DOMParser).parseFromString(t,"image/svg+xml");if(e.querySelector("parsererror"))throw new Error("Invalid SVG");if(e.querySelectorAll("script, foreignObject, link, switch, animate, animateTransform, animateColor, animateMotion").forEach((t=>{t.remove()})),e.querySelectorAll("image").forEach((t=>{const e=t.href?.baseVal;e&&/^data:image\/(png|jpe?g|webp)/.test(e.substring(0,20))||t.remove()})),!(e.documentElement instanceof SVGSVGElement))throw new Error("Invalid SVG");return e.documentElement}(t);t=null;const n=document.createElement("div");n.style.position="absolute",n.style.top="200vh",n.style.left="200vw",n.style.zIndex="-100",n.appendChild(i),document.body.appendChild(n);const s=Array.isArray(e)?t=>e.push(t):t=>e.appendChild(t);let r;try{r=await this.#ph(i,s)}finally{n.parentNode.removeChild(n)}return r}#gh(t){if(t.id){if(this.#uh.includes(t.id))return!1;this.#uh.push(t.id)}return!0}#mh(){return this.#uh.pop()}async#ph(t,e){if(!this.#gh(t))return console.warn("Inf. recursion"),null;const i=this.#tn,n=this.#ch.getViewBox(t),s=n.topLeft;this.#tn=new OM(n);try{if(s.isZero)for(const i of this.#yh(t))e(i);else for(const i of this.#yh(t))i.anchor=i.anchor.add(s),e(i)}finally{this.#mh(),this.#tn=i}return await this.#vh(),n}async#vh(){function t(t){for(const e of t)e.remove(),e.dispose()}const e=cg(this.#ts.global);for(let[i,n]of this.#hh)try{let t=await bt(i);if(i=null,t){const i=await t.arrayBuffer(),s=await ag.idFromData(i);if(!e.has(s)){const t=await ag.fromRawData(i,s);if(!t)throw new Error("Cannot decode image");e.add(t)}t=null;for(const t of n)t.parent?t.imageId=s:t.dispose()}}catch(e){t(n)}this.#hh.clear()}*#yh(t){for(let e=t.firstElementChild;null!=e;e=e.nextElementSibling)if(e instanceof SVGElement&&this.#gh(e))try{const t=this.#bh(e);t&&(yield t)}finally{this.#mh()}}#xh(t){switch(t.localName){case"path":return this.#wh(t);case"rect":return this.#Mh(t);case"circle":return this.#Sh(t);case"ellipse":return this.#kh(t);case"line":return this.#_h(t);case"polyline":return this.#Ih(t,!1);case"polygon":return this.#Ih(t,!0);case"text":return this.#Ch(t);case"textPath":return this.#Lh(t)}return null}#Nh(t){switch(t.localName){case"g":case"a":return this.#jh(t);case"image":return this.#Th(t);case"use":return this.#zh(t);case"svg":return this.#Ah(t)}return this.#xh(t)}#bh(t){let e=this.#Nh(t);if(!e)return null;if(e.skipPropertiesAndChildren)return e.element;let i=e.element;const n=e.position,s=this.#Ph(t);this.#tn.concat(s),i instanceof Rh&&this.#Dh(t,i,n);try{if(i.supportsChildren)for(const e of this.#yh(t))i.appendChild(e)}finally{this.#tn.pop()}const r=this.#Eh(t,i.localBounds,n);return r&&(r.appendChild(i),i=r),this.#Zo(t,i),n&&s.translate(n.x,n.y),i.setTransformMatrix(s),i}#Zo(t,e){const i=this.#ch;e.blend=i.getBlendMode(t),e.isolate=e.supportsChildren&&i.getIsolate(t),e.opacity=i.getOpacity(t),e.hidden=i.getHidden(t),e.title=i.getTitle(t)}#Dh(t,e,i){const n=e.localBounds;e.stroke=this.#Oh(t,n,i);const s=this.#ch;e.strokeOpacity=s.getStrokeOpacity(t),e.fill=this.#sh(t,s.getFill(t),n,i),e.fillOpacity=s.getFillOpacity(t),e.fillRule=s.getFillRule(t),e.paintOrder=s.getPaintOrder(t)}#Ph(t,e){const i=this.#ch.getTransform(t);return e&&!e.isZero&&i.translate(e.x,e.y),i}#Sh(t){const e=this.#tn.viewBox,i=this.#ch,n=i.getAxisSize(t,"cx",e,"x",0),s=i.getAxisSize(t,"cy",e,"y",0),r=2*i.getAxisSize(t,"r",e,null,0);return{position:n||s?new Be(n,s):Be.ZERO,element:new Vp(new Zs(r,r))}}#kh(t){const e=this.#tn.viewBox,i=this.#ch,n=i.getAxisSize(t,"cx",e,"x",0),s=i.getAxisSize(t,"cy",e,"y",0),r=2*i.getAxisSize(t,"rx",e,"x",0),o=2*i.getAxisSize(t,"ry",e,"y",0);return{position:n||s?new Be(n,s):Be.ZERO,element:new Vp(new Zs(r,o))}}#Mh(t){const e=this.#tn.viewBox,i=this.#ch;let n=i.getAxisSize(t,"x",e,"x",0),s=i.getAxisSize(t,"y",e,"y",0);const r=i.getAxisSize(t,"width",e,"x",0),o=i.getAxisSize(t,"height",e,"y",0),a=new wi(n,s,r,o);let l,c=i.getAxisSize(t,"rx",a,"x",null),u=i.getAxisSize(t,"ry",a,"y",null);if(null==c?c=u??(u=0):null==u&&(u=c),0!==c&&0!==u||(c=u=0),c>=r/2&&u>=o/2)l=new Vp(new Zs(r,o)),n+=r/2,s+=o/2;else if(c!==u){const t=new Skia.SkPath;t.addRoundRect(wi.fromWH(r,o),c,u),l=new Zp(zs.fromSkPath(t,!0))}else l=new Qp(new Js(r,o,new Qs(c)));return{position:n||s?new Be(n,s):Be.ZERO,element:l}}#wh(t){if(!t.hasAttribute("d"))return null;const e=zs.fromString(t.getAttribute("d"));return e?{position:Be.ZERO,element:new Zp(e)}:null}#Ih(t,e){const i=[...t.points].map((t=>new Be(t.x,t.y)));return i.length?(1===i.length&&i.push(i[0]),{position:Be.ZERO,element:new Yp(new Ys(i,e))}):null}#_h(t){const e=this.#tn.viewBox,i=this.#ch,n=new Be(i.getSVGLength(t.x1,e,"x"),i.getSVGLength(t.y1,e,"y")),s=new Be(i.getSVGLength(t.x2,e,"x"),i.getSVGLength(t.y2,e,"y"));return{position:Be.ZERO,element:new qp(new Xs(n,s))}}#jh(t){return t.firstElementChild?{position:Be.ZERO,element:new Hp}:null}#Th(t){const e=this.#ch,i=e.getSVGHref(t);if(!i||!i.startsWith("data:image/"))return null;this.#hh.has(i)||this.#hh.set(i,[]);const n=new dg(null);this.#hh.get(i).push(n);const s=this.#tn.viewBox;return n.width=e.getAxisSize(t,"width",s,"x",0),n.height=e.getAxisSize(t,"height",s,"y",0),{position:new Be(e.getAxisSize(t,"x",s,"x",0),e.getAxisSize(t,"y",s,"y",0)),element:n}}#Ah(t){const e=this.#ch,i=this.#tn.viewBox,n=new wi(e.getSVGLength(t.x,i,"x"),e.getSVGLength(t.y,i,"y"),e.getSVGLength(t.width,i,"x"),e.getSVGLength(t.height,i,"y")),s=e.getViewBox(t,n),r=e.getViewBoxAlign(t),o=e.getViewBoxSlice(t);let a=new Hp;a.setTransformMatrix(function(t,e,i,n){let s=0===e.width?0:t.width/e.width,r=0===e.height?0:t.height/e.height;i&&(s=r=n?Math.max(s,r):Math.min(s,r));let o=t.x-e.x*s,a=t.y-e.y*r;if(i){let n=0,l=0;switch(i.x){case 2:n=.5;break;case 3:n=1}switch(i.y){case 2:l=.5;break;case 3:l=1}o+=n*(t.width-e.width*s),a+=l*(t.height-e.height*r)}return(new $i).translate(o,a).scale(s,r)}(n,s,r,o)),this.#Zo(t,a),this.#tn.concat(a.localMatrix,n);try{for(const e of this.#yh(t))a.appendChild(e)}finally{this.#tn.pop()}if(!a.hasChildren)return a.dispose(),null;a=this.#Rh(a);const l=e.getTransform(t);if("visible"!==e.getString(t,"overflow")||o&&n.width/s.width!=n.height/s.height){const t=new fg;t.appendChild(a),t.appendChild(new tg(zs.fromRect(n))),t.setTransformMatrix(l),a=t}else l&&!l.isIdentity&&a.setTransformMatrix(l.multiply(a.localMatrix));return{element:a,skipPropertiesAndChildren:!0}}#Wh=["rect","circle","ellipse","line","polyline","polygon","path","text","textPath","g","a","image","svg","symbol"];#Bh=["id","x","y","width","height","href","xlink:href"];#zh(t){const e=this.#ch.resolveHref(t);if(!e)return null;if(!this.#Wh.includes(e.localName))return null;if(!this.#gh(e))return console.log("<use> inf. recursion"),null;try{return e instanceof SVGSymbolElement?this.#Uh(t,e):e instanceof SVGSVGElement?this.#$h(t,e):this.#Fh(t,e)}finally{this.#mh()}}#Vh(t){const e=t.ownerDocument.createElementNS(RM,"g");for(const i of t.getAttributeNames())this.#Bh.includes(i)||e.setAttribute(i,t.getAttribute(i));return e}#Gh(t,e){let i;try{i=this.#Vh(t),i.appendChild(e),t.parentNode.insertBefore(i,t.nextSibling||null);let n=this.#bh(i);if(n){if(!n.hasChildren)return n.dispose(),null;const e=this.#ch,s=this.#tn.viewBox;return n.setTransformMatrix(this.#Ph(i,new Be(e.getAxisSize(t,"x",s,"x",0),e.getAxisSize(t,"y",s,"y",0)))),n=this.#Rh(n),{element:n,skipPropertiesAndChildren:!0}}}finally{i&&i.parentNode?.removeChild(i)}return null}#Fh(t,e){const i=e.cloneNode(!0);return i.removeAttribute("id"),this.#Gh(t,i)}#Rh(t){if(t.firstChild!==t.lastChild)return t;const e=t.firstChild;return e.setTransformMatrix(e.globalMatrix),t.hidden&&(e.hidden=!0),t.title&&(e.title=t.title),11!==t.blend&&(e.blend=t.blend),1!==t.opacity&&(e.opacity*=t.opacity),e.remove(),t.dispose(),e}#Uh(t,e){const i=t.ownerDocument.createElementNS(RM,"svg");["x","y","width","height","viewBox","preserveAspectRatio"].forEach((n=>{"width"!==n&&"height"!==n||!function(e){return t.hasAttribute(e)&&"auto"!==t.getAttribute(e)}(n)?e.hasAttribute(n)&&i.setAttribute(n,e.getAttribute(n)):i.setAttribute(n,t.getAttribute(n))}));for(let t=e.firstElementChild;null!=t;t=t.nextElementSibling)i.appendChild(t.cloneNode(!0));return this.#Gh(t,i)}#$h(t,e){const i=this.#ch,n=this.#tn.viewBox;function s(e){return t.hasAttribute(e)&&"auto"!==t.getAttribute(e)}const r=e.cloneNode(!0);return r.removeAttribute("id"),s("x")&&r.setAttribute("x",i.getSVGLength(t.x,n,"x").toString()),s("y")&&r.setAttribute("y",i.getSVGLength(t.y,n,"y").toString()),s("width")&&r.setAttribute("width",i.getSVGLength(t.width,n,"x").toString()),s("height")&&r.setAttribute("height",i.getSVGLength(t.height,n,"y").toString()),this.#Gh(t,r)}#Ch(t){return null}#Lh(t){return null}#Hh(t,e,i){const n=this.#ch;let s=n.getString(t,"clip-path");if(!s||"none"===s)return null;if(s=n.getSVGRefId(s),!s)return null;const r=n.resolveElementId(t,s);if(!(r&&r instanceof SVGClipPathElement))return null;const o="objectBoundingBox"==r.getAttribute("clipPathUnits"),a=n.subUnitAsPercent;o&&(n.subUnitAsPercent=!0,this.#tn.push(e));const l=[];for(let t=r.firstElementChild;null!=t;t=t.nextElementSibling){let s;if(t instanceof SVGUseElement){if(s=this.#zh(t),!s)continue;if(!(s.element instanceof Rh)){s.element.dispose();continue}}else if(s=this.#xh(t),!s)continue;const r=s.element,a=new $i;let c;if(o?a.translate(e.x,e.y):i&&a.translate(-i.x,-i.y),a.multiply(this.#Ph(t,s.position)),c=r instanceof Wh?r.shape.convertToPath():r.localPath?.copy(),r.dispose(),!c||c.isEmpty){c?.delete();continue}const u=new tg(zs.fromSkPath(c,!0));u.setTransformMatrix(a),t.hasAttribute("clip-rule")&&(u.fillRule=n.getClipRule(t)),l.push(u)}return o&&(n.subUnitAsPercent=a,this.#tn.pop()),l.length?l:null}#Zh(t,e,i){const n=this.#ch;let s=n.getString(t,"mask");if(!s||"none"===s)return null;if(s=n.getSVGRefId(s),!s)return null;const r=n.resolveElementId(t,s);if(!(r&&r instanceof SVGMaskElement))return null;const o="alpha"===n.getString(r,"mask-type"),a="objectBoundingBox"==r.getAttribute("maskContentUnits"),l=n.subUnitAsPercent;a&&(n.subUnitAsPercent=!0,this.#tn.push(e));const c=new sg;for(const t of this.#yh(r))c.appendChild(t);return a?(c.position=e.topLeft,n.subUnitAsPercent=l,this.#tn.pop()):i&&(c.anchor=i),c.hasChildren?[c,o]:(c.dispose(),null)}#Eh(t,e,i){if(!e||!e.isVisible)return null;const n=this.#Hh(t,e,i),s=this.#Zh(t,e,i);if(!n&&!s)return null;const r=new fg;if(n)for(const t of n)r.appendChild(t);return s&&(r.appendChild(s[0]),r.isAlphaMask=s[1]),r.hasChildren?r:(r.dispose(),null)}#Oh(t,e,i){const n=new hn,s=this.#ch,r=this.#tn.viewBox;return n.brush=this.#sh(t,s.getStroke(t),e,i),n.width=s.getStrokeWidth(t,r),"non-scaling-stroke"===s.getVectorEffect(t)&&(n.width/=this.#tn.matrix.lineScale),n.lineJoin=s.getStrokeJoin(t),n.lineCap=s.getStrokeCap(t),n.miterLimit=s.getStrokeMiterLimit(t),n.dashes=s.getStrokeDashArray(t,r),n.offset=s.getStrokeDashOffset(t,r),n.dashPathLength=s.getPathLength(t),n}#sh(t,e,i,n){if(!e||"none"===e)return Gi.INSTANCE;const s=this.#ch.getSVGRefId(e);if(s){const e=t.ownerSVGElement.getElementById(s);return e?e instanceof SVGLinearGradientElement?this.#Yh(e,this.#tn.viewBox,i,n):e instanceof SVGRadialGradientElement?this.#Qh(e,this.#tn.viewBox,i,n):Gi.INSTANCE:Gi.INSTANCE}return Hi.fromColor(e)}#Jh(t,e,i){if(!e)return t;const n=this.#tn.matrix?.clone()||new $i;return i&&!i.isZero&&n.translate(i.x,i.y),t.preMultiplyInverse(n)}#qh(t){const e=t.length;if(!e)return Gi.INSTANCE;const i=t[0].color;for(let n=1;n<e;n++)if(!i.equals(t[n].color))return null;return 0===i.a?Gi.INSTANCE:Hi.fromColor(i)}#Yh(t,e,i,n){let{fixed:s,properties:r,matrix:o,spread:a,stops:l}=this.#ch.resolveLinearGradient(t,e,i);const c=this.#qh(l);if(c)return c;s&&n&&!n.isZero&&(r.x1-=n.x,r.y1-=n.y,r.x2-=n.x,r.y2-=n.y,o.isIdentity||o.preTranslate(-n.x,-n.y).translate(n.x,n.y));const u=new sn(new Be(r.x1,r.y1),new Be(r.x2,r.y2),new Zi(l),a);return o.isIdentity?u:u.withTransformedCoords(o)}#Qh(t,e,i,n){let{fixed:s,properties:r,matrix:o,spread:a,stops:l}=this.#ch.resolveRadialGradient(t,e,i);const c=this.#qh(l);if(c)return c;s&&n&&!n.isZero&&(r.cx-=n.x,r.cy-=n.y,r.fx-=n.x,r.fy-=n.y,o.isIdentity||o.preTranslate(-n.x,-n.y).translate(n.x,n.y));const u=new Be(r.cx,r.cy),h=new Be(r.fx,r.fy),d=r.r,f=r.fr;let p;return p=f<0||d===f&&u.equals(h)?new rn(u,d,new Zi(l),a):new on(h,f,u,d,new Zi(l),a),o.isIdentity?p:p.withTransformedCoords(o)}}async function qz(t,e){const i=new Jz(t);try{return await i.import(e)}finally{i.dispose()}}async function Kz(t){return t instanceof File?t.text():ft(t)}function Xz(t){return/^.*<svg[^>]*\sxmlns\s*\=.*/gim.test(t)?t:t.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"')}async function tA(t,e){"string"!=typeof e&&(e=await Kz(e));const i=zs.fromString(e);if(!i||i.isEmpty)return i?.dispose(),!1;const n=new Zp(i);Oy.decorate(n);const s=new Yg;return s.appendChild(new kg),s.firstChild.appendChild(n),t.content.document=s,t.content.board=i.bounds,!0}ik(),mk||(mk=!0,J([dk,"Guide"],[fk,"GuideList"]),Pa(pk,(t=>({enabled:t?.engine?.showGuides??!0,locked:t?.engine?.lockGuides??!1,snap:t?.snapping?.guides??!0}))),Uo({id:pk,copy:null,delete:null,update(t){gk=t},serialization:ra(11,(()=>gk))}),ik(),sk((function(){if(!gk)return;const t=vk();if(t.enabled&&t.snap)for(const t of gk)t.isHorizontal?(e=t.position,void 0,IS.y.add(e)):DS(t.position);var e}))),ak||(ak=!0,J([YM,"AutomaticGrid"],[ZM,"FixedGrid"],[JM,"IsometricGrid"],[KM,"PixelGrid"]),Pa(rk,(t=>({enabled:t?.engine?.showGrid??!1,front:t?.engine?.showGridToBack??!1,snap:t?.snapping?.grid??!1}))),Uo({id:rk,copy:null,delete:null,update(t){ok=t},serialization:ra(10,(()=>ok))}),ik(),Vz={get enabled(){if(!ok)return!1;const t=uk();return t.enabled&&t.snap},snap:t=>ok.snap(t)},bS=Vz),pL||(pL=!0,ik(),sk((function(){let t=fL();if(t.bounds||t.points)for(const e of Gu(!0))mL(e,t)})),Pa(dL,(t=>({bounds:t?.snapping?.bounds??!0,points:t?.snapping?.points??!0})))),cM(".ecf","application/vnd.expressive.canvas"),cM(".eaf","application/vnd.expressive.animator"),dM=async function(t,e){const i=t.content.document;let n=zl(i.pictureBounds,Fu(!1),e?.position,e?.align,e?.zoom);n?.isIdentity&&(n=null);const s=[];for(const t of i.children())for(const e of t.children())n&&e.absorbMatrix(n),s.push(e);return $m(s)?(cg().import(cg(t.global)),s):null},iv=DN,cM(".jpeg","image/jpeg"),cM(".jpg","image/jpeg"),cM(".png","image/png"),cM(".webp","image/webp"),hM((async function(t,e){const i=await async function(t,e){const i=await ag.idFromData(t);if(!e.has(i)){const n=await ag.fromRawData(t,i);if(!n)return null;e.add(n)}const n=new dg(i),s=e.get(i);return n.width=s.width,n.height=s.height,n}(await async function(t){return t instanceof FileSystemFileHandle?(await t.getFile()).arrayBuffer():t instanceof File||t instanceof Blob?t.arrayBuffer():t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:null}(e),cg(t.global));if(!i)return!1;e instanceof File&&(i.title=e.name);const n=new Yg;return n.appendChild(new kg),n.firstChild.appendChild(i),t.content.document=n,t.content.board=new wi(0,0,i.width,i.height),!0}),"image/png","image/jpeg","image/webp"),cM(".pdf","application/pdf"),cM(".ai","application/pdf"),hM((async function(t,e){let i=null;e instanceof File&&(i=e.name,e=await e.arrayBuffer());const n=function(t){let e=null;const i=new Yz((t=>{e=t}));try{Zz.Parse(t,i)}catch{i.destroy()}return e}(e);if(!n)return!1;n.images.size&&await async function(t,e){for(const[i,n]of t){let t=!1;const s=await Qz(n);s?(e.has(s.id)?s.dispose():e.add(s),i.imageId=s.id):t=!0,t&&(s?.dispose(),i.remove(),i.dispose())}}(n.images,cg(t.global));const s=new kg;for(const t of n.pages)t.hasChildren?t.firstChild!==t.lastChild?s.appendChild(t):(s.appendChild(t.firstChild),t.remove(),t.dispose()):(t.remove(),t.dispose());if(!s.hasChildren)return s.dispose(),!1;const r=new Yg;return r.title=i,r.appendChild(s),t.content.document=r,t.content.board=wi.merge(n.bounds),!0}),"application/pdf","application/postscript"),cM(".svg","image/svg+xml"),hM(qz,"image/svg+xml"),hM((async function(t,e){let i=await Kz(e);return!!i&&(function(t){return/^([MLVHAQCSTZ]\s*(-?[0-9.,]+\s*)*)+$/gim.test(t)}(i)?tA(t,i):!!function(t){return/^.*<svg(\s|>).*<\/svg>\s*$/gs.test(t)}(i)&&qz(t,await new Blob([Xz(i)],{type:"image/svg+xml"}).arrayBuffer()))}),"text/plain"),hM(tA,"web expressive/path"),Io(Ot,(()=>{var t;VL.dblClick=(t=Fl("text"),e=>e instanceof xg&&(Gl(t),t.isEditorFocused||t.startEdit(e),!0)),ac=Tk,Oc=_N,ql=LN})),Io(Bt,(t=>{0===t&&Bc(CN().ruler)})),Io(Kt,(()=>{ec()})),Io(Zt,(()=>{Vl.onIsolationContextChanged()})),Io(Yt,(()=>{Vl.onSelectionChanged()})),Io(Ft,(()=>{Vl.onDocumentTreeChanged()}));const eA=Symbol();function iA(){Bc(CN().ruler),ec(),_o(eA)}const nA=cL(iA),sA=[nA(CN,"ruler","View ruler",["ctrl","R"]),"Grid",nA(uk,"enabled","Show grid",["ctrl","'"]),nA(uk,"front","Front grid",["alt","ctrl","'"]),"Guides",nA(vk,"enabled","Show guides",["ctrl",";"]),nA(vk,"locked","Lock guides",["alt","ctrl",";"]),"Rendering",nA(CN,"transparency","Transparency grid"),nA(CN,"clip","Clip document"),nA(CN,"pixelate","Pixel preview"),nA(CN,"wireframe","Wireframe")];class rA extends Gb{#Kh;#Xh;constructor(){super(),hC(this,[[Bt,this.#Qc],[eA,this.#Qc]])}render(){return Ib`
            <cc-action-group compact emphasized>
                <cc-action-button id="clip-document" title="Clip document" @click=${this.#td}>
                    <cc-icon name="workflow:RectSelect"></cc-icon>
                </cc-action-button>
                <cc-action-button id="ruler" title="Ruler" @click=${this.#ed}>
                    <cc-icon name="expr:rulergrid"></cc-icon>
                </cc-action-button>
                <cc-action-button @click=${this.#Yc}>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>
        `}firstUpdated(){this.#Kh=this.shadowRoot.getElementById("clip-document"),this.#Xh=this.shadowRoot.getElementById("ruler")}#td(){const t=CN();t.clip=!t.clip,ec(),this.#Qc()}#ed(){const t=CN();t.ruler=!t.ruler,Bc(t.ruler),this.#Qc()}#Qc=()=>{const t=CN();this.#Kh&&(this.#Kh.selected=t.clip),this.#Xh&&(this.#Xh.selected=t.ruler)};#Yc(t){bv(sA,t.target,"bottom-right")}}const oA=[{title:"Straight",icon:"expr:anchor-straight",value:1},{title:"Disconnected",icon:"expr:anchor-disconnected",value:0},{title:"Mirrored",icon:"expr:anchor-mirrored",value:2},{title:"Asymmetric",icon:"expr:anchor-asymmetric",value:3}];class aA extends GC{#Zt=[!0,null];render(){const t=this.#Zt;return t[0]=!0,t[1]=null,this.refresh(t),Ib`<cc-icon-switch .disabled=${t[0]} .value=${t[1]} .items=${oA} @change=${this.onChange} quiet size="m" gapless emphasized></cc-icon-switch>`}static{this.styles=[xx]}}class lA extends aA{constructor(){super(),hC(this,[Bt,Ut,Qt])}connectedCallback(){super.connectedCallback(),this.isConnected&&this.requestUpdate()}refresh(t){if(!fm())for(const e of dm.keys())if(Sm(e)){t[0]=!1;for(const i of _m(e))if(null!==t[1]){if(t[1]!==i.joint)return void(t[1]=null)}else t[1]=i.joint}}onChange(t){z_(t.detail)}}let cA=(()=>{let t,e,i,n,s,r,o=Gb,a=[],l=[],c=[],u=[],h=[],d=[];return class extends o{static{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;t=[ax()],i=[ax()],s=[ax()],ex(this,e={get:nx((function(){return this.#id}),"#canSetStart","get"),set:nx((function(t){this.#id=t}),"#canSetStart","set")},t,{kind:"accessor",name:"#canSetStart",static:!1,private:!0,access:{has:t=>#nd in t,get:t=>t.#nd,set:(t,e)=>{t.#nd=e}},metadata:f},a,l),ex(this,n={get:nx((function(){return this.#sd}),"#canReverse","get"),set:nx((function(t){this.#sd=t}),"#canReverse","set")},i,{kind:"accessor",name:"#canReverse",static:!1,private:!0,access:{has:t=>#rd in t,get:t=>t.#rd,set:(t,e)=>{t.#rd=e}},metadata:f},c,u),ex(this,r={get:nx((function(){return this.#od}),"#index","get"),set:nx((function(t){this.#od=t}),"#index","set")},s,{kind:"accessor",name:"#index",static:!1,private:!0,access:{has:t=>#pi in t,get:t=>t.#pi,set:(t,e)=>{t.#pi=e}},metadata:f},h,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}#id=ix(this,a,!1);get#nd(){return e.get.call(this)}set#nd(t){return e.set.call(this,t)}#sd=(ix(this,l),ix(this,c,!1));get#rd(){return n.get.call(this)}set#rd(t){return n.set.call(this,t)}#od=(ix(this,u),ix(this,h,null));get#pi(){return r.get.call(this)}set#pi(t){return r.set.call(this,t)}constructor(){super(),hC(this,[[Bt,this.#ad],[Ut,this.#ad],[Qt,this.#ad]])}#ld(){this.#nd=!1}#ad=(ix(this,d),()=>{const t=ah();if(this.#rd=t>0&&Mh(uA),1!==t)return this.#ld();const e=rh();if(!e||!uy(e))return this.#ld();const i=pm(e);if(1!==i?.size)return this.#ld();[this.#pi]=i,this.#nd=function(t,e){if(t.length<=1||1===t[e]?.type)return!1;const i=qn(t,e);return 3===t[i].type||t[Jn(t,e)].point.equals(t[i].point)}(e.nodes,this.#pi)});render(){return Ib`<cc-action-group quiet size="m" gapless emphasized>
            <cc-action-button .disabled=${!this.#nd} title="Set start point" @click=${this.#cd}>
                    <cc-icon name="workflow:Flag"></cc-icon>
            </cc-action-button>
            <cc-action-button .disabled=${!this.#rd} title="Reverse path" @click=${this.#ud}>
                    <cc-icon name="workflow:Sync"></cc-icon>
            </cc-action-button>
        </cc-action-group>`}connectedCallback(){super.connectedCallback(),this.isConnected&&this.#ad()}#ud(){r_()}#cd(){s_(rh(),this.#pi)}}})();function uA(t){return uy(t)||Cy(t)||Ly(t)}const hA={vectors:0,paths:0,maxContours:0};async function dA(t,e){const i=!e?.altKey,n=e?.metaKey||e?.ctrlKey;if("string"!=typeof t.value)return Kk(t.value,n,i);switch(t.value){case"split":return n_();case"merge":return e_(n,i);case"outline":return t_(!i);case"divide":return Xk(n,i);case"simplify":return i_();case"reverse":return r_()}return!1}function fA(t,e,i,n,s,r=0){return{title:t,icon:e,value:i,action:dA,get disabled(){return hA.vectors<n||hA.paths<s||hA.maxContours<r}}}const pA=[fA("Unite","workflow:AddTo",0,2,0),fA("Subtract Front","workflow:SubtractFrontPath",4,2,0),fA("Subtract Back","workflow:SubtractBackPath",3,2,0),fA("Intersect","workflow:IntersectOverlap",1,2,0),fA("Exclude","workflow:ExcludeOverlap",2,2,0),null,fA("Merge","expr:path-merge","merge",2,0),fA("Split","expr:path-split","split",1,1,2),fA("Divide","workflow:DividePath","divide",1,0),fA("Outline","workflow:OutlinePath","outline",1,0)];class gA extends Gb{#er;constructor(){super(),this.#er=document.createElement("es-action-menu"),this.#er.items=pA,hC(this,[[Bt,this.#hd],[Yt,this.#hd]])}render(){return this.#er}firstUpdated(){this.#hd()}#hd=()=>{(function(){const{vectors:t,paths:e,maxContours:i}=hA;hA.vectors=hA.paths=hA.maxContours=0;for(const t of Th(Wm))hA.vectors++,t instanceof Zp&&(hA.paths++,hA.maxContours=Math.max(hA.maxContours,t.path?.contoursLength||0));return hA.vectors!==t||hA.paths!==e||hA.maxContours!==i})()&&this.#er.requestUpdate()}}const mA=Symbol();function yA(){TS(),_o(mA)}class vA extends Gb{#dd;constructor(){super(),hC(this,[[Bt,this.#Qc],[mA,this.#Qc]])}render(){return Ib`
            <cc-action-group compact emphasized>
                <cc-action-button id="selected" title="Snapping" @click=${this.#fd}>
                    <cc-icon name="expr:snap"></cc-icon>
                </cc-action-button>
                <cc-action-button @click=${this.#Yc}>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>
        `}firstUpdated(){this.#dd=this.shadowRoot.getElementById("selected"),this.#Qc()}#Qc=()=>{const t=this.#dd;t&&(t.selected=tk().enabled)};#fd(){const t=tk();t.enabled=!t.enabled,TS(),this.#Qc()}#Yc(t){bv(this.items,t.target,"bottom-right")}}function bA(t){if(!i(t))return;if(t>0)return e=t,void Cl(pl.middle,e/vl);var e;let n=null;switch(t){case-2:n=rh()?.globalBounds.bounds;break;case-1:n=Eh();break;case 0:n=Ck()}Il(n)}function xA(t){bA(t.value)}function wA(t,e,i=0,n){const s={title:t,value:e,shortcut:n,action:xA};return i>0&&Object.defineProperty(s,"disabled",{get:()=>ah()<i}),s}const MA=["Fit",wA("Document",0,0,["ctrl","0"]),wA("Selection",-1,1,["ctrl","9"]),wA("Element",-2,1,["ctrl","8"]),"Level",wA("25%",.25),wA("50%",.5),wA("75%",.75),wA("100%",1),wA("200%",2),wA("400%",4)],SA={min:1,max:1e4,step:1,digits:0,unit:"%"};class kA extends Gb{#pd;constructor(){super(),hC(this,[[re,this.#gd]])}firstUpdated(){this.#pd=this.shadowRoot.getElementById("zoom")}#gd=t=>{this.#pd.value=Math.round(100*t)};render(){return Ib`
            <cc-action-group compact>
                <cc-number-input style="width: 72px" id="zoom" .formatter=${SA} value="100" @update=${this.#Mr} text-center></cc-number-input>
                <cc-action-button @click=${this.#Yc}>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-action-group>
        `}#Mr(t){bA(t.detail/100)}#Yc(t){bv(MA,t.target,"bottom-right")}static{this.styles=Vv`:host{display: contents}`}}let _A=(()=>{let t,e=Gb,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:Object,reflect:!1})],ex(this,null,t,{kind:"accessor",name:"menu",static:!1,private:!1,access:{has:t=>"menu"in t,get:t=>t.menu,set:(t,e)=>{t.menu=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}static{this.styles=[mx]}#md=ix(this,i,void 0);get menu(){return this.#md}set menu(t){this.#md=t}constructor(){super(),ix(this,n),hC(this,[Bt,Ut,$t])}render(){return Ib`<cc-action-group gapless quiet size="m">
            <cc-action-button title="Menu" @click=${this.#yd}>
                <cc-icon name="workflow:ShowMenu"></cc-icon>
            </cc-action-button>
            <cc-action-button title="Open" @click=${this.#Rc}>
                <cc-icon name="workflow:FolderOpen"></cc-icon>
            </cc-action-button>
            <cc-action-button title="Save" .disabled=${pa()} @click=${this.#vd}>
                <cc-icon name="workflow:SaveFloppy"></cc-icon>
            </cc-action-button>
            <cc-action-button title="Undo" .disabled=${!da()} @click=${LI}>
                <cc-icon name="workflow:Undo"></cc-icon>
            </cc-action-button>
            <cc-action-button title="Redo" .disabled=${!fa()} @click=${NI}>
                <cc-icon name="workflow:Redo"></cc-icon>
            </cc-action-button>
        </cc-action-group>`}#yd(t){bv(this.menu,t.target,"bottom-left")}#vd(t){kI(t.altKey)}#Rc(){wI()}}})();class IA extends Gb{#bd=null;#xd;#wd=new Map;constructor(){super();const t=this.#Md();t.id="divider",this.#xd=[t,document.createElement("slot")],hC(this,[[oe,this.#Sd]])}#Md(){const t=document.createElement("cc-divider");return t.vertical=!0,t}#Sd=t=>{if(!t){if(!this.#bd)return;return this.#bd=null,void this.requestUpdate()}const e=t.name;if(!this.#wd.has(e))if(this.ctx?.has(e)){const i=[];for(const n of this.ctx.get(e)){if(!n){i.push(this.#Md());continue}let e;"string"==typeof n?e=document.createElement(n):"function"==typeof n&&(e=n()),e&&(e.tool=t,i.push(e))}this.#wd.set(e,i.length>0?i:null)}else this.#wd.set(e,null);const i=this.#wd.get(e);this.#bd!==i&&(this.#bd=i,this.requestUpdate())};render(){return this.#bd?[this.#bd,this.#xd]:this.#xd}static{this.styles=[mx,Vv`
        :host {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 8px;
            padding: 0 8px;
        }

        cc-divider {
            height: 32px;
            margin: 0 auto;
        }

        #divider:first-child {
            display: none;
        }
    `]}}let CA=(()=>{let t,e=Gb,i=[];return class extends e{static{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:Object,reflect:!1,noAccessor:!0})],ex(this,null,t,{kind:"setter",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,set:(t,e)=>{t.value=e}},metadata:n},null,i),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}static{this.styles=[mx,Vv`:host{contain: strict}`]}#Xs=ix(this,i);#kd;constructor(t){super(),this.#kd=t}get value(){return this.#Xs}set value(t){const e=this.#kd?this.#kd(t):t;if(this.#Xs!==e){const t=this.#Xs;this.#Xs=e,this.onChange(e,t)}}find(t){return this.shadowRoot.querySelector(t)}}})();class LA{#_d;constructor(t,e){this.updaters=[];for(let e of t)e instanceof Bh&&(e=new NA(e)),this.updaters.push(e);this.#_d=e}beforeUpdate(t){this.#_d?.beforeUpdate(t)}afterUpdate(t,e){this.#_d?.afterUpdate(t,e)}isValidTarget(t){for(const e of this.updaters)if(!e.isValidTarget(t))return!1;return!0}getValue(t){const e=[];for(const i of this.updaters)e.push(i.getValue(t));return e}setValue(t,e){const i=this.updaters,n=i.length;let s=!1;for(let r=0;r<n;r++)i[r].setValue(t,e[r])&&(s=!0);return s}sameValue(t,e){const i=this.updaters,n=i.length;for(let s=0;s<n;s++)if(!i[s].sameValue(t,e[s]))return!1;return!0}}class NA{#_d;constructor(t,e){this.property=t,this.#_d=e}beforeUpdate(t){this.#_d?.beforeUpdate(t)}afterUpdate(t,e){this.#_d?.afterUpdate(t,e)}isValidTarget(t){return t instanceof Up?t.hasValue(this.property):vd(t,this.property)}getValue(t){return t instanceof Up?t.getValue(this.property):this.property.getValue(t)}setValue(t,e){return t instanceof Up?(t.setValue(this.property,e),!1):Cd(t,this.property,e)}sameValue(t,e){return t instanceof Up?this.property.handler.sameValue(t.getValue(this.property),e):this.property.sameValue(t,e)}}let jA=!1,TA=-1,zA=1,AA=null,PA=null;const DA=new Map;let EA;function OA(t){return lh()?BA([Oy],t):BA(oh(),t)}function RA(t,e){return lh()?WA([Oy],t,e):WA(oh(),t,e)}function WA(t,e,i){UA();const n=function(t){return t instanceof Bh?(VA.property=t,VA):"function"==typeof t?{isValidTarget:GA,setValue:t}:t}(e);if(!n)return!1;let s=!1;TA=zA++,PA=t,n.beforeUpdate?.(i);for(const t of PA)n.isValidTarget(t)&&n.setValue(t,i)&&(s=!0);return n.afterUpdate?.(s,i),PA=null,TA=-1,!!s&&(FA(),!0)}function BA(t,e){if(UA(),!t||!t.length)return 0;const i=function(t){return t instanceof Bh?(VA.property=t,VA):t}(e);return i&&function(t,e){if(!e.isValidTarget(t[0]))return!1;DA.clear(),DA.set(t[0],e.getValue(t[0]));for(let i=1;i<t.length;i++)e.isValidTarget(t[i])?DA.set(t[i],e.getValue(t[i])):(t.splice(i,1),i--);return PA=t,AA=e,!0}(t,i)?TA=zA++:0}function UA(t){if(TA<0||t&&t!==TA)return!1;let e=EA?.hasChanged();return!e&&jA&&(e=!function(){for(const[t,e]of DA)if(!AA.sameValue(t,e))return!1;return!0}()),DA.clear(),PA=AA=null,jA=!1,TA=-1,!!e&&(FA(),!0)}function $A(t,e){if(TA<0||e&&e!==TA)return!1;let i=!1;const n=AA;n.beforeUpdate?.(t);for(const e of PA)n.setValue(e,t)&&(i=!0,jA=!0);return n.afterUpdate?.(i,t),i}function FA(){Oy.update(rh()),ga()}const VA=new NA(null);function GA(){return!0}const HA=Ox(class extends Rx{constructor(t){if(super(t),6!==t.type)throw new Error("editStream directive can be used only on elements!")}#Id=null;#Cd=null;#Ld=null;#Nd=null;#de=null;update(t,[e,i,n]){return this.#Id&&this.#Id===t.element?e==this.#Cd&&kt(this.#Ld,i)&&n==this.#Nd||(this.#Cd=e,this.#Ld=i,this.#Nd=n,this.#jd()):(this.#Td(this.#Id),this.#Id=t.element,this.#zd(this.#Id),this.#Cd=e,this.#Ld=i,this.#Nd=n),Cb}render(t,e=null,i=null){return Cb}#zd(t){t&&(t.addEventListener("start",this.#Ad),t.addEventListener("update",this.#mo),t.addEventListener("end",this.#Pd))}#Td(t){t&&(t.removeEventListener("start",this.#Ad),t.removeEventListener("update",this.#mo),t.removeEventListener("end",this.#Pd),this.#jd())}#jd(){UA(this.#de),this.#de=null}#Ad=t=>{if(t.stopPropagation(),this.#Ld){let t;t="function"==typeof this.#Ld?this.#Ld():this.#Ld,this.#de=BA(Nt(t)?t:[t],this.#Cd)}else this.#de=OA(this.#Cd)};#Pd=t=>{t.stopPropagation(),this.#jd()};#mo=t=>{t.stopPropagation(),$A(this.#Nd?this.#Nd(t.detail):t.detail,this.#de)}});function ZA(t,e){return"string"==typeof t?e.querySelector(t):t}function YA(t,e){const i=ZA(t.link,e);if(!i)return!1;let n=null;function s(){UA(n),n=null}let r=null;i.addEventListener("change",(function(){r=null,s()}));const o=Symbol();let a=null;const l=[];function c(e){e.stopPropagation(),r=e.detail,n=i.checked?t.resolver?BA(t.resolver(),a):OA(a):t.resolver?BA(t.resolver(),e.target[o]):OA(e.target[o])}function u(t){t.stopPropagation();const e=t.detail;if(!i.checked)return void $A(e,n);const s=new Array(l.length);if(0===e||0===r){const t=0===e?0:e;s.fill(t);for(const e of l)e.value=t}else{const i=r?e/r:1;for(let n=0;n<l.length;n++){const r=l[n];r===t.target?s[n]=e:(r.value*=i,s[n]=r.value)}}r=e,$A(s,n)}function h(t){t.stopPropagation(),r=null,s()}const d=[];for(const i of t.properties){const n=i[0]instanceof Bh?new NA(i[0],t.hooks):i[0],s=ZA(i[1],e);s[o]=n,s.addEventListener("start",c),s.addEventListener("update",u),s.addEventListener("end",h),d.push(n),l.push(s)}return a=new LA(d,t.hooks),!0}function QA(t,e){const i=ZA(t.x,e),n=ZA(t.y,e);if(!i||!n)return!1;let s=null,r=null;function o(){UA(r),r=null}let a=t.link?ZA(t.link,e):null;function l(e){e.stopPropagation(),s=e.detail,r=t.resolver?BA(t.resolver(),t.property):OA(t.property)}function c(t){t.stopPropagation();const e=t.detail;if(a?.checked){const r="x"==(t.target===i?"x":"y")?n:i;0===e?r.value=0:0===s?r.value=e:r.value*=e/(s||1),s=e}$A(new Be(i.value,n.value),r)}function u(t){t.stopPropagation(),s=null,o()}return a&&a.addEventListener("change",(()=>{s=null,o()})),i.addEventListener("start",l),i.addEventListener("update",c),i.addEventListener("end",u),n.addEventListener("start",l),n.addEventListener("update",c),n.addEventListener("end",u),!0}class JA extends CA{#Dd;#Ed=null;constructor(t){super(),this.#Dd=t,hC(this,[[de,this.#Od]])}get isGlobal(){return this.value instanceof Up}#Od=t=>{if(!this.#pr)return;if(Array.isArray(this.#Dd)){let e=!1;for(const i of this.#Dd)if(t.has(i)){e=!0;break}if(!e)return}else if(!t.has(this.#Dd))return;const e=this.value;e instanceof Up?this.onGlobal(e):this.onValue(e)};#pr=!1;firstUpdated(){this.#pr||(this.init(),this.#pr=!0,this.onChange(this.value))}addLinkedProperties(t){if(!this.#pr)for(const e of t)"detached"===e.mode?YA(e,this.shadowRoot):"point"===e.mode&&QA(e,this.shadowRoot)}connectedCallback(){super.connectedCallback(),this.onChange(this.value)}onChange(t){if(this.#pr&&null!=t){const e=t instanceof Up;this.#Ed!==e&&(this.#Ed=e,this.onGlobalStatusChanged(e)),e?this.onGlobal(t):this.onValue(t)}}}class qA extends JA{constructor(){super(6)}onGlobal(t){}onGlobalStatusChanged(t){}}function KA(...t){return Vv`${Fv(t.join("\n"))}`}function XA(t,e){return`:host-context([kf~="${e}"]) ${t} {color: var(--kf-active-color)}`}function tP(t,e){return`:host-context([kf~="${e}"]) :not([disabled]) > ${t} {color: var(--kf-active-color)}`}const eP=Ap,iP={min:0,max:2,step:.01};class nP extends qA{#Fi;#Vi;#Gi;#Hi;#Zi;#Yi;#Qi;init(){this.#Fi=this.find("#brightness"),this.#Vi=this.find("#contrast"),this.#Gi=this.find("#saturate"),this.#Hi=this.find("#hue-rotate"),this.#Zi=this.find("#invert"),this.#Yi=this.find("#grayscale"),this.#Qi=this.find("#sepia")}render(){return Ib`
<cc-flex-col>
    <cc-slider-input id="brightness" .constraint=${iP} .formatter=${Xw} pivot="1" ${HA(eP.brightness)} flex filled>
        Brightness
    </cc-slider-input>
    <cc-slider-input id="contrast" .constraint=${iP} .formatter=${Xw} pivot="1" ${HA(eP.contrast)} flex filled>
        Contrast
    </cc-slider-input>
    <cc-slider-input id="saturate" .constraint=${iP} .formatter=${Xw} pivot="1" ${HA(eP.saturate)} flex filled>
        Saturate
    </cc-slider-input>
    <cc-slider-input id="hue-rotate" .constraint=${{min:-360,max:360,step:1}} .formatter=${nM} pivot="0" ${HA(eP.hueRotate)} flex filled>
        Hue rotate
    </cc-slider-input>
    <cc-slider-input id="invert" .constraint=${qw} .formatter=${tM} ${HA(eP.invert)} flex filled>
        Invert
    </cc-slider-input>
    <cc-slider-input id="grayscale" .constraint=${qw} .formatter=${tM} ${HA(eP.grayscale)} flex filled>
        Grayscale
    </cc-slider-input>
    <cc-slider-input id="sepia" .constraint=${qw} .formatter=${tM} ${HA(eP.sepia)} flex filled>
        Sepia
    </cc-slider-input>
</cc-flex-col>`}onValue(t){this.#Fi.value=t.brightness,this.#Vi.value=t.contrast,this.#Gi.value=t.saturate,this.#Hi.value=t.hueRotate,this.#Zi.value=t.invert,this.#Yi.value=t.grayscale,this.#Qi.value=t.sepia}static get styles(){return[...super.styles,KA(XA("#brightness",eP.brightness.id),XA("#contrast",eP.contrast.id),XA("#saturate",eP.saturate.id),XA("#hue-rotate",eP.hueRotate.id),XA("#invert",eP.invert.id),XA("#grayscale",eP.grayscale.id),XA("#sepia",eP.sepia.id))]}}const sP=_p,rP={...eM,max:1e3};class oP extends qA{#Ji;init(){this.#Ji=this.find("#blur")}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon name="workflow:Blur" class="is-radius" padded right-gap></cc-icon>
                <cc-number-input id="blur" title="Blur amount" ${HA(sP.radius)} .formatter=${rP} padded flex></cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>`}onValue(t){this.#Ji.value=t.radius}static get styles(){return[...super.styles,KA((t=sP.radius.id,`:host-context([kf~="${t}"]) .is-radius:not([disabled]) {color: var(--kf-active-color)}`))];var t}}const aP=Op,lP={...eM,max:100};class cP extends qA{#Rd;#Wd;#Ji;#qi;init(){this.#Rd=this.find("#offset-x"),this.#Wd=this.find("#offset-y"),this.#Ji=this.find("#blur"),this.#qi=this.find("#color"),this.addLinkedProperties([{mode:"point",x:this.#Rd,y:this.#Wd,property:aP.offset,link:this.find("#link-offset")}])}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                <es-color-control
                    id="color"
                    text
                    thumbnail
                    .eyeDropper=${!1}
                    ${HA(aP.color)}
                    flex
                ></es-color-control>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="workflow:Move" class="is-offset" padded right-gap></cc-icon>
                <cc-number-input id="offset-x" title="Offset X" flex>
                    <cc-icon name="expr:x" class="is-offset" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="offset-y" title="Offset Y" flex>
                    <cc-icon name="expr:y" class="is-offset" slot="before"></cc-icon>
                </cc-number-input>
                <cc-icon-toggle id="link-offset" title="Keep proportions" left-gap quiet emphasized></cc-icon-toggle>
            </cc-flex-row>
            <cc-flex-row>
                <div fixed-32></div>
                <cc-number-input id="blur" title="Blur amount" ${HA(aP.blur)} .formatter=${lP} flex>
                    <cc-icon name="workflow:Blur" class="is-blur" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>`}onValue(t){this.#Rd.value=t.offset.x,this.#Wd.value=t.offset.y,this.#Ji.value=t.blur,this.#qi.value=t.color}static get styles(){return[...super.styles,KA(XA(".is-offset",aP.offset.id),XA(".is-blur",aP.blur.id))]}}const uP=[{title:"Normal",value:11},null,{title:"Color",value:0},{title:"Color burn",value:1},{title:"Color dodge",value:2},null,{title:"Darken",value:3},{title:"Lighten",value:8},null,{title:"Difference",value:4},{title:"Exclusion",value:5},{title:"Multiply",value:10},null,{title:"Soft light",value:15},{title:"Hard light",value:6},null,{title:"Hue",value:7},{title:"Saturation",value:13},{title:"Luminosity",value:9},null,{title:"Overlay",value:12},{title:"Screen",value:14}],hP=zd;class dP extends JA{constructor(){super(5)}#Ht;#Bd;#Re;init(){this.#Ht=this.find("#opacity"),this.#Bd=this.find("#blend"),this.#Re=this.find("#isolate")}render(){return Ib`<cc-flex-col>
    <cc-flex-row>
        <cc-icon name="workflow:Transparency" right-gap padded></cc-icon>
        <cc-slider-input id="opacity" ${HA(hP.opacity)} .constraint=${qw} .formatter=${qw} flex filled inline hide-label></cc-slider-input>
    </cc-flex-row>
    <cc-flex-row>
        <cc-icon name="workflow:Looks" right-gap padded></cc-icon>
        <cc-picker id="blend" title="Blend mode" .items=${uP} @change=${this.#Ud} flex></cc-picker>
        <cc-action-button id="isolate" title="Isolate" left-gap quiet emphasized @click=${this.#$d}>
            <cc-icon name="workflow:Individual"></cc-icon>
        </cc-action-button>
    </cc-flex-row>
</cc-flex-col>`}#$d(){const t=this.#Re;t.selected=!t.selected,RA(hP.isolate,t.selected)}#Ud(t){RA(hP.blend,t.detail)}onGlobal(t){this.#Fd(t,!1)}onGlobalStatusChanged(t){}onValue(t){this.#Fd(t,t.supportsChildren)}#Fd(t,e){this.#Ht.value=t.opacity,this.#Bd.value=t.blend;const i=this.#Re;i.disabled=!e,i.selected=1==e&&t.isolate}static get styles(){return[...super.styles,KA(XA("#opacity",hP.opacity.id))]}}class fP extends Gb{static{this.styles=[mx,Vv`:host{contain: strict}`]}#hi;setup(t){this.#hi=new Map(t)}#pr=!1;firstUpdated(){this.init(),this.#pr=!0,Vy(this.#hi)}connectedCallback(){super.connectedCallback(),this.#pr&&Vy(this.#hi)}disconnectedCallback(){this.#pr&&function(t){let e=!1;for(const[i,n]of t){if(!By.has(i))continue;const t=By.get(i);t.delete(n),t.size||(Fy.delete(i),By.delete(i),Uy.delete(i),e=!0)}if(e){$y.clear();for(const t of By.keys())for(const e of t.groups)$y.add(e)}}(this.#hi),super.disconnectedCallback()}find(t){return this.shadowRoot.querySelector(t)}}const pP=[{title:"Normal",value:11},null,{title:"Color",value:0},{title:"Color burn",value:1},{title:"Color dodge",value:2},null,{title:"Darken",value:3},{title:"Lighten",value:8},null,{title:"Difference",value:4},{title:"Exclusion",value:5},{title:"Multiply",value:10},null,{title:"Soft light",value:15},{title:"Hard light",value:6},null,{title:"Hue",value:7},{title:"Saturation",value:13},{title:"Luminosity",value:9},null,{title:"Overlay",value:12},{title:"Screen",value:14}],gP=zd;class mP extends fP{constructor(){super(),this.setup([[gP.blend,this.#Vd],[gP.isolate,this.#Gd],[gP.opacity,this.#Hd]])}#Ht;#Bd;#Re;init(){this.#Ht=this.find("#opacity"),this.#Bd=this.find("#blend"),this.#Re=this.find("#isolate")}#Hd=(t,e)=>{this.#Ht.indeterminate=e,this.#Ht.value=t};#Vd=t=>{this.#Bd.value=t};#Gd=(t,e,i)=>{this.#Re.disabled=i,this.#Re.selected=!e&&t};render(){return Ib`<cc-flex-col>
    <cc-flex-row>
        <cc-icon name="workflow:Transparency" right-gap padded></cc-icon>
        <cc-slider-input id="opacity" ${HA(gP.opacity)} .constraint=${qw} .formatter=${qw} flex filled inline hide-label></cc-slider-input>
    </cc-flex-row>
    <cc-flex-row>
        <cc-icon name="workflow:Looks" right-gap padded></cc-icon>
        <cc-picker id="blend" title="Blend mode" .items=${pP} @change=${this.#Ud} flex></cc-picker>
        <cc-action-button id="isolate" title="Isolate" left-gap quiet emphasized @click=${this.#$d}>
            <cc-icon name="workflow:Individual"></cc-icon>
        </cc-action-button>
    </cc-flex-row>
</cc-flex-col>`}#$d(){const t=this.#Re;t.selected=!t.selected,RA(gP.isolate,t.selected)}#Ud(t){RA(gP.blend,t.detail)}static get styles(){return[...super.styles,KA(XA("#opacity",gP.opacity.id))]}}let yP=(()=>{let t,e=Gb,i=[],n=[];return class extends e{static{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;t=[ox({type:Object})],ex(this,null,t,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:s},i,n),s&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})}#es=ix(this,i,void 0);get value(){return this.#es}set value(t){this.#es=t}render(){return this.value?.render?.()??Lb}constructor(){super(...arguments),ix(this,n)}}})();const vP=[{title:"Cap: Butt",icon:"expr:cap-butt",value:0},{title:"Cap: Square",icon:"expr:cap-square",value:2},{title:"Cap: Round",icon:"expr:cap-round",value:1}],bP=[{title:"Join: Miter",icon:"expr:join-miter",value:0},{title:"Join: Bevel",icon:"expr:join-bevel",value:2},{title:"Join: Round",icon:"expr:join-round",value:1}],xP=[{title:"Stroke on top",icon:"expr:stroke-ontop",value:0},{title:"Stroke below fill",icon:"expr:stroke-below",value:2}],wP=uf,MP={min:0,max:1e6,step:.1,stepScale:10,digits:1,unit:""},SP={step:.01,stepScale:100,digits:2,unit:""},kP={parse:t=>t?u(t):[],format:t=>t?.length?t.map((t=>h(t<0?-t:t))).join(", "):"",equals:kt};class _P extends JA{constructor(){super(3)}#Zd;#T;#z;#ti;#A;#Yd;#Qd;#Jd;init(){this.#Zd=this.find("#line-width"),this.#T=this.find("#line-cap"),this.#z=this.find("#line-join"),this.#ti=this.find("#paint-order"),this.#A=this.find("#miter-limit"),this.#Yd=this.find("#dash-array"),this.#Qd=this.find("#dash-offset"),this.#Jd=this.find("#dash-len")}render(){return Ib`<cc-flex-col>
    <cc-flex-row spaced>
        <cc-number-input id="line-width" title="Line width" ${HA(wP.lineWidth)} .formatter=${MP} style="width: calc((100% - 6 * var(--flex-gap)) / 2);">
            <cc-icon class="is-line-width" slot="before" name="workflow:StrokeWidth"></cc-icon>
        </cc-number-input>
        <cc-icon-switch id="paint-order" .items=${xP} @change=${this.#qd} compact emphasized></cc-icon-switch>
    </cc-flex-row>
    <cc-flex-row>
        <cc-text-input id="dash-array" title="Dash array" placeholder="dash, gap, ..." .formatter=${kP} @change=${this.#Kd} flex>
            <cc-icon class="is-dash-array" slot="before" name="expr:dash-gap"></cc-icon>
        </cc-text-input>
    </cc-flex-row>
    <cc-flex-row>
        <cc-number-input id="dash-offset" title="Dash offset" ${HA(wP.dashOffset)} .formatter=${SP} flex>
            <cc-icon class="is-dash-offset" slot="before" name="expr:dash-offset"></cc-icon>
        </cc-number-input>
        <cc-number-input id="dash-len" title="Path length" ${HA(wP.dashPathLength)} .formatter=${MP} flex>
            <cc-icon slot="before" name="expr:ruler"></cc-icon>
        </cc-number-input>
        <cc-icon style="cursor: pointer; pointer-events: all" name="workflow:HelpOutline" title="Simplify your dash calculations by using a custom path length.
For example, set it to 100 and use percents for dash array and dash offset, or set it to 360 and use degrees.
A value of 0 disables the custom path length and the original path length is used instead.
You cannot use a custom path length on text elements." padded left-gap></cc-icon>
    </cc-flex-row>
    <cc-flex-row>
        <cc-icon-switch id="line-cap" .items=${vP} @change=${this.#Xd} compact emphasized></cc-icon-switch>
        <cc-icon-switch id="line-join" .items=${bP} @change=${this.#tf} compact emphasized></cc-icon-switch>
        <cc-number-input id="miter-limit" title="Miter limit" ${HA(wP.miterLimit)} .formatter=${MP} flex>
            <cc-icon slot="before" name="expr:miter"></cc-icon>
        </cc-number-input>
        <div fixed-32></div>
    </cc-flex-row>
</cc-flex-col>`}#Xd(t){RA(wP.lineCap,t.detail)}#tf(t){RA(wP.lineJoin,t.detail)}#qd(t){RA(wP.paintOrder,t.detail)}#Kd(t){RA(wP.dashArray,t.detail)}onGlobal(t){this.#Fd(t)}onValue(t){this.#Fd(t)}#Fd(t){this.#Zd.value=t.strokeLineWidth,this.#A.value=t.strokeMiterLimit,this.#z.value=t.strokeLineJoin,this.#T.value=t.strokeLineCap,this.#ti.value=t.paintOrder,this.#Qd.value=t.strokeDashOffset,this.#Jd.value=t.strokeDashPathLength,this.#Jd.disabled=t instanceof xg||t instanceof Mg,this.#Yd.value=t.strokeDashArray??[]}onGlobalStatusChanged(t){}static get styles(){return[...super.styles,KA(tP(".is-line-width",wP.lineWidth.id),tP(".is-dash-array",wP.dashArray.id),tP(".is-dash-offset",wP.dashOffset.id))]}}class IP{#ef=null;beforeUpdate(t){if(this.#ef=null,!lh()){const t=Vl;t instanceof bN&&(this.#ef=t)}}afterUpdate(t){t&&this.#ef&&this.#ef.refreshEditor()}}class CP extends NA{constructor(t){super(t,new IP)}}class LP extends LA{constructor(t){super(t,new IP)}}const NP=zf,jP=Vv`
#font-family {
    justify-content: space-between;
    padding-left: 7px;
}
#font-family-value {
    flex: 1;
}
#font-family.not-found {
    color: var(--error-color);
    border: 1px solid var(--error-color);
}
`,TP={min:1,max:1e4,step:.1,stepScale:10,digits:1,unit:""},zP={min:.1,max:1e4,step:.1,stepScale:10,digits:1,unit:""},AP=[];class PP extends JA{constructor(){super(7)}#if=new CP(NP.fontId);#nf;#sf;#rf;#of;#af;#lf;#cf;#Zn;#uf=null;init(){this.#nf=this.find("#font-family"),this.#sf=this.find("#font-family-value"),this.#rf=this.find("#font-style"),this.#of=this.find("#font-size"),this.#af=this.find("#letter-spacing"),this.#lf=this.find("#line-height"),this.#cf=this.find("#baseline-shift"),this.#Zn=this.find("#popover")}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                <cc-action-button id="font-family" title="Font family" @click=${this.#hf} input-face flex>
                    <div id="font-family-value" class="text-ellipsis">-</div>
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </cc-flex-row>
            <cc-flex-row>
                <cc-number-input id="font-size" title="Font size" ${HA(new CP(NP.fontSize))} .formatter=${TP} fluid-3>
                    <cc-icon class="is-font-size" slot="before" name="workflow:TextSize"></cc-icon>
                </cc-number-input>
                <cc-picker id="font-style" title="Font style" @change=${this.#df} lazy flex></cc-picker>
            </cc-flex-row>
            <cc-flex-row>
                <cc-number-input id="letter-spacing" title="Letter spacing" ${HA(new CP(NP.letterSpacing))} .formatter=${eM} flex>
                    <cc-icon class="is-letter-spacing" slot="before" name="workflow:TextTracking"></cc-icon>
                </cc-number-input>
                <cc-number-input id="baseline-shift" title="Baseline shift" ${HA(new CP(NP.baselineShift))} flex>
                    <cc-icon class="is-baseline-shift" slot="before" name="workflow:TextBaselineShift"></cc-icon>
                </cc-number-input>
                <cc-number-input id="line-height" title="Line height" ${HA(new CP(NP.lineHeight))} .formatter=${zP} flex>
                    <cc-icon class="is-line-height" slot="before" name="workflow:LineHeight"></cc-icon>
                </cc-number-input>
            </cc-flex-row>
        </cc-flex-col>
        <cc-popover id="popover"></cc-popover>
`}async#hf(t){this.#uf||(this.#uf=document.createElement("es-font-select"));const e=this.value.fontId;this.#uf.value=Sr(e)?.postscriptName||null,this.#Zn.appendChild(this.#uf);const i=await this.#Zn.open(this.#nf,0,.5,-1,0,-12,0);this.#uf.remove(),null!=i&&e!==br(i)&&(await this.#ff(i)||vv("Failed to load font data","error"))}async#df(t){await this.#ff(t.detail)||vv("Failed to load font data","error")}#pf=new Map;#gf(t){const e=Sr(t)?.family;if(!e)return AP;const i=this.#pf;if(i.has(e))return i.get(e);const n=function(t){if(yr.has(t))return yr.get(t).slice();const e=[];t=t.toLowerCase();for(const i of hr.values())i.family.toLowerCase()===t&&e.push(i);return e}(e);if(!n?.length)return i.set(e,AP),AP;const s=n.map((t=>({title:t.style,value:t.postscriptName})));return i.set(e,s),s}async#ff(t){return!(await kr(t)).includes(t)&&(this.#mf(t),RA(this.#if,br(t)),!0)}#mf(t){const e=this.#rf;if(t){const i=Sr(t);if(i){this.#nf.classList.remove("not-found"),this.#sf.textContent=i.family;const e=this.#gf(t);this.#rf.items=e,this.#rf.value=i.postscriptName,this.#rf.disabled=e.length<2}else this.#nf.classList.add("not-found"),this.#sf.textContent=t,e.items=AP,e.value=void 0,e.disabled=!0}else this.#nf.classList.add("not-found"),this.#sf.textContent="-",e.items=AP,e.value=void 0,e.disabled=!0}#Fd(t){this.#mf(t.fontId),this.#of.value=t.fontSize,this.#af.value=t.letterSpacing,this.#lf.value=t.lineHeight,this.#cf.value=t.baselineShift}onGlobal(t){this.#Fd(t)}onGlobalStatusChanged(t){}onValue(t){this.#Fd(t)}static get styles(){return[...super.styles,jP,wx,KA(XA(".is-letter-spacing",NP.letterSpacing.id),XA(".is-word-spacing",NP.wordSpacing.id),XA(".is-line-height",NP.lineHeight.id),XA(".is-baseline-shift",NP.baselineShift.id))]}}const DP=bf,EP=[{title:"Align: Start",icon:"workflow:TextAlignLeft",value:0},{title:"Align: Center",icon:"workflow:TextAlignCenter",value:2},{title:"Align: End",icon:"workflow:TextAlignRight",value:1}],OP=[!0,!0],RP=[!1,!0],WP=[!0,!1],BP=[!1,!1],UP=[{title:"Auto size",icon:"expr:textbox-auto-size",value:OP},{title:"Fixed width",icon:"expr:textbox-auto-height",value:RP},{title:"Fixed height",icon:"expr:textbox-auto-width",value:WP},{title:"Fixed size",icon:"expr:textbox-fixed-size",value:BP}];class $P extends JA{constructor(){super(4)}#yf;#j;#X;#ps;#E;#vf=new LP([DP.autoWidth,DP.autoHeight]);#bf=new CP(DP.align);#xf=new CP(DP.valign);init(){this.#j=this.find("#width"),this.#X=this.find("#height"),this.#yf=this.find("#link-size"),this.#ps=this.find("#box"),this.#E=this.find("#align"),this.addLinkedProperties([{mode:"detached",properties:[[DP.width,this.#j],[DP.height,this.#X]],link:this.#yf,hooks:new IP}])}render(){return Ib`<cc-flex-col>
            <cc-flex-row>
                <cc-icon name="expr:textbox" padded></cc-icon>
                <cc-number-input id="width" title="Width" .formatter=${eM} flex>
                    <cc-icon name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" .formatter=${eM} flex>
                    <cc-icon name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                <cc-icon-toggle id="link-size" title="Keep proportions" quiet emphasized></cc-icon-toggle>
            </cc-flex-row>
            <cc-flex-row>
                <div fixed-24></div>
                <cc-icon-switch id="box" @change=${this.#wf} .items=${UP} compact emphasized></cc-icon-switch>
                <cc-icon-switch id="align" @change=${this.#Mf} .items=${EP} compact emphasized></cc-icon-switch>
            </cc-flex-row>
    </cc-flex-col>`}#wf(t){RA(this.#vf,t.detail)&&this.onChange(this.value)}#Sf(t){RA(this.#xf,t.detail)}#Mf(t){RA(this.#bf,t.detail)}onValue(t){const e=this.#j;e.value=t.width,e.disabled=t.autoWidth,e.indeterminate=t.autoWidth;const i=this.#X;var n,s;i.value=t.height,i.disabled=t.autoHeight,i.indeterminate=t.autoHeight,this.#ps.value=(n=t.autoWidth,s=t.autoHeight,n?s?OP:WP:s?RP:BP),t.autoWidth||t.autoHeight?(this.#yf.disabled=!0,this.#yf.checked=!1):this.#yf.disabled=!1,this.#E.value=t.align}onGlobalStatusChanged(t){this.#ps.disabled=t;const e=this.#j,i=this.#X;e.indeterminate=i.indeterminate=t,e.disabled=i.disabled=t,this.#yf.disabled=!0}onGlobal(t){this.#E.value=t.paragraphAlign}}const FP=Of,VP=[{title:"Luminance",value:!1},{title:"Alpha",value:!0}];class GP extends JA{constructor(){super(0)}#kf;init(){this.#kf=this.find("#mask-type")}render(){return Ib`<cc-flex-col>
        <cc-flex-row>
            <cc-icon name="workflow:RangeMask" right-gap padded></cc-icon>
            <cc-picker id="mask-type" title="Mask type" .items=${VP} @change=${this.#_f} flex></cc-picker>
        </cc-flex-row>
</cc-flex-col>`}#_f(t){RA(FP.isAlphaMask,t.detail)}onGlobal(){}onGlobalStatusChanged(){}onValue(t){this.#kf.value=t.isAlphaMask}}const HP=new Map([[YM,"auto"],[ZM,"fixed"],[JM,"isometric"],[KM,"pixel"]]),ZP=[{title:"Automatic",value:"auto"},{title:"Fixed",value:"fixed"},{title:"Pixel",value:"pixel"},{title:"Isometric",value:"isometric"}],YP=new Map([["auto",function(t){return new YM(t instanceof HM?t.divisions:{x:10,y:10},t?.color)}],["fixed",function(t){return new ZM(new Fi(100,100),t instanceof HM?t.divisions:{x:5,y:5},t?.color)}],["isometric",function(t){return new JM(t instanceof ZM?t.width:100,null,!0,t?.color)}],["pixel",function(t){return new KM(t?.color)}]]),QP={min:1,max:25,step:1,digits:0,unit:""},JP={...eM,min:1},qP={...nM,min:5,max:85};class KP extends ww{#$l;#If;#Cf;#Lf;#j;#X;#va;#ot;#ba;#qi;#ad=new Map;#Nf=XP("color",GM);#jf=XP("divX",HM);#Tf=XP("divY",HM);#zf=XP("width",ZM);#Af=XP("height",ZM);#Pf=XP("width",JM);#Df=XP("angle",JM);#Ef=XP("complex",JM);constructor(){super();const t=this.#ad;t.set("auto",this.#Of),t.set("fixed",this.#Rf),t.set("isometric",this.#Wf)}firstUpdated(){this.#$l=this.find("#container"),this.#If=this.find("#type"),this.#j=this.find("#width"),this.#X=this.find("#height"),this.#Cf=this.find("#div-x"),this.#Lf=this.find("#div-y"),this.#va=this.find("#size"),this.#ot=this.find("#angle"),this.#ba=this.find("#complex"),this.#qi=this.find("#color"),super.firstUpdated()}refresh(){const t=ck(),e=HP.get(t.constructor);this.#If.value=e,this.#$l.dataset.type=e,this.#qi.value=t.color,this.#ad.get(e)?.(t)}#Of=t=>{this.#Bf(t)};#Rf=t=>{const e=t.size;this.#j.value=e.width,this.#X.value=e.height,this.#Bf(t)};#Bf=t=>{this.#Cf.value=t.divisions.x,this.#Lf.value=t.divisions.y};#Wf=t=>{this.#va.value=t.width,this.#ot.value=t.angle,this.#ba.checked=t.complex};render(){return Ib`<cc-flex-col id="container" data-type=${"auto"}>
            <cc-flex-row>
                <es-color-control
                    id="color" title="Grid color"
                    ${HA(this.#Nf,ck)}
                    .value=${De.gray} .alpha=${!1}
                    .formatter=${!1} .eyeDropper=${!1}
                    text thumbnail flex></es-color-control>
            </cc-flex-row>
            <cc-flex-row>
                <cc-picker id="type" .items=${ZP} .value=${"auto"} @change=${this.#Uf} flex></cc-picker>
            </cc-flex-row>
            <cc-flex-row data-show=${"fixed"}>
                <cc-icon name="expr:size" right-gap padded></cc-icon>
                <cc-number-input id="width" title="Width" ${HA(this.#zf,ck)} .formatter=${JP} flex>
                    <cc-icon name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" ${HA(this.#Af,ck)} .formatter=${JP} flex>
                    <cc-icon name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
            <cc-flex-row data-show=${"auto fixed"}>
                <cc-icon name="expr:grid-toggle" right-gap padded></cc-icon>
                <cc-number-input id="div-x" title="X divisions" ${HA(this.#jf,ck)} .formatter=${QP} flex>
                    <cc-icon name="expr:x" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="div-y" title="Y divisions" ${HA(this.#Tf,ck)} .formatter=${QP} flex>
                    <cc-icon name="expr:y" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
            <cc-flex-row data-show=${"isometric"}>
                <cc-icon-toggle id="complex" title="Show lines" @change=${this.#$f} on-icon="expr:guidelines-toggle" off-icon="expr:guidelines-toggle" .cssIcon=${!1} right-gap quiet emphasized></cc-icon-toggle>
                <cc-number-input id="size" title="Size" ${HA(this.#Pf,ck)} .formatter=${JP} flex>
                    <cc-icon name="expr:size" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="angle" title="Angle" ${HA(this.#Df,ck)} .formatter=${qP} flex>
                    <cc-icon name="expr:angle" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>`}#Uf(t){QI(YP.get(t.detail)(ok))}#$f(t){WA([ck()],this.#Ef,t.detail)}static{this.styles=Vv`
[data-type="auto"] [data-show]:not([data-show~="auto"]),
[data-type="fixed"] [data-show]:not([data-show~="fixed"]),
[data-type="pixel"] [data-show]:not([data-show~="pixel"]),
[data-type="isometric"] [data-show]:not([data-show~="isometric"]) {display: none}
`}}function XP(t,e,i){const n=function(t,e,i){return{getValue:e=>e[t],isValidTarget:t=>t instanceof e,setValue:(e,n)=>!(i?i(e[t],n):e[t]===n)&&(e[t]=n,!0),sameValue:(e,n)=>i?i(e[t],n):e[t]===n}}(t,e,i?kt:null);return n.afterUpdate=tD,n}function tD(t){t&&hk()&&ec()}function eD(t){const e=new Map;return function(i){if(e.has(i))return e.get(i);let n=null;if(t.has(i)){const e=t.get(i);n="string"==typeof e?document.createElement(e):e(i)}return e.set(i,n),n}}function iD(t){return"string"==typeof t?document.createElement(t):t()}function nD(t,e="es-brush-input"){return new class extends xw{constructor(){super("paint")}isVisible(t){return uD(t)||t instanceof Mg}getLabel(){return"Paint"}createElement(){const i=document.createElement(e);return i.brushes=t,i}}}function sD(t="es-text-control"){return new class extends xw{constructor(){super("text")}isVisible(t){return t instanceof xg||t instanceof Mg}getLabel(){return"Text"}createElement(){return iD(t)}}}function rD(t="es-paragraph-control"){return new class extends xw{constructor(){super("paragraph")}isVisible(t){return t instanceof xg}getLabel(){return"Paragraph"}createElement(){return iD(t)}}}function oD(t="es-stroke-settings"){return new class extends xw{constructor(){super("stroke")}isVisible(t){return uD(t)||t instanceof Mg}getLabel(){return"Stroke"}createElement(){return iD(t)}}}function aD(t="es-compositing-settings"){return new class extends xw{constructor(){super("compositing")}isVisible(t){return t instanceof Up||t.providesPicture}getLabel(){return"Compositing"}createElement(){return iD(t)}}}function lD(t){t??=new Map([["filter:blur","es-fx-blur"],["filter:drop-shadow","es-fx-drop-shadow"],["filter:color-adjust","es-fx-color-adjust"]]);const e=eD(t);return new class extends xw{constructor(){super("filter")}isVisible(e){return e instanceof Qg&&t.has(e.type)}createElement(){return null}getElement(t){const i=e(t.type);return i&&(i.value=t),i}getLabel(t){return t instanceof Qg?qI(t.type):"Filter"}}}function cD(t="es-clip-group-control"){return new class extends xw{constructor(){super("clip-group")}isVisible(t){return t instanceof fg}getLabel(){return"Clip group"}createElement(){return iD(t)}}}function uD(t){return t instanceof Up||Wm(t)}function hD(t,e,i,n){i??=new Map([["rect","rect"],["ellipse","ellipse"],["regular-polygon","regular-polygon"],["star","star"],["poly","poly"],["line","line"],["pen","path"]]),n??=new Map;const s=eD(t);return new class extends xw{constructor(){super("shape")}createElement(){return null}#Ff(t){if(t instanceof Up){const t=Vl?.name;return t?i.get(t):null}return t.type}getLabel(t){const e=this.#Ff(t);if(null==e)return"";const i=n.has(e)?n.get(e):qI(e);return t instanceof Up?i+" - Tool":i}isVisible(i){if(e&&ah()>e)return!1;const n=this.#Ff(i);return null!=n&&t.has(n)}getElement(e){const i=this.#Ff(e);if(null==i||!t.has(i))return null;const n=s(i);return n&&(n.value=e),n}}}class dD extends Kb{constructor(){super(...arguments),this.dimensions={height:30,paddingTop:2,indentSize:16,margin:8,iconSize:18,iconMargin:4,textMargin:8,baselineShift:2,minTextWidth:10,smallIconScale:.75,maxIndent:10},this.font="14px -expressive-sans"}updateInternalValues(){super.updateInternalValues(),this.text=this.getColor("text"),this.background=this.getColor("face"),this.backgroundHover=this.getColor("face-hover"),this.selectedBorder=this.getColor("border")}}class fD extends Xb{#_l;#Ll;#Cl;#Sl;get#Vf(){return this.#Sl.item?.element}get info(){return this.#Ll??=this.#Nl()}get search(){return this.#Cl}set search(t){t&&(t=t.trim()),t||(t=null),this.#Cl!==t&&(this.#Cl=t,this.refresh(!0))}#Ml;constructor(){const t=new p;super(t),this.#Ll=null,this.#Cl=null,this.#Sl={type:0,item:null,indicator:0,mode:null},this.reverse=!0,this.autoScroll=!0,this.#Gf=()=>this.refresh(!0),this.#Hf=()=>{!this.#Zf&&this.autoScroll&&this.#Yf(rh())||this.renderFrame()},this.#Zf=!1,this.#Qf=!1,this.#Jf=!1,this.#qf=new Set,this.#Kf=t=>{switch(t.preventDefault(),t.stopPropagation(),t.code){case"ArrowUp":this.#_l.scrollBy(-1,1)&&this.renderFrame();break;case"ArrowDown":this.#_l.scrollBy(1,1)&&this.renderFrame();break;case"Space":case"Enter":Em(this.#Vf)}},this.#Xf=null,this.#_l=t,this.#Ml=new cC([[Bt,this.#Gf],[qt,this.#Gf],[Yt,this.#Hf],[Ft,this.#Gf],[Zt,this.#Gf]])}activate(){this.#Ml.on(),super.activate()}deactivate(){this.#Ml.off(),super.deactivate()}#Gf;#Hf;#Yf(t){if(!t)return!1;let e=!1;!this.#Cl&&function(t){const e=Pm();let i=!1,n=t.parent;for(;n&&!n.isDocument;){const t=n.id;e.has(t)||(e.add(t),i=!0),n=n.parent}return i}(t)&&(e=!0,this.refresh(!0));const i=this.info.find((e=>e.element===t));return i&&this.#_l.scrollLineInView(i.top)?(e||this.renderFrame(),!0):e}createTheme(t){return new dD(t)}get contentHeight(){return(this.info?.length||0)*this.lineHeight+this.theme.dimensions.paddingTop}#Zf;#tp;#Qf;#Jf;#qf;#ep(t){t&&wh(t);let e,i=!1;if(ah()>1){let t=rh().parent;i=!0;for(let e of sh())if(e.parent!==t){i=!1;break}}if(i&&ah()>1){if(e=yu([...Th((t=>t.supportsContext))],!1,!0),0===e.length)return}else if(e=rh(),!e.supportsContext)return;var n;Nt(n=e)?n.length?1===n.length?Eu(n[0]):Ou(n):Eu(null):Eu(n)}#ip(t,e,i){t?i?bh(t,!0):!e||this.#Cl||lh()?dh(t,!1):ph(rh(),t):xh()}handleDblClick(t){const e=this.#Vf;t.altKey?this.#ep(e):e&&setTimeout((async()=>{let i=await new Promise((i=>{this.canvas.dispatchEvent(new CustomEvent("edit-title",{composed:!0,bubbles:!0,detail:{title:XI(e),position:{x:t.clientX,y:t.clientY},response:i}}))}));null!=i&&(i=i.trim(),""===i&&(i=null),e.title!==i&&(e.title=i,ga(),this.renderFrame()))}),100)}#np;handleMouseDown(t){this.#np=t.clientY,this.#Qf=this.#Jf=!1;const e=this.#Vf;if(e){switch(this.#Sl.indicator){case 1:return void Em(e);case 2:return e.hidden=!e.hidden,ga(),void this.renderFrame();case 3:return void((e.isLayer||e.isElement)&&(e.locked=!e.locked,ga(),this.renderFrame()))}t.shiftKey||t.ctrlKey||t.metaKey?this.#ip(e,t.shiftKey,t.ctrlKey||t.metaKey):uh(e)?(wh(e),this.#Jf=ah()>1):this.#ip(e),this.#Qf=!this.#Cl&&!lh()}else this.#ip(null)}handleMouseMove(t){if(this.#Qf){if(Math.abs(t.clientY-this.#np)<3)return;return this.#Qf=!1,this.#Jf=!1,void this.#sp(t)}this.updateHoverInfo()&&this.renderFrame()}handleMouseUp(t){if(this.#Qf=!1,!this.#Zf)return void(this.#Jf&&(this.#Jf=!1,rh()&&dh(rh(),!1)));this.#Jf=!1,k("keydown"),this.#Zf=!1,this.#qf.clear();let e=this.#Sl.mode;const i=this.#Vf;null!=e&&i&&(this.reverse&&("before"===e?e="after":"after"===e&&(e="before")),M_(i,e)),this.#tp=null,this.refresh(!0),this.#Yf(rh())}#sp(t){const e=rh();if(!e||e.isFragment&&ah()>1)return;S("keydown",this.#Kf,!0),t.altKey&&!e.isFragment&&x_()&&this.refresh(!0);const i=this.#qf;function n(t){if(i.add(t),t.hasFragments)for(const e of t.fragments)n(e);if(t.hasChildren)for(const e of t.children())n(e)}i.clear(),this.#tp=e.nodeType;for(const t of sh())n(t);this.setCursor("move"),this.#Zf=!0,this.renderFrame()}#Kf;invalidate(){this.#Ll=null}updateHoverInfo(){const t=this.info;if(!t.length)return this.clearHoverInfo();const e=this.mousePosition,i=this.theme,n=this.#_l.offset,s=e.y+n,r=Math.floor(s/i.lineHeight);if(r<0||r>=t.length)return this.clearHoverInfo();const o=t[r];let a=null,l=0;if(this.#Zf){if(this.#rp){const t=i.dimensions,e=t.paddingTop,n=t.height,r=(s-o.top*(e+n)-e)/n;a=this.#op(o.element,r)}}else l=this.#ap(o,e.x,s);return this.#jl(1,o,l,a)}clearHoverInfo(){return this.#jl(0,null,0,null)}get#rp(){const t=this.mousePosition;if(t.x<0||t.y<0)return!1;const e=this.size.bounds;return!(t.x>e.width||t.y>e.height)}#jl(t,e,i,n){this.#Zf?this.setCursor(null===n?"not-allowed":"copy"):this.setCursor(null!=e&&0!==i?"pointer":"default");const s=this.#Sl;return(s.type!==t||s.item!==e||s.indicator!==i||s.mode!==n)&&(s.type=t,s.item=e,s.indicator=i,s.mode=n,!0)}#lp(t){return t.isElement||t.isLayer}#op(t,e){if(this.#qf.has(t))return null;let i=!1,n=!1;const s=rh();switch(this.#tp){case 1:n=t.isLayer;break;case 2:i=t.supportsChildren&&(t.isLayer||t.isElement)&&t.acceptsChild(s)&&s.acceptsParent(t),n=t.isElement&&t.parent&&t.parent.acceptsChild(s)&&s.acceptsParent(t.parent);break;case 3:i=t.supportsFilters&&(t.isElement||t.isLayer)&&null==t.filters&&1===ah();break;case 4:if(n=t.isFilter,t.isFilterContainer||t.isFilter)i=t.supportsChildren;else{if(!t.isLayer&&!t.isElement)return null;i=t.supportsFilters}break;default:return null}return i?n?Dm(t)&&(t.hasChildren||t.hasFragments)?e<.5?"before":"append":e<.25?"before":e>.75?"after":"append":"append":n?e<.5?"before":"after":null}#ap(t,e,i){const n=this.theme.dimensions;if(t.left>n.maxIndent)return 0;let s=n.margin+t.left*n.indentSize,r=this.size.bounds.width-n.margin;if(e<=s||e>=r)return 0;s+=n.iconMargin+n.iconSize/2;const o={x:e,y:i},a={x:s,y:t.top*(n.height+n.paddingTop)+n.paddingTop+n.height/2},l=n.iconSize/2;if(!this.#Cl&&Om(t.element)&&Be.distance(o,a)<=l)return 1;const c=n.iconMargin+n.smallIconScale*n.iconSize/2;return r-=c,a.x=r,Be.distance(o,a)<=l?2:(r-=2*c,a.x=r,this.#lp(t.element)&&Be.distance(o,a)<=l?3:0)}#cp(t,e,i,n){if(t.push({element:e,top:i,left:n}),i++,!Dm(e))return i;if(n++,e.isLayer||e.isElement){const s=e.filters;s&&(i=this.#cp(t,s,i,n))}if(e.supportsChildren&&e.hasChildren)for(const s of e.children(this.reverse))i=this.#cp(t,s,i,n);return i}#up(t,e){return XI(t).toLowerCase().includes(e)}#hp(t,e,i,n){if(this.#up(e,n)&&(t.push({element:e,top:i,left:0}),i++),e.isLayer||e.isElement){const s=e.filters;s&&(i=this.#hp(t,s,i,n))}if(e.supportsChildren&&e.hasChildren)for(const s of e.children(this.reverse))i=this.#hp(t,s,i,n);return i}#Nl(){const t=[];let e=0,i=this.#Cl;if(i){i=i.toLowerCase();for(const n of Gu(this.reverse))e=this.#hp(t,n,e,i)}else for(const i of Gu(this.reverse))e=this.#cp(t,i,e,0);return t}render(t,e,i){const n=this.theme;t.fillStyle=n.background,t.fillRect(0,0,e,i);const s=this.info,r=s?.length;if(!r)return;const o=this.#_l.offset,a=n.dimensions,l=a.height+a.paddingTop,c=Math.trunc(o/l);if(c>=r)return;const u=Math.min(c+Math.ceil(i/l),r-1);if(u<c)return;t.save(),t.textRendering="optimizeLegibility",t.textBaseline="middle",t.font=n.font,t.fillStyle=n.text,t.lineWidth=1,t.translate(0,-o);const h=this.#Zf,d=e-2*a.margin,f=this.#Vf,p=this.#Sl.mode;for(let i=c;i<=u;i++){const n=s[i],r=a.margin+n.left*a.indentSize,o=e-a.margin;if(t.save(),t.translate(0,n.top*l+a.paddingTop),h){if(this.#qf.has(n.element))t.globalAlpha=.25;else if(null!=p&&f===n.element)if("append"==p||"prepend"===p)this.#dp(t,a.margin,0,d,a.height);else{let e=r;if(n.element.supportsChildren||(e+=a.iconMargin+a.iconSize),"before"===p){let r=1;s[i-1]&&s[i-1].left===n.left&&(r=0),this.#fp(t,e,-a.paddingTop/2,d-e,a.height/2,r)}else{let r=-1;s[i+1]&&s[i+1].left===n.left&&(r=0),this.#fp(t,e,a.height+a.paddingTop/2,d-e,a.height/2,r)}}}else uh(n.element)?this.#dp(t,a.margin,0,d,a.height):f===n.element&&this.#pp(t,a.margin,0,d,a.height);t.translate(r,0),this.#gp(t,n,0,o-r),t.restore()}t.restore()}#fp(t,e,i,n,s,r=0,o=1){t.save(),t.strokeStyle=this.theme.selectedBorder,t.lineWidth=o,t.lineJoin="round",t.lineCap="round",t.beginPath(),0===r?(t.moveTo(e,i-s),t.lineTo(e,i+s),t.moveTo(e,i)):(t.moveTo(e,i+r*s),t.lineTo(e,i)),t.lineTo(e+n,i),t.stroke(),t.restore()}#dp(t,e,i,n,s,r=1){t.save(),t.strokeStyle=t.fillStyle=this.theme.selectedBorder,t.lineWidth=r,t.globalAlpha=.15,t.beginPath(),t.roundRect(e,i,n,s,3),t.fill(),t.globalAlpha=1,t.beginPath(),t.roundRect(e,i+r,n,s-r,3),t.stroke(),t.restore()}#pp(t,e,i,n,s){n<1||(t.save(),t.fillStyle=this.theme.backgroundHover,t.beginPath(),t.roundRect(e,i,n,s,3),t.fill(),t.restore())}#gp(t,e,i,n){const s=this.theme.dimensions,r=s.height/2;if(e.left>s.maxIndent)return void t.fillText("...",n-this.#mp(t),r);const o=s.iconMargin+s.iconSize/2;i+=o,!this.#Cl&&Om(e.element)&&this.renderIcon(t,Dm(e.element)?"workflow:ChevronDown":"workflow:ChevronRight",s.iconSize,i,r),i+=o,i+=o;const a=tC(e.element);if(this.renderIcon(t,a||"expr:unknown",s.iconSize,i,r),i+=o,i+=s.textMargin,!this.#Zf){const i=this.#Vf===e.element,o=e.element.hidden,a=this.#lp(e.element),l=!!a&&e.element.locked,c=s.iconMargin+s.smallIconScale*s.iconSize/2;(i||o||l)&&(n-=c,(i||o)&&this.renderIcon(t,"workflow:VisibilityOff",s.iconSize,n,r,o?1:.5,s.smallIconScale),n-=c,n-=c,a&&(i||l)&&this.renderIcon(t,"workflow:LockClosed",s.iconSize,n,r,l?1:.5,s.smallIconScale),n-=c),n-=s.textMargin}n-i>s.minTextWidth&&(t.beginPath(),t.rect(i,0,n-i,s.height),t.clip(),t.fillText(XI(e.element),i,r+s.baselineShift))}#Xf;#mp(t){return this.#Xf??=t.measureText("...").width}}class pD extends Gb{#yp=new fD;constructor(){super(),hC(this,[Bt,Ft,Zt,X_,[rI,this.#vp]])}#dr=0;connectedCallback(){super.connectedCallback(),this.#yp.activate(),this.addEventListener("contextmenu",this.#bp),this.addEventListener("edit-title",this.#xp),this.#dr++&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),this.#yp.deactivate(),this.removeEventListener("contextmenu",this.#bp),this.removeEventListener("edit-title",this.#xp)}#bp(t){t.preventDefault(),t.stopPropagation(),_||bv(this.ctxMenu,{x:t.clientX,y:t.clientY},"bottom-left")}render(){return su?Ib`
            <div id="context" class="dbl" @dblclick=${this.#wp}>
                ${rI.value?nC(this.#Mp()):nC(this.#Sp(su))}
            </div>
            ${this.#yp.canvas}
            <cc-popover id="popover">
                <cc-text-input title="Edit title" id="title-input" @popover-visible=${this.#kp} placeholder="Title" @change=${this.#_p}>
                    <cc-icon name="workflow:ProjectNameEdit" slot="before"></cc-icon>
                </cc-text-input>
            </cc-popover>
        `:Lb}#Sp(t){let e,i,n;if(Au()){n=!1;const t=Tu();Lu()?(i="Isolation context",e=tC(t)):(i=XI(t),e=tC(t))}else n=!0,e="workflow:DocumentFragment",i=t.title||"Document";return Ib`
<cc-icon .name=${e} class="dbl"></cc-icon>
<span class="dbl text-ellipsis">${i}</span>
<div style="flex: 1" class="dbl"></div>
<cc-action-group id="context-wrapper" quiet size="m">
    <cc-action-button .hidden=${n} @click=${this.#Ip} title="Back">
        <cc-icon name="workflow:Back"></cc-icon>
    </cc-action-button>
    <cc-action-button .hidden=${n} @click=${this.#Jc} title="Exit isolation">
        <cc-icon name="workflow:CloseCircle"></cc-icon>
    </cc-action-button>
    <cc-action-button @click=${this.#Cp} title="Add...">
        <cc-icon name="workflow:Add"></cc-icon>
    </cc-action-button>
</cc-action-group>
`}#wp(t){rI.value||t.target.classList.contains("dbl")&&rI.change(!0)}#Mp(){return Ib`
<cc-action-group id="search-wrapper" compact size="m">
    <cc-text-input id="search" @update=${this.#Lp} .value=${this.#yp?.search||""}>
        <cc-icon name="expr:zoom-tool" slot="before"></cc-icon>
    </cc-text-input>
    <cc-action-button @click=${this.#Np} title="Exit search">
        <cc-icon name="workflow:CloseCircle"></cc-icon>
    </cc-action-button>
</cc-action-group>
`}#Lp(t){this.#yp.search=t.detail}#Np(){this.#yp.search=null,rI.change(!1)}#jp(){return this.shadowRoot.querySelector("#search")}#vp=async t=>{this.#yp.search=null,this.requestUpdate(),t&&await this.updateComplete;const e=this.#jp();e&&(e.value="",t&&e.focus())};get#Zn(){return this.shadowRoot.getElementById("popover")}get#Tp(){return this.shadowRoot.getElementById("title-input")}#_p(t){t.stopPropagation(),this.#Zn.close(t.detail)}async#kp(){const t=this.#Tp;await t.updateComplete,t.focus(),t.selectAll()}#xp=async t=>{t.stopPropagation();const{title:e,position:i,response:n}=t.detail;this.#Tp.value=e||"";const s=this.getBoundingClientRect();i.x=(s.left+s.right)/2,n(await this.#Zn.open(i,.5,1,0,-1,0,4))};#Cp(t){bv(this.menu,t.target,"bottom-left")}#Ip(){Ru()}#Jc(){Eu(null,!1)}static{this.styles=[mx,wx,Vv`
* {pointer-events: var(--cc-pointer-events, auto)}

:host {
    display: flex;
    flex-direction: column;
    overflow: hidden !important;
    user-select: none;
}

#context {
    height: 48px;
    flex-shrink: 0;
    padding: 0 8px;
    gap: 8px;
    display: flex;
    flex-direction: row;
    align-items: center;
    border-bottom: var(--border-size) solid var(--separator-color);
}

#context cc-action-button[hidden] {
    display: none;
}

#context-wrapper {
    gap: 4px;
}
#context-wrapper, #context > cc-icon {
    flex-shrink: 0;
}

#title-input {
    width: 220px;
    border: none !important;
}

#search-wrapper, #search {
    flex: 1;
}

#canvas {
    flex: 1;
    display: block;
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    border: none;
    outline: none;
    touch-action: none;
    contain: strict;
    --cc-canvas-line-height: 32;
    --cc-canvas-scroll-size: var(--scrollbar-size);
    --cc-canvas-scroll-color: var(--scrollbar-color);
    --cc-canvas-text: var(--text-color-default);
    --cc-canvas-face: var(--surface-color);
    --cc-canvas-face-hover: var(--surface-hover-color);
    --cc-canvas-border: var(--accent-color-500);
}


    `]}}!function(t,e=0){Array.isArray(e)||(e=[e]);for(const i of e)Wa.has(i)||Wa.set(i,new Set),Wa.get(i).add(t)}((t=>{const e="keydown"===t.type;if(!e||"AltLeft"!==t.code&&"AltRight"!==t.code||t.preventDefault(),Ix.length>0){if(!e)return!1;const i=function(t){if(Ja(t.target))return t.target;const e=t.composedPath()[0];return Ja(e)?e:null}(t),n="Escape"===t.code;if(i)n?(t.preventDefault(),t.stopPropagation(),i.blur()):mD(t)&&t.preventDefault();else if(n){t.preventDefault(),t.stopPropagation();const e=document.activeElement;e instanceof HTMLElement&&Ix.at(-1)?.contains(e)?e.blur():Ix.at(-1)?.dispatchEvent(new Event("cancel",jx))}else t.preventDefault();return!1}return qa(t)?(mD(t)&&t.preventDefault(),!1):!_&&!_a()||(t.preventDefault(),!1)}));const gD=new Set(["KeyC","KeyX","KeyV","KeyA","KeyZ","KeyY"]);function mD(t){return(t.ctrlKey||t.metaKey)&&!gD.has(t.code)}let yD=null,vD=null,bD=!1;window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),vD=t})),window.addEventListener("appinstalled",(()=>{bD||(bD=!0,vD=null,MC())}));const xD=Ox(class extends Rx{constructor(t){if(super(t),3!==t.type&&1!==t.type&&4!==t.type)throw Error("The `live` directive is not allowed on child or event bindings");if(!(t=>void 0===t.strings)(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===Cb||e===Lb)return e;const i=t.element,n=t.name;if(3===t.type){if(e===i[n])return Cb}else if(4===t.type){if(!!e===i.hasAttribute(n))return Cb}else if(1===t.type&&i.getAttribute(n)===e+"")return Cb;return dw(t),e}});let wD=(()=>{let t,e,i,n=Gb,s=[],r=[],o=[],a=[],l=[],c=[];return class extends n{constructor(){super(...arguments),this.#zp=ix(this,s,!1),this.#es=(ix(this,r),ix(this,o,void 0)),this.#Ap=(ix(this,a),ix(this,l,null)),this.updateCallback=(ix(this,c),null),this.updateId=null}static{const u="function"==typeof Symbol&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!1})],e=[ox({type:Object,reflect:!1,attribute:!1})],i=[ox({type:Object,reflect:!1,attribute:!1})],ex(this,null,t,{kind:"accessor",name:"readonly",static:!1,private:!1,access:{has:t=>"readonly"in t,get:t=>t.readonly,set:(t,e)=>{t.readonly=e}},metadata:u},s,r),ex(this,null,e,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:u},o,a),ex(this,null,i,{kind:"accessor",name:"bounds",static:!1,private:!1,access:{has:t=>"bounds"in t,get:t=>t.bounds,set:(t,e)=>{t.bounds=e}},metadata:u},l,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}#zp;get readonly(){return this.#zp}set readonly(t){this.#zp=t}#es;get value(){return this.#es}set value(t){this.#es=t}#Ap;get bounds(){return this.#Ap}set bounds(t){this.#Ap=t}get colorFormat(){return eI.value}#Pp;get property(){return this.#Pp}set property(t){this.#Pp!==t&&(this.#Pp=t,this.stopUpdate())}get propertyUpdater(){return this.#Pp}stopUpdate(){UA(this.updateId),this.updateId=null}onStart(t){t.stopPropagation(),this.updateId=OA(this.propertyUpdater)}onEnd(t){t.stopPropagation(),this.stopUpdate()}doUpdate(t,e){this.value=t,this.updateCallback?.(t),e?(this.stopUpdate(),RA(this.propertyUpdater,t)):$A(t,this.updateId)}onColorFormat(t){eI.change(t.detail)}}})();const MD=new class extends NA{constructor(){super(null)}#Dp=!1;#Xn=null;init(t,e){return this.property=t,this.#Dp=e,this}beforeUpdate(t){const e=rh();this.#Xn=e&&this.isValidTarget(e)?Ng(e,t,!this.#Dp):null}afterUpdate(){this.#Xn=null}setValue(t,e){return this.#Xn&&(e=this.#Xn(t)),super.setValue(t,e)}},SD=[{title:"Pad",value:0},{title:"Reflect",value:2},{title:"Repeat",value:1}];let kD=(()=>{let t,e,i=wD,n=[],s=[],r=[],o=[];return class extends i{static{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;t=[cx("#slider")],e=[cx("#color")],ex(this,null,t,{kind:"accessor",name:"slider",static:!1,private:!1,access:{has:t=>"slider"in t,get:t=>t.slider,set:(t,e)=>{t.slider=e}},metadata:a},n,s),ex(this,null,e,{kind:"accessor",name:"color",static:!1,private:!1,access:{has:t=>"color"in t,get:t=>t.color,set:(t,e)=>{t.color=e}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}#Ep=ix(this,n,void 0);get slider(){return this.#Ep}set slider(t){this.#Ep=t}#$r=(ix(this,s),ix(this,r,void 0));get color(){return this.#$r}set color(t){this.#$r=t}constructor(){super(),ix(this,o),hC(this,[iI,nI])}get isPinned(){return iI.value}render(){return this.#Wa(this.#Op(),this.#Rp())}get propertyUpdater(){return MD.init(this.property,this.isPinned)}#Wa(...t){return Ib`<es-color-control
            id="color"
            .value=${xD(this.slider?.color||this.value.stopColors.getColorAt(0))}
            ?readonly=${this.readonly}
            .format=${this.colorFormat}
            .addSlot=${!0}
            @start=${this.onStart}
            @end=${this.onEnd}
            @update=${this.#Va}
            @color-format=${this.onColorFormat}
            >${nC(t)}</es-color-control>`}onEnd(t){super.onEnd(t),this.slider.edit=!1}#Op(){return Ib`<es-gradient-slider
            id="slider"
            small
            .value=${xD(this.value.stopColors)}
            ?readonly=${this.readonly}
            @edit=${this.#Wp}
            @select=${this.#Bp}
            @add=${this.#Bp}
            @remove=${this.#Bp}
            @value=${this.#Bp}
            @update=${this.#Up}
        ></es-gradient-slider>`}#Bp(t){t.stopPropagation(),this.color.value=this.slider.color}#Wp(t){t.stopPropagation(),t.detail?(this.updateId=OA(this.propertyUpdater),this.color.value=this.slider.color):this.stopUpdate()}#Up(t){t.stopPropagation(),this.doUpdate(this.value.withStopColorList(t.detail))}#Va(t){t.stopPropagation(),this.color.value=this.slider.color=t.detail}#Rp(){const t=this.bounds,e=null==t,i=nI.value,n=this.isPinned;return Ib`
            <cc-action-group id="gradient-buttons" quiet>
                <cc-action-button
                        title="Gradient settings"
                        .disabled=${e}
                        .selected=${xD(!e&&i)}
                        @click=${this.#$p}
                        emphasized
                        >
                    <cc-icon name="workflow:Settings"></cc-icon>
                </cc-action-button>
                <cc-icon-toggle on-icon="workflow:PinOn" off-icon="workflow:PinOff" .cssIcon=${!1} .checked=${n} @change=${this.#Fp} quiet emphasized left-gap></cc-icon-toggle>
                <cc-action-button
                    title="Reverse color stops"
                    @click=${this.#Vp}
                >
                    <cc-icon name="expr:switch-horizontal"></cc-icon>
                </cc-action-button>
                <cc-action-button
                    title="Delete color stop"
                    @click=${this.#Gp}
                    ?disabled=${this.value.stopColors.length<=2}
                >
                    <cc-icon name="workflow:Delete"></cc-icon>
                </cc-action-button>
                <div style="flex: 1"></div>
                ${this.#Hp()}
            </cc-action-group>
            ${i&&!e?this.#Zp(n,t):Lb}
            `}#Hp(){return Ib`<cc-picker
            id="spread-method"
            title="Spread method"
            .items=${SD}
            @change=${this.#Yp}
            .value=${xD(this.value.spread)}
        ></cc-picker>`}#Zp(t,e){return Ib`<cc-flex-col id="settings">${this.renderSettings(t,e)}${this.#Qp()}</cc-flex-col>`}#Qp(){const t=this.value;return Ib`
        <cc-flex-row>
            <cc-icon name="expr:rotate" padded right-gap></cc-icon>
            <cc-number-input title="Rotate" .value=${t.rotate} .formatter=${nM} @start=${this.onStart} @end=${this.onEnd} @update=${this.#Jp} flex>
                <cc-icon name="expr:angle" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Aspect ratio" .value=${t.scale} .formatter=${Xw} @start=${this.onStart} @end=${this.onEnd} @update=${this.#qp} flex>
                <cc-icon name="expr:size" slot="before"></cc-icon>
            </cc-number-input>
            <div fixed-32></div>
        </cc-flex-row>`}#Jp(t){this.doUpdate(this.value.withRotate(t.detail))}#qp(t){this.doUpdate(this.value.withScale(t.detail))}#Yp(t){t.stopPropagation(),this.doUpdate(this.value.withSpreadMethod(t.detail),!0)}#Fp(t){iI.change(t.detail)}#Vp(t){this.slider.reverseStops(t.altKey)}#Gp(){this.slider.removeCurrentHandle()}#$p(){nI.toggle()}getSidePoint(t,e){const i=this.bounds;if(!i)return null;const n=i.getPointAtPosition(t.x,t.y);return n&&e&&n.equals(e)?null:n}static{this.styles=Vv`
        #slider {
            width: auto;
            flex: 1;
        }

        #spread-method {
            width: 72px;
        }
    `}}})();class _D{#Vn=null;constructor(t,e,i){this.title=t,this.icon=e,this.type=i}get element(){return null==this.#Vn&&(this.#Vn=this.createElement()),this.#Vn}render(t,e,i,n){const s=this.element;return s.value=t,s.property=e,s.bounds=i,s.updateCallback=n,s}}const ID=new Map;function CD(t){ID.set(t.type,t)}function LD(t){return`<stop offset="${Math.round(100*t.offset)}%" stop-color="${t.color.rgba}" />`}CD(new class extends _D{createElement(){const t=document.createElement("p");return t.innerText="No paint",t.style.textAlign="center",t}getBackground(){return"linear-gradient(-45deg, transparent 0%, transparent 47.5%, #f00 47.5%, #f00 52.5%, transparent 52.5%, transparent 100%)"}render(){return this.element}}("None","expr:fill-none",0)),CD(new class extends _D{createElement(){return document.createElement("es-brush-control-solid")}getBackground(t){return t.color.rgba}}("Solid","expr:fill-solid",1)),CD(new class extends _D{createElement(){return document.createElement("es-brush-control-linear-gradient")}getBackground(t){return`linear-gradient(${t.start.getPositiveAngleTo(t.end)+90}deg, ${t.stopColors.toString()})`}}("Linear gradient","expr:fill-linear-gradient",2)),CD(new class extends _D{createElement(){return document.createElement("es-brush-control-radial-gradient")}getBackground(t){return`radial-gradient(${t.stopColors.toString()})`}}("Radial gradient","expr:fill-radial-gradient",3)),CD(new class extends _D{createElement(){return document.createElement("es-brush-control-sweep-gradient")}getBackground(t){let e=t.startAngle;if(0===e&&360===t.arcLength)return`conic-gradient(from 90deg, ${t.stopColors.toString()})`;const i=e+t.arcLength,n=e>0?`${t.stopColors.list[0].color.rgba} 0deg ${t.startAngle}deg, `:"",s=i<360?`, ${t.stopColors.list[t.stopColors.list.length-1].color.rgba} ${i}deg 360deg`:"";return`conic-gradient(from 90deg, ${n}${t.stopColors.list.map((i=>`${i.color.rgba} ${e+i.offset*t.arcLength}deg`))}${s})`}}("Sweep gradient","expr:fill-conical-gradient",5)),CD(new class extends _D{createElement(){return document.createElement("es-brush-control-radial-focal-gradient")}getBackground(t){let e=0,i=0,n=0,s=0;const r=t.start.sub(t.end),o=2*Math.max(t.startRadius,t.endRadius,Math.abs(r.x),Math.abs(r.y))/100;0!==o&&(e=t.endRadius/o,i=r.x/o,n=r.y/o,s=t.startRadius/o);const a=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n<radialGradient id="gradient" cx="50%" cy="50%" r="${e}%" fx="${50+i}%" fy="${50+n}%" fr="${s}%">\n${t.stopColors.list.map(LD).join("")}\n</radialGradient>\n<rect width="100%" height="100%" fill="url(#gradient)" />\n</svg>`;return`url("data:image/svg+xml;base64,${window.btoa(a)}")`}}("Radial gradient with focal point","expr:fill-radial-focal-gradient",4));let ND=(()=>{let t,e,i,n,s,r=Gb,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[],g=[];return class extends r{static{const m="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[ox({type:Boolean,reflect:!1})],e=[ox({type:Object,attribute:!1})],i=[ox({type:Number,attribute:!1})],n=[ox({type:Object,attribute:!1})],s=[ox({type:Number,attribute:!1})],ex(this,null,t,{kind:"accessor",name:"isFillSelected",static:!1,private:!1,access:{has:t=>"isFillSelected"in t,get:t=>t.isFillSelected,set:(t,e)=>{t.isFillSelected=e}},metadata:m},o,a),ex(this,null,e,{kind:"accessor",name:"fill",static:!1,private:!1,access:{has:t=>"fill"in t,get:t=>t.fill,set:(t,e)=>{t.fill=e}},metadata:m},l,c),ex(this,null,i,{kind:"accessor",name:"fillOpacity",static:!1,private:!1,access:{has:t=>"fillOpacity"in t,get:t=>t.fillOpacity,set:(t,e)=>{t.fillOpacity=e}},metadata:m},u,h),ex(this,null,n,{kind:"accessor",name:"stroke",static:!1,private:!1,access:{has:t=>"stroke"in t,get:t=>t.stroke,set:(t,e)=>{t.stroke=e}},metadata:m},d,f),ex(this,null,s,{kind:"accessor",name:"strokeOpacity",static:!1,private:!1,access:{has:t=>"strokeOpacity"in t,get:t=>t.strokeOpacity,set:(t,e)=>{t.strokeOpacity=e}},metadata:m},p,g),m&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})}#Kp=ix(this,o,!1);get isFillSelected(){return this.#Kp}set isFillSelected(t){this.#Kp=t}#Xp=(ix(this,a),ix(this,l,void 0));get fill(){return this.#Xp}set fill(t){this.#Xp=t}#tg=(ix(this,c),ix(this,u,1));get fillOpacity(){return this.#tg}set fillOpacity(t){this.#tg=t}#eg=(ix(this,h),ix(this,d,void 0));get stroke(){return this.#eg}set stroke(t){this.#eg=t}#ig=(ix(this,f),ix(this,p,1));get strokeOpacity(){return this.#ig}set strokeOpacity(t){this.#ig=t}#ng=(ix(this,g),[null,null]);#sg=[null,null];#rg(t,e){return null==t?"transparent":t===e[0]&&null!=e[1]?e[1]:(e[0]=t,e[1]=ID.get(t.type).getBackground(t))}render(){const{isFillSelected:t,fill:e,stroke:i}=this;return Ib`
            <div id="copy" @click=${this.#og} title=${t?"Copy stroke":"Copy fill"}>
                <cc-css-icon .name=${t?"SwapArrowUpLeft":"SwapArrowDownRight"}></cc-css-icon>
            </div>
            <div id="swap" title="Swap fill & stroke" @click=${this.#ag}>
                <cc-css-icon  name="SwapArrows"></cc-css-icon>
            </div>
            <cc-brush-thumb id="fill" title="Fill" .indeterminate=${null==e} .paint=${this.#rg(e,this.#ng)} .opacity=${this.fillOpacity??1} .selected=${t} @click=${this.#lg}></cc-brush-thumb>
            <cc-brush-thumb id="stroke" title="Stroke" .indeterminate=${null==i} .paint=${this.#rg(i,this.#sg)} .opacity=${this.strokeOpacity??1} .selected=${!t} @click=${this.#cg} cut></cc-brush-thumb>
        `}#cg(){this.#ug("toggle",!1)}#lg(){this.#ug("toggle",!0)}#og(t){this.#ug("copy-brush",t.altKey)}#ag(t){this.#ug("swap-brush",t.altKey)}#ug(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}static{this.styles=Vv`
:host {
    width: 48px;
    height: 48px;
    contain: strict;
}
:host > * {position: absolute}
#fill {top: 0; left: 0}
#fill[selected] {z-index: 1}
#fill:not([selected]) {clip-path: polygon(-5% -5%, 105% -5%, 105% 55%, 55% 55%, 55% 105%, -5% 105%)}
#stroke {bottom: 0; right: 0}
#swap {top: 0;right: 0}
#copy {bottom: 0;left: 0}
#swap, #copy {
    display: flex;
    cursor: pointer;
    pointer-events: bounding-box;
}
    `}}})();const jD=hf;let TD=(()=>{let t,e,i,n,s,r=Gb,o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[];return class extends r{static{const p="function"==typeof Symbol&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;t=[ox({type:Boolean})],e=[ox({type:Array,attribute:!1})],i=[ox({type:Object})],n=[cx("#brush-switch")],ex(this,null,t,{kind:"accessor",name:"readonly",static:!1,private:!1,access:{has:t=>"readonly"in t,get:t=>t.readonly,set:(t,e)=>{t.readonly=e}},metadata:p},o,a),ex(this,null,e,{kind:"accessor",name:"brushes",static:!1,private:!1,access:{has:t=>"brushes"in t,get:t=>t.brushes,set:(t,e)=>{t.brushes=e}},metadata:p},l,c),ex(this,null,i,{kind:"accessor",name:"value",static:!1,private:!1,access:{has:t=>"value"in t,get:t=>t.value,set:(t,e)=>{t.value=e}},metadata:p},u,h),ex(this,s={get:nx((function(){return this.#hg}),"#brushSwitch","get"),set:nx((function(t){this.#hg=t}),"#brushSwitch","set")},n,{kind:"accessor",name:"#brushSwitch",static:!1,private:!0,access:{has:t=>#dg in t,get:t=>t.#dg,set:(t,e)=>{t.#dg=e}},metadata:p},d,f),p&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p})}#zp=ix(this,o,!1);get readonly(){return this.#zp}set readonly(t){this.#zp=t}#fg=(ix(this,a),ix(this,l,void 0));get brushes(){return this.#fg}set brushes(t){this.#fg=t}#es=(ix(this,c),ix(this,u,void 0));get value(){return this.#es}set value(t){this.#es=t}#hg=(ix(this,h),ix(this,d,void 0));get#dg(){return s.get.call(this)}set#dg(t){return s.set.call(this,t)}constructor(){super(),hC(this,[[de,this.#pg],tI])}get#gg(){return tI.value}#pg=(ix(this,f),t=>{if(t.has(2)||t.has(3))this.requestUpdate();else if(t.has(4)){let t;if(t=this.#gg?this.value.fill:this.value.strokeBrush,t instanceof nn)return void this.requestUpdate()}});render(){const t=this.#gg;return[this.#mg(t),this.#yg(t),this.#vg(t)]}#mg(t){const e=this.value;return Ib`
            <div id="brush-switch-wrapper">
                <es-brush-switch
                    id="brush-switch"
                    .isFillSelected=${t}
                    .fill=${e.fill}
                    .fillOpacity=${xD(e.fillOpacity)}
                    .stroke=${e.strokeBrush}
                    .strokeOpacity=${xD(e.strokeOpacity)}
                    @toggle=${this.#bg}
                    @copy-brush=${this.#xg}
                    @swap-brush=${this.#wg}
                ></es-brush-switch>
                <cc-slider-input
                    id="opacity"
                    data-name=${t?"fill":"stroke"}
                    .constraint=${qw}
                    .formatter=${qw}
                    .value=${xD(t?e.fillOpacity:e.strokeOpacity)}
                    ${HA(t?jD.fill.opacity:jD.stroke.opacity,null,this.#Mg)}
                    filled
                >
                    <span>${t?"Fill opacity":"Stroke opacity"}</span>
                </cc-slider-input>
            </div>
        `}#Mg=t=>(this.#gg?this.#dg.fillOpacity=t:this.#dg.strokeOpacity=t,t);#bg(t){tI.change(t.detail)}#xg(t){let e;const i=t.detail;e=this.#gg?Hk(i):Gk(i),e&&this.requestUpdate()}#wg(t){Vk(t.detail)&&this.requestUpdate()}#yg(t){return Ib`<cc-icon-toolbar
            .value=${xD(t?this.value.fill.type:this.value.strokeBrush.type)}
            .items=${this.brushes}
            @change=${this.#Sg}
            emphasized compact size="m" justify="center"></cc-icon-toolbar>`}#Sg(t){let e;e=this.#gg?Yk(t.detail):Zk(t.detail),e?this.requestUpdate():t.preventDefault()}#vg(t){const e=this.value,i=t?e.fill:e.strokeBrush;return ID.get(i.type).render(i,t?jD.fill.brush:jD.stroke.brush,e?.localBounds,this.#kg)}#kg=t=>{this.#gg?this.#dg.fill=t:this.#dg.stroke=t};static get styles(){const t=[Vv`
            * {pointer-events: var(--cc-pointer-events, auto)}
            :host {
                display: flex;
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }

            #brush-switch-wrapper {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 8px;
            }

            #brush-switch {flex-shrink: 0}
        `];return t.push(KA(XA('#opacity[data-name="fill"]',jD.fill.opacity.id),XA('#opacity[data-name="stroke"]',jD.stroke.opacity.id))),t}}})();class zD extends wD{render(){return nC(Ib`<es-color-control
            .value=${xD(this.value.color)}
            .format=${xD(this.colorFormat)}
            ?readonly=${this.readonly}
            @color-format=${this.onColorFormat}
            @start=${this.onStart}
            @end=${this.onEnd}
            @update=${this.onUpdate}
        ></es-color-control>`)}onUpdate(t){this.doUpdate(this.value.withColor(t.detail))}}class AD extends kD{renderSettings(t,e){let{start:i,end:n}=this.value,s=rM;return t||(i=e.getRelativePoint(i.x,i.y),n=e.getRelativePoint(n.x,n.y),s=Kw),Ib`
        <cc-flex-row>
            <cc-icon name="expr:fill-linear-gradient" padded right-gap></cc-icon>
            <cc-number-input title="From X" .formatter=${s} .value=${i.x} data-name="start" data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#_g} flex>
                <cc-icon name="expr:x1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="From Y" .formatter=${s} .value=${i.y} data-name="start" data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#_g} flex>
                <cc-icon name="expr:y1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${Fs} @change=${this.#Ig} data-name="start" left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <div fixed-32></div>
            <cc-number-input title="To X" .formatter=${s} .value=${n.x} data-name="end" data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#_g} flex>
                <cc-icon name="expr:x2" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="To Y" .formatter=${s} .value=${n.y} data-name="end" data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#_g} flex>
                <cc-icon name="expr:y2" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${Fs} @change=${this.#Ig} data-name="end" left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>`}#Ig(t){t.stopPropagation();let{start:e,end:i}=this.value;const n="start"===t.target.dataset.name,s=this.getSidePoint(t.detail,n?e:i);s&&(n?e=s:i=s,this.doUpdate(this.value.withPosition(e,i),!0))}#_g(t){t.stopPropagation();const e=t.target.dataset,i=this.value;let{start:n,end:s}=i,r=t.detail;const o=this.bounds;o&&!this.isPinned&&(r="x"===e.axis?o.x+r*o.width:o.y*r*o.height),"start"===e.name?n="x"===e.axis?new Be(r,n.y):new Be(n.x,r):s="x"===e.axis?new Be(r,s.y):new Be(s.x,r),this.doUpdate(i.withPosition(n,s))}}class PD extends kD{renderSettings(t,e){let{center:i,radius:n}=this.value,s=rM,r=oM;return t||(i=e.getRelativePoint(i.x,i.y),n=e.getRelativeRadius(n),s=Kw,r=Xw),Ib`
        <cc-flex-row>
            <cc-icon name="expr:fill-radial-gradient" padded right-gap></cc-icon>
            <cc-number-input title="Center X" .formatter=${s} .value=${i.x} data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:x" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Center Y" .formatter=${s} .value=${i.y} data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:y" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${Fs} @change=${this.#Ig} left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <div fixed-32></div>
            <cc-number-input title="Radius" .formatter=${r} .value=${n} @start=${this.onStart} @end=${this.onEnd} @update=${this.#Lg} fluid>
                <cc-icon name="expr:radius" slot="before"></cc-icon>
            </cc-number-input>
            <div flex></div>
            <div fixed-32></div>
        </cc-flex-row>`}#Ig(t){t.stopPropagation();const e=this.value,i=this.getSidePoint(t.detail,e.center);i&&this.doUpdate(e.withCenter(i),!0)}#Cg(t){t.stopPropagation();const e=t.target.dataset,i=this.value;let n=t.detail;const s=this.bounds;let r;s&&!this.isPinned&&(n="x"===e.axis?s.x+n*s.width:s.y+n*s.height),r="x"===e.axis?new Be(n,i.center.y):new Be(i.center.x,n),this.doUpdate(i.withCenter(r))}#Lg(t){let e=t.detail;const i=this.bounds;i&&!this.isPinned&&(e=i.getAbsoluteRadius(e)),this.doUpdate(this.value.withRadius(e))}}class DD extends kD{renderSettings(t,e){let{start:i,end:n,startRadius:s,endRadius:r}=this.value,o=rM,a=oM;return t||(i=e.getRelativePoint(i.x,i.y),s=e.getRelativeRadius(s),n=e.getRelativePoint(n.x,n.y),r=e.getRelativeRadius(r),o=Kw,a=Xw),Ib`
        <cc-flex-row>
            <cc-icon name="expr:fill-radial-focal-gradient" padded right-gap></cc-icon>
            <cc-number-input title="Start X" .formatter=${o} .value=${n.x} data-name="end" data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:x1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Start Y" .formatter=${o} .value=${n.y} data-name="end" data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:y1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${Fs} @change=${this.#Ig} data-name="end" left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <div fixed-32></div>
            <cc-number-input title="End X" .formatter=${o} .value=${i.x} data-name="start" data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:x2" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="End Y" .formatter=${o} .value=${i.y} data-name="start" data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:y2" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${Fs} @change=${this.#Ig} data-name="start" left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <cc-icon name="expr:radius" padded right-gap></cc-icon>
            <cc-number-input title="Start radius" .formatter=${a} .value=${r} @start=${this.onStart} @end=${this.onEnd} @update=${this.#Lg} data-name="end" flex>
                <cc-icon name="expr:r1" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="End radius" .formatter=${a} .value=${s} @start=${this.onStart} @end=${this.onEnd} @update=${this.#Lg} data-name="start" flex>
                <cc-icon name="expr:r2" slot="before"></cc-icon>
            </cc-number-input>
            <div fixed-32></div>
        </cc-flex-row>
`}#Ig(t){t.stopPropagation();const e="start"===t.target.dataset.name,i=this.value,n=this.getSidePoint(t.detail,e?i.start:i.end);n&&(e?this.doUpdate(i.withStart(n),!0):this.doUpdate(i.withEnd(n),!0))}#Cg(t){t.stopPropagation();const e=t.target.dataset,i=this.value;let{start:n,end:s}=i,r=t.detail;const o=this.bounds;o&&!this.isPinned&&(r="x"===e.axis?o.x+r*o.width:o.y*r*o.height),"start"===e.name?n="x"===e.axis?new Be(r,n.y):new Be(n.x,r):s="x"===e.axis?new Be(r,s.y):new Be(s.x,r),this.doUpdate(i.withPosition(n,s))}#Lg(t){let e=t.detail;const i=this.bounds;i&&!this.isPinned&&(e=i.getAbsoluteRadius(e));const n=this.value,s="start"===t.target.dataset.name;let{startRadius:r,endRadius:o}=n;s?r=e:o=e,this.doUpdate(n.withRadius(r,o))}}class ED extends kD{renderSettings(t,e){let{center:i,startAngle:n,arcLength:s}=this.value,r=rM;return t||(i=e.getRelativePoint(i.x,i.y),r=Kw),Ib`
        <cc-flex-row>
            <cc-icon name="expr:fill-conical-gradient" padded right-gap></cc-icon>
            <cc-number-input title="Center X" .formatter=${r} .value=${i.x} data-axis="x" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:x" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Center Y" .formatter=${r} .value=${i.y} data-axis="y" @start=${this.onStart} @end=${this.onEnd} @update=${this.#Cg} flex>
                <cc-icon name="expr:y" slot="before"></cc-icon>
            </cc-number-input>
            <cc-pin-point-button .valueMap=${Fs} @change=${this.#Ig} left-gap quiet>
                <cc-icon name="expr:center-object-origin"></cc-icon>
            </cc-pin-point-button>
        </cc-flex-row>
        <cc-flex-row>
            <cc-icon name="expr:radius" padded right-gap></cc-icon>
            <cc-number-input title="Start angle" .formatter=${sM} .value=${n} @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} data-name="start" flex>
                <cc-icon name="expr:angle" slot="before"></cc-icon>
            </cc-number-input>
            <cc-number-input title="Arc length" .formatter=${sM} .value=${s} @start=${this.onStart} @end=${this.onEnd} @update=${this.#Ng} data-name="length" flex>
                <cc-icon name="expr:roundness" slot="before"></cc-icon>
            </cc-number-input>
            <div fixed-32></div>
        </cc-flex-row>`}#Ig(t){t.stopPropagation();const e=this.value,i=this.getSidePoint(t.detail,e.center);i&&this.doUpdate(e.withCircle(i),!0)}#Cg(t){t.stopPropagation();const e=t.target.dataset,i=this.value;let n=t.detail;const s=this.bounds;let r;s&&!this.isPinned&&(n="x"===e.axis?s.x+n*s.width:s.y*n*s.height),r="x"===e.axis?new Be(n,i.center.y):new Be(i.center.x,n),this.doUpdate(i.withCircle(r))}#Ng(t){let e=t.detail;"start"===t.target.dataset.name?this.doUpdate(this.value.withCircle(null,e,null)):this.doUpdate(this.value.withCircle(null,null,e))}}async function OD(t,e=""){const i=[];for(const[n,s]of Object.entries(t)){const t=e+n;customElements.define(t,s),i.push(customElements.whenDefined(t))}await Promise.all(i)}function RD(t){t??="",(t=t.trim())||(t=aI),function(t){t=(t??"").trim(),document.title!==t&&(document.title=t,gv&&pv.setTitle(t))}(t)}function WD(t){return!Vl?.isWorkingOrPanning&&Gl(Fl(t))}function BD(t){return t.preventDefault(),t.returnValue=""}const UD={capture:!0};function $D(t){t?window.removeEventListener("beforeunload",BD,UD):window.addEventListener("beforeunload",BD,UD)}function FD(){return null!==localStorage.getItem("setup")}function VD(){localStorage.setItem("setup","ok")}class GD{equals(t){return this.type===t.type}toJSON(){return this.id?this.id:{type:this.type,data:this.toJSONData()}}clone(t){if(this.id&&!t)return this;const e=this.cloneSelf();return e.#t=this.#t,e}#t;get path(){return this.#t??=this.computePath()}computePath(){const t=new Path2D;t.moveTo(0,0);for(let e=1;e<=990;e++){const i=e/1e3;t.lineTo(i,this.eval(i))}return t.lineTo(1,1),t}invalidate(){this.#t=void 0}}function HD(t){return new Be(1-t.x,1-t.y)}function ZD(t){const e=[];for(let i=t.length-1;i>=0;i--)e.push(HD(t[i]));return e}function YD(t,e){return t.x-e.x}function QD(t){t.sort(YD);let e,i,n=t.length-1,s=Be.ZERO;for(let r=1;r<=n;r++)e=t[r-1],i=t[r],s.x===e.x&&e.x===i.x||s.y===e.y&&e.y===i.y?(t.splice(r-1,1),r--,n--):s=e;return n&&(e=t[n],(1===s.x&&1===e.x||1===s.y&&1===e.y)&&(t.splice(n,1),n--)),n&&t[0].isZero&&(t.shift(),n--),n&&1===t[n].x&&1===t[n].y&&(t.pop(),n--),t}function*JD(t,e){const i=(e+=1.0001)**t,n=1/((1-i)/(1-e)+i/2);let s=1/i;for(let i=1;i<=t;i++){const t=n*((1-e**i)/(1-e));yield[t,s],s*=e}}class qD extends GD{#jg;#Tg;constructor(t,e){super(),this.h1=t,this.h2=e}get isLinear(){return a(this.h1.x,this.h1.y)&&a(this.h2.x,this.h2.y)}get inverse(){return new qD(HD(this.h2),HD(this.h1))}get type(){return 0}getTitle(t){return"Cubic-Bezier "+(t?"out":"in")}eval(t){return 0===t||1===t?t:(null==this.#Tg&&([this.#jg,this.#Tg]=function(t,e,i,n){if(a(t,e)&&a(i,n))return[null,KD];const s=[{x:1+3*(t-i),y:1+3*(e-n)},{x:3*(i-2*t),y:3*(n-2*e)},{x:3*t,y:3*e}];return a(s[1].x,0)&&a(s[2].x,0)?[s,XD]:[s,tE]}(this.h1.x,this.h1.y,this.h2.x,this.h2.y)),this.#Tg(t,this.#jg))}cloneSelf(){const t=new qD(this.h1,this.h2);return t.#jg=this.#jg,t.#Tg=this.#Tg,t}toJSONData(){return[this.h1,this.h2]}computePath(){const t=new Path2D;return t.moveTo(0,0),t.bezierCurveTo(this.h1.x,this.h1.y,this.h2.x,this.h2.y,1,1),t}invalidate(){super.invalidate(),this.#jg=this.#Tg=void 0}equals(t){return super.equals(t)&&this.h1.equals(t.h1)&&this.h2.equals(t.h2)}}function KD(t){return t}function XD(t,e){const i=(t/e[0].x)**(1/3);return((e[0].y*i+e[1].y)*i+e[2].y)*i}function tE(t,e){const i=e[0].x,n=e[1].x,s=e[2].x;let r=t;for(let e=0;e<8;e++){const e=i*r*r*r+n*r*r+s*r-t;if(Math.abs(e)<=5e-5)break;const o=3*i*r*r+2*n*r+s;r-=2*e*o/(2*o*o-e*(6*i*r+2*n))}return((e[0].y*r+e[1].y)*r+e[2].y)*r}class eE extends GD{constructor(t){super(),this.steps=t}get type(){return 1}getTitle(t){return`${this.steps} steps ${t?"out":"in"}`}eval(t){return Math.ceil(t*this.steps)/this.steps}toJSONData(){return this.steps}cloneSelf(){return new eE(this.steps)}computePath(){return function(t){const e=new Path2D;let i=0,n=0;const s=1/t;e.moveTo(0,0);for(let r=0;r<t-1;r++)n+=s,e.lineTo(i,n),i+=s,e.lineTo(i,n);return e.lineTo(i,1),e.lineTo(1,1),e}(this.steps)}equals(t){return super.equals(t)&&this.steps===t.steps}}class iE extends GD{constructor(t=3,e=3){super(),this.oscillations=t,this.stiffness=e}get type(){return 3}getTitle(t){return`Elastic ${this.oscillations} ${t?"out":"in"}`}eval(t){return(0===this.stiffness?t:(Math.exp(this.stiffness*t)-1)/(Math.exp(this.stiffness)-1))*Math.sin(2*t*Math.PI*(this.oscillations+.25))}toJSONData(){return[this.oscillations,this.stiffness]}cloneSelf(){return new iE(this.oscillations,this.stiffness)}equals(t){return super.equals(t)&&this.oscillations===t.oscillations&&this.stiffness===t.stiffness}}class nE extends GD{constructor(t=3){super(),this.oscillations=t}get type(){return 5}getTitle(t){return`Sinc ${this.oscillations} ${t?"out":"in"}`}eval(t){return 0===t||1===t?t:(t=2*Math.PI*this.oscillations*(t-1),Math.sin(t)/t)}toJSONData(){return this.oscillations}cloneSelf(){return new nE(this.oscillations)}equals(t){return super.equals(t)&&this.oscillations===t.oscillations}}class sE extends GD{constructor(t=1.7){super(),this.amplitude=t}get type(){return 4}getTitle(t){return(1.7===this.amplitude?"Back ":`Back ${this.amplitude} `)+(t?"out":" in")}eval(t){return t*t*(t+this.amplitude*(t-1))}toJSONData(){return this.amplitude}cloneSelf(){return new sE(this.amplitude)}equals(t){return super.equals(t)&&this.amplitude===t.amplitude}}class rE extends GD{constructor(t=3,e=2){super(),this.bounces=t,this.stiffness=e}get type(){return 2}getTitle(t){return`Bounce ${this.bounces} ${t?"out":"in"}`}eval(t){const e=this.stiffness+1.0001,i=1-(1+e)*e**this.bounces/2,n=Math.floor(Math.log(1-t*i)/Math.log(e));return(1-(2*(t*i-1)/((1-e)*e**n)+(e+1)/(1-e))**2)/e**(this.bounces-n)}computePath(){return function(t,e){const i=new Path2D;i.moveTo(0,0);let n=0;for(const[s,r]of JD(t,e)){const t=(n+s)/2;i.quadraticCurveTo(t,2*r,s,0),n=s}return i.quadraticCurveTo((n+1)/2,1,1,1),i}(this.bounces,this.stiffness)}toJSONData(){return[this.bounces,this.stiffness]}cloneSelf(){return new rE(this.bounces,this.stiffness)}equals(t){return super.equals(t)&&this.bounces===t.bounces&&this.stiffness===t.stiffness}}class oE extends GD{constructor(t){super(),this.points=t}get type(){return 6}getTitle(t){return"Points "+(t?"out":" in")}get inverse(){return new oE(ZD(this.points))}eval(t){if(t<0)return 0;let e=Be.ZERO;for(const i of this.points){if(t===i.x)return i.y;if(t<i.x)return e.y+(i.y-e.y)*(t-e.x)/(i.x-e.x);e=i}return t>=1?1:e.y+(1-e.y)*(t-e.x)/(1-e.x)}toJSONData(){return this.points}cloneSelf(){return new oE(this.points.slice())}equals(t){return super.equals(t)&&kt(this.points,t.points)}computePath(){return function(t){const e=new Path2D;e.moveTo(0,0);for(const i of t)e.lineTo(i.x,i.y);return e.lineTo(1,1),e}(this.points)}}const aE=new class extends qD{constructor(){super(new Be(.42,0),new Be(1,1)),this.id="ease"}getTitle(t){return"Ease "+(t?"out":"in")}},lE=new class extends qD{constructor(){super(new Be(.42,0),new Be(.58,1)),this.id="ease-both"}getTitle(t){return"Ease both"}},cE=new class extends eE{constructor(){super(1),this.id="step"}getTitle(t){return t?"Hold":"Jump"}eval(t){return 0===t?0:1}},uE=new Map;function hE(t){return uE.get(t)||null}function dE(t){for(const e of uE.values())if(t.equals(e))return e;return null}function fE(t){if("string"==typeof t)return hE(t);switch(t.type){case 0:return new qD(t.data[0],t.data[1]);case 1:return new eE(t.data);case 2:return new rE(t.data[0],t.data[1]);case 3:return new iE(t.data[0],t.data[1]);case 4:return new sE(t.data);case 5:return new nE(t.data);case 6:return new oE(t.data)}return null}uE.set(aE.id,aE),uE.set(lE.id,lE),uE.set(cE.id,cE);class pE{constructor(t,e){this.func=t,this.inverted=!!e}get title(){return this.func.getTitle(this.inverted)}get inverse(){return new pE(this.func,!this.inverted)}eval(t){return this.inverted?1-this.func.eval(1-t):this.func.eval(t)}clone(t){return new pE(this.func.clone(t),this.inverted)}toJSON(){return this.inverted?[this.func,1]:[this.func]}equals(t){return!!t&&this.inverted===t.inverted&&this.func.equals(t.func)}static fromJSON([t,e]){let i;return 2===e?(i=hE("ease-both"),e=0):(i=fE(t),i&&(i=dE(i)||i)),i?new pE(i,!!e):null}}const gE=new Set;function*mE(t){yE(gE,t.h1.x,t.h2.x),yE(gE,t.h1.y,t.h2.y),yield*gE,gE.clear()}function yE(t,e,i){const n=pi(0,e,i,1);if(n)if("number"==typeof n)t.add(n);else for(const e of n)t.add(e)}const vE=new Map([[0,function(t){if(t.isLinear)return null;let e=0,i=1;for(const n of mE(t)){const s=di(0,t.h1.y,t.h2.y,1,n);e=Math.min(e,s),i=Math.max(i,s)}return 0===e&&1===i?null:[e,i]}],[3,function(t){const e=xE(2*t.oscillations-1,t.oscillations),i=xE(2*t.oscillations,t.oscillations)-e;let n=0;for(let s=1;s<100;s++)n=Math.min(n,t.eval(e+s*i/100));return n<0?[n,1]:null}],[4,function(t){return t.amplitude<=0?null:[-4/27*t.amplitude**3/(t.amplitude+1)**2,1]}],[5,function(){return[-.217234,1]}],[6,function(t){let e=0,i=1;for(const n of t.points)e=Math.min(e,n.y),i=Math.max(i,n.y);return e<0||i>1?[e,i]:null}]]);function bE(t){if(!t||!vE.has(t.func.type))return null;const e=vE.get(t.func.type)(t.func);if(!e)return null;if(t.inverted){const t=e[0];e[0]=1-e[1],e[1]=1-t}return e}function xE(t,e){return 2*t/(4*e+1)}function wE(t){return new pE(new eE(1),t)}function*ME(t,e){if(!t)return;const{func:i,inverted:n}=t;i instanceof eE?yield*function*(t,e,i){if(i===e){yield 0;for(let i=1;i<t;i++){const n=i/t;yield e?1-n:n}}}(i.steps,n,e):i instanceof oE&&(yield*function*(t,e,i){const n=i?"y":"x";let s=Be.ZERO;for(const i of e?ZD(t):t)i[n]===s[n]&&(yield e?1-s.x:s.x),s=i;1===s[n]&&(yield e?1-s.x:s.x)}(i.points,n,e))}const SE=new Map([[0,function*(t){if(!t.isLinear)for(const e of mE(t)){const i=di(0,t.h1.y,t.h2.y,1,e);(i<=0||i>=1)&&(yield e)}}],[1,function*(t){const e=t.steps;for(let t=1;t<e;t++)yield t/e,yield t/e}],[4,function*(t){const e=t.amplitude/(t.amplitude+1);yield 1/3*e,yield 2/3*e,yield e}],[2,function*(t){let e=0;for(const[i]of JD(t.bounces,t.stiffness))yield(e+i)/2,yield i,e=i}],[3,function*(t){const e=2*t.oscillations;let i=0;for(let n=1;n<=e;n++){const e=xE(n,t.oscillations),s=i+(e-i)*IE;a(t.eval(s),0)||(yield s),yield e,i=e}}],[5,function*(t){const e=2*t.oscillations,i=e-1;let n=0;for(let s=1;s<=i;s++){const i=s/e,r=n+(i-n)*IE;a(t.eval(r),0)||(yield r),yield i,n=i}yield(n+1)/2}],[6,function*(t){for(const e of t.points)yield e.x}]]);function kE(t){return t?[..._E(t.func,t.inverted)]:[]}function*_E(t,e){if(SE.has(t.type))for(let i of SE.get(t.type)(t))0!==i&&1!==i&&(yield e?1-i:i)}const IE=.5+Math.E/100;function CE(t,e){return t?t.func instanceof oE?t.inverted?new pE(t.func.inverse):t:new pE(new oE(NE(t.func,t.inverted,e))):null}const LE=new Map([[0,function(t,e){return t.isLinear?[Be.ZERO,Be.UNIT]:zE(t,e)}],[1,function({steps:t}){if(1===t)return[Be.ZERO,jE];const e=1/t;let i=0;const n=[Be.ZERO];for(let s=1;s<t;s++){const t=e*s;n.push(new Be(i,t),new Be(t,t)),i=t}return n.push(new Be(i,1)),n}],[6,function(t){return t.points}]]);function NE(t,e,i){const n=LE.has(t.type)?LE.get(t.type)(t,i):zE(t,i);return e?ZD(n):n}const jE=new Be(0,1),TE=new Set;function zE(t,e){const i=e?100:5,n=[Be.ZERO];for(const e of function*(t,e){for(let e=1;e<t;e++){const i=e/t;TE.add(i),yield i}if(e)for(const t of e)!TE.has(t)&&t>0&&t<1&&(yield t);TE.clear()}(i,_E(t)))n.push(new Be(e,t.eval(e)));return n.push(Be.UNIT),QD(function(t,e){return t.length<=2?t:(e??=1,[...no(t=[...eo(t,e*=e)],e)])}(n.sort(YD),.01))}const AE=new Map([[0,function(t,e,i){if(t.isLinear)return"linear";e&&(t=t.inverse);const n=[t.h1.x,t.h1.y,t.h2.x,t.h2.y];for(const[t,e]of DE)if(kt(n,e))return t;return`cubic-bezier(${n.map((t=>f(t,i))).join(",")})`}],[1,function(t,e){return 1===t.steps?e?"step-end":"step-start":`steps(${t.steps},${e?"start":"end"})`}],[6,function(t,e,i){const n=[],s=e?ZD(t.points):[...t.points];s.push(Be.UNIT);const r=s.length-1,o=[0];let a=Be.ZERO;for(let t=0;t<=r;t++){if(s[t].y!==a.y){const t=f(a.y,i);if(o.length){const e=o.map((t=>f(100*t,i,"%"))).join(" ");n.push(`${t} ${e}`),o.splice(0)}else n.push(`${t}`)}a=s[t],o.push(a.x)}return n.push("1 100%"),`linear(${n.join(",")})`}]]);function PE(t,e=2){return t?(AE.has(t.func.type)||(t=CE(t,!0)),AE.get(t.func.type)(t.func,t.inverted,e)):"linear"}const DE=new Map([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]]]);class EE{constructor(t,e,i,n){this.animations=[],this.target=t,this.animations=e||[],this.in=i??null,this.out=n??null}dispose(){this.target=this.animations=null}get hasInOut(){return null!=this.in&&null!=this.out}setInOut(t,e){return(t!==this.in||e!==this.out)&&(t>e&&([t,e]=[e,t]),this.in=t,this.out=e,!0)}toJSON(){return{id:this.target.id,in:this.in,out:this.out,animations:this.animations}}copy(t,e){return new EE(t,this.animations.map(e?OE:RE),this.in,this.out)}getAnimationIndex(t){const e=this.animations;for(let i=0;i<e.length;i++)if(e[i].animator.id===t)return i;return-1}hasAnimation(t){return this.getAnimationIndex(t)>=0}getAnimation(t){const e=this.getAnimationIndex(t);return e>=0?this.animations[e]:null}addAnimation(t,e){const i=this.getAnimationIndex(t.animator.id),n=this.animations;return i>=0?n[i]!==t&&(n[i]=t,!0):(e?n.unshift(t):n.push(t),!0)}removeAllAnimations(){if(0===this.animations.length)return!1;const t=this.target,e=this.animations.splice(0);for(const i of e)i.animator.onAnimationRemoved(t,i);return!0}removeAnimation(t){const e=this.getAnimationIndex(t);if(-1===e)return!1;const i=this.animations[e];return this.animations.splice(e,1),i.animator.onAnimationRemoved(this.target,i),!0}removeAnimations(t){let e=!1;for(const i of t)this.removeAnimation(i)&&(e=!0);return e}moveAnimation(t,e){return rt(this.animations,this.getAnimationIndex(t),e)}moveAnimationIndex(t,e){return rt(this.animations,t,e)}eval(t){let e=!1;const i=this.target;i.visible!==this.isInOutVisible(t)&&(i.visible=!i.visible,e=!0);for(const i of this.animations)this.evalAnimation(i,t)&&(e=!0);return e}evalVisibility(t){const e=this.target;return e.visible!==this.isInOutVisible(t)&&(e.visible=!e.visible,!0)}evalAnimation(t,e){const i=this.target,n=t.animator;if(t.disabled)return!!n.onAnimationRemoved(i,t);const s=t.getValueAtOffset(e);if(null===s)return!!n.onAnimationRemoved(i,t);let r=!1;return n.setTargetValue(i,s)&&(r=!0),n.onAnimationUpdated(i,t)&&(r=!0),r}isInOutVisible(t){return t>=(this.in??0)&&t<(this.out??Number.POSITIVE_INFINITY)}countKeyframes(t){let e=0;for(const i of this.animations)!t&&i.disabled||(e+=i.keyframes.length);return e}fixKeyframes(t){let e=!1;for(const i of this.animations)i.fixKeyframes(t)&&(e=!0);return e}get isRemovable(){return 0===this.animations.length&&null==this.in&&null==this.out}clean(){let t=!1;const{target:e,animations:i}=this;for(let n=0;n<i.length;n++){const s=i[n];0===s.keyframes.length&&(i.splice(n,1),n--,t=!0,s.animator.onAnimationRemoved(e,s))}return t}}function OE(t){return t.clone(!0)}function RE(t){return t.clone(!1)}class WE{constructor(t,e=0,i=null,n){this.value=t,this.offset=e,this.easing=i,this.id=n||Ct()}clone(t){return new WE(this.value,this.offset,this.easing,t?null:this.id)}static fromJSON(t){return new WE(t.value,t.offset,t.easing)}withOffset(t,e){return new WE(this.value,t,this.easing,e?null:this.id)}withValue(t,e){return new WE(t,this.offset,this.easing,e?null:this.id)}withEasing(t,e){return new WE(this.value,this.offset,t,e?null:this.id)}toJSON(){return{value:this.value,offset:this.offset,easing:this.easing}}}function BE(t,e){const i=e.indexOf(t);return i<0||i+1>=e.length?null:e[i+1]}function UE(t,e){return t.offset-e.offset}function $E(t,e=!0){if(t.length<2)return!1;e&&t.sort(UE);const i=t.length-1,n=[],s=[];for(let e=i;e>0;e--)n.push(t[e].value),s.push(t[e-1].easing?.inverse||null);n.push(t[0].value),s.push(t[i].easing);for(let e=0;e<=i;e++)t[e].value=n[e],t[e].easing=s[e];return!0}class FE{constructor(t,e,i){this.disabled=!1,this.animator=t,this.keyframes=e??[],this.disabled=!!i}get minOffset(){return 0===this.keyframes.length?0:this.keyframes[0].offset}get maxOffset(){const t=this.keyframes.length-1;return t<0?0:this.keyframes[t].offset}sortKeyframes(t){null==t?this.keyframes.sort(UE):function(t,e){t.sort(((t,i)=>t.offset===i.offset?e.has(i)?e.has(t)?0:-1:e.has(t)?1:0:t.offset>i.offset?1:-1))}(this.keyframes,t)}reverseKeyframes(t,e){return $E(t??this.keyframes,e)}clone(t){const e=[];for(const i of this.keyframes)e.push(this.cloneKeyframe(i,t));return new this.constructor(this.animator,e,this.disabled)}cloneKeyframe(t,e){return new WE(this.animator.valueHandler.cloneValue(t.value),t.offset,t.easing,e?null:t.id)}toJSON(){return{animator:this.animator.id,keyframes:this.keyframes,disabled:this.disabled}}get length(){return this.keyframes.length}get isAnimated(){return!this.disabled&&this.keyframes.length>1}get hasKeyframes(){return this.keyframes.length>0}setKeyframeValue(t,e){t.value=this.animator.valueHandler.cloneValue(e)}setKeyframeEasing(t,e,i){return function(t,e,i){return e?t.easing?!e.equals(t.easing)&&(t.easing=i?e.clone():e,!0):(t.easing=i?e.clone():e,!0):!!t.easing&&(t.easing=null,!0)}(t,e,i)}getKeyframeAtIndex(t){return this.keyframes[t]||null}removeKeyframeAtIndex(t){const e=this.keyframes.splice(t,1);return e.length>0?e[0]:null}addKeyframe(t){return function(t,e){const i=t.offset,n=e.length;for(let s=0;s<n;s++){const n=e[s];if(i===n.offset)return e[s]=t;if(i<n.offset)return e.splice(s,0,t),t}return e.push(t),t}(t,this.keyframes)}removeKeyframe(t){const e=this.keyframes.indexOf(t);return-1!==e&&(this.keyframes.splice(e,1),!0)}removeKeyframes(t){return function(t,e){if(!e.length)return!1;let i,n=!1;for(const s of t)if(i=e.indexOf(s),-1!==i&&(e.splice(i,1),n=!0,!e.length))return!0;return n}(t,this.keyframes)}getKeyframeAtOffset(t){return function(t,e){const i=e.length;for(let n=0;n<i;n++){const i=e[n];if(t===i.offset)return i;if(i.offset>t)return null}return null}(t,this.keyframes)}fixKeyframes(t){return function(t,e){let i=t.length;if(0===i)return!1;let n,s=t[0],r=!1;for(let o=1;o<i;o++)n=t[o],s.offset===n.offset?(e.has(s)&&!e.has(n)?t.splice(o,1):(t.splice(o-1,1),s=n,o--),i--,r=!0):s=n;return r}(this.keyframes,t)}getIndexOfKeyframe(t){return this.keyframes.indexOf(t)}addKeyframeAtOffset(t,e,i=null){let n=this.getKeyframeAtOffset(t);return null!=n?(null!=e&&this.setKeyframeValue(n,e),null!=i&&(n.easing=i),n):null==e?this.addKeyframe(new WE(this.getValueAtOffset(t),t,i)):this.addKeyframe(this.createKeyframe(e,t,i))}getValueAtOffset(t){return function(t,e,i){let n=e.length-1;if(-1===n)return null;if(0===n||i<e[0].offset)return t.cloneValue(e[0].value);if(i>=e[n].offset)return t.cloneValue(e[n].value);for(;i<e[n].offset;)n--;if(e[n].offset===i)return t.cloneValue(e[n].value);let s=r(i,e[n].offset,e[n+1].offset);return e[n].easing&&(s=e[n].easing.eval(s)),t.interpolate(e[n].value,e[n+1].value,s)}(this.animator.valueHandler,this.keyframes,t)}createKeyframe(t,e,i=null){return new WE(this.animator.valueHandler.cloneValue(t),e,i)}*[Symbol.iterator](){yield*this.keyframes}}class VE{constructor(t,e,i,n){this.group=t,this.title=e,this.property=i,this.icon=n}get id(){return this.property.id}get valueHandler(){return this.property.handler}setTargetValue(t,e){return this.property.setValue(t,e)}createAnimation(t,e){return new FE(this,t,e)}onAnimationAdded(t,e){return!1}onAnimationRemoved(t,e){return!1}onAnimationUpdated(t,e){return!1}}const GE=new Map;function HE(t){return GE.get(t)||null}function ZE(t,e){if(!GE.has(t))return null;const i=function(t,e){return pd.get(t?.constructor)?.get(e)||null}(e,t);return i&&GE.get(i.id)||null}const YE=new Map;function QE(t){const e=t?.constructor;if(!e)return!1;if(YE.has(e))return YE.get(e);for(const i of GE.values())if(vd(t,i.property))return YE.set(e,!0),!0;return YE.set(e,!1),!1}function JE(t){GE.set(t.id,t)}function qE(t,e,i,n){JE(new VE(t,e,i,n))}function KE(t,e){for(const[i,n,s]of e)qE(t,i,n,s)}const XE=1e-4,tO=new Map;function eO(t,e){return a(t,e,XE)}function iO(t,e){return eO(t.x,e.x)&&eO(t.y,e.y)}function nO(t,e){if(t){if(!e)return!1}else if(!e)return!0;return eO(t.x,e.x)&&eO(t.y,e.y)}function sO(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!iO(t[i],e[i]))return!1;return!0}function rO(t,e){return t.type===e.type&&t.joint===e.joint&&iO(t.point,e.point)&&nO(t.handleIn,e.handleIn)&&nO(t.handleOut,e.handleOut)}function oO(t,e){if(!e)return t;for(const i of t)i.offset+=e;return t}function aO(t,e,i){return t.map(((t,n)=>(t=t.clone(),i&&(t.easing=null),t.value=e(t.value,n),t)))}function lO(t){return t.clone()}function cO(t,e){e??=kt;let i=t.length-1;for(let n=2;n<=i;n++){const s=t[n-2],r=t[n-1],o=t[n];e(s.value,r.value)?(s.easing=null,e(r.value,o.value)&&(t.splice(n-1,1),n--,i--)):uO(s,r)}if(i>0){const n=t[i-1],s=t[i];e(n.value,s.value)?(t.pop(),i--):uO(n,s)}return t[i].easing=null,t}function uO(t,e){if(t.offset===e.offset)return void(t.easing=null);const i=t.easing?.func;i instanceof qD&&(i.isLinear?t.easing=null:t.easing.inverted&&(t.easing=new pE(i.inverse,!1)))}function hO(t,e){let i=t.length-1;const n=(s=e,tO.has(s)?tO.get(s):s.sameValue);var s;for(let s=2;s<=i;s++){const r=t[s-2],o=t[s-1];if(r.easing||o.easing)continue;const a=t[s],l=(o.offset-r.offset)/(a.offset-r.offset);n(o.value,e.interpolate(r.value,a.value,l))&&(t.splice(s-1,1),s--,i--)}return t}function*dO(t,e,i,n,s){if(!n)if(e){const t=1e3/e;n=e=>z(e,t)}else n=Math.round;const r=[],o=new Map;let a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let i=0;i<t.length;i++)if(t[i]instanceof FE){if(r[i]=null,o.set(i,t[i]),e){const e=t[i].keyframes;a=Math.min(a,e[0].offset),l=Math.max(l,e[e.length-1].offset)}}else r[i]=t[i];if(o.size)if(e)for(const t of function(t,e,i,n){const s=new Set;s.add(t);const r=1e3/i,o=Math.ceil((e-t)/r);for(let e=1;e<o;e++)s.add(n(t+e*r));return s.add(e),s}(a,l,e,n)){for(const[e,i]of o)r[e]=i.getValueAtOffset(t);yield new WE(i(r),t)}else{const t=new Set,e=new Set,a=function(t,e,i,n,s){const r=[];s&&r.push(...s);for(const s of t)r.push(...fO(s,e,i,n));return new Set(r.sort(ot))}(o.values(),t,e,n,s);let l;for(const n of a){if(t.has(n)){for(const[t,e]of o)r[t]=e.getValueAtOffset(n-.001);yield new WE(i(r),n)}if(e.has(n)){for(const[t,e]of o)r[t]=e.getValueAtOffset(l+.001);yield new WE(i(r),l)}for(const[t,e]of o)r[t]=e.getValueAtOffset(n);yield new WE(i(r),n),l=n}}else yield new WE(i(r),0)}function*fO(t,e,i,n){const s=t.keyframes;let r,o,a=s[0];for(let t=1;t<s.length;t++){yield a.offset;const l=s[t],c=a.easing;if(!c){a=l;continue}const u=l.offset-a.offset;for(const t of kE(c))yield n(a.offset+t*u);o=!1;for(const t of ME(c,!0))r=n(a.offset+t*u),yield r,o?e.add(r):o=!0;o&&e.add(l.offset),o=!1;for(const t of ME(c,!1))r=n(a.offset+t*u),yield r,o?i.add(r):o=!0;o&&i.add(l.offset),a=l}yield a.offset}function*pO(t,e,i,n,s,r,o){o??=Math.round,yield new WE(t,i);for(const a of r)(a.x!==a.y||0!==a.x&&1!==a.x)&&(yield new WE(s.interpolate(t,e,a.y),o(i+a.x*n)))}tO.set(Gh,eO),tO.set(Hh,eO),tO.set(Zh,eO),tO.set(Yh,eO),tO.set(od,(function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!eO(t[i],e[i]))return!1;return!0})),tO.set(Qh,iO),tO.set(nd,iO),tO.set(qh,iO),tO.set(Kh,(function(t,e){return eO(t.angle,e.angle)&&iO(t,e)})),tO.set(Jh,sO),tO.set(Xh,sO),tO.set(td,(function(t,e){return eO(t.r,e.r)&&eO(t.g,e.g)&&eO(t.b,e.b)&&eO(t.a,e.a)})),tO.set(ad,(function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!rO(t[i],e[i]))return!1;return!0}));const gO=new qD(new Be(.33,1),new Be(.83,1)),mO=gO.inverse;function*yO(t,e,i,n,s,r,o,a,l){if(l??=Math.round,a){yield new WE(t,i,new pE(mO.clone()));let a=[...JD(r,o)].reverse();for(const t of a)t[0]=1-t[0],t[1]=1-t[1];a.push([1,1]);let[c,u]=a.shift();for(const[r,o]of a){const a=(c+r)/2;yield new WE(s.cloneValue(e),l(i+n*c),new pE(gO.clone())),yield new WE(s.interpolate(t,e,u),l(i+n*a),new pE(mO.clone())),c=r,u=o}}else{yield new WE(t,i,new pE(gO.clone()));let a=0;for(const[c,u]of JD(r,o)){const r=(a+c)/2;yield new WE(s.interpolate(t,e,u),l(i+n*r),new pE(mO.clone())),yield new WE(s.cloneValue(t),l(i+n*c),new pE(gO.clone())),a=c}}}function vO(t,e,i=50){let n=!1;const s=t.keyframes;if(s[0].offset<0)if(s[0].offset>-i)s[0].offset=0;else{const e=[];for(const i of xO(s[0],s[1],0,s[1].offset))i<s[1].offset&&e.push(new WE(t.getValueAtOffset(i),i));s.shift(),s.unshift(...e),n=!0}const r=s.length-1;if(s[r].offset>e)if(s[r].offset-e<i)s[r].offset=e;else{const i=[];for(const n of xO(s[r-1],s[r],s[r-1].offset,e))n>s[r-1].offset&&i.push(new WE(t.getValueAtOffset(n),n));s[r-1].easing=null,s.pop(),s.push(...i),n=!0}return s[s.length-1].easing=null,n}function bO(t,e,i,n){const s=t.keyframes;return oO(s,-e),vO(t,i-e,n),oO(s,e),t}function*xO(t,e,i,n,s){if(yield i,!t.easing)return void(yield n);s??=Math.round;const r=e.offset-t.offset,o=NE(t.easing.func,t.easing.inverted);for(const e of o){const o=s(t.offset+e.x*r);o===i?0!==e.y&&(yield o):o===n?1!==e.y&&(yield o):o>i&&o<n&&(yield o)}yield n}class wO extends FE{#zg=null;#Ag=null;#Pg=null;#ot=0;get nodes(){return this.#zg??=this.#Dg()}get sizes(){return this.#Ag??=this.#Eg()}get lastAngle(){return this.#ot}#Dg(){const t=this.keyframes,e=t.length,i=new Array(e);for(let n=0;n<e;n++)i[n]=t[n].value;return i}#Eg(){const t=this.nodes;return xs(t,[0,t.length-1])[0]}#Og(t){const e=this.keyframes;if(t>=e.length-1)return null;const i=this.#Pg??=new Map;if(i.has(t))return i.get(t);const n=function(t,e,i=64,n){return 1!==t.joint&&t.handleOut?1!==e.joint&&e.handleIn?function(t,e,i,n,s,r){r??=bi(t,e,i,n,1);const o=[];let a;for(let r=1;r<s;r++)a=r/s,o.push(bi(t,e,i,n,a),a);return o.push(r,1),o}(t.point,t.handleOut,e.handleIn,e.point,i,n):ui(t.point,t.handleOut,e.point,i,n):1!==e.joint&&e.handleIn?ui(t.point,e.handleIn,e.point,i,n):null}(e[t].value,e[t+1].value,64,this.#Ag?.[t+1]);return i.set(t,n),n}invalidate(){this.#Pg?.clear(),this.#zg=this.#Ag=null}clone(t){const e=super.clone(t);return e.#zg=this.#zg,e.#Ag=this.#Ag,e.#ot=this.#ot,this.#Pg&&(e.#Pg=new Map(this.#Pg)),e}reverseKeyframes(t,e){if(super.reverseKeyframes(t,e)){t??=this.keyframes;for(const e of t)(e.value.handleIn||e.value.handleOut)&&(e.value=jn(e.value,e.value.handleOut,e.value.handleIn));return this.invalidate(),!0}return!1}removeKeyframe(t){return!!super.removeKeyframe(t)&&(this.invalidate(),!0)}removeKeyframes(t){return!!super.removeKeyframes(t)&&(this.invalidate(),!0)}removeKeyframeAtIndex(t){const e=super.removeKeyframeAtIndex(t);return e&&this.invalidate(),e}addKeyframe(t){if(this.keyframes.includes(t))return t;const e=super.addKeyframe(t);return this.invalidate(),e}fixKeyframes(t){return!!super.fixKeyframes(t)&&(this.invalidate(),!0)}setKeyframeValue(t,e){super.setKeyframeValue(t,this.#Rg(e,t.value)),this.invalidate()}setKeyframeEasing(t,e,i){return!!super.setKeyframeEasing(t,e,i)&&(this.invalidate(),!0)}sortKeyframes(t){const e=this.keyframes,i=e.slice();super.sortKeyframes(t);for(let t=0;t<i.length;t++)if(i[t]!==e[t])return void this.invalidate()}#Wg(t,e=!0){const i=this.keyframes;let n=i.length-1;if(-1===n)return null;if(0===n||t<i[0].offset)return 0;if(t>=i[n].offset)return n;for(;t<i[n].offset;)n--;if(i[n].offset===t)return n;let s=r(t,i[n].offset,i[n+1].offset);if(e&&i[n].easing&&(s=i[n].easing.eval(s)),0===s||1===s)return n+s;const o=this.sizes;let a=o[n+1]-o[n],l=s*a;if(s<0){const t=o[n]+l;if(0===t)return 0;if(t<0)return 0===o[1]?0:[0,t/o[1],!1];for(;--n>=0&&o[n]>t;);if(o[n]===t)return n;a=o[n+1]-o[n],l=t-o[n]}else if(s>1){const t=o[n]+l,e=i.length-1;if(t===o[e])return e;if(t>o[e])return o[e]===o[e-1]?e:[e-1,(t-o[e-1])/(o[e]-o[e-1]),!1];for(;++n<=e&&o[n]<t;);if(o[n]===t)return n;n--,a=o[n+1]-o[n],l=t-o[n]}if(a<=0)return[n,0,!0];const c=this.#Og(n);return[n,c?vn(c,l):l/a,!1]}getValueAtOffset(t){const e=this.#Wg(t,!0);if(null===e)return this.#ot=0,null;const i=this.keyframes;if("number"==typeof e)return this.#ot=this.#Bg(e),i[e].value;if(e[2])return this.#ot=0,i[e[0]].value.point;if(e[1]<0){const t=wn(i[0].value,i[1].value,-e[1]*this.sizes[1],!0);return this.#ot=t[1]*pe,t[0]}if(e[1]>1){const t=i.length-1,n=this.sizes,s=wn(i[t-1].value,i[t].value,(e[1]-1)*(n[t]-n[t-1]),!1);return this.#ot=s[1]*pe,s[0]}const{x:n,y:s,angle:r}=(o=i[e[0]].value,a=i[e[0]+1].value,l=e[1],1!==o.joint&&o.handleOut?1!==a.joint&&a.handleIn?function(t,e,i,n,s){return{x:di(t.x,e.x,i.x,n.x,s),y:di(t.y,e.y,i.y,n.y,s),angle:yi(t,e,i,n,s)*pe}}(o.point,o.handleOut,a.handleIn,a.point,l):ri(o.point,o.handleOut,a.point,l):1!==a.joint&&a.handleIn?ri(o.point,a.handleIn,a.point,l):function(t,e,i){return{x:$e(t.x,e.x,i),y:$e(t.y,e.y,i),angle:Fe(t,e)*pe}}(o.point,a.point,l));var o,a,l;return this.#ot=r,new Be(n,s)}#Bg(t,e){const i=this.keyframes,n=i.length-1;return n<=0?0:(t>=n&&(t=n-1,e=1),s=i[t].value,r=i[t+1].value,o=e??0,(1!==s.joint&&s.handleOut?1!==r.joint&&r.handleIn?yi(s.point,s.handleOut,r.handleIn,r.point,o):ni(s.point,s.handleOut,r.point,o):1!==r.joint&&r.handleIn?ni(s.point,r.handleIn,r.point,o):Fe(s.point,r.point))*pe);var s,r,o}getOrientationAtOffset(t){const e=this.#Wg(t,!0);return null==e?0:"number"==typeof e?this.#Bg(e):e[2]?0:this.#Bg(e[0],e[1])}addKeyframeAtOffset(t,e=null,i=null){if(null==e||e instanceof Be){const n=this.getKeyframeAtOffset(t);if(n)return null==e||(n.value=Un(n.value,e.x,e.y),null!=i&&(n.easing=i),this.invalidate()),n;const s=this.keyframes,r=s.length-1;if(r<0)return null==e?null:this.addKeyframe(new WE(this.#Rg(e),t,i));if(t<s[0].offset)return this.addKeyframe(new WE(this.#Rg(e||s[0].value.point),t,i));if(t>s[r].offset)return this.addKeyframe(new WE(this.#Rg(e||s[r].value.point),t,i));const[o,a]=this.#Wg(t,!1),l=Mn(s[o].value,s[o+1].value,a);s[o].value=l[0];const c=e?Un(l[1],e.x,e.y):l[1];return s[o+1].value=l[2],this.addKeyframe(new WE(c,t,i))}return super.addKeyframeAtOffset(t,e,i)}createKeyframe(t,e,i=null){return t instanceof Be&&(t=this.#Rg(t)),super.createKeyframe(t,e,i)}#Rg(t,e){return t instanceof fn?t:e?Un(e,t.x,t.y):new fn(t,0,0,null,null)}}class MO extends VE{createAnimation(t,e){return new wO(this,t,e)}onAnimationUpdated(t,e){return t.setAutoOrientAngle(e.lastAngle)}onAnimationRemoved(t,e){return t.setAutoOrientAngle(0)}}class SO{[Symbol.iterator](){return this.map.values()}constructor(t){this.fps=60,this.duration=1e3,this.map=new Map,this.id=t||Ct()}isAnimated(t){return this.map.has(t)}getEntry(t){return this.map.get(t)||null}addEntry(t){if(this.map.has(t))return this.map.get(t);const e=new EE(t);return this.map.set(t,e),e}removeEntry(t){const e=this.map.get(t);return!!e&&(this.map.delete(t),e.removeAllAnimations(),e.dispose(),!0)}getAnimation(t,e){return this.map.get(t)?.getAnimation(e)}createAnimation(t,e){const i=ZE(e,t);return i?i.createAnimation():null}addAnimation(t,e){if(!this.map.has(t)){const i=new EE(t,[e]);return this.map.set(t,i),!0}return this.map.get(t).animations.push(e),!0}removeAnimation(t,...e){const i=this.map.get(t);if(!i)return!1;if(0===e.length){if(!i.removeAllAnimations())return!1}else if(!i.removeAnimations(e))return!1;return i.isRemovable&&(this.map.delete(t),i.dispose()),!0}updateTarget(t,e,i){const n=this.map.get(t);if(!n)return!1;const s=n.getAnimation(e);return!!s&&n.evalAnimation(s,i)}eval(t){if(!this.map.size)return!1;let e=!1;for(const i of this.map.values())i.eval(t)&&(e=!0);return e}copy(t,e){const i=new SO(this.id);i.title=this.title,i.fps=this.fps,i.duration=this.duration;for(const n of this.map.values()){const s=t.find(n.target.id);s&&i.map.set(s,n.copy(s,e))}return i}targets(){return this.map.keys()}toJSON(){return{id:this.id,title:this.title||void 0,fps:this.fps,duration:this.duration,animated:this.map.size?[...this.map.values()]:void 0}}applyJSON(t,e){const i=t.startTime||0,n=t.endTime??i+3e3;this.title=t.title,this.duration=t.duration||n-i,this.fps=t.fps||60,_O(t.animated,this.map,e,null,-i)}dispose(){if(this.map){for(const t of this.map.values())t.dispose();this.map.clear(),this.map=this.title=null}}}const kO=new Map;function _O(t,e,i,n,s){if(!t?.length)return!1;let r=!1;for(const o of t){if(!o)continue;let t=o.id;if(n&&(t=n.get(t)),!t)continue;const a=i.find(t);if(!a||e.has(a)||!QE(a))continue;const l=[],c=o.animations;if(c?.length)for(const t of c){const e=t.keyframes;if(!e?.length)continue;if(s)for(const t of e)t.offset+=s;let i=t.animator;if(kO.has(i)){const e=kO.get(i);if(i=e[0],l.find((t=>t.animator.id===i)))continue;if(e[1])for(const i of t.keyframes)i.value=e[1](i.value)}const n=ZE(i,a);if(!n)continue;const r=n.createAnimation(e,t.disabled);r&&l.push(r)}const u=new EE(a,l,o.in,o.out);u.isRemovable?u.dispose():(e.set(a,u),r=!0)}return r}class IO extends rg{constructor(){super(...arguments),this.main=null}copy(t){const e=new IO;e.main=this.main;for(const i of this.all())e.add(i.copy(t,!1));return e}toJSON(){if(this.size)return{main:this.main,list:[...this.all()]}}static fromJSON(t,e){const i=new this(function*(t,e){if(t?.length)for(const i of t){const t=new SO(i.id);t.applyJSON(i,e),yield t}}(t?.list,e.content.document));return i.main=t?.main||null,i}}const CO=Symbol(),LO=Symbol(),NO=Symbol(),jO=Symbol(),TO=Symbol(),zO=Symbol(),AO=Symbol(),PO=Symbol();let DO=null,EO=null;function OO(t){t.title??="Main";const e=new IO;return e.add(t),e.main=t.id,e}Uo({id:"timeline",deps:["document"],priority:100,init:t=>(t||(t=new SO),t instanceof SO?OO(t):t),copy:(t,e)=>t.copy(e),delete:null,update(t){DO=t},serialization:ra(100,(()=>DO),((t,e)=>t?t instanceof SO?OO(t):t instanceof IO?t:IO.fromJSON(t,e):OO(new SO)))}),$o({id:"selected-timeline",priority:100,get:()=>EO?.id||null,set(t){t??=DO?.main,EO=t&&DO?.has(t)?DO.get(t):null}});class RO{#Ug=0;start(){this.#Ug=this.#$g()}hasChanged(){return this.#Ug!==this.#$g()}#$g(){if(!EO)return 0;let t=0;for(const e of EO)t+=e.countKeyframes();return t}}const WO=ja(LO),BO=new Set;function UO(){return!BO.size}function $O(){return!!BO.size&&(BO.clear(),WO(),!0)}function FO(t){return BO.has(t)}function VO(t){return!!BO.has(t)&&(BO.delete(t),WO(),!0)}function GO(t){if(!BO.size)return!1;let e=BO.size,i=!1;for(const n of t)if(BO.delete(n)&&(i=!0,0==--e))break;return!!i&&(WO(),!0)}function HO(t){if(!BO.size)return!1;let e=BO.size,i=!1;for(const n of t)for(const t of n.keyframes)if(BO.delete(t)&&(i=!0,0==--e))return!0;return!!i&&(WO(),!0)}function ZO(t,e){let i=!1;!e&&BO.size>0&&(BO.clear(),i=!0);for(const e of t)BO.has(e)||(BO.add(e),i=!0);return!!i&&(WO(),!0)}function YO(t,e){const i=BO.has(t);return e?!i&&(BO.add(t),WO(),!0):!(i&&1===BO.size||(BO.clear(),BO.add(t),WO(),0))}function QO(t){return t.id}$o({id:"keyframe-selection",priority:200,get:function(){return BO.size?[...BO].map(QO):null},set:function(t){if(BO.clear(),!t?.length)return;const e=new Set(t);for(const t of EO)for(const i of t.animations)if(!i.disabled)for(const t of i.keyframes)if(e.has(t.id)&&(BO.add(t),e.delete(t.id),!e.size))return}}),Io(CO,$O),Io(jO,(([t,e])=>{t===EO&&HO(e)})),Io(Zt,(()=>{BO.size&&Au()&&HO(function*(){for(const[t,e]of EO.map.entries())Vu(t)||(yield*e.animations)}())}));let JO=0,qO=!1,KO=!0,XO=!1,tR=1;const eR=[0,0];let iR=!1;const nR=new Set;function sR(t,e){if(nR.has(e))return!1;nR.add(e);try{return e.eval(t)}finally{nR.delete(e)}}function rR(t){return t=iR?n(t,eR[0],eR[1]):n(t,0,EO.duration),EO?function(t){return z(t,1e3/EO.fps)}(t):t}function oR(t,e){t??=JO,e&&(t=rR(t)),t!==JO&&(JO=t,_o(NO,JO)),EO&&sR(JO,EO)&&fR()}function aR(t,e){e<t&&([t,e]=[e,t]),t<0&&(t=0),e>EO?.duration&&(e=EO.duration),eR[0]=t,eR[1]=e,iR=t!==e}function lR(){eR[0]=eR[1]=0,iR=!1}function cR(){return iR?eR:[0,EO.duration]}Io(Bt,(t=>{let e=0;0===t?(lR(),XO=!1,tR=1,KO=!0):(iR&&aR(eR[0],eR[1]),e=rR(JO)),oR(e,!1)})),Io(CO,(()=>{lR()}));let uR=0;function hR(){if(qO)return;qO=!0,_o(PO,!0),Hl(!0);let t=JO;const[e,i]=cR(),n=1e3/EO.fps;(t<e||t>=z(i-n,n))&&(t=e,oR(t,!1));let s=null,r=null;uR=requestAnimationFrame((function o(a){r??=a;let l=z(t+(a-r)*tR,n);if(l>=i){if(!KO){const t=z(i-n,n);return t!==JO&&oR(t,!1),dR()}l=e,r=null,t=e}l!==s&&(s=l,l!==JO&&oR(l,!1)),uR=requestAnimationFrame(o)}))}function dR(){qO&&(uR&&(cancelAnimationFrame(uR),uR=0),Hl(!1),qO=!1,_o(PO,!1),fR())}function fR(){kd(Rp)}const pR=new zs([]),gR=new Set;let mR=null,yR=null;function vR(){let t=rh();if(t?.isTransformable||(t=null),t===mR){const e=MR(t);return e!==yR&&(yR=e,SR(),!0)}return mR=t,yR=MR(t),SR(),!0}function bR(){if(gR.clear(),yR)for(let t=0,e=yR.keyframes.length;t<e;t++)FO(yR.keyframes[t])&&gR.add(t)}function xR(){if(!yR)return null;const t=[];for(const e of yR.keyframes)FO(e)&&t.push(e);return t}function wR(){if(!yR)return;const t=yR.getKeyframeAtOffset(JO);t&&YO(t,!1)}function MR(t){if(!t)return null;const e=EO.getAnimation(t,Ad.id);return!e||e.disabled?null:e}function SR(t){t&&!yR&&mR&&(yR=MR(mR));const e=pR.nodes;if(!yR)return gR.clear(),void(e.length&&(e.splice(0),pR.invalidate()));let i=!1;const n=yR.keyframes;if(n.length!==e.length){e.splice(0);for(let t=0,i=n.length;t<i;t++)e.push(n[t].value);i=!0}else for(let t=0,s=e.length;t<s;t++)e[t].equals(n[t].value)||(e[t]=n[t].value,i=!0);i&&(pR.invalidate(),bR())}const kR=[0,null];function _R(t){return null!=t.percent?rl?"node-add":"node-mold":null!=t.handle?rl?"node-sub":"node-move":rl&&!nl?"node-sub":"node-move"}function IR(t,e){return t.element===e.element&&t.index===e.index&&t.handle===e.handle&&!(!t.node||!e.node)&&t.node.equals(e.node)}function CR(){if(pR.isEmpty)return;const t=wu(mR);CL(pR.path,t),zL(pR.nodes,gR,t),jL(pR.nodes,gR,t)}function LR(t,e){return a(t,e)?1:a(t,0)||a(e,0)?t>e?1:-1:t/e}function NR(t,e,i){return Be.fromDirection(t.getDirectionTo(e),t.distanceTo(e)+i,t)}function jR(t){const e=wu(t);return e?e.transformPoint(t.position):t.position}function TR(t,e){const i=tu("transform-origin-radius"),n=Xc("transform-origin"),s=jR(e);let r=null;const o=e.totalRotate%360*Math.sign(e.globalMatrix.a*e.globalMatrix.d);o&&(r=(new $i).translate(s.x,s.y).rotate(o).translate(-s.x,-s.y));const a=1.5*i,l=ki.fromPoints([{x:s.x,y:s.y-a},{x:s.x+a,y:s.y},{x:s.x,y:s.y+a},{x:s.x-a,y:s.y}],r);t.drawCircle(s,1.1*i,Kc("transform-origin-bg")),t.drawCircle(s,i,n),t.drawLine(l.points[0],l.points[2],n),t.drawLine(l.points[1],l.points[3],n)}class zR extends ng{#Fg=0;get seek(){return this.#Fg}set seek(t){this.#Fg!==t&&(this.#Fg=t,this.invalidate())}getReferencePictureOptions(){return{time:this.#Fg,relative:!0}}cloneProperties(t){super.cloneProperties(t),t.#Fg=this.#Fg}applyJSON(t){this.#Fg=t.seek||0,super.applyJSON(t)}toJSON(){const t=super.toJSON();return this.#Fg&&(t.seek=this.#Fg),t}}const AR="timeline-folding",PR=ja(AO);function DR(t){return t??=ia,t[AR]??=new Set}function ER(t){return!DR().has(t.id)}function OR(t,e,i){if(!t.size)return!1;let n=!1;i&&t.has(e.id)&&(t.delete(e.id),n=!0);let s=e.parent;for(;s&&!s.isDocument;)t.has(s.id)&&(t.delete(s.id),n=!0),s=s.parent;return n}function RR(t){if(!t)return function(){const t=DR();return!!t.size&&(t.clear(),PR(),!0)}();const e=DR(),i=e.size;for(const t of sh())OR(e,t,!0);return i!==e.size&&(PR(),!0)}function WR(t){const e=DR(),i=e.size;if(!t){for(const t of EO.targets())e.has(t.id)||e.add(t.id);for(const t of su.children())e.has(t.id)||e.add(t.id)}for(const t of sh())e.has(t.id)||e.add(t.id);return i!==e.size&&(PR(),!0)}Ro({id:AR,serialization:ra(101,(function(){!function(){const t=DR();for(const e of t)su.find(e)||t.delete(e)}();const t=DR();return t.size?t:null}))});const BR=new Map([[Qp,[function(t,[,,e]){return[Ud.getValue(t),e instanceof FE||!e.isZero]},function([t,e,i],[n,s]){const r=function(t,e,i){return t.isZero?Be.ZERO:new Be(-t.x*e,-t.y*i)}(n,t,e);return Cs(r.x,r.y,t,e,i.value,!s)},[Wf,Bf,Uf]]],[Vp,[function(t){return Ud.getValue(t)},function([t,e],i){const n=function(t,e,i){return Hs(t)?Be.ZERO:new Be(e*(.5-t.x),i*(.5-t.y))}(i,t,e);return function(t,e,i,n){const s=i/2,r=n/2,o=s*Ss,a=r*Ss;return[Cn(1,new Be(t+s,e),new Be(t+s,e-a),new Be(t+s,e+a)),Cn(0,new Be(t,e+r),new Be(t+o,e+r),new Be(t-o,e+r)),Cn(0,new Be(t-s,e),new Be(t-s,e+a),new Be(t-s,e-a)),Cn(3,new Be(t,e-r),new Be(t-o,e-r),new Be(t+o,e-r))]}(n.x,n.y,t,e)},[Ff,Vf]]],[Yp,[null,function([t,e]){return Ls(t,e)},[Kf,Xf]]],[qp,[null,function([t]){return Ls(t,!1)},[Jf]]],[Jp,[function(t,[,,,e]){return[Ud.getValue(t),e instanceof FE||0!=e]},function([t,e,i,n],[s,r]){return VR(js(t,i,n,e,!r),s)},[ip,rp,np,sp]]],[Kp,[function(t,[,,,,,,e,i]){return[Ud.getValue(t),e instanceof FE||0!=e||i instanceof FE||0!=i]},function([t,e,i,n,s,r,o,a],[l,c]){return VR(Ns(t,i,n,o,a,s,r,e,!c),l)},[ap,pp,cp,lp,fp,dp,hp,up]]]]);function UR(t){return BR.has(t.constructor)?BR.get(t.constructor)[2]:null}function $R(t,e,i){if(!BR.has(t.constructor))return null;const[n,s]=BR.get(t.constructor);return FR(e,s,n?.(t,e),i)}function FR(t,e,i,n){n??=60;const s=[...dO(t,n,(t=>e(t,i)),It)];s.length>1&&(cO(s),hO(s,ad));const r=1e3/n;for(const t of s)t.offset=z(t.offset,r);return cO(s),s}function VR(t,e){if(Hs(e))return t;const i=Gs(e,function(t){return wi.fromIterablePoints(function*(t){let e=null,i=null;for(const n of t)e&&1!==n.type?(yield*mn(e,n),3===n.type&&(yield*mn(n,i)),e=n):i=e=n}(t),void 0)}(t));return i.isZero?t:Zn(t,i.x,i.y)}function GR(t,e=!1){return HE($d.id).createAnimation(t,e)}const HR=new Map([[$d.id,function(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(!In(t[i],e[i]))return!1;return!0}],[Kf.id,Ys.canInterpolatePoints]]),ZR=new Map([[Ad.id,(t,e)=>{if(!t)return null;let i=e.parent?.globalMatrix;return!i||i.isIdentity?null:(i=i.clone().inverse(),t=>{let e=t.value;e=e instanceof fn?Ln(e,i):i.point(e.x,e.y),t.value=e})}]]);function YR(t,e=null,i=!1,n){if(!EO||UO())return;let s=BO.size;for(const r of EO){const o=n?[...r.animations]:r.animations;for(const n of o){if(n.disabled)continue;let o=null;for(const t of n.keyframes)if(FO(t)&&((o??=[]).push(i?t.clone():t),0==--s))break;if(o?.length){if(o.sort(UE),null!=e){const t=e-o[0].offset;if(0!==t)for(const e of o)e.offset+=t}if(!1===t(r,n,o))return}if(s<=0)return}}}function QR(){if(UO())return!1;Jo();let t=null,e=!1;if(YR(((i,n,s)=>{n.removeKeyframes(s)&&(e=!0),n.hasKeyframes?i.evalAnimation(n,JO):(i.removeAnimation(n.animator.id),i.isRemovable&&(t??=[]).push(i),e=!0)}),null,!1,!0),$O(),t?.length)for(const e of t)EO.map.delete(e.target),e.dispose();return e&&_o(TO),!0}function JR(t){if(UO())return!1;Jo();let e=!1;return YR(t?(i,n,s)=>{if(0===s.length)return;let r=!1;for(const e of s)qR(n,e)&&n.setKeyframeEasing(e,t,!0)&&(r=!0);r&&(e=!0,i.evalAnimation(n,JO))}:(t,i,n)=>{if(0===n.length)return;let s=!1;for(const t of n)qR(i,t)&&i.setKeyframeEasing(t,null)&&(s=!0);s&&(e=!0,t.evalAnimation(i,JO))},null,!1),e&&_o(TO),e}function qR(t,e){const i=function(t,e){const i=e.indexOf(t);return i<=0?null:e[i-1]}(e,t.keyframes);if(!i)return!0;const n=BE(e,t.keyframes);return n&&FO(n)||!FO(i)}function KR(t,e,i){const n=t.map;if(!n.has(e)||n.has(i)||!QE(i))return!1;const s=[],r=n.get(e);for(const t of r.animations)a=i,(o=t.animator)===ZE(o.id,a)&&s.push(t.clone(!0));var o,a;return!(0===s.length&&!r.hasInOut||(n.set(i,new EE(i,s,r.in,r.out)),0))}function XR(t,e,i){const n=t.getEntry(e);if(!n||!ZE($d.id,i))return!1;const s=function(t,e,i){if(t instanceof Yp||t instanceof qp)return function(t,e){if(!e)return null;let i,n=!1;t instanceof Yp?(i=Kf,n=t.isClosed):i=Jf;const s=e.getAnimation(i.id);if(!s)return null;const r=GR(s.keyframes.map((t=>new WE(Ls(t.value,n),t.offset,t.easing?.clone()))),s.disabled);return e.removeAnimation(i.id),r}(t,e);if(!BR.has(t.constructor))return null;const[n,s,r]=BR.get(t.constructor),o=function(t,e,i,n,s,r){const o=[];for(const n of i){const i=e?.getAnimation(n.id);i&&!i.disabled?1===i.length?o.push(i.keyframes[0].value):o.push(i):o.push(n.getValue(t))}return FR(o,s,n?.(t,o),r)}(t,e,r,n,s,i);if(!o)return null;if(e)for(const t of r)e.removeAnimation(t.id);return GR(o,!1)}(e,n,t.fps);return!!s&&(1===s.keyframes.length?$d.setValue(i,s.keyframes[0].value):t.addAnimation(i,s))}function tW(t,e,i){if(function(t,e,i){const n=t.map;!n.has(e)||e===i||e.type!==i.type||n.has(i)||n.set(i,n.get(e).copy(i,!0))}(t,e,i),e.supportsFilters&&e.filters&&tW(t,e.filters,i.filters),!e.supportsChildren||!e.hasChildren)return;const n=[...i.children()];for(const i of e.children())tW(t,i,n.shift())}function eW(t,e){t.isAnimated(e)&&iW(t,e);for(const i of[...t.targets()])e.contains(i)&&iW(t,i)}function iW(t,e){const i=t.getEntry(e);i&&(t===EO&&HO(i.animations),t.removeEntry(e))}function nW(t,e,i){let n=!1;for(const s of i){const i=t.getAnimation(e,s);i&&(GO(i.keyframes),t.removeAnimation(e,s),n=!0)}return n}function sW(t,e,i){if(!t.isAnimated(e))return;let n=0;for(const s of i){KR(t,e,s);const i=t.getAnimation(s,$d.id);if(i){const t=s.nodes.length;for(const e of i.keyframes)e.value=e.value.slice(n,n+t);n+=t}}}const rW=new Map([["opacity",[Nd]],["position",[Ad]],["anchor",[Pd]],["scale",[Dd]],["rotate",[Ed]],["skewAngle",[Od]],["skewAxis",[Rd]],["fill",[Yd]],["fillOpacity",[Zd]],["strokeBrush",[qd]],["strokeOpacity",[Jd]],["strokeLineWidth",[Kd]],["strokeDashArray",[nf]],["strokeDashOffset",[sf]],["nodes",[$d]],["points",[Jf,Kf]],["width",[Ff,Wf,Zf]],["height",[Vf,Bf,Yf]],["radius",[Uf,np]],["sides",[ip,ap]],["angle",[rp,pp]],["cornerRadius",[sp]],["outerRadius",[lp]],["innerRadius",[cp]],["outerCornerRadius",[up]],["innerCornerRadius",[hp]],["outerRotate",[dp]],["innerRotate",[fp]]]);function oW(t,e){if(!rW.has(t))return null;for(const i of rW.get(t))if(vd(e,i))return HE(i.id);return null}function aW(t,e=!1){return function(){return pE.fromJSON([t,e])}}function lW(t){return function(e){const i=e.shape;if(!i.isDistorted)return t.fromJSON(e);const n=zs.fromSkPath(i.convertToPath(),!0);return i.dispose(),e.shape=n,Zp.fromJSON(e)}}function cW(t,e){const i=Yg.fromJSON(t);let n;if(t.timeline){n=new SO,n.applyJSON(t.timeline,i);const s=t.timeline.collapsed;s&&(e.global["timeline-folding"]=s)}else t.animationMap&&(n=new SO,function(t,e,i){const n=i.startTime||0,s=i.endTime||n+3e3;t.duration=s-n,t.fps=30;const r=i.animations;if(!r)return;const o=t.map;for(const[t,i]of Object.entries(r)){if(!i?.length)continue;const n=e.find(t);if(!n||!QE(n)||o.has(n))continue;const s=[];for(const t of i){const e=t?.keyframes;if(!e?.length)continue;const i=oW(t.property,n);if(!i)continue;const r=i.createAnimation(e,t.disabled);r&&s.push(r)}s.length>0&&o.set(n,new EE(n,s))}}(n,i,t.animationMap));if(t.grid&&(e.content.grid=t.grid),t.guides&&(e.content.guides=t.guides),t.artboards){const i=t.artboards;e.content.board=i.first.bounds,i.dispose(),delete t.artboards}else t.board&&(e.content.board=t.board);return n&&(e.content.timeline=n),i}J([pE,"Easing"],[WE,"Keyframe"]),K(zR,null,null,"SymbolElement",!0),Q("ConicalGradientBrush",(function(){return Hi.BLACK})),Q("StyledTextElement",(function(t){if(t.children){for(const e of t.children)e.dispose();delete t.children}return Sg.fromJSON(t)})),Q("TextElement",(function(t){const e=t.paragraph,i=e.blocks.shift(),n=e.source,s=e.matrix;t.paragraph=new Vr(n,e.style,i),e.dispose();const r=Sg.fromJSON(t);return s&&!s.isIdentity&&r.setTransformMatrix(s.preMultiply(r.localMatrix)),r})),Q("RectElement",lW(Qp)),Q("EllipseElement",lW(Vp)),Q("RegularPolygonElement",lW(Jp)),Q("StarElement",lW(Kp)),Q("Document",cW),Q("AnimationDocument",cW),Q("SingleBoardDocument",cW),Q("AnimatedSymbolElement",(t=>zR.fromJSON(t))),Q("LinearEasing",(()=>null)),Q("StepStartEasing",aW("step")),Q("StepEndEasing",aW("step",!0)),Q("CubicEaseIn",aW("ease")),Q("CubicEaseOut",aW("ease",!0)),Q("CubicEaseInOut",aW("ease-both")),Io(TO,(()=>{qO||kd(Rp)})),Io(Vt,(t=>{for(const e of DO)eW(e,t)})),Io(Ht,(function([t,e]){for(const i of DO)tW(i,t,e)})),Io(Gt,(function([t,e]){for(const i of DO)KR(i,t,e),XR(i,t,e)}));const uW=[$d.id];Io(he,(function(t){for(const e of DO)nW(e,t,uW)}));const hW=Object.values(Bd).map((t=>t.id));var dW,fW;function pW(t){return!t.disabled&&t.animator.id.startsWith("node.transform.")}Io(ce,(function(t){for(const e of DO)nW(e,t,hW)})),Io(ue,(function([t,e]){for(const i of DO)sW(i,t,e)})),Io(ae,(t=>{const e=t.content?.document;e&&Bg(e)})),Io(le,(t=>{for(const e of t)Bg(e);fh(t)})),dW=function(t,e,i){const n=JO;let s=EO?.getAnimation(t,e.id),r=!1;if(s){if(s.disabled)return e.setValue(t,i)}else{if(!XO||!QE(t))return e.setValue(t,i);if(s=EO.createAnimation(t,e.id),!s||!EO.addAnimation(t,s))return e.setValue(t,i);0!==n&&(s.addKeyframeAtOffset(0,e.getValue(t)),r=!0)}let o=s.getKeyframeAtOffset(n);if(o){if(e.handler.sameValue(o.value,i)){const e=s.animator.setTargetValue(t,i);return r&&_o(TO),e}s.setKeyframeValue(o,i)}else s.addKeyframeAtOffset(n,i),r=!0;return s.animator.setTargetValue(t,i),s.animator.onAnimationUpdated(t,s),r&&_o(TO),!0},_d=dW,fW=function(t,e){if(!t.isTransformable)return!1;const i=EO.getEntry(t);if(!i||!i.animations.find(pW))return t.setTransformMatrix(e);let{translate:n,rotate:s,scale:r,skew:o}=e.decompose();const a=e.transformInversePoint(n.sub(t.position).negate(),!1);s-=t.autoOrientAngle;let l=!1;return Cd(t,Ed,s)&&(l=!0),Cd(t,Od,o)&&(l=!0),Cd(t,Rd,0)&&(l=!0),Cd(t,Dd,r)&&(l=!0),Cd(t,Pd,a)&&(l=!0),l},Cg=fW,Io(Et,(()=>{qE("node.compositing","Opacity",Nd,"workflow:Transparency"),JE(new MO("node.transform","Position",Ad,"workflow:Crosshairs")),KE("node.transform",[["Anchor",Pd,"workflow:Anchor"],["Rotate",Ed,"expr:rotate"],["Scale",Dd,"expr:size"],["Skew Angle",Od,"expr:skew"],["Skew Axis",Rd,"expr:guidelines-toggle"]]),KE("Motion",[["Travel",Gd],["OrientedPoint",Hd]]),KE("vector.fill",[["Fill Color",Yd,"workflow:ColorFill"],["Fill Opacity",Zd,"workflow:Transparency"]]),KE("vector.stroke",[["Stroke Color",qd,"workflow:ColorFill"],["Stroke Opacity",Jd,"workflow:Transparency"],["Stroke Width",Kd,"workflow:StrokeWidth"],["Dash Offset",sf,"expr:dash-offset"],["Dash Array",nf,"expr:dash-gap"]]),KE("element",[["Morph",$d,"expr:path"],["Seek",Pf],["Width",Ff,"workflow:MoveLeftRight"],["Height",Vf,"workflow:MoveUpDown"],["Width",Zf,"workflow:MoveLeftRight"],["Height",Yf,"workflow:MoveUpDown"],["Points",Jf,"expr:line-tool"],["Points",Kf,"expr:polyline-tool"],["Width",Wf,"workflow:MoveLeftRight"],["Height",Bf,"workflow:MoveUpDown"],["Radius",Uf,"expr:roundness"],["Radius",np,"expr:radius"],["Roundness",sp,"expr:roundness"],["Angle",rp,"expr:angle"],["Outer Radius",lp,"expr:radius"],["Inner Radius",cp,"expr:radius"],["Outer Roundness",up,"expr:roundness"],["Inner Roundness",hp,"expr:roundness"],["Outer Rotate",dp,"expr:rotate-star"],["Inner Rotate",fp,"expr:rotate-star"],["Angle",pp,"expr:angle"]]),KE("filter",[["Blur",kp,"workflow:Blur"],["Brightness",Ip],["Contrast",Cp],["Saturate",Lp],["Hue rotate",Np],["Invert",jp],["Grayscale",Tp],["Sepia",zp],["Offset",Dp,"workflow:Move"],["Blur",Pp,"workflow:Blur"],["Color",Ep,"workflow:ColorFill"]])}));const gW=Na((function(t){if(UO())return!1;const e=rh();if(!e||!e.isTransformable)return!1;const i=EO.getAnimation(e,Ad.id);if(!i||i.disabled)return!1;let n=!1;for(const e of i)FO(e)&&e.value.joint!==t&&(n||(Jo(),n=!0),e.value=An(e.value,t));if(n){i.invalidate();const t=EO.getEntry(e);t.isInOutVisible(JO)&&t.evalAnimation(i,JO)}return n})),mW=Na(JR),yW=Na((()=>JR(null))),vW=Na(QR),bW=Na((function(t){if(UO())return!1;Jo();const e=[],i=1e3/EO.fps;return YR(((n,s,r)=>{t&&$E(r,!1);for(let t of r)t.offset=z(t.offset,i),t=s.addKeyframe(t),e.push(t);n.evalAnimation(s,JO)}),JO,!0),0!==e.length&&(_o(TO),ZO(e),!0)})),xW=Na((function(){if(UO())return!1;Jo();let t=!1;return YR(((e,i,n)=>{i.reverseKeyframes(n,!1)&&(e.evalAnimation(i,JO),t=!0)}),null,!1),t&&_o(TO),t})),wW=Na((function(t,e){if(lh()||!EO)return!1;Jo();let i=!1;for(const n of Th(QE)){if(null!=EO.getAnimation(n,t.id))continue;const s=EO.createAnimation(n,t.id);s&&(s.addKeyframeAtOffset(e,t.property.getValue(n)),EO.addAnimation(n,s)&&(ZO(s.keyframes,i),i=!0))}return i&&_o(TO),i})),MW=Na((function(t,e,i){if(e.disabled)return!1;Jo();let n=e.getKeyframeAtOffset(i);return n?(YO(n,!1),!1):(n=e.addKeyframeAtOffset(i,null),t.evalAnimation(e,i),YO(n),!0)})),SW=Na((function(t,e,i){const n=EO.createAnimation(t,e.id);return!!n&&(n.addKeyframeAtOffset(i,e.property.getValue(t)),!!EO.addAnimation(t,n)&&(Jo(),_o(TO),dh(t,!1),ZO(n.keyframes,!1),!0))})),kW=Na((function(t){let e=EO.getEntry(t);if(e){if(e?.hasInOut)return!1}else{if(!QE(t))return!1;e=EO.addEntry(t)}return!!e.setInOut(0,EO.duration)&&(Jo(),e.evalVisibility(JO),_o(TO),dh(e.target),!0)})),_W=Na((function(t){const e=EO.getEntry(t);return!(!e||!e.hasInOut||!e.setInOut(null,null)||(e.evalVisibility(JO),e.isRemovable&&EO.removeEntry(t),_o(TO),0))})),IW=Na((function(t,e){const i=EO.getEntry(t);if(!i)return!1;const n=i.getAnimation(e);return!!n&&(n.disabled=!n.disabled,n.disabled&&GO(n.keyframes),i.evalAnimation(n,JO),_o(TO),!0)})),CW=Na((async()=>sv("web expressive/keyframes"))),LW=Na((async()=>rv("web expressive/keyframes"))),NW=Na((async t=>sv("web expressive/easing",t))),jW=Na((async()=>{const t=function(t,e,i){const n=ey(rh(),!0);if(!n)return null;const s=zs.fromSkPath(n,!0);e??=EO.duration,i??=EO.fps;const r=1e3/i,o=s.nodes,a=s.contours,l=s.contoursDimensions;let c=l.at(-1).at(-1);const u=[0];for(let t=2;t<a.length;t+=2){const e=o[a[t-1]].point.distanceTo(o[a[t]].point);u.push(e),c+=e}const h=Math.round(e/r)*r/c,d=[];let f=0,p=0;for(let t=0;t<a.length;t+=2){const e=t>>1,i=a[t],n=a[t+1],s=l[e];let c=!1;if(u[e]>0){const t=d.at(-1);t.easing=new pE(hE("step"),!0),t.value=Tn(t.value,1),c=!0,p+=u[e]}for(let t=i;t<=n;t++){const e=t-i;if(e>0&&s[e]===s[e-1]){const e=d.at(-1);e.value=zn(e.value,o[t].handleOut,1);continue}f=z((s[e]+p)*h,r);let n=Pn(o[t],0);c&&(c=!1,n=Tn(n,0)),d.push(new WE(n,f))}s[n-i+1]!==s[n-i]&&(f=z((s[n-i+1]+p)*h,r),d.push(new WE(Pn(o[i],0),f)))}return s.dispose(),new Map([[Ad.id,{list:d,meta:!0}]])}();t&&sv("web expressive/keyframes",t)})),TW=Na((function(t){return EO.duration!==t&&(EO.duration=t,_o(zO),oR(JO,!0),!0)})),zW=Na((function(t){return EO.fps!==t&&(EO.fps=t,_o(zO),oR(JO,!0),!0)})),AW=new G_(!1),PW=new G_(!0),DW=new G_(!0),EW=new G_(!1);let OW,RW="",WW=!1;const BW=new Set;function UW(){if(UO())return void(""!==RW&&(RW="",OW.setAttribute("kf","")));BW.clear(),YR(((t,e)=>{BW.add(e.animator.id)}));const t=[...BW].sort().join(" ");t!==RW&&(RW=t,OW.setAttribute("kf",t))}const $W=KC,FW=[{title:"None",icon:"expr:fill-none",value:0},{title:"None",icon:"expr:fill-solid",value:1},{title:"Linear gradient",icon:"expr:fill-linear-gradient",value:2},{title:"Radial gradient",icon:"expr:fill-radial-gradient",value:3},{title:"Two point radial gradient",icon:"expr:fill-radial-focal-gradient",value:4}],VW=()=>{return function(t,e,i){const n=document.createElement("es-active-element-accordion");if(i&&i(n),n.items=t,e){let t=null;t=document.createElement("p"),t.style.textAlign="center",t.innerText=e,n.appendChild(t)}return n}([nD(FW),oD(),sD(),rD(),cD(),aD(),lD(),hD(new Map([["ellipse","es-ellipse-properties"],["rect","es-rectangle-properties"],["image","es-image-properties"],["regular-polygon","es-polygon-properties"],["star","es-star-properties"],["line","es-line-properties"],["poly","es-polyline-properties"],["path","es-path-properties"],["clip-path","es-path-properties"]])),new class extends xw{constructor(){super("transform")}getLabel(){return"Transform"}isVisible(t){return t instanceof Oh&&t.isTransformable}createElement(){return iD("es-transform-properties")}},(t="es-global-coords",new class extends xw{constructor(){super("global-coords")}getLabel(){return"Global Coords"}isVisible(t){return t instanceof Oh}createElement(){return iD(t)}})],"No properties to show",(t=>{Io(oe,(()=>t.isConnected&&t.requestUpdate()))}));var t};function GW(t,e){return Object.defineProperty(t,"disabled",{get:e}),t}const HW=[GW({title:"Cut",shortcut:["ctrl","x"],icon:"workflow:Cut",action:Lk},lh),GW({title:"Copy",shortcut:["ctrl","c"],icon:"workflow:Copy",action:Nk},lh),{title:"Copy as...",children:[GW({title:"Motion path keyframes",icon:"expr:auto-rotate",action:jW},lh),{title:"Image",icon:"workflow:Image",action:zk},{title:"SVG",icon:"workflow:Code",action:Pk},GW({title:"SVG path",icon:"expr:path",action:Ak},lh)]},{title:"Paste",shortcut:["ctrl","v"],icon:"workflow:Paste",action:()=>jk()},GW({title:"Duplicate",shortcut:["ctrl","d"],icon:"workflow:Duplicate",action:x_},lh),GW({title:"Delete",shortcut:[Oa?"backspace":"delete"],icon:"workflow:Delete",action:w_},lh),null,GW({title:"Group",shortcut:["ctrl","g"],icon:"workflow:Group",action:S_},lh),GW({title:"Ungroup",shortcut:["shift","ctrl","g"],icon:"workflow:Ungroup",action:k_},lh),null,GW({title:"Convert to path",icon:"expr:path",shortcut:["ctrl","k"],action:qk},(function(){const t=rh();return!t||!Wm(t)})),YC,GW({title:"Clipping",icon:"workflow:Preset",children:HC},lh),QC,JC],ZW=[GW({title:"Cut",shortcut:["ctrl","x"],icon:"workflow:Cut",action:LW},UO),GW({title:"Copy",shortcut:["ctrl","c"],icon:"workflow:Copy",action:CW},UO),{title:"Paste",shortcut:["ctrl","v"],icon:"workflow:Paste",action:()=>jk()},GW({title:"Duplicate",shortcut:["ctrl","d"],icon:"workflow:Duplicate",action(t,e){bW(e?.altKey)}},UO),GW({title:"Delete",shortcut:[Oa?"backspace":"delete"],icon:"workflow:Delete",action:vW},UO),null,GW({title:"Reverse",shortcut:["ctrl","r"],icon:"workflow:Sync",action:xW},UO)],YW=[{title:"Add layer",icon:"expr:layer",get disabled(){return Au()},action:()=>II()},YC],QW=[{title:"Settings",icon:"workflow:Settings",value:"settings",content:()=>function(...t){const e=new tw;return e.appendChild(function(...t){const e=new Sw;return hC(e,[Bt,Ut]),e.items=t.map((t=>new Mw(t.id,t.title,"string"==typeof t.control?document.createElement(t.control):t.control()))),e}(...t)),e}({id:"document",title:"Composition",control:"es-document-properties"},{id:"animation",title:"Animation",control:"es-animation-properties"},{id:"grid",title:"Grid",control:"es-grid-properties"})},{title:"Layers",icon:"workflow:Layers",value:"layers",content:()=>{const t=document.createElement("es-tree-view-control");return t.menu=YW,t.ctxMenu=HW,t}}],JW=[{value:"transform",icon:"expr:selection-tool",title:"Selection tool",shortcut:["V"]},{value:"path",icon:"expr:direct-selection-tool",title:"Node tool",shortcut:["A"]},{value:"pen",icon:"expr:pen-tool",title:"Pen tool",shortcut:["P"]},[{value:"rect",icon:"expr:rectangle-tool",title:"Rectangle tool",shortcut:["R"]},{value:"ellipse",icon:"expr:ellipse-tool",title:"Ellipse tool",shortcut:["E"]},{value:"regular-polygon",icon:"expr:polygon-tool",title:"Polygon tool",shortcut:["O"]},{value:"star",icon:"expr:star-tool",title:"Star tool",shortcut:["S"]},{value:"poly",icon:"expr:polyline-tool",title:"Polyline tool",shortcut:["W"]},{value:"line",icon:"expr:line-tool",title:"Line tool",shortcut:["L"]}],{value:"gradient",icon:"expr:gradient-tool",title:"Gradient tool",shortcut:["G"]},{value:"color-picker",icon:"expr:colorpicker-tool",title:"Eyedropper tool",shortcut:["I"]},{value:"text",icon:"expr:text-tool",title:"Text tool",shortcut:["T"]},{value:"pan",icon:"expr:pan-tool",title:"Hand tool",shortcut:["H"]},{value:"zoom",icon:"expr:zoom-tool",title:"Zoom tool",shortcut:["Z"]}],qW=new Map([["transform",["es-mpath-joint-tool-ctx",null,"es-transform-tool-ctx"]],["path",["es-path-contour-control",null,"es-path-joint-control"]]]),KW=cL(yA),XW=[KW(tk,"enabled","Enable snapping",["shift","S"]),"Snap to...",KW(tk,"pixel","Pixel",["shift","ctrl",","]),KW(uk,"snap","Grid",["shift","ctrl","'"]),null,KW(vk,"snap","Guides",["shift","ctrl",";"]),KW(fL,"points","Object points",["shift","ctrl","."]),KW(fL,"bounds","Object bounds",["shift","ctrl","/"]),KW(Ik,"snap","Document",["shift","ctrl","\\"]),null,KW(tk,"view","If in viewport")];class tB extends Gb{#Ft;#Vg;#Gg;#Hg;#Zg;#Yg;#Qg;constructor(){super(),this.#Qg=this.#Jg(),this.#Ft=this.#qg(),this.#Yg=VW(),hC(this,[[sI,this.#Kg],[oe,t=>{this.#Zg.value=t?.name}],[EW,t=>{t?this.#Hg.classList.add("highlight-button"):this.#Hg.classList.remove("highlight-button")}],[AW,t=>{t?this.#Hg.classList.add("flip-y"):this.#Hg.classList.remove("flip-y")}],[PO,yv]])}firstUpdated(){this.#Vg=this.shadowRoot.getElementById("drawer"),this.#Gg=this.shadowRoot.getElementById("drawer-buttons"),this.#Hg=this.shadowRoot.getElementById("timeline-collapsed"),this.#Zg=this.shadowRoot.getElementById("tools");const t=this.shadowRoot.getElementById("sidebar");t.style.setProperty("--kf-active-color","var(--accent-color-500)"),function(t){OW=t}(t),WW||(WW=!0,Io(LO,UW),UW())}#Jg(){const t=document.createElement("es-timeline-control");return t.id="timeline",t.ctxMenu=ZW,t}#qg(){const t=ml;return t.id="engine",t.addEventListener("contextmenu",this.#Xg),t}connectedCallback(){super.connectedCallback(),Ov(this.#tm,!0),window.addEventListener("contextmenu",this.#em)}disconnectedCallback(){super.disconnectedCallback(),Ov(this.#tm,!1),window.removeEventListener("contextmenu",this.#em)}#Kg=t=>{this.#Gg.value=t,this.#Vg.value=t,null==t?this.classList.remove("has-drawer"):this.classList.add("has-drawer")};#tm=()=>{requestAnimationFrame((()=>yl.update()))};render(){return Ib`
            <div id="logo"></div>
            <div id="menubar">
                <es-file-bar .menu=${$W}></es-file-bar>
                <es-menubar-controls .ctx=${qW}>
                    <es-mask-control></es-mask-control>
                    <es-path-op-control></es-path-op-control>
                    <es-align-control></es-align-control>
                    <es-snapping-control .items=${XW}></es-snapping-control>
                    <es-canvas-control></es-canvas-control>
                    <es-zoom-control></es-zoom-control>
                </es-menubar-controls>
            </div>
            <div id="toolbar">
                <cc-icon-toolbar id="tools" vertical quiet size="m" emphasized .value=${Vl?.name} .items=${JW} @change=${this.#im}></cc-icon-toolbar>
                <div style="flex: 1"></div>
                <cc-icon-toolbar id="drawer-buttons" vertical quiet size="m" emphasized unselectable .items=${QW} @change=${this.#nm}></cc-icon-toolbar>
                <cc-action-button id="timeline-collapsed" size="m" quiet @click=${this.#sm} title="Collapse timeline">
                    <cc-css-icon name="ChevronDown"></cc-css-icon>
                </cc-action-button>
            </div>
            <cc-dynamic-container id="drawer" .items=${QW}></cc-dynamic-container>
            ${this.#Ft}
            ${this.#Qg}
            <cc-scroll-container id="sidebar">
                ${this.#Yg}
            </cc-scroll-container>
        `}#im=t=>{WD(t.detail)||t.preventDefault()};#nm(t){sI.change(t.detail)}#sm(){AW.toggle()}#Xg=t=>{t.stopPropagation(),t.preventDefault(),Vl?.isWorkingOrPanning||bv(HW,{x:t.clientX,y:t.clientY},"bottom-left")};#em(t){qa(t)||t.preventDefault()}dispose(){ml&&(cancelAnimationFrame(nc),lc=0,Vl?.deactivate(),Vl=null,mc(),Lc(ml.canvas),ml.remove(),ml.ruler.dispose(),ml.canvas.remove(),ml=null,yl=null),this.#Ft=null}static{this.styles=[Vv`
        :host {
            margin: 0;
            padding: 0;
            box-sizing: border-box;

            --toolbar-size: calc(48px + var(--border-size));
            --sidebar-size: calc(286px + var(--border-size));
            --drawer-size: 280px;

            display: grid;
            grid-gap: 0;
            grid-template-areas:
                "logo menubar menubar sidebar"
                "toolbar drawer engine sidebar"
                "toolbar timeline timeline sidebar";
            grid-template-rows: var(--toolbar-size) 1fr auto;
            grid-template-columns: var(--toolbar-size) var(--drawer-size) minmax(var(--sidebar-size), 1fr) var(--sidebar-size);
        }

        :host(:not(.has-drawer)) {
            --drawer-size: 0;
        }

        :host(:not(.has-drawer)) #drawer {
            display: none;
        }

        :host > * {
            box-sizing: border-box;
        }

        #toolbar {
            grid-area: toolbar;
            display: flex;
            flex-direction: column;
            justify-content: start;
            align-items: center;
            user-select: none;
            border-right: var(--border-size) solid var(--separator-color);
            padding: 8px 0;
            pointer-events: var(--cc-pointer-events, auto);
        }

        #logo {
            grid-area: logo;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            user-select: none;
            border-bottom: var(--border-size) solid var(--separator-color);

            background-image: var(--expressive-app-logo);
            background-repeat: no-repeat;
            background-position: center;
            background-size: 32px;
        }

        #menubar {
            grid-area: menubar;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            overflow: clip;
            border-bottom: var(--border-size) solid var(--separator-color);
            pointer-events: var(--cc-pointer-events, auto);
        }

        #sidebar {
            grid-area: sidebar;
            user-select: none;
            box-sizing: border-box;
            border-left: var(--border-size) solid var(--separator-color);
        }

        :host-context([titlebar]) #sidebar {
            border-image: linear-gradient(to bottom, transparent, transparent var(--toolbar-size), var(--separator-color) var(--toolbar-size), var(--separator-color) 100%) 1 100%;
            border-left-color: transparent;
        }

        #drawer {
            grid-area: drawer;
            box-sizing: border-box;
            border-right: var(--border-size) solid var(--separator-color);
            pointer-events: var(--cc-pointer-events, auto);
        }

        #engine {
            grid-area: engine;
            touch-action: none;
            outline: none !important;
            border: none;
            box-sizing: border-box;
            overflow: hidden;
            min-height: 100px;
            min-width: auto;
            background: var(--separator-color);
            --render-engine-background-color: var(--canvas-color);
            --render-engine-rulerIndicator-color: var(--accent-color-500);
            --render-engine-rulerBackground-color: var(--surface-color);
            --render-engine-rulerText-color: var(--text-color-default);
        }

        /*
        @container --theme-provider style(--theme: dark) {
            #engine {
                --render-engine-background-color: var(--gray-800);
            }
        }

        @container --theme-provider style(--theme: light) {
            #engine {
                --render-engine-background-color: var(--gray-50);
            }
        }
        */

        #timeline {
            grid-area: timeline;
        }

        #timeline-collapsed {
            margin-top: 8px;
        }

        .highlight-button {
            color: var(--accent-color-400);
        }
        .flip-y {
            transform: scaleY(-1);
        }
    `]}}class eB extends NC{renderLeft(){return this.renderFormats()}renderRight(){return Lb}static{this.styles=[...super.styles,Vv`
#left-panel {
    flex: 1;
}
#right-panel {
    flex: 3;
}
#rich-list {
    flex: 1;
    flex-direction: column;
}
    `]}}const iB={...iM,min:1,max:2e4},nB={...iM,min:1,max:1e3},sB=[{title:" 8 fps",value:8},{title:"12 fps",value:12},{title:"15 fps",value:15},{title:"24 fps",value:24},{title:"25 fps",value:25},{title:"30 fps",value:30},{title:"50 fps",value:50},{title:"60 fps",value:60}],rB=[{title:"3x",value:3},{title:"2x",value:2},{title:"1.75x",value:1.75},{title:"1.50x",value:1.5},{title:"1.25x",value:1.25},null,{title:"1x",value:1},null,{title:"0.75x",value:.75},{title:"0.50x",value:.5},{title:"0.25x",value:.25}],oB=[{title:"Indefinitely",value:!0},{title:"Count",value:!1}],aB=[{title:"Forward",value:!1},{title:"Backward",value:!0}],lB=[{title:"No",value:!1},{title:"Yes",value:!0}];class cB extends LC{#rm;#hi;#om;constructor(t){super(),this.#hi=new Map,this.#om=[],this.common={format:0,bounds:null,size:{width:0,height:0},background:De.transparent,startTime:0,duration:1,speed:1,fps:60,repeat:0,reverse:!1,alternate:!1};const e=this.#hi,i=this.#om;for(const n of t)e.set(n.value,n),i.push({title:n.title,value:n.value});this.common.format=t[0].value}get item(){return this.#hi.get(this.common.format)}get lastExecutedType(){return this.item.id}async getFile(){const t=this.item;try{const e=t.dir;if(e)return await this.getDirHandle(e);const i=t.file;return await this.getFileHandle({...i,suggestedName:this.getSuggestedName(su.title,t.extension)})}catch{return null}}initialize(){const t=Ck(),e=this.common;e.bounds=t,e.size.width=t.width,e.size.height=t.height,e.fps=EO.fps,e.speed=1,e.repeat=0,e.reverse=!1,e.alternate=!1;const[i,n]=cR();e.startTime=i,e.duration=n-i,this.#rm=t.width/t.height,this.applyConstraints(),this.requestUpdate()}applyConstraints(){const t=this.common;t.repeat||this.allowRepeatIndefinite?t.repeat&&!this.allowRepeatCount&&(t.repeat=0):t.repeat=1,t.background.a<1&&!this.allowAlphaBackground&&(t.background=t.background.withOpacity(1)),t.alternate&&!this.allowRepeatAlternate&&(t.alternate=!1),t.reverse&&!this.allowDirection&&(t.reverse=!1),1===t.speed||this.allowSpeed||(t.speed=1)}get allowRepeatItems(){return!(2&this.item.deny)}get allowRepeatAlternate(){const t=this.item.deny;return!(4&t||!this.common.repeat&&32&t)}get allowRepeatIndefinite(){return!(8&this.item.deny)}get allowRepeatCount(){return!(16&this.item.deny)}get allowFps(){return!(1024&this.item.deny)}get allowSpeed(){return!(512&this.item.deny)}get allowAlphaBackground(){return!(1&this.item.deny)}get allowDirection(){return!(64&this.item.deny)}renderCommonSettings(){const t=this.common,e=this.allowFps,i=this.allowRepeatIndefinite,n=this.allowRepeatCount,s=!n||0===t.repeat;s&&!i&&(t.repeat=1);const r=this.allowAlphaBackground;return r||(t.background=t.background.withOpacity(1)),Ib`
<cc-flex-row class="heading">Composition settings</cc-flex-row>
<cc-flex-row>
    <div class="label">Frame</div>
    <cc-number-input title="Width" .value=${t.size.width} @update=${this.#Nc} .formatter=${iB} flex>
        <cc-icon name="expr:w" slot="before"></cc-icon>
    </cc-number-input>
    <cc-number-input title="Height" .value=${t.size.height} @update=${this.#jc} .formatter=${iB} flex>
        <cc-icon name="expr:h" slot="before"></cc-icon>
    </cc-number-input>
    <es-color-control title="Background color" .value=${t.background} .alpha=${r} @update=${this.#am} text thumbnail .formatter=${!1} .eyeDropper=${!1} fluid-4></es-color-control>
</cc-flex-row>
<cc-flex-row>
    <div class="label">Time</div>
    <cc-flex-col class="input-group" flex>
        <div>Duration</div>
        <cc-time-input title="Duration" min="1" .value=${t.duration} .fps=${t.fps} @change=${this.#lm} padded></cc-time-input>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Start time</div>
        <cc-time-input title="Start time" .value=${t.startTime} .fps=${t.fps} @change=${this.#cm} padded></cc-time-input>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>End time</div>
        <cc-time-input title="End time" .min=${t.startTime+1} .value=${t.startTime+t.duration} .fps=${t.fps} @change=${this.#um} padded></cc-time-input>
    </cc-flex-col>
</cc-flex-row>
<cc-flex-row>
    <div class="label">Animation</div>
    <cc-flex-col class="input-group" flex>
        <div>Frame rate</div>
        <cc-picker title="Frames per second" placeholder="Auto" .disabled=${!e} .value=${e?t.fps:null} .items=${sB} @change=${this.#hm}></cc-picker>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Speed</div>
        <cc-picker title="Playback speed" .disabled=${!this.allowSpeed} .value=${t.speed} .items=${rB} @change=${this.#dm}></cc-picker>
    </cc-flex-col>
</cc-flex-row>
${this.#fm(!n||i,n,s)}
`}renderFormat(){return Ib`<cc-picker id="format" .value=${this.common.format} .items=${this.#om} @change=${this.#nl} flex></cc-picker>`}getCommonSettings(){const t=this.common;return{startTime:t.startTime,duration:t.duration,size:{...t.size},fps:t.fps,speed:t.speed,repeat:t.repeat,alternate:t.alternate,reverse:t.reverse}}#nl(t){this.common.format=t.detail,this.onFormatChanged(t.detail),this.applyConstraints(),this.requestUpdate()}#fm(t,e,i){if(!this.allowRepeatItems)return Lb;i=i&&t;const n=this.common;return Ib`
<cc-flex-row>
    <div class="label"></div>
    <cc-flex-col class="input-group" flex>
        <div>Repeat</div>
        <cc-picker title="Repeat mode" .disabled=${!t||!e} .value=${i} .items=${oB} @change=${this.#pm}></cc-picker>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Iterations</div>
        <cc-number-input title="Repetitions" placeholder=${i?"∞":""} .indeterminate=${i} .disabled=${0===n.repeat} .value=${n.repeat} @update=${this.#gm} .formatter=${nB} padded></cc-number-input>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Direction</div>
        <cc-picker title="Direction" .disabled=${!this.allowDirection} .value=${n.reverse} .items=${aB} @change=${this.#mm}></cc-picker>
    </cc-flex-col>
    <cc-flex-col class="input-group" flex>
        <div>Alternate</div>
        <cc-picker title="On iteration end" .disabled=${!this.allowRepeatAlternate} .value=${n.alternate} .items=${lB} @change=${this.#ym}></cc-picker>
    </cc-flex-col>
</cc-flex-row>`}#cm(t){this.common.startTime=t.detail,this.requestUpdate()}#um(t){const e=this.common;let i=t.detail;e.duration=Math.abs(i-e.startTime),i<e.startTime&&(e.startTime=i),this.requestUpdate()}#lm(t){this.common.duration=t.detail,this.requestUpdate()}#Nc(t){this.common.size.width=t.detail,this.common.size.height=Math.round(t.detail/this.#rm),this.requestUpdate()}#jc(t){this.common.size.height=t.detail,this.common.size.width=Math.round(t.detail*this.#rm),this.requestUpdate()}#hm(t){this.common.fps=t.detail,this.applyConstraints(),this.requestUpdate()}#dm(t){this.common.speed=t.detail,this.applyConstraints(),this.requestUpdate()}#pm(t){this.common.repeat=t.detail?0:1,this.applyConstraints(),this.requestUpdate()}#gm(t){this.common.repeat=t.detail,this.applyConstraints(),this.requestUpdate()}#mm(t){this.common.reverse=t.detail,this.applyConstraints(),this.requestUpdate()}#ym(t){this.common.alternate=t.detail,this.applyConstraints(),this.requestUpdate()}#am(t){this.common.background=t.detail,this.applyConstraints(),this.requestUpdate()}}class uB extends cB{#vm;async abort(){return this.#vm?.abort(),!0}async execute(t){const e=await this.getFile();if(!e)return 1;const i=this.common,n=this.#vm=await this.getClient({region:i.bounds,size:new Fi(i.size.width,i.size.height),background:i.background});n.file=e;try{const s=await n.export(t);switch(s.type){case"ok":return await this.onSuccess(e,i.size.width,i.size.height),0;case"aborted":return 1;case"error":throw new Error(s.message)}}catch(t){return _C(t),2}finally{n.dispose(),this.#vm=null}}}class hB{#bm;#xm;#wm;#So;constructor(t){this.#xm=t}#Mm(t){this.#wm?.reject(t),this.#wm=null}#Sm(t){this.#wm?.resolve(t),this.#wm=null}#km(){const t=this.#bm=new Worker(this.#xm,{type:"module"});t.addEventListener("error",this.#_m),t.addEventListener("messageerror",this.#Im),t.addEventListener("message",this.#Cm)}#Lm(){const t=this.#bm;t&&(this.#bm=null,t.removeEventListener("error",this.#_m),t.removeEventListener("messageerror",this.#Im),t.removeEventListener("message",this.#Cm),t.terminate())}#_m=t=>{this.#Lm(),this.#Mm(t)};#Im=t=>{this.#Lm(),this.#Mm(t)};#Cm=async t=>{const[e,i]=t.data;switch(e){case 0:{const t=this.file;return void(dB(t)?this.#bm.postMessage([0,[await this.getInit(),t]],[t]):this.#bm.postMessage([0,[await this.getInit(),t]]))}case 1:{const t=await this.getData(i);return void(ArrayBuffer.isView(t)?this.#bm.postMessage([1,t],[t.buffer]):dB(t)?this.#bm.postMessage([1,t],[t]):this.#bm.postMessage([1,t]))}case 2:{const[t,e]=i;return void this.#So(t,e)}case 3:return this.#Lm(),void this.#Sm(i)}};async export(t){this.#So=t;const e=new Promise(((t,e)=>{this.#wm={resolve:t,reject:e}}));await this.before();try{return this.#km(),await e}finally{this.#wm=null,this.#Lm(),this.#So=null,await this.after()}}abort(){this.#So?.(-1,"Aborting..."),this.#bm?.postMessage([2])}dispose(){this.#wm=this.#So=this.file=null,this.#bm?.terminate(),this.#bm=null}}function dB(t){return t instanceof ArrayBuffer||t instanceof ImageBitmap||t instanceof VideoFrame||t instanceof OffscreenCanvas||t instanceof ReadableStream||t instanceof WritableStream||t instanceof TransformStream||t instanceof MessagePort}class fB extends hB{#Tc;#Qg;#Nm=!1;constructor(t,e,i){super(i),this.#Tc=t,this.#Qg=e||EO}setTime(t){return sR(t,this.#Qg)}#jm;#tn;before(){this.#jm=JO,this.#tn=function(){if(!Nu.length)return null;if(1===Nu.length&&!Cu){const t=Nu.pop();return t.invalidate(!0),t}return Pu(Nu.splice(0))}(),uc(),ec()}after(){var t;t=this.#tn,Nu.length&&Nu.splice(0),t?Nt(t)?(Cu=!0,Nu.push(...t),Pu(t)):(Cu=!1,Nu.push(t),t.invalidate(!0)):Cu=!1,oR(this.#jm),cc(),this.#jm=this.#tn=null}getInit(){return this.#Tc}dispose(){this.#Tc=this.#Qg=null,super.dispose()}async getData(t){if(!this.setTime(t)&&this.#Nm)return;const e=await this.getDocumentData(t);return null!=e&&(this.#Nm=!0),e}}class pB extends fB{#Tm;#zm;#va;constructor(t,e,i,n){super(t,i,n),this.#Tm=new VM,this.#Tm.background=e?.background??De.transparent,this.#zm=e?.region||Ck(),this.#va=e?.size||this.#zm}before(){super.before(),this.#Tm.createSurface(this.#va)}after(){this.#Tm.deleteCurrentSurface(),super.after()}getDocumentData(){return this.#Tm.drawPicture(su.picture,this.#zm,this.#va),this.#Tm.bitmap}dispose(){this.#zm=this.#va=this.#Tm=null,super.dispose()}}class gB extends fB{#Un;#Fs;constructor(t,e,i,n){super(t,i,n),this.#Fs=e,this.#Un=new FM}dispose(){super.dispose(),this.#Un?.dispose(),this.#Un=null}async getDocumentData(){return(await this.#Un.exportDocument(su,this.#Fs.region,this.#Fs.size,this.#Fs.background)).arrayBuffer()}}const mB=[{id:"image:apng",title:"APNG",value:0,deny:4,extension:"png",file:{startIn:"pictures",types:[{description:"Animated PNG files",accept:{"image/png":[".png"]}}]}},{id:"image:gif",title:"GIF",value:1,deny:5,extension:"gif",file:{startIn:"pictures",types:[{description:"GIF files",accept:{"image/gif":[".gif"]}}]}}],yB=[{id:"seq:png",title:"PNG",value:0,deny:8,extension:"png",dir:"pictures",image:{type:"image/png",quality:1}},{id:"seq:jpg",title:"JPEG",value:1,deny:9,extension:"jpg",dir:"pictures",image:{type:"image/jpeg",quality:1}},{id:"seq:avif",title:"AVIF",value:2,deny:8,extension:"avif",dir:"pictures",image:{type:"image/avif",quality:1}},{id:"seq:webp",title:"WEBP",value:3,deny:8,extension:"webp",dir:"pictures",image:{type:"image/webp",quality:1}},{id:"seq:gif",title:"GIF",value:4,deny:8,extension:"gif",dir:"pictures",image:{type:"image/gif",quality:1}},{id:"seq:svg",title:"SVG",value:5,deny:8,extension:"svg",dir:"pictures"}];class vB{#hi=new Map;has(t){return this.#hi.has(t)}get(t){return this.#hi.has(t)||this.#hi.set(t,this.#hi.size),this.#hi.get(t)}keys(){return[...this.#hi.keys()]}clear(){this.#hi.clear()}}class bB{constructor(t,e){this.target=t,this.hasOwnVisibility=e,this.start=0,this.end=0,this.properties=new Map,this.animations=new Map,this.children=[],this.filterContainer=null,this.motionPath=null}value(t){return this.properties.has(t)?this.properties.get(t):t.cloneValue(this.target)}animation(t){return this.animations.get(t)}pair(t){return[this.value(t),this.animation(t)]}eq(t,e){return this.match(t,(t=>kt(t,e)))}match(t,e){const i=this.animation(t);if(!i)return e(this.value(t));for(const t of i.keyframes)if(!e(t.value))return!1;return!0}dispose(){this.filterContainer?.dispose(),this.children?.length&&this.children.forEach((t=>t.dispose())),this.properties?.clear(),this.animations?.clear(),this.target=this.properties=this.animations=this.filterContainer=this.children=null}}class xB{#Am;#Pm=new Map;#Dm;#Qg;#Em=!1;#Om;#Rm;#Wm;constructor(t=0,e,i){this.#Am=t;const n=this.#Pm;if(n.set(Yd,SB),n.set(qd,SB),n.set(nf,MB),32&t){const e=!(2&t);n.set(kp,_B(0,e)),n.set(Pp,_B(0,e)),n.set(Dp,_B(Be.ZERO,e)),n.set(Ep,_B(De.transparent,e)),n.set(Ip,_B(1,e)),n.set(Cp,_B(1,e)),n.set(Lp,_B(1,e)),n.set(Np,_B(0,e)),n.set(jp,_B(0,e)),n.set(Tp,_B(0,e)),n.set(zp,_B(0,e))}if(e)for(const[t,i]of e)n.set(t,i);this.#Dm=i??new Map,this.#Dm.has(Ad)||this.#Dm.set(Ad,wB)}export(t,e,i,n,s){this.#Qg=e,i??=0,n??=e.duration,i>n&&([n,i]=[i,n]),this.#Em=!!s,this.#Om=i,this.#Rm=n-i,this.#Wm=0;const r=[];return this.#Qo(t,r,i,n),this.#Qg=null,this.#Om=this.#Rm=0,[r.filter((t=>t.children.length>0)),n-i]}#Bm(t,e,i){if(t.hidden)return null;const n=this.#Qg.getEntry(t);let s=n&&n.hasInOut&&(n.in>e||n.out<i);if(s){if(e=Math.max(e,n.in),(i=Math.min(i,n.out))<=e)return null;this.#Wm++}const r=new bB(t,s);if(n){const t=this.#Om,s=e-t,o=i-t;for(let e of n.animations)this.#Dm.has(e.animator.property)&&(e=this.#Dm.get(e.animator.property)(r,e),!e)||!e.disabled&&e.keyframes.length&&(e=e.clone(!0),oO(e.keyframes,-t),(e=this.#Um(n.target,e,r.properties,s,o))&&r.animations.set(e.animator.property,e))}if(r.start=e-this.#Om,r.end=i-this.#Om,this.#Qo(t,r.children,e,i),t.supportsFilters&&t.filters&&t.filters.hasChildren){const n=this.#Bm(t.filters,e,i);n&&n.children.length>0&&(r.filterContainer=n)}return s&&this.#Wm--,r}#Qo(t,e,i,n){if(t.supportsChildren&&t.hasChildren)for(const s of t.children()){const t=this.#Bm(s,i,n);t&&e.push(t)}}#Um(t,e,i,n,s){cO(e.keyframes);const r=e.animator.property;if(!e.isAnimated)return i.set(r,e.keyframes[0].value),null;const o=function(t,e,i){const n=t.length;if(0===n)return null;if(i<e&&([e,i]=[i,e]),1===n)return t[0].offset>=e&&t[0].offset<=i?[t[0]]:null;let s=null;for(let i=0;i<n;i++){if(t[i].offset===e){s=i;break}if(t[i].offset>e){s=Math.max(i-1,0);break}}if(null===s)return null;if(s+1===n||t[s].offset>=i)return[t[s]];let r=s;for(;++r<n&&!(t[r].offset>=i););return t.slice(s,r+1)}(e.keyframes,n,s);if(!o)return i.set(r,e.getValueAtOffset(this.#Em?s:n)),null;if(1===o.length)return i.set(r,o[0].value),null;e.keyframes.splice(0,e.keyframes.length,...o);const a=this.#Pm.get(r);return a&&cO((e=a(e,t,n,s,this.#Rm)).keyframes),e.keyframes.length>1&&this.#$m(e,n,s)&&cO(e.keyframes),i.set(r,e.getValueAtOffset(this.#Em?s:n)),e.keyframes.length>1?e:null}#$m(t,e,i){let n=!1;const s=!!(8&this.#Am);if(function(t,e,i,n,s){const r=t.keyframes;let o=r.length-1,a=null!=r[o].easing;r[o].easing=null;for(let c=0;c<o;c++){const u=r[c];if(!u.easing)continue;const h=r[c+1].offset-u.offset;if(!h){u.easing=null,a=!0;continue}let d=null,f=!1;if(u.easing.func instanceof qD){if(u.easing.func.isLinear){u.easing=null,a=!0;continue}if(u.easing.inverted&&(u.easing=new pE(u.easing.func.inverse,!1),a=!0),!e)continue;if(!((l=u.easing.func).h1.x<0||l.h1.x>1||l.h1.y<0||l.h1.y>1||l.h2.x<0||l.h2.x>1||l.h2.y<0||l.h2.y>1))continue;f=!0}else if(u.easing.func instanceof eE){if(!i)continue;f=!0}else if(u.easing.func instanceof rE){if(!i)continue;d=[...yO(u.value,r[c+1].value,u.offset,h,t.animator.valueHandler,u.easing.func.bounces,u.easing.func.stiffness,u.easing.inverted)]}else n&&(f=!0);if(f&&(u.easing=CE(u.easing,!0),a=!0),u.easing.func instanceof oE&&(u.easing.inverted&&(u.easing=new pE(u.easing.func.inverse,!1)),s&&(d=[...pO(u.value,r[c+1].value,u.offset,h,t.animator.valueHandler,u.easing.func.points)])),d){t.keyframes.splice(c,1,...d);const e=d.length-1;c+=e,o+=e,a=!0}}var l;return a}(t,s,!!(2&this.#Am),!!(1&this.#Am),!!(4&this.#Am))&&(n=!0),16&this.#Am){const s=t.keyframes,r=s.length-1;(s[0].offset<0||s[r].offset>this.#Rm||!this.#Wm&&(s[0].offset<e||s[r].offset>i))&&vO(t,i)&&(n=!0)}return s&&t.animator.property===Gd&&function(t){let e=!1;for(const i of t)i.value<0?(i.value=0,e=!0):i.value>1&&(i.value=1,e=!0);e&&cO(t)}(t.keyframes),n}}function wB(t,e){if(t.properties.set(Gd,0),!t.target.isTransformable||!e||!e.isAnimated)return null;const[i,n]=function(t){const e=t.sizes,i=e[e.length-1];if(i<=0)return null;const n=t.keyframes;let s=0,r=i;for(let t=1;t<n.length;t++){const i=bE(n[t-1].easing);if(!i)continue;const o=e[t]-e[t-1];i[0]<0&&(s=Math.min(s,e[t-1]+o*i[0])),i[1]>1&&(r=Math.max(r,e[t-1]+o*i[1]))}let o=0,a=i;const l=t.nodes.slice();let c=!1,u=!1;if(s<0)if(e[0]===e[1])c=!0;else{const[t]=wn(l[0],l[1],Math.ceil(-s),!0);o=t.distanceTo(l[0].point),a+=o,l[0]=Cn(0,l[0].point,null,l[0].handleOut),l.unshift(Cn(1,t))}if(r>i){const t=n.length-1;if(e[t]===e[t-1])u=!0;else{const t=l.length-1,[e]=wn(l[t-1],l[t],Math.ceil(r)-i,!1);a+=e.distanceTo(l[t].point),l[t]=Cn(0,l[t].point,l[t].handleIn,null),l.push(Cn(2,e))}}const h=n.map(((t,i)=>{let n=(o+e[i])/a;return c&&n<0&&(n=0),u&&n>1&&(n=1),new WE(n,t.offset,t.easing?t.easing.clone():null)}));return[l,h]}(e);return t.motionPath=i,new FE(HE(Gd.id),n)}function MB(t){return function(t){const e=t.reduce(((t,e)=>E(t,e.value?.length||1)),1);for(const i of t)null!=i.value&&0!==i.value.length?i.value.length!==e&&(i.value=new Array(Math.trunc(e/i.value.length)).fill(i.value).flat()):i.value=new Array(e).fill(0)}(t.keyframes),t}function SB(t){return function(t){let e=0;for(const i of t)i.value instanceof nn?e=Math.max(e,i.value.stopColors.length):i.value instanceof Hi||(i.value=new Hi(De.transparent));if(0===e)return;let i,n=!1;for(const s of t){if(!(s.value instanceof nn)){n=!0;continue}const t=s.value;if(t.stopColors.length===e){i||(i=t);continue}const r=t.stopColors.clone(),o=r.list[r.list.length-1];for(;r.list.length<e;)r.list.push({color:o.color,offset:o.offset});s.value=t.withStopColorList(r),i||(i=s.value)}if(!n)return;let s=t.length-1,r=i;for(let e=0;e<=s;e++){const i=t[e];if(!(i.value instanceof Hi)){r=i.value;continue}let n;for(let i=e+1;i<=s;i++)if(t[i].value instanceof nn){n=t[i].value;break}n||(n=r);const o=i.value.color;i.value=kB(r,o),r.type!==n.type&&(t.splice(e+1,0,new WE(kB(n,o),i.offset,i.easing)),i.easing=null,e++,s++)}}(t.keyframes),t}function kB(t,e){return t.withStopColorList(t.stopColors.allWithColor(e))}function _B(t,e){return(i,n,s,r,o)=>{bO(i,s,r);const a=i.keyframes;let l=a[0];l.offset>s&&(l=l.clone(!0),l.offset=s,l.easing=null,a.unshift(l)),l.offset>0&&(e?a.unshift(new WE(t,0,wE(!0))):a.unshift(new WE(t,0),new WE(t,l.offset)));let c=a.at(-1);return c.offset<r&&(c.easing=null,c=c.clone(!0),c.offset=r,a.push(c)),c.offset<o&&(e?(c.easing=wE(!1),a.push(new WE(t,o))):a.push(new WE(t,c.offset),new WE(t,o))),i}}function IB(t,e){return JSON.stringify(t,CB,e)}function CB(t,e){return"number"!=typeof e||Number.isInteger(e)?e:Math.round(1e4*e)/1e4}let LB,NB,jB=null;const TB=new Map([[kg,uU],[Hp,uU],[fg,function(t){if(!t.children.length)return null;const e=[],i=[],n=[];for(const s of t.children)s.target instanceof tg?e.push(s):s.target instanceof sg?i.push(s):n.push(s);if(!e.length&&!i.length||!n.length)return null;const s=function(t){const e=WM("mask");return VB(e,t)?e:EB(e)}(i),r=function(t){const e=WM("clipPath");return VB(e,t)?e:EB(e)}(e);if(!r&&!s)return null;let o=WM("g");return r&&DB(o,r),s&&(t.target.isAlphaMask&&(s.style.maskType="alpha"),DB(o,s)),VB(o,n)?(o=qB(o,t),o?(r&&(o.setAttribute("clip-path",WB(UB(r))),jB.defs.appendChild(r)),s&&(o.setAttribute("mask",WB(UB(s))),jB.defs.appendChild(s)),o):null):EB(o)}],[tg,function(t){const e=WM("path");return oU(e,t,"d",6,$d),aU(e,t,"clip-rule",Fd,PM,0),qB(e,t,!1)}],[sg,uU],[dg,function(t){const[e,i]=t.pair(Zf),[n,s]=t.pair(Yf);if(!e&&!i||!n&&!s)return null;const r=WM("use");let o=r;const a=t.target.imageResource,l=function(t){if(!t)return null;const e=jB.images;if(e.has(t.id))return e.get(t.id);let i;try{i=t.data.encodeToDataURI(Skia.SkEncodedImageFormat.PNG,100)}catch{return e.set(t.id,null),null}const n=fU(t.data.width),s=fU(t.data.height),r=WM("image");r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("width",n),r.setAttribute("height",s),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("href",i),i=null;const o=WM("symbol");o.setAttribute("width",n),o.setAttribute("height",s),o.setAttribute("viewBox",`0 0 ${n} ${s}`),o.setAttribute("preserveAspectRatio","none"),o.appendChild(r);const a=UB(o);return e.set(t.id,a),jB.defs.appendChild(o),a}(a);if(null==l)return EB(o);r.setAttribute("href",BB(l));const c=t.target.pin;if(2===jB.engine&&(i||s)){const t=a.width,r=a.height;o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width",fU(e)),o.setAttribute("height",fU(n)),FB(o).set("transform",[3,[c,0,t,r,i??e,s??n]]),o=sU(o)}else c.isZero||(oU(o,t,"x",1,Zf,0,(t=>-c.x*t)),oU(o,t,"y",1,Yf,0,(t=>-c.y*t))),oU(o,t,"width",2,Zf),oU(o,t,"height",2,Yf);return qB(o,t)}],[Sg,function(t){const e=[];for(const[i]of t.target.paragraph.pathsWithStyle()){const t=i.toString();t&&e.push(t)}if(!e.length)return null;const i=WM("path");return i.setAttribute("d",e.join("")),e.splice(0),KB(i,t)?(i.removeAttribute("fill-rule"),qB(i,t)):EB(i)}],[Zp,function(t){const e=WM("path");return KB(e,t)?(oU(e,t,"d",6,$d),qB(e,t)):EB(e)}],[Yp,function(t){const[e,i]=t.pair(Kf),n=hU(e,i?.keyframes,t.target.isClosed);return KB(n,t)?qB(n,t):EB(n)}],[qp,function(t){const[e,i]=t.pair(Jf),n=hU(e,i?.keyframes,!1);return KB(n,t)?qB(n,t):EB(n)}],[Vp,function(t){let e=WM("ellipse");if(!KB(e,t))return EB(e);const i=t.target.pin;return Hs(i)||(oU(e,t,"cx",1,Ff,0,(t=>t*(.5-i.x))),oU(e,t,"cy",1,Vf,0,(t=>t*(.5-i.y)))),oU(e,t,"rx",2,Ff,null,(t=>t/2)),oU(e,t,"ry",2,Vf,null,(t=>t/2)),qB(e,t)}],[Qp,function(t){let e,[i,n]=t.pair(Uf),s=i.isSimple,r=0;if(s&&(r=i.simpleValue,n))for(const t of n.keyframes){if(!t.value.isSimple){s=!1;break}r=Math.max(r,t.value.simpleValue)}const[o,a]=t.pair(Wf),[l,c]=t.pair(Bf);let u=!1;if(s)if(0===r)u=!0;else{let t=Math.min(o,l);if(a)for(const e of a.keyframes)t=Math.min(t,e.value);if(c)for(const e of c.keyframes)t=Math.min(t,e.value);r<=t/2?u=!0:!n&&r<=t&&(u=!0,i=new Qs(t/2))}if(u){if(e=WM("rect"),!KB(e,t))return EB(e);const s=t.target.pin;s.isZero||(oU(e,t,"x",1,Wf,0,(t=>-s.x*t)),oU(e,t,"y",1,Bf,0,(t=>-s.y*t))),oU(e,t,"width",2,Wf),oU(e,t,"height",2,Bf),lU(e,"rx",2,n?.keyframes,i,dU,(t=>t.simpleValue))}else{if(e=WM("path"),!KB(e,t))return EB(e);if(0===jB.engine)e.setAttribute("d",wU(Cs(0,0,o,l,i?.value,!0))),FB(e).set("d",[5,[a??o,c??l,n??i]]),e=nU(e,t.target.pin,0);else if(!rU(e,t))return EB(e)}return qB(e,t)}],[Jp,function(t){let e=WM("path");if(!KB(e,t))return EB(e);const[i,n]=t.pair(ip),[s,r]=t.pair(np),[o,a]=t.pair(sp),[l,c]=t.pair(rp);if(n||c||r||a){if(0===jB.engine)e.setAttribute("d",wU(js(i,s,o,l,!0))),FB(e).set("d",[6,[n??i,r??s,a??o,c??l]]),e=nU(e,t.target.pin,.5);else if(!rU(e,t))return EB(e)}else e.setAttribute("d",wU(VR(js(i,s,o,l,!0),t.target.pin)));return qB(e,t)}],[Kp,function(t){let e=WM("path");if(!KB(e,t))return EB(e);const[i,n]=t.pair(ap),[s,r]=t.pair(cp),[o,a]=t.pair(lp),[l,c]=t.pair(hp),[u,h]=t.pair(up),[d,f]=t.pair(fp),[p,g]=t.pair(dp),[m,y]=t.pair(pp);if(n||r||a||c||h||f||g||y){if(0===jB.engine)e.setAttribute("d",wU(Ns(i,s,o,l,u,d,p,m,!0))),FB(e).set("d",[7,[n??i,r??s,a??o,c??l,h??u,f??d,g??p,y??m]]),e=nU(e,t.target.pin,.5);else if(!rU(e,t))return EB(e)}else e.setAttribute("d",wU(VR(Ns(i,s,o,l,u,d,p,m,!0),t.target.pin)));return qB(e,t)}]]),zB=new Map([[0,WB],[1,fU],[2,fU],[3,fU],[4,mU],[5,function(t){return t.map(vU).join(" ")}],[6,wU],[7,bU],[8,AM],[9,mU],[21,function(t){return t.isShiftedIdentity?t.tx?t.ty?`translate(${gU(t.tx)},${gU(t.ty)})`:`translateX(${gU(t.tx)})`:t.ty?`translateY(${gU(t.ty)})`:"none":`matrix(${t.value.map(fU).join(",")})`}],[22,function(t){return`path("${wU(t)}")`}],[20,gU],[23,t=>t.join(" ")],[13,function(t){return fU(100*t)+"%"}],[10,t=>`translate(${gU(t.x)},${gU(t.y)})`],[11,t=>`translateX(${gU(t)})`],[12,t=>`translateY(${gU(t)})`],[14,t=>`rotate(${pU(t)})`],[15,t=>`scale(${vU(t)})`],[16,t=>`scaleX(${fU(t)})`],[17,t=>`scaleY(${fU(t)})`],[18,t=>`skewX(${pU(t)})`],[19,([t,e])=>{const i=pU(-e);if(!t)return`rotate(0) skewX(${i}) rotate(0)`;const n=pU(t);return`rotate(-${n}) skewX(${i}) rotate(${n})`}]]);function AB(t){return 1===t?"Min":3===t?"Max":"Mid"}async function PB(t,e,i,n,s){let r=new xB(s);const o=n.startTime??0,a=o+(n.duration??i.duration),[l,c]=r.export(e,i,o,a,n.reverse);r=null;const u=n.bounds,h=WM("svg"),d=WM("defs");h.appendChild(d),h.setAttribute("xmlns",RM),n.background&&n.background.a>0&&(h.style.backgroundColor=bU(n.background));const f=n.size;f&&(h.setAttribute("width",f.width.toString()),h.setAttribute("height",f.height.toString())),h.setAttribute("viewBox",`${u.x} ${u.y} ${u.width} ${u.height}`),h.setAttribute("overflow","hidden");const p=n.scale??0;h.setAttribute("preserveAspectRatio",3===p?"none":`x${AB(n.align?.x)}Y${AB(n.align?.y)} ${2===p?"slice":"meet"}`),LB=n.decimals||4,NB=10**LB;const g=jB,m=`eaf-${(Date.now()%1e5).toString(16)}`,y=jB={id:0,prefix:m,separator:n.separator??":",engine:n.engine||0,duration:c,root:h,defs:d,useLast:!!n.reverse,useTitle:!1,useFilterFuncs:!!n.filterFuncs,useDisplayVisibility:!!n.display,useCssFuncs:!!n.cssFilterFuncs,useCssComposition:!0,animations:new Map,visibility:new Map,idMap:new Map,refMap:new Map,images:new Map};if(UB(h),0===p){const t=WM("g");t.style.isolation="isolate",t.setAttribute("clip-path",WB(function(t){const e=WM("clipPath"),i=WM("rect");return i.setAttribute("x",fU(t.x)),i.setAttribute("y",fU(t.y)),i.setAttribute("width",fU(t.width)),i.setAttribute("height",fU(t.height)),e.appendChild(i),jB.defs.appendChild(e),UB(e)}(u))),h.appendChild(t),VB(t,l)}else h.style.isolation="isolate",VB(h,l);for(const t of y.images.values()){const e=`${y.prefix}: ${t}`;h.querySelector(`*[href='#${e}']`)||h.getElementById(e)?.remove()}const v=await t(y);d.hasChildNodes()||d.remove(),y.animations.clear(),y.visibility.clear(),y.idMap.clear(),y.refMap.clear();for(const t of l)t.dispose();return jB=g,v}function DB(t,e){const i=jB.refMap;i.has(t)||i.set(t,new Set),i.get(t).add(e)}function EB(t){jB.animations.delete(t),jB.visibility.delete(t),jB.idMap.delete(t);const e=jB.refMap.get(t);if(e){jB.refMap.delete(t);for(const t of e)EB(t);e.clear()}for(const e of Array.from(t.children))EB(e);return t.remove(),null}function OB(t){return zB.get(t)}function RB(t){return`${jB.prefix}${jB.separator}${t}`}function WB(t){return t?`url('#${RB(t)}')`:"none"}function BB(t){return t?`#${RB(t)}`:"none"}function UB(t){if(!jB.idMap.has(t)){const e=jB.id++;return jB.idMap.set(t,e),t.setAttribute("id",RB(e)),e}return jB.idMap.get(t)}function $B(t){return jB.useLast?t[t.length-1]:t[0]}function FB(t){const e=jB.animations;return e.has(t)||e.set(t,new Map),e.get(t)}function VB(t,e){for(const i of e){const e=TB.get(i.target.constructor)?.(i);if(e)if(Array.isArray(e))for(const i of e)t.appendChild(i);else t.appendChild(e)}return t.hasChildNodes()}const GB=new Map([[Xg,function(t,e){const[i,n]=t.pair(kp);if(!n&&!i)return null;let s=!0;return e||(s=null!=n),[s?[0,[n??i],e]:null,i>0?`blur(${fU(i)}px)`:null]}],[em,function(t,e,i){const[n,s]=t.pair(Ep),[r,o]=t.pair(Dp),[a,l]=t.pair(Pp);let c=!0;e||(c=null!=(s||o||l));let u=null;return n.a>0&&(u=i?`drop-shadow(${fU(r.x)}px ${fU(r.y)}px ${fU(a)}px ${bU(n)})`:`drop-shadow(${bU(n)} ${fU(r.x)} ${fU(r.y)} ${fU(a)})`),[c?[2,[s??n,o??r,l??a],e]:null,u]}],[tm,function(t,e){const[i,n]=t.pair(Ip),[s,r]=t.pair(Cp),[o,a]=t.pair(Lp),[l,c]=t.pair(Np),[u,h]=t.pair(jp),[d,f]=t.pair(Tp),[p,g]=t.pair(zp),m=[];1!==i&&m.push(`brightness(${fU(i)})`),1!==s&&m.push(`contrast(${fU(s)})`),1!==o&&m.push(`saturate(${fU(o)})`),l%360!=0&&m.push(`hue-rotate(${fU(l%360)}deg)`),0!==u&&m.push(`invert(${fU(u)})`),0!==d&&m.push(`grayscale(${fU(d)})`),0!==p&&m.push(`sepia(${fU(p)})`);let y=!0;return e||(y=null!=(n||r||a||c||h||f||g)),[y?[1,[n??i,r??s,a??o,c??l,h??u,f??d,g??p],e]:null,m.length?m.join(" "):null]}]]),HB=new Map([[Xg,function(t){const e=WM("feGaussianBlur");return oU(e,t,"stdDeviation",2,kp,0,null,YB(t,0))?e:EB(e)}],[em,function(t){const e=WM("feDropShadow");e.setAttribute("color-interpolation-filters","sRGB");const i=oU(e,t,"dx",1,Dp,Be.ZERO,(t=>t.x),YB(t,0)),n=oU(e,t,"dy",1,Dp,Be.ZERO,(t=>t.y),YB(t,0)),s=oU(e,t,"stdDeviation",2,Pp,0,null,YB(t,0)),r=oU(e,t,"flood-color",7,Ep,null,null,YB(t,De.transparent));return i||n||s||r?e:EB(e)}],[tm,function(t){const e=WM("feColorMatrix");e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("type","matrix");const[i,n]=t.pair(Ip),[s,r]=t.pair(Cp),[o,a]=t.pair(Lp),[l,c]=t.pair(Np),[u,h]=t.pair(jp),[d,f]=t.pair(Tp),[p,g]=t.pair(zp),m=null!=(n||r||a||c||h||f||g),y=YB(t),v=new Zr;if(QB(y)&&v.brightness(i).contrast(s).saturate(o).hueRotate(l).invert(u).grayscale(d).sepia(p),!m){if(v.isIdentity)return EB(e);if(!y)return e.setAttribute("values",mU([...v.value])),e}const b=[n??i,r??s,a??o,c??l,h??u,f??d,g??p];if(0===jB.engine)e.setAttribute("values",mU([...v.value])),FB(e).set("values",[8,b,y]);else{const t=[...v.value],i=[...dO(b,60,(([t,e,i,n,s,r,o])=>(v.reset().brightness(t).contrast(e).saturate(i).hueRotate(n).invert(s).grayscale(r).sepia(o),[...v.value])))];if(cO(i),!lU(e,"values",9,i,t,[...v.reset().value]))return EB(e)}return e}]]);function ZB(t,e){if(!e.hasOwnVisibility)return;const i=e.start>0,n=e.end<jB.duration;(i||n)&&(jB.visibility.set(t,[e.start,e.end]),(jB.useLast?n:i)&&(jB.useDisplayVisibility?t.style.display="none":t.setAttribute("visibility","hidden")))}function YB(t,e){return t.start>0||t.end<jB.duration?null!=e?[t.start,t.end,e]:[t.start,t.end]:null}function QB(t){return!t||(jB.useLast?t[1]>=jB.duration:t[0]<=0)}function JB(t){let e;const i=t.value(Wd),[s,r]=t.pair(Gd);let[o,a]=t.pair(Ed);const[l,c]=t.pair(Dd),[u,h]=t.pair(Od),[d,f]=t.pair(Rd),[p,g]=t.pair(Pd);if(!c&&(0===l.x||0===l.y))return null;let m=!1,y=0;if(t.motionPath?.length>1){const o=t.motionPath[0].point,l=fs(t.motionPath),c=s?l.length:0,u=l.getPosTanAtLength(n(s*c,0,c))||{px:o.x,py:o.y,tx:0,ty:0};l.delete(),e=new Be(u.px,u.py),r&&(m=!0),0!==i&&(y=Math.atan2(u.ty,u.tx)*pe,-1===i&&(y+=180),y%=360,y&&a&&!m&&a.keyframes.forEach((t=>t.value+=y)))}else e=t.target.position;const v=(new $i).translate(e.x,e.y).rotate(o+y).skewAxis(u,d).scale(l.x,l.y).translate(-p.x,-p.y),b=m||null!=(a||c||h||f||g);return[m?t.motionPath:null,r,i,e,a,o%360,c,l,h,u%360,f,d%360,g,p,v,b]}function qB(t,e,i=!0){return function(t,e){if(!e.target.isElement||!e.target.isTransformable)return!0;const i=JB(e);if(!i)return!1;const[n,s,r,o,a,l,c,u,h,d,f,p,g,m,y,v]=i;return function(t,e){e.isIdentity||t.setAttribute("transform",yU(e))}(t,y),!v||(FB(t).set("transform",[1,[n,s,r,o,a??l,c??u,h??d,f??p,g??m]]),!0)}(t,e)?i?function(t,e){if(e.eq(Nd,0))return EB(t);const i=e.target;return e.filterContainer&&(t=jB.useFilterFuncs?function(t,e,i){const n=[],s=[];let r=!0;const o=e.filterContainer.hasOwnVisibility;for(const t of e.filterContainer.children){const e=GB.get(t.target.constructor);if(!e)continue;const a=o||t.hasOwnVisibility?YB(t):null,l=e(t,a,i);if(!l)continue;!r||t.target instanceof tm||(r=!1);const[c,u]=l;c&&n.push(c),u&&(a&&!(jB.useLast?a[1]>=jB.duration:a[0]<=0)||s.push(u))}if(!s.length&&!n.length)return t;if(!r){const e=WM("g");e.appendChild(t),t=e}return s.length&&(i?t.style.filter=s.join(" "):t.setAttribute("filter",s.join(" "))),n.length&&FB(t).set("filter",[4,n,YB(e)]),t}(t,e,jB.useCssFuncs):function(t,e){const i=WM("filter");let n=!0;for(const t of e.filterContainer.children){const e=HB.get(t.target.constructor);if(!e)continue;const s=e(t);s&&(i.appendChild(s),!n||s instanceof SVGFEColorMatrixElement||(n=!1))}if(!i.hasChildNodes())return EB(i),t;if(!n){i.setAttribute("x","-100%"),i.setAttribute("y","-100%"),i.setAttribute("width","300%"),i.setAttribute("height","300%");const e=WM("g");e.appendChild(t),t=e}const s=UB(i);return jB.defs.appendChild(i),DB(t,i),t.setAttribute("filter",WB(s)),t}(t,e)),t?(jB.useTitle&&i.title&&t.setAttribute("title",i.title),oU(t,e,"opacity",3,Nd,1),11!==i.blend&&(t.style.mixBlendMode=TM(i.blend)),i.isolate&&i.supportsChildren&&(t.style.isolation="isolate"),ZB(t,e),t):null}(t,e):(ZB(t,e),t):EB(t)}function KB(t,e){const i=function(t,e){return e.eq(Zd,0)?(t.setAttribute("fill","none"),!1):tU(t,e,"fill",Yd)?(oU(t,e,"fill-opacity",3,Zd,1),XB.has(t.constructor)||aU(t,e,"fill-rule",Fd,PM,0),!0):(t.setAttribute("fill","none"),!1)}(t,e),n=function(t,e){return!(e.eq(Jd,0)||e.eq(Kd,0)||!tU(t,e,"stroke",qd)||(oU(t,e,"stroke-opacity",3,Jd,1),oU(t,e,"stroke-width",2,Kd,1),aU(t,e,"stroke-linecap",tf,NM,0),aU(t,e,"stroke-linejoin",Xd,jM,0)||aU(t,e,"stroke-miterlimit",ef,fU,4),oU(t,e,"stroke-dasharray",4,nf,[])&&(oU(t,e,"stroke-dashoffset",1,sf,0),aU(t,e,"pathLength",rf,fU,0)),0))}(t,e);return!(!i&&!n||(aU(t,e,"paint-order",of,LM,0),0))}const XB=new Set([SVGRectElement,SVGEllipseElement,SVGCircleElement,SVGLineElement]);function tU(t,e,i,n){const s=e.animation(n);if(!s){const s=e.value(n);return!!s.isVisible&&(s instanceof Hi?(t.setAttribute(i,bU(s.color)),!0):eU(t,i,[new WE(s,0)]))}return s.keyframes[0].value instanceof Hi?function(t,e,i){return!!i.find((t=>t.value.isVisible))&&cU(t,e,7,i,(t=>t.color))}(t,i,s.keyframes):eU(t,i,s.keyframes)}function eU(t,e,i){if(!i.find((t=>t.value.stopColors.isVisible)))return!1;const[n,s]=function(t){const e=$B(t).value,i=WM(e instanceof sn?"linearGradient":"radialGradient");i.setAttribute("gradientUnits","userSpaceOnUse"),cU(i,"spreadMethod",8,t,(t=>t.spread),0,!0);const n=e.stopColors.length;for(let e=0;e<n;e++){const n=WM("stop");cU(n,"stop-color",7,t,(t=>t.stopColors.getColorAt(e))),cU(n,"offset",3,t,(t=>t.stopColors.getOffsetAt(e))),i.appendChild(n)}let s=t[0].value.type;const r=[],o=aO(t,((t,e)=>(t.type!==s&&(r.push(e),s=t.type),t instanceof on?t.end:t.center)));let a=0;for(let t of r){t+=a,o[t-1].easing=null;const e=o[t-1].clone(),i=o[t].clone();i.easing=null,e.offset=i.offset=(e.offset+i.offset)/2,o.splice(t,0,e,i),a+=2}cO(o);const l=cO(aO(t,(t=>t.rotate))),c=cO(aO(t,(t=>t.scale))),u=function(t,e,i){return(new $i).translate(t.x,t.y).rotate(e).scale(1,i).translate(-t.x,-t.y)}($B(o).value,$B(l).value,$B(c).value);if(u.isIdentity||i.setAttribute("gradientTransform",yU(u)),1===l.length&&1===c.length){if(1===o.length)return[i,r];if(0===r.length)return[i,r]}return FB(i).set("gradientTransform",[2,[o,l,c]]),[i,r]}(i);if(!s.length){const s=iU(i,n),r=UB(s);return jB.defs.appendChild(s),DB(t,s),t.setAttribute(e,WB(r)),!0}jB.defs.appendChild(n),DB(t,n);const r=BB(UB(n)),o=[];for(const e of function*(t,e){let i=0;for(const n of e){const e=t.slice(i,n);0!==e.length&&(yield e.map(lO),i=n)}const n=t.slice(i);n.length>0&&(yield n.map(lO))}(i,s)){const i=iU(e),n=UB(i);i.setAttribute("href",r),jB.defs.appendChild(i),DB(t,i),o.push(new WE(n,e[0].offset)),e.length>1&&o.push(new WE(n,e[e.length-1].offset))}return cO(o),lU(t,e,0,o),!0}function iU(t,e){const i=t[0].value;return i instanceof sn?function(t,e){return cU(t,"x1",1,e,(t=>t.start.x)),cU(t,"y1",1,e,(t=>t.start.y)),cU(t,"x2",1,e,(t=>t.end.x)),cU(t,"y2",1,e,(t=>t.end.y)),t}(e||WM("linearGradient"),t):i instanceof rn?function(t,e){return cU(t,"cx",1,e,(t=>t.center.x)),cU(t,"cy",1,e,(t=>t.center.y)),cU(t,"r",2,e,(t=>t.radius)),t}(e||WM("radialGradient"),t):i instanceof on?function(t,e){return cU(t,"cx",1,e,(t=>t.end.x)),cU(t,"cy",1,e,(t=>t.end.y)),cU(t,"r",2,e,(t=>t.endRadius)),cU(t,"fx",1,e,(t=>t.start.x)),cU(t,"fy",1,e,(t=>t.start.y)),cU(t,"fr",2,e,(t=>t.startRadius)),t}(e||WM("radialGradient"),t):e}function nU(t,e,i){return e.x===i&&e.y===i?t:(t.style.transformBox="fill-box",t.style.transformOrigin=`${MU(e.x)}% ${MU(e.y)}%`,t.style.transform=`translate(${MU(i-e.x)}%, ${MU(i-e.y)}%)`,sU(t))}function sU(t){const e=WM("g");return e.appendChild(t),e}function rU(t,e){const i=UR(e.target);if(!i)return!1;const n=[];for(const t of i){const[i,s]=e.pair(t);n.push(s||i),e.animations.delete(t)}const s=$R(e.target,n);if(!s)return!1;if(e.properties.set($d,$B(s).value),s.length>1){const t=HE($d.id);e.animations.set($d,t.createAnimation(s))}return oU(t,e,"d",6,$d)}function oU(t,e,i,n,s,r,o,a,l){return lU(t,i,n,e.animation(s)?.keyframes,e.value(s),r,o,a,l)}function aU(t,e,i,n,s,r){const o=e.value(n);return!kt(o,r)&&(t.setAttribute(i,s(o)),!0)}function lU(t,e,i,n,s,r,o,a,l){const c=OB(i),u=s;if(QB(a)){if(null==s){if(!n?.length)return!1;s=$B(n).value}1===n?.length&&(s=n[0].value,n=null)}else s=a[2];const h=!kt(s,r);if(h){const i=c(o?o(s):s);l?t.style[e]=i:t.setAttribute(e,i)}if(!n?.length){if(!a||null==a[2])return h;n=[new WE(u,0)]}return FB(t).set(e,[0,i,o?aO(n,o):n,a]),!0}function cU(t,e,i,n,s,r,o,a){const l=cO(aO(n,s,o));return lU(t,e,i,l,$B(l).value,r,null,null,a)}function uU(t){if(!t.children.length)return null;const e=WM("g");return VB(e,t.children)?qB(e,t):EB(e)}function hU(t,e,i){let n;return 2!==t.length||e||i?e&&2===jB.engine?(n=WM("path"),lU(n,"d",6,e,null,null,(t=>Ls(t,i)))):(n=WM(i?"polygon":"polyline"),lU(n,"points",5,e,t)):(n=WM("line"),n.setAttribute("x1",fU(t[0].x)),n.setAttribute("y1",fU(t[0].y)),n.setAttribute("x2",fU(t[1].x)),n.setAttribute("y2",fU(t[1].y))),n}const dU=new Qs;function fU(t){return f(function(t,e=1e4){return Math.round(t*e)/e}(t,NB),LB)}function pU(t){return t?`${fU(t)}deg`:"0"}function gU(t){return t?`${fU(t)}px`:"0"}function mU(t){return t.map(fU).join(" ")}function yU(t){return t.isShiftedIdentity?`translate(${fU(t.tx)} ${fU(t.ty)})`:`matrix(${t.value.map(fU).join(" ")})`}function vU(t){return`${fU(t.x)},${fU(t.y)}`}function bU(t){return b(t.r,t.g,t.b,t.a)}const xU=/\s*([a-z])\s*/gi;function wU(t){return function(t,e,i,n){const s=t.length;if(0===s)return"";const r=n??ds,o=[],a=(t,e)=>{const i=t.point;1!==e.joint&&e.handleIn?1!==t.joint&&t.handleOut?o.push("c",r(t.handleOut.x-i.x),r(t.handleOut.y-i.y),r(e.handleIn.x-i.x),r(e.handleIn.y-i.y),r(e.point.x-i.x),r(e.point.y-i.y)):o.push("q",r(e.handleIn.x-i.x),r(e.handleIn.y-i.y),r(e.point.x-i.x),r(e.point.y-i.y)):1!==t.joint&&t.handleOut?o.push("q",r(t.handleOut.x-i.x),r(t.handleOut.y-i.y),r(e.point.x-i.x),r(e.point.y-i.y)):o.push("l",r(e.point.x-i.x),r(e.point.y-i.y))};let l,c=null,u=null;!i&&(i=t[0].point);for(let e=0;e<s;e++)l=t[e],null!=c&&1!==l.type?(a(u,l),u=l,2===l.type?c=null:3===l.type&&(a(l,c),o.push("z"),u=c,c=null)):(null==u?o.push("m",r(i.x),r(i.y)):o.push("m",r(l.point.x-u.point.x),r(l.point.y-u.point.y)),c=u=l);return o.join(" ")}(t,0,null,fU).replace(xU,"$1")}function MU(t){return Math.round(100*t)}let SU,kU;async function _U(t,e,i){i.display=!0,i.engine=0,i.separator=":";const[n,s,r,o,a]=await PB(IU,t,e,i,0);if(s?.length){const t={prefix:o,duration:a,speed:(i.speed||1)*(i.reverse?-1:1),alternate:i.alternate?1:void 0,repeat:i.repeat||void 0,load:i.load||0,actions:i.actions||void 0},e="ExpressiveAnimatorPlayer";let l;if(3===i.load){t.load=0,t.alternate=1;const e=n.ownerDocument.createComment("expressive="+IB([t,s,r]));n.prepend(e)}else l=`${await(await fetch("/assets/animator/player.js")).text()}\nwindow["${e}"](\n${IB(t)},\n${IB(s)},\n${IB(r)}\n);`;if(l){const t=WM("script");t.textContent=l,n.appendChild(t)}}return n}function IU(t){SU=t,kU=new vB;try{const e=[...YU(t.root)],i=kU.keys();return[t.root,e,i,t.prefix,t.duration]}finally{kU.clear(),kU=null,SU=null}}const CU="*";function LU(t,e){return t.map((t=>function(t,e){const i=[t.offset,e?e(t.value):t.value],n=function(t){if(!t)return null;const e=dE(t.func);if(e){switch(e.id){case"ease":return t.inverted?2:1;case"ease-both":return 3;case"step":return t.inverted?5:4}return null}const i=t.func,n=2*i.type+(t.inverted?1:0);if(i instanceof qD)return[n,i.h1.x,i.h1.y,i.h2.x,i.h2.y];if(i instanceof eE)return[n,i.steps];if(i instanceof rE)return[n,i.bounces,i.stiffness];if(i instanceof iE)return[n,i.oscillations,i.stiffness];if(i instanceof sE)return[n,i.amplitude];if(i instanceof nE)return[n,i.oscillations];if(i instanceof oE){const t=zU(i.points);return t.unshift(n),t}return null}(t.easing);return null!=n&&i.push(n),i}(t,e)))}function NU(t,e){return t instanceof FE?LU(t.keyframes,e):[[0,e?e(t):t]]}function jU(t,e){const i=t[0].value[e];for(let n=1;n<t.length;n++)if(t[n].value[e]!==i)return!1;return!0}function TU(t){return[t.x,t.y]}function zU(t){const e=[];for(const i of t)e.push(i.x,i.y);return e}function AU(t,e){return 1!==e.joint&&e.handleIn?1!==t.joint&&t.handleOut?[t.handleOut.x,t.handleOut.y,e.handleIn.x,e.handleIn.y,e.point.x,e.point.y]:[e.handleIn.x,e.handleIn.y,e.point.x,e.point.y]:1!==t.joint&&t.handleOut?[t.handleOut.x,t.handleOut.y,e.point.x,e.point.y]:[e.point.x,e.point.y]}function PU(t,e){return!(1!==t.joint&&null!=t.handleOut||1!==e.joint&&null!=e.handleIn)}function DU(t){const e=[];let i,n;for(const s of t)i&&1!=s.type?(e.push(...AU(n,s)),n=s,2===s.type?i=null:3===s.type&&(PU(s,i)||e.push(...AU(s,i)),n=i,i=null)):(e.push(s.point.x,s.point.y),i=n=s);return e}function EU(t,e){const i=[];for(let n=0;n<t.length;n++)e.includes(n)?i.push(fU(t[n])):i.push(CU);return i.join(" ")}function OU(t,e){const i=[];for(let n=0;n<t.length;n+=2)e.includes(n)?i.push(fU(t[n])):i.push(CU),i.push(","),e.includes(n+1)?i.push(fU(t[n+1])):i.push(CU);return i.join(" ")}function RU(t,e,i){const n=[];let s=0;function r(i){for(let r=0;r<i;r++)e.includes(s+r)?n.push(fU(t[s+r])):n.push(CU);s+=i}const o=(t,e)=>e?1!==e.joint&&e.handleIn?1!==t.joint&&t.handleOut?(n.push("C"),void r(6)):(n.push("Q"),void r(4)):1!==t.joint&&t.handleOut?(n.push("Q"),void r(4)):(n.push("L"),void r(2)):(n.push("M"),void r(2));let a,l;for(const t of i)a&&1!=t.type?(o(l,t),l=t,2===t.type?a=null:3===t.type&&(PU(t,a)||o(t,a),n.push("Z"),l=a,a=null)):(o(t,null),a=l=t);return n.join(" ").replace(/\s*([MLQCZ])\s+/gi,"$1")}function WU(t){return t[0]}const BU=[[0,3,8],[1,4,9],[2,5,8]];function UU(t,e,i,n){const s=t[0].value;if(e)for(const i of t)i.value=e(i.value);const r=function(t){const e=[];for(let i=t[0].value.length-1;i>=0;i--)jU(t,i)&&e.push(i);return e}(t),o=t[0].value,a=i(o,r,s);if(r.length>0)for(const e of r)for(const i of t)i.value.splice(e,1);const l=BU[n];return 1===o.length?a===CU?[l[0],LU(t,WU)]:[l[1],LU(t,WU),kU.get(a)]:[l[2],LU(t),kU.get(a)]}function $U(t){const e=[Math.round(t.r),Math.round(t.g),Math.round(t.b)];return 1!==t.a&&e.push(Math.round(1e4*t.a)/1e4),e}function FU(t,e){const i=zB.get(t);return LU(e,(t=>kU.get(i(t))))}function VU(t,e,i){return e&&(null!=i&&(e=[e[0],e[1],i]),2===t.length&&t.push(0),t.push(e)),t}const GU=new Map([[0,function*([t],e){yield[4,NU(t),kU.get("blur(*px)"),e]}],[1,function*(t,e){for(let i=0;i<HU.length;i++){const[n,s,r]=HU[i];(t[i]instanceof FE||t[i]!==n)&&(yield[s,NU(t[i]),kU.get(r),e])}}],[2,function*([t,e,i],n){yield[16,[[10,NU(t,$U)],[6,NU(e,TU)],[1,NU(i)]],kU.get("drop-shadow(* * *px)"),n]}]]),HU=[[1,4,"brightness(*)"],[1,4,"contrast(*)"],[1,4,"saturate(*)"],[0,3,"hue-rotate(*deg)"],[0,4,"invert(*)"],[0,4,"grayscale(*)"],[0,4,"sepia(*)"]],ZU=new Map([[0,function(t,e,i){switch(t){case 1:return VU([0,LU(e)],i);case 2:return VU([1,LU(e)],i);case 3:return VU([2,LU(e)],i);case 7:return VU([10,LU(e,$U)],function(t,e){if(t)return null!=t[2]&&(t[2]=e(t[2])),t}(i,$U));case 4:return UU(e,null,EU,1);case 5:return UU(e,zU,OU,0);case 6:return UU(e,DU,RU,0);case 0:return VU([11,LU(e),void 0,i],i)}return VU([12,FU(t,e)],i)}],[1,function([t,e,i,n,s,r,o,a,l]){let c;return c=t?[wU(t),1===i?1:-1===i?-1:0]:n.isZero?void 0:[n.x,n.y],[13,[[0,NU(e||0)],[0,NU(s)],[6,NU(r,TU)],[0,NU(o)],[0,NU(a)],[6,NU(l,TU)]],c]}],[2,function([t,e,i]){return[14,[[6,LU(t,TU)],[0,LU(e)],[0,LU(i)]]]}],[4,function(t,e){const i=[];for(const[e,n,s]of t)GU.has(e)&&i.push(...GU.get(e)(n,s||void 0));return i.length?[15,i,e||void 0]:null}],[5,function([t,e,i]){return[17,[[1,NU(t)],[1,NU(e)],[7,NU(i,(t=>t.isSimple?[t.value,t.value,t.value,t.value]:t.value))]]]}],[6,function([t,e,i,n]){return[18,[[1,NU(t)],[1,NU(e)],[0,NU(i)],[0,NU(n)]]]}],[7,function([t,e,i,n,s,r,o,a]){return[19,[[1,NU(t)],[1,NU(e)],[1,NU(i)],[0,NU(n)],[0,NU(s)],[0,NU(r)],[0,NU(o)],[0,NU(a)]]]}],[8,function([t,e,i,n,s,r,o],a){return[20,[VU([1,NU(t)],a,1),VU([1,NU(e)],a,1),VU([1,NU(i)],a,1),VU([0,NU(n)],a,0),VU([2,NU(s)],a,0),VU([2,NU(r)],a,0),VU([2,NU(o)],a,0)]]}]]);function*YU(t){for(let e=t.firstElementChild;null!=e;e=e.nextElementSibling)yield*QU(e)}function*QU(t){const e=function(t){return SU.visibility.get(t)}(t),i=function(t){const e=SU.animations.get(t);if(!e)return null;const i=[];for(const[t,n]of e){const e=ZU.get(n.shift());if(!e)continue;const s=e(...n);s&&(s.unshift(kU.get(t)),i.push(s))}return i.length?i:null}(t);if(!e&&!i)return yield*YU(t);let n=Array.from(YU(t));n.length||(n=null);const s=[UB(t),i||0,n||0,e||0];for(;0===s[s.length-1];)s.pop();yield s}let JU,qU,KU=0,XU=0,t$=!1,e$=1,i$=1;async function n$(t,e,i){return e$=i.speed||1,KU=i.repeat||0,XU=i.repeatDur||0,t$=!!i.freeze,i.engine=1,i.separator="-",i.filterFuncs=!1,PB(s$,t,e,i,63)}function s$(t){JU=t,i$=t.duration,qU=`${fU(i$/e$)}ms`;try{return r$(t.root,[0,t.duration]),t.root}finally{JU=null,i$=0,qU=null}}function r$(t,e){let i,n;for(let s=t.firstElementChild;null!=s;s=s.nextElementSibling){let t=JU.visibility.get(s);if(t&&(t[0]>e[0]||t[1]<e[1])){if(t=[Math.max(t[0],e[0]),Math.min(t[1],e[1])],t[1]<=t[0]){n??=[],n.push(s);continue}i=t}else t=null,i=e;s.firstElementChild&&r$(s,i);const r=JU.animations.get(s);if(r?.size)for(const[t,e]of r)o$.get(e.shift())?.(s,t,...e);t?v$(s,t):s.querySelector(":scope > animate[attributeName=visibility]")||s.removeAttribute("visibility")}if(n?.length)for(const t of n)t.remove()}const o$=new Map([[0,function(t,e,i,n){t.appendChild(b$(n,OB(i),e))}],[1,function(t,e,i){a$(t,function*([t,e,i,n,s,r,o,a,l],c){t?(yield w$("translate","0 0",c),yield function(t,e,i,n="transform"){const s=b$(i,fU,n,"animateMotion","keyPoints");return s.setAttribute("path",t),0!==e&&s.setAttribute("rotate",-1===e?"auto-reverse":"auto"),s}(wU(t),i,e.keyframes,c)):f$(n)||(yield w$("translate",p$(n),c)),s instanceof FE?yield x$("rotate",s.keyframes,fU,c):s%360&&(yield w$("rotate",fU(s),c)),o instanceof FE?a instanceof FE?(yield x$("rotate",a.keyframes,m$,c),yield x$("skewX",o.keyframes,m$,c),yield x$("rotate",a.keyframes,fU,c)):a%360?(yield w$("rotate",m$(a),c),yield x$("skewX",o.keyframes,m$,c),yield w$("rotate",fU(a),c)):yield x$("skewX",o.keyframes,m$,c):o&&(a instanceof FE?(yield x$("rotate",a.keyframes,m$,c),yield w$("skewX",m$(o),c),yield x$("rotate",a.keyframes,fU,c)):a%360?(yield w$("rotate",m$(a),c),yield w$("skewX",m$(o),c),yield w$("rotate",fU(a),c)):yield w$("skewX",m$(o),c)),r instanceof FE?yield x$("scale",r.keyframes,p$,c):1===r.x&&1===r.y||(yield w$("scale",p$(r),c)),l instanceof FE?yield x$("translate",l.keyframes,g$,c):f$(l)||(yield w$("translate",g$(l),c))}(i,e))}],[2,function(t,e,i){a$(t,function*([t,e,i],n){t.length>1?yield x$("translate",t,p$,n):f$(t[0].value)||(yield w$("translate",p$(t[0].value),n)),e.length>1?yield x$("rotate",e,fU,n):e[0].value%360&&(yield w$("translate",fU(e[0].value),n)),i.length>1?yield x$("scale",i,d$,n):1!==i[0].value&&(yield w$("scale",d$(i[0].value),n)),t.length>1?yield x$("translate",t,g$,n):f$(t[0].value)||(yield w$("translate",g$(t[0].value),n))}(i,e))}],[4,function(t,e,i){a$(t,function*(t,e,i){for(let[n,s,r]of t)l$.has(n)&&(r&&r[0]<=0&&r[1]>=i$&&(r=null),yield*l$.get(n)(s,r,e,i))}(i,e,JU.useCssFuncs))}]]);function a$(t,e){let i=!1;for(const n of e)n&&(i&&n.setAttribute("additive","sum"),t.appendChild(n),i=!0)}const l$=new Map([[0,function*([t],e,i,n){yield k$(t,e,"blur(*px)",0,i,n)}],[1,function*(t,e,i,n){let s=0;for(const r of t){const[t,o]=c$[s++];yield k$(r,e,o,t,i,n)}}],[2,function*(t,e,i,n){const s=[...dO(t,0,(t=>[...t]))];if(cO(s),!s.length)return;const r=n?h$:u$;if(1===s.length){const t=s[0].value;t[0].a&&(yield M$(s[0].value,r,[t[0],Be.ZERO,0],e,i,n))}else yield S$(s,r,i,n)}]]),c$=[[1,"brightness(*)"],[1,"contrast(*)"],[1,"saturate(*)"],[0,"hue-rotate(*deg)"],[0,"invert(*)"],[0,"grayscale(*)"],[0,"sepia(*)"]];function u$([t,e,i]){return`drop-shadow(${bU(t)} ${fU(e.x)} ${fU(e.y)} ${fU(i)})`}function h$([t,e,i]){return`drop-shadow(${fU(e.x)}px ${fU(e.y)}px ${fU(i)}px ${bU(t)})`}function d$(t){return`1 ${fU(t)}`}function f$(t){return a(t.x,0)&&a(t.y,0)}function p$(t){return`${fU(t.x)} ${fU(t.y)}`}function g$(t){return`${fU(-t.x)} ${fU(-t.y)}`}function m$(t){return fU(-t)}function y$(t){return t?"visible":"hidden"}function v$(t,e){let i;e[0]>0?(i=[],i.push(new WE(0,0)),i.push(new WE(0,e[0])),i.push(new WE(1,e[0])),e[1]<i$?(i.push(new WE(1,e[1])),i.push(new WE(0,e[1])),i.push(new WE(0,i$))):i.push(new WE(1,i$))):e[1]<i$&&(i=[],i.push(new WE(1,0)),i.push(new WE(1,e[1])),i.push(new WE(0,e[1])),i.push(new WE(0,i$))),i&&t.appendChild(b$(i,y$,"visibility"))}function b$(t,e,i,n="animate",s="values"){return function(t,e,i,n,s="values"){return n&&t.setAttribute("attributeName",n),t.setAttribute(s??"values",e.map((t=>i(t.value))).join(";")),t}(function(t,e="animate"){const i=t[0];i.offset>0&&t.unshift(new WE(i.value,0));const n=t[t.length-1];n.offset<i$&&(n.easing=null,t.push(new WE(n.value,i$)));const s=WM(e),[r,o]=function(t){let e=!0;const i=[],n=[],s=t[0].offset,r=t[t.length-1].offset-s;for(const o of t)if(i.push(fU((o.offset-s)/r)),o.easing){e=!1;const t=o.easing.func;n.push(`${fU(t.h1.x)} ${fU(t.h1.y)} ${fU(t.h2.x)} ${fU(t.h2.y)}`)}else n.push("0 0 1 1");return n.pop(),[i.join(";"),e?null:n.join(";")]}(t);return s.setAttribute("keyTimes",r),o?(s.setAttribute("calcMode","spline"),s.setAttribute("keySplines",o)):s.setAttribute("calcMode","linear"),_$(s)}(t,n),t,e,i,s)}function x$(t,e,i,n="transform"){const s=b$(e,i,n,"animateTransform","values");return s.setAttribute("type",t),s}function w$(t,e,i="transform"){const n=WM("animateTransform");return n.setAttribute("attributeName",i),n.setAttribute("type",t),n.setAttribute("from",e),n.setAttribute("to",e),n.setAttribute("calcMode","discrete"),_$(n)}function M$(t,e,i,n,s,r){if(t===i)return null;const o=[new WE(t,0)];return n&&(n[0]>0?o[0].offset=n[0]:n[1]<i$&&(o[0].offset=n[1])),S$(o,e,s,r)}function S$(t,e,i,n){const s=b$(t,e,i);return n&&s.setAttribute("attributeType","CSS"),s}function k$(t,e,i,n,s,r){const o=t=>i.replace("*",fU(t));return t instanceof FE?S$(t.keyframes,o,s,r):M$(t,o,n,e,s,r)}function _$(t){return t.setAttribute("dur",qU),1!==KU&&(t.setAttribute("repeatCount",KU?KU.toString():"indefinite"),!KU&&XU&&t.setAttribute("repeatDur",`${XU}ms`)),t$&&KU&&t.setAttribute("fill","freeze"),t}const I$="";let C$,L$,N$,j$,T$,z$,A$=0,P$=!1,D$=!1,E$=!1;const O$=new Map,R$=new Map;async function W$(t,e,i){return i.engine=2,i.filterFuncs=i.cssFilterFuncs=!0,i.separator="-",i.display=!1,N$=i.speed||1,j$=i.repeat||0,P$=i.reverse,D$=i.alternate,E$=i.freeze,T$=i.start??0,z$=i.onHover,PB(B$,t,e,i,49)}function B$(t){C$=t,A$=t.duration,L$=t.prefix+t.separator;try{return Z$(t.root,[0,t.duration]),function(t,e){if(!R$.size)return;const i=WM("style");(function(t){for(const[e,i]of R$){if(!i.size)continue;const n=[],s=[];for(const[e,r]of i)n.push(`${t}${e}`),s.push(r);e.style.animationName=n.join(",");let r=null;const o=s.length-1,a=Math.ceil(o/2);for(let t=1;t<=a;t++){let e=!0;for(let i=t;i<=o;i++)if(s[i]!==s[i%t]){e=!1;break}if(e){r=t;break}}null!=r?(1!==r||s[0]||(r=0),s.splice(r)):0!==o||s[0]||s.splice(0),s.length&&(e.style.animationComposition=s.map((t=>t?"add":"replace")).join(","))}})(L$),i.textContent=[U$(t),F$(L$).join(I$)].join(I$),e.appendChild(i)}(t.root,t.defs),t.root}finally{C$=null,A$=0,O$.clear(),R$.clear()}}function U$(t){const e=`${fU(A$/N$)}ms`;let i=j$||"infinite";const n=$$(P$,D$),s=`#${RB(UB(t))}`;let r=E$?"both":"none",o="running";const a=[];if(2===T$)o="paused",r="both",i="1",a.push(`${s} * {animation-delay: calc(var(--animation-progress, 0) * -${e})}`);else if(1===T$)o="paused",a.push(`${s}:hover * {animation-play-state:running}`),E$||a.push(`${s}:not(:hover) * {animation-name: none !important; offset-path: none !important}`);else switch(z$){case 1:a.push(`${s}:hover * {animation-play-state:paused}`);break;case 2:a.push(`${s}:hover * {animation-direction:${$$(!P$,D$)}}`)}return a.unshift(`${s} * {animation: ${e} linear ${i} ${n} ${r} ${o};offset-rotate:0deg}`),a.join(I$)}function $$(t,e){return t?e?"alternate-reverse":"reverse":e?"alternate":"normal"}function F$(t){const e=[];for(const[i,n]of O$)e.push(`@keyframes ${t}${n}{${i}}`);return e}function V$(t){if(O$.has(t))return O$.get(t);const e=C$.id++;return O$.set(t,e),e}function G$(t,e,i){R$.has(t)||R$.set(t,new Map),R$.get(t).set(e,i)}const H$=new Map([[0,function(t,e,i,n){for(const[i,n]of J$)if(t instanceof i&&n.includes(e))return;6===i?i=22:q$.has(e)&&(i=20),lF(t,e,i,n,!1)}],[2,function(t,e,[i,n,s]){e="transform";const r=!0,o=new $i,a=()=>{o.isIdentity||(aF(t,e,21,o,r),o.reset())};i.length>1?lF(t,e,10,i,r):o.translate(i[0].value.x,i[0].value.y),n.length>1?(a(),lF(t,e,14,n,r)):o.rotate(n[0].value),s.length>1?(a(),lF(t,e,17,s,r)):o.scale(1,s[0].value),i.length>1?(a(),lF(t,e,10,i,r,(t=>t.negate()))):o.translate(-i[0].value.x,-i[0].value.y),a()}],[4,function(t,e,i){oF(t,e,"none");for(let[n,s,r]of i)K$.has(n)&&(r&&r[0]<=0&&r[1]>=A$&&(r=null),K$.get(n)(t,s,r,e));tF(t,e)}],[1,function(t,e,[i,n,s,r,o,a,l,c,u]){let h=!1;const d=new $i,f=()=>{d.isIdentity||(aF(t,e,21,d,h),d.reset(),h=!0)};n?(0!==s&&(t.style.offsetRotate=-1===s?"reverse":"auto"),oF(t,e,`none;offset-path:path("${wU(i)}")`,h),h=!0,lF(t,"offset-distance",13,n.keyframes,h)):r.isZero||d.translate(r.x,r.y),o instanceof FE?(f(),lF(t,e,14,o.keyframes,h),h=!0):o&&d.rotate(o),l instanceof FE?(f(),c instanceof FE?(lF(t,e,14,c.keyframes,h,sF),lF(t,e,18,l.keyframes,h,sF),lF(t,e,14,c.keyframes,h)):c?lF(t,e,19,l.keyframes,h,(t=>[c,t])):lF(t,e,18,l.keyframes,h,sF),h=!0):l&&(c instanceof FE?(f(),lF(t,e,19,c.keyframes,h,(t=>[t,l])),h=!0):c?d.skewAxis(l,c):d.skew(-l,0)),a instanceof FE?(f(),lF(t,e,15,a.keyframes,h),h=!0):d.scale(a.x,a.y),u instanceof FE?(f(),lF(t,e,10,u.keyframes,h,(t=>t.negate())),h=!0):u.isZero||d.translate(-u.x,-u.y),f()}],[3,function(t,e,[i,n,s,r,o,a]){let l=!1;const c=new $i,u=()=>{c.isIdentity||(aF(t,e,21,c,l),c.reset(),l=!0)};if(i.x!==n){const s=n-i.x;o instanceof FE?(u(),lF(t,e,11,o.keyframes,l,(t=>s*t)),l=!0):c.translate(s*o,0)}if(i.y!==n){const s=n-i.y;a instanceof FE?(u(),lF(t,e,12,a.keyframes,l,(t=>s*t)),l=!0):c.translate(s*a,0)}o instanceof FE?(u(),lF(t,e,16,o.keyframes,l,(t=>t/s)),l=!0):o!==s&&c.scale(o/s,1),a instanceof FE?(u(),lF(t,e,17,a.keyframes,l,(t=>t/r)),l=!0):a!==r&&c.scale(1,a/r),u()}]]);function Z$(t,e){let i;for(let n=t.firstElementChild;null!=n;n=n.nextElementSibling){let t=C$.visibility.get(n);if(t&&(t[0]>e[0]||t[1]<e[1])){if(t=[Math.max(t[0],e[0]),Math.min(t[1],e[1])],t[1]<=t[0])continue;i=t}else t=null,i=e;n.firstElementChild&&Z$(n,i);const s=C$.animations.get(n);if(s?.size)for(const[t,e]of s)H$.get(e.shift())?.(n,t,...e);t&&Q$(n,t)}}function Y$(t,e,i,n,s,r){let o;const a=`{${i}:${n};animation-timing-function:step-end}`,l=`{${i}:${s};animation-timing-function:step-end}`;if(e[0]>0){o=[];const t=fU(uF(e[0]));if(e[1]<A$){const t=fU(uF(e[1]));o.push(`0%,${t}%,100%${l}`)}else o.push(`0%,100%${l}`);o.push(`${t}%${a}`)}else{if(!(e[1]<A$))return!1;{o=[];const t=fU(uF(e[1]));o.push(`0%${a}`),o.push(`${t}%,100%${l}`)}}return G$(t,V$(o.join(I$)),r),!0}function Q$(t,e){Y$(t,e,"visibility","visible","hidden",!1)}const J$=new Map([[SVGStopElement,["offset"]],[SVGGradientElement,["spreadMethod"]],[SVGLinearGradientElement,["x1","x2","y1","y2"]],[SVGRadialGradientElement,["cx","cy","r","fx","fy","fr"]]]),q$=new Set(["x","y","width","height","cx","cy","r","rx","ry"]),K$=new Map([[0,function(t,[e],i,n){nF(t,e,0,"blur(*px)",i,n)}],[1,function(t,[e,i,n,s,r,o,a],l,c){nF(t,e,1,"brightness(*)",l,c),nF(t,i,1,"contrast(*)",l,c),nF(t,n,1,"saturate(*)",l,c),nF(t,s,0,"hue-rotate(*deg)",l,c),nF(t,r,0,"invert(*)",l,c),nF(t,o,0,"grayscale(*)",l,c),nF(t,a,0,"sepia(*)",l,c)}],[2,function(t,e,i,n){const s=[...dO(e,0,(t=>[...t]))];if(s.length){if(function(t,e){e??=kt;let i=t.length-1;for(let n=2;n<=i;n++){const s=t[n-2],r=t[n-1],o=t[n];a(r.offset,o.offset)&&(r.easing=null,!s.easing&&e(s.value,r.value))?(s.easing=new pE(new eE(1),!0),t.splice(n-1,1),n--,i--):a(s.offset,r.offset)&&(s.easing=null,!r.easing&&e(r.value,o.value))&&(s.easing=new pE(new eE(1),!1),t.splice(n-1,1),n--,i--)}}(s),cO(s),1===s.length){const e=s[0].value;if(!e[0].a)return;return i?(tF(t,n),void Y$(t,i,n,eF(e),eF([e[0].withOpacity(0),Be.ZERO,0]),!0)):void X$.push(eF(e))}tF(t,n),G$(t,cF(s,eF,n),!0)}}]]),X$=[];function tF(t,e,i=!0){X$.length&&(aF(t,e,23,X$,i),X$.splice(0))}function eF([t,e,i]){return`drop-shadow(${gU(e.x)} ${gU(e.y)} ${gU(i)} ${bU(t)})`}function iF(t,e){return t.replace("*",fU(e))}function nF(t,e,i,n,s,r){if(!(e instanceof FE)){if(e===i)return;return s?(tF(t,r),void Y$(t,s,r,iF(n,e),iF(n,i),!0)):void X$.push(iF(n,e))}tF(t,r),G$(t,cF(e.keyframes,(t=>iF(n,t)),r),!0)}function sF(t){return-t}function rF(t){return t?PE(t,2):null}function oF(t,e,i,n=!1){G$(t,V$(`0%,100%{${e}:${i}}`),n)}function aF(t,e,i,n,s){G$(t,V$(`0%,100%{${e}:${OB(i)(n)}}`),s)}function lF(t,e,i,n,s,r){r&&(n=aO(n,r)),G$(t,cF(n,OB(i),e),s)}function cF(t,e,i){const n=[],s=t.length-1;for(let r=0;r<=s;r++){const o=uF(t[r].offset);let a=`${fU(o)}%`,l=null;0===r&&o>0?t[r].easing?n.push("0%{animation-timing-function:step-start}"):a=`0%,${a}`:r===s&&o<100&&(a=`${a},100%`),l=rF(t[r].easing),n.push(`${a}{${i}:${e(t[r].value)}${l?`;animation-timing-function:${l}`:""}}`)}return V$(n.join(I$))}function uF(t){return Math.round(100*t/A$*100)/100}const hF=15,dF=573,fF=-2;function pF(t){return gF(t.map((([t,e])=>new Array(t).fill(e,0,t))))}function gF(t){return t.reduce(((t,e)=>t.concat(Array.isArray(e)?gF(e):e)),[])}const mF=[0,1,2,3].concat(...pF([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function yF(){const t=this;function e(t,e){let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}t.build_tree=function(i){const n=t.dyn_tree,s=t.stat_desc.static_tree,r=t.stat_desc.elems;let o,a,l,c=-1;for(i.heap_len=0,i.heap_max=dF,o=0;o<r;o++)0!==n[2*o]?(i.heap[++i.heap_len]=c=o,i.depth[o]=0):n[2*o+1]=0;for(;i.heap_len<2;)l=i.heap[++i.heap_len]=c<2?++c:0,n[2*l]=1,i.depth[l]=0,i.opt_len--,s&&(i.static_len-=s[2*l+1]);for(t.max_code=c,o=Math.floor(i.heap_len/2);o>=1;o--)i.pqdownheap(n,o);l=r;do{o=i.heap[1],i.heap[1]=i.heap[i.heap_len--],i.pqdownheap(n,1),a=i.heap[1],i.heap[--i.heap_max]=o,i.heap[--i.heap_max]=a,n[2*l]=n[2*o]+n[2*a],i.depth[l]=Math.max(i.depth[o],i.depth[a])+1,n[2*o+1]=n[2*a+1]=l,i.heap[1]=l++,i.pqdownheap(n,1)}while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(e){const i=t.dyn_tree,n=t.stat_desc.static_tree,s=t.stat_desc.extra_bits,r=t.stat_desc.extra_base,o=t.stat_desc.max_length;let a,l,c,u,h,d,f=0;for(u=0;u<=hF;u++)e.bl_count[u]=0;for(i[2*e.heap[e.heap_max]+1]=0,a=e.heap_max+1;a<dF;a++)l=e.heap[a],u=i[2*i[2*l+1]+1]+1,u>o&&(u=o,f++),i[2*l+1]=u,l>t.max_code||(e.bl_count[u]++,h=0,l>=r&&(h=s[l-r]),d=i[2*l],e.opt_len+=d*(u+h),n&&(e.static_len+=d*(n[2*l+1]+h)));if(0!==f){do{for(u=o-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[o]--,f-=2}while(f>0);for(u=o;0!==u;u--)for(l=e.bl_count[u];0!==l;)c=e.heap[--a],c>t.max_code||(i[2*c+1]!=u&&(e.opt_len+=(u-i[2*c+1])*i[2*c],i[2*c+1]=u),l--)}}(i),function(t,i,n){const s=[];let r,o,a,l=0;for(r=1;r<=hF;r++)s[r]=l=l+n[r-1]<<1;for(o=0;o<=i;o++)a=t[2*o+1],0!==a&&(t[2*o]=e(s[a]++,a))}(n,t.max_code,i.bl_count)}}function vF(t,e,i,n,s){const r=this;r.static_tree=t,r.extra_bits=e,r.extra_base=i,r.elems=n,r.max_length=s}yF._length_code=[0,1,2,3,4,5,6,7].concat(...pF([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),yF.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],yF.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],yF.d_code=function(t){return t<256?mF[t]:mF[256+(t>>>7)]},yF.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],yF.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],yF.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],yF.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const bF=pF([[144,8],[112,9],[24,7],[8,8]]);vF.static_ltree=gF([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((t,e)=>[t,bF[e]])));const xF=pF([[30,5]]);function wF(t,e,i,n,s){const r=this;r.good_length=t,r.max_lazy=e,r.nice_length=i,r.max_chain=n,r.func=s}vF.static_dtree=gF([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((t,e)=>[t,xF[e]]))),vF.static_l_desc=new vF(vF.static_ltree,yF.extra_lbits,257,286,hF),vF.static_d_desc=new vF(vF.static_dtree,yF.extra_dbits,0,30,hF),vF.static_bl_desc=new vF(null,yF.extra_blbits,0,19,7);const MF=[new wF(0,0,0,0,0),new wF(4,4,8,4,1),new wF(4,5,16,8,1),new wF(4,6,32,32,1),new wF(4,4,16,16,2),new wF(8,16,32,32,2),new wF(8,16,128,128,2),new wF(8,32,128,256,2),new wF(32,128,258,1024,2),new wF(32,258,258,4096,2)],SF=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],kF=113,_F=666,IF=262;function CF(t,e,i,n){const s=t[2*e],r=t[2*i];return s<r||s==r&&n[e]<=n[i]}function LF(){const t=this;let e,i,n,s,r,o,a,l,c,u,h,d,f,p,g,m,y,v,b,x,w,M,S,k,_,I,C,L,N,j,T,z,A;const P=new yF,D=new yF,E=new yF;let O,R,W,B,U,$;function F(){let e;for(e=0;e<286;e++)T[2*e]=0;for(e=0;e<30;e++)z[2*e]=0;for(e=0;e<19;e++)A[2*e]=0;T[512]=1,t.opt_len=t.static_len=0,R=W=0}function V(t,e){let i,n=-1,s=t[1],r=0,o=7,a=4;0===s&&(o=138,a=3),t[2*(e+1)+1]=65535;for(let l=0;l<=e;l++)i=s,s=t[2*(l+1)+1],++r<o&&i==s||(r<a?A[2*i]+=r:0!==i?(i!=n&&A[2*i]++,A[32]++):r<=10?A[34]++:A[36]++,r=0,n=i,0===s?(o=138,a=3):i==s?(o=6,a=3):(o=7,a=4))}function G(e){t.pending_buf[t.pending++]=e}function H(t){G(255&t),G(t>>>8&255)}function Z(t,e){let i;const n=e;$>16-n?(i=t,U|=i<<$&65535,H(U),U=i>>>16-$,$+=n-16):(U|=t<<$&65535,$+=n)}function Y(t,e){const i=2*t;Z(65535&e[i],65535&e[i+1])}function Q(t,e){let i,n,s=-1,r=t[1],o=0,a=7,l=4;for(0===r&&(a=138,l=3),i=0;i<=e;i++)if(n=r,r=t[2*(i+1)+1],!(++o<a&&n==r)){if(o<l)do{Y(n,A)}while(0!=--o);else 0!==n?(n!=s&&(Y(n,A),o--),Y(16,A),Z(o-3,2)):o<=10?(Y(17,A),Z(o-3,3)):(Y(18,A),Z(o-11,7));o=0,s=n,0===r?(a=138,l=3):n==r?(a=6,l=3):(a=7,l=4)}}function J(){16==$?(H(U),U=0,$=0):$>=8&&(G(255&U),U>>>=8,$-=8)}function q(e,i){let n,s,r;if(t.dist_buf[R]=e,t.lc_buf[R]=255&i,R++,0===e?T[2*i]++:(W++,e--,T[2*(yF._length_code[i]+256+1)]++,z[2*yF.d_code(e)]++),!(8191&R)&&C>2){for(n=8*R,s=w-y,r=0;r<30;r++)n+=z[2*r]*(5+yF.extra_dbits[r]);if(n>>>=3,W<Math.floor(R/2)&&n<Math.floor(s/2))return!0}return R==O-1}function K(e,i){let n,s,r,o,a=0;if(0!==R)do{n=t.dist_buf[a],s=t.lc_buf[a],a++,0===n?Y(s,e):(r=yF._length_code[s],Y(r+256+1,e),o=yF.extra_lbits[r],0!==o&&(s-=yF.base_length[r],Z(s,o)),n--,r=yF.d_code(n),Y(r,i),o=yF.extra_dbits[r],0!==o&&(n-=yF.base_dist[r],Z(n,o)))}while(a<R);Y(256,e),B=e[513]}function X(){$>8?H(U):$>0&&G(255&U),U=0,$=0}function tt(e,i,n){Z(0+(n?1:0),3),function(e,i){X(),B=8,H(i),H(~i),t.pending_buf.set(l.subarray(e,e+i),t.pending),t.pending+=i}(e,i)}function et(i){(function(e,i,n){let s,r,o=0;C>0?(P.build_tree(t),D.build_tree(t),o=function(){let e;for(V(T,P.max_code),V(z,D.max_code),E.build_tree(t),e=18;e>=3&&0===A[2*yF.bl_order[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(),s=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=s&&(s=r)):s=r=i+5,i+4<=s&&-1!=e?tt(e,i,n):r==s?(Z(2+(n?1:0),3),K(vF.static_ltree,vF.static_dtree)):(Z(4+(n?1:0),3),function(t,e,i){let n;for(Z(t-257,5),Z(e-1,5),Z(i-4,4),n=0;n<i;n++)Z(A[2*yF.bl_order[n]+1],3);Q(T,t-1),Q(z,e-1)}(P.max_code+1,D.max_code+1,o+1),K(T,z)),F(),n&&X()})(y>=0?y:-1,w-y,i),y=w,e.flush_pending()}function it(){let t,i,n,s;do{if(s=c-S-w,0===s&&0===w&&0===S)s=r;else if(-1==s)s--;else if(w>=r+r-IF){l.set(l.subarray(r,r+r),0),M-=r,w-=r,y-=r,t=f,n=t;do{i=65535&h[--n],h[n]=i>=r?i-r:0}while(0!=--t);t=r,n=t;do{i=65535&u[--n],u[n]=i>=r?i-r:0}while(0!=--t);s+=r}if(0===e.avail_in)return;t=e.read_buf(l,w+S,s),S+=t,S>=3&&(d=255&l[w],d=(d<<m^255&l[w+1])&g)}while(S<IF&&0!==e.avail_in)}function nt(t){let e,i,n=_,s=w,o=k;const c=w>r-IF?w-(r-IF):0;let h=j;const d=a,f=w+258;let p=l[s+o-1],g=l[s+o];k>=N&&(n>>=2),h>S&&(h=S);do{if(e=t,l[e+o]==g&&l[e+o-1]==p&&l[e]==l[s]&&l[++e]==l[s+1]){s+=2,e++;do{}while(l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&l[++s]==l[++e]&&s<f);if(i=258-(f-s),s=f-258,i>o){if(M=t,o=i,i>=h)break;p=l[s+o-1],g=l[s+o]}}}while((t=65535&u[t&d])>c&&0!=--n);return o<=S?o:S}t.depth=[],t.bl_count=[],t.heap=[],T=[],z=[],A=[],t.pqdownheap=function(e,i){const n=t.heap,s=n[i];let r=i<<1;for(;r<=t.heap_len&&(r<t.heap_len&&CF(e,n[r+1],n[r],t.depth)&&r++,!CF(e,s,n[r],t.depth));)n[i]=n[r],i=r,r<<=1;n[i]=s},t.deflateInit=function(e,b,M,R,W,V){return R||(R=8),W||(W=8),V||(V=0),e.msg=null,-1==b&&(b=6),W<1||W>9||8!=R||M<9||M>15||b<0||b>9||V<0||V>2?fF:(e.dstate=t,o=M,r=1<<o,a=r-1,p=W+7,f=1<<p,g=f-1,m=Math.floor((p+3-1)/3),l=new Uint8Array(2*r),u=[],h=[],O=1<<W+6,t.pending_buf=new Uint8Array(4*O),n=4*O,t.dist_buf=new Uint16Array(O),t.lc_buf=new Uint8Array(O),C=b,L=V,function(e){return e.total_in=e.total_out=0,e.msg=null,t.pending=0,t.pending_out=0,i=kF,s=0,P.dyn_tree=T,P.stat_desc=vF.static_l_desc,D.dyn_tree=z,D.stat_desc=vF.static_d_desc,E.dyn_tree=A,E.stat_desc=vF.static_bl_desc,U=0,$=0,B=8,F(),function(){c=2*r,h[f-1]=0;for(let t=0;t<f-1;t++)h[t]=0;I=MF[C].max_lazy,N=MF[C].good_length,j=MF[C].nice_length,_=MF[C].max_chain,w=0,y=0,S=0,v=k=2,x=0,d=0}(),0}(e))},t.deflateEnd=function(){return 42!=i&&i!=kF&&i!=_F?fF:(t.lc_buf=null,t.dist_buf=null,t.pending_buf=null,h=null,u=null,l=null,t.dstate=null,i==kF?-3:0)},t.deflateParams=function(t,e,i){let n=0;return-1==e&&(e=6),e<0||e>9||i<0||i>2?fF:(MF[C].func!=MF[e].func&&0!==t.total_in&&(n=t.deflate(1)),C!=e&&(C=e,I=MF[C].max_lazy,N=MF[C].good_length,j=MF[C].nice_length,_=MF[C].max_chain),L=i,n)},t.deflateSetDictionary=function(t,e,n){let s,o=n,c=0;if(!e||42!=i)return fF;if(o<3)return 0;for(o>r-IF&&(o=r-IF,c=n-o),l.set(e.subarray(c,c+o),0),w=o,y=o,d=255&l[0],d=(d<<m^255&l[1])&g,s=0;s<=o-3;s++)d=(d<<m^255&l[s+2])&g,u[s&a]=h[d],h[d]=s;return 0},t.deflate=function(c,p){let _,N,j,T,z;if(p>4||p<0)return fF;if(!c.next_out||!c.next_in&&0!==c.avail_in||i==_F&&4!=p)return c.msg=SF[4],fF;if(0===c.avail_out)return c.msg=SF[7],-5;if(e=c,T=s,s=p,42==i&&(N=8+(o-8<<4)<<8,j=(C-1&255)>>1,j>3&&(j=3),N|=j<<6,0!==w&&(N|=32),N+=31-N%31,i=kF,function(t){G(t>>8&255),G(255&t)}(N)),0!==t.pending){if(e.flush_pending(),0===e.avail_out)return s=-1,0}else if(0===e.avail_in&&p<=T&&4!=p)return e.msg=SF[7],-5;if(i==_F&&0!==e.avail_in)return c.msg=SF[7],-5;if(0!==e.avail_in||0!==S||0!=p&&i!=_F){switch(z=-1,MF[C].func){case 0:z=function(t){let i,s=65535;for(s>n-5&&(s=n-5);;){if(S<=1){if(it(),0===S&&0==t)return 0;if(0===S)break}if(w+=S,S=0,i=y+s,(0===w||w>=i)&&(S=w-i,w=i,et(!1),0===e.avail_out))return 0;if(w-y>=r-IF&&(et(!1),0===e.avail_out))return 0}return et(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p);break;case 1:z=function(t){let i,n=0;for(;;){if(S<IF){if(it(),S<IF&&0==t)return 0;if(0===S)break}if(S>=3&&(d=(d<<m^255&l[w+2])&g,n=65535&h[d],u[w&a]=h[d],h[d]=w),0!==n&&(w-n&65535)<=r-IF&&2!=L&&(v=nt(n)),v>=3)if(i=q(w-M,v-3),S-=v,v<=I&&S>=3){v--;do{w++,d=(d<<m^255&l[w+2])&g,n=65535&h[d],u[w&a]=h[d],h[d]=w}while(0!=--v);w++}else w+=v,v=0,d=255&l[w],d=(d<<m^255&l[w+1])&g;else i=q(0,255&l[w]),S--,w++;if(i&&(et(!1),0===e.avail_out))return 0}return et(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p);break;case 2:z=function(t){let i,n,s=0;for(;;){if(S<IF){if(it(),S<IF&&0==t)return 0;if(0===S)break}if(S>=3&&(d=(d<<m^255&l[w+2])&g,s=65535&h[d],u[w&a]=h[d],h[d]=w),k=v,b=M,v=2,0!==s&&k<I&&(w-s&65535)<=r-IF&&(2!=L&&(v=nt(s)),v<=5&&(1==L||3==v&&w-M>4096)&&(v=2)),k>=3&&v<=k){n=w+S-3,i=q(w-1-b,k-3),S-=k-1,k-=2;do{++w<=n&&(d=(d<<m^255&l[w+2])&g,s=65535&h[d],u[w&a]=h[d],h[d]=w)}while(0!=--k);if(x=0,v=2,w++,i&&(et(!1),0===e.avail_out))return 0}else if(0!==x){if(i=q(0,255&l[w-1]),i&&et(!1),w++,S--,0===e.avail_out)return 0}else x=1,w++,S--}return 0!==x&&(i=q(0,255&l[w-1]),x=0),et(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p)}if(2!=z&&3!=z||(i=_F),0==z||2==z)return 0===e.avail_out&&(s=-1),0;if(1==z){if(1==p)Z(2,3),Y(256,vF.static_ltree),J(),1+B+10-$<9&&(Z(2,3),Y(256,vF.static_ltree),J()),B=7;else if(tt(0,0,!1),3==p)for(_=0;_<f;_++)h[_]=0;if(e.flush_pending(),0===e.avail_out)return s=-1,0}}return 4!=p?0:1}}function NF(){const t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}NF.prototype={deflateInit(t,e){const i=this;return i.dstate=new LF,e||(e=hF),i.dstate.deflateInit(i,t,e)},deflate(t){const e=this;return e.dstate?e.dstate.deflate(e,t):fF},deflateEnd(){const t=this;if(!t.dstate)return fF;const e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams(t,e){const i=this;return i.dstate?i.dstate.deflateParams(i,t,e):fF},deflateSetDictionary(t,e){const i=this;return i.dstate?i.dstate.deflateSetDictionary(i,t,e):fF},read_buf(t,e,i){const n=this;let s=n.avail_in;return s>i&&(s=i),0===s?0:(n.avail_in-=s,t.set(n.next_in.subarray(n.next_in_index,n.next_in_index+s),e),n.next_in_index+=s,n.total_in+=s,s)},flush_pending(){const t=this;let e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}};const jF=4294967295,TF=65535,zF=new Date(2107,11,31),AF=new Date(1980,0,1),PF=void 0,DF="undefined",EF="function";class OF{constructor(t){return class extends TransformStream{constructor(e,i){const n=new t(i);super({transform(t,e){e.enqueue(n.append(t))},flush(t){const e=n.flush();e&&t.enqueue(e)}})}}}}let RF=2;try{typeof navigator!=DF&&navigator.hardwareConcurrency&&(RF=navigator.hardwareConcurrency)}catch(t){}const WF={chunkSize:524288,maxWorkers:RF,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:PF,CompressionStreamNative:typeof CompressionStream!=DF&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=DF&&DecompressionStream},BF=Object.assign({},WF);function UF(t){const{baseURL:e,chunkSize:i,maxWorkers:n,terminateWorkerTimeout:s,useCompressionStream:r,useWebWorkers:o,Deflate:a,Inflate:l,CompressionStream:c,DecompressionStream:u,workerScripts:h}=t;if($F("baseURL",e),$F("chunkSize",i),$F("maxWorkers",n),$F("terminateWorkerTimeout",s),$F("useCompressionStream",r),$F("useWebWorkers",o),a&&(BF.CompressionStream=new OF(a)),l&&(BF.DecompressionStream=new OF(l)),$F("CompressionStream",c),$F("DecompressionStream",u),h!==PF){const{deflate:t,inflate:e}=h;if((t||e)&&(BF.workerScripts||(BF.workerScripts={})),t){if(!Array.isArray(t))throw new Error("workerScripts.deflate must be an array");BF.workerScripts.deflate=t}if(e){if(!Array.isArray(e))throw new Error("workerScripts.inflate must be an array");BF.workerScripts.inflate=e}}}function $F(t,e){e!==PF&&(BF[t]=e)}const FF=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=e>>>1^3988292384:e>>>=1;FF[t]=e}class VF{constructor(t){this.crc=t||-1}append(t){let e=0|this.crc;for(let i=0,n=0|t.length;i<n;i++)e=e>>>8^FF[255&(e^t[i])];this.crc=e}get(){return~this.crc}}class GF extends TransformStream{constructor(){let t;const e=new VF;super({transform(t,i){e.append(t),i.enqueue(t)},flush(){const i=new Uint8Array(4);new DataView(i.buffer).setUint32(0,e.get()),t.value=i}}),t=this}}function HF(t){if(typeof TextEncoder==DF){t=unescape(encodeURIComponent(t));const e=new Uint8Array(t.length);for(let i=0;i<e.length;i++)e[i]=t.charCodeAt(i);return e}return(new TextEncoder).encode(t)}const ZF={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const i=t[t.length-1],n=ZF.getPartial(i);return 32===n?t.concat(e):ZF._shiftRight(e,n,0|i,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(0===e)return 0;const i=t[e-1];return 32*(e-1)+ZF.getPartial(i)},clamp(t,e){if(32*t.length<e)return t;const i=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,i>0&&e&&(t[i-1]=ZF.partial(e,t[i-1]&2147483648>>e-1,1)),t},partial:(t,e,i)=>32===t?e:(i?0|e:e<<32-t)+1099511627776*t,getPartial:t=>Math.round(t/1099511627776)||32,_shiftRight(t,e,i,n){for(void 0===n&&(n=[]);e>=32;e-=32)n.push(i),i=0;if(0===e)return n.concat(t);for(let s=0;s<t.length;s++)n.push(i|t[s]>>>e),i=t[s]<<32-e;const s=t.length?t[t.length-1]:0,r=ZF.getPartial(s);return n.push(ZF.partial(e+r&31,e+r>32?i:n.pop(),1)),n}},YF={bytes:{fromBits(t){const e=ZF.bitLength(t)/8,i=new Uint8Array(e);let n;for(let s=0;s<e;s++)3&s||(n=t[s/4]),i[s]=n>>>24,n<<=8;return i},toBits(t){const e=[];let i,n=0;for(i=0;i<t.length;i++)n=n<<8|t[i],3&~i||(e.push(n),n=0);return 3&i&&e.push(ZF.partial(8*(3&i),n)),e}}},QF=class{constructor(t){const e=this;e.blockSize=512,e._init=[1732584193,4023233417,2562383102,271733878,3285377520],e._key=[1518500249,1859775393,2400959708,3395469782],t?(e._h=t._h.slice(0),e._buffer=t._buffer.slice(0),e._length=t._length):e.reset()}reset(){const t=this;return t._h=t._init.slice(0),t._buffer=[],t._length=0,t}update(t){const e=this;"string"==typeof t&&(t=YF.utf8String.toBits(t));const i=e._buffer=ZF.concat(e._buffer,t),n=e._length,s=e._length=n+ZF.bitLength(t);if(s>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const r=new Uint32Array(i);let o=0;for(let t=e.blockSize+n-(e.blockSize+n&e.blockSize-1);t<=s;t+=e.blockSize)e._block(r.subarray(16*o,16*(o+1))),o+=1;return i.splice(0,16*o),e}finalize(){const t=this;let e=t._buffer;const i=t._h;e=ZF.concat(e,[ZF.partial(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),i}_f(t,e,i,n){return t<=19?e&i|~e&n:t<=39?e^i^n:t<=59?e&i|e&n|i&n:t<=79?e^i^n:void 0}_S(t,e){return e<<t|e>>>32-t}_block(t){const e=this,i=e._h,n=Array(80);for(let e=0;e<16;e++)n[e]=t[e];let s=i[0],r=i[1],o=i[2],a=i[3],l=i[4];for(let t=0;t<=79;t++){t>=16&&(n[t]=e._S(1,n[t-3]^n[t-8]^n[t-14]^n[t-16]));const i=e._S(5,s)+e._f(t,r,o,a)+l+n[t]+e._key[Math.floor(t/20)]|0;l=a,a=o,o=e._S(30,r),r=s,s=i}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0}},JF={getRandomValues(t){const e=new Uint32Array(t.buffer),i=t=>{let e=987654321;const i=4294967295;return function(){return e=36969*(65535&e)+(e>>16)&i,(((e<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let n,s=0;s<t.length;s+=4){const t=i(4294967296*(n||Math.random()));n=987654071*t(),e[s/4]=4294967296*t()|0}return t}},qF={importKey:t=>new qF.hmacSha1(YF.bytes.toBits(t)),pbkdf2(t,e,i,n){if(i=i||1e4,n<0||i<0)throw new Error("invalid params to pbkdf2");const s=1+(n>>5)<<2;let r,o,a,l,c;const u=new ArrayBuffer(s),h=new DataView(u);let d=0;const f=ZF;for(e=YF.bytes.toBits(e),c=1;d<(s||1);c++){for(r=o=t.encrypt(f.concat(e,[c])),a=1;a<i;a++)for(o=t.encrypt(o),l=0;l<o.length;l++)r[l]^=o[l];for(a=0;d<(s||1)&&a<r.length;a++)h.setInt32(d,r[a]),d+=4}return u.slice(0,n/8)},hmacSha1:class{constructor(t){const e=this,i=e._hash=QF,n=[[],[]];e._baseHash=[new i,new i];const s=e._baseHash[0].blockSize/32;t.length>s&&(t=(new i).update(t).finalize());for(let e=0;e<s;e++)n[0][e]=909522486^t[e],n[1][e]=1549556828^t[e];e._baseHash[0].update(n[0]),e._baseHash[1].update(n[1]),e._resultHash=new i(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){this._updated=!0,this._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),i=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),i}encrypt(t){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(t),this.digest(t)}}},KF=typeof crypto!=DF&&typeof crypto.getRandomValues==EF,XF="Invalid password",tV="Invalid signature",eV="zipjs-abort-check-password";function iV(t){return KF?crypto.getRandomValues(t):JF.getRandomValues(t)}const nV=16,sV={name:"PBKDF2"},rV=Object.assign({hash:{name:"HMAC"}},sV),oV=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},sV),aV=["deriveBits"],lV=[8,12,16],cV=[16,24,32],uV=10,hV=[0,0,0,0],dV=typeof crypto!=DF,fV=dV&&crypto.subtle,pV=dV&&typeof fV!=DF,gV=YF.bytes,mV=class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const i=e._tables[0][4],n=e._tables[1],s=t.length;let r,o,a,l=1;if(4!==s&&6!==s&&8!==s)throw new Error("invalid aes key size");for(e._key=[o=t.slice(0),a=[]],r=s;r<4*s+28;r++){let t=o[r-1];(r%s==0||8===s&&r%s==4)&&(t=i[t>>>24]<<24^i[t>>16&255]<<16^i[t>>8&255]<<8^i[255&t],r%s==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),o[r]=o[r-s]^t}for(let t=0;r;t++,r--){const e=o[3&t?r:r-4];a[t]=r<=4||t<4?e:n[0][i[e>>>24]]^n[1][i[e>>16&255]]^n[2][i[e>>8&255]]^n[3][i[255&e]]}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],i=t[4],n=e[4],s=[],r=[];let o,a,l,c;for(let t=0;t<256;t++)r[(s[t]=t<<1^283*(t>>7))^t]=t;for(let u=o=0;!i[u];u^=a||1,o=r[o]||1){let r=o^o<<1^o<<2^o<<3^o<<4;r=r>>8^255&r^99,i[u]=r,n[r]=u,c=s[l=s[a=s[u]]];let h=16843009*c^65537*l^257*a^16843008*u,d=257*s[r]^16843008*r;for(let i=0;i<4;i++)t[i][u]=d=d<<24^d>>>8,e[i][r]=h=h<<24^h>>>8}for(let i=0;i<5;i++)t[i]=t[i].slice(0),e[i]=e[i].slice(0)}_crypt(t,e){if(4!==t.length)throw new Error("invalid aes block size");const i=this._key[e],n=i.length/4-2,s=[0,0,0,0],r=this._tables[e],o=r[0],a=r[1],l=r[2],c=r[3],u=r[4];let h,d,f,p=t[0]^i[0],g=t[e?3:1]^i[1],m=t[2]^i[2],y=t[e?1:3]^i[3],v=4;for(let t=0;t<n;t++)h=o[p>>>24]^a[g>>16&255]^l[m>>8&255]^c[255&y]^i[v],d=o[g>>>24]^a[m>>16&255]^l[y>>8&255]^c[255&p]^i[v+1],f=o[m>>>24]^a[y>>16&255]^l[p>>8&255]^c[255&g]^i[v+2],y=o[y>>>24]^a[p>>16&255]^l[g>>8&255]^c[255&m]^i[v+3],v+=4,p=h,g=d,m=f;for(let t=0;t<4;t++)s[e?3&-t:t]=u[p>>>24]<<24^u[g>>16&255]<<16^u[m>>8&255]<<8^u[255&y]^i[v++],h=p,p=g,g=m,m=y,y=h;return s}},yV=class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if(255&~(t>>24))t+=1<<24;else{let e=t>>16&255,i=t>>8&255,n=255&t;255===e?(e=0,255===i?(i=0,255===n?n=0:++n):++i):++e,t=0,t+=e<<16,t+=i<<8,t+=n}return t}incCounter(t){0===(t[0]=this.incWord(t[0]))&&(t[1]=this.incWord(t[1]))}calculate(t,e,i){let n;if(!(n=e.length))return[];const s=ZF.bitLength(e);for(let s=0;s<n;s+=4){this.incCounter(i);const n=t.encrypt(i);e[s]^=n[0],e[s+1]^=n[1],e[s+2]^=n[2],e[s+3]^=n[3]}return ZF.clamp(e,s)}},vV=qF.hmacSha1;let bV=dV&&pV&&typeof fV.importKey==EF,xV=dV&&pV&&typeof fV.deriveBits==EF;class wV extends TransformStream{constructor({password:t,rawPassword:e,signed:i,encryptionStrength:n,checkPasswordOnly:s}){super({start(){Object.assign(this,{ready:new Promise((t=>this.resolveReady=t)),password:_V(t,e),signed:i,strength:n-1,pending:new Uint8Array})},async transform(t,e){const i=this,{password:n,strength:r,resolveReady:o,ready:a}=i;n?(await async function(t,e,i,n){const s=await kV(t,e,i,CV(n,0,lV[e])),r=CV(n,lV[e]);if(s[0]!=r[0]||s[1]!=r[1])throw new Error(XF)}(i,r,n,CV(t,0,lV[r]+2)),t=CV(t,lV[r]+2),s?e.error(new Error(eV)):o()):await a;const l=new Uint8Array(t.length-uV-(t.length-uV)%nV);e.enqueue(SV(i,t,l,0,uV,!0))},async flush(t){const{signed:e,ctr:i,hmac:n,pending:s,ready:r}=this;if(n&&i){await r;const o=CV(s,0,s.length-uV),a=CV(s,s.length-uV);let l=new Uint8Array;if(o.length){const t=NV(gV,o);n.update(t);const e=i.update(t);l=LV(gV,e)}if(e){const t=CV(LV(gV,n.digest()),0,uV);for(let e=0;e<uV;e++)if(t[e]!=a[e])throw new Error(tV)}t.enqueue(l)}}})}}class MV extends TransformStream{constructor({password:t,rawPassword:e,encryptionStrength:i}){let n;super({start(){Object.assign(this,{ready:new Promise((t=>this.resolveReady=t)),password:_V(t,e),strength:i-1,pending:new Uint8Array})},async transform(t,e){const i=this,{password:n,strength:s,resolveReady:r,ready:o}=i;let a=new Uint8Array;n?(a=await async function(t,e,i){const n=iV(new Uint8Array(lV[e]));return IV(n,await kV(t,e,i,n))}(i,s,n),r()):await o;const l=new Uint8Array(a.length+t.length-t.length%nV);l.set(a,0),e.enqueue(SV(i,t,l,a.length,0))},async flush(t){const{ctr:e,hmac:i,pending:s,ready:r}=this;if(i&&e){await r;let o=new Uint8Array;if(s.length){const t=e.update(NV(gV,s));i.update(t),o=LV(gV,t)}n.signature=LV(gV,i.digest()).slice(0,uV),t.enqueue(IV(o,n.signature))}}}),n=this}}function SV(t,e,i,n,s,r){const{ctr:o,hmac:a,pending:l}=t,c=e.length-s;let u;for(l.length&&(e=IV(l,e),i=function(t,e){if(e&&e>t.length){const i=t;(t=new Uint8Array(e)).set(i,0)}return t}(i,c-c%nV)),u=0;u<=c-nV;u+=nV){const t=NV(gV,CV(e,u,u+nV));r&&a.update(t);const s=o.update(t);r||a.update(s),i.set(LV(gV,s),u+n)}return t.pending=CV(e,u),i}async function kV(t,e,i,n){t.password=null;const s=await async function(t,e,i,n,s){if(!bV)return qF.importKey(e);try{return await fV.importKey("raw",e,i,!1,s)}catch(t){return bV=!1,qF.importKey(e)}}(0,i,rV,0,aV),r=await async function(t,e,i){if(!xV)return qF.pbkdf2(e,t.salt,oV.iterations,i);try{return await fV.deriveBits(t,e,i)}catch(n){return xV=!1,qF.pbkdf2(e,t.salt,oV.iterations,i)}}(Object.assign({salt:n},oV),s,8*(2*cV[e]+2)),o=new Uint8Array(r),a=NV(gV,CV(o,0,cV[e])),l=NV(gV,CV(o,cV[e],2*cV[e])),c=CV(o,2*cV[e]);return Object.assign(t,{keys:{key:a,authentication:l,passwordVerification:c},ctr:new yV(new mV(a),Array.from(hV)),hmac:new vV(l)}),c}function _V(t,e){return e===PF?HF(t):e}function IV(t,e){let i=t;return t.length+e.length&&(i=new Uint8Array(t.length+e.length),i.set(t,0),i.set(e,t.length)),i}function CV(t,e,i){return t.subarray(e,i)}function LV(t,e){return t.fromBits(e)}function NV(t,e){return t.toBits(e)}class jV extends TransformStream{constructor({password:t,passwordVerification:e,checkPasswordOnly:i}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),PV(this,t)},transform(t,e){const n=this;if(n.password){const e=zV(n,t.subarray(0,12));if(n.password=null,e[11]!=n.passwordVerification)throw new Error(XF);t=t.subarray(12)}i?e.error(new Error(eV)):e.enqueue(zV(n,t))}})}}class TV extends TransformStream{constructor({password:t,passwordVerification:e}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),PV(this,t)},transform(t,e){const i=this;let n,s;if(i.password){i.password=null;const e=iV(new Uint8Array(12));e[11]=i.passwordVerification,n=new Uint8Array(t.length+e.length),n.set(AV(i,e),0),s=12}else n=new Uint8Array(t.length),s=0;n.set(AV(i,t),s),e.enqueue(n)}})}}function zV(t,e){const i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=EV(t)^e[n],DV(t,i[n]);return i}function AV(t,e){const i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=EV(t)^e[n],DV(t,e[n]);return i}function PV(t,e){const i=[305419896,591751049,878082192];Object.assign(t,{keys:i,crcKey0:new VF(i[0]),crcKey2:new VF(i[2])});for(let i=0;i<e.length;i++)DV(t,e.charCodeAt(i))}function DV(t,e){let[i,n,s]=t.keys;t.crcKey0.append([e]),i=~t.crcKey0.get(),n=RV(Math.imul(RV(n+OV(i)),134775813)+1),t.crcKey2.append([n>>>24]),s=~t.crcKey2.get(),t.keys=[i,n,s]}function EV(t){const e=2|t.keys[2];return OV(Math.imul(e,1^e)>>>8)}function OV(t){return 255&t}function RV(t){return 4294967295&t}const WV="deflate-raw";class BV extends TransformStream{constructor(t,{chunkSize:e,CompressionStream:i,CompressionStreamNative:n}){super({});const{compressed:s,encrypted:r,useCompressionStream:o,zipCrypto:a,signed:l,level:c}=t,u=this;let h,d,f=$V(super.readable);r&&!a||!l||(h=new GF,f=GV(f,h)),s&&(f=VV(f,o,{level:c,chunkSize:e},n,i)),r&&(a?f=GV(f,new TV(t)):(d=new MV(t),f=GV(f,d))),FV(u,f,(()=>{let t;r&&!a&&(t=d.signature),r&&!a||!l||(t=new DataView(h.value.buffer).getUint32(0)),u.signature=t}))}}class UV extends TransformStream{constructor(t,{chunkSize:e,DecompressionStream:i,DecompressionStreamNative:n}){super({});const{zipCrypto:s,encrypted:r,signed:o,signature:a,compressed:l,useCompressionStream:c}=t;let u,h,d=$V(super.readable);r&&(s?d=GV(d,new jV(t)):(h=new wV(t),d=GV(d,h))),l&&(d=VV(d,c,{chunkSize:e},n,i)),r&&!s||!o||(u=new GF,d=GV(d,u)),FV(this,d,(()=>{if((!r||s)&&o){const t=new DataView(u.value.buffer);if(a!=t.getUint32(0,!1))throw new Error(tV)}}))}}function $V(t){return GV(t,new TransformStream({transform(t,e){t&&t.length&&e.enqueue(t)}}))}function FV(t,e,i){e=GV(e,new TransformStream({flush:i})),Object.defineProperty(t,"readable",{get:()=>e})}function VV(t,e,i,n,s){try{t=GV(t,new(e&&n?n:s)(WV,i))}catch(n){if(!e)return t;try{t=GV(t,new s(WV,i))}catch(e){return t}}return t}function GV(t,e){return t.pipeThrough(e)}const HV="data",ZV="close",YV="deflate";class QV extends TransformStream{constructor(t,e){super({});const i=this,{codecType:n}=t;let s;n.startsWith(YV)?s=BV:n.startsWith("inflate")&&(s=UV);let r=0,o=0;const a=new s(t,e),l=super.readable,c=new TransformStream({transform(t,e){t&&t.length&&(o+=t.length,e.enqueue(t))},flush(){Object.assign(i,{inputSize:o})}}),u=new TransformStream({transform(t,e){t&&t.length&&(r+=t.length,e.enqueue(t))},flush(){const{signature:t}=a;Object.assign(i,{signature:t,outputSize:r,inputSize:o})}});Object.defineProperty(i,"readable",{get:()=>l.pipeThrough(c).pipeThrough(a).pipeThrough(u)})}}class JV extends TransformStream{constructor(t){let e;super({transform:function i(n,s){if(e){const t=new Uint8Array(e.length+n.length);t.set(e),t.set(n,e.length),n=t,e=null}n.length>t?(s.enqueue(n.slice(0,t)),i(n.slice(t),s)):e=n},flush(t){e&&e.length&&t.enqueue(e)}})}}let qV=typeof Worker!=DF;class KV{constructor(t,{readable:e,writable:i},{options:n,config:s,streamOptions:r,useWebWorkers:o,transferStreams:a,scripts:l},c){const{signal:u}=r;return Object.assign(t,{busy:!0,readable:e.pipeThrough(new JV(s.chunkSize)).pipeThrough(new XV(e,r),{signal:u}),writable:i,options:Object.assign({},n),scripts:l,transferStreams:a,terminate:()=>new Promise((e=>{const{worker:i,busy:n}=t;i?(n?t.resolveTerminated=e:(i.terminate(),e()),t.interface=null):e()})),onTaskFinished(){const{resolveTerminated:e}=t;e&&(t.resolveTerminated=null,t.terminated=!0,t.worker.terminate(),e()),t.busy=!1,c(t)}}),(o&&qV?iG:eG)(t,s)}}class XV extends TransformStream{constructor(t,{onstart:e,onprogress:i,size:n,onend:s}){let r=0;super({async start(){e&&await tG(e,n)},async transform(t,e){r+=t.length,i&&await tG(i,r,n),e.enqueue(t)},async flush(){t.size=r,s&&await tG(s,r)}})}}async function tG(t,...e){try{await t(...e)}catch(t){}}function eG(t,e){return{run:()=>async function({options:t,readable:e,writable:i,onTaskFinished:n},s){try{const n=new QV(t,s);await e.pipeThrough(n).pipeTo(i,{preventClose:!0,preventAbort:!0});const{signature:r,inputSize:o,outputSize:a}=n;return{signature:r,inputSize:o,outputSize:a}}finally{n()}}(t,e)}}function iG(t,e){const{baseURL:i,chunkSize:n}=e;if(!t.interface){let s;try{s=function(t,e,i){const n={type:"module"};let s,r;typeof t==EF&&(t=t());try{s=new URL(t,e)}catch(e){s=t}if(nG)try{r=new Worker(s)}catch(t){nG=!1,r=new Worker(s,n)}else r=new Worker(s,n);return r.addEventListener("message",(t=>async function({data:t},e){const{type:i,value:n,messageId:s,result:r,error:o}=t,{reader:a,writer:l,resolveResult:c,rejectResult:u,onTaskFinished:h}=e;try{if(o){const{message:t,stack:e,code:i,name:n}=o,s=new Error(t);Object.assign(s,{stack:e,code:i,name:n}),d(s)}else{if("pull"==i){const{value:t,done:i}=await a.read();rG({type:HV,value:t,done:i,messageId:s},e)}i==HV&&(await l.ready,await l.write(new Uint8Array(n)),rG({type:"ack",messageId:s},e)),i==ZV&&d(null,r)}}catch(o){rG({type:ZV,messageId:s},e),d(o)}function d(t,e){t?u(t):c(e),l&&l.releaseLock(),h()}}(t,i))),r}(t.scripts[0],i,t)}catch(i){return qV=!1,eG(t,e)}Object.assign(t,{worker:s,interface:{run:()=>async function(t,e){let i,n;const s=new Promise(((t,e)=>{i=t,n=e}));Object.assign(t,{reader:null,writer:null,resolveResult:i,rejectResult:n,result:s});const{readable:r,options:o,scripts:a}=t,{writable:l,closed:c}=function(t){let e;const i=new Promise((t=>e=t));return{writable:new WritableStream({async write(e){const i=t.getWriter();await i.ready,await i.write(e),i.releaseLock()},close(){e()},abort:e=>t.getWriter().abort(e)}),closed:i}}(t.writable),u=rG({type:"start",scripts:a.slice(1),options:o,config:e,readable:r,writable:l},t);u||Object.assign(t,{reader:r.getReader(),writer:l.getWriter()});const h=await s;return u||await l.getWriter().close(),await c,h}(t,{chunkSize:n})}})}return t.interface}let nG=!0,sG=!0;function rG(t,{worker:e,writer:i,onTaskFinished:n,transferStreams:s}){try{let{value:i,readable:n,writable:r}=t;const o=[];if(i&&(i.byteLength<i.buffer.byteLength?t.value=i.buffer.slice(0,i.byteLength):t.value=i.buffer,o.push(t.value)),s&&sG?(n&&o.push(n),r&&o.push(r)):t.readable=t.writable=null,o.length)try{return e.postMessage(t,o),!0}catch(i){sG=!1,t.readable=t.writable=null,e.postMessage(t)}else e.postMessage(t)}catch(t){throw i&&i.releaseLock(),n(),t}}let oG=[];const aG=[];let lG=0;function cG(t){const{terminateTimeout:e}=t;e&&(clearTimeout(e),t.terminateTimeout=null)}const uG=65536;class hG{constructor(){this.size=0}init(){this.initialized=!0}}class dG extends hG{get readable(){const t=this,{chunkSize:e=uG}=t,i=new ReadableStream({start(){this.chunkOffset=0},async pull(n){const{offset:s=0,size:r,diskNumberStart:o}=i,{chunkOffset:a}=this;n.enqueue(await mG(t,s+a,Math.min(e,r-a),o)),a+e>r?n.close():this.chunkOffset+=e}});return i}}class fG extends dG{constructor(t){super(),this.readers=t}async init(){const t=this,{readers:e}=t;t.lastDiskNumber=0,t.lastDiskOffset=0,await Promise.all(e.map((async(i,n)=>{await i.init(),n!=e.length-1&&(t.lastDiskOffset+=i.size),t.size+=i.size}))),super.init()}async readUint8Array(t,e,i=0){const n=this,{readers:s}=this;let r,o=i;-1==o&&(o=s.length-1);let a=t;for(;a>=s[o].size;)a-=s[o].size,o++;const l=s[o],c=l.size;if(a+e<=c)r=await mG(l,a,e);else{const s=c-a;r=new Uint8Array(e),r.set(await mG(l,a,s)),r.set(await n.readUint8Array(t+s,e-s,i),s)}return n.lastDiskNumber=Math.max(o,n.lastDiskNumber),r}}class pG extends hG{constructor(t,e=4294967295){super();const i=this;let n,s,r;Object.assign(i,{diskNumber:0,diskOffset:0,size:0,maxSize:e,availableSize:e});const o=new WritableStream({async write(e){const{availableSize:o}=i;if(r)e.length>=o?(await a(e.slice(0,o)),await l(),i.diskOffset+=n.size,i.diskNumber++,r=null,await this.write(e.slice(o))):await a(e);else{const{value:o,done:a}=await t.next();if(a&&!o)throw new Error("Writer iterator completed too soon");n=o,n.size=0,n.maxSize&&(i.maxSize=n.maxSize),i.availableSize=i.maxSize,await gG(n),s=o.writable,r=s.getWriter(),await this.write(e)}},async close(){await r.ready,await l()}});async function a(t){const e=t.length;e&&(await r.ready,await r.write(t),n.size+=e,i.size+=e,i.availableSize-=e)}async function l(){s.size=n.size,await r.close()}Object.defineProperty(i,"writable",{get:()=>o})}}async function gG(t,e){if(!t.init||t.initialized)return Promise.resolve();await t.init(e)}function mG(t,e,i,n){return t.readUint8Array(e,i,n)}const yG="diskNumberStart",vG="lastModDate",bG="lastAccessDate",xG="creationDate",wG="internalFileAttribute",MG="externalFileAttribute",SG="msDosCompatible",kG="zip64",_G=["filename","rawFilename","compressedSize","uncompressedSize",vG,"rawLastModDate","comment","rawComment",bG,xG,"offset",yG,yG,wG,MG,SG,kG,"directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class IG{constructor(t){_G.forEach((e=>this[e]=t[e]))}}const CG="Version exceeds 65535",LG="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",NG=new Uint8Array([7,0,2,0,65,69,3,0,0]);let jG=0;const TG=[];class zG{constructor(t,e={}){const i=(t=function(t){t.writable===PF&&typeof t.next==EF&&(t=new pG(t)),t instanceof WritableStream&&(t={writable:t});const{writable:e}=t;return e.size===PF&&(e.size=0),t instanceof pG||Object.assign(t,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),t}(t)).availableSize!==PF&&t.availableSize>0&&t.availableSize!==1/0&&t.maxSize!==PF&&t.maxSize>0&&t.maxSize!==1/0;Object.assign(this,{writer:t,addSplitZipSignature:i,options:e,config:BF,files:new Map,filenames:new Set,offset:t.writable.size,pendingEntriesSize:0,pendingAddFileCalls:new Set,bufferedWrites:0})}async add(t="",e,i={}){const n=this,{pendingAddFileCalls:s,config:r}=n;let o;jG<r.maxWorkers?jG++:await new Promise((t=>TG.push(t)));try{if(t=t.trim(),n.filenames.has(t))throw new Error("File already exists");return n.filenames.add(t),o=async function(t,e,i,n){e=e.trim(),n.directory&&!e.endsWith("/")?e+="/":n.directory=e.endsWith("/");const s=EG(t,n,"encodeText",HF),r=s(e);if(FG(r)>TF)throw new Error("File entry name exceeds 64KB");const o=n.comment||"",a=s(o);if(FG(a)>TF)throw new Error("File entry comment exceeds 64KB");const l=EG(t,n,"version",20);if(l>TF)throw new Error(CG);const c=EG(t,n,"versionMadeBy",20);if(c>TF)throw new Error(CG);const u=EG(t,n,vG,new Date),h=EG(t,n,bG),d=EG(t,n,xG),f=EG(t,n,SG,!0),p=EG(t,n,wG,0),g=EG(t,n,MG,0),m=EG(t,n,"password"),y=EG(t,n,"rawPassword"),v=EG(t,n,"encryptionStrength",3),b=EG(t,n,"zipCrypto"),x=EG(t,n,"extendedTimestamp",!0),w=EG(t,n,"keepOrder",!0),M=EG(t,n,"level"),S=EG(t,n,"useWebWorkers"),k=EG(t,n,"bufferedWrite"),_=EG(t,n,"dataDescriptorSignature",!1),I=EG(t,n,"signal"),C=EG(t,n,"useCompressionStream");let L=EG(t,n,"dataDescriptor",!0),N=EG(t,n,kG);if(m!==PF&&v!==PF&&(v<1||v>3))throw new Error("The strength must equal 1, 2, or 3");let j=new Uint8Array;const{extraField:T}=n;if(T){let t=0,e=0;T.forEach((e=>t+=4+FG(e))),j=new Uint8Array(t),T.forEach(((t,i)=>{if(i>TF)throw new Error("Extra field type exceeds 65535");if(FG(t)>TF)throw new Error("Extra field data exceeds 64KB");UG(j,new Uint16Array([i]),e),UG(j,new Uint16Array([FG(t)]),e+2),UG(j,t,e+4),e+=4+FG(t)}))}let z=0,A=0,P=0;const D=!0===N;i&&(i=function(t){return Array.isArray(t)&&(t=new fG(t)),t instanceof ReadableStream&&(t={readable:t}),t}(i),await gG(i),i.size===PF?(L=!0,(N||N===PF)&&(N=!0,P=z=jF)):(P=i.size,z=function(t){return t+5*(Math.floor(t/16383)+1)}(P)));const{diskOffset:E,diskNumber:O,maxSize:R}=t.writer,W=D||P>=jF,B=D||z>=jF,U=D||t.offset+t.pendingEntriesSize-E>=jF,$=EG(t,n,"supportZip64SplitFile",!0)&&D||O+Math.ceil(t.pendingEntriesSize/R)>=TF;if(U||W||B||$){if(!1===N||!w)throw new Error(LG);N=!0}N=N||!1;const F=function(t){const{rawFilename:e,lastModDate:i,lastAccessDate:n,creationDate:s,rawPassword:r,password:o,level:a,zip64:l,zipCrypto:c,dataDescriptor:u,directory:h,rawExtraField:d,encryptionStrength:f,extendedTimestamp:p}=t,g=0!==a&&!h,m=Boolean(o&&FG(o)||r&&FG(r));let y,v,b,x,w=t.version;if(m&&!c){y=new Uint8Array(FG(NG)+2);const t=$G(y);RG(t,0,39169),UG(y,NG,2),OG(t,8,f)}else y=new Uint8Array;if(p){b=new Uint8Array(9+(n?4:0)+(s?4:0));const t=$G(b);RG(t,0,21589),RG(t,2,FG(b)-4),x=1+(n?2:0)+(s?4:0),OG(t,4,x);let e=5;WG(t,e,Math.floor(i.getTime()/1e3)),e+=4,n&&(WG(t,e,Math.floor(n.getTime()/1e3)),e+=4),s&&WG(t,e,Math.floor(s.getTime()/1e3));try{v=new Uint8Array(36);const t=$G(v),e=DG(i);RG(t,0,10),RG(t,2,32),RG(t,8,1),RG(t,10,24),BG(t,12,e),BG(t,20,DG(n)||e),BG(t,28,DG(s)||e)}catch(t){v=new Uint8Array}}else v=b=new Uint8Array;let M=2048;u&&(M|=8);let S=0;g&&(S=8),l&&(w=w>45?w:45),m&&(M|=1,c||(w=w>51?w:51,S=99,g&&(y[9]=8)));const k=new Uint8Array(26),_=$G(k);RG(_,0,w),RG(_,2,M),RG(_,4,S);const I=new Uint32Array(1),C=$G(I);let L;L=i<AF?AF:i>zF?zF:i,RG(C,0,(L.getHours()<<6|L.getMinutes())<<5|L.getSeconds()/2),RG(C,2,(L.getFullYear()-1980<<4|L.getMonth()+1)<<5|L.getDate());const N=I[0];WG(_,6,N),RG(_,22,FG(e));const j=FG(y,b,v,d);RG(_,24,j);const T=new Uint8Array(30+FG(e)+j);return WG($G(T),0,67324752),UG(T,k,4),UG(T,e,30),UG(T,y,30+FG(e)),UG(T,b,30+FG(e,y)),UG(T,v,30+FG(e,y,b)),UG(T,d,30+FG(e,y,b,v)),{localHeaderArray:T,headerArray:k,headerView:_,lastModDate:i,rawLastModDate:N,encrypted:m,compressed:g,version:w,compressionMethod:S,extraFieldExtendedTimestampFlag:x,rawExtraFieldExtendedTimestamp:b,rawExtraFieldNTFS:v,rawExtraFieldAES:y,extraFieldLength:j}}(n=Object.assign({},n,{rawFilename:r,rawComment:a,version:l,versionMadeBy:c,lastModDate:u,lastAccessDate:h,creationDate:d,rawExtraField:j,zip64:N,zip64UncompressedSize:W,zip64CompressedSize:B,zip64Offset:U,zip64DiskNumberStart:$,password:m,rawPassword:y,level:C||t.config.CompressionStream!==PF?M:0,useWebWorkers:S,encryptionStrength:v,extendedTimestamp:x,zipCrypto:b,bufferedWrite:k,keepOrder:w,dataDescriptor:L,dataDescriptorSignature:_,signal:I,msDosCompatible:f,internalFileAttribute:p,externalFileAttribute:g,useCompressionStream:C})),V=function(t){const{zip64:e,dataDescriptor:i,dataDescriptorSignature:n}=t;let s,r=new Uint8Array,o=0;return i&&(r=new Uint8Array(e?n?24:20:n?16:12),s=$G(r),n&&(o=4,WG(s,0,134695760))),{dataDescriptorArray:r,dataDescriptorView:s,dataDescriptorOffset:o}}(n),G=FG(F.localHeaderArray,V.dataDescriptorArray);let H;A=G+z,t.options.usdz&&(A+=A+64),t.pendingEntriesSize+=A;try{H=await async function(t,e,i,n,s){const{files:r,writer:o}=t,{keepOrder:a,dataDescriptor:l,signal:c}=s,{headerInfo:u}=n,{usdz:h}=t.options,d=Array.from(r.values()).pop();let f,p,g,m,y,v,b,x={};r.set(e,x);try{let u;a&&(u=d&&d.lock,x.lock=new Promise((t=>g=t))),!(s.bufferedWrite||t.writerLocked||t.bufferedWrites&&a)&&l||h?(v=o,await w()):(v=new TransformStream,b=new Response(v.readable).blob(),v.writable.size=0,f=!0,t.bufferedWrites++,await gG(o)),await gG(v);const{writable:p}=o;let{diskOffset:S}=o;if(t.addSplitZipSignature){delete t.addSplitZipSignature;const e=new Uint8Array(4);WG($G(e),0,134695760),await PG(p,e),t.offset+=4}h&&function(t,e){const{headerInfo:i}=t;let{localHeaderArray:n,extraFieldLength:s}=i,r=$G(n),o=64-(e+FG(n))%64;o<4&&(o+=64);const a=new Uint8Array(o),l=$G(a);RG(l,0,6534),RG(l,2,o-2);const c=n;i.localHeaderArray=n=new Uint8Array(FG(c)+o),UG(n,c),UG(n,a,FG(c)),r=$G(n),RG(r,28,s+o),t.metadataSize+=o}(n,t.offset-S),f||(await u,await M(p));const{diskNumber:k}=o;if(y=!0,x.diskNumberStart=k,x=await async function(t,e,{diskNumberStart:i,lock:n},s,r,o){const{headerInfo:a,dataDescriptorInfo:l,metadataSize:c}=s,{localHeaderArray:u,headerArray:h,lastModDate:d,rawLastModDate:f,encrypted:p,compressed:g,version:m,compressionMethod:y,rawExtraFieldExtendedTimestamp:v,extraFieldExtendedTimestampFlag:b,rawExtraFieldNTFS:x,rawExtraFieldAES:w}=a,{dataDescriptorArray:M}=l,{rawFilename:S,lastAccessDate:k,creationDate:_,password:I,rawPassword:C,level:L,zip64:N,zip64UncompressedSize:j,zip64CompressedSize:T,zip64Offset:z,zip64DiskNumberStart:A,zipCrypto:P,dataDescriptor:D,directory:E,versionMadeBy:O,rawComment:R,rawExtraField:W,useWebWorkers:B,onstart:U,onprogress:$,onend:F,signal:V,encryptionStrength:G,extendedTimestamp:H,msDosCompatible:Z,internalFileAttribute:Y,externalFileAttribute:Q,useCompressionStream:J}=o,q={lock:n,versionMadeBy:O,zip64:N,directory:Boolean(E),filenameUTF8:!0,rawFilename:S,commentUTF8:!0,rawComment:R,rawExtraFieldExtendedTimestamp:v,rawExtraFieldNTFS:x,rawExtraFieldAES:w,rawExtraField:W,extendedTimestamp:H,msDosCompatible:Z,internalFileAttribute:Y,externalFileAttribute:Q,diskNumberStart:i};let K,X=0,tt=0;const{writable:et}=e;if(t){t.chunkSize=function(t){return Math.max(t.chunkSize,64)}(r),await PG(et,u);const e=t.readable,i=e.size=t.size,n={options:{codecType:YV,level:L,rawPassword:C,password:I,encryptionStrength:G,zipCrypto:p&&P,passwordVerification:p&&P&&f>>8&255,signed:!0,compressed:g,encrypted:p,useWebWorkers:B,useCompressionStream:J,transferStreams:!1},config:r,streamOptions:{signal:V,size:i,onstart:U,onprogress:$,onend:F}},s=await async function(t,e){const{options:i,config:n}=e,{transferStreams:s,useWebWorkers:r,useCompressionStream:o,codecType:a,compressed:l,signed:c,encrypted:u}=i,{workerScripts:h,maxWorkers:d}=n;e.transferStreams=s||s===PF;const f=!(l||c||u||e.transferStreams);return e.useWebWorkers=!f&&(r||r===PF&&n.useWebWorkers),e.scripts=e.useWebWorkers&&h?h[a]:[],i.useCompressionStream=o||o===PF&&n.useCompressionStream,(await async function(){const i=oG.find((t=>!t.busy));if(i)return cG(i),new KV(i,t,e,p);if(oG.length<d){const i={indexWorker:lG};return lG++,oG.push(i),new KV(i,t,e,p)}return new Promise((i=>aG.push({resolve:i,stream:t,workerOptions:e})))}()).run();function p(t){if(aG.length){const[{resolve:e,stream:i,workerOptions:n}]=aG.splice(0,1);e(new KV(t,i,n,p))}else t.worker?(cG(t),function(t,e){const{config:i}=e,{terminateWorkerTimeout:n}=i;Number.isFinite(n)&&n>=0&&(t.terminated?t.terminated=!1:t.terminateTimeout=setTimeout((async()=>{oG=oG.filter((e=>e!=t));try{await t.terminate()}catch(t){}}),n))}(t,e)):oG=oG.filter((e=>e!=t))}}({readable:e,writable:et},n);tt=s.inputSize,X=s.outputSize,K=s.signature,et.size+=tt}else await PG(et,u);let it;if(N){let t=4;j&&(t+=8),T&&(t+=8),z&&(t+=8),A&&(t+=4),it=new Uint8Array(t)}else it=new Uint8Array;return function(t,e){const{signature:i,rawExtraFieldZip64:n,compressedSize:s,uncompressedSize:r,headerInfo:o,dataDescriptorInfo:a}=t,{headerView:l,encrypted:c}=o,{dataDescriptorView:u,dataDescriptorOffset:h}=a,{zip64:d,zip64UncompressedSize:f,zip64CompressedSize:p,zipCrypto:g,dataDescriptor:m}=e;if(c&&!g||i===PF||(WG(l,10,i),m&&WG(u,h,i)),d){const t=$G(n);RG(t,0,1),RG(t,2,FG(n)-4);let e=4;f&&(WG(l,18,jF),BG(t,e,BigInt(r)),e+=8),p&&(WG(l,14,jF),BG(t,e,BigInt(s))),m&&(BG(u,h+4,BigInt(s)),BG(u,h+12,BigInt(r)))}else WG(l,14,s),WG(l,18,r),m&&(WG(u,h+4,s),WG(u,h+8,r))}({signature:K,rawExtraFieldZip64:it,compressedSize:X,uncompressedSize:tt,headerInfo:a,dataDescriptorInfo:l},o),D&&await PG(et,M),Object.assign(q,{uncompressedSize:tt,compressedSize:X,lastModDate:d,rawLastModDate:f,creationDate:_,lastAccessDate:k,encrypted:p,size:c+X,compressionMethod:y,version:m,headerArray:h,signature:K,rawExtraFieldZip64:it,extraFieldExtendedTimestampFlag:b,zip64UncompressedSize:j,zip64CompressedSize:T,zip64Offset:z,zip64DiskNumberStart:A}),q}(i,v,x,n,t.config,s),y=!1,r.set(e,x),x.filename=e,f){await v.writable.getWriter().close();let t=await b;await u,await w(),m=!0,l||(t=await async function(t,e,i,{zipCrypto:n}){let s;s=await e.slice(0,26).arrayBuffer(),26!=s.byteLength&&(s=s.slice(0,26));const r=new DataView(s);return t.encrypted&&!n||WG(r,14,t.signature),t.zip64?(WG(r,18,jF),WG(r,22,jF)):(WG(r,18,t.compressedSize),WG(r,22,t.uncompressedSize)),await PG(i,new Uint8Array(s)),e.slice(s.byteLength)}(x,t,p,s)),await M(p),x.diskNumberStart=o.diskNumber,S=o.diskOffset,await t.stream().pipeTo(p,{preventClose:!0,preventAbort:!0,signal:c}),p.size+=t.size,m=!1}if(x.offset=t.offset-S,x.zip64)!function(t,e){const{rawExtraFieldZip64:i,offset:n,diskNumberStart:s}=t,{zip64UncompressedSize:r,zip64CompressedSize:o,zip64Offset:a,zip64DiskNumberStart:l}=e,c=$G(i);let u=4;r&&(u+=8),o&&(u+=8),a&&(BG(c,u,BigInt(n)),u+=8),l&&WG(c,u,s)}(x,s);else if(x.offset>=jF)throw new Error(LG);return t.offset+=x.size,x}catch(i){if(f&&m||!f&&y){if(t.hasCorruptedEntries=!0,i)try{i.corruptedEntry=!0}catch(t){}f?t.offset+=v.writable.size:t.offset=v.writable.size}throw r.delete(e),i}finally{f&&t.bufferedWrites--,g&&g(),p&&p()}async function w(){t.writerLocked=!0;const{lockWriter:e}=t;t.lockWriter=new Promise((e=>p=()=>{t.writerLocked=!1,e()})),await e}async function M(t){FG(u.localHeaderArray)>o.availableSize&&(o.availableSize=0,await PG(t,new Uint8Array))}}(t,e,i,{headerInfo:F,dataDescriptorInfo:V,metadataSize:G},n)}finally{t.pendingEntriesSize-=A}return Object.assign(H,{name:e,comment:o,extraField:T}),new IG(H)}(n,t,e,i),s.add(o),await o}catch(e){throw n.filenames.delete(t),e}finally{s.delete(o);const t=TG.shift();t?t():jG--}}async close(t=new Uint8Array,e={}){const{pendingAddFileCalls:i,writer:n}=this,{writable:s}=n;for(;i.size;)await Promise.allSettled(Array.from(i));return await async function(t,e,i){const{files:n,writer:s}=t,{diskOffset:r,writable:o}=s;let{diskNumber:a}=s,l=0,c=0,u=t.offset-r,h=n.size;for(const[,t]of n){const{rawFilename:e,rawExtraFieldZip64:i,rawExtraFieldAES:n,rawComment:s,rawExtraFieldNTFS:r,rawExtraField:o,extendedTimestamp:a,extraFieldExtendedTimestampFlag:l,lastModDate:u}=t;let h;if(a){h=new Uint8Array(9);const t=$G(h);RG(t,0,21589),RG(t,2,5),OG(t,4,l),WG(t,5,Math.floor(u.getTime()/1e3))}else h=new Uint8Array;t.rawExtraFieldCDExtendedTimestamp=h,c+=46+FG(e,s,i,n,r,h,o)}const d=new Uint8Array(c),f=$G(d);await gG(s);let p=0;for(const[t,e]of Array.from(n.values()).entries()){const{offset:r,rawFilename:a,rawExtraFieldZip64:c,rawExtraFieldAES:u,rawExtraFieldCDExtendedTimestamp:h,rawExtraFieldNTFS:g,rawExtraField:m,rawComment:y,versionMadeBy:v,headerArray:b,directory:x,zip64:w,zip64UncompressedSize:M,zip64CompressedSize:S,zip64DiskNumberStart:k,zip64Offset:_,msDosCompatible:I,internalFileAttribute:C,externalFileAttribute:L,diskNumberStart:N,uncompressedSize:j,compressedSize:T}=e,z=FG(c,u,h,g,m);WG(f,l,33639248),RG(f,l+4,v);const A=$G(b);M||WG(A,18,j),S||WG(A,14,T),UG(d,b,l+6),RG(f,l+30,z),RG(f,l+32,FG(y)),RG(f,l+34,w&&k?TF:N),RG(f,l+36,C),L?WG(f,l+38,L):x&&I&&OG(f,l+38,16),WG(f,l+42,w&&_?jF:r),UG(d,a,l+46),UG(d,c,l+46+FG(a)),UG(d,u,l+46+FG(a,c)),UG(d,h,l+46+FG(a,c,u)),UG(d,g,l+46+FG(a,c,u,h)),UG(d,m,l+46+FG(a,c,u,h,g)),UG(d,y,l+46+FG(a)+z);const P=46+FG(a,y)+z;if(l-p>s.availableSize&&(s.availableSize=0,await PG(o,d.slice(p,l)),p=l),l+=P,i.onprogress)try{await i.onprogress(t+1,n.size,new IG(e))}catch(t){}}await PG(o,p?d.slice(p):d);let g=s.diskNumber;const{availableSize:m}=s;m<22&&g++;let y=EG(t,i,"zip64");if(u>=jF||c>=jF||h>=TF||g>=TF){if(!1===y)throw new Error(LG);y=!0}const v=new Uint8Array(y?98:22),b=$G(v);l=0,y&&(WG(b,0,101075792),BG(b,4,BigInt(44)),RG(b,12,45),RG(b,14,45),WG(b,16,g),WG(b,20,a),BG(b,24,BigInt(h)),BG(b,32,BigInt(h)),BG(b,40,BigInt(c)),BG(b,48,BigInt(u)),WG(b,56,117853008),BG(b,64,BigInt(u)+BigInt(c)),WG(b,72,g+1),EG(t,i,"supportZip64SplitFile",!0)&&(g=TF,a=TF),h=TF,u=jF,c=jF,l+=76),WG(b,l,101010256),RG(b,l+4,g),RG(b,l+6,a),RG(b,l+8,h),RG(b,l+10,h),WG(b,l+12,c),WG(b,l+16,u);const x=FG(e);if(x){if(!(x<=TF))throw new Error("Zip file comment exceeds 64KB");RG(b,l+20,x)}await PG(o,v),x&&await PG(o,e)}(this,t,e),EG(this,e,"preventClose")||await s.getWriter().close(),n.getData?n.getData():s}}class AG{constructor(t={}){const{readable:e,writable:i}=new TransformStream;this.readable=e,this.zipWriter=new zG(i,t)}transform(t){const{readable:e,writable:i}=new TransformStream({flush:()=>{this.zipWriter.close()}});return this.zipWriter.add(t,e),{readable:this.readable,writable:i}}writable(t){const{readable:e,writable:i}=new TransformStream;return this.zipWriter.add(t,e),i}close(t,e={}){return this.zipWriter.close(t,e)}}async function PG(t,e){const i=t.getWriter();try{await i.ready,t.size+=FG(e),await i.write(e)}finally{i.releaseLock()}}function DG(t){if(t)return(BigInt(t.getTime())+BigInt(116444736e5))*BigInt(1e4)}function EG(t,e,i,n){const s=e[i]===PF?t.options[i]:e[i];return s===PF?n:s}function OG(t,e,i){t.setUint8(e,i)}function RG(t,e,i){t.setUint16(e,i,!0)}function WG(t,e,i){t.setUint32(e,i,!0)}function BG(t,e,i){t.setBigUint64(e,i,!0)}function UG(t,e,i){t.set(e,i)}function $G(t){return new DataView(t.buffer)}function FG(...t){let e=0;return t.forEach((t=>t&&(e+=t.length))),e}UF({Deflate:function(t){const e=new NF,i=(n=t&&t.chunkSize?t.chunkSize:65536)+5*(Math.floor(n/16383)+1);var n;const s=new Uint8Array(i);let r=t?t.level:-1;void 0===r&&(r=-1),e.deflateInit(r),e.next_out=s,this.append=function(t,n){let r,o,a=0,l=0,c=0;const u=[];if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=i,r=e.deflate(0),0!=r)throw new Error("deflating: "+e.msg);e.next_out_index&&(e.next_out_index==i?u.push(new Uint8Array(s)):u.push(s.subarray(0,e.next_out_index))),c+=e.next_out_index,n&&e.next_in_index>0&&e.next_in_index!=a&&(n(e.next_in_index),a=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return u.length>1?(o=new Uint8Array(c),u.forEach((function(t){o.set(t,l),l+=t.length}))):o=u[0]?new Uint8Array(u[0]):new Uint8Array,o}},this.flush=function(){let t,n,r=0,o=0;const a=[];do{if(e.next_out_index=0,e.avail_out=i,t=e.deflate(4),1!=t&&0!=t)throw new Error("deflating: "+e.msg);i-e.avail_out>0&&a.push(s.slice(0,e.next_out_index)),o+=e.next_out_index}while(e.avail_in>0||0===e.avail_out);return e.deflateEnd(),n=new Uint8Array(o),a.forEach((function(t){n.set(t,r),r+=t.length})),n}}}),UF({useWebWorkers:!1});const VG=1e6,GG=1e6;let HG,ZG,YG,QG,JG,qG;const KG=new Map;let XG=null,tH=!1;const eH=[];function iH(t){return Math.round(t/ZG)}async function nH(t,e,i,n){let s=i.startTime??0,r=s+(i.duration??e.duration);HG=i.fps??e.fps,ZG=1e3/HG,YG=i.bounds.width,QG=i.bounds.height,tH=!!i?.compressImg,qG=0,XG=n;let o,a=new xB(63,null,new Map([[Ad,JH]]));[o,JG]=a.export(t,e,s,r,!1),a=null;const l=i.size?.width||YG,c=i.size?.height||QG,u=iH(JG),h=function(t,e,i){const n=[];for(const e of t)n.push(...gH(e,!0)),e.dispose();if(e===YG&&i===QG)return n;const s={s:{a:0,k:[eZ(e/YG),eZ(i/QG)]}};let r=!0;for(const t of n)if(null!=t.ks&&Object.keys(t.ks).length>0){r=!1;break}if(r){for(const t of n)t.ks=s;return n}const o="p"+qG++;return eH.push({id:o,fr:HG,layers:n}),[{ty:0,refId:o,w:e,h:i,ip:0,op:iH(JG),st:0,ks:s}]}(o.reverse(),l,c),d={v:"5.0.0",meta:{g:"Expressive Animator (https://expressive.app)"},fr:HG,ip:0,op:u,w:l,h:c,ddd:0,layers:h,assets:eH.length?eH.splice(0):void 0};if(KG.clear(),XG=null,i.background&&i.background.a){const t=i.background;d.layers.push({ty:1,ip:0,op:u,st:0,sw:l,sh:c,sc:b(t.r,t.g,t.b,1,!0),ks:{o:{a:0,k:eZ(t.a)}}})}return new Blob([IB(d,0)],{type:"application/json"})}async function sH(t,e,i,n){const s=await nH(e,i,n,null);await s.stream().pipeTo(t)}async function rH(t,e,i,n){const s=new AG({zip64:!1,level:5,msDosCompatible:!0});s.readable.pipeTo(t);const r=new Map,o=await nH(e,i,n,r);(function(t){return new Blob([JSON.stringify(t)],lt).stream()})({version:"1.0",revision:1,author:aI,description:`${aI} (https://expressive.app)`,generator:`${aI} v${lI}`,keywords:aI,animations:[{id:"main",direction:n?.reverse?-1:1,speed:n?.speed||1,playMode:n?.reverse?"bounce":"normal",loop:0===(n?.repeat||0)||1!==n.repeat&&n.repeat,autoplay:!1,hover:!1,intermission:0}]}).pipeTo(s.writable("manifest.json")),o.stream().pipeTo(s.writable("animations/main.json"));for(const[t,e]of r){const i=t.data.encodeToData(tH?Skia.SkEncodedImageFormat.WEBP:Skia.SkEncodedImageFormat.PNG,100),n=i.getBlob(tH?"image/webp":"image/png");i.delete(),n.stream().pipeTo(s.writable(`images/${e}`))}r.clear(),await s.close()}function*oH(t){Wm(t.target)?yield function(t){const e=function(t){if(t.target instanceof Zp){const[e,i]=t.pair($d);return cH(i??e)}if(t.target instanceof xg){const e=[];for(const[i]of t.target.paragraph.pathsWithStyle())e.push(...lH(gs(i)));return[e,aH]}const e=UR(t.target);if(!e)return null;const i=[];for(const n of e){const[e,s]=t.pair(n);i.push(s||e)}const n=$R(t.target,i,HG);return cH(qH($d,n))}(t);if(!e)return null;const[i,n]=e;if(!i?.length)return null;const s=i.length;return i.push(...function*(t,e){0===t.value(of)?(yield*OH(t,e),yield*EH(t)):(yield*EH(t),yield*OH(t,e))}(t,n)),i.length===s?null:wH(t)?mH(t,i):yH(t,i)}(t):t.target instanceof Hp?yield*gH(t):t.target instanceof dg?yield function(t){const e=t.target.imageResource,i=function(t){if(!t)return null;if(KG.has(t.id))return KG.get(t.id);let e;try{XG?(e=`${XG.size}.${tH?"webp":"png"}`,XG.set(t,e)):e=t.data.encodeToDataURI(tH?Skia.SkEncodedImageFormat.WEBP:Skia.SkEncodedImageFormat.PNG,100)}catch{return KG.set(t.id,null),null}const i="i"+qG++;return eH.push({id:i,w:t.width,h:t.height,e:1,u:"",p:e}),KG.set(t.id,i),i}(e);if(!i)return null;const n=e.width,s=e.height,r=t.value(Ud),[o,a]=t.pair(Zf),[l,c]=t.pair(Yf);if(null!=(a||l)||o!==n||l!==s||!r.isZero){const e=[a??o,c??l];let u;r.isZero||(u=[...dO(e,HG,(([t,e])=>new Be(-r.x*t,-r.y*e)))],cO(u),hO(u,Qh));const h=[...dO(e,HG,(([t,e])=>new Be(t/n,e/s)))];cO(h),hO(h,Qh);const d=0,f=iH(t.start),p=iH(t.end),[g,m]=ZH(t),y=[];let v=0;return YH(g)||(y.push(dH(g,v,f,p)),v++),y.push(dH({p:u?jH(u,iZ):void 0,s:jH(h,nZ)},v,f,p,v?v-1:void 0)),y.push({ty:2,refId:i,st:d,ip:f,op:p,parent:v,ks:{}}),bH(t,y,m)}return{ty:2,refId:i,...xH(t)}}(t):t.target instanceof fg&&(yield function(t){const e=[],i=[],n=[];for(const s of t.children)s.target instanceof sg?i.push(s):s.target instanceof tg?n.push(s):e.push(s);if(!e.length)return null;const s=iH(t.start),r=iH(t.end);let o=[];for(const t of i)o.push(...gH(t,!0));for(const t of n)o.push(fH(t));if(o=o.filter(_t),!o.length)return null;const[a]=pH(e,s,r,!0);if(!a?.length)return null;let l,c;l=1===o.length?o[0]:vH(o,s,r),l.td=1,l.ind=1,c=1===a.length?a[0]:vH(a,s,r),c.tp=1,c.tt=t.target.isAlphaMask?1:3;let u=[l,c];const[h,d]=ZH(t);return YH(h)||(u.unshift(dH(h,0,s,r)),l.parent=c.parent=0),bH(t,u,d)}(t))}function aH(){return 0}function lH(t){if(!(t instanceof FE))return vs(t).map((t=>({ty:"sh",ks:TH(t,hH)})));const e=ys(t.keyframes[0].value),i=aO(t.keyframes,(t=>vs(t,e))),n=[],s=e.length/2;for(let t=0;t<s;t++)n.push({ty:"sh",ks:jH(aO(i,(e=>e[t])),hH)});return n}function cH(t){if(!(t instanceof FE)){let e;return[lH(t),()=>e??=hs(t)]}let e;return[lH(t),i=>{if(e??=new Map,e.has(i))return e.get(i);const n=hs(t.getValueAtOffset(i));return e.set(i,n),n}]}const uH=[0,0];function hH(t){const e=[],i=[],n=[],s=3===t[t.length-1].type;for(const s of t)e.push(iZ(s.point)),1===s.joint?(i.push(uH),n.push(uH)):(s.handleIn?i.push(iZ(s.handleIn.sub(s.point))):i.push(uH),s.handleOut?n.push(iZ(s.handleOut.sub(s.point))):n.push(uH));return{c:s,v:e,i,o:n}}function dH(t,e,i,n,s){return{ty:3,st:0,ip:i,op:n,ind:e,parent:s,ks:t}}function fH(t){const[e,i]=t.pair($d),n=lH(i??e);return n?.length?(n.push({ty:"fl",o:TH(1,eZ),c:TH(De.white,XH),r:AH.get(t.value(Fd))}),mH(t,n)):null}function pH(t,e,i,n){let s=null,r=null;for(const n of function*(t){for(let e=t.length-1;e>=0;e--)yield*oH(t[e])}(t))n&&("string"!=typeof n.ty?(r??=[],s?.length&&(r.push({ty:4,shapes:[...s],ip:e,op:i,st:0,ks:{}}),s.splice(0)),r.push(n)):(s??=[],s.push(n)));return n&&!r&&s?.length&&(r=[]),r&&(s?.length&&r.push({ty:4,shapes:s,ip:e,op:i,st:0,ks:{}}),s=null),[r,s]}function*gH(t,e){const i=iH(t.start),n=iH(t.end);let[s,r]=pH(t.children,i,n);if(!s){if(!r?.length)return;if(e||wH(t))yield mH(t,r);else{const e=HH(t);YH(e)?yield*r:yield yH(t,r,e)}return}const o=HH(t),a=!YH(o);if(!a&&!wH(t)){if(!e)return void(yield*s);if(1===s.length&&0===s[0].ty)return s[0].bm||(s[0].bm=_H(t)),void(yield s[0])}yield bH(t,s,a?o:null)}function mH(t,e){return{ty:4,shapes:e,...xH(t)}}function yH(t,e,i){return i??=HH(t),i&&e.push({ty:"tr",...i}),{ty:"gr",bm:_H(t)||void 0,nm:void 0,it:e}}function vH(t,e,i,n){const s="p"+qG++;return eH.push({id:s,fr:HG,layers:t}),{ty:0,refId:s,w:VG,h:GG,st:0,ip:e,op:i,ks:n||{}}}function bH(t,e,i){const n="p"+qG++;return eH.push({id:n,fr:HG,layers:e}),{ty:0,refId:n,w:VG,h:GG,...xH(t,i)}}function xH(t,e){void 0===e&&(e=HH(t));const i=!YH(e);return{st:0,nm:void 0,ip:iH(t.start),op:iH(t.end),bm:_H(t)||void 0,ks:i?e:{},ef:SH(t.filterContainer)||void 0}}function wH(t){return null!=t.filterContainer||t.value(Td)||t.hasOwnVisibility&&(t.start>0||t.end<JG)}const MH=new Map([[Xg,function(t){return{ty:29,en:1,ef:[{ty:0,v:IH(t,kp,(t=>t/.3))},{ty:0,v:{a:0,k:1}},{ty:4,v:{a:0,k:0}}]}}],[em,function(t){const[e,i]=t.pair(Dp);let n,s,r,o,a,l,c,[u,h]=t.pair(Ep);if(h?(l=aO(h.keyframes,(t=>t.a)),cO(l),hO(l,Yh),c=aO(h.keyframes,(t=>t.withOpacity(1))),cO(c),hO(c,td)):(r=u.a,u=u.withOpacity(1)),i){const t=[...dO([i],HG,(([t])=>[t.length,(t.angle+90+360)%360]))];o=aO(t,(t=>t[0])),cO(o),hO(o,Zh),a=aO(t,(t=>t[1])),cO(a),hO(a,Gh)}else n=e.length,s=(e.angle+90+360)%360;return{ty:25,en:1,ef:[{ty:2,v:c?jH(c,XH):TH(u,XH)},{ty:0,v:l?jH(l,y):TH(r,y)},{ty:1,v:a?jH(a,It):TH(s,It)},{ty:0,v:o?jH(o,It):TH(n,It)},{ty:0,v:IH(t,Pp,(t=>4*t))}]}}]]);function SH(t){if(!t||!t.children.length)return null;const e=[];for(const i of t.children)if(MH.has(i.target.constructor)){const t=MH.get(i.target.constructor)(i);t&&e.push(t)}return e.length?e:null}const kH=new Map([[11,0],[10,1],[14,2],[12,3],[3,4],[8,5],[2,6],[1,7],[6,8],[15,9],[4,10],[5,11],[7,12],[13,13],[0,14],[9,15]]);function _H(t){return kH.get(t.value(jd))}function IH(t,e,i){const[n,s]=t.pair(e);return CH(s??n,i)}function CH(t,e){return t instanceof FE?jH(t.keyframes,e):TH(t,e)}const LH={x:1,y:1},NH={x:0,y:0};function jH(t,e){if(1===t.length)return TH(t[0].value,e);const i=[],n=t.length-1;for(let s=1;s<=n;s++){const n=t[s-1];if(n.offset===t[s].offset||kt(n.value,t[s].value))i.push({t:iH(n.offset),s:zH(e(n.value)),h:1});else if(n.easing?.func instanceof qD){let t=n.easing.func;n.easing.inverted&&(t=t.inverse),i.push({t:iH(n.offset),s:zH(e(n.value)),o:{x:t.h1.x,y:t.h1.y},i:{x:t.h2.x,y:t.h2.y}})}else i.push({t:iH(n.offset),s:zH(e(n.value)),i:LH,o:NH})}return i.push({t:iH(t[n].offset),s:zH(e(t[n].value)),h:1}),{a:1,k:i}}function TH(t,e){return{a:0,k:e(t)}}function zH(t){return Nt(t)?t:[t]}const AH=new Map([[0,1],[1,2]]),PH=new Map([[0,1],[1,2],[2,3]]),DH=new Map([[0,1],[1,2],[2,3]]);function*EH(t){const e=AH.get(t.value(Fd));yield*WH(t,Yd,Zd,{ty:"fl",r:e},{ty:"gf",r:e})}function*OH(t,e){if(t.eq(Kd,0))return;const i={lc:PH.get(t.value(tf)),lj:DH.get(t.value(Xd)),ml:t.value(ef),w:IH(t,Kd,It),d:RH(t,e)};yield*WH(t,qd,Jd,{ty:"st",...i},{ty:"gs",...i})}function RH(t,e){let[i,n]=t.pair(nf),[s,r]=t.pair(sf);const o=t.value(rf);if(o&&e){const t=e(0)/o;if(n)for(const t of n.keyframes){const i=e(t.offset)/o;for(let e=0;e<t.value.length;e++)t.value[e]*=i}else for(let e=0;e<i.length;e++)i[e]*=t;if(r)for(const t of r.keyframes)t.value*=e(t.offset)/o;else s*=t}const a=[];if(n){const t=n.keyframes[0].value.length;if(!t)return;for(let e=0;e<t;e++)a.push({n:e%2==0?"d":"g",nm:`d${e}`,v:CH(n,(t=>t[e]))})}else{if(!i.length)return;{const t=i.length;for(let e=0;e<t;e++)a.push({n:e%2==0?"d":"g",nm:`d${e}`,v:TH(i,(t=>t[e]))})}}return a.length&&(r||s)&&a.push({n:"o",nm:"o",v:CH(r??s,It)}),a}function*WH(t,e,i,n,s){if(t.eq(i,0))return;if(t.match(e,(t=>!t.isVisible)))return;let[r,o]=t.pair(e),[a,l]=t.pair(i);if(!o)return r instanceof Hi?(a*=r.color.a,l&&FH(l.keyframes,r.color.a),void(yield{...n,o:CH(l??a,eZ),c:TH(r,tZ)})):void(yield{...s,...GH(r),o:CH(l??a,eZ)});if(r instanceof Hi){let t=r.color.a,e=!1;for(const i of o.keyframes)if(i.value.color.a!==t){e=!0;break}if(e){const t=qH(i,aO(o.keyframes,(t=>t.color.a)));if(l){const e=[...dO([l??a,t],HG,(([t,e])=>t*e))];l=qH(Zd,e)}else FH(t.keyframes,a),l=t;cO(l.keyframes)}return void(yield{...n,c:CH(o,tZ),o:CH(l??a,eZ)})}const c=[],u=o.keyframes;let h,d=u[0].value.type;for(let t=1;t<u.length;t++)u[t].value.type!==d&&(c.push(t),d=u[t].value.type);if(!c.length)return void(yield{...s,...GH(o),o:CH(l??a,eZ)});let f,p=0;for(h of c){f=(u[h-1].offset+u[h].offset)/2;const t=bO(o.clone(),p,f-.01,0);t.keyframes.length&&$H(t.keyframes)?(l?yield{...s,...GH(t),o:CH(UH(l,p,f),eZ)}:yield{...s,...GH(t),o:jH(BH(a,p,f),eZ)},p=f):p=f}if(f=t.end,p>=f)return;const g=bO(o.clone(),p+.01,f);g.keyframes.length&&$H(g.keyframes)&&(l?yield{...s,...GH(g),o:CH(UH(l,p,f),eZ)}:yield{...s,...GH(g),o:jH(BH(a,p,f),eZ)})}function BH(t,e,i){const n=wE(!0),s=[new WE(t,e,n)];return e>0&&s.unshift(new WE(0,0,n)),i<JG&&s.push(new WE(0,i,n)),s}function UH(t,e,i){const n=wE(!0);return(t=bO(t.clone(),e,i)).keyframes.length||t.keyframes.push(new WE(1,e,n)),e>0&&t.keyframes.unshift(new WE(0,0,n)),i<JG&&t.keyframes.push(new WE(0,t.keyframes.at(-1).offset,n)),t}function $H(t){for(const e of t)if(e.value.isVisible)return!0;return!1}function FH(t,e){if(1===e)return t;for(const i of t)i.value*=e;return t}function VH(t){let e;return e=t instanceof FE?t.keyframes[0].value:t,{p:e.stopColors.length,k:CH(t,KH)}}function GH(t){let e;return t instanceof FE?(e=t.keyframes[0].value instanceof sn,1===t.keyframes.length&&(t=t.keyframes[0].value)):e=t instanceof sn,e?function(t){const e=[...dO([t],HG,(([t])=>{const e=t.matrix;return e&&!e.isIdentity?[e.transformPoint(t.start),e.transformPoint(t.end)]:[t.start,t.end]}))],i=aO(e,(t=>t[0])),n=aO(e,(t=>t[1]));return{t:1,g:VH(t),s:jH(cO(i),iZ),e:jH(cO(n),iZ)}}(t):function(t){const e=[...dO([t],HG,(([t])=>{const e=t.matrix;let i,n,s;return t instanceof rn?(n=t.center,i=t.center.shifted(t.radius,0),s=0):(n=t.end,i=t.start,s=t.start.distanceTo(t.end)/t.endRadius),e&&!e.isIdentity&&(n=e.transformPoint(n),i=e.transformPoint(i)),[n,i,s]}))],i=aO(e,(t=>t[0])),n=aO(e,(t=>t[1])),s=aO(e,(t=>t[2]));cO(s);const r=s.length>1||0!=s[0]?.value,o={t:2,g:VH(t),s:jH(cO(i),iZ),e:jH(cO(n),iZ),h:void 0,a:void 0};return r&&(o.h=jH(s,eZ),o.a=TH(0,It)),o}(t)}function HH(t){if(!t.target.isTransformable)return{o:IH(t,Nd,eZ)};const[e,i,n,s,r,o,a,l,c,u,h,d]=QH(t);return{p:CH(e??i,iZ),r:CH(n??s,It),s:CH(r??o,nZ),sk:CH(a??l,Ei),sa:CH(c??u,It),a:CH(h??d,iZ),o:IH(t,Nd,eZ)}}function ZH(t){return function(t){if(!t)return[null,null];let e=null;return t.o&&(e={o:t.o},delete t.o),Object.keys(t).length||(t=null),[t,e]}(HH(t))}function YH(t){if(!t)return!0;if(t.o&&(t.o.a||100!==t.o.k))return!1;if(t.r?.a||t.sk?.a||t.sa?.a||t.s?.a||t.a?.a)return!1;const e=new $i;return t.p?.k&&e.translate(t.p.k[0],t.p.k[1]),t.r?.k&&e.rotate(t.r.k),(t.sk?.k||t.sa?.k)&&e.skewAxis(t.sk?.k||0,t.sa?.k||0),t.s?.k&&e.scale(t.s.k[0]/100,t.s.k[1]/100),t.a?.k&&e.translate(-t.a.k[0],-t.a.k[1]),e.isIdentity}function QH(t){const e=t.value(Wd);let i=t.value(Ad),n=t.animation(Hd),[s,r]=t.pair(Ed);const[o,a]=t.pair(Od),[l,c]=t.pair(Rd),[u,h]=t.pair(Pd),[d,f]=t.pair(Dd);let p=0;if(n)if(0===e){const t=n.keyframes;cO(t),hO(t,Qh)}else{const t=n.keyframes;if(p=-1===e?180:0,1===t.length)p+=t[0].value.angle||0,n=null;else{const e=qH(Ed,aO(t,(t=>t.angle||0)));r?r=qH(Ed,[...dO([r,e],HG,(([t,e])=>t+e))]):(r=e,s%=360,s&&r.keyframes.forEach((t=>t.value+=s))),cO(r.keyframes),function(t){t&&hO(t.keyframes,t.animator.valueHandler)}(r);const i=aO(t,(t=>Be.fromObject(t)));cO(i),hO(i,Qh),t.splice(0),t.push(...i)}}return p%=360,p&&(s+=p,r&&r.keyframes.forEach((t=>t.value+=p))),[n,i,r,s%360,f,d,a,o%360,c,l%360,h,u]}function JH(t,e){if(!t.target.isTransformable||!e||!e.isAnimated)return null;const i=0!==t.target.orientation,n=function(t,e,i=!0){return[...dO([t],HG,(([e])=>{const n=e instanceof fn?e.point:e;return i?new We(n.x,n.y,t.lastAngle):n}))]}(e.clone(),0,i);return t.properties.set(Ad,Be.fromObject(n[0].value)),qH(Hd,n)}function qH(t,e){return HE(t.id).createAnimation(e)}function KH(t){const e=[],i=[];let n=!1;for(const s of t.stopColors)e.push(s.offset,...XH(s.color)),i.push(s.offset,s.color.a),1!==s.color.a&&(n=!0);return n&&e.push(...i),e}function XH(t){return[t.r/255,t.g/255,t.b/255]}function tZ(t){return XH(t.color)}function eZ(t){return 100*t}function iZ(t){return[t.x,t.y]}function nZ(t){return[100*t.x,100*t.y]}const sZ={startIn:"documents",types:[{description:"SVG files",accept:{"image/svg+xml":[".svg"]}}]},rZ=[{title:"Nothing",value:0},{title:"Play",value:1},{title:"Pause",value:2},{title:"Stop",value:3},{title:"Reverse",value:4},{title:"Restart",value:5},{title:"Toggle play/pause",value:6}],oZ=[{title:"when composition is visible on page",value:2},{title:"on page load, even if composition is not visible",value:1},{title:"using mouse interaction",value:0}],aZ=[{title:"on load",value:0},{title:"on mouse over",value:1},{title:"programmatically",value:2}],lZ=[{title:"nothing",value:0},{title:"pause",value:1},{title:"reverse",value:2}],cZ=[{title:"freeze",value:!0},{title:"revert",value:!1}],uZ=[{id:"svg:smil",title:"SMIL",value:2,deny:1092,extension:"svg",file:sZ},{id:"svg:css",title:"CSS",value:1,deny:1024,extension:"svg",file:sZ},{id:"svg:js",title:"JavaScript player",value:0,deny:1024,extension:"svg",file:sZ}],hZ={...iM,min:1,max:2e4},dZ=[{title:"Best",value:1},{title:"High",value:.75},{title:"Medium",value:.5},{title:"Low",value:.25}],fZ=[{title:"Auto",value:0},{title:"Every half-second",value:1},{title:"Every second",value:2},{title:"Custom",value:3}],pZ=[{id:"video:webm",title:"WebM",value:1,deny:8,codecs:[{title:"VP9",value:2},{title:"VP8",value:1}],extension:"webm",file:{startIn:"videos",types:[{description:"WebM files",accept:{"video/webm":[".webm"]}}]}},{id:"video:mp4",title:"MP4",value:0,deny:9,codecs:[{title:"AVC/H.264",value:100}],extension:"mp4",file:{startIn:"videos",types:[{description:"MP4 files",accept:{"video/mp4":[".mp4"]}}]}}],gZ=[{id:"lottie:json",title:"JSON",value:0,deny:514,extension:"json",file:{startIn:"documents",types:[{description:"JSON files",accept:{"application/json":[".json"]}},{description:"Text files",accept:{"text/plain":[".txt"]}}]}},{id:"lottie:dotlottie",title:"dotLottie",value:1,deny:0,extension:"lottie",file:{startIn:"documents",types:[{description:"dotLottie files",accept:{"application/zip":[".lottie",".zip"]}}]}}],mZ=new Map([["node.compositing","Compositing"],["node.transform","Transform"],["vector.fill","Fill"],["vector.stroke","Stroke"]]);function yZ(t,e,i){const n=new Set,s=new Map,r=new Map;for(const i of e){if(!QE(i))continue;const e=bd(i);if(!e)continue;const o=i.type,a=t.getEntry(i);for(const t of e){const e=ZE(t.id,i);e&&!n.has(e)&&(a?.hasAnimation(e.id)||(n.add(e),"element"===e.group||"filter"===e.group?(s.has(o)||s.set(o,[]),s.get(o).push(e)):(r.has(e.group)||r.set(e.group,[]),r.get(e.group).push(e))))}}const o=[];if(s.size>0)for(const[t,e]of s.entries())o.push({title:qI(t),children:vZ(e,i)});if(r.size>0){o.length>0&&o.push(null);for(const[t,e]of r.entries())o.push({title:mZ.get(t)||"Other",children:vZ(e,i)});o.length&&null===o[o.length-1]&&o.pop()}return o}function vZ(t,e){t.length>1&&t.sort(((t,e)=>t.title.localeCompare(e.title)));const i=[];for(const n of t)i.push({title:n.title,icon:n.icon,value:n,action:e});return i}class bZ{#ci=0;#Fm=30;#Vm=90;#j=0;#X=0;#Gm=0;#Hm=0;get zoomFactor(){return this.#j/this.contentWidth}setZoomFactor(t){let e=1;if(t){const i=this.#j,s=this.#Gm+this.#Hm;e=((i/t-s)/(i-s)-1)/this.#Zm,e=n(e)}return this.#ci!==e&&(this.#ci=e,this.invalidate(),!0)}setMinMax(t,e){return this.#Fm=t,this.#Vm=e,this}setSize(t,e){return this.#j=t,this.#X=e,this}setPadding(t,e){return this.#Gm=t,this.#Hm=e,this}getX(t=0){return this.#Gm-t}get contentWidth(){return this.#Ym+this.#Gm+this.#Hm}get#Qm(){return EO?.fps||1}get#Jm(){return EO?EO.duration*EO.fps/1e3:0}get#Zm(){return this.#Jm*this.#Vm/this.#qm-1}get#Km(){return 1+this.#ci*this.#Zm}get#qm(){return this.#j-this.#Gm-this.#Hm}get#Ym(){return this.#qm*this.#Km}#Xm=new Map;get#ty(){const t=this.#Qm,e=this.#Xm;if(!e.has(t)){const i=[...O(t,!0)];return e.set(t,i),i}return e.get(t)}#ey=0;#iy=0;#ny=0;#sy=!1;#ry=[1,60,3600];invalidate(){const t=this.#Qm,e=this.#Ym,i=this.#Jm,n=this.#ty;for(const s of this.#ry)for(const r of n){const n=i/(r*s),o=e/n;if(o>=this.#Fm)return this.#ey=n,this.#iy=o,this.#ny=r*s*1e3/t,void(this.#sy=(1===s?r:t)%2==0)}}get timeScale(){return this.#iy/this.#ny}get frameScale(){return 1e3*this.timeScale/this.#Qm}getTimeAtX(t,e){return(t+e-this.#Gm)/this.timeScale}getXAtTime(t,e){return t*this.timeScale-e+this.#Gm}roundToFrame(t,e){return z(t,e?this.#ny*(this.#sy?.5:1):1e3/this.#Qm)}draw(t,e=0,i=0,n=15){const s=this.#iy;if(!s)return;const r=this.#ey,o=this.#ny,a=s/o,l=this.#sy,c=l&&s/2>=this.#Fm,u=this.#Qm,h=Math.floor(e/s),d=Math.min(r,Math.ceil((e+this.#Gm+this.#j)/s)),f=this.#X,p=f-n,g=f-n/2;t.textRendering="optimizeLegibility",t.textAlign="center",t.textBaseline="bottom";const m=new Path2D;i+=this.#Gm-e+.5;const y=1e3/u;for(let e=h;e<=d;e++){const n=i+a*z(e*o,y);if(t.fillText(T(e*o,u),n,p),m.moveTo(n,p),m.lineTo(n,f),l){const n=i+a*z((e+.5)*o,y);c&&t.fillText(T((e+.5)*o,u),n,g),m.moveTo(n,g),m.lineTo(n,f)}}t.stroke(m)}}function xZ(t,e){const i=[];if(lh())return i;if(e)for(const[e,n]of t)hh(e)&&i.push(n);else for(const e of sh())t.has(e)&&i.push(t.get(e));return i}function wZ(t,e,i,n){if(0===e)return!1;let s=!1;for(const r of i)if(r.hasInOut&&(r.in+=e,r.out+=e,r.evalVisibility(t),s=!0),!n)for(const i of r.animations){for(const t of i.keyframes)t.offset+=e;i.disabled||r.evalAnimation(i,t),s=!0}return s}function MZ(t,e,i,n){for(const s of e){let e;if(s.isFilter){if(!i)continue;e=s.element}else e=s;!e||!e.isElement||t.has(e)||n&&!Vu(e)||t.add(e)}}function SZ(t,e,i,n,s){for(const r of i){let i;if(r.isFilter){if(!n)continue;i=r.element,i?.isLayer&&e.add(i)}else i=r;if(!i||!i.isElement)continue;const o=CZ(i);!o||s&&!Uu(o)||(t.has(o)||t.set(o,new Set),t.get(o).add(i))}}function kZ(t,e,i,n,s,r){if(!n.showFilters||!t||!t.hasChildren)return s;for(const o of t.children(n.reverse)){const t=e.get(o)||null,a=ER(o);(t||n.showNotAnimatedFilters||n.showSelectedAndNotAnimated&&uh(o))&&(s=_Z(o,t,null,a,i,s,r),a&&null!=t&&(s=IZ(t,i,n,s,r+1)))}return s}function _Z(t,e,i,n,s,r,o){return s.items.push({top:r,left:o,type:1,target:t,parent:i,entry:e,open:n}),e&&(s.maxBarOffset=Math.max(s.maxBarOffset,e.in||0,e.out||0)),r+1}function IZ(t,e,i,n,s){if(!i.showProperties||0===t.animations.length)return n;const r=t.target;for(const i of t.animations)e.items.push({top:n,left:s,target:r,entry:t,type:0,animation:i}),n++,e.maxKeyframeOffset=Math.max(e.maxKeyframeOffset,i.maxOffset);return n}function CZ(t){let e=t.parent;for(;e&&!e.isLayer;)e=e.parent;return e||null}function LZ(t,e,i,n){let s=null;function r(t){for(const o of t){let t=!o.hasChildren;const a=e.has(o);if(a){if(e.delete(o),!i(o,s)&&!t){t=!0;for(const t of e)o.contains(t)&&e.delete(t)}if(0===e.size)return!1}if(!t)if(a){const t=s;if(s=o,!r(o.children(n)))return!1;s=t}else if(!r(o.children(n)))return!1}return!0}t.isDocument?r(Gu(n)):r(t.children(n))}const NZ=new Map([[5,"Enable/Disable animator"],[6,"Add animator"],[7,"Toggle visibility bar"],[8,"Add keyframe"]]),jZ=new Map([[2,"ew-resize"],[3,"ew-resize"],[4,"pointer"],[6,"pointer"],[7,"pointer"],[5,"pointer"],[8,"pointer"],[12,"ew-resize"],[13,"ew-resize"]]),TZ=new Map([[0,0],[1,1],[2,1],[3,1],[4,2],[5,2],[6,2],[7,2],[8,2],[9,2],[10,2],[11,3],[12,3],[13,3],[14,3],[15,3],[16,3]]),zZ=new Set([0,4,5,6,7,8,9,10]),AZ={hasSelectedKeyframes:!1,isTimeOverKeyframe:!1};class PZ extends Kb{constructor(){super(...arguments),this.dimensions={propertiesPanelWidth:280,propertiesPanelMargin:8,borderSize:1,rulerHeight:48,rulerGradationSize:10,unit:10,itemHeight:32,indentSize:16,iconSize:18,iconMargin:4,smallIconScale:.75,propertyTextMargin:1,textMargin:8,textBaselineShift:2,barHeight:24,barBorderRadius:4,easingHeight:16,easingBorderRadius:4,keyframeRadius:5,keyframeBorder:1,keyframeLine:1,playHeadHeight:10,playHeadWidth:10,playRangeHeight:25,minFrameHighlight:4,minFrameSize:40,maxFrameSize:90,barTimeMargin:4,zoomBarHandle:8},this.fonts={ruler:"12px -expressive-sans",easing:"12px -expressive-sans",objects:"bold 14px -expressive-sans",properties:"14px -expressive-sans"}}updateInternalValues(){super.updateInternalValues(),this.text=this.getColor("text"),this.background=this.getColor("background"),this.backgroundSelected=this.getColor("background-selected"),this.separator=this.getColor("separator-color"),this.playHeadThumb=this.getColor("playhead-thumb"),this.playHeadLine=this.getColor("playhead-line"),this.playRange=this.getColor("play-range"),this.propertyText=this.getColor("property-text"),this.propertyTextSelected=this.getColor("property-text-selected"),this.barBackground=this.getColor("visibility-bar-track-face"),this.bar=this.getColor("visibility-bar-face"),this.barSelected=this.getColor("visibility-bar-face-selected"),this.barText=this.getColor("visibility-bar-text"),this.barTextSelected=this.getColor("visibility-bar-text-selected"),this.keyframe=this.getColor("keyframe-face"),this.keyframeSelected=this.getColor("keyframe-face-selected"),this.keyframeBorder=this.getColor("keyframe-border"),this.keyframeBorderSelected=this.getColor("keyframe-border-selected"),this.keyframeLine=this.getColor("keyframe-track-line"),this.keyframeSelectionRect=this.getColor("keyframe-selection-rect"),this.easing=this.getColor("easing-face"),this.easingSelected=this.getColor("easing-face-selected"),this.easingText=this.getColor("easing-text"),this.easingTextSelected=this.getColor("easing-text-selected")}}class DZ extends p{constructor(){super(1)}get shouldDraw(){return!1}}class EZ extends Xb{#oy;#ay;#Sl;#_l;#ly;#Ml;constructor(){const t=new p,e=new DZ;super(t,e),this.#oy=new bZ,this.options={reverse:!0,group:!0,showProperties:!0,showFilters:!0,showOnlySelected:!1,showSelectedAndNotAnimated:!0,showNotAnimatedFilters:!1,showBarDuration:!0},this.#Sl={type:0,panel:0,item:null,keyframe:null},this.autoScroll=!0,this.autoScrollOnPlay=!0,this.#cy=()=>this.refresh(!0),this.#uy=t=>{this.autoScroll=t,t&&!this.collapsed&&this.scrollIntoView(rh())},this.#hy=t=>{this.autoScrollOnPlay=t},this.#dy=()=>{this.options.showSelectedAndNotAnimated||this.options.showOnlySelected?this.refresh(!0):this.renderFrame(),!this.collapsed&&this.autoScroll&&this.scrollIntoView(rh())},this.#fy=()=>{qO&&this.autoScrollOnPlay&&this.scrollToPlayhead(JO,!0)||this.renderFrame(qO)},this.#py=()=>{this.renderFrame()},this.#gy=[0,0],this.#my=()=>{this.#oy.invalidate();const t=this.#gy;null!=t[0]&&(EO?.duration<t[0]||EO?.fps!==t[1])&&(this.#oy.setZoomFactor(1)&&this.#yy(),this.#ly.scrollTo(0)),t[0]=EO?.duration||0,t[1]=EO?.fps||0,this.refresh(!0)},this.#vy=t=>{t||this.renderFrame()},this.#by=()=>{this.renderFrame()},this.#xy=!1,this.#wy=!1,this.#pn=null,this.#bn=null,this.#yn=0,this.#My=null,this.#Sy=t=>{oR(this.#oy.roundToFrame(this.#ky(this.getMouseX(t)),t.shiftKey),!0)},this.#_y=new Map,this.#Ll=void 0,this.#_l=t,this.#ly=e;const i=this.theme.dimensions,n=new Path2D;n.moveTo(0,i.playHeadHeight),n.lineTo(i.playHeadWidth/2,0),n.lineTo(-i.playHeadWidth/2,0),n.closePath(),this.#ay=n,this.dblClickMaxDiff=-1,this.#Ml=new cC([[Bt,this.#my],[Ut,this.#by],[Ft,this.#cy],[Zt,this.#cy],[Yt,this.#dy],[NO,this.#fy],[LO,this.#py],[AO,this.#cy],[CO,this.#my],[zO,this.#my],[TO,this.#cy],[PO,this.#vy],[PW,this.#uy],[DW,this.#hy]])}createTheme(t){return new PZ(t)}onThemeChanged(){super.onThemeChanged();const t=this.theme,e=t.dimensions;this.#_l.updateOptions({sizeDelta:-e.rulerHeight}),this.#ly.updateOptions({margin:4,thickness:1.5*t.scrollSize,sizeDelta:-e.propertiesPanelWidth,paddingStart:e.keyframeRadius+e.zoomBarHandle,paddingEnd:e.keyframeRadius+e.zoomBarHandle,roundness:0}),this.#oy.setMinMax(e.minFrameSize,e.maxFrameSize).setPadding(e.keyframeRadius,e.keyframeRadius+t.scrollSize).invalidate()}onSizeChanged(){this.#oy.setSize(this.size.content.width-this.theme.dimensions.propertiesPanelWidth,this.theme.dimensions.rulerHeight).invalidate(),super.onSizeChanged()}get contentHeight(){return(this.info?.items?.length||0)*this.lineHeight}get contentWidth(){return this.#oy.contentWidth}#cy;#uy;#hy;#dy;#fy;#py;#gy;#my;#vy;#by;activate(){this.#Ml.on(),this.#oy.invalidate(),super.activate()}deactivate(){super.deactivate(),this.#Ml.off()}#xy;get collapsed(){return this.#xy}set collapsed(t){t!==this.#xy&&(this.#xy=t,this.refresh(!0))}onWheel(t){if(t.ctrlKey||t.metaKey){const e=Math.sign(t.deltaY);if(!e)return!1;const i=this.#oy,s=this.#ly,r=n(this.getMouseX(t)-s.options.paddingStart+s.options.sizeDelta,0,s.scrollableClientSize),o=(s.offset+r)/i.timeScale,a=(1+e/10)*i.zoomFactor;return!!i.setZoomFactor(a)&&(this.updateScrollbarSize(),s.scrollTo(o*i.timeScale-r),this.#yy(),!0)}return super.onWheel(t)}setZoom(t,e){this.#oy.setZoomFactor(1-t)&&(this.updateScrollbarSize(),e?.(),this.renderFrame())}getZoomScroller(t=0){const e=this.#ly,i=this.#oy,n=t*e.scrollableClientSize,s=(e.offset+n)/i.timeScale;return()=>e.scrollTo(s*i.timeScale-n)}scrollToPlayhead(t,e,i){const n=this.#ly;let s=(t??JO)*this.#oy.timeScale;const r=n.offset;return!(e&&s>=r&&s<=r+(this.size.content.width-this.theme.dimensions.propertiesPanelWidth)||(i&&(s+=this.#oy.getX(),s-=(this.size.content.width-this.theme.dimensions.propertiesPanelWidth)/2),!n.scrollTo(s)||(this.renderFrame(qO),0)))}scrollIntoView(t){if(!t)return!1;if(!QE(t))return!1;!function(t){OR(DR(),t,void 0)&&PR()}(t);const e=this.info;if(!e)return!1;const i=e.items.findIndex((e=>e.target===t));return-1!==i&&!!this.#_l.scrollLineInView(i)&&(this.renderFrame(),!0)}#jl(t,e=null,i=null){const n=this.#Sl;if(n.type===t&&n.item===e&&n.keyframe===i)return!1;const s=zZ.has(n.type)||zZ.has(t);return n.type=t,n.panel=TZ.get(t),n.item=e,n.keyframe=i,this.setCursor(jZ.get(t)??"default"),this.setTitle(NZ.has(t)?NZ.get(t):""),s}updateHoverInfo(){const t=this.mousePosition,e=this.theme.dimensions,i=this.size;if(qO||t.y<0||t.y>=i.content.height||t.x<=0||t.x>=i.content.width)return this.clearHoverInfo();const n=this.#oy,s=this.#_l.offset,r=this.#ly.offset,o=t.x<=e.propertiesPanelWidth,a=e.propertiesPanelWidth,l=this.mousePosition.x-a;if(t.y<=e.rulerHeight){if(o)return this.clearHoverInfo();const i=this.#ly.bounds;if(t.y<=i.bottom&&t.y>=i.top){if(t.x<=i.left&&i.left-t.x<=e.zoomBarHandle)return this.#jl(2);if(t.x>=i.right&&t.x-i.right<=e.zoomBarHandle)return this.#jl(3)}return this.#jl(1)}if(o&&(t.x<=e.propertiesPanelMargin||t.x>=a-e.propertiesPanelMargin))return this.clearHoverInfo();const c=this.info?.items;if(!c?.length)return this.clearHoverInfo();const u=t.y-e.rulerHeight+s,h=Math.floor(u/e.itemHeight);if(h>=c.length)return o?this.clearHoverInfo():this.#jl(16);const d=c[h],f=t.x,p=u-h*e.itemHeight,g=e.itemHeight/2;if(o){let t=e.propertiesPanelMargin+d.left*e.indentSize,i=e.propertiesPanelWidth-e.propertiesPanelMargin;const n=e.iconMargin+e.smallIconScale*e.iconSize/2,s=Math.SQRT2*e.smallIconScale*e.iconSize/2;return 0===d.type?!d.animation.disabled&&OZ(f,p,i-n,g,s)?this.#jl(8,d):OZ(f,p,t+2*n,g,s)?this.#jl(5,d):this.#jl(10,d):(i-=n,OZ(f,p,i,g,s)?this.#jl(7,d):(i-=2*n,OZ(f,p,i,g,s)?this.#jl(6,d):OZ(f,p,t+e.iconMargin+e.iconSize/2,g,Math.SQRT2*e.iconSize/2)?this.#jl(4,d):this.#jl(9,d)))}if(!d.entry)return this.#jl(16);if(1===d.type){if(!d.entry.hasInOut)return this.#jl(16);const t=n.getXAtTime(d.entry.in,r),i=n.getXAtTime(d.entry.out,r);if(l<t||l>i)return this.#jl(16);if(uh(d.target)){if(l>=i-e.barBorderRadius)return this.#jl(13,d);if(l<=t+e.barBorderRadius)return this.#jl(12,d)}return this.#jl(11,d)}const m=d.animation;if(m.disabled||!m.hasKeyframes||p<g-e.easingHeight/2||p>g+e.easingHeight/2)return this.#jl(16);if(l<n.getXAtTime(m.minOffset,r)+.5-e.keyframeRadius||l>n.getXAtTime(m.maxOffset,r)+.5+e.keyframeRadius)return this.#jl(16);const y=m.keyframes,v=y.length-1;let b=n.getXAtTime(y[v].offset,r)+.5;if(OZ(l,p,b,g,e.keyframeRadius))return this.#jl(14,d,y[v]);for(let t=v-1;t>=0;t--){if(l>b-e.keyframeRadius)return this.#jl(16);if(b=n.getXAtTime(y[t].offset,r)+.5,OZ(l,p,b,g,e.keyframeRadius))return this.#jl(14,d,y[t]);if(l>b)return this.#jl(15,d,y[t])}return this.#jl(16)}clearHoverInfo(){return this.#jl(0,null,null)}handleDblClick(t){}#wy;#Iy(){this.#wy||(this.#wy=!0,Ia())}#pn;#bn;handleMouseMove(t){this.#pn?.(t)}handleMouseUp(t){this.#bn?.(t),this.#pn=this.#bn=null,this.#wy&&(this.#wy=!1,Ca())}#yn;handleMouseDown(t){if(qO)return;const e=this.#Sl;switch(e.type){case 0:this.#Cy();break;case 1:t.ctrlKey||t.metaKey?this.#Ly(t):(this.#pn=this.#Sy,this.#pn(t));break;case 2:this.#Ny(t,!1);break;case 3:this.#Ny(t,!0);break;case 4:this.#fr(e.item);break;case 9:this.#jy(t,e.item);break;case 7:this.#Ty(e.item);break;case 6:this.#zy(e.item,{x:t.clientX,y:t.clientY});break;case 5:this.#Ay(e.item);break;case 8:this.#Py(e.item);break;case 10:this.#Iy(),this.#Dy(t,e.item);break;case 11:this.#Iy(),this.#Ey(t,e.item);break;case 12:this.#Iy(),this.#Oy(t,e.item,!1);break;case 13:this.#Iy(),this.#Oy(t,e.item,!0);break;case 15:case 14:this.#Iy(),this.#Ry(t,e.item,e.keyframe,15===e.type,t.timeStamp-this.#yn<250);break;case 16:this.#Iy(),this.#Wy(t)}this.#yn=t.timeStamp}#By(t,e){const i=this.#ky(t)-e;let n=0;const s=(t,s)=>{const r=this.#oy.roundToFrame(this.#ky(t)-i,s)-e;return r===n?null:(n=r,r)};return s.sameAsStart=()=>0===n,s}#Uy(t,e){const i=e(),n=this.#ky(t)-i,s=(t,i)=>this.#oy.roundToFrame(this.#ky(t)-n,i)-e();return s.sameAsStart=()=>i===e(),s}#Cy(){UO()?xh():$O()}#My;#Wy(t){const e=this.theme.dimensions,i=t=>Math.max(t-this.size.bounds.y-e.rulerHeight+this.#_l.offset,0),n=this.#ky(this.getMouseX(t),!1),s=i(t.clientY);this.#pn=t=>{const e=this.#ky(this.getMouseX(t),!1),r=i(t.clientY),o=wi.fromLTRB(n,s,e,r);this.#My&&this.#My.equals(o)||(this.#My=o.isVisible?o:null,this.renderFrame())},this.#bn=t=>{const e=this.#My;if(this.#My=null,!e||!e.isVisible)return void this.#Cy();let i=!t.ctrlKey&&!t.metaKey&&$O();const n=this.info?.items;if(n?.length){const t=this.theme.dimensions.itemHeight;let s=Math.round(e.top/t);if(s<n.length){const r=Math.min(Math.round(e.bottom/t-1),n.length-1);for(;s<=r;){const t=n[s++];if(0===t.type&&!t.animation.disabled)for(const n of t.animation.keyframes)n.offset>=e.left&&n.offset<=e.right&&YO(n,!0)&&(i=!0)}}}i||this.renderFrame()}}#Ry(t,e,i,n,s){const r=n?BE(i,e.animation.keyframes):null;let o=!1;if(t.ctrlKey||t.metaKey){if(FO(i)&&(!r||FO(r))){if(VO(i),r){const t=BE(r,e.animation.keyframes);t&&FO(t)||VO(r)}return}YO(i,!0),r&&YO(r,!0)}else FO(i)?r&&!FO(r)?ZO([i,r],!1):o=!0:r?ZO([i,r],!1):YO(i,!1);if(s&&0!==WebGLBuffAddr0xb55f3.valueOf())return this.#pn=this.#bn=null,void this.canvas.dispatchEvent(new CustomEvent("es-easing",{composed:!0,bubbles:!0,detail:{x:t.clientX,y:t.clientY}}));const a=this.#Uy(this.getMouseX(t),(()=>i.offset));let l=null,c=null;const u=new Map;this.#pn=t=>{if(null==c){c=new Set;const t=rh();YR(((e,i,n)=>{u.has(e)||u.set(e,[]),u.get(e).push(i);for(const t of n)c.add(t);null===l&&e.target===t&&(l=!0)}),null,!1)}const e=a(this.getMouseX(t),t.shiftKey);if(0===e)return;for(const t of c)t.offset+=e;const i=JO;let n=!1;for(const[t,e]of u)for(const s of e)s.sortKeyframes(c),t.evalAnimation(s,i)&&(n=!0);n&&kd(Rp),this.renderFrame()},this.#bn=()=>{if(null!=c){if(!a.sameAsStart()){for(const t of u.values())for(const e of t)e.fixKeyframes(c);ka()}return c.clear(),void u.clear()}o&&(r?ZO([i,r],!1):YO(i,!1))}}#Oy(t,e,i){let n=null;const s=e.entry.in,r=e.entry.out,o=i?r:s,a=this.#By(this.getMouseX(t),o);this.#pn=t=>{n??=function(t){const e=new Map;if(lh())return e;for(const i of sh()){const n=t.get(i);n&&n.hasInOut&&e.set(n,{in:n.in,out:n.out})}return e}(EO.map);const e=a(this.getMouseX(t),t.shiftKey);if(null!==e){for(const[t,s]of n)i?t.setInOut(s.in,s.out+e):t.setInOut(s.in+e,s.out),t.evalVisibility(JO);this.renderFrame()}},this.#bn=()=>{s===e.entry.in&&r===e.entry.out||ka()}}#Ey(t,e){let i=!1;t.ctrlKey||t.metaKey?bh(e.target,!0):uh(e.target)?(wh(e.target),i=ah()>1):dh(e.target,!1);let n=null,s=null;const r=this.#Uy(this.getMouseX(t),(()=>e.entry.in));this.#pn=t=>{null==n&&(n=xZ(EO.map,!0),s=xZ(EO.map,!1));const e=r(this.getMouseX(t),t.shiftKey);if(0===e)return;const i=JO;(t.altKey?wZ(i,e,s,!0):wZ(i,e,n,!1))&&this.renderFrame()},this.#bn=()=>{null!=n?r.sameAsStart()||ka():i&&dh(rh(),!1)}}#Ty(t){t.entry&&t.entry.hasInOut?_W(t.target):kW(t.target)}#zy(t,e){const i=yZ(EO,[t.target],(e=>SW(t.target,e.value,JO)));i.length?setTimeout((()=>bv(i,e,"bottom-left",!1)),100):vv("No more animators available","info")}#fr(t){t&&function(t){const e=DR();e.has(t)?e.delete(t):e.add(t),PR()}(t.target.id)}#jy(t,e){t.ctrlKey||t.metaKey?bh(e.target,!0):t.shiftKey&&!lh()?ph(rh(),e.target):dh(e.target,!1)}#Ay(t){t&&t.entry&&t.animation&&(IW(t.target,t.animation.animator.id),this.renderFrame())}#Py(t){MW(t.entry,t.animation,JO)}#Dy(t,e){if(e.animation.disabled)return;const i=t.ctrlKey||t.metaKey;if(uh(e.target)?wh(e.target):dh(e.target,i),t.altKey||t.shiftKey){const i=t.altKey;$O();const n=e.animation.animator;for(const t of this.info.items)0!==t.type||t.animation.animator!==n||t.animation.disabled||i&&!uh(t.target)||ZO(t.animation.keyframes,!0)}else i||$O(),ZO(e.animation.keyframes,!0)}#Ly(t){const e=this.#oy.roundToFrame(this.#ky(this.getMouseX(t)),t.shiftKey);aR(e,e),this.renderFrame(),this.#pn=t=>{const i=this.#oy.roundToFrame(this.#ky(this.getMouseX(t)),t.shiftKey);aR(e,i),this.renderFrame()},this.#bn=()=>{eR[0]===eR[1]?lR():(JO<eR[0]||JO>eR[1])&&oR(eR[0],!1)}}#Ny(t,e){const i=this.#oy,s=t.clientX,r=this.#ly,o=r.scrollableClientSize,a=r.currentBarSize,l=e?0:o,c=(r.offset+l)/i.timeScale;this.#pn=t=>{const u=e?t.clientX-s:s-t.clientX;if(!u)return;const h=n(a+u,0,o)/o;i.setZoomFactor(h)&&(this.updateScrollbarSize(),r.scrollTo(c*i.timeScale-l),this.renderFrame(),this.#yy())}}#yy(){this.canvas.dispatchEvent(new CustomEvent("es-zoom",{bubbles:!0,cancelable:!0,detail:1-this.#oy.zoomFactor}))}#Sy;#ky(t,e=!0){const i=this.#oy.getTimeAtX(t-this.theme.dimensions.propertiesPanelWidth,this.#ly.offset);return e?n(i,0,EO.duration):i}render(t,e,i){const n=this.theme,s=n.dimensions,r=this.#_l.offset,o=this.#ly.offset;t.fillStyle=n.background,t.fillRect(0,0,e,i);const a=s.propertiesPanelWidth,l=e-a,c=this.#oy.timeScale,u=this.#oy.getX(o),h=this.#xy;if(!h){const e=this.info?.items,o=e?.length||0,h=Math.trunc(r/s.itemHeight),d=Math.min(h+Math.ceil(i/s.itemHeight),o-1),f=this.#Sl,p=EO.fps;if(h<o&&d>=h){const i=(s.itemHeight-s.barHeight)/2,o=s.itemHeight/2;t.translate(0,-r);for(let r=h;r<=d;r++){const h=e[r],d=h===f.item;t.save(),t.translate(0,s.rulerHeight+s.itemHeight*h.top);const g=uh(h.target);if(0===h.type)t.lineWidth=s.keyframeLine,t.strokeStyle=n.keyframeLine,t.beginPath(),t.moveTo(a,o-.5),t.lineTo(a+l,o-.5),t.stroke(),t.translate(a+.5,0),AZ.hasSelectedKeyframes=AZ.isTimeOverKeyframe=!1,this.#$y(t,h.animation,c,u,l),t.translate(-a-.5,0),t.fillStyle=g?n.backgroundSelected:n.background,t.fillRect(0,0,a,s.itemHeight),this.#Fy(t,h,a,d&&2===f.panel,AZ.hasSelectedKeyframes,AZ.isTimeOverKeyframe&&!qO);else{if(t.fillStyle=n.barBackground,t.fillRect(a,i,l,s.barHeight),h.entry?.hasInOut){const e=u+h.entry.in*c,r=u+h.entry.out*c;r>0&&e<l&&(t.fillStyle=g?n.barSelected:n.bar,t.beginPath(),t.roundRect(a+e-.5,i,r-e+1,s.barHeight,s.barBorderRadius),t.fill(),this.options.showBarDuration&&this.#Vy(t,h.entry,g,a,l,e,r,i+s.barHeight/2+1,p))}t.fillStyle=g?n.backgroundSelected:n.background,t.fillRect(0,0,a,s.itemHeight),this.#Gy(t,h,a,d&&2===f.panel)}t.restore()}t.translate(0,r)}if(this.#My){const e=this.#My;let i=e.width*c,o=u+e.x*c;o<0&&(i+=o,o=0),i>0&&(t.fillStyle=n.keyframeSelectionRect,t.globalAlpha=.5,t.fillRect(s.propertiesPanelWidth+o,s.rulerHeight+e.y-r,i,e.height),t.globalAlpha=1)}t.fillStyle=n.background,t.fillRect(s.propertiesPanelWidth,0,l,s.rulerHeight)}if(t.save(),iR){const e=eR[0]*c,i=eR[1]*c;t.globalAlpha=.5,t.fillStyle=n.playRange,t.fillRect(a+u+e+.5,s.rulerHeight-s.playRangeHeight,i-e,s.playRangeHeight),t.globalAlpha=1}t.fillStyle=n.text,t.strokeStyle=n.text,t.lineWidth=1,t.font=n.fonts.ruler,this.#oy.draw(t,o,a,s.rulerGradationSize),t.restore(),t.fillStyle=n.playHeadThumb;const d=this.#ly.bounds;t.beginPath(),t.roundRect(d.left-s.zoomBarHandle,d.top,d.width+2*s.zoomBarHandle,d.height,n.scrollRoundness*d.height),t.fill();const f=u+JO*c,p=a+f+.5;if(!qO){let e=this.#oy.frameScale;if(e>=s.minFrameHighlight&&f<=l&&f+e>=0){t.globalCompositeOperation="luminosity",t.globalAlpha=.1,t.fillStyle=n.playHeadLine;let r=f;r<0&&(e+=r,r=0),t.fillRect(a+r,s.rulerHeight-1,e,i),t.globalAlpha=1,t.globalCompositeOperation="source-over"}}f>=0&&f<=l&&(t.strokeStyle=n.playHeadLine,t.lineWidth=1,t.beginPath(),t.moveTo(p,s.rulerHeight-1),t.lineTo(p,i),t.stroke()),f>-s.playHeadWidth&&f<l+s.playHeadWidth&&(t.save(),t.fillStyle=n.playHeadThumb,t.translate(p,s.rulerHeight-s.playHeadHeight-s.borderSize/2),t.fill(this.#ay),t.restore()),t.fillStyle=n.background,t.fillRect(0,0,s.propertiesPanelWidth,s.rulerHeight),t.strokeStyle=n.separator,t.lineWidth=s.borderSize;const g=s.borderSize/2;t.beginPath(),h||(t.moveTo(0,s.rulerHeight-g),t.lineTo(e,s.rulerHeight-g)),t.moveTo(s.propertiesPanelWidth-g,0),t.lineTo(s.propertiesPanelWidth-g,i),t.stroke()}#Gy(t,e,i,n){const s=this.theme,r=s.dimensions,o=r.itemHeight/2,a=r.iconMargin+r.iconSize/2;let l=i-r.propertiesPanelMargin,c=r.propertiesPanelMargin+e.left*r.indentSize;t.fillStyle=this.theme.text;const u=r.iconMargin+r.smallIconScale*r.iconSize/2;(e.entry?.hasInOut||n)&&(l-=u,this.renderIcon(t,"expr:visibility-bar",r.iconSize,l,o,1,r.smallIconScale),l-=u),n&&(l-=u,this.renderIcon(t,"workflow:Add",r.iconSize,l,o,1,r.smallIconScale),l-=u),c+=a,this.renderIcon(t,e.open?"workflow:ChevronDown":"workflow:ChevronRight",r.iconSize,c,o),c+=a,c+=a,this.renderIcon(t,tC(e.target)||"expr:unknown",r.iconSize,c,o),c+=a,c+=r.textMargin,c>=l||(t.font=s.fonts.objects,this.renderCenteredText(t,XI(e.target),c,l,r.itemHeight,r.textBaselineShift))}#Fy(t,e,i,n,s,r){const o=this.theme,a=o.dimensions,l=a.itemHeight/2,c=a.iconMargin+a.smallIconScale*a.iconSize/2,u=e.animation.disabled;u&&(t.globalAlpha=.5);let h=i-a.propertiesPanelMargin,d=a.propertiesPanelMargin+e.left*a.indentSize;h-=c,(n||r)&&(t.fillStyle=o.text,r?this.renderIcon(t,"workflow:CheckmarkCircle",a.iconSize,h,l,1,a.smallIconScale):u||this.renderIcon(t,"workflow:AddCircle",a.iconSize,h,l,1,a.smallIconScale)),h-=c,d+=2*c,(n||u)&&(t.fillStyle=o.text,this.renderIcon(t,"workflow:VisibilityOff",a.iconSize,d,l,1,a.smallIconScale)),d+=2*c,d+=a.propertyTextMargin,d>=h||(t.fillStyle=s&&!u?o.propertyTextSelected:o.propertyText,t.font=o.fonts.properties,this.renderCenteredText(t,e.animation.animator.title,d,h,a.itemHeight,a.textBaselineShift))}#$y(t,e,i,n,s){const r=e.keyframes,o=r.length-1;if(o<0)return;const a=this.theme,l=a.dimensions,c=l.itemHeight/2,u=l.keyframeRadius,h=n+r[0].offset*i,d=0===o?h:n+r[o].offset*i,f=JO;if(h>=s+u||d<=-u)return void this.#Hy(e,f);function p(e,i){const n=i?a.keyframeBorderSelected:a.keyframeBorder;t.fillStyle=n,t.beginPath(),t.ellipse(e,c,u,u,0,0,2*Math.PI),t.fill();const s=i?a.keyframeSelected:a.keyframe;n!==s&&(t.fillStyle=s,t.beginPath(),t.ellipse(e,c,u-l.keyframeBorder,u-l.keyframeBorder,0,0,2*Math.PI),t.fill())}if(0===o)return this.#Hy(e,f),void p(h,FO(r[0]));if(h>=s-u&&h<s+u)return this.#Hy(e,f),void p(h,FO(r[0]));if(d>-u&&d<=u)return this.#Hy(e,f),void p(d,FO(r[o]));const g=(l.itemHeight-l.easingHeight)/2,m=(e,i,n,s)=>{const r=(n-=u+.5)-(i+=u+.5);if(r<=1)return;t.fillStyle=s?a.easingSelected:a.easing,t.beginPath(),t.roundRect(i,g,r,l.easingHeight,l.easingBorderRadius),t.fill();const o=e?.title??"Linear";this.#Zy(t,o,!0)<r&&(t.save(),t.fillStyle=s?a.easingTextSelected:a.easingText,t.textRendering="optimizeLegibility",t.textBaseline="middle",t.textAlign="center",t.fillText(o,i+r/2,c+1),t.restore())};t.font=a.fonts.easing;let y=FO(r[0]),v=h,b=v>-u;AZ.hasSelectedKeyframes=y,r[0].offset===f&&(AZ.isTimeOverKeyframe=!0);let x=1;for(;x<=o;x++){const t=FO(r[x]),e=n+r[x].offset*i;if(t&&(AZ.hasSelectedKeyframes=!0),r[x].offset===f&&(AZ.isTimeOverKeyframe=!0),e<=-u)v=e,y=t,b=!1;else{if(b&&p(v,y),m(r[x-1].easing,v,e,y&&t),e>=s+u)break;p(e,t),v=e,y=t,b=!1}}for(;++x<=o;){if(AZ.hasSelectedKeyframes&&AZ.isTimeOverKeyframe)return;FO(r[x])&&(AZ.hasSelectedKeyframes=!0),r[x].offset===f&&(AZ.isTimeOverKeyframe=!0)}}#Vy(t,e,i,n,s,r,o,a,l){const c=this.theme;t.font=c.fonts.easing;let u=j(e.out-e.in,l,!0),h=this.#Zy(t,u,!1);if(h>=o-r)return;t.save(),t.fillStyle=i?c.barTextSelected:c.barText,t.textRendering="optimizeLegibility",t.textBaseline="middle";const d=(r+o)/2,f=c.dimensions.barTimeMargin;let p=d-h/2,g=d+h/2;g>=0&&p<=s&&(t.textAlign="center",t.fillText(u,n+d,a)),p-=f,g+=f,r+=f,o-=f,e.in>=0&&(u=j(e.in,l,!0),h=this.#Zy(t,u,!1),h<=p-r&&r+h>0&&(t.textAlign="left",t.fillText(u,n+r,a))),e.out>=0&&(u=j(e.out,l,!0),h=this.#Zy(t,u,!1),h<=o-g&&o-h<s&&(t.textAlign="right",t.fillText(u,n+o,a))),t.restore()}#Yy(t,e,i,n,s){const r=n-i,o=this.theme.dimensions.itemHeight/3;if(r<=1)return;t.fillStyle=s?this.theme.easingSelected:this.theme.easing;const a=this.theme.dimensions.itemHeight/2;if(!e||r<=o){const e=4;return void t.fillRect(i,a-e/2,r,e)}const l=Math.sqrt(o**2+r**2),c=this.#Qy(e,l,o);t.save(),t.translate(i,a-o),t.rotate(Math.atan(o/l)),t.fill(c),t.restore()}#Qy(t,e,i){const n=new DOMMatrix;t.inverted?n.translateSelf(e,0).scaleSelf(-e,i):n.translateSelf(0,i).scaleSelf(e,-i);const s=new Path2D;return s.addPath(t.func.path,n),s}#_y;#Zy(t,e,i){if(this.#_y.has(e))return this.#_y.get(e);const n=t.measureText(e).width;return i&&this.#_y.set(e,n),n}#Hy(t,e){for(const i of t.keyframes)if(i.offset===e&&(AZ.isTimeOverKeyframe=!0),FO(i)&&(AZ.hasSelectedKeyframes=!0),AZ.isTimeOverKeyframe&&AZ.hasSelectedKeyframes)return}#Ll;get info(){if(void 0===this.#Ll){if(this.#xy)return this.#Ll=null;this.#Ll=function(t,e){let i=null;return i=e.showOnlySelected?function(t,e){const i=rh();if(!i||i.isFragment)return null;const n={items:[],maxOffset:0,maxKeyframeOffset:0,maxBarOffset:0};let s=0;for(const i of function(t){if(!eh)return[];const e=[...ih];if(void(null!=t&&yu(e,t,!0))){const t=e.indexOf(eh);t>=0&&(e.splice(t,1),e.unshift(eh))}return e}(e.reverse)){const r=t.get(i)||null;if(!r&&!e.showSelectedAndNotAnimated)continue;const o=ER(i);n.items.push({top:s,left:0,type:1,target:i,parent:null,entry:r,open:o}),s++,r&&(n.maxBarOffset=Math.max(n.maxBarOffset,r.in||0,r.out||0),o&&(s=IZ(r,n,e,s,1)))}return n}(t,e):!Nu.length||Cu&&Nu[0].isLayer?function(t,e,i=5){const n=rh(),s=new Map,r=new Set;t.size>0&&SZ(s,r,t.keys(),e.showFilters,Au()),e.showSelectedAndNotAnimated&&n&&!n.isFragment&&SZ(s,r,sh(),e.showFilters,!1);const o={items:[],maxOffset:0,maxKeyframeOffset:0,maxBarOffset:0};let a=0;for(const n of Gu(e.reverse)){const l=t.get(n)||null;if(!(l||r.has(n)||s.has(n)||e.showSelectedAndNotAnimated&&uh(n)))continue;const c=ER(n);if(a=_Z(n,l,null,c,o,a,0),!c)continue;if(l&&(a=IZ(l,o,e,a,1)),a=kZ(n.filters,t,o,e,a,1),!s.has(n))continue;const u=e.group,h=u?new Map:null;LZ(n,s.get(n),((n,s)=>{const r=t.get(n)||null,l=ER(n);let c=1;return u&&(s&&h.has(s)&&(c=Math.min(h.get(s)+1,i)),h.set(n,c)),a=_Z(n,r,s,l,o,a,c),l?(r&&(a=IZ(r,o,e,a,c+1)),a=kZ(n.filters,t,o,e,a,c+1),!0):!u}),e.reverse)}return o}(t,e):function(t,e,i=5){const n=rh();let s=new Set;if(t.size>0&&MZ(s,t.keys(),e.showFilters,Au()),e.showSelectedAndNotAnimated&&n&&!n.isFragment&&MZ(s,sh(),e.showFilters,!1),0===s.size)return null;const r={items:[],maxOffset:0,maxKeyframeOffset:0,maxBarOffset:0};let o=0;const a=e.group,l=a?new Map:null;return LZ(su,s,((n,s)=>{const c=t.get(n),u=ER(n);let h=0;return a&&(s&&l.has(s)&&(h=Math.min(l.get(s)+1,i)),l.set(n,h)),o=_Z(n,c,s,u,r,o,h),u?(c&&(o=IZ(c,r,e,o,h+1)),o=kZ(n.filters,t,r,e,o,h+1),!0):!a}),e.reverse),r}(t,e),i&&(0===i.items.length?i=null:i.maxOffset=Math.max(i.maxBarOffset,i.maxKeyframeOffset)),i}(EO.map,this.options),function(t){if(BO.size)return!1;if(!t?.length)return $O();const e=new Set(BO);for(const i of t)if(i.animation){for(const t of i.animation)e.delete(t);if(0===e.size)return!1}GO(e)}(this.#Ll?.items)}return this.#Ll}invalidate(){this.#Ll=void 0}}function OZ(t,e,i,n,s){return(i-t)**2+(n-e)**2<=s**2}const RZ={min:0,max:100,step:1};class WZ extends Gb{#Jy;#Tl;#qy;constructor(){super(),this.#qy=0,this.#Ky=t=>{const e="is-collapsed";t?this.classList.add(e):this.classList.remove(e),this.shadowRoot.querySelector("#add").disabled=t,this.#Tl.collapsed=t},this.#Xy=0,this.keyboardInterceptor=t=>("Space"!==t.code||("keydown"===t.type?t.repeat||(this.#Xy=t.timeStamp):"keyup"===t.type&&t.timeStamp-this.#Xy<=300&&this.#tv()),!1),this.#ev=t=>{this.#qy=Math.round(100*t.detail),this.requestUpdate()},this.#iv=async t=>{t.stopPropagation(),await NW(t.detail)},this.#nv=[this.#sv("Show only selected","showOnlySelected"),this.#sv("Show not animated","showSelectedAndNotAnimated"),this.#sv("Group elements","group"),null,this.#sv("Show bar duration","showBarDuration",!1,!1)],this.#rv=[this.#ov("Scroll to element",PW),this.#ov("Scroll to playhead",DW)],this.#av=[this.#lv(2),this.#lv(1.75),this.#lv(1.5),this.#lv(1.25),null,this.#lv(1),null,this.#lv(.75),this.#lv(.5),this.#lv(.25)],this.#cv=()=>{this.classList.contains("is-collapsed")||($a(2),EW.change(!0))},this.#uv=()=>{$a(1),EW.change(!1)},this.#bp=async t=>{t.preventDefault(),t.stopImmediatePropagation(),this.#hv&&await bv(this.ctxMenu,{x:t.clientX,y:t.clientY},"bottom-left")},this.#dv=t=>{if(!t.isPrimary||0!==t.button)return;C(this.#fv,this.#pv),t.target.setPointerCapture(t.pointerId);const e=this.#Jy;e.style.top=t.clientY+"px",e.style.left=this.offsetLeft+"px",e.style.width=this.offsetWidth+"px",mv().appendChild(e)},this.#fv=t=>{t.isPrimary&&(this.#Jy.style.top=this.#gv(t.clientY)+"px")},this.#pv=t=>{if(!t.isPrimary)return;0!==t.button&&t.preventDefault(),L(),t.target.releasePointerCapture(t.pointerId);const e=this.ownerDocument.documentElement.offsetHeight-this.#gv(t.clientY);this.#Jy.remove(),requestAnimationFrame((()=>{this.style.height=e+"px"}))},this.#mv=!0,this.#yv=()=>{this.#mv=UO(),this.requestUpdate()},this.#vv=()=>{this.#mv!==UO()&&(this.#mv=!this.#mv,this.requestUpdate())},this.#Tl=new EZ;const t=this.#Tl.canvas;t.addEventListener("es-zoom",this.#ev),t.addEventListener("es-easing",(t=>{t.stopPropagation(),this.#bv(t.detail)}));const e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.height="2px",e.style.background="var(--accent-color-500)",this.#Jy=e,hC(this,[[Bt,this.#yv],[LO,this.#vv],[AW,this.#Ky],NO,PO])}#Ky;get#hv(){return!qO&&!_&&!AW.value}#Xy;render(){const t=UO();return Ib`
            ${this.#Tl.canvas}
            <div id="playback">
                <cc-action-group size="m" quiet gapless>
                    <cc-action-button id="recorder" .selected=${XO} @click=${this.#xv} title="Record">
                        <cc-icon name="expr:player-record"></cc-icon>
                    </cc-action-button>
                    <cc-action-button @click=${this.#wv} title="Go to start">
                        <cc-icon name="expr:player-start"></cc-icon>
                    </cc-action-button>
                    <cc-action-button @click=${this.#tv} title=${qO?"Stop":"Play"}>
                        <cc-css-icon .name=${qO?"Pause":"Play"}></cc-css-icon>
                    </cc-action-button>
                    <cc-action-button @click=${this.#Mv} title="Go to end">
                        <cc-icon name="expr:player-end"></cc-icon>
                    </cc-action-button>
                    <cc-action-button .selected=${KO} @click=${this.#gm} title="Repeat">
                        <cc-icon name="workflow:Refresh"></cc-icon>
                    </cc-action-button>
                </cc-action-group>
                <div id="time-wrapper">
                    <span id="time" @click=${this.#Sv}>${j(JO,EO?.fps||60)}</span>
                    <cc-action-button id="add" .disabled=${qO} @click=${this.#kv} size="m" quiet title="Add...">
                        <cc-icon name="expr:add-color"></cc-icon>
                    </cc-action-button>
                </div>
            </div>
            <div id="controls">
                <cc-action-group id="timeline-filter-controls" size="m" quiet>
                    <cc-action-button title="Filter" @click=${this.#_v}>
                        <cc-icon name="workflow:Filter"></cc-icon>
                    </cc-action-button>
                    <cc-action-button title="Auto scroll" @click=${this.#uy}>
                        <cc-icon name="workflow:Follow"></cc-icon>
                    </cc-action-button>
                    <cc-action-button id="speed" title="Speed" @click=${this.#Iv}>
                        ${tR}&times;
                    </cc-action-button>
                </cc-action-group>
                <cc-action-group size="m" quiet>
                    <cc-action-button
                        title="Linear"
                        @click=${this.#Cv}
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-linear"></cc-icon>
                    </cc-action-button>
                    <cc-action-button
                        title="Hold"
                        @click=${this.#Lv}
                        data-name="step"
                        data-inverted="true"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-step-end"></cc-icon>
                    </cc-action-button>
                    <cc-action-button
                        title="Jump"
                        @click=${this.#Lv}
                        data-name="step"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-step-start"></cc-icon>
                    </cc-action-button>
                    <cc-divider vertical></cc-divider>
                    <cc-action-button
                        title="Ease both"
                        @click=${this.#Lv}
                        data-name="ease-both"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-in-out"></cc-icon>
                    </cc-action-button>
                    <cc-action-button
                        title="Ease in"
                        @click=${this.#Lv}
                        data-name="ease"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-in"></cc-icon>
                    </cc-action-button>
                    <cc-action-button
                        title="Ease out"
                        @click=${this.#Lv}
                        data-name="ease"
                        data-inverted="true"
                        .disabled=${t}
                    >
                        <cc-icon name="expr:ease-out"></cc-icon>
                    </cc-action-button>
                    <cc-divider vertical></cc-divider>
                    <cc-action-button
                        title="Custom easing"
                        @click=${this.#Nv}
                        .disabled=${t}
                    >
                        <cc-icon name="expr:easing"></cc-icon>
                    </cc-action-button>
                </cc-action-group>
                <div style="flex: 1"></div>
                <cc-slider id="zoom" .constraint=${RZ} filled .value=${this.#qy} @start=${this.#jv} @end=${this.#Tv} @update=${this.#gd}></cc-slider>
            </div>
            <div id="resizer" @pointerdown=${this.#dv}></div>
        `}#Sv(){this.#Tl.scrollToPlayhead(null,!1,!0)}async#kv(t){if(qO)return;if(lh())return void vv("Selection is empty","info");const e=yZ(EO,oh(),(t=>{wW(t.value,JO)}));e?.length?await this.#zv(t.target,e,"bottom-left",!1):vv("No more animators available","info")}#Av;#jv(){this.#Av=this.#Tl.getZoomScroller(0)}#Tv(){this.#Av=null}#gd(t){this.#qy=t.detail,this.#Tl.setZoom(t.detail/100,this.#Av)}#ev;#Cv(){yW()}#Lv(t){const e=t.target.dataset,i=hE(e.name);if(!i)return void yW();const n="true"===e.inverted;mW(new pE(i,n))}#Pv;#Dv(){if(this.#Pv)return this.#Pv;const t=document.createElement("cc-popover");t.id="easing-popover";const e=document.createElement("es-easing-control");return e.addEventListener("copy-easing",this.#iv),t.appendChild(e),this.#Pv=t}#iv;#Nv(t){this.#bv(t.target)}async#bv(t){if(0===WebGLBuffAddr0x377b.valueOf())return void VI();if(UO())return;let e=function(){if(UO())return;let t,e=!1;return YR(((i,n,s)=>{if(0===s.length)return!0;for(const i of s)if(qR(n,i))if(e){if(!kt(t,i.easing))return t=void 0,!1}else e=!0,t=i.easing;return!0}),null,!1),t}();e&&(e=e.clone(!0));const i=this.#Dv();this.shadowRoot.appendChild(i),await i.updateComplete;const n=i.firstElementChild;n.value=e,await n.updateComplete,await i.open(t,.5,0,0,-1,0,-8);let s=n.value;if(i.remove(),void 0===s)return;if(null===s)return void yW();const r=dE(s.func);r&&(s=new pE(r,s.inverted)),mW(s)}#nv;#rv;#av;#sv(t,e,i=!1,n=!0){const s=()=>this.#Tl;return{title:t,selectable:!0,get value(){const t=s();return i?!t.options[e]:t.options[e]},action(){const t=s();t.options[e]=!t.options[e],t.refresh(n)}}}#ov(t,e){return{title:t,selectable:!0,get value(){return e.value},action(){e.toggle()}}}#lv(t){const e=this;return{title:t.toString(),selectable:!0,get value(){return t===tR},action(){!function(t){tR=t}(t),e.requestUpdate()}}}async#zv(t,e,i="top-left",n=!0){this.#hv&&await bv(e,t,i,n)}#_v(t){this.#zv(t.target,this.#nv)}#uy(t){this.#zv(t.target,this.#rv)}#Iv(t){this.#zv(t.target,this.#av)}#tv(){Vl?.isWorking||(qO?(dR(),this.#Tl.refresh(!1,!0)):hR())}#xv(t){XO=!XO,t.target.selected=XO}#gm(t){KO=!KO,t.target.selected=KO}#wv(){qO||(oR(iR?eR[0]:0,!1),this.#Tl.scrollToPlayhead(null,!1,!0))}#Mv(t){qO||(function(t){const e=iR?eR[1]:EO.duration;if(t)return oR(e);const i=1e3/EO.fps;oR(z(e-i,i),!1)}(t.ctrlKey||t.metaKey),this.#Tl.scrollToPlayhead(null,!1,!0))}#cv;#uv;#bp;#dv;#fv;#gv(t){const e=this.ownerDocument.documentElement;return n(t,e.offsetTop+50+180,e.offsetTop+e.offsetHeight-196)}#pv;connectedCallback(){super.connectedCallback(),this.tabIndex=-1,this.addEventListener("focusin",this.#cv),this.addEventListener("focusout",this.#uv),this.addEventListener("contextmenu",this.#bp),this.#Tl.activate()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("contextmenu",this.#bp),this.removeEventListener("focusin",this.#cv),this.removeEventListener("focusout",this.#uv),this.#Tl.deactivate()}#mv;#yv;#vv;static{this.styles=[Vv`
:host {
    height: 300px;

    outline: none !important;

    display: flex;
    flex-direction: column;
    user-select: none;
    contain: strict;

    --bar-size: 48px;
    --left-size: 280px;
}

#resizer {
    position: absolute;
    transform-origin: 0 0;
    left: 0;
    right: 0;
    top: 0;
    height: 2px;
    background: transparent;
    cursor: ns-resize;
}

#resizer:hover {
    transform: scaleY(2);
}


#timeline-filter-controls {
    box-sizing: border-box;
    padding-left: 8px;
    padding-right: 2px;
    width: var(--left-size);
}

:host(.is-collapsed) {
    height: var(--bar-size);
    max-height: var(--bar-size);
    min-height: var(--bar-size);
}

#zoom {
    width: 180px;
    margin-right: 8px;
}

:host(.is-collapsed) #controls {
    display: none;
}

:host(.is-collapsed) #resizer {
    pointer-events: none;
}

#controls {
    width: 100%;
    height: var(--bar-size);
    min-height: var(--bar-size);
    max-height: var(--bar-size);
    pointer-events: var(--cc-pointer-events, auto);
    display: flex;
    align-items: center;
    overflow: clip;
    box-sizing: border-box;
}

:host, #controls {
    border-top: var(--border-size) solid var(--separator-color);
}

#recorder[selected] {
    color: var(--error-color) !important;
    --action-btn-bg: transparent !important;
}

#playback {
    background: transparent;
    display: flex;
    box-sizing: border-box;

    width: var(--left-size);
    height: var(--bar-size);

    padding-left: 8px;
    padding-right: 4px;

    align-items: center;
    justify-content: space-between;

    position: absolute;
    top: 0;
    left: 0;
}

#time-wrapper {
    display: flex;
    align-items: center;
    gap: 4px;
}

#time {
    cursor: pointer;
}

#speed {
    font-size: 18px;
}

#canvas {
    display: block;
    margin: 0;
    padding: 0;
    outline: none;
    border: none;
    touch-action: none;
    width: 100%;
    height: calc(100% - var(--bar-size));
    --cc-canvas-line-height: 32;
    --cc-canvas-scroll-size: var(--scrollbar-size);
    --cc-canvas-scroll-color: var(--scrollbar-color);
    --cc-canvas-separator-color: var(--separator-color);
    --cc-canvas-text: var(--text-color-default);
    --cc-canvas-background: var(--surface-color);
    --cc-canvas-background-selected: var(--surface-hover-color);
}

:host(.is-collapsed) #canvas {
    height: 100%;
}

#easing-popover::part(popover) {
    background: var(--surface-color);
}

@container --theme-provider style(--theme: dark) {
    #canvas {
        --cc-canvas-property-text: var(--gray-400);
        --cc-canvas-property-text-selected: var(--accent-color-400);

        --cc-canvas-playhead-thumb: var(--accent-color-400);
        --cc-canvas-playhead-line: var(--gray-100);
        --cc-canvas-play-range: var(--success-color);

        --cc-canvas-visibility-bar-face: var(--gray-600);
        --cc-canvas-visibility-bar-face-selected: var(--accent-color-500);
        --cc-canvas-visibility-bar-track-face: var(--gray-800);
        --cc-canvas-visibility-bar-text: var(--gray-100);
        --cc-canvas-visibility-bar-text-selected: var(--white);

        --cc-canvas-keyframe-face: var(--gray-900);
        --cc-canvas-keyframe-face-selected: var(--accent-color-400);
        --cc-canvas-keyframe-border: var(--gray-400);
        --cc-canvas-keyframe-border-selected: var(--accent-color-400);
        --cc-canvas-keyframe-track-line: var(--gray-800);
        --cc-canvas-keyframe-selection-rect: var(--accent-color-500);

        --cc-canvas-easing-face: var(--gray-700);
        --cc-canvas-easing-face-selected: var(--accent-color-300);
        --cc-canvas-easing-text: var(--gray-100);
        --cc-canvas-easing-text-selected: var(--black);

        /* Timeline zoom bar (numeste-l cum crezi tu) */
        --cc-canvas-zoom-bar-face: var(--accent-color-500);
        --cc-canvas-zoom-bar-track-face: var(--gray-800);
    }
}

@container --theme-provider style(--theme: light) {
    #canvas {
        --cc-canvas-property-text: var(--gray-500);
        --cc-canvas-property-text-selected: var(--accent-color-500);

        --cc-canvas-playhead-thumb: var(--accent-color-500);
        --cc-canvas-playhead-line: var(--gray-800);
        --cc-canvas-play-range: var(--success-color);

        --cc-canvas-visibility-bar-face: var(--gray-300);
        --cc-canvas-visibility-bar-face-selected: var(--accent-color-500);
        --cc-canvas-visibility-bar-track-face: var(--gray-50);
        --cc-canvas-visibility-bar-text: var(--gray-700);
        --cc-canvas-visibility-bar-text-selected: var(--white);

        --cc-canvas-keyframe-face: var(--white);
        --cc-canvas-keyframe-face-selected: var(--accent-color-400);
        --cc-canvas-keyframe-border: var(--gray-700);
        --cc-canvas-keyframe-border-selected: var(--accent-color-400);
        --cc-canvas-keyframe-track-line: var(--gray-50);
        --cc-canvas-keyframe-selection-rect: var(--accent-color-500);

        --cc-canvas-easing-face: var(--gray-100);
        --cc-canvas-easing-face-selected: var(--accent-color-200);
        --cc-canvas-easing-text: var(--gray-700);
        --cc-canvas-easing-text-selected: var(--black);


        /* Timeline zoom bar (numeste-l cum crezi tu) */
        --cc-canvas-zoom-bar-face: var(--accent-color-500);
        --cc-canvas-zoom-bar-track-face: var(--gray-50);
    }
}
    `]}}class BZ extends Kb{constructor(){super(...arguments),this.padding=24,this.handleRadius=4}updateInternalValues(){super.updateInternalValues(),this.background=this.getColor("face"),this.grid=this.getColor("grid"),this.func=this.getColor("func"),this.handle=this.getColor("handle"),this.handleHover=this.getColor("handle-hover")}}class UZ extends Xb{#Ev;#Ov;#ci=0;#Rv=[1,.9,.8,.75,.7,.6,.5,.4,.3,.25,.1];get zoom(){return this.#ci}set zoom(t){this.#ci!==t&&this.#Rv[t]&&(this.#ci=t,this.#Wv=this.#Bv=null,this.refresh(!1))}#Xs=void 0;get value(){return this.#Xs}set value(t){this.#Xs!==t&&(this.#Xs=t,this.#Bv=null,this.refresh(!0))}constructor(){super(),this.dblClickMaxDiff=-1;const t=new Path2D;for(let e=1;e<=3;e++){const i=.25*e;t.moveTo(i,0),t.lineTo(i,1),t.moveTo(0,i),t.lineTo(1,i)}t.moveTo(0,0),t.lineTo(1,1),t.rect(0,0,1,1),this.#Ev=t,this.#Ov=new Path2D,this.#Ov.moveTo(0,0),this.#Ov.lineTo(1,1)}createTheme(t){return new BZ(t)}invalidate(){}#Wv=null;#Bv=null;get#Uv(){if(this.#Wv)return this.#Wv;let{width:t,height:e}=this.size.content;const i=this.theme.padding;t-=2*i,e-=2*i;const n=this.#Rv[this.#ci],s=e*(1-n)/2;return this.#Wv=(new DOMMatrix).translateSelf(i,i).translateSelf(0,e*n+s).scaleSelf(t,-e*n)}get#$v(){if(this.#Bv)return this.#Bv;let{width:t,height:e}=this.size.content;const i=this.theme.padding;t-=2*i,e-=2*i;const n=this.#Rv[this.#ci],s=e*(1-n)/2,r=new DOMMatrix;return r.translateSelf(i,i),this.value?.inverted?(r.translateSelf(t,s),r.scaleSelf(-t,e*n)):(r.translateSelf(0,e*n+s),r.scaleSelf(t,-e*n)),this.#Bv=r}onSizeChanged(){this.#Wv=this.#Bv=null,super.onSizeChanged()}render(t,e,i){const n=this.theme;t.fillStyle=n.background,t.fillRect(0,0,e,i),t.lineJoin="round",t.lineCap="butt",t.strokeStyle=n.grid,t.lineWidth=1,t.stroke(this.#Qy(this.#Ev,this.#Uv));const s=this.#Xs;if(void 0===s)return;const r=s?.func;if(t.lineCap="round",t.strokeStyle=n.func,t.stroke(this.#Qy(r?.path??this.#Ov,this.#$v)),r instanceof qD){const e=this.#$v,i=e.transformPoint(Be.ZERO),s=e.transformPoint(Be.UNIT),o=e.transformPoint(r.h1),a=e.transformPoint(r.h2);t.strokeStyle=n.handle,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(o.x,o.y),t.moveTo(s.x,s.y),t.lineTo(a.x,a.y),t.stroke();const l=n.handleRadius;if(t.fillStyle=n.background,t.beginPath(),t.arc(i.x,i.y,l,0,2*Math.PI,!1),t.fill("nonzero"),t.stroke(),t.beginPath(),t.arc(s.x,s.y,l,0,2*Math.PI,!1),t.fill("nonzero"),t.stroke(),1===this.#Sl.type){let e,i;0===this.#Sl.handle?(e=o,i=a):(e=a,i=o),t.fillStyle=n.handle,t.beginPath(),t.arc(i.x,i.y,l,0,2*Math.PI,!1),t.fill("nonzero"),t.fillStyle=n.handleHover,t.beginPath(),t.arc(e.x,e.y,l,0,2*Math.PI,!1),t.fill("nonzero")}else t.fillStyle=n.handle,t.beginPath(),t.arc(o.x,o.y,l,0,2*Math.PI,!1),t.arc(a.x,a.y,l,0,2*Math.PI,!1),t.fill("nonzero")}}#Qy(t,e){const i=new Path2D;return i.addPath(t,e),i}#Sl={type:0,handle:null};#jl(t,e=null){const i=this.#Sl;return(i.type!==t||i.handle!==e)&&(i.type=t,i.handle=e,!0)}updateHoverInfo(){const t=this.#Xs?.func;if(!(t instanceof qD))return this.#jl(0);const{padding:e,handleRadius:i}=this.theme,n=this.mousePosition,s=this.size.content.width;if(n.x<e||n.x>s-e)return this.#jl(0);const r=this.#$v;return Be.distance(n,r.transformPoint(t.h1))<=i?this.#jl(1,0):Be.distance(n,r.transformPoint(t.h2))<=i?this.#jl(1,1):this.#jl(0)}clearHoverInfo(){return this.#jl(0,null)}handleDblClick(t){}#Fv=null;handleMouseDown(t){1===this.#Sl.type&&(this.#Fv=this.#Sl.handle)}handleMouseMove(t){if(null==this.#Fv)return;const e=this.#Xs.func,{x:i,y:s}=this.#$v.inverse().transformPoint(this.mousePosition),r=new Be(n(i),Math.round(1e3*s)/1e3);if(0===this.#Fv){if(e.h1.equals(r))return;e.h1=r}else{if(e.h2.equals(r))return;e.h2=r}e.invalidate(),this.refresh(!1),this.canvas.dispatchEvent(new Event("refresh"))}handleMouseUp(t){this.#Fv=null}onWheel(t){const e=n(Math.round(this.#ci+Math.sign(t.deltaY)),0,10);return e!==this.#ci&&(this.#ci=e,this.#Wv=this.#Bv=null,this.refresh(!0),this.canvas.dispatchEvent(new CustomEvent("zoom",{detail:e})),!0)}}const $Z=[{title:"Linear",icon:"expr:ease-linear",value:null},{title:"Bezier",icon:"expr:ease-in-out",value:0,meta:[new Be(.25,.1),new Be(.25,1)]},{title:"Back",icon:"expr:ease-back",value:4,meta:1.7},{title:"Steps",icon:"expr:ease-steps",value:1,meta:3},{title:"Points",icon:"workflow:GraphTrend",value:6,meta:[new Be(.25,.5),new Be(.75,.25)]},{title:"Elastic",icon:"expr:ease-elastic",value:3,meta:[3,3]},{title:"Bounce",icon:"expr:ease-bounce",value:2,meta:[3,1]},{title:"Sinc",icon:"expr:ease-sinc",value:5,meta:3}];class FZ extends Gb{#Tl=new UZ;constructor(){super();const t=()=>this.requestUpdate();this.#Tl.canvas.addEventListener("zoom",t),this.#Tl.canvas.addEventListener("refresh",t)}get value(){return this.#Tl.value}set value(t){this.#Tl.value=t,this.requestUpdate()}#Vv={min:0,max:10,step:1};render(){const t=this.value;return Ib`
        <cc-rich-list id="list" .value=${t?t.func.type:t} @change=${this.#Gv} .items=${$Z} vertical></cc-rich-list>
        <cc-flex-row id="controls">
            <cc-slider title="Zoom" flex filled .value=${this.#Tl.zoom} .pivot=${this.#Vv.max} .constraint=${this.#Vv} @update=${this.#gd}></cc-slider>
            <cc-action-button title="Copy easing" .disabled=${!t} @click=${this.#og}>
                <cc-icon name="expr:copy"></cc-icon>
            </cc-action-button>
        </cc-flex-row>
        ${this.#Tl.canvas}
        <cc-flex-row id="settings">
            ${this.#Zp(t)}
        </cc-flex-row>
        `}#og(){const t=this.value;t&&this.dispatchEvent(new CustomEvent("copy-easing",{detail:t}))}#gd(t){this.#Tl.zoom=t.detail}#Zp(t){if(!t)return Lb;const{func:e,inverted:i}=t;let n;switch(e.type){case 0:n=this.#Hv(e,i);break;case 1:n=this.#Zv(e);break;case 2:n=this.#Yv(e);break;case 3:n=this.#Qv(e);break;case 4:n=this.#Jv(e);break;case 5:n=this.#qv(e);break;case 6:n=this.#Kv(e,i)}return n?[n,Ib`<cc-action-button @click=${this.#Xv} title="Invert easing" .selected=${t?.inverted} emphasized>
            <cc-icon name="workflow:Sync"></cc-icon>
        </cc-action-button>`]:Lb}#tb={min:1,max:100,step:1,digits:0};#Zv(t){return Ib`<cc-number-input title="Steps" data-property="steps" .value=${t.steps} flex .formatter=${this.#tb} @update=${this.#eb}>
            <cc-icon name="workflow:Multiple" slot="before"></cc-icon>
        </cc-number-input>`}#ib={min:0,max:15,step:.1,digits:1};#Jv(t){return Ib`<cc-number-input title="Amplitude" data-property="amplitude" .value=${t.amplitude} flex .formatter=${this.#ib} @update=${this.#eb}>
            <cc-icon name="expr:arrow-up-right" slot="before"></cc-icon>
        </cc-number-input>`}#nb={min:1,max:20,step:1,digits:0};#qv(t){return Ib`<cc-number-input title="Oscillations" data-property="oscillations" .value=${t.oscillations} flex .formatter=${this.#nb} @update=${this.#eb}>
            <cc-icon name="workflow:Multiple" slot="before"></cc-icon>
        </cc-number-input>`}#sb={min:1,max:20,step:1,digits:0};#rb={min:0,max:10,step:.1,digits:1};#Yv(t){return Ib`
        <cc-number-input title="Bouncess" data-property="bounces" .value=${t.bounces} flex .formatter=${this.#sb} @update=${this.#eb}>
            <cc-icon name="workflow:Multiple" slot="before"></cc-icon>
        </cc-number-input>
        <cc-number-input title="Stiffness" data-property="stiffness" .value=${t.stiffness} flex .formatter=${this.#rb} @update=${this.#eb}>
            <cc-icon name="expr:arrow-up-right" slot="before"></cc-icon>
        </cc-number-input>
        `}#ob={min:1,max:20,step:1,digits:0};#ab={min:0,max:10,step:.1,digits:1};#Qv(t){return Ib`
        <cc-number-input title="Oscillations" data-property="oscillations" .value=${t.oscillations} flex .formatter=${this.#ob} @update=${this.#eb}>
            <cc-icon name="workflow:Multiple" slot="before"></cc-icon>
        </cc-number-input>
        <cc-number-input title="Stiffness" data-property="stiffness" .value=${t.stiffness} flex .formatter=${this.#ab} @update=${this.#eb}>
            <cc-icon name="expr:arrow-up-right" slot="before"></cc-icon>
        </cc-number-input>
        `}#eb(t){const e=t.target.dataset.property,i=this.value.func;i[e]=t.detail,i.invalidate(),this.#Tl.refresh(!0)}#Hv(t,e){let i;return i=e?[1-t.h2.x,1-t.h2.y,1-t.h1.x,1-t.h1.y]:[t.h1.x,t.h1.y,t.h2.x,t.h2.y],Ib`<cc-text-input text-center .value=${function(t,e=" "){return t.map(h).join(e)}(i,", ")} @change=${this.#lb} flex></cc-text-input>`}#lb(t){let e=u(t.detail);if(4!==e.length)return void t.preventDefault();e[0]=n(e[0]),e[2]=n(e[2]);const i=this.value.func;if(this.value.inverted){e.push(e.shift(),e.shift());for(let t=0;t<4;t++)e[t]=1-e[t]}i.h1=new Be(e[0],e[1]),i.h2=new Be(e[2],e[3]),i.invalidate(),this.#Tl.refresh(!0)}#Kv(t,e){let i=[];for(let{x:n,y:s}of t.points)e&&(n=1-n,s=1-s),n=Math.round(100*n),s=Math.round(100*s),i.push(`${n} ${s}`);return e&&i.reverse(),Ib`<cc-text-input text-center .value=${i.join(", ")} @change=${this.#cb} flex></cc-text-input>`}#cb(t){const e=this.value.inverted,i=u(t.detail,.01),s=[];let r,o;for(let t=0;t<i.length;t+=2)r=i[t],o=i[t+1],e&&(r=1-r,o=1-o),r=n(r),s.push(new Be(r,o));e&&s.reverse(),QD(s);const a=this.value.func;a.points=s,a.invalidate(),this.#Tl.refresh(!0),this.requestUpdate(),console.log(PE(this.value))}connectedCallback(){super.connectedCallback(),this.#Tl.activate()}disconnectedCallback(){super.disconnectedCallback(),this.#Tl.deactivate()}#Gv(t){const e=fE({type:t.detail,data:t.item.meta});this.value=e?new pE(e,this.value?.inverted??!0):null}#Xv(){const t=this.value;t&&(this.value=t.inverse)}static{this.styles=Vv`
:host {
    --canvas-size: 248px;
    display: grid;
    box-sizing: content-box;
    grid-template-areas: "list controls" "list canvas" "list settings";
    grid-template-columns: 100px var(--canvas-size);
    grid-template-rows: auto var(--canvas-size) auto;
    padding: 16px;
    column-gap: 16px;
    row-gap: 8px;
}

cc-flex-row {
    --flex-gap: 8px;
}

#list {
    grid-area: list;
    justify-content: space-evenly;
    --item-padding: 8px;
}

#list::part(icon) {
    color: var(--text-color-default);
    background: none;
    padding: 0;
    width: 18px;
    height: 18px;
}

#canvas {
    grid-area: canvas;
    display: block;
    width: var(--canvas-size);
    height: var(--canvas-size);
    border-radius: 4px;
    --cc-canvas-func: var(--accent-color-500);
    --cc-canvas-handle-hover: var(--accent-color-500);
}

#controls {
    grid-area: controls;
}
#settings {
    grid-area: settings;
    min-height: 24px;
}



@container --theme-provider style(--theme: dark) {
    #canvas {
        --cc-canvas-face: var(--gray-1000);
        --cc-canvas-grid: var(--gray-600);
        --cc-canvas-handle: var(--white);
    }
}
@container --theme-provider style(--theme: light) {
    #canvas {
        --cc-canvas-face: var(--gray-50);
        --cc-canvas-grid: var(--gray-200);
        --cc-canvas-handle: var(--black);
    }
}
    `}}const VZ={...iM,min:1,max:2e4},GZ=Bd,HZ=[{title:"No auto rotate",icon:"expr:no-auto-rotate",value:0},{title:"Auto rotate",icon:"expr:auto-rotate",value:1,emphasized:!0},{title:"Auto rotate reverse",icon:"expr:auto-rotate-reverse",value:-1,emphasized:!0}],ZZ={min:-360,max:360,step:.1,stepScale:10,digits:1,unit:"°"},YZ={step:1,digits:0,unit:""},QZ={step:.01,scale:100,stepScale:1,digits:1,unit:"%"},JZ={step:.1,stepScale:10,digits:1,unit:"°"},qZ={min:-85,max:85,step:.1,stepScale:10,digits:1,unit:"°"};function KZ(t,e="Keep proportions"){return Ib`<cc-icon-toggle id=${t} title=${e} left-gap quiet emphasized></cc-icon-toggle>`}function XZ(t="pin"){return Ib`<cc-pin-point id=${t} right-gap @change=${iY} .valueMap=${$s}></cc-pin-point>`}const tY=[{title:"Even-odd",icon:"EvenOdd",value:1},{title:"Non-zero",icon:"NonZero",value:0,emphasized:!0}];function eY(t="winding"){return Ib`<cc-icon-cycle id=${t} @change=${sY} .items=${tY} left-gap css-icon quiet></cc-icon-cycle>`}function iY(t){return RA(nY,t.detail)}function nY(t,e){return function(t,e){if(!t.isElement)return!1;const i=Ud;if(!t.isTransformable)return Cd(t,i,e);if(!vd(t,i)||i.sameValue(t,e))return!1;const n=t.localBounds.topLeft;if(!Cd(t,i,e))return!1;const s=t.localBounds.topLeft.sub(n);return s.isZero||Cd(t,Pd,t.anchor.add(s)),!0}(t,e)}function sY(t){RA(Fd,t.detail)}const rY=Gf,oY=$f,aY=Vv`
#wrapper.multi .is-all-corners,
#wrapper:not(.multi) .is-one-corner {
    display: none;
}
`,lY=Qf,cY=op,uY={...iM,min:3,max:360},hY=gp,dY={...iM,min:3,max:360},fY=qf;class pY{constructor(t){this.index=t}isValidTarget(t){return t instanceof qp}getValue(t){return t.points[this.index]}sameValue(t,e){return t.points[this.index].equals(e)}setValue(t,e){const i=t.points.slice();return i[this.index]=e,Cd(t,fY.points,i)}}const gY=ep,mY=[wx,Vv`#length{user-select: text}`],yY=tp,vY=[{title:"Closed",icon:"expr:connected",value:!0},{title:"Open",icon:"expr:disconnected",value:!1}],bY=Ad;let xY=(()=>{let t,e,i,n,s=BC,r=[],o=[],a=[],l=[];return class extends s{static{const c="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ax()],i=[ax()],ex(this,e={get:nx((function(){return this.#ub}),"#duration","get"),set:nx((function(t){this.#ub=t}),"#duration","set")},t,{kind:"accessor",name:"#duration",static:!1,private:!0,access:{has:t=>#hb in t,get:t=>t.#hb,set:(t,e)=>{t.#hb=e}},metadata:c},r,o),ex(this,n={get:nx((function(){return this.#kr}),"#fps","get"),set:nx((function(t){this.#kr=t}),"#fps","set")},i,{kind:"accessor",name:"#fps",static:!1,private:!0,access:{has:t=>#Qm in t,get:t=>t.#Qm,set:(t,e)=>{t.#Qm=e}},metadata:c},a,l),c&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})}#ub=ix(this,r,1e3);get#hb(){return e.get.call(this)}set#hb(t){return e.set.call(this,t)}#kr=(ix(this,o),ix(this,a,30));get#Qm(){return n.get.call(this)}set#Qm(t){return n.set.call(this,t)}async init(){return this.#hb=1e3,this.#Qm=60,super.init()}renderSettings(){return Ib`
        <cc-flex-row>
            <div class="label">Duration</div>
            <cc-time-input id="duration" .value=${this.#hb} @change=${this.#lm} padded flex></cc-time-input>
            <cc-picker .items=${sB} .value=${this.#Qm} @change=${this.#db} flex></cc-picker>
        </cc-flex-row>
        `}#lm(t){this.#hb=t.detail}#db(t){this.#Qm=t.detail}createProject(){const t=new Yg;t.title=this.name,Um(t);const e=new SO;return e.duration=this.#hb,e.fps=this.#Qm,Xo({document:t,timeline:e,board:new wi(0,0,this.width,this.height)})}constructor(){super(...arguments),ix(this,l)}}})();var wY={"es-export-dialog-content":eB,"es-create-project-settings":xY,"es-transform-tool-ctx":class extends GC{constructor(){super(),hC(this,[[Bt,this.#Zc],[Yt,this.#Zc]])}firstUpdated(){this.#Zc()}connectedCallback(){super.connectedCallback(),this.#Zc()}#Cr=!1;#Zc=()=>{const t=lh()||!rh().isTransformable;if(this.#Cr!==t){this.#Cr=t;for(const e of this.shadowRoot.querySelectorAll(".item"))e.disabled=t}};render(){return Ib`
            <cc-action-group gapless quiet size="m">
                <cc-action-button class="item" title="Rotate -90&deg;" @click=${this.#fb}>
                    <cc-icon name="workflow:RotateCCW"></cc-icon>
                </cc-action-button>
                <cc-action-button class="item" title="Rotate +90&deg;" @click=${this.#pb}>
                    <cc-icon name="workflow:RotateCW"></cc-icon>
                </cc-action-button>
                <cc-action-button class="item" title="Flip horizontal" @click=${this.#gb}>
                    <cc-icon name="workflow:FlipHorizontal"></cc-icon>
                </cc-action-button>
                <cc-action-button class="item" title="Flip vertical" @click=${this.#mb}>
                    <cc-icon name="workflow:FlipVertical"></cc-icon>
                </cc-action-button>
                <cc-pin-point-button class="item" title="Origin" @change=${this.#yb} .valueMap=${Fs}>
                    <cc-icon name="expr:center-origin-object"></cc-icon>
                </cc-pin-point-button>
            </cc-action-group>
        `}#fb(){p_(-90)}#pb(){p_(90)}#gb(){m_()}#mb(){g_()}#yb(t){f_(t.detail,!0)}},"es-mpath-joint-tool-ctx":class extends aA{constructor(){super(),hC(this,[Bt,Ut,Yt,LO])}refresh(t){if(UO())return;const e=rh();if(!e||!e.isTransformable)return;const i=EO.getAnimation(e,bY.id);if(i&&!i.disabled)for(const e of i.keyframes)if(FO(e)){if(t[0]=!1,null===t[1]){t[1]=e.value.joint;continue}if(t[1]!==e.value.joint)return void(t[1]=null)}}onChange(t){gW(t.detail)}},"es-transform-properties":class extends JA{constructor(){super(1)}#vb;#bb;#xb;#wb;#Mb;#Sb;#Fe;#Ve;#He;#kb;#_b;init(){this.#vb=this.find("#position-x"),this.#bb=this.find("#position-y"),this.#Mb=this.find("#anchor-x"),this.#Sb=this.find("#anchor-y"),this.#xb=this.find("#scale-x"),this.#wb=this.find("#scale-y"),this.#Fe=this.find("#skew-angle"),this.#Ve=this.find("#skew-axis"),this.#kb=this.find("#rotate-x"),this.#_b=this.find("#rotate-y"),this.#He=this.find("#orientation"),this.addLinkedProperties([{mode:"point",x:this.#vb,y:this.#bb,property:GZ.position,link:null},{mode:"point",x:this.#Mb,y:this.#Sb,property:GZ.anchor,link:null},{mode:"point",x:this.#xb,y:this.#wb,property:GZ.scale,link:this.find("#link-scale")}])}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon name="workflow:Crosshairs" right-gap padded class="is-position"></cc-icon>
                <cc-number-input id="position-x" title="Origin X" flex>
                    <cc-icon name="expr:x" class="is-position" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="position-y" title="Origin Y" flex>
                    <cc-icon name="expr:y" class="is-position" slot="before"></cc-icon>
                </cc-number-input>
                <cc-pin-point-button @change=${this.#Ib} .valueMap=${Fs} left-gap quiet placement="left">
                    <cc-icon name="expr:center-origin-object"></cc-icon>
                </cc-pin-point-button>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="workflow:Anchor" right-gap padded class="is-anchor"></cc-icon>
                <cc-number-input id="anchor-x" title="Anchor X" flex>
                    <cc-icon name="expr:x" class="is-anchor" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="anchor-y" title="Anchor Y" flex>
                    <cc-icon name="expr:y" class="is-anchor" slot="before"></cc-icon>
                </cc-number-input>
                <cc-pin-point-button @change=${this.#Cb} .valueMap=${Fs} left-gap quiet placement="left">
                    <cc-icon name="expr:center-object-origin"></cc-icon>
                </cc-pin-point-button>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:rotate" right-gap padded class="is-rotate"></cc-icon>
                <cc-number-input id="rotate-x" title="Rotation" ${HA(GZ.rotate,null,this.#Lb)} .formatter=${ZZ} flex>
                    <cc-icon name="expr:angle" class="is-rotate" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="rotate-y" title="Turns" ${HA(GZ.rotate,null,this.#Nb)} .formatter=${YZ} flex>
                    <cc-icon name="workflow:Orbit" class="is-rotate" slot="before"></cc-icon>
                </cc-number-input>
                <cc-icon-cycle id="orientation" .items=${HZ} .value=${0} @change=${this.#jb} left-gap quiet></cc-icon-cycle>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:size" right-gap padded class="is-scale"></cc-icon>
                <cc-number-input id="scale-x" title="Scale X" .formatter=${QZ} flex>
                    <cc-icon name="expr:x" class="is-scale" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="scale-y" title="Scale Y" .formatter=${QZ} flex>
                    <cc-icon name="expr:y" class="is-scale" slot="before"></cc-icon>
                </cc-number-input>
                <cc-icon-toggle id="link-scale" title="Keep proportions" left-gap quiet emphasized></cc-icon-toggle>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:skew" right-gap padded class="is-skew-angle is-skew-axis"></cc-icon>
                <cc-number-input id="skew-angle" title="Skew angle" ${HA(GZ.skewAngle)} .formatter=${JZ} flex>
                    <cc-icon name="expr:angle" class="is-skew-angle" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="skew-axis" title="Skew axis" ${HA(GZ.skewAxis)} .formatter=${qZ} flex>
                    <cc-icon name="expr:guidelines-toggle" class="is-skew-axis" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}#Lb=t=>{const e=this.#_b,i=t+360*e.value;return(t<=-360||t>=360)&&(this.#kb.value=t%360,e.value=Math.trunc(i/360)),i};#Nb=t=>360*t+this.#kb.value;#jb(t){y_(t.detail)}#Ib(t){f_(t.detail,!0)}#Cb(t){f_(t.detail,!1)}onValue(t){this.#vb.value=t.position.x,this.#bb.value=t.position.y,this.#Mb.value=t.anchor.x,this.#Sb.value=t.anchor.y,this.#kb.value=t.rotate%360,this.#_b.value=Math.trunc(t.rotate/360),this.#He.value=t.orientation??0,this.#xb.value=t.scale.x,this.#wb.value=t.scale.y,this.#Fe.value=t.skewAngle,this.#Ve.value=t.skewAxis}onGlobal(){}onGlobalStatusChanged(t){}static get styles(){return[...super.styles,KA(XA(".is-position",GZ.position.id),XA(".is-anchor",GZ.anchor.id),XA(".is-scale",GZ.scale.id),XA(".is-rotate",GZ.rotate.id),XA(".is-skew-angle",GZ.skewAngle.id),XA(".is-skew-axis",GZ.skewAxis.id))]}},"es-ellipse-properties":class extends JA{constructor(){super(4)}#tt;#j;#X;init(){this.#tt=this.find("#pin"),this.#j=this.find("#width"),this.#X=this.find("#height"),this.addLinkedProperties([{mode:"detached",properties:[[rY.width,this.#j],[rY.height,this.#X]],link:this.find("#link-size")}])}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                ${XZ()}
                <cc-number-input id="width" title="Width" .formatter=${eM} flex>
                    <cc-icon class="is-width" name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" .formatter=${eM} flex>
                    <cc-icon class="is-height" name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                ${KZ("link-size")}
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#j.value=t.width,this.#X.value=t.height,this.#tt.value=t.pin}onGlobal(){}onGlobalStatusChanged(t){this.#j.indeterminate=this.#X.indeterminate=t,this.#j.disabled=this.#X.disabled=t,this.#tt.disabled=t}static get styles(){return[...super.styles,KA(XA(".is-width",rY.width.id),XA(".is-height",rY.height.id))]}},"es-rectangle-properties":class extends JA{constructor(){super(4)}#gs;#tt;#j;#X;#Tb;#zb;#Ab;init(){this.#gs=this.find("#wrapper"),this.#tt=this.find("#pin"),this.#j=this.find("#width"),this.#X=this.find("#height"),this.#Tb=this.find("#radius-link"),this.#zb=this.find("#all-corners"),this.#Ab=[this.find("#top-left"),this.find("#top-right"),this.find("#bottom-right"),this.find("#bottom-left")],this.addLinkedProperties([{mode:"detached",properties:[[oY.width,this.#j],[oY.height,this.#X]],link:this.find("#link-size")}])}render(){return Ib`
        <cc-flex-col id="wrapper">
            <cc-flex-row>
                ${XZ()}
                <cc-number-input id="width" title="Width" .formatter=${eM} flex>
                    <cc-icon class="is-width" name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" .formatter=${eM} flex>
                    <cc-icon class="is-height" name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                ${KZ("link-size")}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:roundness" padded right-gap class="is-radius"></cc-icon>
                <cc-number-input id="all-corners" class="is-all-corners" title="Corner radius" ${HA(oY.radius,null,this.#Pb)} .formatter=${eM} padded flex></cc-number-input>
                <cc-number-input id="top-left" class="is-one-corner" title="Top-Left" ${HA(oY.radius,null,this.#Db)} .formatter=${eM} padded flex></cc-number-input>
                <cc-number-input id="top-right" class="is-one-corner" title="Top-Right" ${HA(oY.radius,null,this.#Eb)} .formatter=${eM} padded flex></cc-number-input>
                <cc-icon-toggle id="radius-link" @change=${this.#Ob} on-icon="RectRadiusSeparate" off-icon="RectRadiusSame" left-gap quiet emphasized></cc-icon-toggle>
            </cc-flex-row>
            <cc-flex-row class="is-one-corner">
                <div fixed-32></div>
                <cc-number-input id="bottom-left" title="Bottom-Left" ${HA(oY.radius,null,this.#Rb)} .formatter=${eM} padded flex></cc-number-input>
                <cc-number-input id="bottom-right" title="Bottom-Right" ${HA(oY.radius,null,this.#Wb)} .formatter=${eM} padded flex></cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}get#Bb(){return this.isGlobal?this.value.rectRadius:this.value.radius}#Pb=t=>new Qs(t);#Ub=(t,e)=>{const i=this.#Bb.value.slice();return i[e]=t,new Qs(i)};#Db=t=>this.#Ub(t,0);#Eb=t=>this.#Ub(t,1);#Wb=t=>this.#Ub(t,2);#Rb=t=>this.#Ub(t,3);#Ob(t){const e=this.#Bb,i=t.detail?e.split():e.join();RA(oY.radius,i),this.#$b(i)}#$b(t){const e=this.#gs.classList;if(t.isSimple)e.remove("multi"),this.#Tb.checked=!1,this.#zb.value=t.value;else{e.add("multi"),this.#Tb.checked=!0;for(let e=0;e<4;e++)this.#Ab[e].value=t.value[e]}}onValue(t){this.#j.value=t.width,this.#X.value=t.height,this.#tt.value=t.pin,this.#$b(t.radius)}onGlobal(t){this.#$b(t.rectRadius)}onGlobalStatusChanged(t){this.#j.indeterminate=this.#X.indeterminate=t,this.#j.disabled=this.#X.disabled=t,this.#tt.disabled=t}static get styles(){return[...super.styles,aY,KA(XA(".is-width",oY.width.id),XA(".is-height",oY.height.id),XA(".is-radius",oY.radius.id))]}},"es-image-properties":class extends JA{constructor(){super(4)}#tt;#j;#X;init(){this.#tt=this.find("#pin"),this.#j=this.find("#width"),this.#X=this.find("#height"),this.addLinkedProperties([{mode:"detached",properties:[[lY.width,this.#j],[lY.height,this.#X]],link:this.find("#link-size")}])}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                ${XZ()}
                <cc-number-input id="width" title="Width" .formatter=${eM} flex>
                    <cc-icon class="is-width" name="expr:w" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="height" title="Height" .formatter=${eM} flex>
                    <cc-icon class="is-height" name="expr:h" slot="before"></cc-icon>
                </cc-number-input>
                ${KZ("link-size")}
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#j.value=t.width,this.#X.value=t.height,this.#tt.value=t.pin}onGlobal(){}onGlobalStatusChanged(t){this.#j.indeterminate=this.#X.indeterminate=t,this.#j.disabled=this.#X.disabled=t,this.#tt.disabled=t}static get styles(){return[...super.styles,KA(XA(".is-width",lY.width.id),XA(".is-height",lY.height.id))]}},"es-polygon-properties":class extends JA{constructor(){super(4)}#tt;#Fb;#st;#ot;#nt;#Vb;init(){this.#tt=this.find("#pin"),this.#st=this.find("#sides"),this.#ot=this.find("#angle"),this.#Fb=this.find("#winding"),this.#nt=this.find("#radius"),this.#Vb=this.find("#roundness")}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                ${XZ()}
                <cc-number-input id="sides" title="Sides" ${HA(cY.sides)} .formatter=${uY} flex>
                    <cc-icon name="expr:polygon" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="angle" title="Angle" ${HA(cY.angle)} .formatter=${nM} flex>
                    <cc-icon class="is-angle" name="expr:angle" slot="before"></cc-icon>
                </cc-number-input>
                ${eY()}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:size" padded right-gap class="is-radius is-roundness"></cc-icon>
                <cc-number-input id="radius" title="Radius" ${HA(cY.radius)} .formatter=${eM} flex>
                    <cc-icon class="is-radius" name="expr:radius" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="roundness" title="Roundness" ${HA(cY.cornerRadius)} .formatter=${Kw} flex>
                    <cc-icon class="is-roundness" name="expr:roundness" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#nt.value=t.radius,this.#Vb.value=t.cornerRadius||0,this.#st.value=t.sides||3,this.#ot.value=t.angle,this.#tt.value=t.pin,this.#Fb.value=t.fillRule}onGlobal(t){this.#Vb.value=t.regularPolygonCornerRadius,this.#st.value=t.regularPolygonSides,this.#Fb.value=t.fillRule,this.#tt.value=null}onGlobalStatusChanged(t){this.#nt.indeterminate=this.#nt.disabled=t,this.#ot.indeterminate=this.#ot.disabled=t,this.#tt.disabled=t}static get styles(){return[...super.styles,KA(XA(".is-angle",cY.angle.id),XA(".is-radius",cY.radius.id),XA(".is-roundness",cY.cornerRadius.id))]}},"es-star-properties":class extends JA{constructor(){super(4)}#tt;#Fb;#st;#ot;#at;#lt;#Gb;#Hb;#Zb;#Yb;#Qb;init(){this.#tt=this.find("#pin"),this.#Fb=this.find("#winding"),this.#st=this.find("#sides"),this.#ot=this.find("#angle"),this.#at=this.find("#outer-radius"),this.#lt=this.find("#inner-radius"),this.#Gb=this.find("#link-radius"),this.#Hb=this.find("#outer-roundness"),this.#Zb=this.find("#inner-roundness"),this.#Yb=this.find("#outer-twirll"),this.#Qb=this.find("#inner-twirll"),this.addLinkedProperties([{mode:"detached",properties:[[hY.outerRadius,this.#at],[hY.innerRadius,this.#lt]],link:this.#Gb},{mode:"detached",properties:[[hY.outerCornerRadius,this.#Hb],[hY.innerCornerRadius,this.#Zb]],link:this.find("#link-roundness")},{mode:"detached",properties:[[hY.outerRotate,this.#Yb],[hY.innerRotate,this.#Qb]],link:this.find("#link-twirll")}])}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                ${XZ()}
                <cc-number-input id="sides" title="Sides" ${HA(hY.sides)} .formatter=${dY} flex>
                    <cc-icon name="expr:star-tool" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="angle" title="Angle" ${HA(hY.angle)} .formatter=${nM} flex>
                    <cc-icon class="is-angle" name="expr:angle" slot="before"></cc-icon>
                </cc-number-input>
                ${eY()}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:radius" padded right-gap class="is-outer-radius is-inner-radius"></cc-icon>
                <cc-number-input id="outer-radius" title="Outer radius" .formatter=${eM} flex>
                    <cc-icon class="is-outer-radius" name="expr:outer" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="inner-radius" title="Inner radius" .formatter=${eM} flex>
                    <cc-icon class="is-inner-radius" name="expr:inner" slot="before"></cc-icon>
                </cc-number-input>
                ${KZ("link-radius")}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:roundness" padded right-gap class="is-outer-roundness is-inner-roundness"></cc-icon>
                <cc-number-input id="outer-roundness" title="Outer roundness" .formatter=${Kw} flex>
                    <cc-icon class="is-outer-roundness" name="expr:outer" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="inner-roundness" title="Inner roundness" .formatter=${Kw} flex>
                    <cc-icon class="is-inner-roundness" name="expr:inner" slot="before"></cc-icon>
                </cc-number-input>
                ${KZ("link-roundness")}
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:rotate-star" padded right-gap class="is-outer-twirll is-inner-twirll"></cc-icon>
                <cc-number-input id="outer-twirll" title="Outer twirll" .formatter=${nM} flex>
                    <cc-icon class="is-outer-twirll" name="expr:outer" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="inner-twirll" title="Inner twirll" .formatter=${nM} flex>
                    <cc-icon class="is-inner-twirll" name="expr:inner" slot="before"></cc-icon>
                </cc-number-input>
                ${KZ("link-twirll")}
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#tt.value=t.pin,this.#Fb.value=t.fillRule,this.#at.value=t.outerRadius,this.#lt.value=t.innerRadius,this.#Hb.value=t.outerCornerRadius,this.#Zb.value=t.innerCornerRadius,this.#Yb.value=t.outerRotate,this.#Qb.value=t.innerRotate,this.#st.value=t.sides||3,this.#ot.value=t.angle}onGlobal(t){this.#tt.value=null,this.#Fb.value=t.fillRule,this.#Hb.value=t.starOuterCornerRadius,this.#Zb.value=t.starInnerCornerRadius,this.#Yb.value=t.starOuterRotate,this.#Qb.value=t.starInnerRotate,this.#st.value=t.starSides}onGlobalStatusChanged(t){this.#tt.disabled=t,this.#at.disabled=this.#at.indeterminate=t,this.#lt.disabled=this.#lt.indeterminate=t,this.#ot.disabled=this.#ot.indeterminate=t,this.#Gb.disabled=t}static get styles(){return[...super.styles,KA(XA(".is-angle",hY.angle.id),XA(".is-outer-radius",hY.outerRadius.id),XA(".is-inner-radius",hY.innerRadius.id),XA(".is-outer-roundness",hY.outerCornerRadius.id),XA(".is-inner-roundness",hY.innerCornerRadius.id),XA(".is-outer-twirll",hY.outerRotate.id),XA(".is-inner-twirll",hY.innerRotate.id))]}},"es-line-properties":class extends JA{constructor(){super(4)}#Jb;#qb;#Kb;#Xb;init(){this.#Jb=this.find("#x1"),this.#qb=this.find("#y1"),this.#Kb=this.find("#x2"),this.#Xb=this.find("#y2"),this.addLinkedProperties([{mode:"point",x:this.#Jb,y:this.#qb,property:new pY(0)},{mode:"point",x:this.#Kb,y:this.#Xb,property:new pY(1)}])}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon padded right-gap name="expr:line-tool" class="is-points"></cc-icon>
                <cc-number-input id="x1" title="From X" .formatter=${rM} flex>
                    <cc-icon name="expr:x1" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="y1" title="From Y" .formatter=${rM} flex>
                    <cc-icon name="expr:y1" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
            <cc-flex-row>
                <div fixed-32></div>
                <cc-number-input id="x2" title="To X" .formatter=${rM} flex>
                    <cc-icon name="expr:x2" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="y2" title="To Y" .formatter=${rM} flex>
                    <cc-icon name="expr:y2" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}onValue(t){this.#Jb.value=t.from.x,this.#qb.value=t.from.y,this.#Kb.value=t.to.x,this.#Xb.value=t.to.y}onGlobal(){}onGlobalStatusChanged(t){this.#Jb.disabled=this.#qb.disabled=this.#Kb.disabled=this.#Xb.disabled=t,this.#Jb.indeterminate=this.#qb.indeterminate=this.#Kb.indeterminate=this.#Xb.indeterminate=t}static get styles(){return[...super.styles,KA(XA(".is-points",fY.points.id))]}},"es-polyline-properties":class extends JA{constructor(){super(4)}#Ug;#tx;#Fb;init(){this.#Ug=this.find("#count"),this.#tx=this.find("#closed"),this.#Fb=this.find("#winding")}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon name="expr:path" class="is-points" padded right-gap></cc-icon>
                <div id="count" title="Points" flex></div>
                <cc-icon-switch id="closed" .items=${vY} @change=${this.#ex} compact emphasized></cc-icon-switch>
                ${eY()}
            </cc-flex-row>
        </cc-flex-col>
        `}#ex(t){RA(yY.closed,t.detail)}onValue(t){this.#Fb.value=t.fillRule,this.#tx.value=t.isClosed,this.#Ug.innerText=t.points.length.toString()}onGlobal(t){this.#tx.value=null,this.#Fb.value=t.fillRule,this.#Ug.innerText=""}onGlobalStatusChanged(t){this.#tx.disabled=t}static get styles(){return[...super.styles,KA(XA(".is-points",yY.points.id))]}},"es-path-properties":class extends JA{constructor(){super(4),hC(this,[[Qt,this.#ix]])}#nx=new RO;#Fb;#sx;#rx;init(){this.#Fb=this.find("#winding"),this.#sx=this.find("#x"),this.#rx=this.find("#y")}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                <cc-icon name="expr:path" class="is-points" padded right-gap></cc-icon>
                <cc-number-input id="x" title="Node X" @start=${this.#Ad} @update=${this.#mo("x")} @end=${this.#Pd} flex>
                    <cc-icon name="expr:x" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="y" title="Node Y" @start=${this.#Ad} @update=${this.#mo("y")} @end=${this.#Pd} flex>
                    <cc-icon name="expr:y" slot="before"></cc-icon>
                </cc-number-input>
                ${eY()}
            </cc-flex-row>
        </cc-flex-col>
        `}#ox;#ax;#hi=new Map;#Ad(t){this.#ox=this.#ax=t.detail;const e=this.#hi;e.clear();for(const t of Th(uy)){const i=pm(t);i?.size&&e.set(t,i)}this.#nx.start()}#ix=()=>{const t=this.value;uy(t)&&t.document&&this.onValue(t)};#mo(t){const e={x:0,y:0};return i=>{if(e[t]=i.detail-this.#ax,e[t]){this.#ax=i.detail;for(const[t,i]of this.#hi)wy(t,e,i)}}}#Pd(t){this.#hi.clear(),(this.#ox!==t.detail||this.#nx.hasChanged)&&ga()}onValue(t){this.#Fb.value=t.fillRule;const e=function(t){if(!dm.has(t))return null;const e=dm.get(t);if(!e.size)return null;if(e.has(0))return 0;const[i]=e;return i}(t),i=null==e||!t.nodes[e],n=this.#sx,s=this.#rx;if(n.disabled=n.indeterminate=n.inert=i,s.disabled=s.indeterminate=s.inert=i,!i){const i=t.globalMatrix.transformPoint(t.nodes[e].point);n.value=i.x,s.value=i.y}}onGlobal(t){this.#Fb.value=t.fillRule}onGlobalStatusChanged(t){}static get styles(){return[...super.styles,...mY,KA(XA(".is-points",gY.nodes.id))]}},"es-global-coords":class extends JA{#nx=new RO;#tt=As;#sx;#rx;#lx;#cx;constructor(){super([1,4,7]),hC(this,[[Yt,this.#Fd]])}init(){this.#sx=this.find("#x"),this.#rx=this.find("#y"),this.#lx=this.find("#w"),this.#cx=this.find("#h")}render(){return Ib`
        <cc-flex-col>
            <cc-flex-row>
                <cc-pin-point id="pin" .value=${this.#tt} right-gap @change=${this.#ux} .valueMap=${$s}></cc-pin-point>
                <cc-number-input id="x" title="X" @start=${this.#Ad} @update=${this.#mo("x")} @end=${this.#Pd} flex>
                    <cc-icon name="expr:x" slot="before"></cc-icon>
                </cc-number-input>
                <cc-number-input id="y" title="Y" @start=${this.#Ad} @update=${this.#mo("y")} @end=${this.#Pd} flex>
                    <cc-icon name="expr:y" slot="before"></cc-icon>
                </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
            <cc-flex-row>
                <cc-icon name="expr:size" right-gap padded></cc-icon>
                    <cc-number-input disabled inert id="w" title="Width" flex>
                        <cc-icon name="expr:w" slot="before"></cc-icon>
                    </cc-number-input>
                    <cc-number-input disabled inert id="h" title="Height" flex>
                        <cc-icon name="expr:h" slot="before"></cc-icon>
                    </cc-number-input>
                <div fixed-32></div>
            </cc-flex-row>
        </cc-flex-col>
        `}#ox;#ax;#hx;#Ad(t){this.#ox=this.#ax=t.detail,this.#hx=oh(),this.#nx.start()}#mo(t){const e={x:0,y:0};return i=>{e[t]=i.detail-this.#ax,e[t]&&(this.#ax=i.detail,Fg(this.#hx,new Be(e.x,e.y)))}}#Pd(t){this.#hx=null,(this.#ox!==t.detail||this.#nx.hasChanged)&&ga()}#ux(t){this.#tt=t.detail,this.#Fd()}#Fd=Lt((()=>{const t=rh();if(!t||!t.isElement)return;const e=1===ah()?t.globalBounds:Ph??=function(){if(!ih.size)return wi.ZERO;const t=eh;return t?.isElement?1===ih.size?t.globalBounds:wi.fromIterablePoints(function*(t){for(const e of t)yield*e.globalBoundsPoints}(ih)):wi.ZERO}(),i=this.#tt;this.#sx.value=e.left+i.x*e.width,this.#rx.value=e.top+i.y*e.width,this.#lx.value=e.width,this.#cx.value=e.height}));onValue(t){this.#Fd()}onGlobal(t){}onGlobalStatusChanged(t){}},"es-document-properties":class extends ww{#fe;#j;#X;firstUpdated(){this.#fe=this.find("#title"),this.#j=this.find("#width"),this.#X=this.find("#height"),super.firstUpdated()}refresh(){this.#fe.value=su.title||"";const t=Ck();this.#j.value=t.width,this.#X.value=t.height}render(){return Ib`
<cc-flex-col>
    <cc-flex-row>
        <cc-icon name="workflow:ProjectNameEdit" padded right-gap></cc-icon>
        <cc-text-input id="title" placeholder="Name" maxlength="128" @change=${this.#_p} flex></cc-text-input>
        <div fixed-32></div>
    </cc-flex-row>
    <cc-flex-row>
        <cc-icon name="expr:size" padded right-gap></cc-icon>
        <cc-number-input id="width" title="Width" .formatter=${VZ} @end=${this.#Lc} flex>
            <cc-icon name="expr:w" slot="before"></cc-icon>
        </cc-number-input>
        <cc-number-input id="height" title="Height" .formatter=${VZ} @end=${this.#Lc} flex>
            <cc-icon name="expr:h" slot="before"></cc-icon>
        </cc-number-input>
        <div fixed-32></div>
    </cc-flex-row>
</cc-flex-col>`}#_p(t){ZI(t.detail),this.#fe.blur()}#Lc(){YI(this.#j.value,this.#X.value)}},"es-animation-properties":class extends ww{#hb;#Qm;firstUpdated(){this.#hb=this.find("#duration"),this.#Qm=this.find("#fps"),super.firstUpdated()}refresh(){this.#hb.value=EO.duration,this.#hb.fps=this.#Qm.value=EO.fps}render(){return Ib`
<cc-flex-col>
    <cc-flex-row>
        <cc-icon name="workflow:Stopwatch" padded right-gap></cc-icon>
        <cc-time-input id="duration" title="Duration" min="1" @change=${this.#lm} flex></cc-time-input>
        <cc-picker id="fps" title="Frame rate" @change=${this.#hm} .items=${sB} flex></cc-picker>
        <div fixed-32></div>
    </cc-flex-row>
</cc-flex-col>
        `}#lm(t){TW(t.detail)}#hm(t){this.#hb.fps=t.detail,zW(t.detail)}},"es-timeline-control":WZ,"es-easing-control":FZ,"es-export-image":class extends uB{#dx=!1;constructor(){super(mB)}render(){return Ib`<cc-flex-col>
            <cc-flex-row>
                <div class="label">Format</div>
                ${this.renderFormat()}
            </cc-flex-row>
            ${this.#fx()}
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}onFormatChanged(){}#fx(){return this.#px()}#px(){return 1!==this.common.format?Lb:Ib`
        <cc-flex-row>
            <div class="label">Transparency</div>
            <cc-switch .checked=${this.#dx} @change=${this.#gx}></cc-switch>
            <cc-flex-col>Use background color as transparent color</cc-flex-col>
        </cc-flex-row>
        `}#gx(t){this.#dx=t.detail}getClient(t){const e=this.common,i=this.getCommonSettings();let n;switch(e.format){case 1:n="/assets/animator/export/gif.js",this.#dx&&(i.transparent=[e.background.r,e.background.g,e.background.b]);break;case 0:n="/assets/animator/export/apng.js"}return new pB(i,t,null,n)}validate(){return!0}async onSuccess(t,e,i){this.showPreview({file:await t.getFile(),type:"image",width:e,height:i})}},"es-export-video":class extends uB{#mx={codec:null,quality:1,keyframeInterval:0,keyframeCount:0};constructor(){super(pZ),this.common.background=De.white}onFormatChanged(){this.#mx.codec=this.item.codecs[0].value}render(){return Ib`<cc-flex-col>
            ${this.#yx()}
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}applyConstraints(){super.applyConstraints();const t=this.#mx;switch(t.codec??=this.item.codecs[0].value,t.keyframeInterval){case 0:t.keyframeCount=0;break;case 2:t.keyframeCount=this.common.fps;break;case 1:t.keyframeCount=Math.floor(this.common.fps/2);break;case 3:t.keyframeCount||(t.keyframeCount=this.common.fps)}}#yx(){const t=this.#mx;return Ib`
        <cc-flex-row>
            <div class="label">Format</div>
            ${this.renderFormat()}
            <cc-picker id="codec" title="Codec" .value=${t.codec} .items=${this.item.codecs} @change=${this.#vx} flex></cc-picker>
        </cc-flex-row>
        <cc-flex-row>
            <div class="label">Quality</div>
            <cc-picker title="Quality level" .value=${t.quality} .items=${dZ} @change=${this.#bx} flex></cc-picker>
            <cc-picker title="Keyframing mode" .value=${t.keyframeInterval} .items=${fZ} @change=${this.#xx} flex></cc-picker>
            <cc-number-input title="Frame interval" .disabled=${3!==t.keyframeInterval} .value=${t.keyframeCount} @update=${this.#wx} .formatter=${hZ} flex></cc-number-input>
        </cc-flex-row>
        `}#vx(t){this.#mx.codec=t.detail}#bx(t){this.#mx.quality=t.detail}#xx(t){this.#mx.keyframeInterval=t.detail,this.applyConstraints(),this.requestUpdate()}#wx(t){this.#mx.keyframeCount=t.detail}getClient(t){const e=this.common,i=this.#mx,n={...this.getCommonSettings(),alpha:e.background.a<1,quality:i.quality,keyframe:i.keyframeCount,codec:null};let s;switch(e.format){case 0:n.codec="avc",s="/assets/animator/export/mp4.js";const e=n.size;(e.width%2||e.height%2)&&(e.width-=e.width%2,e.height-=e.height%2,t.size=new Fi(e.width,e.height)),n.alpha=!1;break;case 1:n.codec=1===i.codec?"vp8":"vp9",s="/assets/animator/export/webm.js"}return new pB(n,t,null,s)}validate(){return!0}async onSuccess(t,e,i){this.showPreview({file:await t.getFile(),type:"video",width:e,height:i})}},"es-export-sequence":class extends uB{#Mx="img-";#Sx=!1;constructor(){super(yB)}validate(){return!0}onFormatChanged(){}render(){return Ib`<cc-flex-col>
            ${this.#kx()}
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}#kx(){return Ib`
<cc-flex-row>
    <div class="label">Format</div>
    ${this.renderFormat()}
    <cc-text-input title="File prefix" placeholder="File prefix" .value=${this.#Mx} @change=${this.#_x} flex></cc-text-input>
</cc-flex-row>
<cc-flex-row>
    <div class="label"></div>
    <cc-switch .checked=${this.#Sx} @change=${this.#Ix}></cc-switch>
    <div>Remove all files from directory before export</div>
</cc-flex-row>
`}#_x(t){this.#Mx=t.detail}#Ix(t){this.#Sx=t.detail}getClient(t){const e="/assets/animator/export/seq.js",i=this.item,n=this.common,s={...this.getCommonSettings(),clean:this.#Sx,prefix:this.#Mx,extension:i.extension,image:i.image||null};return 5===n.format?new gB(s,t,null,e):new pB(s,t,null,e)}onSuccess(t,e,i){}},"es-export-svg":class extends cB{#Cx=!0;#Lx=0;#Nx=0;#jx=2;#Tx={click:0,enter:0,leave:0};#Tc;#B=0;#E={x:2,y:2};constructor(){super(uZ);const t=t=>this.#B===t,e=(e,i)=>({title:e,get value(){return t(i)},selectable:!0,preventClose:!0,action:()=>{this.#B=i}}),i=(t,e)=>this.#E[t]===e,n=(e,n,s)=>({title:e,get value(){return i(n,s)&&!t(3)},get disabled(){return t(3)},selectable:!0,preventClose:!0,action:()=>{this.#E[n]=s}});this.#Tc=["Scale mode",e("Clip & Contain",0),e("Contain",1),e("Cover",2),e("Fill",3),"Align horizontally",n("Left","x",1),n("Center","x",2),n("Right","x",3),"Align vertically",n("Top","y",1),n("Middle","y",2),n("Bottom","y",3)]}onFormatChanged(){}render(){return Ib`<cc-flex-col>
            <cc-flex-row>
                <div class="label">Format</div>
                ${this.renderFormat()}
                <cc-action-button quiet @click=${this.#zx}>
                    <cc-icon name="workflow:Settings"></cc-icon>
                </cc-action-button>
            </cc-flex-row>
            ${this.#Zp()}
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}#zx(t){bv(this.#Tc,t.target,"bottom-right",!0)}#Zp(){switch(this.common.format){case 0:return this.#Ax();case 2:return this.#Px();case 1:return this.#Dx()}return Lb}#Ex(t){return Ib`<cc-flex-row>
            <div class="label">${t}</div>
            <cc-picker .value=${this.#Cx} .items=${cZ} @change=${this.#Ox} flex></cc-picker>
        </cc-flex-row>`}#Ox(t){this.#Cx=t.detail,this.requestUpdate()}#Dx(){return[Ib`
        <cc-flex-row>
            <div class="label">Start animation</div>
            <cc-picker .value=${this.#Lx} .items=${aZ} @change=${this.#Rx} flex></cc-picker>
        </cc-flex-row>
        `,this.#Wx()]}#Wx(){return 2===this.#Lx?Ib`<cc-flex-row>
                <div class="label"></div>
                <div flex>Update the CSS variable <b>--animation-progress</b> using a value between 0 and 1.</div>
            </cc-flex-row>`:1===this.#Lx?this.#Ex("On mouse out"):[Ib`<cc-flex-row>
                <div class="label">On mouse over</div>
                <cc-picker .value=${this.#Nx} .items=${lZ} @change=${this.#Bx} flex></cc-picker>
            </cc-flex-row>`,this.common.repeat?this.#Ex("On animation end"):Lb]}#Rx(t){this.#Lx=t.detail,this.#Cx=!0,this.requestUpdate()}#Bx(t){this.#Nx=t.detail,this.requestUpdate()}#Px(){return this.common.repeat?this.#Ex("On animation end"):Lb}#Ax(){return Ib`
            <cc-flex-row>
                <div class="label">Start animation</div>
                <cc-picker .value=${this.#jx} .items=${oZ} @change=${this.#Ux} flex></cc-picker>
            </cc-flex-row>
            <cc-flex-row>
                <div class="label">Mouse interaction</div>
                <cc-flex-col class="input-group" flex>
                    <div>On click</div>
                    <cc-picker .value=${this.#Tx.click} .items=${rZ} data-on="click" @change=${this.#$x}></cc-picker>
                </cc-flex-col>
                <cc-flex-col class="input-group" flex>
                    <div>On mouse enter</div>
                    <cc-picker .value=${this.#Tx.click} .items=${rZ} data-on="enter" @change=${this.#$x}></cc-picker>
                </cc-flex-col>
                <cc-flex-col class="input-group" flex>
                    <div>On mouse leave</div>
                    <cc-picker .value=${this.#Tx.click} .items=${rZ} data-on="leave" @change=${this.#$x}></cc-picker>
                </cc-flex-col>
            </cc-flex-row>
        `}#$x(t){const e=t.target.dataset.on;this.#Tx[e]=t.detail}#Ux(t){this.#jx=t.detail,this.applyConstraints(),this.requestUpdate()}validate(){return!0}async abort(){return!1}async execute(t){const e=await this.getFile();if(!e)return 1;let i,n;switch(this.common.format){case 1:i=W$,n={...this.common,freeze:this.#Cx,start:this.#Lx,onHover:this.#Nx};break;case 2:i=n$,n={...this.common,repeatDur:0,freeze:this.#Cx};break;case 0:i=_U,n={...this.common,load:this.#jx,actions:[this.#Tx.click,this.#Tx.enter,this.#Tx.leave],filterFuncs:!0}}n.align=this.#E,n.scale=this.#B,n.size=null;try{const t=await e.createWritable(),s=await i(su,EO,n);await t.write(new Blob([s.outerHTML],{type:"image/svg+xml"})),await t.close(),this.showPreview({file:await e.getFile(),type:"svg",width:n.bounds.width,height:n.bounds.height})}catch(t){return console.error(t),_C(t),2}return 0}},"es-export-lottie":class extends cB{constructor(){super(gZ)}onFormatChanged(){}render(){return Ib`<cc-flex-col>
            <cc-flex-row>
                <div class="label">Format</div>
                ${this.renderFormat()}
            </cc-flex-row>
            ${this.renderCommonSettings()}
        </cc-flex-col>
        `}validate(){return!0}async abort(){return!1}async execute(t){const e=await this.getFile();if(!e)return 1;const i={...this.common};try{const t=await e.createWritable();await(1===this.common.format?rH:sH)(t,su,EO,i)}catch(t){return console.error(t),_C(t),2}return 0}}};function MY(){const t=new Yg;return t.title="",Um(t),Xo({document:t,timeline:new SO,board:new wi(0,0,1280,720)})}class SY extends cv{getInput(){return lh()?null:oh()}#Fx;getData(t){return t?.length?(this.#Fx=t[0].nodeType,this.#Vx(t)):null}createManifest(t){const e=super.createManifest(t);return e.nodeType=this.#Fx,e.source=su.id,e}createData(){return{images:new Set,fonts:new Set,elements:new Map}}*iterateAllData(t){if(t.images&&t.images.size>0)for(const e of t.images)yield[1,e.getBlob()];t.fonts&&t.fonts.size>0&&(yield[4,t.fonts]),t.elements&&t.elements.size>0&&(yield[6,t.elements])}#Vx(t){if(0===t.length)return null;const e=this.createData(),i=[su.id];return this.#Gx(yu(t,!1,!0),e,i,(t=>{let i=t.parent?.globalMatrix;i&&!i.isIdentity||(i=null),e.elements.set(t.id,{element:t,parentMatrix:i})})),0===e.elements.size?null:e}#Gx(t,e,i,n){if(t)for(const s of t)this.collectNodeData(s,e,i),s.hasFragments&&this.#Gx(s.fragments,e,i),s.hasChildren&&this.#Gx(s.children(),e,i),n?.(s,e,i)}collectNodeData(t,e,i){if(!t.isElement)return!0;if(t instanceof dg){const i=t.imageResource;return!!i&&(e.images.add(i),!0)}return t instanceof xg&&t.collectFonts(e.fonts),!0}}class kY extends hv{constructor(){super(...arguments),this.#hi=new Map,this.#Hx=new Set,this.idsOldToNew=new Map,this.idsNewToOld=new Map,this.transformScaleOptions=2}#hi;#Hx;#Zx;supportsItem(t){switch(t){case 1:case 6:case 4:return!0}return!1}addItem(t,e){1===t?this.#Hx.add(e):this.#hi.set(t,e)}async resolve(){if(!this.#hi.has(6))return!1;if(3===this.manifest.nodeType||4===this.manifest.nodeType){if(lh())return Dt.showToast("Select an element before pasting filters","info"),!1;if(!rh()?.supportsFilters)return Dt.showToast("Selection does not support filters","warning"),!1}let t,e;try{const i=await this.deserializeItem(4);i?.size&&(await kr(...i),i.clear()),this.#Zx=await this.#Yx();const n=await this.deserializeItem(6);if(!n)return this.#Qx(null),!1;if([t,e]=await this.#Jx(n),!t?.length)return e?.clear(),Dt.showToast("Clipboard is empty","info"),!1;Jo();const s=function(t,e,i,n,s){let r;if(e){const e=new Set;for(const i of t){if(!i.isElement){s?.delete(i);continue}let t=s?.get(i);t=t?t.clone().multiply(i.localMatrix):i.localMatrix.clone(),t?.isIdentity&&(t=null);for(const n of i.localBoundsPoints)e.add(t?t.transformPoint(n):n)}const o=wi.fromIterablePoints(e);e.clear(),r=zl(o,Fu(!1),i,null,n)}else r=Fu(!0);return r?.isIdentity&&(r=null),r}(t,!this.options?.isShift,this.options?.position,this.options?.isAlt,e);for(const i of t){if(!i.isElement)continue;let t;e.has(i)?(t=e.get(i),s&&(t=t.clone().preMultiply(s))):t=s,this.applyMatrixToElement(i,t)}return e.clear(),fh(this.appendResolvedNodes(t)),this.#Zx=null,!0}catch(i){return e?.clear(),this.#Qx(t),!1}}#Qx(t){if(this.#Zx){const t=cg();for(const e of this.#Zx)t.delete(e.id);this.#Zx=null}if(t?.length>0)for(const e of t.splice(0))try{e.remove(),e.dispose()}catch{}}applyMatrixToElement(t,e){Lg(t,e||new $i,this.transformScaleOptions,!0)}appendResolvedNodes(t){return this.#qx(su,t),t[0].isFilterContainer?this.#Kx(t):t[0].isFilter?this.#Xx(t):t[0].isLayer?this.#tw(t):this.#ew(t)}#Kx(t){const e=rh();let i=!1,n=e.filters;n||(n=t.shift(),i=!0);const s=[];for(const e of t){const t=[...e.children()];if(s.push(...t),n.insertAdjacentNodes("append",...t),e.hidden||!e.visible)for(const e of t)e.hidden=!0;e.remove(),e.dispose()}return Rm(),i?(e.filters=n,[e.filters]):s}#Xx(t){const e=rh();let i=!1,n=e.filters;return n||(i=!0,n=e.filters=new mu),n.insertAdjacentNodes("append",...t),Rm(),i?[n]:t}#tw(t){return su.insertAdjacentNodes("append",...t),Rm(),t}#ew(t){return $m(t),t}#qx(t,e){for(const[i,n]of function(t,e){const i=new Map,n=t.nodeCache,s=t=>{const e=t.id;if(t.id=Ct(),n.has(e)&&n.get(e)===t&&n.delete(e),n.set(t.id,t),i.set(t,e),t.hasFragments)for(const e of t.fragments)s(e);if(t.hasChildren)for(const e of t.children())s(e)};for(const t of e)s(t);return i}(t,e))this.idsOldToNew.set(n,i.id),this.idsNewToOld.set(i.id,n)}shouldWrapInGroup(t){return!t.isTransformable}async#Jx(t){const e=[],i=new Map,n=Au();for(let{parentMatrix:s,element:r}of t.values())this.#iw(r)?(n&&r.isLayer&&(r=Km(r,!0)),e.push(r),s&&r.isElement&&i.set(r,s)):this.#nw(r);return[e,i]}async#Yx(){const t=new Set,e=cg();for(const i of this.#Hx){const n=await ag.idFromData(i);if(e.has(n))continue;const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength),r=Skia.SkImage.MakeFromEncoded(s);if(!r)continue;const o=new ag(r,n);e.add(o)?t.add(o):o.dispose()}return this.#Hx.clear(),t.size>0?t:null}#sw(t){const e=[...t.children()];for(let t=0;t<e.length;t++)this.#iw(e[t])&&(e.splice(t,1),t--);for(const t of e)this.#nw(t)}#iw(t){return t.supportsFilters&&t.filters&&(this.#iw(t.filters)||this.#nw(t.filters)),t.hasChildren&&this.#sw(t),!0}#nw(t){t.remove(),t.dispose()}async deserializeItem(t){if(!this.#hi.has(t))return null;const e=this.#hi.get(t);return this.#hi.delete(t),this.deserializeData(e)}clean(){this.#hi.clear(),this.#Hx.clear(),this.#Zx=null,this.idsOldToNew.clear(),this.idsNewToOld.clear(),super.clean()}}nv(new class extends dv{constructor(){super(...arguments),this.reverseKeyframes=!1}isAvailable(){return!lh()||(Dt.showToast("Select an element before pasting","info"),!1)}handle(t){if(!EO)return!1;const e=function(t,e){const i=JO;if(e)for(const e of t.values())$E(Nt(e)?e:e.list,!0);const n=[];for(const e of Th(QE))for(const[s,r]of t.entries()){let t,o;if(Nt(r)?t=r:(t=r.list,o=r.meta),0===t.length)continue;let a=EO.getAnimation(e,s);if(a){if(HR.has(s)&&!HR.get(s)(a.keyframes[0].value,t[0].value))continue}else{if(a=EO.createAnimation(e,s),!a)continue;if(!EO.addAnimation(e,a))continue}const l=null!=o?ZR.get(s)?.(o,e,a):null;for(let e of t)e=e.clone(!0),e.offset+=i,l?.(e),a.addKeyframe(e),n.push(e)}return n}(t,this.options?.isAlt);return e?.length?(Jo(),_o(TO),ZO(e,!1),oR(),!0):(Dt.showToast("Selection doesn't support clipboard data","warning"),!1)}}(ea,"web expressive/keyframes"),new class extends uv{getInput(){const t=function(){const t=new Map;if(YR(((e,i,n)=>{const s=i.animator.id;if(!t.has(s))return void t.set(s,n);const r=t.get(s);HR.has(s)&&!HR.get(s)(r[0].value,n[0].value)||r.push(...n)}),null,!1),0===t.size)return t;let e=Number.POSITIVE_INFINITY;for(const i of t.values()){i.sort(UE);for(let t=i.length-1;t>0;t--)i[t].offset===i[t-1].offset&&i.splice(t,1);i[0].offset<e&&(e=i[0].offset)}if(isFinite(e)&&0!==e)for(const i of t.values())for(let t=0;t<i.length;t++)i[t]=i[t].clone(),i[t].offset-=e;return t}();return t?.size?t:null}getData(t){return t}}(ea,"web expressive/keyframes"),QR),nv(new class extends dv{isAvailable(){return!UO()||(Dt.showToast("Select at least one keyframe","info"),!1)}handle(t){return this.options?.isAlt&&(t=t.inverse),JR(t)}}(ea,"web expressive/easing"),new class extends uv{getInput(){return null}getData(t){return t}}(ea,"web expressive/easing"),null),nv(new class extends kY{#rw;constructor(t,e){super(t,e),this.transformScaleOptions=0}supportsItem(t){return 100===t||super.supportsItem(t)}async resolve(){return this.#rw=await this.deserializeItem(100),super.resolve()}appendResolvedNodes(t){const e=super.appendResolvedNodes(t);if(this.#rw?.size){const t=(i=[...this.#rw.values()],n=this.idsOldToNew,_O(i,EO.map,su,n,void 0));this.#rw.clear(),t&&oR()}var i,n;return e}applyMatrixToElement(t,e){e&&!e.isIdentity&&Lg(t,e,0)}shouldWrapInGroup(t){if(!t.isTransformable)return!0;if(!this.#rw?.size)return!1;const e=this.idsNewToOld.get(t.id);if(!e)return!1;const i=this.#rw.get(e);if(!i||!i.animations?.length)return!1;for(const t of i.animations)if(t.animator.startsWith("node.transform."))return!0;return!1}clean(){this.#rw=null,super.clean()}}(ea,"web expressive/elements"),new class extends SY{createData(){const t=super.createData();return t.animations=new Map,t}*iterateAllData(t){yield*super.iterateAllData(t),t.animations&&t.animations.size>0&&(yield[100,t.animations])}collectNodeData(t,e,i){super.collectNodeData(t,e,i);const n=EO.getEntry(t);return n&&e.animations.set(t.id,n),!0}}(ea,"web expressive/elements"),Gm),vI.push({description:"Supported file types",accept:{"application/vnd.expressive.animator":[".eaf"],"application/vnd.expressive.canvas":[".ecf"],"image/svg+xml":[".svg"],"application/pdf":[".ai",".pdf"],"application/postscript":[".ai"],"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],"image/webp":[".webp"]}}),bI.push({description:"Importable file types",accept:{"application/vnd.expressive.canvas":[".ecf"],"image/svg+xml":[".svg"],"application/pdf":[".ai",".pdf"],"application/postscript":[".ai"],"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],"image/webp":[".webp"]}});let _Y=0;Fa((t=>("Space"!==t.code||Vl instanceof bN&&Vl.isEditorFocused||("keydown"===t.type?t.repeat||(_Y=t.timeStamp):"keyup"===t.type&&t.timeStamp-_Y<=300&&(qO?dR():hR())),!1))),Fa((function(t,e){const i=ol(e);return!!Vl&&(i&&!Vl.isPanning&&Vl.onKeyboardStatusChange(t,"keydown"===t.type),"keydown"===t.type?("Space"===t.code&&Vl.allowSpaceBarPan&&Vl.startPan(2),!!Vl.isPanning||Vl.onKeyDown(t)):"keyup"===t.type&&("Space"===t.code&&Vl.allowSpaceBarPan?(Vl.endPan(2),!0):!!Vl.isPanning||Vl.onKeyUp(t)))}));const IY=uL(yA),CY=uL(iA);[["V",0,()=>WD("transform"),0],["A",0,()=>WD("path"),0],["P",0,()=>WD("pen"),0],["R",0,()=>WD("rect"),0],["E",0,()=>WD("ellipse"),0],["O",0,()=>WD("regular-polygon"),0],["S",0,()=>WD("star"),0],["W",0,()=>WD("poly"),0],["L",0,()=>WD("line"),0],["T",0,()=>WD("text"),0],["G",0,()=>WD("gradient"),0],["I",0,()=>WD("color-picker"),0],["Z",0,()=>WD("zoom"),0],["H",0,()=>WD("pan"),0],["F1",0,()=>HI(),0],["F",1,()=>rI.toggle(),0],["P",1,()=>xI(),0],["N",1,()=>{0!==WebGLBuffAddr0x9002.valueOf()&&window.open(window.location.href,"_blank","resizable")},0],["O",1,()=>wI(),0],["I",1,()=>_I(),0],["S",1,()=>kI(!1),0],["S",3,()=>kI(!0),0],["E",1,()=>$I(),0],["Z",1,LI,0],["Z",3,NI,0],["V",1,()=>jk(!1,!1),0],["V",5,()=>jk(!0,!1),0],["V",3,()=>jk(!1,!0),0],["Y",1,()=>function(t){const e=sI;e.value=e.value===t?null:t}("layers"),0],["A",1,()=>Dk(),0],["A",3,()=>Ek(),0],["0",1,Ok,0],["9",1,function(){Il(Eh())},0],["8",1,function(){Il(rh()?.globalBounds.bounds)},0],["=",1,Rk,0],["=",3,Rk,0],["=",7,Rk,0],["-",1,Wk,0],["-",3,Wk,0],["-",7,Wk,0],["X",0,()=>tI.toggle(),0],["X",2,()=>Vk(!1),0],["X",6,()=>Vk(!0),0],["K",1,qk,0],["C",1,Nk,1],["X",1,Lk,1],["D",1,x_,1],[["Delete","Backspace"],0,()=>{fm()?w_():T_()},1],["G",1,S_,1],["G",3,k_,1],["M",1,I_,1],["M",5,__,1],["M",3,C_,1],[",",1,b_,1],["L",1,v_,1],["]",1,Bk,1],["]",3,Uk,1],["[",1,$k,1],["[",3,Fk,1],["R",1,()=>CY(CN,"ruler"),1],[";",1,()=>CY(vk,"enabled"),1],[";",5,()=>CY(vk,"locked"),1],["'",1,()=>CY(uk,"enabled"),1],["'",5,()=>CY(uk,"front"),1],["S",2,()=>IY(tk,"enabled"),1],[",",3,()=>IY(tk,"pixel"),1],[";",3,()=>IY(vk,"snap"),1],["'",3,()=>IY(uk,"snap"),1],[".",3,()=>IY(fL,"points"),1],["/",3,()=>IY(fL,"bounds"),1],["\\",3,()=>IY(Ik,"snap"),1],["C",1,CW,2],["X",1,LW,2],["D",1,()=>bW(!1),2],["D",5,()=>bW(!0),2],["R",1,xW,2],[["Delete","Backspace"],0,()=>{UO()?fm()?w_():T_():vW()},2],["ArrowRight",1,()=>RR(!0),2],["ArrowDown",1,()=>RR(!1),2],["ArrowLeft",1,()=>WR(!0),2],["ArrowUp",1,()=>WR(!1),2]].forEach((([t,e,i,n])=>function(t,e,i,n=0){Ra.has(n)||Ra.set(n,new Map);const s=Ra.get(n);s.has(e)||s.set(e,new Map);const r=s.get(e);if(Array.isArray(t))for(const e of t)r.set(e,i);else r.set(t,i)}(t,e,i,n)));const LY=new Set([Ys.movePointsBy]),NY=new Set([Ys.addPointAfter,Ys.deletePoints]);Iy=(t,e,i)=>{if(LY.has(e))return!1;let n;if(NY.has(e)){const s=t.points.length;n=t=>t.length===s?t:e(t,...i)}else n=t=>e(t,...i);return zY(t,Kf.id,n)};const jY=new Set([Kn,Zn,Yn]),TY=new Set([ns,os]);function zY(t,e,i){const n=EO.getAnimation(t,e);if(!n)return!1;let s=!1;return n.keyframes.forEach((e=>{const r=i(e.value,n,t);r!==e.value&&(n.setKeyframeValue(e,r),s=!0)})),s}ly=(t,e,i)=>{if(jY.has(e))return!1;let n;if(TY.has(e)){const s=t.nodes.length;n=t=>t.length===s?t:e(t,...i)}else n=t=>e(t,...i);return zY(t,$d.id,n)},cy=function(t){if(!uy(t))return!1;let e=!1;const i=t.nodes,n=i.length;return zY(t,$d.id,(t=>{if(i===t)return t;let s=!1;for(let r=0;r<n;r++){if(i[r].type!==t[r].type||i[r].joint!==t[r].joint||1===i[r].joint)continue;const n=i[r].handleIn&&!t[r].handleIn,o=i[r].handleOut&&!t[r].handleOut;(n||o)&&(s||(t=t.slice(),s=!0,e=!0),t[r]=t[r].withHandles(t[r].handleIn||t[r].point,t[r].handleOut||t[r].point))}return t})),e},function(...t){for(const e of t)$l.set(e.name,e)}(new class extends GL{#nx=new RO;#ow=!0;#aw;constructor(t){super([[null,"selection"],[0,"selection"],[1,"selection-move"],[4,"selection-move"],[5,"selection-resize"],[6,"rotate"],[3,()=>nl?"selection-anchor":"selection-move"],[2,t=>t.isHorizontal?"resize-v":"resize-h"],[7,_R]],[[5,(t,e)=>t.element===e.element&&t.handle===e.handle],[6,(t,e)=>t.element===e.element&&t.point===e.point],[7,IR]]),this.#aw=t,this.addAction(0,YL(null,this.#lw)),this.addAction(1,this.#cw),this.addAction(2,{draw:bL(this.#uw),down:this.#hw,move:this.#dw,up:this.#fw}),this.addAction(5,{down:this.#pw,move:this.#gw,up:this.#mw}),this.addAction(6,{draw:bL(this.#yw),down:this.#vw,move:this.#bw,up:this.#xw}),this.addAction(3,{down:this.#ww,move:this.#Mw,up:this.#Sw}),this.addAction(4,{draw:bL(this.#kw),down:this.#_w,move:this.#Iw,up:this.#Cw}),this.addAction(7,this.#Lw),Qc("transform-rotate",1,"gray"),qc("transform-rotate-radius",2),qc("transform-rotate-offset",10),Qc("transform-origin",1,"magenta"),qc("transform-origin-radius",6),Jc("transform-origin-bg","#fff"),Jc("transform-angle","#fb08")}get handleMoveByArrows(){return Ua!==this.#aw}get name(){return"transform"}get showMotionPath(){return this.#ow}set showMotionPath(t){this.#ow!==t&&(this.#ow=t,this.update())}get allowGuideCreation(){return!0}activate(){super.activate(),Io(LO,this.#Nw),Io(Ut,this.#jw),Io(ne,this.#Tw),vR()}deactivate(){super.deactivate(),Co(ne,this.#Tw),Co(Ut,this.#jw),Co(LO,this.#Nw),mR=yR=null,SR()}onSelectionChanged(){vR(),super.onSelectionChanged()}onStateChanged(){vR(),super.onStateChanged()}onDocumentTreeChanged(){vR(),super.onDocumentTreeChanged()}#Tw=t=>{mR&&t.has(mR)&&SR(XO)};#Nw=()=>{bR(),this.#ow&&!pR.isEmpty&&ic()};#jw=()=>{vR(),this.#ow&&!pR.isEmpty&&ic()};onKeyboardStatusChange(t){this.isWorking||(cl(t)||ll(t))&&this.updateCursor()}getHoverInfo(t){if(!this.isMouseInside)return kR;const e=function(t){const e=gk;if(!e||e.isEmpty)return null;const i=vk();if(!i.enabled||i.locked)return null;const n=2*bl/vl;for(const i of e)if(i.isHorizontal){if(Math.abs(i.position-t.y)<=n)return i}else if(Math.abs(i.position-t.x)<=n)return i;return null}(t);if(e)return[2,e];const i=this.#zw();if(i){if(function(t,e){return e.distanceTo(jR(t))<=tu("transform-origin-radius")}(i,t))return[3,i];const e=function(t,e){return t.getSidePointPosition(e,tu("tool-handle-radius"),!1)}(i.globalBounds,t);if(e)return[5,{handle:e,element:i}];const n=function(t,e){const i=(Yc.get("transform-rotate-radius").original+2)/Gc,n=tu("transform-rotate-offset"),s=t.globalBounds;for(const t of s.points)if(e.distanceTo(NR(s.middle,t,n))<=i)return t;return null}(i,t);if(n)return[6,{element:i,point:n}];if(this.#ow){const e=function(t){if(pR.nodes.length<2)return null;const e=wu(mR);e&&(t=e.inversePoint(t.x,t.y));const i=eu("path-node-radius",e),n=gR.size?eu("path-handle-radius",e):null,s=pR.getPositionInfo(t,i,n,i);return!s||null!=s.handle&&!gR.has(s.index)?null:(s.element=mR,s.animation=yR,s)}(t);if(e)return[7,e]}}const n=EL(t,nl);return n?!sl&&uh(n)?[4,n]:[1,n]:kR}drawTool(){const[t,e]=this.hover;let i=null;1!==t&&4!==t||uh(e)||(i=e);let n=rh();if(n?.isElement||(n=null),!i&&!n)return;const s=vL();this.#Aw(i,n,Nh()),s.restore()}#Aw=(t,e,i)=>{const n=pc();if(t&&ML(t),e){for(const t of i)t!==e&&SL(t,!1);e.isTransformable?(this.#ow&&CR(),SL(e,!0),function(t,e){const i=Xc("transform-rotate"),n=tu("transform-rotate-radius"),s=tu("transform-rotate-offset"),r=e.globalBounds;for(const e of r.points)t.drawCircle(NR(r.middle,e,s),n,i)}(n,e),TR(n,e)):SL(e,!1)}};#zw(){const t=rh();return t&&t.isElement&&t.isTransformable?t:null}#lw=(t,e)=>{if(this.#ow&&t.position.equals(e)){const t=xR();if(t?.length&&GO(t))return!0}return!1};#cw=(t,e)=>{if(sl?bh(e,!0):dh(e,!1),!uh(e))return ZL;const i=this.#_w(t,e);return i.drawIfMoved=!0,[{draw:bL(this.#kw),move:this.#Iw,up:this.#Cw},i]};#kw=t=>{if(t.drawIfMoved&&!t.moved)return this.#Aw(t.element,t.element,t.selected);1===t.selected.length?(SL(t.element,!1),this.#ow&&CR(),TR(pc(),t.element)):t.delta.isZero?kL(t.commonBox,!1):kL(t.commonBox.shifted(t.delta.x,t.delta.y),!1)};#_w=(t,e)=>{Zl("selection-move");const i=[...Nh()],n=RL(i);return wh(e),this.#nx.start(),{start:[e.position,e.anchor],position:t.position,delta:Be.ZERO,commonBox:n,moved:!1,drawIfMoved:!1,cloned:!1,element:e,selected:i}};#Iw=(t,e,i)=>{if(i){if(rl){Jo(),Ia(),e.cloned=!0;const t=[];let i;for(const n of e.selected){const s=Hm(n)||n;t.push(s),n===e.element&&(i=s)}e.element=i,e.selected=t,fh(t),wh(i),Ca(),ec()}LS(e.selected)}let n=t.position.sub(e.position);if(n.isZero)return;n=sl?function(t,e){if(!MS)return e;e=JS(t.sidePoints(!0),e,ZS(e.angle,!0));const i=t.middle;return fS(i.add(e),i),e}(e.commonBox,n):VS(e.commonBox,n);const s=e.delta;if(n.equals(s))return;e.delta=n,n=n.sub(s);const r=nl;Fg(e.selected,n,r)&&(r||e.moved||(e.moved=!0,wR()),ic())};#Cw=(t,e)=>{if(NS(),e.cloned||this.#nx.hasChanged())return!0;const[i,n]=e.start,s=!i.equals(e.element.position)||!n.equals(e.element.anchor);return e.moved||sl||dh(e.element,!1),ic(),s};onMoveByArrowsFinish(t){ga()}#ww=(t,e)=>{const i=nl,n=[...Nh()],s=e.position;let r=s;const o=wu(e);return o&&(r=o.transformPoint(r)),LS(),this.#nx.start(),{start:s,detached:i,parentMatrix:o,angleReference:r,element:e,selected:n,moved:!1}};#Mw=(t,e)=>{let i;i=sl?HS(t.position,e.angleReference):FS(t.position);const n=i.sub(e.parentMatrix?e.parentMatrix.transformPoint(e.element.position):e.element.position);if(n.isZero)return;let s;s=e.detached?function(t,e){if(e.isZero)return!1;let i=!1;for(const n of t)Hg(n,n.position.add(Zg(n,e)),void 0)&&(i=!0);return i}(e.selected,n):Fg(e.selected,n,!1),s&&(e.moved||(e.moved=!0,this.#ow&&wR()),ec())};#Sw=(t,e)=>(NS(),!!this.#nx.hasChanged()||!e.start.equals(e.element.position));#yw=t=>{for(const e of t.selected)SL(e,!1);const e=pc();TR(e,t.element),t.position&&e.drawLine(t.pivot,t.position,Xc("transform-origin"))};#vw=(t,{element:e,point:i})=>{const n=[...Nh()],s=Math.sign(e.globalMatrix.a*e.globalMatrix.d*e.localMatrix.a*e.localMatrix.d)||1,r=e.totalRotate,o=wu(e),a=o?o.transformPoint(e.position):e.position,l=a.getPositiveAngleTo(t.position);return LS(n),this.#nx.start(),{sign:s,start:r,current:l,position:null,pivot:a,element:e,selected:n}};#bw=(t,e)=>{let i=t.position;i=sl?GS(e.pivot,t.position):GS(e.pivot,t.position,1);let n=e.pivot.getPositiveAngleTo(i),s=e.current;n>=270&&n<=360&&s>=0&&s<=90?s+=360:n>=0&&n<=90&&s>=270&&s<=360&&(s-=360);let r=n-s;r=Math.round(r)*e.sign,Ug(e.selected,r)&&(e.position=i,e.current=n,ec())};#xw=(t,e)=>(NS(),!!this.#nx.hasChanged()||e.start!==e.element.totalRotate);#pw=(t,{handle:e,element:i})=>{const n=[...Nh()];return LS(n),this.#nx.start(),{handle:e,element:i,start:i.scale,position:i.globalBounds.getPointAtPosition(e.x,e.y),selected:n}};#mw=(t,e)=>(NS(),!!this.#nx.hasChanged()||!e.start.equals(e.element.scale));#gw=(t,e)=>{const i=function(t,e,i,n=!1){const s={x:1,y:1};let r=t.localBounds.getPointAtPosition(e.x,e.y);return t.globalMatrix.isIdentity||(i=t.globalMatrix.transformInversePoint(i)),t.anchor.isZero||(r=r.sub(t.anchor),i=i.sub(t.anchor)),2!==e.x&&(s.x=LR(i.x,r.x)),2!==e.y&&(s.y=LR(i.y,r.y)),n&&(s.x=s.y=function(t,e,i){return 2===i.x?e:2===i.y?t:t<0?e<0?-Math.sqrt(t*e):-t>e?t:e:e<0?-e>t?e:t:Math.sqrt(t*e)}(s.x,s.y,e)),s}(e.element,e.handle,FS(t.position),sl);$g(Nh(),i)&&ec()};#uw=t=>{!function(t){const e=xl(),i=wl(),n=Xc("guide-hover"),s=pc();t.isHorizontal?s.drawLine({x:e.x,y:t.position},{x:i.x,y:t.position},n):s.drawLine({x:t.position,y:e.y},{x:t.position,y:i.y},n)}(t.guide)};#hw=(t,e)=>(e.isHidden=!0,LS(),ec(),{guide:e,start:e.position});#dw=(t,e)=>{const i=e.guide;i.position=FS(sl?t.position.rounded():t.position,i.isHorizontal?"x":"y")[i.isHorizontal?"y":"x"],ic()};#fw=(t,e)=>{NS(),ec();const{guide:i,start:n}=e;if(i.isHidden=!1,i.position===n)return!1;const s=yk();return(s.exists(i.position,i.isHorizontal,i)||(i.isHorizontal?t.canvasPosition.y<0:t.canvasPosition.x<0))&&s.remove(i),!0};#Lw=(t,e)=>null!=e.percent?rl?this.#Pw(t,e):this.#Dw(t,e):null!=e.handle?rl?this.#Ew(t,e):this.#Ow(t,e):nl?this.#Rw(t,e):rl?this.#Ww(t,e):!sl&&function(t){return!(!yR||!yR.keyframes[t])&&FO(yR.keyframes[t])}(e.index)?this.#Bw(t,e):this.#Uw(t,e);#$w(){mR&&yR&&(yR.invalidate(),EO.updateTarget(mR,yR.animator.property.id,JO),SR()),ic()}#Rw=(t,e)=>{const i=e.animation.keyframes[e.index];FO(i)||YO(i,!1);let n=i.value;1===n.joint?n=new fn(n.point,n.type,2,n.point,n.point):2===n.joint&&gn(n)||(n=new fn(n.point,n.type,2,n.handleIn||n.point,n.handleOut||n.point));let s=!1;n!==i.value&&(i.value=n,s=!0,this.#$w()),e.handle=1;const r=this.#Ow(t,e);return s&&(r[1].changedJoint=!0),r};#Ow=(t,e)=>{const i=e.animation,n=i.keyframes[e.index];let s=!1;nl&&2!==n.value.joint&&(n.value=An(n.value,2),this.#$w(),s=!0);const r=wu(e.element);let o=n.value.point;r&&(o=r.transformPoint(o)),LS(),this.#Fw(e.element,i,r);const a=Sn(n.value,e.handle),l={element:e.element,animation:i,keyframe:n,matrix:r,handle:e.handle,start:a,position:a,angleReference:o,changedJoint:s};return[{move:this.#Vw,up:this.#Gw},l]};#Vw=(t,e)=>{let i=sl?GS(e.angleReference,t.position):FS(t.position);e.matrix&&(i=e.matrix.inversePoint(i.x,i.y)),e.position.equals(i)||(e.position=i,e.keyframe.value=On(e.keyframe.value,i.x,i.y,e.handle),this.#$w())};#Gw=(t,e)=>(NS(),!!e.changedJoint||!e.start.equals(e.position));#Ew=(t,e)=>{const i=e.animation.keyframes[e.index];return i.value=Tn(i.value,e.handle),this.#$w(),ga(),ZL};#Dw=(t,e)=>{const i=e.animation,n=[i.keyframes[e.index],i.keyframes[e.index+1]],s=Xn([n[0].value,n[1].value],0,1,e.percent,nl);let r=!1;n[0].value!==s[0]&&(n[0].value=s[0],r=!0),n[1].value!==s[1]&&(n[1].value=s[1],r=!0),ZO(n,!0),r&&this.#$w();const o={element:e.element,matrix:wu(e.element),position:t.position,animation:i,pair:n,changed:r,mold:es(s,0,1,e.percent)};return[{move:this.#Hw,up:this.#Zw},o]};#Hw=(t,e)=>{let i=t.position;e.matrix&&(i=e.matrix.transformInversePoint(i));const n=is(i,e.mold),s=e.pair,r=Kn([s[0].value,s[1].value],0,1,n[0],n[1]);let o=!1;s[0].value!==r[0]&&(s[0].value=r[0],o=!0),s[1].value!==r[1]&&(s[1].value=r[1],o=!0),o&&(e.changed=!0,this.#$w())};#Zw=(t,e)=>e.changed;#Uw=(t,e)=>{const i=e.animation,n=i?.keyframes?.[e.index];if(!n)return ZL;let s=!1;if(sl?FO(n)?(VO(n),s=!0):YO(n,!0):YO(n,!1),s)return ZL;const r=this.#Bw(t,e);return r[1].deselect=!1,r};#Ww=(t,e)=>{const i=e.animation,n=i?.keyframes?.[e.index];return n?(VO(n),i.removeKeyframe(n)&&(_o(TO),this.#$w(),ga()),ZL):ZL};#Pw=(t,e)=>{const i=e.animation;let n=i.keyframes[e.index];if(!n)return ZL;let s=n.offset+e.percent*(i.keyframes[e.index+1].offset-n.offset);if(s=Math.round(s),i.getKeyframeAtOffset(s))return ZL;n=i.addKeyframeAtOffset(s),_o(TO),this.#$w(),YO(n,!1),e.index=i.getIndexOfKeyframe(n),e.node=n.value;const r=this.#Bw(t,e);return r[1].moved=!0,r};#Bw=(t,e)=>{const i=e.node.point,n=wu(e.element),s=xR(),r=e.animation,o=r.keyframes[e.index];Zl("node-move");let a=i,l=null;1===s?.length&&r.keyframes.length>1&&(0===e.index?l=r.keyframes[e.index+1].value.point:e.index===r.keyframes.length-1&&(l=r.keyframes[e.index-1].value.point)),n&&(a=n.transformPoint(a),l&&(l=n.transformPoint(l))),LS(),this.#Fw(e.element,r,n);const c={start:i,position:i,startReference:a,matrix:n,animation:r,selected:s,keyframe:o,angleReference:l,element:e.element,moved:!1,deselect:!0};return[{move:this.#Yw,up:this.#Qw},c]};#Yw=(t,e)=>{let i=sl?e.angleReference?GS(e.angleReference,t.position):HS(t.position,e.startReference):FS(t.position);if(e.matrix&&(i=e.matrix.inversePoint(i.x,i.y)),e.position.equals(i))return;const n=i.sub(e.position);e.position=i;for(const t of e.selected)t.value=Bn(t.value,n.x,n.y);e.moved=!0,this.#$w()};#Qw=(t,e)=>(NS(),!!e.moved||(e.deselect&&e.selected.length>1&&(GO(e.selected),YO(e.keyframe,!0)),!1));#Fw(t,e,i){if(!MS)return;const n=[t.position];for(const t of e.keyframes)n.push(t.value.point);zS(n,i)}}(2),new class extends VL{constructor(){super(),this.dblClickDelta=-1,this.defaultCanvasCursor="hand"}get name(){return"pan"}draw(){}onMouseLeftButtonDown(t){this.startPan(5)}onMouseUp(t){0===t.button&&this.endPan(5),super.onMouseUp(t)}onMouseLeftButtonUp(t){this.endPan(5)}onMouseLeftButtonMove(t){}},new class extends VL{#Jw=null;#qw=null;#Kw=!1;constructor(){super(),this.dblClickDelta=-1,this.defaultCanvasCursor="zoom-in"}get name(){return"zoom"}draw(){wL(this.#Jw,this.#qw)}#Xw(){this.isWorking?Zl("zoom"):Zl(rl?"zoom-out":"zoom-in")}onKeyboardStatusChange(t){!this.isWorking&&cl(t)&&this.#Xw()}onMouseLeftButtonDown(t){this.isWorking=!0,this.#Jw=t.position,this.#qw=null,this.#Kw=!0}onMouseLeftButtonMove(t){this.#Kw&&(this.#Kw=!1,this.#Xw()),!this.#qw&&this.#Jw.distanceTo(t.position)<=pc().getLineScale(10*bl)||(this.#qw=t.position,ic())}onMouseLeftButtonUp(t){if(this.#qw)Il(wi.fromPoints(this.#Jw,this.#qw),null,0);else{let e=null;nl&&(e=EL(t.position,!0)),e?Il(e.globalBounds.bounds):rl?_l(t.canvasPosition):kl(t.canvasPosition)}this.isWorking=!1,this.#Jw=this.#qw=null,this.#Xw(),ic()}},new class extends HL{get name(){return"rect"}onKeyDown(t){if(!this.isWorking)return super.onKeyDown(t);const e=this.element;if(!e)return!0;let i=!1;switch(al(t)){case"ArrowUp":e.radius=e.radius.add(.05*e.shape.diagonal/2),i=!0;break;case"ArrowDown":const t=e.radius.add(-.05*e.shape.diagonal/2);e.radius!==t&&(e.radius=t,i=!0);break;case"R":e.radius.isZero||(e.radius=new Qs(0),i=!0);break;default:return!0}return i&&(this.applyGradients(),kd(4)),!0}createElement(){return new Qp(new Js(0,0))}updateElement(t,e,i){let n=i.x-e.x,s=i.y-e.y,r=Math.abs(n),o=Math.abs(s);sl&&r!==o&&(r=o=Math.max(r,o),n=Math.sign(n)*r,s=Math.sign(s)*o);let a=Be.ZERO;rl?(a=new Be(r,o),r*=2,o*=2):(n<0||s<0)&&(a=new Be(n<0?r:0,s<0?o:0)),t.anchor=a,t.width=r,t.height=o}},new class extends HL{get name(){return"ellipse"}createElement(){return new Vp(new Zs(0,0))}updateElement(t,e,i){e=OL(t,e),i=OL(t,i);let n=e.sub(i),s=Math.abs(n.x),r=Math.abs(n.y);sl&&(s=r=Math.max(s,r),rl||(n=new Be(s*Math.sign(n.x),r*Math.sign(n.y)))),rl?(s*=2,r*=2,t.anchor=Be.ZERO):t.anchor=n.scale(.5),t.width=s,t.height=r}},new class extends HL{get name(){return"regular-polygon"}onKeyDown(t){if(!this.isWorking)return super.onKeyDown(t);const e=this.element;if(!e)return!0;let i=!1;switch(al(t)){case"ArrowUp":e.sides<1e3&&(e.sides++,i=!0);break;case"ArrowDown":e.sides>3&&(e.sides--,i=!0);break;case"ArrowRight":e.cornerRadius+=.1,i=!0;break;case"ArrowLeft":e.cornerRadius-=.1,i=!0;break;case"R":0!==e.cornerRadius&&(e.cornerRadius=0,i=!0);break;default:return!0}return i&&(this.applyGradients(),kd(4)),!0}snapMouseMovePoint(t){return this.isWorking&&sl?GS(this.startPoint,t):FS(t)}createElement(){return new Jp(new qs(5,0))}updateElement(t,e,i){e=OL(t,e),i=OL(t,i);const n=e.distanceTo(i);t.angle=rl?0:i.sub(e).angle+90,t.radius=n}},new class extends HL{#tM=1;get name(){return"star"}snapMouseMovePoint(t){return this.isWorking&&sl?GS(this.startPoint,t):FS(t)}get shouldMoveOriginToMiddle(){return!0}createElement(){return this.#tM=Oy.starRadiusRatio,new Kp(new Ks(5,0,0))}onKeyDown(t){if(!this.isWorking)return super.onKeyDown(t);const e=this.element;if(!e)return!0;let i=!1;switch(al(t)){case"ArrowUp":e.sides<1e3&&(e.sides++,i=!0);break;case"ArrowDown":e.sides>3&&(e.sides--,i=!0);break;case"ArrowRight":nl?e.innerCornerRadius+=.1:e.outerCornerRadius+=.1,i=!0;break;case"ArrowLeft":nl?e.innerCornerRadius-=.1:e.outerCornerRadius-=.1,i=!0;break;case"R":(e.innerCornerRadius||e.outerCornerRadius||e.innerRotate||e.outerRotate)&&(e.innerCornerRadius=e.outerCornerRadius=0,e.innerRotate=e.outerRotate=0,i=!0);break;default:return!0}return i&&(this.applyGradients(),kd(4)),!0}updateElement(t,e,i){e=OL(t,e),i=OL(t,i);const n=e.distanceTo(i);t.angle=rl?0:i.sub(e).angle+90,t.outerRadius=n,t.innerRadius=n*this.#tM}},new class extends HL{constructor(){super(),this.drawSelectionWhenWorking=!1}get name(){return"poly"}drawElement(t){CL(t.globalPath),TL(t.points,t.globalMatrix)}closeType(t){if(!this.element)return null;t=OL(this.element,t);const e=this.element.points,i=eu("path-node-radius");return t.distanceTo(e[0])<=i||!(t.distanceTo(e[e.length-2])<=i)&&null}onMouseEnter(t){this.isWorking||super.onMouseEnter(t)}onMouseLeave(t){this.isWorking||super.onMouseLeave(t)}snapMouseMovePoint(t){if(this.element&&sl){let e=this.element.points[this.element.points.length-2];return this.element.globalMatrix.isIdentity||(e=this.element.globalMatrix.transformPoint(e)),GS(e,t)}return FS(t)}onMouseHover(t){if(this.currentPoint=this.snapMouseMovePoint(t.position),this.isWorking){const t=this.element.shape.points;t[t.length-1]=OL(this.element,this.currentPoint),this.element.shape.invalidate(),this.element.invalidateShape(),this.applyGradients(),ec()}else ic()}onMouseLeftButtonMove(t){this.onMouseHover(t)}onKeyDown(t){return this.isWorking?("Escape"===t.code?(t.preventDefault(),this.commitElement(t.shiftKey)):"Enter"===t.code&&this.addCurrentPoint(sl),!0):super.onKeyDown(t)}onMouseLeftButtonDown(t){if(this.isWorking){const t=this.closeType(this.currentPoint);null===t?this.addCurrentPoint(!1):this.commitElement(t)}else super.onMouseLeftButtonDown(t),this.createBuilder(),this.isWorking=!0,ec()}onMouseLeftButtonUp(t){}commitElement(t=!1){this.element&&(this.element.shape.points.pop(),this.element.isClosed=t,this.element.shape.invalidate(),this.element.invalidateShape(),this.applyGradients(),this.saveElement(),kd(4),this.disposeBuilder(),this.isWorking=!1,LS(),ec())}addCurrentPoint(t){if(!this.currentPoint||!this.element)return!1;const e=OL(this.element,this.currentPoint),i=this.element.shape.points;if(!t&&e.equals(i[i.length-2]))return!1;const n=i[i.length-1];return i.push(e),this.element.shape.invalidate(),this.element.invalidateShape(),this.applyGradients(),ec(),kd(4),zS([n],this.element.globalMatrix),!0}createElement(t){return zS([t]),new Yp(new Ys([Be.ZERO,Be.ZERO],!1))}updateElement(t,e,i){t.shape.points.splice(-1,1,OL(t,i)),this.element.shape.invalidate(),t.invalidateShape()}disposeBuilder(){super.disposeBuilder(),this.isWorking=!1}},new class extends HL{constructor(){super(),this.drawSelectionWhenWorking=!1}get name(){return"line"}snapMouseMovePoint(t){return this.isWorking&&this.element&&sl?GS(this.startPoint,t):FS(t)}drawElement(t){LL(t.from,t.to,t.globalMatrix),TL(t.points,t.globalMatrix)}createElement(t){return new qp(new Xs(Be.ZERO,Be.ZERO))}updateElement(t,e,i){t.to=OL(t,i)}},new class extends GL{constructor(){super([[null,"node"],[0,"node"],[1,"node"],[2,wN]],[[2,MN]]),this.addAction(0,{down:this.#eM,move:this.#iM,up:this.#lw,draw:this.#nM}),this.addAction(1,this.#sM),this.addAction(2,this.#rM)}get name(){return"path"}activate(){Io(Qt,this.#oM),Ia(),gm();for(const t of Th(Mm))vm(t,!0);Ca(),super.activate()}deactivate(){super.deactivate(),Co(Qt,this.#oM),gm()}#oM=()=>{!this.isWorking&&this.update(),ic()};onKeyboardStatusChange(t){this.isWorking||(2===this.hover[0]?(ll(t)||cl(t))&&this.updateCursor():cl(t)&&this.update())}getHoverInfo(t){if(!this.isMouseInside)return xN;const e=$L(t,!0,rl,!1);if(e)return[2,e];if(!rl){const e=EL(t,!0);if(e)return[1,e]}return xN}drawTool(){const t=vL();for(const t of jh())PL(t,pm(t))||SL(t);const e=this.hover[1];e instanceof Oh&&!uh(e)&&ML(e),t.restore()}#eM=t=>{let e=null,i=null;return Mh(Mm)&&(e=[...Th(Mm)],rl&&(i=[t.position])),{start:t.position,end:t.position,elements:e,lasso:i}};#iM=(t,e)=>{e.end.equals(t.position)||(e.end=t.position,e.lasso&&e.lasso.push(t.position),ic())};#lw=(t,e)=>{const i=wi.fromPoints(e.start,t.position);return Ia(),e.elements?e.lasso?.length>1?function(t,e){const i=Skia.SkPath.MakeFit(t,2,!0);if(!i||i.isEmpty)return i?.delete(),gm();Lm(i,e),i.delete()}(e.lasso,sl):!i.isVisible&&fm()?xh():Cm(i,sl):(gh(i,!0,Mm),Cm(i,sl)),Ca(),ic(),!1};#nM=t=>{if(t.elements){const e=vL();for(const e of t.elements)PL(e,pm(e));t.lasso&&function(t){pc().drawPolyLine(t,Xc("path-line"))}(t.lasso),e.restore(),t.lasso||wL(t.start,t.end)}else wL(t.start,t.end)};#sM=(t,e)=>{const i=sl;if(uh(e)){if(i)return vh(e),ZL;Ia(),dh(e),vm(e),Ca()}else Ia(),dh(e,i),vm(e,i),Ca();return ZL};#aM=(t,e)=>{let i=t.position.sub(e.start);if(i.isZero)return;i=VS(e.box,i);const n=e.delta;i.equals(n)||(e.delta=i,i=i.sub(n),Fg(e.elements,i,!1)&&(e.changed=!0,ic()))};#lM=(t,e)=>(NS(),e.changed);#rM=(t,e)=>{switch(e.type){case 0:return this.#cM(t,e);case 1:return this.#uM(t,e);case 2:return this.#hM(t,e)}return ZL};#dM=(t,e)=>(NS(),e.changed);#cM=(t,e)=>{const i=e.element,n=e.index;let s=!1;if(nl&&uy(i)){s=dy(i,n),ym(i,n,!1);let t=Sn(i.nodes[n],1);return t=i.globalMatrix.point(t.x,t.y),ic(),LS(),[{move:this.#fM,up:this.#dM},{index:n,handle:1,element:i,pivot:t,changed:s}]}if(rl&&!Ly(i)){let t;return Ia(),Cy(i)?t=jy(i,new Set([n])):uy(i)&&(t=by(i,new Set([n]))),t&&(null==km(i,0)?Fm(i):(xm(i,n),ga())),Ca(),ic(),ZL}let r=!1;if(function(t,e){return dm.has(t)&&dm.get(t).has(e)}(i,n)){if(sl)return xm(i,n),ZL;r=!0}else ym(i,n,sl);let o=km(i,n);return o=i.globalMatrix.point(o.x,o.y),LS(),ic(),[{move:this.#pM,up:this.#gM},{position:o,pivot:o,changed:s,index:n,element:i,deselect:r,moved:!1}]};#uM=(t,e)=>{if(!uy(e.element))return ZL;if(rl&&yy(e.element,e.index,e.handleType))return ga(),ZL;LS();let i=e.node.point,n=e.element.globalMatrix;n.isIdentity||(i=n.point(i.x,i.y));const s={index:e.index,handle:e.handleType,element:e.element,pivot:i,changed:!1};return nl&&(s.changed=My(s.element,t.position,s.index,s.handle,!0)),[{move:this.#fM,up:this.#dM},s]};#fM=(t,e)=>{let i;i=sl?GS(e.pivot,t.position):FS(t.position),My(e.element,i,e.index,e.handle,nl)&&(e.changed=!0,ic())};#hM=(t,e)=>{if(null==e.percent||Ly(e.element))return ZL;let i=e.index;const n=e.percent,s=e.element;let r;if(rl){let t;if(uy(s))r=vy(s,i,n),r&&i++,t=s.nodes[i].point;else{if(!Cy(s))return ZL;r=Ny(s,i,n),r&&i++,t=s.points[i]}return t=s.globalMatrix.point(t.x,t.y),ym(s,i,!1),LS(),[{move:this.#pM,up:this.#gM},{position:t,pivot:t,changed:r}]}const o=UL(s);if(!o)return ZL;const a=Qn(o.nodes,i);if(null==a)return ZL;hy(s,i,a,n,nl)&&(r=!0),bm(s,[i,a],!1),ic();let l=s.globalMatrix;return l.isIdentity&&(l=null),[{move:this.#mM,up:this.#dM},{mold:es(o.nodes,i,a,n),from:i,to:a,matrix:l,element:s,changed:r}]};#pM=(t,e)=>{const i=sl?HS(t.position,e.pivot):FS(t.position),n=i.sub(e.position);if(n.isZero)return;e.moved=!0,e.position=i;let s=!1;for(const[t,e]of mm()){let i;Ly(t)?i=Py(t,n,e):Cy(t)?i=Ay(t,n,e):uy(t)&&(i=wy(t,n,e)),i&&(s=!0)}s&&(e.changed=!0,ic())};#gM=(t,e)=>(!e.moved&&e.deselect&&e.element&&ym(e.element,e.index,!1),this.#dM(t,e));#mM=(t,e)=>{let i=t.position;e.matrix&&(i=e.matrix.inversePoint(i.x,i.y));const n=is(i,e.mold);xy(e.element,e.from,e.to,n[0],n[1])&&(e.changed=!0,ic())}},new class extends HL{#yM=!1;#vM=null;#bM=null;#xM=null;#wM=1;#MM=null;#SM=new Set;#kM=!1;#_M;constructor(t){super(),this.defaultCanvasCursor="pen-start",this.#_M=t}get name(){return"pen"}deactivate(){this.#wM=1,this.#bM=this.#vM=this.#xM=null,this.#MM=null,this.#yM=!1,super.deactivate()}#IM(){this.#yM=!1,this.#bM=this.#vM=this.#xM=null,this.#wM=1,this.#CM(),this.#LM()}onStateChanged(){super.onStateChanged(),this.#IM()}onIsolationContextChanged(){super.onIsolationContextChanged(),this.#IM()}#CM(t,e){t??=Ul(),this.#MM=$L(t,!1,!0,!0,!0),this.#LM(),e?ec():ic()}#LM(){if(!this.isWorkingOrPanning)if(this.#MM)switch(this.#MM?.type){case 0:nl&&this.#MM.node instanceof fn||rl?Zl("node-move"):this.#NM?Zl("pen-continue"):Zl("pen-sub");break;case 2:Zl(rl?"node-mold":"pen-add")}else Zl(this.defaultCanvasCursor)}drawSelectedElement(t){PL(t,this.#MM?.element===t?this.#SM:null,!0)}drawElement(t){CL(t.globalPath);const e=t.nodes;if(this.#yM)null!=this.#xM&&AL(e[this.#xM],t.globalMatrix),this.isMouseLeftDown&&AL(e[this.#bM],t.globalMatrix);else for(const i of this.#SM)e[i]&&AL(e[i],t.globalMatrix);jL(t.path.nodes,this.#SM,t.globalMatrix)}#jM(t){if(this.element&&sl){let e=(this.#yM?this.element.nodes[this.#bM]:this.element.path.lastNode)?.point;if(e)return this.element.globalMatrix.isIdentity||(e=this.element.globalMatrix.transformPoint(e)),GS(e,t)}return FS(t)}snapMouseMovePoint(t){if(this.element&&sl){let e;e=this.#yM?this.#xM??this.#bM:this.element.nodes.length-2;let i=this.element.nodes[e].point;return this.element.globalMatrix.isIdentity||(i=this.element.globalMatrix.transformPoint(i)),GS(i,t)}return FS(t)}#TM(t,e){if(!t||t.nodes.length<=1)return!1;t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e));const i=this.#yM?this.#vM:0;return e.distanceTo(t.nodes[i].point)<=eu("path-node-radius",t.globalMatrix)}#zM(t,e){if(!t)return null;const i=t.path.nodes;let n,s;if(this.#yM)n=this.#vM,s=1===i[this.#bM].type?this.#bM+1:this.#bM-1;else{const t=i.length-1;if(t<=0)return null;n=0,s=t-1}t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e));const r=eu("path-node-radius",t.globalMatrix);return e.distanceTo(i[n].point)<=r||!(e.distanceTo(i[s].point)<=r)&&null}onMouseEnter(t){this.isWorking||super.onMouseEnter(t)}onMouseLeave(t){this.isWorking||super.onMouseLeave(t)}onKeyboardStatusChange(t){!this.isWorking&&this.#MM&&(cl(t)||ll(t)&&0===this.#MM.type&&this.#MM.node instanceof fn)&&this.#LM()}onKeyDown(t){return this.element?(this.#MM||("Escape"===t.code?(t.preventDefault(),this.#AM(sl)):"Enter"===t.code&&this.currentPoint&&(this.#PM(this.element,this.currentPoint),ec())),!0):super.onKeyDown(t)}#DM=null;#EM=null;get#NM(){if(!this.#MM)return!1;const t=this.#MM.node;if(null==t)return!1;if(2===t.type)return!0;if(1!==t.type)return!1;const e=this.#MM.element.path;if(1===e.nodes.length)return!0;const i=Qn(e.nodes,this.#MM.index,!0);return null!=i&&2===e.nodes[i].type}onMouseHover(t){if(!this.isWorking)return this.#CM(t.position),void(this.#MM?jS():this.currentPoint=this.snapMouseMovePoint(t.position));this.currentPoint=this.snapMouseMovePoint(t.position);const e=this.#TM(this.element,this.currentPoint);Zl(e?"pen-close":"pen"),this.#OM(this.element,this.currentPoint,e),ec()}#RM=!0;onMouseLeftButtonDown(t){if(this.#RM=!0,this.isWorking){this.currentPoint=this.snapMouseMovePoint(t.position);const e=this.#zM(this.element,this.currentPoint);null!==e&&(!1!==e||!sl||this.element instanceof Yp?this.#AM(e):(this.#WM(this.element),this.#RM=!1))}else if(this.#MM){this.#kM=!1,this.startPoint=this.currentPoint=t.position;const e=this.#MM.element,i=uy(e);switch(this.#MM.type){case 0:if(nl)i&&(this.#kM=dy(e,this.#MM.index),this.#MM.type=1,this.#MM.handleType=this.#wM,this.#BM());else if(rl)this.#UM();else{if(!this.#NM)return this.#SM.add(this.#MM.index),(i?by(e,this.#SM):jy(e,this.#SM))&&(ga(),LS(),this.#CM(t.position,!0)),void this.#SM.clear();this.#$M()}break;case 2:if(rl&&i)this.#FM();else if(null!=this.#MM.percent){let t=this.#MM.index;(i?vy(e,t,this.#MM.percent):Ny(e,t,this.#MM.percent))&&(ga(),this.#MM.index=++t,this.#MM.node=i?e.path.nodes[t]:e.points[t],this.#MM.percent=null,this.#MM.type=0,this.#SM.clear(),this.#SM.add(t),this.#UM())}}ic()}else Zl("pen"),super.onMouseLeftButtonDown(t),this.createBuilder(),this.#yM=!1,this.isWorking=!0,this.#SM.clear(),this.#SM.add(0),ec()}onMouseLeftButtonMove(t){if(this.#DM)return this.#DM(t);if(!this.element)return;const e=t.position;this.currentPoint&&e.equals(this.currentPoint)||(this.currentPoint=e,this.#VM(this.element,e),ec())}onMouseLeftButtonUp(t){if(this.#EM)this.#EM(t);else if(this.isWorking)return this.#RM&&this.#PM(this.element,this.currentPoint),Zl("pen"),void ec();this.startPoint=null,this.#wM=1,this.isWorking=!1,this.#DM=this.#EM=null,this.#MM=null,this.#SM.clear(),LS(),this.#CM(t.position)}#fu(){return this.#kM||this.#_M?.hasChanged()}applyGradients(){this.#yM||super.applyGradients()}#GM=null;#UM(){this.isWorking=!0,Zl("node-move"),this.#SM.clear(),this.#SM.add(this.#MM.index),LS(),this.#GM=this.#MM.element.globalMatrix.transformPoint(this.#MM.node),this.currentPoint=this.#GM,this.#DM=this.#HM,this.#EM=this.#ZM,this.#_M?.start()}#HM(t){const e=sl?HS(t.position,this.#GM):FS(t.position),i=e.sub(this.currentPoint);if(this.currentPoint=e,i.isZero)return;const n=this.#MM.element;(uy(n)?wy(n,i,this.#SM):Ay(n,i,this.#SM))&&(this.applyGradients(),this.#kM=!0,ec())}#ZM(t){this.#GM=null,this.#fu()&&ga()}#YM=null;#FM(){const t=this.#MM.percent,e=UL(this.#MM.element);if(!e)return;const i=this.#MM.index,n=Qn(e.nodes,i);null!=n&&(this.#SM.clear(),this.#SM.add(i),this.#SM.add(n),hy(this.#MM.element,i,n,t,nl)?(this.#kM=!0,ec()):ic(),this.#YM=es(e.nodes,i,n,t),this.#YM.element=this.#MM.element,this.#DM=this.#mM,this.#EM=this.#QM,this.#_M?.start())}#mM(t){const e=this.#YM;let i=t.position;e.element.globalMatrix.isIdentity||(i=e.element.globalMatrix.transformInversePoint(i));const n=is(i,e);xy(e.element,e.fromIndex,e.toIndex,n[0],n[1])&&(this.#kM=!0,this.applyGradients(),ec())}#QM(){this.#fu()&&ga(),this.#YM=null}#BM(){this.isWorking=!0,Zl("node-move"),this.#SM.clear(),this.#SM.add(this.#MM.index),this.#DM=this.#fM,this.#EM=this.#JM,LS();const t=Sn(this.#MM.node,this.#wM);t&&(this.currentPoint=this.#MM.element.globalMatrix.transformPoint(t)),this.#_M?.start()}#fM(t){const e=this.#jM(t.position);My(this.#MM.element,e,this.#MM.index,this.#MM.handleType,!0)&&(this.#kM=!0,this.applyGradients(),ec())}#JM(){this.#fu()&&ga()}#$M(){const{index:t,element:e}=this.#MM,i=e.path;if(1===i.nodes.length)this.#vM=0;else if(this.#vM=Qn(i.nodes,t,!0),null==this.#vM)return;this.isWorking=!0,this.element=e,this.#xM=null,this.#bM=t,this.#yM=!0,this.#MM=null,this.#kM=dy(e,t);const n=this.element.nodes[this.#bM];this.#wM=1===n.type?0:1,this.#SM.clear(),this.#SM.add(this.#bM),LS(),this.currentPoint=e.globalMatrix.transformPoint(n.point),this.#kM&&ec(),this.#_M?.start()}get shouldMoveOriginToMiddle(){return!this.#yM}#AM(t){if(this.element){if(this.#qM(t),this.#yM)null!==this.#xM&&1===Math.abs(this.#bM-this.#xM)&&(this.#SM.clear(),this.#SM.add(this.#bM),by(this.element,this.#SM),function(t){cy&&cy(t)}(this.element),ga()),this.element=null;else{const e=this.element.path.nodes;e.pop();const i=e.length-1;i>=0&&(1!==e[0].type&&(e[0]=Pn(e[0],1)),i>0&&e[i].type<2&&(e[i]=Pn(e[i],t?3:2))),this.element.path.invalidate(),this.element.invalidateShape(),this.applyGradients(),this.saveElement(),kd(4),this.disposeBuilder()}this.startPoint=null,this.#yM=!1,this.isWorking=!1,this.#SM.clear(),Zl(this.defaultCanvasCursor),LS(),ec()}}#PM(t,e){this.#qM(!1),t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e));let i,n=t.nodes;if(this.#yM)i=n[this.#bM],function(t,e,i){return Sy(t,ss,e,i)}(t,this.#bM,e)&&(this.#SM.clear(),this.#SM.add(this.#bM),this.#SM.add(this.#bM+1),1===i.type?(this.#xM=this.#bM+1,this.#vM++):2===i.type&&(this.#xM=this.#bM,this.#bM++));else{const s=new fn(e,0,2,null,null),r=n.length-1;i=n[r],3===i.type&&(n[r]=Pn(i,0)),n.push(s),t.path.invalidate(),t.invalidateShape(),this.#SM.clear(),this.#SM.add(r),this.#SM.add(r+1)}kd(4),zS([i.point],t.globalMatrix)}#qM(t){if(!this.element)return;const e=this.element.nodes;if(e.length<=2)return;if(!this.#yM){const i=e.length-2;return void(t?3!==e[i].type&&(e[i]=Pn(e[i],3)):3===e[i].type&&(e[i]=Pn(e[i],0)))}if(null==this.#xM||null==this.#vM)return;const i=e[this.#vM];if(i)switch(i.type){case 1:gy(this.element,t?3:0,this.#xM);break;case 2:t?(gy(this.element,3,this.#vM),gy(this.element,1,this.#xM)):gy(this.element,0,this.#xM);break;case 3:t?gy(this.element,1,this.#xM):(gy(this.element,0,this.#xM),gy(this.element,2,this.#vM))}}#OM(t,e,i){if(!this.element)return;if(this.#qM(i),t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e)),this.#yM)return void fy(t,Nn(t.nodes[this.#bM],e),this.#bM);const n=t.nodes,s=n.length-1;n[s]=Nn(n[s],e),t.path.invalidate(),t.invalidateShape(),this.applyGradients()}#VM(t,e){if(e=this.#jM(e),t.globalMatrix.isIdentity||(e=t.globalMatrix.transformInversePoint(e)),this.#yM){const i=this.#bM;return 2!==t.nodes[i].joint&&py(t,2,new Set([i])),void fy(t,zn(t.nodes[i],e,this.#wM),i)}const i=t.nodes,n=i.length-1;i[n]=zn(i[n],e,this.#wM),t.path.invalidate(),t.invalidateShape(),this.applyGradients()}#WM(t){if(this.#yM){const e=this.#xM;return void(null!=e&&yy(t,e,this.#wM))}const e=t.nodes,i=e.length-2;i<0||(e[i]=Tn(e[i],this.#wM),t.path.invalidate(),t.invalidateShape(),this.applyGradients())}disposeBuilder(){this.#yM?(this.#AM(!1),NS()):super.disposeBuilder(),this.isWorking=!1,this.#yM=!1}createElement(t){const e=new fn(Be.ZERO,1,2,null,null);return new Zp(new zs([e]))}updateElement(t,e,i){}},new class extends GL{#gg;#KM;constructor(t,e){super([[null,"selection"],[0,"selection"],[1,"selection"],[2,nN]],[[2,(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]]]),this.#gg=t,this.#KM=e,this.addAction(0,YL(!0)),this.addAction(1,this.#cs),this.addAction(2,{down:this.#XM,move:this.#tS,up:this.#eS,draw:this.#iS})}get name(){return"gradient"}activate(){super.activate(),this.#gg.subscribe(this.#nS)}deactivate(){this.#gg.unsubscribe(this.#nS),super.deactivate()}#nS=()=>this.update();getHoverInfo(t){if(!this.isMouseInside)return[0,null];const e=this.#sS(rh(),t);if(e)return[2,e];const i=EL(t,!0);return i&&Wm(i)?[1,i]:[0,null]}#sS(t,e){if(!t||!Wm(t))return null;const i=this.#rS(t);if(!i)return null;const n=XL(t,i),s=function(t,e){return Yc.get("tool-handle-radius").value/Math.max(e.lineScale,1e-4)}(0,n);e=n.transformInversePoint(e);const r=t=>e.distanceTo(t)<=s;let o;return i instanceof sn?r(i.end)?o=1:r(i.start)?o=0:r(i.center)&&(o=2):i instanceof rn?r(i.center.shifted(i.radius,0))?o=3:r(i.center.shifted(0,-i.radius))?o=4:r(i.center)&&(o=2):i instanceof on?r(i.end.shifted(i.endRadius,0))?o=6:r(i.end.shifted(0,-i.endRadius))?o=4:r(i.end)?o=1:r(i.start.shifted(0,i.startRadius))?o=5:r(i.start)&&(o=0):i instanceof an&&r(i.center)&&(o=2),null==o?null:[t,i,o]}drawTool(){const t=vL(),e=this.hover[1];if(e&&ML(e),!lh()){for(const t of jh())SL(t);this.#oS(rh())}t.restore()}#oS(t){if(Wm(t)){const e=this.#rS(t);e&&iN(e)(t,e)}}#aS(){return this.#gg.value?Yd:qd}#rS(t){const e=this.#aS().getValue(t);return e instanceof nn?e:null}#cs=(t,e)=>{if(sl?bh(e,!0):dh(e,!1),!uh(e))return ZL;if(this.#rS(e))return ZL;let i=e.globalMatrix.transformInversePoint(t.position);const n=ln(this.#aS().getValue(e),2,new wi(i.x,i.y,0,0)),s=this.#XM(t,[e,n,1]);return s.prevent=10,[{move:this.#tS,up:this.#eS,draw:this.#iS},s]};#iS=t=>{if(t.prevent)return;const e=vL();t.draw(t.element,t.gradient),e.restore()};#XM=(t,[e,i,n])=>(LS(),{type:n,start:t.position,element:e,gradient:i,prevent:0,update:eN(i),draw:iN(i),changed:!1,property:this.#aS(),isAbsolute:this.#KM.value,selected:[...Th(Wm)]});#tS=(t,e)=>{e.prevent&&t.position.distanceTo(e.start)>e.prevent&&(e.prevent=0),e.gradient=e.update(e.type,e.element,e.gradient,t.position),Ld(e.selected,e.property,Ng(e.element,e.gradient,!e.isAbsolute))&&(e.changed=!0)};#eS=(t,e)=>(NS(),e.changed)}(tI,iI),new class extends VL{#lS=null;constructor(t,e,i){super(),this.defaultCanvasCursor="picker",this.dblClickDelta=-1,this.isFillSelected=t||{value:!0},this.isGradientAbsolute=e||{value:!0},this.watcher=i}get name(){return"color-picker"}deactivate(){super.deactivate(),this.#lS=null}onStateChanged(){this.#lS=null,super.onStateChanged()}onIsolationContextChanged(){this.#lS=null,super.onIsolationContextChanged()}draw(){if(lh()&&!this.#lS)return;const t=vL();this.#lS&&!uh(this.#lS)&&ML(this.#lS);for(const t of Th(Wm))SL(t);t.restore()}onMouseHover(t){let e=EL(t.position,!0);null==e||Wm(e)||(e=null),e!==this.#lS&&(this.#lS=e,ic())}onKeyboardStatusChange(t){cl(t)&&Zl(rl?"picker-alt":this.defaultCanvasCursor)}onMouseLeftButtonDown(t){if(!this.#lS)return;let e=rh();if(null!=e&&!Wm(e)&&(e=null,ah()>1))for(const t of Th(Wm)){e=t;break}if(null!=e)this.copyStyleToElements(e,this.#lS)&&(Oy.update(e),ga());else{const t=this.#lS;rl?this.copyStyleProperties(Oy,t)&&(Oy.update(t),ga()):this.copyStyleProperties(t,Oy)&&kd(this.isFillSelected.value?2:3)}}copyStyleProperties(t,e){const i=sl?this.isFillSelected.value?"fill":"stroke":null,n=!nl;return e instanceof Up?this.#cS(t,e,i,n):(this.watcher?.start(),this.#cS(t,e,i,n)||this.watcher?.hasChanged())}copyStyleToElements(t,e){const i=sl?this.isFillSelected.value?"fill":"stroke":null,n=!nl;this.watcher?.start();let s=!1;if(rl)if(uh(e))for(const e of Th(Wm))this.#cS(t,e,i,n)&&(s=!0);else s=this.#cS(t,e,i,n);else for(const t of Th(Wm))this.#cS(e,t,i,n)&&(s=!0);return s||this.watcher?.hasChanged()}#cS(t,e,i,n=!0){if(t===e)return!1;let s;const r=e instanceof Up?(t,i)=>{e.setValue(t,i)&&(s=!0)}:(t,i)=>{void 0!==i&&Id(e,t,i)&&(s=!0)},o=null!=t.localBounds&&null!=e.localBounds;if("stroke"!==i){let i=t.fill;!this.isGradientAbsolute.value&&o&&i instanceof nn&&(i=i.toRelative(t.localBounds).toAbsolute(e.localBounds)),r(Yd,i),n&&r(Zd,t.fillOpacity)}if("fill"!==i){let i=t.strokeBrush;!this.isGradientAbsolute.value&&o&&i instanceof nn&&(i=i.toRelative(t.localBounds).toAbsolute(e.localBounds)),r(qd,i),n&&r(Jd,t.strokeOpacity),r(Kd,t.strokeLineWidth),r(Xd,t.strokeLineJoin),r(tf,t.strokeLineCap),r(ef,t.strokeMiterLimit),r(sf,t.strokeDashOffset),r(nf,t.strokeDashArray?.slice()),r(rf,t.strokeDashPathLength)}return s}onMouseLeftButtonMove(t){}onMouseLeftButtonUp(t){}applyFillBrush(t){return Ld(Th(Wm),Yd,(()=>t.clone()))}applyStrokeBrush(t){return Ld(Th(Wm),qd,(()=>t.clone()))}}(tI,iI,null),new bN(!0)),BI.push({value:"svg",title:"SVG",description:"SMIL, CSS, JS",icon:"workflow:Code",content:"es-export-svg"},{value:"lottie",title:"Lottie",description:"JSON, dotLottie",icon:"expr:lottie",content:"es-export-lottie"},{value:"video",title:"Video",description:"MP4, WebM",icon:"workflow:VideoFilled",content:"es-export-video"},{value:"image",title:"Image",description:"APNG, GIF",icon:"workflow:Image",content:"es-export-image"},{value:"seq",title:"Sequence",description:"SVG, PNG, JPEG",icon:"workflow:Multiple",content:"es-export-sequence"}),kk||(kk=!0,ik(),sk((function(){if(Mk&&Ik().snap)for(const t of Mk)t.bounds.isVisible&&RS(t.bounds)})),_k=!1,J([bk,"Artboard"],[xk,"ArtboardList"]),_k?(Uo({id:wk,copy:null,delete:null,init:t=>t instanceof wi?new xk(new bk(t)):t instanceof bk?new xk(t):t,update(t){Mk=t},serialization:ra(20,(()=>Mk))}),$o({id:wk,get:function(){return Sk?.id??Mk?.first?.id??null},set:function(t){Sk=Mk?t?Mk.find(t)??Mk.first:Mk.first:null}})):(Sk=new bk(wi.ZERO,""),Mk=new xk(Sk),Uo({id:wk,copy:It,delete:function(){},update(t){Mk.setItemBounds(Sk,t||wi.ZERO)},serialization:ra(20,Ck)}))),La=function(){return qO||_||Vl?.isWorkingOrPanning},await async function(t,i,n,s,r){X_.subscribe(RD,!1);const o=r.querySelector("[data-text-placeholder]");function a(t,e,i){e&&r.setAttribute("error",""),i?o.innerHTML=t:o.textContent=t}await async function(t){const e=document.querySelector('meta[name="expressive:service-worker"]');if(!e)return;const i=await window.navigator.serviceWorker.register(e.getAttribute("content"));i.addEventListener("updatefound",(async()=>{if(i.active&&t()){await navigator.setAppBadge();try{await i.showNotification("New version available",{body:`A new version of ${aI} is available. Restart the app to upgrade.`,icon:"/icons/icon-192.png",tag:"update-available",badge:"/icons/icon-96.png"})}catch{}}}))}(FD),a("Loading components...");try{await async function(t,e=""){await OD({shell:tx,button:ux,"action-button":hx,"action-group":Mx,divider:Pw,icon:Sx,"css-icon":kx,"number-input":Cw,"text-input":kw,"time-input":_w,popover:Px,picker:Ex,menu:Kx,"menu-item":qx,slider:Fx,"slider-input":Gw,switch:Vx,progressbar:Gx,dialog:Hx,kbd:Jx,"context-menu":Xx,toast:Dw,"scroll-container":tw,"icon-cycle":ew,"icon-switch":iw,"icon-toggle":sw,"icon-toolbar":nw,accordion:rw,"brush-thumb":Nw,"color-thumb":jw,"color-handle":Tw,"alpha-slider":zw,"color-wheel":Aw,"dynamic-container":Ew,"pin-point":Ww,"pin-point-button":$w,"flex-col":Fw,"flex-row":Vw,tabs:Hw,"rich-list":Zw,"file-input":Yw,"loading-dialog-content":Qw,"confirm-dialog-content":Jw,"static-accordion":Sw},"cc-"),await OD({"brush-switch":ND,"brush-input":TD,"brush-control-solid":zD,"brush-control-linear-gradient":AD,"brush-control-radial-gradient":PD,"brush-control-radial-focal-gradient":DD,"brush-control-sweep-gradient":ED,"color-text":aC,"color-control":sC,"gradient-slider":lC,"action-menu":eC,"font-select":gC,"active-element-accordion":dC,"about-dialog-content":yC,"upgrade-dialog-content":RC,"setup-dialog-content":IC,"new-project-dialog-content":$C,"sidebar-tab-content":yP,"tree-view-control":pD,"file-bar":_A,"menubar-controls":IA,"zoom-control":kA,"align-control":lL,"mask-control":XC,"canvas-control":rA,"snapping-control":vA,"path-op-control":gA,"path-joint-control":lA,"path-contour-control":cA,"grid-properties":KP,"stroke-settings":_P,"compositing-settings":dP,"compositing-settings2":mP,"paragraph-control":$P,"text-control":PP,"clip-group-control":GP,"fx-blur":oP,"fx-drop-shadow":cP,"fx-color-adjust":nP},"es-"),await OD(t,e)}(t)}catch(t){return a("Failed to load components",!0),!1}const l=mv();a("Loading assets...");try{await async function(){const t=[];document.querySelectorAll('meta[name^="expressive:icon-set:"]').forEach((e=>{const i=e.getAttribute("name").split(":").pop(),n=e.getAttribute("content");t.push(async function(t,e){const i=await(await fetch(e)).text(),n=(new DOMParser).parseFromString(i,"image/svg+xml").documentElement,s="http://www.w3.org/2000/svg";for(const e of n.getElementsByTagNameNS(s,"symbol")){const i=document.createElementNS(s,"svg");for(i.setAttribute("viewBox","0 0 18 18");e.firstChild;)i.appendChild(e.firstChild);const n=`${t}:${e.id}`;Jb.set(n,i)}}(i,n))})),await Promise.all(t)}();const t=new Set(["expr:unknown","workflow:ChevronDown","workflow:ChevronRight","workflow:LockClosed","workflow:VisibilityOff","workflow:Add","workflow:CheckmarkCircle","workflow:AddCircle","workflow:Effects","expr:visibility-bar"]);for(const e of JI.values())e&&t.add(e);!function(t,e){e??=qb;for(const i of t)e.has(i)||(Jb.has(i)?e.set(i,A(Jb.get(i))):e.set(i,null))}(t)}catch(t){return a("Failed to load assets",!0),!1}let c=!FD()&&await async function(){return OC("a5779c761ad3cdd0fae8499b9f774c90c60ba1d1915aa2ff")}(),u=!1;if(u=1===await async function(t){return OC("09e94e72e25049fbcdb4f2b1ddb303b6b6d7a63c0ebe7e29",t)}(l),c&&!u&&VD(),u||0===WebGLBuffAddr0x8ed68.valueOf()){a("");const t="tb577cf43048be7e2c293bc10ab6aa96874cb55f95323aee6";let e;if(e=window[t],delete window[t],await VI(e),0===WebGLBuffAddr0x34d7b.valueOf())return!1}await async function(t,e){if(FD())return!1;e("Setup...");const i=await async function(){const t=[{id:"license",title:"License agreement",content:{title:"End-User License Agreement",data:{type:"license",value:await hL()}},primary:{title:"Accept & continue",action:t=>t.next()}},{id:"theme",title:"Theme settings",content:{title:"Set the Tone",data:{type:"theme",description:"Opt for the perfect visual ambiance that suits your preference and environment.\n                        Select between our elegant Light and Dark themes to achieve the ideal creative experience."}},primary:{title:"Continue",action:t=>t.next()}}];return t.push({id:"fonts",title:"Local fonts",content:{title:"Use the fonts on your computer",data:{type:"action",image:"/assets/animator/setup/fonts.png",description:"Create more expressive animations by using fonts installed on your computer"}},primary:{title:"Enable",action:async t=>{try{await window.queryLocalFonts()}catch{}t.next()}},secondary:{title:"Skip",action:t=>t.next()}},{id:"clipboard",title:"Clipboard access",content:{title:"Allow Copy & Paste",data:{type:"action",image:"/assets/animator/setup/clipboard.png",description:"Grant yourself the freedom to effortlessly duplicate and transfer text, images, and other graphics elements"}},primary:{title:"Enable",action:async t=>{try{await window.navigator.clipboard.read()}catch{}t.next()}},secondary:{title:"Skip",action:t=>t.next()}},{id:"updates",title:"Updates",get hidden(){return!0},content:{title:"Stay up to date",data:{type:"action",image:"/assets/animator/setup/notifications.png",description:"Show a notification when a new version of Expressive Animator is available to use"}},primary:{title:"Enable",action:async t=>{try{await Notification.requestPermission()}catch{}t.next()}},secondary:{title:"Skip",action:t=>t.next()}},{id:"install",title:"Install",content:{title:"Install as a progressive web application",data:{type:"action",image:"/assets/animator/setup/install.png",description:"Enhanced user experience on par with native desktop apps without downloading and running executable files"}},primary:{title:"Install",action:async t=>{await async function(){if(null===vD)return;vD.prompt();const{outcome:t}=await vD.userChoice;"accepted"!==t||bD||(bD=!0,MC())}(),t.close()}},secondary:{title:"Skip",action:t=>t.close()}}),{title:"Application setup",items:t}}();return await xv(document.createElement("es-setup-dialog-content"),i),VD(),i.callback&&await i.callback(),xC("AppSetupCompleted"),!0}(0,a),a("Loading engine...");try{await async function(t){t??={},t.font||(t.font=document.querySelector('meta[name="expressive:font"]')?.getAttribute("content")),window.Skia||(window.Skia=await(t?.skia||e)()),await async function(t=null,e){if(mr)return!0;if(mr=Skia.SkFontMgr.MakeDefault(),t){const e=await fetch(t).then((t=>t.ok?t.blob():null)),i=await(e?.arrayBuffer());if(i){const t=mr.setFallback(i);if(t?.length){for(const i of t){if(!pr&&i.familyName&&(pr=i.familyName),i.instances?.length)for(const t of i.instances){const i=t.familyName||"",n=t.styleName||"Regular",s={family:i,style:n,fullName:`${i} ${n}`,postscriptName:t.postScriptName,blob:async()=>e};hr.set(t.postScriptName,s)}yr.set(i.familyName,[...hr.values()])}_r(t)}}}if(!await async function(){return"denied"!==(await navigator.permissions.query({name:"local-fonts"})).state}())return!1;try{const t=await window.queryLocalFonts(e?{postscriptNames:e}:void 0);if(0===t?.length)return!1;for(const e of t)hr.has(e.postscriptName)||(hr.set(e.postscriptName,e),yr.has(e.family)?yr.get(e.family).push(e):yr.set(e.family,[e]));return!0}catch{return!1}}(t.font),await async function(){customElements.define("drawing-surface",Dl),await customElements.whenDefined("drawing-surface"),ml=new Dl,ml.addEventListener("connect",vc),ml.addEventListener("disconnect",bc),yl=new El(ml),yl.addEventListener("update",yc),ml.ruler.theme=yl,gl=Wc}(),await async function(){_o(Et,No);const t=[];_o(Ot,(e=>t.push(e))),t.length&&await Promise.all(t),_o(Rt),function(...t){for(const e of t)ko.delete(e)}(Et,Ot,Rt)}()}()}catch{return a("Failed to load engine",!0),!1}Dt={showToast:vv,addFailedFonts:()=>{}};let h=!1;window.launchQueue&&window.launchQueue.setConsumer((({files:t})=>{t.length&&(yD=t[0])}));const d=yD;let f;d&&(yD=null,a("Opening project..."),h=await MI(d)),h||ua(await async function(){const t=document.querySelector('meta[name="expressive:demo-file"]');if(!t)return MY();try{const e=await fetch(t.getAttribute("content"));return await gM(await e.arrayBuffer())}catch{return MY()}}(),!0),a("Loading editor...");try{customElements.define("es-app",i),await customElements.whenDefined("es-app"),f=document.createElement("es-app"),l.appendChild(f),await f.updateComplete,sI.change("layers")}catch(t){return a("Failed to load editor",!0),!1}return await async function(t=0){await async function(){Da=await navigator.keyboard.getLayoutMap()}(),$a(t);const e={capture:!0};window.addEventListener("keydown",Za,e),window.addEventListener("keyup",Ya,e)}(1),Q_.subscribe($D,!0),a("Starting..."),function(t){window.addEventListener("unload",(()=>{t.dispose(),mr&&(hr.clear(),yr.clear(),dr.clear(),fr.clear(),gr.clear(),pr=null,mr.reset(),mr.delete(),mr=null),t.remove()}),{once:!0})}(f),setTimeout((async()=>{WD("transform"),Ok(),cc(),h||xI(!0),r.remove()}),100),xC("AppStarted"),!0}(wY,tB,0,0,document.getElementById("expr-overlay"));
